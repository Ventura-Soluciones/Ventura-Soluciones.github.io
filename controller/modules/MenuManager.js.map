{"version":3,"file":"MenuManager.js","names":["MenuManager","constructor","this","oModel","JSONModel","getModel","loadHardcodedMenuData","hardcodedMenuData","selectedKey","navigation","key","text","icon","fixedNavigation","console","log","setData","filterNavigationByRole","userRole","aNavigation","getProperty","aFilteredNavigation","filter","item","setProperty","sSelectedKey","bKeyExists","some","length","getData","refresh","setSelectedKey","getSelectedKey","__exports","__esModule"],"sources":["MenuManager.ts"],"sourcesContent":["import JSONModel from \"sap/ui/model/json/JSONModel\";\r\n\r\n/**\r\n * MenuManager - Handles navigation menu logic\r\n */\r\nexport class MenuManager {\r\n    private oModel: JSONModel;\r\n\r\n    constructor() {\r\n        this.oModel = new JSONModel();\r\n    }\r\n\r\n    public getModel(): JSONModel {\r\n        return this.oModel;\r\n    }\r\n\r\n    public loadHardcodedMenuData(): void {\r\n        const hardcodedMenuData = {\r\n            \"selectedKey\": \"pagosMasivos\",\r\n            \"navigation\": [\r\n                {\r\n                    \"key\": \"configuracion\",\r\n                    \"text\": \"Configuración\",\r\n                    \"icon\": \"sap-icon://settings\"\r\n                },\r\n                {\r\n                    \"key\": \"pagosMasivos\",\r\n                    \"text\": \"Pagos Masivos\",\r\n                    \"icon\": \"sap-icon://money-bills\"\r\n                },\r\n                {\r\n                    \"key\": \"detracciones\",\r\n                    \"text\": \"Detracciones\",\r\n                    \"icon\": \"sap-icon://document\"\r\n                }\r\n            ],\r\n            \"fixedNavigation\": []\r\n        };\r\n        \r\n        console.log(\"Cargando datos de menú hardcodeados:\", hardcodedMenuData);\r\n        this.oModel.setData(hardcodedMenuData);\r\n    }\r\n\r\n    public filterNavigationByRole(userRole: string): void {\r\n        console.log(\"Filtrando navegación por rol:\", userRole);\r\n        \r\n        const aNavigation = this.oModel.getProperty(\"/navigation\") || [];\r\n        console.log(\"Navegación original:\", aNavigation);\r\n        \r\n        const aFilteredNavigation = aNavigation.filter((item: any) => {\r\n            if (userRole === 'admin') return true;\r\n            if (item.key === 'configuracion') return false;\r\n            return true;\r\n        });\r\n        console.log(\"Navegación filtrada:\", aFilteredNavigation);\r\n        \r\n        this.oModel.setProperty(\"/navigation\", aFilteredNavigation);\r\n        const sSelectedKey = this.oModel.getProperty(\"/selectedKey\");\r\n        const bKeyExists = aFilteredNavigation.some((item: any) => item.key === sSelectedKey);\r\n        if (!bKeyExists && aFilteredNavigation.length > 0) {\r\n            this.oModel.setProperty(\"/selectedKey\", aFilteredNavigation[0].key);\r\n        }\r\n        \r\n        console.log(\"Datos finales del modelo:\", this.oModel.getData());\r\n        \r\n        // Forzar actualización de la vista\r\n        this.oModel.refresh(true);\r\n        console.log(\"Modelo de menú actualizado\");\r\n    }\r\n\r\n    public setSelectedKey(key: string): void {\r\n        this.oModel.setProperty(\"/selectedKey\", key);\r\n    }\r\n\r\n    public getSelectedKey(): string {\r\n        return this.oModel.getProperty(\"/selectedKey\");\r\n    }\r\n} "],"mappings":"uEAKO,MAAMA,EAGTC,cACIC,KAAKC,OAAS,IAAIC,CACtB,CAEOC,WACH,OAAOH,KAAKC,MAChB,CAEOG,wBACH,MAAMC,EAAoB,CACtBC,YAAe,eACfC,WAAc,CACV,CACIC,IAAO,gBACPC,KAAQ,gBACRC,KAAQ,uBAEZ,CACIF,IAAO,eACPC,KAAQ,gBACRC,KAAQ,0BAEZ,CACIF,IAAO,eACPC,KAAQ,eACRC,KAAQ,wBAGhBC,gBAAmB,IAGvBC,QAAQC,IAAI,uCAAwCR,GACpDL,KAAKC,OAAOa,QAAQT,EACxB,CAEOU,uBAAuBC,GAC1BJ,QAAQC,IAAI,gCAAiCG,GAE7C,MAAMC,EAAcjB,KAAKC,OAAOiB,YAAY,gBAAkB,GAC9DN,QAAQC,IAAI,uBAAwBI,GAEpC,MAAME,EAAsBF,EAAYG,OAAQC,IAC5C,GAAIL,IAAa,QAAS,OAAO,KACjC,GAAIK,EAAKb,MAAQ,gBAAiB,OAAO,MACzC,OAAO,OAEXI,QAAQC,IAAI,uBAAwBM,GAEpCnB,KAAKC,OAAOqB,YAAY,cAAeH,GACvC,MAAMI,EAAevB,KAAKC,OAAOiB,YAAY,gBAC7C,MAAMM,EAAaL,EAAoBM,KAAMJ,GAAcA,EAAKb,MAAQe,GACxE,IAAKC,GAAcL,EAAoBO,OAAS,EAAG,CAC/C1B,KAAKC,OAAOqB,YAAY,eAAgBH,EAAoB,GAAGX,IACnE,CAEAI,QAAQC,IAAI,4BAA6Bb,KAAKC,OAAO0B,WAGrD3B,KAAKC,OAAO2B,QAAQ,MACpBhB,QAAQC,IAAI,6BAChB,CAEOgB,eAAerB,GAClBR,KAAKC,OAAOqB,YAAY,eAAgBd,EAC5C,CAEOsB,iBACH,OAAO9B,KAAKC,OAAOiB,YAAY,eACnC,EACH,IAAAa,EAAA,CAAAC,WAAA,MAAAD,EAAAjC,cAAA,OAAAiC,CAAA","ignoreList":[]}