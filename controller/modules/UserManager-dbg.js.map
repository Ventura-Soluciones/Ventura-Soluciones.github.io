{"version":3,"file":"UserManager-dbg.js","names":["UserManager","constructor","oCurrentUser","loadAuthenticatedUser","authData","sessionStorage","getItem","localStorage","parsedAuthData","JSON","parse","isAuthenticated","userInfo","console","log","setDefaultUser","error","id","name","email","role","status","companies","getCurrentUser","checkAuthentication","sAuthData","oAuthData","logout","removeItem","__exports","__esModule"],"sources":["UserManager.ts"],"sourcesContent":["/**\r\n * UserManager - Handles user authentication and management\r\n */\r\nexport class UserManager {\r\n    private oCurrentUser: any;\r\n\r\n    constructor() {\r\n        this.oCurrentUser = null;\r\n    }\r\n\r\n    public loadAuthenticatedUser(): any {\r\n        // Obtener datos de autenticación del almacenamiento\r\n        const authData: string | null = sessionStorage.getItem(\"finanb1_auth\") || localStorage.getItem(\"finanb1_auth\");\r\n        \r\n        if (authData) {\r\n            try {\r\n                const parsedAuthData = JSON.parse(authData);\r\n                if (parsedAuthData.isAuthenticated && parsedAuthData.userInfo) {\r\n                    this.oCurrentUser = parsedAuthData.userInfo;\r\n                    console.log(\"Usuario autenticado cargado:\", this.oCurrentUser);\r\n                } else {\r\n                    this.setDefaultUser();\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error parsing auth data:\", error);\r\n                this.setDefaultUser();\r\n            }\r\n        } else {\r\n            this.setDefaultUser();\r\n        }\r\n\r\n        return this.oCurrentUser;\r\n    }\r\n\r\n    private setDefaultUser(): void {\r\n        // Establecer usuario por defecto si no hay datos de autenticación\r\n        this.oCurrentUser = {\r\n            id: 1,\r\n            name: \"Demo User\",\r\n            email: \"demo@company.com\",\r\n            role: \"admin\",\r\n            status: \"active\",\r\n            companies: [{ id: 1, name: \"Demo Company\" }]\r\n        };\r\n        console.log(\"Usando usuario por defecto:\", this.oCurrentUser);\r\n    }\r\n\r\n    public getCurrentUser(): any {\r\n        return this.oCurrentUser;\r\n    }\r\n\r\n    public checkAuthentication(): boolean {\r\n        const sAuthData = sessionStorage.getItem(\"com.vs.extension.finanb1_auth\") || localStorage.getItem(\"com.vs.extension.finanb1_auth\");\r\n        if (!sAuthData) return false;\r\n        const oAuthData = JSON.parse(sAuthData);\r\n        return oAuthData && oAuthData.isAuthenticated;\r\n    }\r\n\r\n    public logout(): void {\r\n        sessionStorage.removeItem(\"finanb1_auth\");\r\n        localStorage.removeItem(\"finanb1_auth\");\r\n        this.oCurrentUser = null;\r\n    }\r\n} "],"mappings":";;;EAAA;AACA;AACA;EACO,MAAMA,WAAW,CAAC;IAGrBC,WAAWA,CAAA,EAAG;MACV,IAAI,CAACC,YAAY,GAAG,IAAI;IAC5B;IAEOC,qBAAqBA,CAAA,EAAQ;MAChC;MACA,MAAMC,QAAuB,GAAGC,cAAc,CAACC,OAAO,CAAC,cAAc,CAAC,IAAIC,YAAY,CAACD,OAAO,CAAC,cAAc,CAAC;MAE9G,IAAIF,QAAQ,EAAE;QACV,IAAI;UACA,MAAMI,cAAc,GAAGC,IAAI,CAACC,KAAK,CAACN,QAAQ,CAAC;UAC3C,IAAII,cAAc,CAACG,eAAe,IAAIH,cAAc,CAACI,QAAQ,EAAE;YAC3D,IAAI,CAACV,YAAY,GAAGM,cAAc,CAACI,QAAQ;YAC3CC,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAE,IAAI,CAACZ,YAAY,CAAC;UAClE,CAAC,MAAM;YACH,IAAI,CAACa,cAAc,CAAC,CAAC;UACzB;QACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;UACZH,OAAO,CAACG,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;UAChD,IAAI,CAACD,cAAc,CAAC,CAAC;QACzB;MACJ,CAAC,MAAM;QACH,IAAI,CAACA,cAAc,CAAC,CAAC;MACzB;MAEA,OAAO,IAAI,CAACb,YAAY;IAC5B;IAEQa,cAAcA,CAAA,EAAS;MAC3B;MACA,IAAI,CAACb,YAAY,GAAG;QAChBe,EAAE,EAAE,CAAC;QACLC,IAAI,EAAE,WAAW;QACjBC,KAAK,EAAE,kBAAkB;QACzBC,IAAI,EAAE,OAAO;QACbC,MAAM,EAAE,QAAQ;QAChBC,SAAS,EAAE,CAAC;UAAEL,EAAE,EAAE,CAAC;UAAEC,IAAI,EAAE;QAAe,CAAC;MAC/C,CAAC;MACDL,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAE,IAAI,CAACZ,YAAY,CAAC;IACjE;IAEOqB,cAAcA,CAAA,EAAQ;MACzB,OAAO,IAAI,CAACrB,YAAY;IAC5B;IAEOsB,mBAAmBA,CAAA,EAAY;MAClC,MAAMC,SAAS,GAAGpB,cAAc,CAACC,OAAO,CAAC,+BAA+B,CAAC,IAAIC,YAAY,CAACD,OAAO,CAAC,+BAA+B,CAAC;MAClI,IAAI,CAACmB,SAAS,EAAE,OAAO,KAAK;MAC5B,MAAMC,SAAS,GAAGjB,IAAI,CAACC,KAAK,CAACe,SAAS,CAAC;MACvC,OAAOC,SAAS,IAAIA,SAAS,CAACf,eAAe;IACjD;IAEOgB,MAAMA,CAAA,EAAS;MAClBtB,cAAc,CAACuB,UAAU,CAAC,cAAc,CAAC;MACzCrB,YAAY,CAACqB,UAAU,CAAC,cAAc,CAAC;MACvC,IAAI,CAAC1B,YAAY,GAAG,IAAI;IAC5B;EACJ;EAAC,IAAA2B,SAAA;IAAAC,UAAA;EAAA;EAAAD,SAAA,CAAA7B,WAAA,GAAAA,WAAA;EAAA,OAAA6B,SAAA;AAAA","ignoreList":[]}