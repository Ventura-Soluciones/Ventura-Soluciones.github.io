{"version":3,"file":"UserManager.js","names":["UserManager","constructor","this","oCurrentUser","loadAuthenticatedUser","authData","sessionStorage","getItem","localStorage","parsedAuthData","JSON","parse","isAuthenticated","userInfo","console","log","setDefaultUser","error","id","name","email","role","status","companies","getCurrentUser","checkAuthentication","sAuthData","oAuthData","logout","removeItem","__exports","__esModule"],"sources":["UserManager.ts"],"sourcesContent":["/**\r\n * UserManager - Handles user authentication and management\r\n */\r\nexport class UserManager {\r\n    private oCurrentUser: any;\r\n\r\n    constructor() {\r\n        this.oCurrentUser = null;\r\n    }\r\n\r\n    public loadAuthenticatedUser(): any {\r\n        // Obtener datos de autenticación del almacenamiento\r\n        const authData: string | null = sessionStorage.getItem(\"finanb1_auth\") || localStorage.getItem(\"finanb1_auth\");\r\n        \r\n        if (authData) {\r\n            try {\r\n                const parsedAuthData = JSON.parse(authData);\r\n                if (parsedAuthData.isAuthenticated && parsedAuthData.userInfo) {\r\n                    this.oCurrentUser = parsedAuthData.userInfo;\r\n                    console.log(\"Usuario autenticado cargado:\", this.oCurrentUser);\r\n                } else {\r\n                    this.setDefaultUser();\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error parsing auth data:\", error);\r\n                this.setDefaultUser();\r\n            }\r\n        } else {\r\n            this.setDefaultUser();\r\n        }\r\n\r\n        return this.oCurrentUser;\r\n    }\r\n\r\n    private setDefaultUser(): void {\r\n        // Establecer usuario por defecto si no hay datos de autenticación\r\n        this.oCurrentUser = {\r\n            id: 1,\r\n            name: \"Demo User\",\r\n            email: \"demo@company.com\",\r\n            role: \"admin\",\r\n            status: \"active\",\r\n            companies: [{ id: 1, name: \"Demo Company\" }]\r\n        };\r\n        console.log(\"Usando usuario por defecto:\", this.oCurrentUser);\r\n    }\r\n\r\n    public getCurrentUser(): any {\r\n        return this.oCurrentUser;\r\n    }\r\n\r\n    public checkAuthentication(): boolean {\r\n        const sAuthData = sessionStorage.getItem(\"com.vs.extension.finanb1_auth\") || localStorage.getItem(\"com.vs.extension.finanb1_auth\");\r\n        if (!sAuthData) return false;\r\n        const oAuthData = JSON.parse(sAuthData);\r\n        return oAuthData && oAuthData.isAuthenticated;\r\n    }\r\n\r\n    public logout(): void {\r\n        sessionStorage.removeItem(\"finanb1_auth\");\r\n        localStorage.removeItem(\"finanb1_auth\");\r\n        this.oCurrentUser = null;\r\n    }\r\n} "],"mappings":"yCAGO,MAAMA,EAGTC,cACIC,KAAKC,aAAe,IACxB,CAEOC,wBAEH,MAAMC,EAA0BC,eAAeC,QAAQ,iBAAmBC,aAAaD,QAAQ,gBAE/F,GAAIF,EAAU,CACV,IACI,MAAMI,EAAiBC,KAAKC,MAAMN,GAClC,GAAII,EAAeG,iBAAmBH,EAAeI,SAAU,CAC3DX,KAAKC,aAAeM,EAAeI,SACnCC,QAAQC,IAAI,+BAAgCb,KAAKC,aACrD,KAAO,CACHD,KAAKc,gBACT,CACJ,CAAE,MAAOC,GACLH,QAAQG,MAAM,2BAA4BA,GAC1Cf,KAAKc,gBACT,CACJ,KAAO,CACHd,KAAKc,gBACT,CAEA,OAAOd,KAAKC,YAChB,CAEQa,iBAEJd,KAAKC,aAAe,CAChBe,GAAI,EACJC,KAAM,YACNC,MAAO,mBACPC,KAAM,QACNC,OAAQ,SACRC,UAAW,CAAC,CAAEL,GAAI,EAAGC,KAAM,kBAE/BL,QAAQC,IAAI,8BAA+Bb,KAAKC,aACpD,CAEOqB,iBACH,OAAOtB,KAAKC,YAChB,CAEOsB,sBACH,MAAMC,EAAYpB,eAAeC,QAAQ,kCAAoCC,aAAaD,QAAQ,iCAClG,IAAKmB,EAAW,OAAO,MACvB,MAAMC,EAAYjB,KAAKC,MAAMe,GAC7B,OAAOC,GAAaA,EAAUf,eAClC,CAEOgB,SACHtB,eAAeuB,WAAW,gBAC1BrB,aAAaqB,WAAW,gBACxB3B,KAAKC,aAAe,IACxB,EACH,IAAA2B,EAAA,CAAAC,WAAA,MAAAD,EAAA9B,cAAA,OAAA8B,CAAA","ignoreList":[]}