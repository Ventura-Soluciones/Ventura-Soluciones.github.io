{"version":3,"file":"MenuManager-dbg.js","names":["MenuManager","constructor","oModel","JSONModel","getModel","loadHardcodedMenuData","hardcodedMenuData","console","log","setData","filterNavigationByRole","userRole","aNavigation","getProperty","aFilteredNavigation","filter","item","key","setProperty","sSelectedKey","bKeyExists","some","length","getData","refresh","setSelectedKey","getSelectedKey","__exports","__esModule"],"sources":["MenuManager.ts"],"sourcesContent":["import JSONModel from \"sap/ui/model/json/JSONModel\";\r\n\r\n/**\r\n * MenuManager - Handles navigation menu logic\r\n */\r\nexport class MenuManager {\r\n    private oModel: JSONModel;\r\n\r\n    constructor() {\r\n        this.oModel = new JSONModel();\r\n    }\r\n\r\n    public getModel(): JSONModel {\r\n        return this.oModel;\r\n    }\r\n\r\n    public loadHardcodedMenuData(): void {\r\n        const hardcodedMenuData = {\r\n            \"selectedKey\": \"pagosMasivos\",\r\n            \"navigation\": [\r\n                {\r\n                    \"key\": \"configuracion\",\r\n                    \"text\": \"Configuración\",\r\n                    \"icon\": \"sap-icon://settings\"\r\n                },\r\n                {\r\n                    \"key\": \"pagosMasivos\",\r\n                    \"text\": \"Pagos Masivos\",\r\n                    \"icon\": \"sap-icon://money-bills\"\r\n                },\r\n                {\r\n                    \"key\": \"detracciones\",\r\n                    \"text\": \"Detracciones\",\r\n                    \"icon\": \"sap-icon://document\"\r\n                }\r\n            ],\r\n            \"fixedNavigation\": []\r\n        };\r\n        \r\n        console.log(\"Cargando datos de menú hardcodeados:\", hardcodedMenuData);\r\n        this.oModel.setData(hardcodedMenuData);\r\n    }\r\n\r\n    public filterNavigationByRole(userRole: string): void {\r\n        console.log(\"Filtrando navegación por rol:\", userRole);\r\n        \r\n        const aNavigation = this.oModel.getProperty(\"/navigation\") || [];\r\n        console.log(\"Navegación original:\", aNavigation);\r\n        \r\n        const aFilteredNavigation = aNavigation.filter((item: any) => {\r\n            if (userRole === 'admin') return true;\r\n            if (item.key === 'configuracion') return false;\r\n            return true;\r\n        });\r\n        console.log(\"Navegación filtrada:\", aFilteredNavigation);\r\n        \r\n        this.oModel.setProperty(\"/navigation\", aFilteredNavigation);\r\n        const sSelectedKey = this.oModel.getProperty(\"/selectedKey\");\r\n        const bKeyExists = aFilteredNavigation.some((item: any) => item.key === sSelectedKey);\r\n        if (!bKeyExists && aFilteredNavigation.length > 0) {\r\n            this.oModel.setProperty(\"/selectedKey\", aFilteredNavigation[0].key);\r\n        }\r\n        \r\n        console.log(\"Datos finales del modelo:\", this.oModel.getData());\r\n        \r\n        // Forzar actualización de la vista\r\n        this.oModel.refresh(true);\r\n        console.log(\"Modelo de menú actualizado\");\r\n    }\r\n\r\n    public setSelectedKey(key: string): void {\r\n        this.oModel.setProperty(\"/selectedKey\", key);\r\n    }\r\n\r\n    public getSelectedKey(): string {\r\n        return this.oModel.getProperty(\"/selectedKey\");\r\n    }\r\n} "],"mappings":";;;EAEA;AACA;AACA;EACO,MAAMA,WAAW,CAAC;IAGrBC,WAAWA,CAAA,EAAG;MACV,IAAI,CAACC,MAAM,GAAG,IAAIC,SAAS,CAAC,CAAC;IACjC;IAEOC,QAAQA,CAAA,EAAc;MACzB,OAAO,IAAI,CAACF,MAAM;IACtB;IAEOG,qBAAqBA,CAAA,EAAS;MACjC,MAAMC,iBAAiB,GAAG;QACtB,aAAa,EAAE,cAAc;QAC7B,YAAY,EAAE,CACV;UACI,KAAK,EAAE,eAAe;UACtB,MAAM,EAAE,eAAe;UACvB,MAAM,EAAE;QACZ,CAAC,EACD;UACI,KAAK,EAAE,cAAc;UACrB,MAAM,EAAE,eAAe;UACvB,MAAM,EAAE;QACZ,CAAC,EACD;UACI,KAAK,EAAE,cAAc;UACrB,MAAM,EAAE,cAAc;UACtB,MAAM,EAAE;QACZ,CAAC,CACJ;QACD,iBAAiB,EAAE;MACvB,CAAC;MAEDC,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAEF,iBAAiB,CAAC;MACtE,IAAI,CAACJ,MAAM,CAACO,OAAO,CAACH,iBAAiB,CAAC;IAC1C;IAEOI,sBAAsBA,CAACC,QAAgB,EAAQ;MAClDJ,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEG,QAAQ,CAAC;MAEtD,MAAMC,WAAW,GAAG,IAAI,CAACV,MAAM,CAACW,WAAW,CAAC,aAAa,CAAC,IAAI,EAAE;MAChEN,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEI,WAAW,CAAC;MAEhD,MAAME,mBAAmB,GAAGF,WAAW,CAACG,MAAM,CAAEC,IAAS,IAAK;QAC1D,IAAIL,QAAQ,KAAK,OAAO,EAAE,OAAO,IAAI;QACrC,IAAIK,IAAI,CAACC,GAAG,KAAK,eAAe,EAAE,OAAO,KAAK;QAC9C,OAAO,IAAI;MACf,CAAC,CAAC;MACFV,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEM,mBAAmB,CAAC;MAExD,IAAI,CAACZ,MAAM,CAACgB,WAAW,CAAC,aAAa,EAAEJ,mBAAmB,CAAC;MAC3D,MAAMK,YAAY,GAAG,IAAI,CAACjB,MAAM,CAACW,WAAW,CAAC,cAAc,CAAC;MAC5D,MAAMO,UAAU,GAAGN,mBAAmB,CAACO,IAAI,CAAEL,IAAS,IAAKA,IAAI,CAACC,GAAG,KAAKE,YAAY,CAAC;MACrF,IAAI,CAACC,UAAU,IAAIN,mBAAmB,CAACQ,MAAM,GAAG,CAAC,EAAE;QAC/C,IAAI,CAACpB,MAAM,CAACgB,WAAW,CAAC,cAAc,EAAEJ,mBAAmB,CAAC,CAAC,CAAC,CAACG,GAAG,CAAC;MACvE;MAEAV,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAE,IAAI,CAACN,MAAM,CAACqB,OAAO,CAAC,CAAC,CAAC;;MAE/D;MACA,IAAI,CAACrB,MAAM,CAACsB,OAAO,CAAC,IAAI,CAAC;MACzBjB,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;IAC7C;IAEOiB,cAAcA,CAACR,GAAW,EAAQ;MACrC,IAAI,CAACf,MAAM,CAACgB,WAAW,CAAC,cAAc,EAAED,GAAG,CAAC;IAChD;IAEOS,cAAcA,CAAA,EAAW;MAC5B,OAAO,IAAI,CAACxB,MAAM,CAACW,WAAW,CAAC,cAAc,CAAC;IAClD;EACJ;EAAC,IAAAc,SAAA;IAAAC,UAAA;EAAA;EAAAD,SAAA,CAAA3B,WAAA,GAAAA,WAAA;EAAA,OAAA2B,SAAA;AAAA","ignoreList":[]}