{"version":3,"file":"PagosMasivos-dbg.controller.js","names":["formatter","_interopRequireDefault","__formatter","UserManager","___modules_UserManager","MenuManager","___modules_MenuManager","PagosMasivosManager","___modules_PagosMasivosManager","NavigationManager","___modules_NavigationManager","PagosMasivos","Controller","extend","constructor","prototype","apply","arguments","onInit","_onInit","userManager","menuManager","pagosMasivosManager","navigationManager","loadAuthenticatedUser","oView","getView","setModel","getModel","console","log","loadHardcodedMenuData","filterNavigationByRole","getCurrentUser","role","initializeModels","setController","getFilteredModel","onSideNavigationItemSelect","_onSideNavigationItemSelect","oEvent","onSideNavItemSelect","_onSideNavItemSelect","onMenuButtonPress","_onMenuButtonPress","onLogout","_onLogout","MessageBox","confirm","title","onClose","sAction","Action","OK","logout","MessageToast","show","duration","oComponent","getOwnerComponent","oRouter","getRouter","navTo","onDateRangeChange","_onDateRangeChange","onStatusChange","_onStatusChange","onBancoChange","_onBancoChange","onClearFilters","_onClearFilters","onNuevaPlanillaButtonPress","_onNuevaPlanillaButtonPress","onListItemPress","_onListItemPress"],"sources":["PagosMasivos.controller.ts"],"sourcesContent":["import Controller from \"sap/ui/core/mvc/Controller\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport formatter from \"../model/formatter\";\nimport Event from \"sap/ui/base/Event\";\nimport type UIComponent from \"sap/ui/core/UIComponent\";\nimport { UserManager } from \"./modules/UserManager\";\nimport { MenuManager } from \"./modules/MenuManager\";\nimport { PagosMasivosManager } from \"./modules/PagosMasivosManager\";\nimport { NavigationManager } from \"./modules/NavigationManager\";\n\n/**\n * @namespace com.vs.extension.finanb1.controller\n */\nexport default class PagosMasivos extends Controller {\n    public formatter = formatter;\n    \n    // Gestores para diferentes funcionalidades\n    public userManager: UserManager;\n    public menuManager: MenuManager;\n    public pagosMasivosManager: PagosMasivosManager;\n    public navigationManager: NavigationManager;\n\n    public onInit(): void {\n        // Inicializar gestores\n        this.userManager = new UserManager();\n        this.menuManager = new MenuManager();\n        this.pagosMasivosManager = new PagosMasivosManager();\n        this.navigationManager = new NavigationManager(this);\n        \n        // Cargar usuario autenticado\n        this.userManager.loadAuthenticatedUser();\n        \n        // Configurar modelo del menú\n        const oView = this.getView();\n        if (oView) {\n            oView.setModel(this.menuManager.getModel(), \"menuModel\");\n            console.log(\"Modelo de menú asignado a la vista en onInit\");\n        }\n        \n        // Cargar datos del menú\n        this.menuManager.loadHardcodedMenuData();\n        this.menuManager.filterNavigationByRole(this.userManager.getCurrentUser()?.role || 'user');\n        \n        // Inicializar modelos de PagosMasivos\n        this.pagosMasivosManager.initializeModels();\n        this.pagosMasivosManager.setController(this);\n        \n        // Configurar modelo de PagosMasivos en la vista\n        if (oView) {\n            oView.setModel(this.pagosMasivosManager.getFilteredModel(), \"planillas\");\n        }\n    }\n\n    // ===== MÉTODOS DE NAVEGACIÓN =====\n    public onSideNavigationItemSelect(oEvent: Event): void {\n        this.navigationManager.onSideNavigationItemSelect(oEvent);\n    }\n\n    public onSideNavItemSelect(oEvent: any): void {\n        this.navigationManager.onSideNavItemSelect(oEvent);\n    }\n\n    public onMenuButtonPress(): void {\n        this.navigationManager.onMenuButtonPress();\n    }\n\n    public onLogout(): void {\n        MessageBox.confirm(\"¿Está seguro que desea cerrar sesión?\", {\n            title: \"Confirmar Cierre de Sesión\",\n            onClose: (sAction: string) => {\n                if (sAction === MessageBox.Action.OK) {\n                    this.userManager.logout();\n                    MessageToast.show(\"Sesión cerrada exitosamente\", { duration: 2000 });\n                    const oComponent = this.getOwnerComponent() as UIComponent;\n                    const oRouter = oComponent.getRouter();\n                    oRouter.navTo(\"RouteLogin\");\n                }\n            }\n        });\n    }\n\n    // ===== MÉTODOS DE PAGOS MASIVOS =====\n    public onDateRangeChange(oEvent: any): void {\n        this.pagosMasivosManager.onDateRangeChange(oEvent);\n    }\n\n    public onStatusChange(oEvent: any): void {\n        this.pagosMasivosManager.onStatusChange(oEvent);\n    }\n\n    public onBancoChange(oEvent: any): void {\n        this.pagosMasivosManager.onBancoChange(oEvent);\n    }\n\n    public onClearFilters(): void {\n        this.pagosMasivosManager.onClearFilters();\n    }\n\n    public onNuevaPlanillaButtonPress(): void {\n        this.pagosMasivosManager.onNuevaPlanillaButtonPress();\n    }\n\n    public onListItemPress(oEvent: Event): void {\n        console.log(\"PagosMasivos.controller - onListItemPress triggered!\", oEvent);\n        this.pagosMasivosManager.onListItemPress(oEvent);\n    }\n\n\n} "],"mappings":"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","ignoreList":[]}