{"version":3,"file":"PagosMasivos.controller.js","names":["formatter","_interopRequireDefault","__formatter","UserManager","___modules_UserManager","MenuManager","___modules_MenuManager","PagosMasivosManager","___modules_PagosMasivosManager","NavigationManager","___modules_NavigationManager","PagosMasivos","Controller","extend","constructor","prototype","apply","this","arguments","onInit","_onInit","userManager","menuManager","pagosMasivosManager","navigationManager","loadAuthenticatedUser","oView","getView","setModel","getModel","console","log","loadHardcodedMenuData","filterNavigationByRole","getCurrentUser","role","initializeModels","setController","getFilteredModel","onSideNavigationItemSelect","_onSideNavigationItemSelect","oEvent","onSideNavItemSelect","_onSideNavItemSelect","onMenuButtonPress","_onMenuButtonPress","onLogout","_onLogout","MessageBox","confirm","title","onClose","sAction","Action","OK","logout","MessageToast","show","duration","oComponent","getOwnerComponent","oRouter","getRouter","navTo","onDateRangeChange","_onDateRangeChange","onStatusChange","_onStatusChange","onBancoChange","_onBancoChange","onClearFilters","_onClearFilters","onNuevaPlanillaButtonPress","_onNuevaPlanillaButtonPress","onListItemPress","_onListItemPress"],"sources":["PagosMasivos.controller.ts"],"sourcesContent":["import Controller from \"sap/ui/core/mvc/Controller\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport formatter from \"../model/formatter\";\nimport Event from \"sap/ui/base/Event\";\nimport type UIComponent from \"sap/ui/core/UIComponent\";\nimport { UserManager } from \"./modules/UserManager\";\nimport { MenuManager } from \"./modules/MenuManager\";\nimport { PagosMasivosManager } from \"./modules/PagosMasivosManager\";\nimport { NavigationManager } from \"./modules/NavigationManager\";\n\n/**\n * @namespace com.vs.extension.finanb1.controller\n */\nexport default class PagosMasivos extends Controller {\n    public formatter = formatter;\n    \n    // Gestores para diferentes funcionalidades\n    public userManager: UserManager;\n    public menuManager: MenuManager;\n    public pagosMasivosManager: PagosMasivosManager;\n    public navigationManager: NavigationManager;\n\n    public onInit(): void {\n        // Inicializar gestores\n        this.userManager = new UserManager();\n        this.menuManager = new MenuManager();\n        this.pagosMasivosManager = new PagosMasivosManager();\n        this.navigationManager = new NavigationManager(this);\n        \n        // Cargar usuario autenticado\n        this.userManager.loadAuthenticatedUser();\n        \n        // Configurar modelo del menú\n        const oView = this.getView();\n        if (oView) {\n            oView.setModel(this.menuManager.getModel(), \"menuModel\");\n            console.log(\"Modelo de menú asignado a la vista en onInit\");\n        }\n        \n        // Cargar datos del menú\n        this.menuManager.loadHardcodedMenuData();\n        this.menuManager.filterNavigationByRole(this.userManager.getCurrentUser()?.role || 'user');\n        \n        // Inicializar modelos de PagosMasivos\n        this.pagosMasivosManager.initializeModels();\n        this.pagosMasivosManager.setController(this);\n        \n        // Configurar modelo de PagosMasivos en la vista\n        if (oView) {\n            oView.setModel(this.pagosMasivosManager.getFilteredModel(), \"planillas\");\n        }\n    }\n\n    // ===== MÉTODOS DE NAVEGACIÓN =====\n    public onSideNavigationItemSelect(oEvent: Event): void {\n        this.navigationManager.onSideNavigationItemSelect(oEvent);\n    }\n\n    public onSideNavItemSelect(oEvent: any): void {\n        this.navigationManager.onSideNavItemSelect(oEvent);\n    }\n\n    public onMenuButtonPress(): void {\n        this.navigationManager.onMenuButtonPress();\n    }\n\n    public onLogout(): void {\n        MessageBox.confirm(\"¿Está seguro que desea cerrar sesión?\", {\n            title: \"Confirmar Cierre de Sesión\",\n            onClose: (sAction: string) => {\n                if (sAction === MessageBox.Action.OK) {\n                    this.userManager.logout();\n                    MessageToast.show(\"Sesión cerrada exitosamente\", { duration: 2000 });\n                    const oComponent = this.getOwnerComponent() as UIComponent;\n                    const oRouter = oComponent.getRouter();\n                    oRouter.navTo(\"RouteLogin\");\n                }\n            }\n        });\n    }\n\n    // ===== MÉTODOS DE PAGOS MASIVOS =====\n    public onDateRangeChange(oEvent: any): void {\n        this.pagosMasivosManager.onDateRangeChange(oEvent);\n    }\n\n    public onStatusChange(oEvent: any): void {\n        this.pagosMasivosManager.onStatusChange(oEvent);\n    }\n\n    public onBancoChange(oEvent: any): void {\n        this.pagosMasivosManager.onBancoChange(oEvent);\n    }\n\n    public onClearFilters(): void {\n        this.pagosMasivosManager.onClearFilters();\n    }\n\n    public onNuevaPlanillaButtonPress(): void {\n        this.pagosMasivosManager.onNuevaPlanillaButtonPress();\n    }\n\n    public onListItemPress(oEvent: Event): void {\n        console.log(\"PagosMasivos.controller - onListItemPress triggered!\", oEvent);\n        this.pagosMasivosManager.onListItemPress(oEvent);\n    }\n\n\n} "],"mappings":"sVAIOA,EAASC,EAAAC,GAAA,MAGPC,EAAWC,EAAA,qBACXC,EAAWC,EAAA,qBACXC,EAAmBC,EAAA,6BACnBC,EAAiBC,EAAA,qBAE1B,MAGqBC,EAAqBC,EAAUC,OAAA,oDAAAC,YAAA,SAAAA,IAAAF,EAAAG,UAAAD,YAAAE,MAAAC,KAAAC,WAAAD,KACzCjB,UAAYA,CAAS,EAQrBmB,OAAM,SAAAC,IAETH,KAAKI,YAAc,IAAIlB,EACvBc,KAAKK,YAAc,IAAIjB,EACvBY,KAAKM,oBAAsB,IAAIhB,EAC/BU,KAAKO,kBAAoB,IAAIf,EAAkBQ,MAG/CA,KAAKI,YAAYI,wBAGjB,MAAMC,EAAQT,KAAKU,UACnB,GAAID,EAAO,CACPA,EAAME,SAASX,KAAKK,YAAYO,WAAY,aAC5CC,QAAQC,IAAI,+CAChB,CAGAd,KAAKK,YAAYU,wBACjBf,KAAKK,YAAYW,uBAAuBhB,KAAKI,YAAYa,kBAAkBC,MAAQ,QAGnFlB,KAAKM,oBAAoBa,mBACzBnB,KAAKM,oBAAoBc,cAAcpB,MAGvC,GAAIS,EAAO,CACPA,EAAME,SAASX,KAAKM,oBAAoBe,mBAAoB,YAChE,CACJ,EAGOC,2BAA0B,SAAAC,EAACC,GAC9BxB,KAAKO,kBAAkBe,2BAA2BE,EACtD,EAEOC,oBAAmB,SAAAC,EAACF,GACvBxB,KAAKO,kBAAkBkB,oBAAoBD,EAC/C,EAEOG,kBAAiB,SAAAC,IACpB5B,KAAKO,kBAAkBoB,mBAC3B,EAEOE,SAAQ,SAAAC,IACXC,EAAWC,QAAQ,wCAAyC,CACxDC,MAAO,6BACPC,QAAUC,IACN,GAAIA,IAAYJ,EAAWK,OAAOC,GAAI,CAClCrC,KAAKI,YAAYkC,SACjBC,EAAaC,KAAK,8BAA+B,CAAEC,SAAU,MAC7D,MAAMC,EAAa1C,KAAK2C,oBACxB,MAAMC,EAAUF,EAAWG,YAC3BD,EAAQE,MAAM,aAClB,IAGZ,EAGOC,kBAAiB,SAAAC,EAACxB,GACrBxB,KAAKM,oBAAoByC,kBAAkBvB,EAC/C,EAEOyB,eAAc,SAAAC,EAAC1B,GAClBxB,KAAKM,oBAAoB2C,eAAezB,EAC5C,EAEO2B,cAAa,SAAAC,EAAC5B,GACjBxB,KAAKM,oBAAoB6C,cAAc3B,EAC3C,EAEO6B,eAAc,SAAAC,IACjBtD,KAAKM,oBAAoB+C,gBAC7B,EAEOE,2BAA0B,SAAAC,IAC7BxD,KAAKM,oBAAoBiD,4BAC7B,EAEOE,gBAAe,SAAAC,EAAClC,GACnBX,QAAQC,IAAI,uDAAwDU,GACpExB,KAAKM,oBAAoBmD,gBAAgBjC,EAC7C,IAAC,OA5FgB9B,CAAY","ignoreList":[]}