{"version":3,"file":"JSONFilterBarDelegate.js","names":["JSONPropertyInfo","key","dataType","label","maxConditions","JSONFilterBarDelegate","Object","assign","FilterBarDelegate","fetchProperties","async","_createFilterField","sId","oProperty","oFilterBar","sPropertyName","oFilterField","FilterField","conditions","propertyKey","required","delegate","name","payload","addItem","find","oPI","getId","existingElement","Element","getElementById","Error","removeItem","destroy"],"sources":["JSONFilterBarDelegate.ts"],"sourcesContent":["/* eslint-disable require-await */\r\nimport Element from \"sap/ui/core/Element\";\r\nimport FilterBarDelegate from \"sap/ui/mdc/FilterBarDelegate\";\r\nimport FilterField from \"sap/ui/mdc/FilterField\";\r\n\r\n// Define the JSONPropertyInfo interface and mock data\r\ninterface IPropertyInfo {\r\n    key: string;\r\n    dataType: string;\r\n    required?: boolean;\r\n    label: string;\r\n    maxConditions?: number;\r\n}\r\n\r\n// Mock JSONPropertyInfo data\r\nconst JSONPropertyInfo: IPropertyInfo[] = [\r\n    {\r\n        key: \"name\",\r\n        dataType: \"sap.ui.model.type.String\",\r\n        label: \"Name\",\r\n        maxConditions: 1\r\n    },\r\n    {\r\n        key: \"height\",\r\n        dataType: \"sap.ui.model.type.Integer\",\r\n        label: \"Height\",\r\n        maxConditions: 1\r\n    },\r\n    {\r\n        key: \"prominence\",\r\n        dataType: \"sap.ui.model.type.Float\",\r\n        label: \"Prominence\",\r\n        maxConditions: -1\r\n    },\r\n    {\r\n        key: \"parent_mountain\",\r\n        dataType: \"sap.ui.model.type.Boolean\",\r\n        label: \"Has parent mountain\",\r\n        maxConditions: 1\r\n    },\r\n    {\r\n        key: \"first_ascent\",\r\n        dataType: \"sap.ui.model.odata.type.Date\",\r\n        label: \"First Ascent\",\r\n        maxConditions: 1\r\n    },\r\n    {\r\n        key: \"rank\",\r\n        dataType: \"sap.ui.model.type.Integer\",\r\n        label: \"Rank\",\r\n        maxConditions: 1\r\n    }\r\n];\r\n\r\ninterface IFilterBar {\r\n    getId(): string;\r\n}\r\n\r\ninterface IFilterField {\r\n    destroy(): void;\r\n}\r\n\r\nconst JSONFilterBarDelegate = Object.assign({}, FilterBarDelegate);\r\n\r\nJSONFilterBarDelegate.fetchProperties = async (): Promise<IPropertyInfo[]> => JSONPropertyInfo;\r\n\r\nconst _createFilterField = async (sId: string, oProperty: IPropertyInfo, oFilterBar: IFilterBar): Promise<FilterField> => {\r\n    const sPropertyName = oProperty.key;\r\n    const oFilterField = new FilterField(sId, {\r\n        dataType: oProperty.dataType,\r\n        conditions: \"{$filters>/conditions/\" + sPropertyName + '}' as any,\r\n        propertyKey: sPropertyName,\r\n        required: oProperty.required,\r\n        label: oProperty.label,\r\n        maxConditions: oProperty.maxConditions,\r\n        delegate: {name: \"sap/ui/mdc/field/FieldBaseDelegate\", payload: {}}\r\n    });\r\n    return oFilterField;\r\n};\r\n\r\nJSONFilterBarDelegate.addItem = async (oFilterBar: IFilterBar, sPropertyName: string): Promise<FilterField> => {\r\n    const oProperty = JSONPropertyInfo.find((oPI: IPropertyInfo) => oPI.key === sPropertyName);\r\n    const sId = oFilterBar.getId() + \"--filter--\" + sPropertyName;\r\n    const existingElement = Element.getElementById(sId);\r\n    if (existingElement && existingElement instanceof FilterField) {\r\n        return existingElement;\r\n    }\r\n    if (!oProperty) {\r\n        throw new Error(`Property ${sPropertyName} not found in JSONPropertyInfo`);\r\n    }\r\n    return await _createFilterField(sId, oProperty, oFilterBar);\r\n};\r\n\r\nJSONFilterBarDelegate.removeItem = async (oFilterBar: IFilterBar, oFilterField: IFilterField): Promise<boolean> => {\r\n    oFilterField.destroy();\r\n    return true; // allow default handling\r\n};\r\n\r\nexport default JSONFilterBarDelegate; "],"mappings":"2HAeA,MAAMA,EAAoC,CACtC,CACIC,IAAK,OACLC,SAAU,2BACVC,MAAO,OACPC,cAAe,GAEnB,CACIH,IAAK,SACLC,SAAU,4BACVC,MAAO,SACPC,cAAe,GAEnB,CACIH,IAAK,aACLC,SAAU,0BACVC,MAAO,aACPC,eAAgB,GAEpB,CACIH,IAAK,kBACLC,SAAU,4BACVC,MAAO,sBACPC,cAAe,GAEnB,CACIH,IAAK,eACLC,SAAU,+BACVC,MAAO,eACPC,cAAe,GAEnB,CACIH,IAAK,OACLC,SAAU,4BACVC,MAAO,OACPC,cAAe,IAYvB,MAAMC,EAAwBC,OAAOC,OAAO,CAAC,EAAGC,GAEhDH,EAAsBI,gBAAkBC,SAAsCV,EAE9E,MAAMW,EAAqBD,MAAOE,EAAaC,EAA0BC,KACrE,MAAMC,EAAgBF,EAAUZ,IAChC,MAAMe,EAAe,IAAIC,EAAYL,EAAK,CACtCV,SAAUW,EAAUX,SACpBgB,WAAY,yBAA2BH,EAAgB,IACvDI,YAAaJ,EACbK,SAAUP,EAAUO,SACpBjB,MAAOU,EAAUV,MACjBC,cAAeS,EAAUT,cACzBiB,SAAU,CAACC,KAAM,qCAAsCC,QAAS,CAAC,KAErE,OAAOP,GAGXX,EAAsBmB,QAAUd,MAAOI,EAAwBC,KAC3D,MAAMF,EAAYb,EAAiByB,KAAMC,GAAuBA,EAAIzB,MAAQc,GAC5E,MAAMH,EAAME,EAAWa,QAAU,aAAeZ,EAChD,MAAMa,EAAkBC,EAAQC,eAAelB,GAC/C,GAAIgB,GAAmBA,aAA2BX,EAAa,CAC3D,OAAOW,CACX,CACA,IAAKf,EAAW,CACZ,MAAM,IAAIkB,MAAM,YAAYhB,kCAChC,CACA,aAAaJ,EAAmBC,EAAKC,EAAWC,IAGpDT,EAAsB2B,WAAatB,MAAOI,EAAwBE,KAC9DA,EAAaiB,UACb,OAAO,MACT,OAEa5B,CAAqB","ignoreList":[]}