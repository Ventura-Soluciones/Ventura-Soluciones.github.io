{"version":3,"file":"TransactionController.js","names":["sap","ui","define","jQuery","BaseController","DraftController","ModelUtil","extend","Log","TransactionController","metadata","publicMethods","constructor","oModel","oQueue","mParams","oDraftMergeTimer","apply","this","sName","_oDraft","noBatchGroups","setDeferredGroups","setChangeGroups","groupId","changeSetId","single","getInterface","prototype","setBatchStrategy","bSingle","n","mChangeBatchGroups","_oModel","getChangeGroups","getDraftController","_oQueue","_oDraftMergeTimer","editEntity","oContext","bPreserveChanges","sRootExpand","that","Promise","resolve","oDraftContext","sEntitySet","getDraftContext","getEntitySetFromContext","isDraftEnabled","_oDraftUtil","isActiveEntity","getObject","createEditDraftEntity","context","deleteEntity","vEntity","mParameters","bIsLenient","oPromise","oPromise2","sPath","oDraftController","model","Context","getPath","batchGroupId","successMsg","failedMsg","forceSubmit","sHandling","headers","Prefer","undefined","discardDraft","_remove","then","oResponse","_normalizeResponse","oResponseOut","_normalizeError","triggerSubmitChanges","_returnPromiseAll","deleteEntities","aEntities","aPromises","bIsStrict","fnResolve","fnReject","i","length","push","_atLeastOnePromiseResolved","invokeAction","sFunctionName","hasClientMessages","urlParameters","_callAction","oOut","refresh","resetChanges","aKeys","getDefaultValues","aContexts","mPredefinedValues","sNavigationProperty","sFunctionImportName","oEntitySet","aProperties","Error","getModel","oMetaModel","getMetaModel","oEntityType","getODataEntityType","getODataEntitySet","entityType","aNavigationProperties","split","oImmediateParentContextDetails","getImmediateParentContextDetails","relativeChildNavigationProperty","oError","error","message","navigationProperty","find","oNavProperty","name","oChildEntityType","getODataAssociationEnd","type","property","getODataFunctionImport","parameter","sDefaultValuesFunctionNameFromAnnotation","getDefaultValuesFunction","oDefaultValuesFunctionImport","keepDraftMergeTimer","sETag","getETag","sFunctionImportPath","httpResponse","statusCode","oResult","responseData","mDefaultValue","forEach","oProperty","hasOwnProperty","mFinalValues","oParentEntityType","oParentContext","oCurrentContext","oCurrentEntityType","oChildContext","sChildNavigationProperty","iIndex","sCurrentNavProp","oAssociationEnd","multiplicity","endsWith","createBindingContext","sChildContextPath","oDefaultValue","String","updateMultipleEntities","aContextToBeUpdated","aUpdatePromise","oUpdatePromise","_updateEntity","sContextPath","oUpdateData","destroy"],"sources":["TransactionController-dbg.js"],"mappings":";;;;;AAMAA,IAAIC,GAAGC,OAAO,CAAC,2BAA4B,mBAAoB,oBAAqB,oCAAqC,uBACxH,gBAAiB,SAAUC,OAAQC,EAAgBC,EAAiBC,EAAWC,EAAQC,GACvF,aA2BA,IAAIC,EAAwBL,EAAeG,OAAO,uDAAqI,CACtLG,SAAU,CACTC,cAAe,CACd,UAAW,mBAAoB,qBAAsB,eAAgB,aAAc,eAAgB,iBAAkB,kBAAmB,4BAA6B,eAAgB,mBAAoB,2BAA4B,2BAIvOC,YAAa,SAAUC,EAAQC,EAAQC,EAASC,GAC/CZ,EAAea,MAAMC,KAAM,CAACL,EAAQC,EAAQE,IAC5CE,KAAKC,MAAQ,uDACbD,KAAKE,QAAU,KAGfL,EAAUA,GAAW,CAAC,EAEtB,IAAKA,EAAQM,cAAe,CAC3BR,EAAOS,kBAAkB,CACxB,YAIDT,EAAOU,gBAAgB,CACtB,IAAK,CACJC,QAAS,UACTC,YAAa,UACbC,OAAQ,QAGX,CAEA,OAAOR,KAAKS,cACb,IAYDlB,EAAsBmB,UAAUC,iBAAmB,SAAUC,GAC5D,IAAIC,EAAGC,EAAqBd,KAAKe,QAAQC,kBAEzC,IAAKH,KAAKC,EAAoB,CAC7BA,EAAmBD,GAAGL,OAASI,CAChC,CAEAZ,KAAKe,QAAQV,gBAAgBS,EAC9B,EAQAvB,EAAsBmB,UAAUO,mBAAqB,WAEpD,IAAKjB,KAAKE,QAAS,CAClBF,KAAKE,QAAU,IAAIf,EAAgBa,KAAKe,QAASf,KAAKkB,QAASlB,KAAKmB,kBACrE,CAEA,OAAOnB,KAAKE,OACb,EAYAX,EAAsBmB,UAAUU,WAAa,SAAUC,EAAUC,EAAkBC,GAClF,IAAIC,EAAOxB,KAEX,OAAO,IAAIyB,QAAQ,SAAUC,GAC5B,IAAIC,EAAeC,EAEnBD,EAAgBH,EAAKP,qBAAqBY,kBAC1CD,EAAaxC,EAAU0C,wBAAwBT,GAE/C,GAAIM,EAAcI,eAAeH,IAAeJ,EAAKQ,YAAYC,eAAeZ,EAASa,aAAc,CACtG,OAAOR,EAAQF,EAAKP,qBAAqBkB,sBAAsBd,EAAUC,EAAkBC,GAC5F,CAEA,OAAOG,EAAQ,CACdU,QAASf,GAEX,EACD,EAWA9B,EAAsBmB,UAAU2B,aAAe,SAAUC,EAASC,EAAaC,GAC9E,IAAIC,EAAUC,EAAWlB,EAAOxB,KAC/B2C,EAAOtB,EAAUuB,EAElB,UAAWN,GAAW,SAAU,CAC/BK,EAAQL,CACT,MAAO,UAAWA,GAAW,UAAYA,aAAmBxD,IAAIC,GAAG8D,MAAMC,QAAS,CACjFzB,EAAWiB,EACXK,EAAQtB,EAAS0B,SAClB,CAEAR,EAAcA,GAAe,CAAC,EAC9BtD,OAAOI,OAAOkD,EAAa,CAC1BS,aAAc,UACdzC,YAAa,UACb0C,WAAY,yBACZC,UAAW,+BACXC,YAAa,KACbf,QAASf,IAGV,IAAI+B,EAAYZ,EAAa,UAAY,SACzCD,EAAYc,QAAU,CACrBC,OAAQ,YAAcF,GAGvB,GAAI5B,EAAKT,QAAQmB,UAAUS,IAAUnB,EAAKQ,YAAYC,eAAeT,EAAKT,QAAQmB,UAAUS,MAAYY,YAAc/B,EAAKQ,YAAYC,eAAeT,EAAKT,QAAQmB,UAAUS,IAAS,CACrL,IAAKtB,EAAU,CACdA,EAAW,IAAIvC,IAAIC,GAAG8D,MAAMC,QAAQ9C,KAAKe,QAAS4B,EACnD,CACAC,EAAmBpB,EAAKP,qBACxBwB,EAAWG,EAAiBY,aAAanC,EAAUkB,EACpD,KAAO,CACNE,EAAWzC,KAAKyD,QAAQd,EAAOJ,EAChC,CAEAE,EAASiB,KAAK,SAAUC,GACvB,OAAOnC,EAAKoC,mBAAmBD,EAAW,KAC3C,EAAG,SAAUA,GACZ,IAAIE,EAAerC,EAAKsC,gBAAgBH,GACxC,MAAME,CACP,GACAnB,EAAY1C,KAAK+D,qBAAqBxB,GAGtC,OAAOvC,KAAKgE,kBAAkB,CAC7BvB,EAAUC,GAEZ,EAgBAnD,EAAsBmB,UAAUuD,eAAiB,SAAUC,EAAW3B,GACrE,IAAIE,EAAU0B,EAAY,GACzB3C,EAAOxB,KACP2C,EAAOtB,EAAUuB,EAClBL,EAAcA,GAAe,CAAC,EAC9B,IAAIa,EAAYb,EAAY6B,UAAY,SAAW,UACnD7B,EAAYc,QAAUd,EAAYc,SAAW,CAAC,EAC9Cd,EAAYc,QAAQC,OAAS,YAAcF,EAE3CnE,OAAOI,OAAOkD,EAAa,CAC1BS,aAAc,UACdzC,YAAa,UACb0C,WAAY,yBACZC,UAAW,+BACXC,YAAa,OAGd,IAAIkB,EAAY,SAAUV,GACzB,OAAOnC,EAAKoC,mBAAmBD,EAAW,KAC3C,EAEA,IAAIW,EAAW,SAAUX,GACxB,IAAIE,EAAerC,EAAKsC,gBAAgBH,GACxC,MAAME,CACP,EAEA,IAAK,IAAIU,EAAI,EAAGA,EAAIL,EAAUM,OAAQD,IAAK,CAC1ClD,EAAW,KACX,UAAW6C,EAAUK,IAAM,SAAU,CACpC5B,EAAQuB,EAAUK,EACnB,MAAO,UAAWL,EAAUK,IAAM,UAAYL,EAAUK,aAAczF,IAAIC,GAAG8D,MAAMC,QAAS,CAC3FzB,EAAW6C,EAAUK,GACrB5B,EAAQtB,EAAS0B,SAClB,CAEA,GAAIvB,EAAKT,QAAQmB,UAAUS,IAAUnB,EAAKQ,YAAYC,eAAeT,EAAKT,QAAQmB,UAAUS,MAAYY,YAAc/B,EAAKQ,YAAYC,eAAeT,EAAKT,QAAQmB,UAAUS,IAAS,CACrLJ,EAAYhC,YAAc,UAC1B,IAAKc,EAAU,CACdA,EAAW,IAAIvC,IAAIC,GAAG8D,MAAMC,QAAQ9C,KAAKe,QAAS4B,EACnD,CACAC,EAAmBpB,EAAKP,qBACxBwB,EAAWG,EAAiBY,aAAanC,EAAUkB,GAAamB,KAAKW,EAAWC,EACjF,KAAO,CACN/B,EAAYhC,YAAc,gBAC1BkC,EAAWzC,KAAKyD,QAAQd,EAAOJ,GAAamB,KAAKW,EAAWC,EAC7D,CAEAH,EAAUM,KAAKhC,EAChB,CAEAA,EAAWzC,KAAK+D,qBAAqBxB,GACrC4B,EAAUM,KAAKhC,GAEf,OAAOzC,KAAK0E,2BAA2BP,EAAW,KACnD,EAcA5E,EAAsBmB,UAAUiE,aAAe,SAAUC,EAAevD,EAAUkB,GACjF,IAAIf,EAAOxB,KACVyC,EAAUC,EAGXD,EAAWzC,KAAK6E,oBAEhB,GAAIpC,EAAU,CACb,OAAOA,CACR,CAEAF,EAAc,CACbS,aAAc,UACdzC,YAAa,UACb0C,WAAY,2BACZC,UAAW,wBACX4B,cAAevC,EAAYuC,cAC3B3B,YAAa,KACbf,QAASf,GAGVoB,EAAWzC,KAAK+E,YAAYH,EAAevD,EAAUkB,GAAamB,KAAK,SAAUC,GAChF,OAAOnC,EAAKoC,mBAAmBD,EAAW,KAC3C,EAAG,SAAUA,GACZ,IAAIqB,EAAOxD,EAAKsC,gBAAgBH,GAChC,MAAMqB,CACP,GAIAhF,KAAKe,QAAQkE,QAAQ,KAAM,MAAO,WAElCvC,EAAY1C,KAAK+D,qBAAqBxB,GAGtC,OAAOvC,KAAKgE,kBAAkB,CAC7BvB,EAAUC,GAEZ,EASAnD,EAAsBmB,UAAUwE,aAAe,SAAUC,GACxDnF,KAAKe,QAAQmE,aAAaC,EAC3B,EAcA5F,EAAsBmB,UAAU0E,iBAAmB,SAClDC,EACAC,EACAC,EACAC,GAEA,IAAIC,EACHC,EACArE,EAAWgE,EAAU,GACrB7D,EAAOxB,KACR,KAAMqB,aAAoBvC,IAAIC,GAAG8D,MAAMC,SAAU,CAChD,MAAM,IAAI6C,MAAM,aACjB,CAEA,IAAI/D,EAAaxC,EAAU0C,wBAAwBT,GACnD,IAAKO,EAAY,CAChB,MAAM,IAAI+D,MAAM,4CACjB,CAEA,IAAIhG,EAAS0B,EAASuE,WACtB,IAAIC,EAAalG,EAAOmG,eACxB,IAAIC,EAAcF,EAAWG,mBAAmBH,EAAWI,kBAAkBrE,GAAYsE,YAEzF,GAAIX,EAAqB,CACxB,IAAIY,EAAwBZ,EAAoBa,MAAM,KACtD,GAAID,EAAsB3B,OAAS,EAAG,CACrC,IACC,IAAI6B,EAAiCrG,KAAKsG,iCAAiCP,EAAa1E,EAAUkE,GAClGQ,EAAcM,EAA+BH,WAC7C7E,EAAWgF,EAA+BjE,QAC1CmD,EAAsBc,EAA+BE,+BACtD,CAAE,MAAOC,GACRlH,EAAImH,MAAM,uCAAyCD,EAAOE,SAC1D,OAAOpB,CACR,CACD,CACAG,EAAaM,EAAYY,mBAAmBC,KAAK,SAAUC,GAC1D,OAAOA,EAAaC,OAASvB,CAC9B,GAEA,IAAIwB,EAAmBlB,EAAWG,mBAAmBH,EAAWmB,uBAAuBjB,EAAaR,GAAqB0B,MACzHvB,EAAcqB,EAAiBG,QAChC,MAAO,GAAI1B,EAAqB,CAE/BC,EAAaI,EAAWsB,uBAAuB3B,GAC/CE,EAAcD,EAAW2B,SAC1B,KAAO,CAEN3B,EAAaI,EAAWI,kBAAkBrE,GAC1C8D,EAAcK,EAAYmB,QAC3B,CAEA,IAAIG,EAA2CrH,KAAKsH,yBAAyB7B,GAC7E,GAAI4B,EAA0C,CAC7C,IAAIE,EAA+B1B,EAAWsB,uBAAuBE,GACrE,GAAIhC,EAAUb,OAAS,GAAK+C,EAA6BH,UAAW,CACnE9H,EAAImH,MAAM,iFACV,OAAOnB,CACR,CAEA,IAAI/C,EAAc,CACjBU,WAAY,2BACZC,UAAW,wBACX4B,cAAe,KACf3B,YAAa,KACbf,QAASf,EACTgC,QAAS,CAAC,EACVL,aAAc,gBACdwE,oBAAqB,MAItB,IAAIC,EAAQzH,KAAKe,QAAQ2G,QAAQrG,EAAS0B,WAC1C,GAAI0E,EAAO,CACVlF,EAAYc,QAAU,CAAE,WAAY,IACrC,CAEAmC,EAAsB+B,EAA6BT,KACnD,IAAIa,EAAsB,IAAMnC,EAChC,OAAOxF,KAAK+E,YAAY4C,EAAqBtG,EAAUkB,GAAamB,KAAK,SAAUC,GAClF,GAAIA,EAAUiE,aAAaC,aAAe,MAAO,CAEhD,IAAIC,EAAUnE,EAAUoE,aAAavC,IAAwB7B,EAAUoE,aACvE,IAAIC,EAAgB,CAAC,EAErBtC,EAAYuC,QAAQ,SAAUC,GAC7B,GAAIJ,EAAQK,eAAeD,EAAUpB,MAAO,CAC3CkB,EAAcE,EAAUpB,MAAQgB,EAAQI,EAAUpB,KACnD,CACD,GACA,OAAOzH,EAAO,CAAC,EAAGiG,EAAmB0C,EACtC,CAEA,OAAO1C,CACR,GAAG5B,KAAK,SAAU0E,GAIjB,OAAO5G,EAAKuC,qBAAqBxB,GAAamB,KAAK,WAClD,OAAO0E,CACR,EACD,EACD,CAEA,OAAO9C,CACR,EAkBA/F,EAAsBmB,UAAU4F,iCAAmC,SAAU+B,EAAmBC,EAAgB/C,GAC/G,IAAIY,EAAwBZ,EAAoBa,MAAM,KACtD,IAAIzG,EAAS2I,EAAe1C,WAC5B,IAAIC,EAAalG,EAAOmG,eACxB,IAAIyC,EAAkBD,EACtB,IAAIE,EAAqBH,EACzB,IAAII,EACJ,IAAI1B,EACJ,IAAI2B,EAEJ,GAAIvC,EAAsB3B,OAAS,EAAG,CACrC,MAAM,IAAImB,MAAM,4DACjB,CAEA,IAAK,IAAIgD,EAAS,EAAGA,EAASxC,EAAsB3B,OAAQmE,IAAU,CACrE,IAAIC,EAAkBzC,EAAsBwC,GAE5C,GAAIA,IAAWxC,EAAsB3B,OAAS,EAAG,CAChDkE,EAA2BE,EAC3B,QACD,CAEA,IAAIC,EAAkBhD,EAAWmB,uBAAuBwB,EAAoBI,GAE5E,GAAIC,GAAmBA,EAAgBC,aAAaC,SAAS,KAAM,CAClEN,EAAgB9I,EAAOqJ,qBAAqBJ,EAAiBL,EAC9D,KAAO,CACN,MAAM,IAAI5C,MAAM,oBAAsB6C,EAAmB1B,KAAO,kCAAoC8B,EAAkB,iCACvH,CAEA,IAAKH,EAAe,CACnB,IAAIQ,EAAoBV,EAAgBxF,UAAY,IAAM6F,EAC1D,MAAM,IAAIjD,MAAM,8BAAgCsD,EAAoB,qBACrE,CACAlC,EAAmBlB,EAAWG,mBAAmB6C,EAAgB5B,MAGjEsB,EAAkBE,EAClBD,EAAqBzB,CACtB,CAEA,MAAO,CACN3E,QAASqG,EACTvC,WAAYa,EACZR,gCAAiCmC,EAEnC,EAQAnJ,EAAsBmB,UAAU4G,yBAA2B,SAAU7B,GACpE,IAAIyD,EAAgBzD,EAAW,wDAC/B,OAAOyD,GAAiBA,EAAcC,MACvC,EASC5J,EAAsBmB,UAAU0I,uBAAyB,SAAUC,GACnE,IAAIC,EAAiB,GACrB,IAAI9H,EAAOxB,KACX,IAAIqE,EAAY,SAAUV,GACzB,OAAOnC,EAAKoC,mBAAmBD,EAAW,KAC3C,EACA,IAAIW,EAAW,SAAUX,GACxB,IAAIE,EAAerC,EAAKsC,gBAAgBH,GACxC,MAAME,CACP,EACA,IAAK,IAAI8E,EAAS,EAAGA,EAASU,EAAoB7E,OAAQmE,IAAU,CACnE,IAAIY,EAAiBvJ,KAAKwJ,cAAcH,EAAoBV,GAAQc,aAAcJ,EAAoBV,GAAQe,YAAaf,GAAQjF,KAAKW,EAAWC,GACnJgF,EAAe7E,KAAK8E,EACrB,CACA,OAAOvJ,KAAK0E,2BAA2B4E,EACxC,EAOA/J,EAAsBmB,UAAUiJ,QAAU,WACzCzK,EAAewB,UAAUiJ,QAAQ5J,MAAMC,KAAM,IAE7C,GAAIA,KAAKE,QAAS,CACjBF,KAAKE,QAAQyJ,SACd,CAEA3J,KAAKE,QAAU,IAChB,EAEA,OAAOX,CAER,EAAG","ignoreList":[]}