{"version":3,"file":"NodeProxy.js","names":["sap","ui","define","NodeProxyBase","Material","cssColorToColor","colorToCSSColor","abgrToColor","colorToABGR","TransformationMatrix","ThreeExtensions","ObjectType","THREE","NodeProxy","extend","metadata","library","constructor","nodeHierarchy","obj3D","call","this","_object3D","_nodeHierarchy","prototype","destroy","getNodeHierarchy","getNodeRef","getNodeId","getVeIds","userData","veids","getVeId","treeNode","sid","getMaterialId","refWithMaterial","geometry","children","length","name","undefined","material","materialId","originalMaterial","getName","type","_updateAncestorsBoundingBox","parent","boundingBox","_vkCalculateObjectOrientedBoundingBox","getLocalMatrix","convertTo4x3","matrix","elements","setLocalMatrix","value","fromArray","convertTo4x4","decompose","position","quaternion","scale","updateMatrixWorld","setProperty","setLocalMatrixNotUpdatingBBox","getWorldMatrix","matrixWorld","setWorldMatrix","multiplyMatrices","Matrix4","copy","invert","getOpacity","opacity","setOpacity","vsManager","getScene","getViewStateManager","_vkSetOpacity","getTintColorABGR","tintColor","setTintColorABGR","setTintColor","_vkSetTintColor","getTintColor","abgr","getNodeMetadata","getHasChildren","getClosed","closed","getBoundingBox","assignMaterial","setNodeRefMaterial","materialRef","nodeRef","side","materialUsed","_vkUpdateMaterialColorAndOpacity","getMaterialRef","forEach","child","objectType","PMI","Hotspot","enumerateMaterials","recursive","collectMaterials","materialRefSet","add","matRefSet","Set","materialRefs","val","push","materials","i","setMaterialRef","replaceMaterial","materialToReplace","materialToReplaceRef","id","getLocalTranslate","x","y","z","getLocalScale","getLocalRotationInQuaternion","w","getLocalRotationInAngleAxis","q","normalise","angle","Math","acos","s","sqrt","getLocalRotationInEuler","order","test","heading","attitude","bank","atan2","PI","sqx","sqy","sqz","asin"],"sources":["NodeProxy-dbg.js"],"mappings":"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","ignoreList":[]}