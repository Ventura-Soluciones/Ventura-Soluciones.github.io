{"version":3,"file":"ViewStateManager.js","names":["sap","ui","define","ViewStateManagerV1","THREE","cssColorToColor","colorToCSSColor","abgrToColor","colorToABGR","ThreeUtils","DataType","boundingBoxColor","Color","MaterialCache","ViewStateManager","extend","metadata","library","basePrototype","getMetadata","getParent","getClass","prototype","init","call","this","_nodeHierarchy","_nodeStates","Map","_selectedNodes","Set","_outlinedNodes","setOutlineColor","setOutlineWidth","_materialCache","_showSelectionBoundingBox","_boundingBoxesScene","Scene","exit","_clearNodeStates","clear","_clearBoundingBoxScene","all3DNodes","allGroupNodes","getAllTHREENodes","forEach","n3d","disposeObject","parent","remove","g3d","nodeStates","state","nodeRef","material","disposeMaterial","boundingBoxNode","_setScene","scene","_setNodeHierarchy","getDefaultNodeHierarchy","setViewStateManager","_scene","initialView","getInitialView","activateView","nodeHierarchy","oldNodeHierarchy","detachNodeReplaced","_handleNodeReplaced","detachNodeUpdated","_handleNodeUpdated","detachNodeRemoving","_handleNodeRemoving","_visibilityTracker","attachNodeReplaced","attachNodeUpdated","attachNodeRemoving","visible","hidden","getSceneRef","traverse","push","fireVisibilityChanged","fireNodeHierarchyReplaced","newNodeHierarchy","event","replacedNodeRef","getParameter","replacementNodeRef","getSelectionState","setSelectionStates","_renderOutline","renderer","camera","resetNodeProperty","property","resetVisibility","toShow","toHide","_deleteUnusedNodeStates","getVisibilityState","nodeRefs","Array","isArray","result","effectiveVisibility","_getNodeState","setVisibilityState","recursive","force","isBulkChange","recursiveVisibilities","allNodeRefs","index","collected","_collectNodesRecursively","concat","length","fill","additionalNodeRefs","newVisibility","node","isScene","changedVisibility","usedNodeRefs","changedNodeRefs","filter","has","add","oldVisibility","changed","_applyVisibilityNodeState","eventParameters","getShouldTrackVisibilityChanges","trackNodeRef","enumerateSelection","callback","enumerateOutlinedNodes","selected","bind","map","_addBoundingBox","boundingBox","Box3","computeObjectOrientedBoundingBox","Box3Helper","_removeBoundingBox","_expandBoundingBoxWithSelected","_expandBoundingBox","_updateBoundingBoxes","get","box","setShowSelectionBoundingBox","val","fireSelectionChanged","unselected","getShowSelectionBoundingBox","setSelectionState","blockNotification","getRecursiveSelection","value","array","indexOf","_appendAncestors","selectedNodes","_applySelectionNodeState","_updateNodeStateMaterials","selectedNodeRefs","unselectedNodeRefs","color","_outlineColorABGR","CSSColor","getType","isValid","fireOutlineColorChanged","outlineColor","outlineColorABGR","getOutlineColor","inABGRFormat","getOutliningState","outliningSet","isOutlined","setOutliningStates","outlinedNodeRefs","unoutlinedNodeRefs","getRecursiveOutlining","outlined","unoutlined","delete","fireOutliningChanged","width","_outlineWidth","fireOutlineWidthChanged","getOutlineWidth","_getOpacity","_opacity","getOpacity","setOpacity","opacity","recursiveOpacities","changedOpacities","_applyOpacityNodeState","fireOpacityChanged","_getTintColorABGR","tintColor","_getTintColor","tintColorABGR","getTintColor","getTintColorMethod","toABGR","setTintColor","recursiveColors","changedColors","changedColorsABGR","_applyTintColorNodeState","fireTintColorChanged","setHighlightColor","_highlightColorABGR","size","ancestorSelected","needsMaterialUpdate","fireHighlightColorChanged","highlightColor","highlightColorABGR","createIfNotExists","originalVisible","ancestorTintColor","ancestorOverridesOpacity","originalMaterial","set","materialCache","releaseMaterial","visibilities","ownVisibility","newVisibilityIsDifferentFromOwn","nodeWasHighlighted","nodeIsHighlighted","children","_setAncestorSelectedRecursively","colors","_setAncestorTintColorRecursively","previousEffectiveTintColor","effectiveTintColor","opacities","_setAncestorOverridesOpacityRecursively","_computeWorldOpacity","localOpacity","userData","defaultHighlightingEmissive","r","g","b","defaultHighlightingSpecular","getHighlightColor","highlightColorThreeJS","red","green","blue","cloneMaterial","copy","emissive","specular","lerp","alpha","worldOpacity","transparent","applyNodeStates","revertNodeStates","nodeState","clone"],"sources":["ViewStateManager-dbg.js"],"mappings":"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","ignoreList":[]}