{"version":3,"file":"TotaraLoader.js","names":["sap","ui","define","Log","SceneContext","CallbackHandler","Command","TotaraUtils","WorkerScriptLoader","mark","TotaraLoader","this","_performanceTimingMsg","_isPostable","_suppressSendRequests","_loadingFinishedSent","currentSceneInfo","contextMap","Map","tokenContextMap","_skipLowLODRendering","_maxUrlLength","_maxActiveRequests","_consumptionScenario","_meshesBatchSize","_materialsBatchSize","_geomMeshesBatchSize","_geomMeshesMaxBatchDataSize","_annotationsBatchSize","_voxelThreshold","onErrorCallbacks","onImageFinishedCallbacks","onImageDetailsFinishedCallbacks","onMaterialFinishedCallbacks","onAnnotationFinishedCallbacks","onSetSequenceCallbacks","onSetTrackCallbacks","onViewGroupUpdatedCallbacks","onLoadingFinishedCallbacks","prototype","running","_worker","undefined","run","loadScript","that","onmessage","event","data","jsonContent","jsonString","JSON","parse","Object","assign","context","processCommand","name","binaryContent","isInitial","sendRequest","requestQueue","onerror","Promise","resolve","getUrl","_url","setUrl","url","endsWith","getSessionId","_sessionId","setSessionId","sessionId","getSkipLowLODRendering","setSkipLowLODRendering","skipLowLODRendering","getMaxUrlLength","setMaxUrlLength","maxUrlLength","getMaxActiveRequests","setMaxActiveRequests","maxActiveRequests","postMessage","method","getConsumptionScenario","setConsumptionScenario","consumptionScenario","getMeshesBatchSize","setMeshesBatchSize","meshesBatchSize","getMaterialsBatchSize","setMaterialsBatchSize","materialsBatchSize","getGeomMeshesBatchSize","setGeomMeshesBatchSize","geomMeshesBatchSize","getGeomMeshesMaxBatchDataSize","setGeomMeshesMaxBatchDataSize","geomMeshesMaxBatchDataSize","getAnnotationsBatchSize","setAnnotationsBatchSize","annotationsBatchSize","getVoxelThreshold","setVoxelThreshold","voxelThreshold","sceneBuilder","setSceneBuilder","removeContext","sceneId","delete","dispose","forEach","clear","cleanup","getSceneBuilder","getContext","get","createContext","params","set","token","onActiveCamera","onActiveCameraCallbacks","attach","onInitialSceneFinished","onInitialSceneFinishedCallbacks","onPartialRetrievalFinished","onPartialRetrievalFinishedCallbacks","onViewFinished","onViewFinishedCallbacks","onSceneCompleted","onSceneCompletedCallbacks","onProgressChanged","setOnProgressChanged","onLoadingFinished","detachAll","onContentChangesProgress","onContentChangesProgressCallbacks","onInitialViewCompleted","onInitialViewCompletedCallbacks","isLoadingFinished","contextIterator","values","contextItem","next","done","value","decrementResourceCountersForDeletedTreeNode","nodeId","logPerformance","progressLogger","request","sceneVeId","contextParams","authorizationHandler","root","id","retrievalType","RetrievalType","Initial","initialRequestTime","Date","now","enableLogger","createLogger","Device","browser","mobile","Math","min","batchSizeInfo","getBatchSizeInfo","meshes","setBatchSizeInfo","getMesh","materials","getMaterial","geomMeshes","getGeomMesh","annotations","getAnnotation","then","accessTokenResponse","getScene","message","processSetSceneCommand","veid","defaultViewId","defaultViewGroupId","sceneThumbnailId","imageId","dimension","defaultRootEntityId","currentViewGroupId","viewId","activateView","initialViewId","currentViewId","initialViewDecided","getView","parameters","query","configureSceneViewQuery","pushViewGroups","update","sidArray","reject","nodeSidsForPartialTree","Set","Partial","callback","detach","rnks","rnvs","replacedNodes","key","push","replacementNodes","sids","replacedNodeRefs","replacementNodeRefs","breadcrumbs","isPartialTree","requestViewGroup","viewGroupId","includeAnimation","forceRefresh","promise","views","getViewGroup","length","onViewGroupFinishedCallbacks","viewgroup","requestView","viewType","playbackIds","methodName","getViewAnimations","$expand","onSetPlaybackCallbacks","setPlaybackCallback","resultView","setSequenceCallback","currentView","setTrackCallback","requestMaterial","requestedMaterial","materialId","getMaterialRef","veId","material","textureAddedToMaterialCallback","result","m","userData","imageIdsToAddAsTexture","detachImageAddedToMaterial","materialFinishedCallback","newMaterialId","attachImageAddedToMaterial","requestAnnotation","annotationId","annotationIdToBeRetrieved","annotation","annotationFinishedCallback","imageDetailFinishedCallback","fetchedAnnotation","_getMaterial","label","imageDetailsToLoad","size","imageIdsToLoad","imageFinishedCallback","checkMaterialExists","newAnnotationId","setSuppressSendRequests","suppressSendRequests","somethingRequested","isEmpty","newCommand","generateRequestCommand","timestamp","performanceTiming","checkError","error","reportError","errorText","execute","processContextCommand","stringify","call","err","setTree","events","setPerformance","setScene","setTreeNode","notifyFinishedTree","setView","setViewNode","setViewGroup","notifyFinishedView","setCamera","allocateMeshBuffer","setMesh","setMaterial","setGeometry","setImage","setSvgImage","setAnnotation","setLineStyle","setFillStyle","setTextStyle","setParametric","setPointCloudGroup","setPlayback","setHighlightStyle","setSequence","setTrack","unsuppressSendRequests","setMarker","notifyError","info","sid","postPerformanceTiming","msg","shift","printLogTokens","getTokens","getMaxBatchStringLength","command","urlBase","cachingUrlBase","baseQueryString","maxBatchStringLength","encodeURI","ids","getBatchSeparatorLength","streamingUrl","cachingUrl","indexOf","substring","batchedCommands","batchedCommand","separatorLength"],"sources":["TotaraLoader-dbg.js"],"mappings":"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","ignoreList":[]}