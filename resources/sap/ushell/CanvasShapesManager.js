// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/Device","sap/ushell/utils","sap/ushell/Container","sap/ui/core/Theming"],function(e,t,n,i){"use strict";var r=function(e,t){this.x=e||0;this.y=t||0};r.prototype.getDistance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.floor(Math.sqrt(t*t+n*n))};r.prototype.getSegment=function(e){if(this.x<=e.x&&this.y<=e.y){return 1}if(this.x<=e.x&&this.y>=e.y){return 2}if(this.x>=e.x&&this.y>=e.y){return 3}if(this.x>=e.x&&this.y<=e.y){return 4}};r.prototype.offset=function(e,t){this.x=this.x+e;this.y=this.y+t};var s=function(e,t,n,i){this.x={min:e,max:t};this.y={min:n,max:i}};var o=window.innerWidth>0?window.innerWidth:screen.width;var a=window.innerHeight>0?window.innerHeight:screen.height;var h={cpr1:new s(0,o/4,0,a/4),cpr2:new s(o/2,o,0,a/4),cpr3:new s(o/4,3*o/4,a*3/4,a)};var u=function(){this.init()};u.prototype={radiusRange:{min:800,max:900},_getCanvas:function(){var e=document.getElementById("shell-shapes");if(e){return e}return this._createCanvas("shell-shapes")},_createCanvas:function(e){var t=document.createElement("canvas");t.setAttribute("id",e);t.setAttribute("role","presentation");this._updateCanvasDimensions(t);n.getRendererInternal().setShellShapes(t);return t},_updateCanvasDimensions:function(e){e.height=window.innerHeight>0?window.innerHeight:screen.height+"px";e.width=window.innerWidth>0?window.innerWidth:screen.width+"px"},init:function(){var t={cpr1:h.cpr1,cpr2:h.cpr2,cpr3:h.cpr3},n,r,s,o,a;this.shapes=[];this.bIsDirty=true;for(a in t){n=Math.random(this.radiusRange.max-this.radiusRange.min)+this.radiusRange.min;r=this.getRandomPoint(t[a]);s=this._getSquarePoints(n,r);o=this._calculatebezierCurves(n,s);this.shapes.push({bezierCurves:o,centerPoint:r})}for(var u in this.shapes){var c=this._generateRandomAmorphousShapeValues();this.shapes[u]=this.makeAmorphousShape(this.shapes[u],c.edge0.edgeNum,c.edge0.xOffSet,c.edge0.yOffSet,c.edge0.xStretch);this.shapes[u]=this.makeAmorphousShape(this.shapes[u],c.edge1.edgeNum,c.edge1.xOffSet,c.edge1.yOffSet,c.edge1.xStretch)}i.attachApplied(this.onThemeChanged.bind(this));e.resize.attachHandler(this.resizeHandler,this)},_generateRandomAmorphousShapeValues:function(){var e={edge0:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0},edge1:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0}};var t=this._getRandomInt(0,3);for(var n in e){e[n].edgeNum=t;e[n].xOffSet=this._getRandomInt(200,400);e[n].yOffSet=this._getRandomInt(-200,-400);t+=this._getRandomInt(0,1)<.5?-1:1;if(t===-1){t=3}if(t===4){t=0}}t=this._getRandomInt(0,1);if(t<.5){t=t<.25?0:1;e["edge"+t].xStretch=this._getRandomInt(0,200)}return e},getPoint:function(e,t){return new r(e,t)},getRandomPoint:function(e){var t=Math.floor(Math.random()*(e.x.max-e.x.min)+e.x.min),n=Math.floor(Math.random()*(e.y.max-e.y.min)+e.y.min);return new r(t,n)},onThemeChanged:async function(){const[e]=await t.getThemingParameters(["sapUiShellBackgroundPatternColor"]);if(e&&e!=="transparent"){this.sShapesColor=e;this.bIsDirty=true;this.drawShapes()}},resizeHandler:function(){var e=this._getCanvas();if(e){this._updateCanvasDimensions(e);this.bIsDirty=true;this.onThemeChanged()}},enableAnimationDrawing:function(e){this._enableDrawing=e},makeAmorphousShape:function(e,t,n,i){var r,s,o;switch(t){case 0:r=e.bezierCurves[0].controlPoint1;s=e.bezierCurves[3].controlPoint2;o=this._rotatePoints(n,i,r,s);e.bezierCurves[0].controlPoint1=o[0];e.bezierCurves[3].controlPoint2=o[1];break;case 1:r=e.bezierCurves[0].controlPoint2;s=e.bezierCurves[1].controlPoint1;o=this._rotatePoints(n,i,r,s);e.bezierCurves[0].controlPoint2=o[0];e.bezierCurves[1].controlPoint1=o[1];break;case 2:r=e.bezierCurves[1].controlPoint2;s=e.bezierCurves[2].controlPoint1;o=this._rotatePoints(n,i,r,s);e.bezierCurves[1].controlPoint2=o[0];e.bezierCurves[2].controlPoint1=o[1];break;case 3:r=e.bezierCurves[2].controlPoint2;s=e.bezierCurves[3].controlPoint1;o=this._rotatePoints(n,i,r,s);e.bezierCurves[2].controlPoint2=o[0];e.bezierCurves[3].controlPoint1=o[1];break}return e},_rotatePoints:function(e,t,n,i){var s,o,a=[];s=n.x+e;o=n.y+t;a.push(new r(s,o));s=i.x-e;o=i.y-t;a.push(new r(s,o));return a},_getSquarePoints:function(e,t){var n=[];n[0]=new r(t.x+e,t.y);n[1]=new r(t.x,t.y-e);n[2]=new r(t.x-e,t.y);n[3]=new r(t.x,t.y+e);return n},_getRandomInt:function(e,t){if(e==0&&t==1){return Math.random()}return Math.floor(Math.random()*(t-e+1))+e},_calculatebezierCurves:function(e,t){var n=[],i,s,o,a;a=t[0];o=t[1];i=new r(a.x,a.y-e/2);s=new r(a.x-e/2,a.y-e);n.push({startPoint:a,endPoint:o,controlPoint1:i,controlPoint2:s});a=t[1];o=t[2];i=new r(a.x-e/2,a.y);s=new r(a.x-e,a.y+e/2);n.push({startPoint:a,endPoint:o,controlPoint1:i,controlPoint2:s});a=t[2];o=t[3];i=new r(a.x,a.y+e/2);s=new r(a.x+e/2,a.y+e);n.push({startPoint:a,endPoint:o,controlPoint1:i,controlPoint2:s});a=t[3];o=t[0];i=new r(a.x+e/2,a.y);s=new r(a.x+e,a.y-e/2);n.push({startPoint:a,endPoint:o,controlPoint1:i,controlPoint2:s});return n},drawShapes:async function(){var e=this._getCanvas();if(this.bIsDirty&&e&&e.getContext){var n=e.getContext("2d"),i,r,s,h;n.clearRect(0,0,o*2,a*2);if(!this.sShapesColor){const[e]=await t.getThemingParameters(["sapUiShellBackgroundPatternColor"]);this.sShapesColor=e}if(this.sShapesColor&&this.sShapesColor!=="transparent"){for(var u=0;u<this.shapes.length;u++){n.beginPath();i=this.shapes[u].bezierCurves[0].startPoint;n.moveTo(i.x,i.y);for(var c=0;c<this.shapes[u].bezierCurves.length;c++){r=this.shapes[u].bezierCurves[c].endPoint;s=this.shapes[u].bezierCurves[c].controlPoint1;h=this.shapes[u].bezierCurves[c].controlPoint2;n.bezierCurveTo(Math.floor(s.x),Math.floor(s.y),Math.floor(h.x),Math.floor(h.y),Math.floor(r.x),Math.floor(r.y))}n.closePath();n.fillStyle=this.sShapesColor;n.fill()}}this.bIsDirty=false}}};var c=new u;return c},false);
//# sourceMappingURL=CanvasShapesManager.js.map