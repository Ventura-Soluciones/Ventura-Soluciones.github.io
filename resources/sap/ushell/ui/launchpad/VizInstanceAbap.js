// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/Deferred","sap/ushell/ui/launchpad/VizInstance","sap/m/library","sap/base/Log","sap/ushell/library","sap/ushell/utils/chipsUtils","sap/ushell/ui/launchpad/VizInstanceRenderer","sap/ushell/Container"],function(t,e,i,n,s,a,r,o){"use strict";var p=i.LoadState;var h=s.DisplayFormat;var c=e.extend("sap.ushell.ui.launchpad.VizInstanceAbap",{metadata:{library:"sap.ushell"},renderer:r});c.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oLoadDeferred=new t;this._oChipInstancePromise=o.getServiceAsync("PageBuilding").then(function(t){var e=t.getFactory();var i=this.getInstantiationData();var n;var s;if(!i.simplifiedChipFormat){n={chipId:i.chip.id,chip:i.chip}}else{var r=i.chip||{};s=r.bags;n={chipId:r.chipId,configuration:r.configuration?JSON.stringify(r.configuration):"{}"}}var o=e.createChipInstance(n);a.addBagDataToChipInstance(o,s);return o}.bind(this))};c.prototype.load=function(t){this._oChipInstancePromise.then(function(t){this._oChipInstance=t;return new Promise(this._oChipInstance.load)}.bind(this)).then(function(){if(this.getPreview()){var t=this._oChipInstance.getContract("preview");if(t){t.setEnabled(true)}}this._setVisible(this.getActive());return this._oChipInstance.getImplementationAsSapui5Async()}.bind(this)).then(function(t){this._setChipInstanceType();this.setContent(t);if(t.getComponentInstance&&t.getComponentInstance()){t.getComponentInstance().setParent(this)}this._oLoadDeferred.resolve()}.bind(this)).catch(function(t){this.setState(p.Failed);this._oLoadDeferred.reject(t)}.bind(this));return this._oLoadDeferred.promise};c.prototype.loaded=function(){return this._oLoadDeferred.promise};c.prototype._setChipInstanceType=function(){var t=this._oChipInstance.getContract("types");if(t){t.setType(this._mapDisplayFormatToChip(this.getDisplayFormat()))}};c.prototype._mapDisplayFormatToChip=function(t){var e={};e[h.Standard]="tile";e[h.StandardWide]="tile";e[h.Compact]="link";e[h.Flat]="flat";e[h.FlatWide]="flatwide";return e[t]};c.prototype._setVisible=function(t){var e=this._oChipInstance&&!this._oChipInstance.isStub()&&this._oChipInstance.getContract("visible");if(e){e.setVisible(t)}};c.prototype.refresh=function(){if(this._oChipInstance){this._oChipInstance.refresh()}};c.prototype.setActive=function(t,e){this._setVisible(t);if(e){this.refresh()}return this.setProperty("active",t,false)};return c});
//# sourceMappingURL=VizInstanceAbap.js.map