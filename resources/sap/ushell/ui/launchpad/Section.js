//Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/deepClone","sap/f/dnd/GridDropInfo","sap/f/GridContainer","sap/f/GridContainerItemLayoutData","sap/f/GridContainerSettings","sap/m/Button","sap/m/Input","sap/m/Label","sap/m/library","sap/m/Text","sap/m/Title","sap/m/ToolbarSpacer","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/ui/core/Control","sap/ui/core/CustomData","sap/ui/core/Lib","sap/ui/core/dnd/DragInfo","sap/ui/core/dnd/DropInfo","sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ui/events/KeyCodes","sap/ui/model/Filter","sap/ushell/resources","sap/ushell/ui/launchpad/ExtendedChangeDetection","sap/ushell/library","sap/ushell/ui/launchpad/section/CompactArea","sap/ui/core/Element","sap/ushell/ui/launchpad/SectionRenderer"],function(t,e,i,a,r,o,n,s,g,l,u,p,d,h,f,c,y,m,A,S,b,C,v,z,_,w,L,V,D,G){"use strict";var R=l.ButtonType;var I=l.OverflowToolbarPriority;var x=l.TileSizeBehavior;var E=C.dnd.DropLayout;var T=C.dnd.DropPosition;var B=C.InvisibleMessageMode;var P=C.TextAlign;var F=C.TitleLevel;var X=L.DisplayFormat;function M(t,e,i){if(!Array.isArray(e)||!e.length){return null}if(t&&t.getDomRef){t=t.getDomRef()}if(!t){return e[i?e.length-1:0]}function a(t,e){var i=t.left+t.right-e.left-e.right;var a=t.top+t.bottom-e.top-e.bottom;return i*i+a*a}function r(t){var e=t.querySelector(".sapMGTLineStyleHelper");return(e||t).getBoundingClientRect()}var o=r(t);var n=null;var s=0;var g;var l;var u;for(var p=e.length-1;p>=0;p--){l=e[p].getDomRef();if(l){g=r(l);if(!g.width&&!g.height){continue}if(i&&g.top>=o.top||!i&&g.bottom<=o.bottom){continue}u=a(g,o);if(!n||u<s){n=e[p];s=u}}}return n}var N=c.extend("sap.ushell.ui.launchpad.Section",{metadata:{library:"sap.ushell",properties:{dataHelpId:{type:"string",group:"Misc",defaultValue:""},ariaLabel:{type:"string",group:"Misc",defaultValue:""},default:{type:"boolean",group:"Misc",defaultValue:false},editable:{type:"boolean",group:"Misc",defaultValue:false},enableAddButton:{type:"boolean",group:"Behavior",defaultValue:true},enableDeleteButton:{type:"boolean",group:"Behavior",defaultValue:true},enableGridBreakpoints:{type:"boolean",group:"Appearance",defaultValue:false},enableGridContainerQuery:{type:"boolean",group:"Appearance",defaultValue:false},enableResetButton:{type:"boolean",group:"Behavior",defaultValue:true},enableShowHideButton:{type:"boolean",group:"Behavior",defaultValue:true},enableVisualizationReordering:{type:"boolean",group:"Behavior",defaultValue:false},gridContainerGap:{type:"string",group:"Appearance",defaultValue:"0.5rem"},gridContainerGapXS:{type:"string",group:"Appearance",defaultValue:"0.475rem"},gridContainerGapS:{type:"string",group:"Appearance",defaultValue:"0.475rem"},gridContainerGapM:{type:"string",group:"Appearance",defaultValue:"0.5rem"},gridContainerGapL:{type:"string",group:"Appearance",defaultValue:"0.5rem"},gridContainerGapXL:{type:"string",group:"Appearance",defaultValue:"0.5rem"},gridContainerRowSize:{type:"string",group:"Appearance",defaultValue:"5.25rem"},gridContainerRowSizeXS:{type:"string",group:"Appearance",defaultValue:"4.375rem"},gridContainerRowSizeS:{type:"string",group:"Appearance",defaultValue:"5.25rem"},gridContainerRowSizeM:{type:"string",group:"Appearance",defaultValue:"5.25rem"},gridContainerRowSizeL:{type:"string",group:"Appearance",defaultValue:"5.25rem"},gridContainerRowSizeXL:{type:"string",group:"Appearance",defaultValue:"5.25rem"},noVisualizationsText:{type:"string",group:"Appearance",defaultValue:_.i18n.getText("Section.NoVisualizationsText")},title:{type:"string",group:"Appearance",defaultValue:""},showNoVisualizationsText:{type:"boolean",group:"Behavior",defaultValue:false},showSection:{type:"boolean",group:"Misc",defaultValue:true},showLinks:{type:"boolean",group:"Behavior",defaultValue:true},sizeBehavior:{type:"sap.m.TileSizeBehavior",group:"Misc",defaultValue:x.Responsive}},defaultAggregation:"visualizations",aggregations:{visualizations:{type:"sap.ui.core.Control",bindable:"bindable",multiple:true},defaultItems:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"-defaultArea",aggregation:"items",forwardBinding:false},dnd:true},flatItems:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"-flatArea",aggregation:"items",forwardBinding:false},dnd:true},compactItems:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"-compactArea",aggregation:"items",forwardBinding:false},dnd:true},_title:{type:"sap.m.Title",multiple:false,hidden:true},_header:{type:"sap.m.OverflowToolbar",multiple:false,hidden:true},_noVisualizationsText:{type:"sap.m.Text",multiple:false,hidden:true},_defaultArea:{type:"sap.f.GridContainer",multiple:false,hidden:true},_flatArea:{type:"sap.f.GridContainer",multiple:false,hidden:true},_compactArea:{type:"sap.ushell.ui.launchpad.section.CompactArea",multiple:false,hidden:true}},events:{add:{},delete:{},reset:{},titleChange:{},visualizationDrop:{parameters:{draggedControl:{type:"sap.ui.core.Control"},droppedControl:{type:"sap.ui.core.Control"},dropPosition:{type:"string"}}},areaDragEnter:{parameters:{originalEvent:{type:"sap.ui.base.Event"},dragControl:{type:"sap.ui.core.Control"},sourceArea:{type:"string"},targetArea:{type:"string"}}},sectionVisibilityChange:{parameters:{visible:{type:"boolean"}}},borderReached:{parameters:{event:{type:"jQuery.Event"}}}}},renderer:G,resourceModel:_.i18nModel});function k(e){for(var i in X){if(e.displayFormatHint===X[i]){return X[i]}}if(e.displayFormatHint&&e.displayFormatHint!=="tile"){t.error("DisplayFormat '"+e.displayFormatHint+"' not valid - 'standard' is used")}return X.Standard}function O(){return new z({path:"",caseSensitive:true,test:function(t){var e=k(t);return e===X.Standard||e===X.StandardWide}})}function H(){return new z({path:"",caseSensitive:true,test:function(t){var e=k(t);return e===X.Flat||e===X.FlatWide}})}function W(){return new z({path:"",caseSensitive:true,test:function(t){return k(t)===X.Compact}})}N.prototype.bindAggregation=function(i,a){if(i==="visualizations"){if(a.filters){t.error("bind visualizations with pre-existing filters is not implemented.")}var r=e(a);r.filters=O();c.prototype.bindAggregation.call(this,"defaultItems",r);var o=e(a);o.filters=H();c.prototype.bindAggregation.call(this,"flatItems",o);var n=e(a);n.filters=W();c.prototype.bindAggregation.call(this,"compactItems",n)}else{c.prototype.bindAggregation.call(this,i,a)}return this};N.prototype.getAllItems=function(){return this.getDefaultItems().concat(this.getFlatItems(),this.getCompactItems())};N.prototype.getVisualizations=function(){var t=this.getAllItems();t.sort(function(e,i){var a=e.getBindingContext().getPath();var r=parseInt(a.split("/").pop(),10);a=i.getBindingContext().getPath();var o=parseInt(a.split("/").pop(),10);if(r===o){r=t.indexOf(e);o=t.indexOf(i)}return r<o?-1:1});return t};N.prototype.filterVisualizations=function(t){var e=t?new z({filters:[O(),t],and:true}):O();var i=t?new z({filters:[H(),t],and:true}):H();var a=t?new z({filters:[W(),t],and:true}):W();this.getBinding("defaultItems").filter(e);this.getBinding("flatItems").filter(i);this.getBinding("compactItems").filter(a)};N.prototype.indexOfVisualization=function(t){return this.getVisualizations().indexOf(t)};N.prototype.addVisualization=function(e,i){t.error("Section.prototype.addVisualization should not be called");return this.addAggregation("visualizations",e,i)};N.prototype.insertVisualization=function(e,i,a){t.error("Section.prototype.insertVisualization should not be called");return this.insertAggregation("visualizations",e,i,a)};N.prototype.removeVisualization=function(e,i){t.error("Section.prototype.removeVisualization should not be called");return this.removeAggregation("visualizations",e,i)};N.prototype.onBorderReached=function(t){var e;var i=t.getParameter("event");var a=i.keyCode;var r=i.type;var o=D.closestTo(i.target.firstElementChild);switch(a){case v.ARROW_UP:e=this.getClosestVizualization(o,true);break;case v.ARROW_DOWN:e=this.getClosestVizualization(o,false);break;case v.ARROW_LEFT:e=this._getPreviousViz(o);break;case v.ARROW_RIGHT:e=this._getNextViz(o);break;default:return}if(e){this._focusItem(this.getItemPosition(e));i.preventDefault()}else{this.fireBorderReached({event:t,section:this,direction:r==="sapnext"?"down":"up"})}};N.prototype._getNextViz=function(t){var e=this.getAllItems();var i=e.indexOf(t);return i===-1?e[0]:e[i+1]};N.prototype._getPreviousViz=function(t){var e=this.getAllItems();var i=e.indexOf(t);return i===-1?e[e.length-1]:e[i-1]};N.prototype.handleEmptyContentAreas=function(){var t=!!this.getDefaultItems().length;var e=!!this.getFlatItems().length;var i=!!this.getCompactItems().length;var a=!t&&!i&&!e;this.toggleStyleClass("sapUshellSectionNoVisualizations",a);this.getAggregation("_defaultArea").toggleStyleClass("sapUshellSectionDefaultArea",t);this.getAggregation("_flatArea").toggleStyleClass("sapUshellSectionFlatArea",e);if(!t){this._removeTabIndexFromGridContainer(this.getAggregation("_defaultArea"))}if(!e){this._removeTabIndexFromGridContainer(this.getAggregation("_flatArea"))}var r=this.getDomRef();if(r){if(this.getEditable()&&this.getShowNoVisualizationsText()&&a){r.setAttribute("aria-describedBy",this.getAggregation("_noVisualizationsText").getId())}else{r.removeAttribute("aria-describedBy")}}};N.prototype._removeTabIndexFromGridContainer=function(t){var e=t.getFocusDomRef();if(e){e.setAttribute("tabindex","-1");for(var i=0;i<e.children.length;++i){e.children[i].setAttribute("tabindex","-1")}}};N.prototype.init=function(){this.setAggregation("_title",new p({text:this.getTitle(),level:F.H3,visible:!this.getEditable()&&this.getShowSection()}).addStyleClass("sapUshellSectionTitle sapContrastPlus"));this._initHeaderAggregation();this.setAggregation("_noVisualizationsText",new u({text:this.getNoVisualizationsText(),textAlign:P.Center,visible:this.getEditable()&&this.getShowNoVisualizationsText()}).addStyleClass("sapUshellSectionNoVisualizationsText"));this._initGridContainerAggregation();this._initGridContainerAggregation(true);this._initCompactAreaAggregation(true);this._oInvisibleMessageInstance=b.getInstance();this._oDefaultItemsChangeDetection=new w("defaultItems",this,["flatItems","compactItems"]);this._oFlatItemsChangeDetection=new w("flatItems",this,["defaultItems","compactItems"]);this._oCompactItemsChangeDetection=new w("compactItems",this,["defaultItems","flatItems"]);this._fnGlobalDragStart=function(){var t=this.getAggregation("_flatArea").getDragDropConfig();var e=this.getAggregation("_compactArea").getDragDropConfig();t[0].setGroupName("Section");t[1].setGroupName("Section");e[0].setGroupName("Section");e[1].setGroupName("Section");e[2].setGroupName("Section")}.bind(this);this._fnGlobalDragEnd=function(){var t=this.getAggregation("_flatArea").getDragDropConfig();var e=this.getAggregation("_compactArea").getDragDropConfig();t[0].setGroupName("FlatArea");t[1].setGroupName("FlatArea");e[0].setGroupName("CompactArea");e[1].setGroupName("CompactArea");e[2].setGroupName("CompactArea")}.bind(this);document.addEventListener("dragstart",this._fnGlobalDragStart,false);document.addEventListener("dragend",this._fnGlobalDragEnd,false)};N.prototype._initHeaderAggregation=function(){var t=this.getTitle();var e=this.getDefault();var i=new s({maxLength:100,placeholder:_.i18n.getText("Section.TitlePlaceholder"),value:t,valueLiveUpdate:true,visible:!e,change:function(t){this.setTitle(t.getParameter("value"));this.fireTitleChange()}.bind(this),layoutData:new f({priority:I.NeverOverflow,shrinkable:true,minWidth:"9rem",maxWidth:"40rem"})});this.setAggregation("_header",new h({content:[new u({text:t,visible:e,layoutData:new f({priority:I.NeverOverflow})}),new g({text:_.i18n.getText("Section.Label.Title"),labelFor:i.getId(),showColon:true,visible:!e,layoutData:new f({priority:I.NeverOverflow})}),i,new d,new n({text:_.i18n.getText("Section.Button.AddVisualization"),type:R.Transparent,press:this.fireAdd.bind(this,{section:this}),visible:this.getEnableAddButton()&&!e}),new n({text:this.getShowSection()?_.i18n.getText("Section.Button.Hide"):_.i18n.getText("Section.Button.Show"),type:R.Transparent,press:function(){var t=!this.getShowSection();var e=m.getResourceBundleFor("sap.m");this._oInvisibleMessageInstance.announce([_.i18n.getText(t?"Section.nowBeingShown":"Section.nowBeingHidden"),_.i18n.getText("Section.ButtonLabelChanged"),_.i18n.getText(t?"Section.Button.Hide":"Section.Button.Show"),e.getText("ACC_CTR_TYPE_BUTTON")].join(" "),B.Polite);this.setShowSection(t);this.fireSectionVisibilityChange({visible:t})}.bind(this),visible:this.getEnableShowHideButton()&&!e}),new n({text:_.i18n.getText("Section.Button.Reset"),type:R.Transparent,press:this.fireReset.bind(this),visible:this.getEnableResetButton()&&!e}),new n({text:_.i18n.getText("Section.Button.Delete"),type:R.Transparent,press:this.fireDelete.bind(this),visible:this.getEnableDeleteButton()&&!e})],visible:this.getEditable()}).addStyleClass("sapUshellSectionHeader"))};N.prototype._initGridContainerAggregation=function(t){var e=new a({id:this.getId()+(t?"-flatArea":"-defaultArea"),containerQuery:this.getEnableGridContainerQuery(),minHeight:"0",visible:this.getEditable()||this.getShowSection(),customData:[new y({key:"default",value:this.getDefault()}),new y({key:"area",value:t?X.Flat:X.Standard})],layout:new o({rowSize:this.getGridContainerRowSize(),columnSize:this.getGridContainerRowSize(),gap:this.getGridContainerGap()}),layoutXS:new o({columns:0,rowSize:this.getGridContainerRowSizeXS(),columnSize:this.getGridContainerRowSizeXS(),gap:this.getGridContainerGapXS()}),layoutS:new o({columns:0,rowSize:this.getGridContainerRowSizeS(),columnSize:this.getGridContainerRowSizeS(),gap:this.getGridContainerGapS()}),layoutM:new o({columns:0,rowSize:this.getGridContainerRowSizeM(),columnSize:this.getGridContainerRowSizeM(),gap:this.getGridContainerGapM()}),layoutL:new o({columns:0,rowSize:this.getGridContainerRowSizeL(),columnSize:this.getGridContainerRowSizeL(),gap:this.getGridContainerGapL()}),layoutXL:new o({columns:0,rowSize:this.getGridContainerRowSizeXL(),columnSize:this.getGridContainerRowSizeXL(),gap:this.getGridContainerGapXL()}),dragDropConfig:[new A({enabled:this.getEnableVisualizationReordering(),groupName:t?"flatArea":"Section",sourceAggregation:"items"}),new i({enabled:this.getEnableVisualizationReordering(),groupName:t?"flatArea":"Section",dropLayout:E.Horizontal,dropPosition:T.Between,targetAggregation:"items",dropIndicatorSize:t?this._getFlatDropIndicatorSize.bind(this):this._getDefaultDropIndicatorSize.bind(this),dragEnter:this._onDragEnter.bind(this),drop:this._reorderVisualizations.bind(this)})]}).addStyleClass("sapUshellSectionGridContainer");if(this.getEnableGridBreakpoints()){var r=this.getSizeBehavior()==="Small";e.getLayoutXS().setColumns(4);e.getLayoutS().setColumns(4);e.getLayoutM().setColumns(6);e.getLayoutL().setColumns(r?12:10);e.getLayoutXL().setColumns(r?16:14)}e.addEventDelegate({onAfterRendering:this.handleEmptyContentAreas.bind(this)});e.attachBorderReached(this.onBorderReached.bind(this));this.setAggregation(t?"_flatArea":"_defaultArea",e)};N.prototype._initCompactAreaAggregation=function(){var t=new V({id:this.getId()+"-compactArea",enableLinkReordering:this.getEnableVisualizationReordering(),itemDrop:this._reorderVisualizations.bind(this),customData:[new y({key:"default",value:this.getDefault()}),new y({key:"area",value:X.Compact})],dragDropConfig:[new A({enabled:this.getEnableVisualizationReordering(),groupName:"CompactArea",sourceAggregation:"items"}),new S({enabled:this.getEnableVisualizationReordering(),groupName:"CompactArea",dropLayout:E.Horizontal,dropPosition:T.Between,targetAggregation:"items",dragEnter:this._onDragEnter.bind(this),drop:this._reorderVisualizations.bind(this)}),new S({enabled:this.getEnableVisualizationReordering(),groupName:"CompactArea",dragEnter:this._onDragEnter.bind(this),drop:this._reorderVisualizations.bind(this)})]}).addStyleClass("sapUshellSectionGridContainer");t.addEventDelegate({onAfterRendering:this.handleEmptyContentAreas.bind(this)});t.attachBorderReached(this.onBorderReached.bind(this));this.setAggregation("_compactArea",t)};N.prototype.setDefault=function(t){this.setProperty("default",t,true);var e=this.getAggregation("_header").getContent();e[0].setVisible(t);e[1].setVisible(!t);e[2].setVisible(!t);e[4].setVisible(this.getEnableAddButton()&&!t);e[5].setVisible(this.getEnableShowHideButton()&&!t);e[6].setVisible(this.getEnableResetButton()&&!t);e[7].setVisible(this.getEnableDeleteButton()&&!t);this.getAggregation("_defaultArea").getCustomData()[0].setValue(t);this.getAggregation("_flatArea").getCustomData()[0].setValue(t);this.getAggregation("_compactArea").getCustomData()[0].setValue(t);return this};N.prototype.setEditable=function(t){if(t===undefined||this.getEditable()===t){return this}this.setProperty("editable",t,true);this.toggleStyleClass("sapUshellSectionEdit",t);this.getAggregation("_title").setVisible(!t&&this.getShowSection());this.getAggregation("_header").setVisible(t);this.getAggregation("_noVisualizationsText").setVisible(t&&this.getShowNoVisualizationsText());this.getAggregation("_defaultArea").setVisible(t||this.getShowSection());this.getAggregation("_flatArea").setVisible(t||this.getShowSection());this.getAggregation("_compactArea").setVisible(t||this.getShowSection());var e=this.getDomRef();if(e){if(t){e.setAttribute("tabindex","0");if(this.getShowNoVisualizationsText()){e.setAttribute("aria-describedBy",this.getAggregation("_noVisualizationsText").getId())}else{e.removeAttribute("aria-describedBy")}}else{e.removeAttribute("tabindex")}}return this};N.prototype.setEnableAddButton=function(t){this.setProperty("enableAddButton",t,true);this.getAggregation("_header").getContent()[4].setVisible(t&&!this.getDefault());return this};N.prototype.setEnableDeleteButton=function(t){this.setProperty("enableDeleteButton",t,true);this.getAggregation("_header").getContent()[7].setVisible(t&&!this.getDefault());return this};N.prototype.setEnableGridBreakpoints=function(t){this.setProperty("enableGridBreakpoints",t,true);var e=this.getAggregation("_defaultArea");var i=this.getAggregation("_flatArea");if(t){var a=this.getSizeBehavior()==="Small";e.getLayoutXS().setColumns(4);e.getLayoutS().setColumns(4);e.getLayoutM().setColumns(6);e.getLayoutL().setColumns(a?12:10);e.getLayoutXL().setColumns(a?16:14);i.getLayoutXS().setColumns(4);i.getLayoutS().setColumns(4);i.getLayoutM().setColumns(6);i.getLayoutL().setColumns(a?12:10);i.getLayoutXL().setColumns(a?16:14)}else{e.getLayoutXS().setColumns(0);e.getLayoutS().setColumns(0);e.getLayoutM().setColumns(0);e.getLayoutL().setColumns(0);e.getLayoutXL().setColumns(0);i.getLayoutXS().setColumns(0);i.getLayoutS().setColumns(0);i.getLayoutM().setColumns(0);i.getLayoutL().setColumns(0);i.getLayoutXL().setColumns(0)}return this};N.prototype.setEnableGridContainerQuery=function(t){this.setProperty("enableGridContainerQuery",t,true);this.getAggregation("_defaultArea").setContainerQuery(t);this.getAggregation("_flatArea").setContainerQuery(t);return this};N.prototype.setEnableResetButton=function(t){this.setProperty("enableResetButton",t,true);this.getAggregation("_header").getContent()[6].setVisible(t&&!this.getDefault());return this};N.prototype.setEnableShowHideButton=function(t){this.setProperty("enableShowHideButton",t,true);this.getAggregation("_header").getContent()[5].setVisible(t&&!this.getDefault());return this};N.prototype.setEnableVisualizationReordering=function(t){this.setProperty("enableVisualizationReordering",t,true);var e=this.getAggregation("_compactArea");var i=this.getAggregation("_defaultArea").getDragDropConfig();var a=this.getAggregation("_flatArea").getDragDropConfig();var r=e.getDragDropConfig();e.setEnableLinkReordering(t);i[0].setEnabled(t);i[1].setEnabled(t);a[0].setEnabled(t);a[1].setEnabled(t);r[0].setEnabled(t);r[1].setEnabled(t);r[2].setEnabled(t);return this};N.prototype.setGridContainerGap=function(t){this.setProperty("gridContainerGap",t,true);this.getAggregation("_defaultArea").getLayout().setGap(t);this.getAggregation("_flatArea").getLayout().setGap(t);return this};N.prototype.setGridContainerGapXS=function(t){this.setProperty("gridContainerGapXS",t,true);this.getAggregation("_defaultArea").getLayoutXS().setGap(t);this.getAggregation("_flatArea").getLayoutXS().setGap(t);return this};N.prototype.setGridContainerGapS=function(t){this.setProperty("gridContainerGapS",t,true);this.getAggregation("_defaultArea").getLayoutS().setGap(t);this.getAggregation("_flatArea").getLayoutS().setGap(t);return this};N.prototype.setGridContainerGapM=function(t){this.setProperty("gridContainerGapM",t,true);this.getAggregation("_defaultArea").getLayoutM().setGap(t);this.getAggregation("_flatArea").getLayoutM().setGap(t);return this};N.prototype.setGridContainerGapL=function(t){this.setProperty("gridContainerGapL",t,true);this.getAggregation("_defaultArea").getLayoutL().setGap(t);this.getAggregation("_flatArea").getLayoutL().setGap(t);return this};N.prototype.setGridContainerGapXL=function(t){this.setProperty("gridContainerGapXL",t,true);this.getAggregation("_defaultArea").getLayoutXL().setGap(t);this.getAggregation("_flatArea").getLayoutXL().setGap(t);return this};N.prototype.setGridContainerRowSize=function(t){this.setProperty("gridContainerRowSize",t,true);var e=this.getAggregation("_defaultArea");var i=this.getAggregation("_flatArea");e.getLayout().setRowSize(t);e.getLayout().setColumnSize(t);i.getLayout().setRowSize(t);i.getLayout().setColumnSize(t);return this};N.prototype.setGridContainerRowSizeXS=function(t){this.setProperty("gridContainerRowSizeXS",t,true);var e=this.getAggregation("_defaultArea");var i=this.getAggregation("_flatArea");e.getLayoutXS().setRowSize(t);e.getLayoutXS().setColumnSize(t);i.getLayoutXS().setRowSize(t);i.getLayoutXS().setColumnSize(t);return this};N.prototype.setGridContainerRowSizeS=function(t){this.setProperty("gridContainerRowSizeS",t,true);var e=this.getAggregation("_defaultArea");var i=this.getAggregation("_flatArea");e.getLayoutS().setRowSize(t);e.getLayoutS().setColumnSize(t);i.getLayoutS().setRowSize(t);i.getLayoutS().setColumnSize(t);return this};N.prototype.setGridContainerRowSizeM=function(t){this.setProperty("gridContainerRowSizeM",t,true);var e=this.getAggregation("_defaultArea");var i=this.getAggregation("_flatArea");e.getLayoutM().setRowSize(t);e.getLayoutM().setColumnSize(t);i.getLayoutM().setRowSize(t);i.getLayoutM().setColumnSize(t);return this};N.prototype.setGridContainerRowSizeL=function(t){this.setProperty("gridContainerRowSizeL",t,true);var e=this.getAggregation("_defaultArea");var i=this.getAggregation("_flatArea");e.getLayoutL().setRowSize(t);e.getLayoutL().setColumnSize(t);i.getLayoutL().setRowSize(t);i.getLayoutL().setColumnSize(t);return this};N.prototype.setGridContainerRowSizeXL=function(t){this.setProperty("gridContainerRowSizeXL",t,true);var e=this.getAggregation("_defaultArea");var i=this.getAggregation("_flatArea");e.getLayoutXL().setRowSize(t);e.getLayoutXL().setColumnSize(t);i.getLayoutXL().setRowSize(t);i.getLayoutXL().setColumnSize(t);return this};N.prototype.setNoVisualizationsText=function(t){this.setProperty("noVisualizationsText",t,true);this.getAggregation("_noVisualizationsText").setText(t);return this};N.prototype.setTitle=function(t){this.setProperty("title",t,true);this.getAggregation("_title").setText(t);this.getAggregation("_header").getContent()[0].setText(t);this.getAggregation("_header").getContent()[2].setValue(t);var e=this.getDomRef();if(e){e.setAttribute("aria-label",this.getAriaLabel())}return this};N.prototype.setShowNoVisualizationsText=function(t){this.setProperty("showNoVisualizationsText",t,true);this.getAggregation("_noVisualizationsText").setVisible(this.getEditable()&&t);var e=this.getDomRef();if(e){if(this.getEditable()&&t){e.setAttribute("aria-describedBy",this.getAggregation("_noVisualizationsText").getId())}else{e.removeAttribute("aria-describedBy")}}return this};N.prototype.setShowSection=function(t){if(t===undefined||this.getShowSection()===t){return this}this.setProperty("showSection",t,true);this.toggleStyleClass("sapUshellSectionHidden",!t);this.getAggregation("_title").setVisible(!this.getEditable()&&t);this.getAggregation("_defaultArea").setVisible(this.getEditable()||t);this.getAggregation("_flatArea").setVisible(this.getEditable()||t);this.getAggregation("_compactArea").setVisible(this.getEditable()||t);this.getAggregation("_header").getContent()[5].setText(t?_.i18n.getText("Section.Button.Hide"):_.i18n.getText("Section.Button.Show"));return this};N.prototype.setSizeBehavior=function(t){this.setProperty("sizeBehavior",t,true);if(this.getEnableGridBreakpoints()){var e=this.getAggregation("_defaultArea");var i=this.getAggregation("_flatArea");e.getLayoutL().setColumns(t?12:10);e.getLayoutXL().setColumns(t?16:14);i.getLayoutL().setColumns(t?12:10);i.getLayoutXL().setColumns(t?16:14)}return this};N.prototype.destroy=function(){c.prototype.destroy.apply(this,arguments);this._oDefaultItemsChangeDetection.destroy();this._oFlatItemsChangeDetection.destroy();this._oCompactItemsChangeDetection.destroy();document.removeEventListener("dragstart",this._fnGlobalDragStart,false);document.removeEventListener("dragend",this._fnGlobalDragEnd,false);if(this._oInvisibleMessageInstance){this._oInvisibleMessageInstance.destroy()}};N.prototype.getTitleInput=function(){return this.getAggregation("_header").getContent()[2]};N.prototype._reorderVisualizations=function(t){this.fireVisualizationDrop(t.getParameters())};N.prototype.getClosestVizualization=function(t,e){var i=this.getAllItems();return M(t,i,e)};N.prototype.getClosestVizIndex=function(t,e){var i=this.getClosestVizualization(t,e);return i?this.indexOfVisualization(i):-1};N.prototype.getClosestCompactItemIndex=function(t,e){var i=M(t,this.getCompactItems(),e);if(i){return this.indexOfVisualization(i)}return e?this.getVisualizations().length:0};N.prototype._onDragEnter=function(t){var e=t.getParameter("dragSession");var i=e.getDragControl();var a=i.getParent();var r=e.getDropControl&&e.getDropControl();if(!r){return}if(!r.data("area")){r=r.getParent()}if(r.data("default")&&!a.data("default")){t.preventDefault()}this.fireAreaDragEnter({originalEvent:t,dragControl:i,sourceArea:a.data("area"),targetArea:r.data("area")})};N.prototype.addAggregation=function(t,e){if(t==="defaultItems"||t==="flatItems"){this._addVisualizationLayoutData(e)}c.prototype.addAggregation.apply(this,arguments);this.handleEmptyContentAreas();return this};N.prototype.insertAggregation=function(t,e){if(t==="defaultItems"||t==="flatItems"){this._addVisualizationLayoutData(e,t)}c.prototype.insertAggregation.apply(this,arguments);this.handleEmptyContentAreas();return this};N.prototype.getFocusDomRef=function(){if(this.getEditable()){return this.getDomRef()}if(this.getDefaultItems().length){return this.getAggregation("_defaultArea").getFocusDomRef()}if(this.getFlatItems().length){return this.getAggregation("_flatArea").getFocusDomRef()}return this.getAggregation("_compactArea").getFocusDomRef()};N.prototype._getVisualizationLayoutData=function(t){if(t.getLayout){return t.getLayout()}return{rows:2,columns:2}};N.prototype._getFlatVisualizationLayoutData=function(t){if(t.getLayout){return t.getLayout()}return{rows:1,columns:2}};N.prototype._addVisualizationLayoutData=function(t,e){if(!t.getLayoutData()){var i=e==="defaultItems"?this._getVisualizationLayoutData(t):this._getFlatVisualizationLayoutData(t);t.setLayoutData(new r(i))}};N.prototype._getDefaultDropIndicatorSize=function(t){return this._getDropIndicatorSize(t,X.Standard)};N.prototype._getFlatDropIndicatorSize=function(t){return this._getDropIndicatorSize(t,X.Flat)};N.prototype._getDropIndicatorSize=function(t,e){var i=t.getParent();var a=i&&i.data("area");if(e===a&&t.getLayoutData){var r=t.getLayoutData();return{rows:r.getRows(),columns:r.getColumns()}}var o={};var n=[];if(t.getSupportedDisplayFormats){n=t.getSupportedDisplayFormats()}if(e===X.Flat){o.rows=1;o.columns=2;if(!n.includes(X.Flat)&&n.includes(X.FlatWide)){o.columns=4}}else{o.rows=2;o.columns=2;if(!n.includes(X.Standard)&&n.includes(X.StandardWide)){o.columns=4}}return o};N.prototype.getItemPosition=function(t){if(isFinite(t)){t=this.getVisualizations()[t]}var e=this.getAggregation("_defaultArea").getItems().indexOf(t);if(e>=0){return{index:e,area:X.Standard}}e=this.getAggregation("_flatArea").getItems().indexOf(t);if(e>=0){return{index:e,area:X.Flat}}e=this.getAggregation("_compactArea").getItems().indexOf(t);if(e>=0){return{index:e,area:X.Compact}}return{index:-1,area:X.Standard}};N.prototype._focusItem=function(t){window.setTimeout(function(){var e=t&&t.area?t.area:X.Standard;var i=t&&t.index?t.index:t;var a=this.getAggregation("_defaultArea").getItems().length;var r=this.getAggregation("_flatArea").getItems().length;var o=this.getAggregation("_compactArea").getItems().length;if(isNaN(i)||i<0){i=0}if(e===X.Standard&&a===0){e=X.Flat}if(e===X.Flat&&r===0){e=X.Compact}if(e===X.Compact&&o===0){e=X.Standard}if(a+r+o===0){e="section"}switch(e){case"section":this.focus();break;case X.Flat:if(i>=r){i=r-1}this.getAggregation("_flatArea").focusItem(i);break;case X.Compact:this.getAggregation("_compactArea").focusItem(i);break;default:if(i>=a){i=a-1}this.getAggregation("_defaultArea").focusItem(i);break}}.bind(this),0)};N.prototype.focusVisualization=function(t){var e;if(!this.getShowSection()&&!this.getEditable()){return false}var i=this.getAllItems();if(!i.length){return false}if(t&&t.area){this._focusItem(t);return true}if(t&&t.getMetadata){e=t}if(!e&&t&&t.keycode){switch(t.keycode){case v.ARROW_UP:e=this.getClosestVizualization(t.ref,true);break;case v.ARROW_DOWN:e=this.getClosestVizualization(t.ref,false);break;case v.ARROW_LEFT:t=-1;break;default:break}}if(!e&&t===-1){e=i[i.length-1]}if(!e){e=i[0]}this._focusItem(this.getItemPosition(e));return true};return N});
//# sourceMappingURL=Section.js.map