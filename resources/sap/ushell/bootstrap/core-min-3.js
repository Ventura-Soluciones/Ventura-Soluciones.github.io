//@ui5-bundle sap/ushell/bootstrap/core-min-3.js
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/System", [],function(){"use strict";var t=function(t){this._oData=t};t.prototype.getAlias=function(){return this._oData.alias};t.prototype.getBaseUrl=function(){return this._oData.baseUrl};t.prototype.getClient=function(){return this._oData.client};t.prototype.getClientRole=function(){return this._oData.clientRole};t.prototype.getName=function(){return this._oData.system};t.prototype.getPlatform=function(){return this._oData.platform};t.prototype.getProductVersion=function(){return this._oData.productVersion};t.prototype.getProductName=function(){return this._oData.productName};t.prototype.getSystemName=function(){return this._oData.systemName};t.prototype.getSystemRole=function(){return this._oData.systemRole};t.prototype.getTenantRole=function(){return this._oData.tenantRole};t.prototype.isTrial=function(){return!!this._oData.isTrialSystem};t.prototype.getSysInfoBar=function(){return!!this._oData.sysInfoBar};t.prototype.getSysInfoBarColor=function(){return this._oData.sysInfoBarColor};t.prototype.getSysInfoBarMainText=function(){return this._oData.sysInfoBarMainText};t.prototype.getSysInfoBarSecondaryText=function(){return this._oData.sysInfoBarSecondaryText};t.prototype.getSysInfoBarIcon=function(){return this._oData.sysInfoBarIcon};t.prototype.adjustUrl=function(t){if(t.indexOf("/")!==0||t==="/"){throw new Error("Invalid URL: "+t)}if(this._oData.baseUrl===";o="){if(this._oData.alias){t=t+";o="+this._oData.alias}}else if(this._oData.baseUrl){t=this._oData.baseUrl.replace(/\/$/,"")+t}if(this._oData.client){t+=(t.indexOf("?")>=0?"&":"?")+"sap-client="+this._oData.client}return t};t.prototype.toString=function(){return JSON.stringify(this._oData)};return t},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/TechnicalParameters", ["sap/ushell/utils/type"],function(e){"use strict";var t={"sap-navigation-scope":{injectFrom:"inboundParameter",sticky:true,stickyName:"sap-navigation-scope-filter",isIntentParameter:true,getValue:function(e,t,r,a){return new Promise(function(u,s){if(a==="UI5"){u(n(e,t))}else{u(i(e,r))}})}},"sap-fiori-id":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(e,t,r,u){return new Promise(function(s,o){if(u==="UI5"){s(n(e,t)||a("/sap.fiori/registrationIds",t))}else{s(i(e,r))}})}},"sap-ui-fl-max-layer":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(e,t){return Promise.resolve().then(n.bind(null,e,t))}},"sap-ui-fl-control-variant-id":{injectFrom:"startupParameter",isIntentParameter:false,getValue:function(e,t){return Promise.resolve().then(n.bind(null,e,t))}},"sap-ui-fl-version":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(e,t){return Promise.resolve().then(n.bind(null,e,t))}},"sap-ui-app-id-hint":{injectFrom:"startupParameter",isIntentParameter:true,getValue:r},"sap-ach":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(e,t,r,u){return new Promise(function(s,o){if(u==="UI5"){s(n(e,t)||a("/sap.app/ach",t))}else{s(i(e,r))}})}},"sap-prelaunch-operations":{injectFrom:"inboundParameter",isIntentParameter:true,getValue:r},"sap-app-origin-hint":{injectFrom:"startupParameter",isIntentParameter:false,getValue:r},"sap-app-origin":{injectFrom:"startupParameter",isIntentParameter:false,getValue:r}};function r(e){return Promise.reject(e+" is reserved for shell internal usage only")}function n(e,t){if(t){var r=t.getComponentData()||{};var n=r.technicalParameters||{};return n[e]}return undefined}function a(t,r){var n=r.getManifestEntry(t);if(n&&!e.isArray(n)){n=[n]}return n}function i(e,t){var r=t.getReservedParameters();return r&&r[e]}function u(e,r,n,a){if(!t[e]){return Promise.reject(e+" is not a known technical parameter")}return t[e].getValue(e,r,n,a)}function s(e){if(!e){e={}}return Object.keys(t).filter(function(r){var n=t[r];return Object.keys(e).every(function(t){var r=e[t];var a=n.hasOwnProperty(t);if(a){return n[t]===r}return false})}).map(function(e){return Object.keys(t[e]).reduce(function(r,n){r[n]=t[e][n];return r},{name:e})})}function o(){return Object.keys(t)}function c(e){return t.hasOwnProperty(e)}function m(e,t,r,a){if(a==="UI5"){return n(e,t)}return i(e,r)}return{getParameterValue:u,getParameterValueSync:m,getParameters:s,getParameterNames:o,isTechnicalParameter:c}},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/UI5ComponentType", [],function(){"use strict";return{Application:"Application",Plugin:"Plugin",Visualization:"Visualization"}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/URLTemplateProcessor", ["sap/base/Log","sap/ui/thirdparty/URI","sap/ui/thirdparty/URITemplate","sap/ushell/URLTemplateProcessor/DefinitionParameterSetBuilder","sap/ushell/URLTemplateProcessor/DependencyGraph","sap/ushell/URLTemplateProcessor/Resolvers","sap/ushell/URLTemplateProcessor/TemplateParameterParser","sap/ushell/URLTemplateProcessor/utils"],function(e,r,t,a,n,o,s,i){"use strict";function p(r){e.debug(r,"sap.ushell.URLTemplateProcessor")}function l(e){if(typeof e==="undefined"){return"<undefined>"}if(typeof e==="string"){if(e===""){return"<empty string>"}return"'"+e+"'"}if(typeof e==="number"){return"(number) "+e}if(typeof e==="boolean"){return"(bool) "+e}var r;if(typeof e==="object"){r=JSON.stringify(e);if(r.length>255){r=r.substr(0,255)+"..."}}else{r="{other type}"}return r}function u(e){var r=Object.keys(e).filter(function(r){return typeof e[r]==="object"&&e[r].hasOwnProperty("renameTo")});var t=[];r.forEach(function(r){var a=e[r];if(a.hasOwnProperty("renameTo")){t.push(function(e,t){var n=t;n=t.replace(new RegExp(r+"=","g"),a.renameTo+"=");return n})}});return t}function f(e,r,t,a,n){var o=c(e,r,t,a,n);return m(e,o)}function c(e,r,t,u,f){p("[TEMPLATE EXPANSION] "+e.urlTemplate);var c=a.buildDefinitionParameterSet(e.parameters,r,f)||{};var m=i.removeArrayParameterNotation(t[f]||{});var d=s.parseTemplateParameterSet(c,f);var v=s.parseTemplateParameterSetAsLiterals(m);var y=i.mergeObject(v,d);p("- parsed template parameters: "+JSON.stringify(y,null,3));var P=n.buildDependencyGraph(y);p("- created dependency graph: "+JSON.stringify(P,null,3));var h=n.getDependencyResolutionOrder(P);p("- resolving in order: "+h.join(" > "));var T=o.resolveAllParameters(y,h,r,t,u,f);Object.keys(T).forEach(function(e){var r=T[e];p(e+" --\x3e "+l(r))});return{oDefinitionParamsSet:c,oResolvedParameters:T}}function m(e,t){var a=u(t.oDefinitionParamsSet||{});var n=e.urlTemplate;var o=r.expand(n,t.oResolvedParameters).toString();p("- created URL: "+o);a.forEach(function(e){o=e(n,o)});if(a.length>0){p("- created URL (post expansion): "+o)}return o}return{prepareExpandData:c,expand:f}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/URLTemplateProcessor/DefinitionParameterSetBuilder", ["sap/ushell/URLTemplateProcessor/TemplateParameterParser","sap/ushell/URLTemplateProcessor/Resolvers","sap/ushell/URLTemplateProcessor/utils","sap/ushell/utils/type"],function(e,r,t,a){"use strict";var s="/payload/parameters/names";function o(s,o,l){if(!s||!s.names){return{}}if(!s.hasOwnProperty("mergeWith")){return s.names}var u=s&&s.mergeWith;if(Array.isArray(u)===false&&typeof u!=="string"){throw new Error("The value of 'mergeWith' can only be a string or an array")}var p=s&&s.names;var h=i(s.mergeWith,o,l,{});var f=h.map(function(t){var s=e.parsePath(l,t);n(s);var i=r.resolvePath(s,{},o,{},{});if(!a.isPlainObject(i)){throw new Error("Cannot merge parameters from '"+t+"'. The path must point to an object")}return i}).reduce(function(e,r){e=t.mergeObject(e,r);return e},{});return t.mergeObject(f,p)}function n(e){if(e.pathType==="relative"){throw new Error("Please only specify absolute paths via mergeWith")}e.value.forEach(function(e){if(e.type!=="literal"){throw new Error("Please do not specify references in mergeWith paths")}})}function i(t,a,o,l){if(Array.isArray(t)){return t.slice().reverse()}if(typeof t==="string"){if(l[t]){throw new Error("Detected circular dependency of templates caused by mergeWith statements: ensure the template merges its parameters with a base template.")}l[t]=true;var u=e.parsePath(o,t);n(u);var p=r.resolvePath(u,{},a,{},{});if(!p){throw new Error("The specified mergeWith path does cannot be resolved: '"+t+"'")}var h=s.split("/").slice(1).reduce(function(e,r){if(e.result&&e.obj&&e.obj.hasOwnProperty(r)){e.obj=e.obj[r]}else{e.result=false}return e},{obj:p,result:true}).result;if(!h){throw new Error(t+" does not contain "+s+". Please make sure "+t+" points to the root of a URL template.")}return i(p.payload.parameters.mergeWith,a,o,l).concat([t+s])}return[]}return{buildDefinitionParameterSet:o}},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/URLTemplateProcessor/DependencyGraph", ["sap/base/util/deepExtend"],function(e){"use strict";function n(e){return typeof e==="string"||e.type==="wildcard"||e.type==="literal"||e.type==="intentParameter"||e.type==="reference"}function r(e){return e.type==="reference"&&!e.namespace}function t(e,n,t){if(!e.hasOwnProperty(n)){e[n]=[]}if(r(t)){e[n].push(t.value)}}function i(e){var n={};var r=t.bind(null,n);Object.keys(e).forEach(function(n){var t=e[n];a(t,n,r)});return n}function u(e){var n=e.type;if(n==="expression"){return[e.value]}if(n==="function"){return(e.args||[]).concat(e.params||[])}if(n==="pipe"||n==="path"){return e.value}throw new Error("Unknown type encountered while building dependency graph: '"+n+"'")}function a(e,r,t){t(r,e);if(n(e)){return}var i=u(e);i.forEach(function(e){a(e,r,t)})}function c(n){var r=e({},n);var t,i,u=[],a={};do{var c=Object.keys(r);t=c.length;c.forEach(function(e){if(r[e].length>0){r[e]=r[e].filter(function(e){var n=!a[e];var t=r.hasOwnProperty(e);return n&&t})}if(r[e].length===0){delete r[e];u.push(e);a[e]=true}});i=Object.keys(r).length}while(t!==i);if(i!==0){throw new Error("Graph of dependencies contains cyclic references")}return u}return{buildDependencyGraph:i,getDependencyResolutionOrder:c}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/URLTemplateProcessor/Functions", ["sap/base/util/deepExtend","sap/ui/thirdparty/URI","sap/ushell/URLTemplateProcessor/utils","sap/ushell/utils/type"],function(e,n,r,t){"use strict";var i={url:{args:["urlPart?"],minValues:0,maxValues:0,fn:function(e){var r=new n;var t=["protocol","scheme","username","password","hostname","port","host","userinfo","authority","origin","subdomain","domain","tld","pathname","path","directory","filename","suffix","search","query","hash","fragment","resource"];var i="toString";if(e.urlPart){if(t.indexOf(e.urlPart)===-1){throw new Error("The URL part '"+e.urlPart+"' is not valid. Please use one of "+t.join(", "))}i=e.urlPart}return r[i]()}},if:{args:["trueCondition"],minValues:1,maxValues:2,fn:function(e,n){var r=u(n);if(a(e.trueCondition)){return r.length===1?undefined:r.pop()}return r[0]}},and:{args:["emptyCondition?"],minValues:1,fn:function(e,n){var t=u(n);if(typeof e.emptyCondition==="undefined"&&e.length>0){return undefined}if(typeof e.emptyCondition!=="undefined"&&a(e.emptyCondition)){return undefined}var i=t.pop();var o=t.every(r.hasValue);return o?i:undefined}},or:{args:["emptyCondition?"],minValues:1,fn:function(e,n){var t=u(n);if(typeof e.emptyCondition==="undefined"&&e.length>0){return undefined}if(typeof e.emptyCondition!=="undefined"&&a(e.emptyCondition)){return undefined}return t.reduce(function(e,n){if(r.hasValue(e)){return e}return r.hasValue(n)?n:undefined})}},replace:{args:["strRegExp","strReplace","flags?"],minValues:1,maxValues:1,fn:function(e,n){var r=new RegExp(e.strRegExp,e.flags);var a=e.strReplace||"";if(typeof n===undefined||n===null){return n}if(t.isArray(n)){if(n.length===1){return i.replace.fn.call(this,e,n[0])}return n.map(function(n){return i.replace.fn.call(this,e,n)})}if(t.isPlainObject(n)){return Object.keys(n).reduce(function(r,t){var a=n[t];r[t]=i.replace.fn.call(this,e,a);return r},{})}if(typeof n==="string"){return n.replace(r,a)}return i.replace.fn.call(this,e,n+"")}},join:{args:["macroSeparator?","microSeparator?"],minValues:1,fnPipe:function(e,n){var r=[n];return i.join.fn.call(this,e,r)},fn:function(e,n){var i=e.macroSeparator||"";var a=e.microSeparator||"";n=n.map(function(e){if(!t.isPlainObject(e)&&!t.isArray(e)){return e}var n=Object.prototype.toString.apply(e);if(n==="[object Object]"){var u=r.removeArrayParameterNotation(e);return Object.keys(u).sort().map(function(n){return n+a+e[n]}).join(i)}if(n==="[object Array]"){return e.join(i)}});return n.join(i)}},match:{args:["strRegex"],minValues:1,fnPipe:function(e,n){var r=e.strRegex;var t=new RegExp(r);return Object.keys(n).reduce(function(e,r){if(t.exec(r)){e[r]=n[r]}return e},{})},fn:function(e,n){if(n===undefined){return undefined}var r=e.strRegex;var i=new RegExp(r);var a=n.filter(function(e){var n;if(t.isPlainObject(e)){n=Object.keys(e)}else if(t.isArray(e)){n=e}else{n=[""+e]}return n.some(i.exec.bind(i))});return a.length===n.length?true:undefined}},value:{args:["name"],minValues:1,fnPipe:function(e,n){if(t.isPlainObject(n)&&n.hasOwnProperty(e.name)){const r=n[e.name];return t.isArray(r)&&r.length>0&&r[0]}return undefined}},not:{args:[],minValues:1,fnPipe:function(e,n){return Object.keys(n).length>0?undefined:""},fn:function(e,n){var r=i.and.fn(e,n);return r===undefined?"":undefined}},stringify:{args:[],minValues:1,fn:function(e,n){if(t.isArray(n)){if(n.length===0){return""}if(n.length===1){n=n[0]}}if(typeof n==="string"){return n}return JSON.stringify(n)}},encodeURIComponent:{args:[],minValues:1,maxValues:1,fnPipe:function(e,n){return Object.keys(n).reduce(function(e,r){e[r]=encodeURIComponent(n[r]);return e},{})},fn:function(e,n){var r=n[0];if(typeof r!=="string"){return r}return encodeURIComponent(r)}}};function a(e){if(typeof e==="undefined"){return true}if(typeof e==="string"){return e===""}if(typeof e==="object"){return Object.keys(e).length===0}if(typeof e==="number"){return e===0}if(typeof e==="boolean"){return e===false}throw new Error("Unexpected type for value")}function u(e){var n;if(t.isArray(e)){n=e}else if(t.isPlainObject(e)){n=[e]}else if(e===undefined){return[]}else{throw new Error("Unexpected type")}return n}function o(e,n,r){if(r!==undefined&&!t.isPlainObject(r)){throw new Error("Invalid value type passed to '"+e+"' in pipe context. An object is expected.")}}function f(e,n,i){if(i!==undefined&&!t.isArray(i)){throw new Error("Invalid value type passed to '"+e+"' in value context. An array is expected.")}var a=t.isArray(i)?i.length:0;if(r.hasValue(n.maxValues)&&a>n.maxValues){throw new Error("Too many values were passed to '"+e+"'. Please pass maximum "+n.maxValues+" values.")}if(r.hasValue(n.minValues)&&a<n.minValues){throw new Error("Too few values were passed to '"+e+"'. Please pass minimum "+n.minValues+" values.")}}function s(e){var n=false;e.map(l).reduce(function(e,r){if(!e&&r){n=true}return r},true);return n}function l(e){return e.charAt(e.length-1)!=="?"}function c(e){return e.substr(0,e.length-1)}function p(n,r){var t=e([],i[n].args);if(s(t)){throw new Error("Invalid argument signature. Make sure all optional arguments appear in the end.")}var a={length:r.length};var u=t.filter(l);var o=u>r.length;if(o){throw new Error(n+" requires "+u+" arguments but "+r.length+" was specified")}r.forEach(function(e){var n=t.shift();var i=!l(n);if(i){n=c(n)}if(r.length>0){a[n]=e}});return a}function d(e,n,r,t){if(!i.hasOwnProperty(n)){throw"Invalid function: "+n}var a=p(n,r);if(e){o(n,i[n],t)}else{f(n,i[n],t)}if(e){if(!i[n].fnPipe){throw new Error("The function '"+n+"' cannot be executed in pipe context")}return i[n].fnPipe(a,t)}return i[n].fn(a,t)}function m(e){return e.split("").map(function(e){if(e==="["){return"[\\[]"}return"["+e+"]"}).join("")}function h(){var e=Object.keys(i);return e.map(m).join("|")}return{getPossibleFunctionsRegExpString:h,applyFunctionInValueContext:d.bind(null,false),applyFunctionInPipeContext:d.bind(null,true),_setURIDependency:function(e){n=e}}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/URLTemplateProcessor/Resolvers", ["sap/base/util/deepExtend","sap/ushell/URLTemplateProcessor/Functions","sap/ushell/URLTemplateProcessor/utils"],function(e,r,n){"use strict";var t={literal:o,expression:p,reference:c,function:s,path:i,pipe:u};function a(e,r,n){var t=null;var a=[];var o=false;var i=r.join("/");t=e;if(typeof t==="undefined"){o=true}r.forEach(function(e,r){if(o){return}a.push(e);if(!t.hasOwnProperty(e)){t=undefined;o=true;return}if(!t.hasOwnProperty(e)){throw new Error("Cannot find path '"+i+"' in given structure: '"+e+"' seems to be missing in the object.")}t=t[e]});return t}function o(e){return e.value}function i(e,r,n,t,o,i){var u=e.value.map(function(e){return l(e,r,n,t,o,i)});var s=e.pathType==="relative";var p=s?t:n;return a(p,u,r)}function u(n,t,a,o,i,u){var s=n.value;if(s[0].type!=="wildcard"){throw new Error("Leading wildcard expected in pipe expression")}if(s[0].value!=="*"){throw new Error("Unsupported wildcard expression: "+s[0].value)}return s.slice(1).reduce(function(e,n){if(n.type!=="function"){throw new Error("Invalid operation specified in pipe expression")}return r.applyFunctionInPipeContext(n.name,n.args.map(function(e){return l(e,t,a,o,i,u)}),e)},e({},i[u]||{}))}function s(e,n,t,a,o,i){var u=e.name;var s=e.args.map(function(e){return l(e,n,t,a,o,i)});var p=e.params.map(function(e){return l(e,n,t,a,o,i)});return r.applyFunctionInValueContext(u,s,p)}function p(e,r,n,a,o,i){var u=e.value;if(t[u.type]){return l(u,r,n,a,o,i)}throw new Error("unknown expression type: "+u.type)}function c(e,r,n,t,a,o){var i=e.value;if(!e.hasOwnProperty("namespace")){return r[i]}var u=e.namespace;var s="The template attemps to take the value '"+i+"' from '"+u+"' namespace.";if(!a.hasOwnProperty(u)){throw new Error(s+" However this value was not defined at runtime. The template should reference only defined values.")}var p=a[u];var c=i===".";if(c){return p}if(typeof p!=="object"){throw new Error(s+" However the runtime did not define the namespace as an object. The template cannot access the desired value using the object notation in this case.")}return p[i]}function l(e,r,n,a,o,i){var u=e.type;if(t[u]){return t[u](e,r,n,a,o,i)}throw new Error("Cannot resolve unknown parameter type: '"+u+"'")}function f(e,r,n,t,a,o){var i={};r.forEach(function(r){var u=e[r];var s=l(u,i,n,a,t,o);i[r]=s});return i}return{resolveLiteral:o,resolveExpression:p,resolveReference:c,resolveFunction:s,resolvePath:i,resolvePipe:u,resolveParameterValue:l,resolveAllParameters:f}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/URLTemplateProcessor/TemplateParameterParser", ["sap/ushell/URLTemplateProcessor/Functions"],function(r){"use strict";function e(e,t){var a=p();var u=a.exec(t);if(u===null){throw new Error("Cannot parse expression: '"+t+"'")}var s=h(t);if(s.indexOf("*")===0){return n(e,s)}var f="^("+r.getPossibleFunctionsRegExpString()+")[^a-z]";var v=new RegExp(f);if(v.exec(s)){return o(e,s)}return i(e,s)}function n(r,e){var n=f(r,e,"|");var t=n.shift();return{type:"pipe",value:[{type:"wildcard",value:t}].concat(n.map(o.bind(null,r)))}}function t(r){var e=r.substr(1);var n;if(e.indexOf(":")>=0){var t=e.split(":");n=t[0];e=t[1]}var a={type:"reference",value:e};if(n){a.namespace=n}return a}function a(r,e){var n=e.split("/");var t="relative";if(n[0]===""){t="absolute";n.shift()}if(n[0]==="."){n.shift()}return{type:"path",pathType:t,value:n.map(u.bind(null,r))}}function i(r,e){if(e.charAt(0)==="{"&&e.charAt(e.length-1)==="}"){return i(r,h(e))}if(e.indexOf(".")===0||e.indexOf("/")===0){return a(r,e)}if(e.charAt(0)==="'"&&e.charAt(e.length-1)==="'"){return s(h(e))}if(e.charAt(0)==="&"){return t(e)}return{type:"reference",value:e,namespace:r}}function u(r,e){if(e.charAt(0)==="{"&&e.charAt(e.length-1)==="}"){return i(r,h(e))}return{type:"literal",value:e}}function s(r){return{type:"literal",value:r}}function o(r,e){var n=e.split(/[(\s]/)[0];var t=d(e,n);t=t.replace(/^\s+/,"");var a="";if(t.charAt(0)==="("){var u=t.search(/([)]\s)|([)]$)/);if(u===-1){throw new Error("Cannot find termination of function '"+t+"' in '"+e+"'")}a=t.substr(1,u-1);t=d(t,"("+a+")");t=t.replace(/^\s+/,"")}var s=t;return{type:"function",name:n,args:f(r,a,",").map(function(r){return r.charAt(0)==="{"?h(r):"'"+r+"'"}).map(i.bind(null,r)),params:f(r,s,",").map(i.bind(null,r))}}function f(r,e,n){if(!e){return[]}var t=e.split(n).reduce(function(r,e,t){if(t===0){r.push(e);return r}var a=r.length-1;var i=r[a];var u=i.length>0&&i.charAt(i.length-1)==="\\";var s="";if(u){s=r.pop();s=s.substr(0,s.length-1)+n}r.push(s+e);return r},[]);return t}function v(r,n){var t=n;var a=null;if(Object.prototype.toString.apply(n)==="[object Object]"){t=n.value;a=n.renameTo}var i=g(t);if(i){return s(t)}var u="expression";var o=e(r,t);var f={type:u,value:o};if(a){o.renameTo=a}return f}function c(r){var e=r.indexOf("{")===0;var n=p();var t=n.exec(r);if(!t){if(e){throw new Error("Expression was expected. But "+r+" does not look like a valid expression")}return null}return t[1]}function p(){var e="[a-zA-Z0-9]+?:";var n="((&("+e+")?)?[.a-zA-Z0-9_-]+?)";var t="('(.*?)')";var a="([^' ]*?)";var i="{("+n+")}";var u="("+"[.]?([/]("+n+"|"+i+"))+"+")";var s="("+u+"|"+t+"|"+n+"|"+i+")";var o="("+s+"(,"+s+")*)";var f="("+a+"|"+i+")";var v="("+f+"(,"+f+")*)";var c="("+"[(]"+v+"[)]"+")?";var p=r.getPossibleFunctionsRegExpString();var l="("+"("+p+")"+"("+c+")"+")";var h="([*]([|]"+l+")*)";var d="^{("+h+"|"+"(("+l+")([ ]("+o+"))?)"+"|"+"("+s+")"+")}$";var g=new RegExp(d);return g}function l(r){return c(r)!==null}function h(r){var e=r.split("");e.shift();e.pop();return e.join("")}function d(r,e){if(r.indexOf(e)===0){return r.substr(e.length)}throw new Error("Given string does not start with prefix '"+e+"'")}function g(r){return typeof r==="string"&&!l(r)}function x(r,e){return Object.keys(r).reduce(function(n,t){var a=r[t];n[t]=v(e,a);return n},{})}function m(r,e){return Object.keys(r).reduce(function(e,n){var t=r[n];e[n]=s(t);return e},{})}return{parseTemplateParameterSet:x,parseTemplateParameterSetAsLiterals:m,parsePath:a,_isExpression:l,_parseList:f,_parseParameterValue:v}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/URLTemplateProcessor/utils", ["sap/base/util/deepExtend"],function(e){"use strict";function r(e){return e!==null&&typeof e!=="undefined"}function t(e){return Object.keys(e).reduce(function(r,t){var n=e[t];if(Object.prototype.toString.apply(n)==="[object Array]"){r[t]=n[0]}else if(typeof n==="string"){r[t]=n}else{throw new Error("Parameters should be passed as strings or array of strings")}return r},{})}function n(r,t){var n=e({},r);var u=e({},t);return Object.keys(u).reduce(function(e,r){e[r]=u[r];return e},n)}return{mergeObject:n,hasValue:r,removeArrayParameterNotation:t}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/Ui5ServiceFactory", ["sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","sap/base/Log","sap/base/util/ObjectPath","sap/base/util/isPlainObject"],function(e,t,n,r,i){"use strict";var c;function o(e){c=e}function u(){return c}function a(e){return!!/^[^_].+/.test(e)}function s(e){var t,n=[];for(t in e){n.push(t)}return n}function f(e,t,r){var i=t[r];t[r]=function(){var c,o,a=u();if(!e||e.scopeObject.getId()!==a){n.warning("Call to "+r+" is not allowed","This may be caused by an app component other than the active '"+a+"' that tries to call the method","sap.ushell.Ui5ServiceFactory");return undefined}o=new Array(arguments.length);for(c=0;c<o.length;++c){o[c]=arguments[c]}return i.apply(t,o)}}function p(e,t,n,r){s(e).filter(a).filter(function(n){var r=e[n];t[n]=r;return typeof r==="function"}).forEach(function(i){t[i]=t[i].bind(e);if(r){f(n,t,i)}})}function l(e){var t;if(typeof e==="undefined"){return true}if(!i(e)){return false}if(!e.scopeType){return false}t=r.get("scopeObject.getId",e);if(typeof t!=="function"){return false}return true}function v(e,t,n){var r={};if(n){n=typeof e==="object"}p(t,r,e,n);if(n&&e.scopeType==="component"&&e.scopeObject&&e.scopeObject.getId){o(e.scopeObject.getId())}return r}function h(e){return new Promise(function(t,n){sap.ui.require(["sap/ushell/Container"],function(n){n.getServiceAsync(e).then(e=>{t(e)})})})}function y(r,i){var c=e.extend("sap.ushell.ui5service."+r+"Factory",{createInstance:function(e){return new Promise(function(c,o){h(r).then(function(u){var a,s,f;if(!l(e)){n.error("Invalid context for "+r+" service interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.Ui5ServiceFactory");o("Invalid Context for "+r+" service");return}s=v(e,u,i);f=t.extend("sap.ushell.ui5service."+r,{getInterface:function(){return s}});a=new f(e);c(a)},function(e){o(e)})})}});return new c}return{createServiceFactory:y}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/User", ["sap/base/Log","sap/base/i18n/Localization","sap/base/util/deepExtend","sap/ui/base/EventProvider","sap/ui/core/Core","sap/ui/core/Locale","sap/ui/core/LocaleData","sap/ui/thirdparty/URI","sap/ushell/utils"],function(e,t,n,i,o,r,a,s,h){"use strict";function u(e){if(e===undefined){return undefined}return n({},e)}function m(e){var t;if(e.host&&typeof e.host==="function"&&e.host()){t=e.host();if(typeof e.protocol==="function"&&e.protocol()){t=e.protocol()+"://"+t}return t}return""}function g(e){return e.indexOf("sap_")===0}var c=function(u={}){var l=[];var p;var f;var d;var T;var y=new i;const P={};u.userProfile?.forEach?.(e=>{if(e.id&&e.editState){P[e.id]=e.editState}});let E=u.userProfile?.find?.(e=>e.id==="THEME_SET")?.value||"";this.getEditState=function(e){return P[e]};this.getEmail=function(){return u.email};this.getFirstName=function(){return u.firstName};this.getFullName=function(){return u.fullName};this.getTimeZone=function(){return u.timeZone};this.getLanguageAndRegionSettingsEntry=async()=>{if(u.getLanguageAndRegionSettingsEntry){const e=await u.getLanguageAndRegionSettingsEntry();return e}const[e]=await h.requireAsync(["sap/ushell/components/shell/Settings/userLanguageRegion/UserLanguageRegionEntry"]);return e};this.getInitials=function(){var e=u.fullName||"";var t="";var n=true;for(var i=0,o=e.length;i<o;++i){if(e[i]===" "){n=true}else if(n){n=false;t+=e[i]}}return t};this.getId=function(){return u.id};this.getLanguage=function(){return u.language};this.getLanguageBcp47=function(){return u.languageBcp47};this.getLanguageText=function(){var e=new r(t.getLanguageTag());var n=new a(e);var i=t.getLanguageTag().toString();return n.getLanguageName(i)||this.getLanguage()};this.getLastName=function(){return u.lastName};this.getImage=function(){return u.image};this.getCalendarWeekNumbering=function(){return u.calendarWeekNumbering||"Default"};this.setImage=function(e){u.image=e;y.fireEvent("onSetImage",e)};this.attachOnSetImage=function(e,t){y.attachEvent("onSetImage",e,t)};this.isJamActive=function(){return u.isJamActive===true};this.isLanguagePersonalized=function(){return u.isLanguagePersonalized===true};this.getTheme=function(e){if(e===c.prototype.constants.themeFormat.ORIGINAL_THEME){return T.originalTheme.theme}if(e===c.prototype.constants.themeFormat.THEME_NAME_PLUS_URL){return d.theme+(d.locationPath?"@"+d.locationOrigin+d.locationPath:"")}if(e===c.prototype.constants.themeFormat.NWBC){if(g(d.theme)){return d.theme}return this.getTheme(c.prototype.constants.themeFormat.THEME_NAME_PLUS_URL)}return d.theme};this.getThemeSet=function(){return E};this.getThemeRoot=function(e){if(u.ranges&&u.ranges.theme&&u.ranges.theme[e]&&u.ranges.theme[e].themeRoot){return u.ranges.theme[e].themeRoot}return""};this.setTheme=function(t){if(this.isSetThemePermitted()===false){var n="setTheme not permitted";e.error(n);throw new Error(n)}d=this._amendTheme({theme:t,root:this.getThemeRoot(t)},f);if(t!==T.originalTheme.theme){this.setChangedProperties({propertyName:"theme",name:"THEME"},T.originalTheme.theme,t);T=d}this.applyTheme(t)};this.setThemeSet=function(t){if(this.isSetThemePermitted()===false){const t="setThemeSet is not permitted";e.error(t);throw new Error(t)}if(t!==E){this.setChangedProperties({propertyName:"themeSet",name:"THEME_SET"},E,t);E=t}};this.applyTheme=function(e){var t=this._amendTheme({theme:e,root:this.getThemeRoot(e)},f);d=t;const n=o.applyTheme;if(!n){sap.ui.require("sap/ui/core/Theming").setTheme(t.theme)}else if(t.suppliedRoot){n(t.theme,t.suppliedRoot+"/UI5/")}else if(t.path){n(t.theme,t.path+"/UI5/")}else{n(t.theme)}sap.ui.require(["sap/ushell/appIntegration/PostMessageManager"],function(e){e.sendRequestToAllApplications("sap.ushell.appRuntime.themeChange",{currentThemeId:this.getTheme(c.prototype.constants.themeFormat.NWBC),themeServiceRoute:window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1"},false)}.bind(this))};this.setLanguage=function(e){if(e){this.setChangedProperties({propertyName:"language",name:"LANGUAGE"},u.language,e);u.language=e}};this.getAccessibilityMode=function(){return u.accessibility};this.setAccessibilityMode=function(t){if(this.isSetAccessibilityPermitted()===false){var n="setAccessibilityMode not permitted";e.error(n);throw new Error(n)}u.accessibility=t};this.isAdminUser=function(){return u.isAdminUser===true};this.isSetAccessibilityPermitted=function(){return u.setAccessibilityPermitted};this.isSetThemePermitted=function(){return u.setThemePermitted};this.getContentDensity=function(){return u.contentDensity};this.setContentDensity=function(t){if(this.isSetContentDensityPermitted()===false){var n="setContentDensity not permitted";e.error(n);throw new Error(n)}e.debug("[000] setContentDensity",t,"User");this.setChangedProperties({propertyName:"contentDensity",name:"CONTENT_DENSITY"},u.contentDensity,t);u.contentDensity=t};this.isSetContentDensityPermitted=function(){return u.setContentDensityPermitted};this.getChangedProperties=function(){e.debug("[000] user: getChangedProperties: aChangedProperties",JSON.stringify(l),"User");return n([],l)};this.setChangedProperties=function(t,n,i){e.debug("[000] setChangedProperties",[t.name,n,i],"User");l.push({propertyName:t.propertyName,name:t.name,oldValue:n,newValue:i})};this.resetChangedProperties=function(){e.debug("[000] resetChangedProperties","User");l=[]};this.resetChangedProperty=function(t){e.debug("[000] resetChangedProperty: sPropertyName:",t,"User");l=l.filter(function(e){return!(t===e.propertyName)})};this.getTrackUsageAnalytics=function(){return u.trackUsageAnalytics};this.setTrackUsageAnalytics=function(e){this.setChangedProperties({propertyName:"trackUsageAnalytics",name:"TRACKING_USAGE_ANALYTICS"},u.trackUsageAnalytics,e);u.trackUsageAnalytics=e};this.setImageConsent=function(e){this.setChangedProperties({propertyName:"isImageConsent",name:"ISIMAGECONSENT"},u.isImageConsent,e);u.isImageConsent=e};this.getImageConsent=function(){return u.isImageConsent};this.getImportBookmarksFlag=function(){return u.importBookmarks||null};this.setImportBookmarksFlag=function(e){this.setChangedProperties({propertyName:"importBookmarks",name:"MYHOME_IMPORT_FROM_CLASSIC"},this.getImportBookmarksFlag()||"",e);u.importBookmarks=e};this.getShowMyHome=function(){return u.showMyHome!==false};this.setShowMyHome=function(e){e=!!e;this.setChangedProperties({propertyName:"showMyHome",name:"MYHOME_ENABLEMENT"},u.showMyHome,e);u.showMyHome=e};this.getDetectDarkMode=function(){return u.detectDarkMode!==false};this.setDetectDarkMode=function(e){e=!!e;this.setChangedProperties({propertyName:"detectDarkMode",name:"THEME_DARKMODE_AUTO_DETECTION"},u.detectDarkMode,e);u.detectDarkMode=e};f={locationPathUi5:new s(sap.ui.require.toUrl("")).absoluteTo(document.location).pathname(),locationPathCustom:u.themeRoot||"",locationOrigin:m(new s(document.location))};if(!f.locationPathUi5){e.warning("User: Could not set UI5 location path")}if(!f.locationPathCustom){e.warning("User: Could not set location path for custom themes")}if(!f.locationOrigin){e.warning("User: Could not set front-end server location origin")}p=u.bootTheme||{theme:"",root:""};d=this._amendTheme(p,f);T=d};c.prototype._amendTheme=function(e,t){if(!e||!e.theme||!t){return{originalTheme:{theme:"",root:""},theme:"",suppliedRoot:"",path:"",locationPath:"",locationOrigin:""}}function n(e,t){var n=new s(e);var i=m(n);return{locationOrigin:i||t.locationOrigin,locationPath:i?n.path():e}}var i={originalTheme:u(e)};var o;if(i.originalTheme.theme.indexOf("@")>0){var r=i.originalTheme.theme.split("@",2);i.theme=r[0];i.suppliedRoot=r[1];o=n(r[1],t);i.locationPath=o.locationPath;i.path=i.locationPath;i.locationOrigin=o.locationOrigin;return i}i.theme=i.originalTheme.theme;if(i.originalTheme.root){i.suppliedRoot=i.originalTheme.root;o=n(i.originalTheme.root,t);i.locationPath=o.locationPath;i.path=i.locationPath;i.locationOrigin=o.locationOrigin;return i}i.suppliedRoot="";if(g(i.theme)){i.locationOrigin=t.locationOrigin;i.locationPath=t.locationPathUi5;i.path="";return i}i.locationOrigin=t.locationOrigin;i.locationPath=t.locationPathCustom;i.path=i.locationPath;return i};c.prototype.constants={themeFormat:{ORIGINAL_THEME:"O",THEME_NAME_PLUS_URL:"N+U",NWBC:"NWBC"}};return c},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/ClientSideTargetResolutionAdapter", ["sap/base/util/Version","sap/ui/thirdparty/jquery","sap/base/util/deepExtend","sap/base/Log","sap/ushell/Container"],function(e,jQuery,t,r,s){"use strict";var i=function(i,n,o){this._oAdapterConfig=o&&o.config;var a="";if(s.isInitialized()){a=s.getLogonSystem().getProductName()||""}this._oLocalSystemAlias={http:{host:"",port:0,pathPrefix:"/sap/bc/"},https:{host:"",port:0,pathPrefix:"/sap/bc/"},rfc:{systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",label:"local",client:"",language:"",properties:{productName:a}};this.getInbounds=function(){var t=this;if(!this._getInboundsDeferred){this._getInboundsDeferred=new jQuery.Deferred;s.getServiceAsync("CommonDataModel").then(function(e){return e.getSiteWithoutPersonalization()}).then(function(r){var s=r._version&&e(r._version).getMajor()===3?"sap/ushell/adapters/cdm/v3/utilsCdm":"sap/ushell/utils/utilsCdm";sap.ui.require([s],function(e){var s=e.formatSite(r)||[];t._getInboundsDeferred.resolve(s)})},function(e){t._getInboundsDeferred.reject(e)})}return this._getInboundsDeferred.promise()};this._createSIDMap=function(e){return Object.keys(e).sort().reduce(function(t,r){var s=e[r];var i="SID("+s.systemId+"."+s.client+")";if(!t.hasOwnProperty(i)&&s.hasOwnProperty("systemId")&&s.hasOwnProperty("client")){t[i]=r}return t},{})};this._getSystemAliases=function(){var e=this;if(!this.oSystemAliasesDeferred){this.oSystemAliasesDeferred=new jQuery.Deferred;s.getServiceAsync("CommonDataModel").then(function(e){return e.getSiteWithoutPersonalization()}).then(function(r){var s=t({},r.systemAliases||{});Object.keys(s).forEach(function(e){s[e].id=e});e.oSystemAliasesDeferred.resolve(s)},function(t){e.oSystemAliasesDeferred.reject(t)})}return this.oSystemAliasesDeferred.promise()};this.resolveSystemAlias=function(e){var s=new jQuery.Deferred,i=this;this._getSystemAliases().done(function(n){var o,a;if(n.hasOwnProperty(e)){a=n[e];if(e===""){a.properties=t({},i._oLocalSystemAlias.properties,a.properties||{})}s.resolve(a);return}if(e===""){s.resolve(i._oLocalSystemAlias);return}e=e.toUpperCase(e);if(!i._oSIDMap){i._oSIDMap=i._createSIDMap(n)}if(i._oSIDMap.hasOwnProperty(e)){var u=n[i._oSIDMap[e]];s.resolve(u);return}o="Cannot resolve system alias "+e;r.warning(o,"The system alias cannot be found in the site response","sap.ushell.adapters.cdm.ClientSideTargetResolutionAdapter");s.reject(o)}).fail(function(e){s.reject(e)});return s.promise()};this.getContentProviderDataOriginsLookup=function(){var e=this;if(!this.oContentProviderDataOriginsDeferred){this.oContentProviderDataOriginsDeferred=new jQuery.Deferred;s.getServiceAsync("CommonDataModel").then(function(e){return e.getSiteWithoutPersonalization()}).then(function(r){var s=null;if(r.contentProviderDataOrigins){s=t({},r.contentProviderDataOrigins)}e.oContentProviderDataOriginsDeferred.resolve(s)},function(t){e.oContentProviderDataOriginsDeferred.reject(t)})}return this.oContentProviderDataOriginsDeferred.promise()}};return i},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/CommonDataModelAdapter", ["sap/base/Log","sap/base/util/extend","sap/base/util/Version","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/ushell/Container"],function(e,t,i,r,jQuery,n){"use strict";var o=function(e,t,i){this.oAdapterConfiguration=i;if(i&&i.config&&i.config.siteData){this.oCdmSiteDataRequestPromise=(new jQuery.Deferred).resolve(i.config.siteData)}else if(i&&i.config&&i.config.siteDataPromise){this.oCdmSiteDataRequestPromise=i.config.siteDataPromise}else{var r=this._identifySiteUrlFromConfig(i);var n=this._normalizeUrl(r,location.href);this.oCdmSiteDataRequestPromise=this._requestSiteData(n)}};o.prototype._requestSiteData=function(t){var i=new jQuery.Deferred;if(!t){return i.reject("Cannot load site: configuration property 'siteDataUrl' is missing for CommonDataModelAdapter.")}jQuery.ajax({type:"GET",dataType:"json",url:t}).done(function(e){i.resolve(e)}).fail(function(t){e.error(t.responseText);i.reject("CDM Site was requested but could not be loaded.")});return i.promise()};o.prototype._normalizeUrl=function(e,t){if(typeof e!=="string"){return e}if(e.indexOf("http")===0){return e}var i=document.getElementsByTagName("base")[0];return new r(e,i).absoluteTo(t).toString()};o.prototype.getSite=function(){var e=new jQuery.Deferred;this.oCdmSiteDataRequestPromise.done(function(i){var r=t({},i);delete r.personalization;e.resolve(r)}).fail(function(t){e.reject(t)});return e.promise()};o.prototype.getPersonalization=function(){var i=new jQuery.Deferred,r=this;this.oCdmSiteDataRequestPromise.done(function(n){var o=t({},n),a=o._version,s;if(r.oAdapterConfiguration&&r.oAdapterConfiguration.config&&r.oAdapterConfiguration.config.ignoreSiteDataPersonalization){delete o.personalization}if(o.personalization){s=o.personalization._version;if(Object.keys(o.personalization).length>0&&!r._isPersonalizationVersionValid(a,s)){e.error("Personalization version is not compatible to the site version and will not be loaded."+" Please proceed to personalize the homepage again if needed. Personalization version: "+s+"; Site version: "+a);i.resolve();return}i.resolve(o.personalization)}else{r._readPersonalizationDataFromStorage(a).done(function(t){s=t._version;if(Object.keys(t).length>0&&!r._isPersonalizationVersionValid(a,s)){e.error("Personalization version is not compatible to the site version and will not be loaded."+" Please proceed to personalize the homepage again if needed. Personalization version: "+s+"; Site version: "+a);i.resolve();return}i.resolve(t)}).fail(function(e){i.reject(e)})}}).fail(function(e){i.reject(e)});return i.promise()};o.prototype._isPersonalizationVersionValid=function(e,t){if(!e){return false}var r=new i(e).getMajor(),n=new i(t);if(r>=3){return n.getMajor()===r}return n.getMajor()<3};o.prototype.setPersonalization=function(t){var r=new jQuery.Deferred;n.getServiceAsync("PersonalizationV2").then(async function(n){var o,a={keyCategory:n.KeyCategory.FIXED_KEY,writeFrequency:n.WriteFrequency.LOW,clientStorageAllowed:true},s={container:"sap.ushell.cdm.personalization",item:"data"},l=new i(t.version);if(l.inRange("3.1.0","4.0.0")){s={container:"sap.ushell.cdm3-1.personalization",item:"data"}}var c=await n.getPersonalizer(s,a,o);c.setPersData(t).then(function(){e.info("Personalization data has been stored successfully.");r.resolve()}).catch(function(){r.reject("Writing personalization data failed.")})});return r.promise()};o.prototype._readPersonalizationDataFromStorage=function(e){var t=new jQuery.Deferred;n.getServiceAsync("PersonalizationV2").then(async function(r){var n={keyCategory:r.KeyCategory.FIXED_KEY,writeFrequency:r.WriteFrequency.LOW,clientStorageAllowed:true};var o={container:"sap.ushell.cdm.personalization",item:"data"};if(e){var a=new i(e);if(a&&a.inRange("3.1.0","4.0.0")){o={container:"sap.ushell.cdm3-1.personalization",item:"data"}}}const s=await r.getPersonalizer(o,n);s.getPersData().then(function(e){t.resolve(e||{})}).catch(function(){t.reject("Fetching personalization data failed.")})});return t.promise()};o.prototype._identifySiteUrlFromConfig=function(e){var t=new URLSearchParams(window.location.search);var i=t.get("sap-ushell-cdm-site-url");var r=e&&e.config;if(r&&!r.allowSiteSourceFromURLParameter&&i){i=null}if(r&&!i){i=r.siteDataUrl||r.cdmSiteUrl}this.sCdmSiteUrl=i;return i};return o},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/ContainerAdapter", ["sap/base/Log","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/ObjectPath","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/ushell/System","sap/ushell/User","sap/ushell/utils","sap/ushell/Container","sap/ushell/resources","sap/ushell/Config"],function(e,t,i,s,n,jQuery,r,o,a,l,u,c){"use strict";var d=e.getLogger("sap/ushell/adapters/cdm/ContainerAdapter",e.Level.INFO);var f=function(c,f,g){var m="/sap/public/bc/icf/logoff",h=v(g.config,m),p=s.get("systemProperties.logoutMethod",g.config)||"GET",y=s.get("systemProperties.csrfTokenUrl",g.config),P=R(g.config),A=w(c,g.config),b=S(g.config);function v(e,t){if(e.systemProperties&&e.systemProperties.logoutUrl){return e.systemProperties.logoutUrl}return t}function R(e){var t,i=e.userProfile;if(i){t=T(i.defaults,e.userProfilePersonalization,i.metadata)}const s=L(t||C());return new o(s)}function w(e,t){var i=t.systemProperties,s=e.getAlias(),n=e.getPlatform(),o=e.getBaseUrl(),a,l,u,c,d,f,g;if(i){s=i.alias||s;n=i.platform||n;a=i.SID;l=i.client;u=i.productName;c=i.productVersion;d=i.systemName;f=i.systemRole;g=i.tenantRole}return new r({alias:s,platform:n,baseUrl:o,system:a,client:l,productName:u,productVersion:c,systemName:d,systemRole:f,tenantRole:g})}function T(e,t,s){var n=i(C(),e,t);n.bootTheme=n.bootTheme||{theme:n.theme,root:""};delete n.theme;if(s){if(s.editablePropterties){n.setThemePermitted=s.editablePropterties.indexOf("theme")>-1;n.setAccessibilityPermitted=s.editablePropterties.indexOf("accessibility")>-1;n.setContentDensityPermitted=s.editablePropterties.indexOf("contentDensity")>-1}if(s.ranges){n.ranges=s.ranges}}return n}function C(){return{setThemePermitted:false,setAccessibilityPermitted:false,setContentDensityPermitted:false,getLanguageAndRegionSettingsEntry:async function(){var[e]=await a.requireAsync(["sap/ushell/adapters/cdm/Settings/UserLanguageAndRegion/UserLanguageAndRegionEntry"]);return e}}}function S(e){var t=e&&e.systemProperties&&e.systemProperties.sessionKeepAlive;if(!t){return null}if(!t.url){d.error("Mandatory parameter 'url' missing in 'sessionKeepAlive' configuration.");return null}if(t.method!=="HEAD"&&t.method!=="GET"){t.method="HEAD"}return t}this._getLogoutUrl=function(){return h};this._setDocumentLocation=function(e){document.location=e};this._setWindowLocation=function(e){window.location.href=e};this.getSystem=function(){return A};this.getUser=function(){return P};this.load=function(){return jQuery.when()};this.getCurrentUrl=function(){return window.location.href};this.logout=async function(e){var t;if(!e){throw new Error("Not implemented")}if(a.hasNativeLogoutCapability()){t=new n(this._getLogoutUrl()).absoluteTo(this.getCurrentUrl()).search("").toString();a.getPrivateEpcm().doLogOff(t)}else{await this.logoutRedirect()}};this.logoutRedirect=async function(){const t=A.adjustUrl(this._getLogoutUrl());if(p==="POST"){e.info("performing logout from system via POST",undefined,"sap.ushell.adapters.cdm.ContainerAdapter::logoutRedirect");let i=false;let s;try{s=await fetch(y,{method:"HEAD",headers:{"X-CSRF-Token":"Fetch"}})}catch(e){i=true}if(i||!s.ok){e.error("fetching X-CSRF-Token for logout via POST failed for system: "+A.getAlias(),undefined,"sap.ushell.adapters.cdm.ContainerAdapter::logoutRedirect");if(s.status===401){a.reload();return}const t=await l.getServiceAsync("MessageInternal");t.show(t.Type.ERROR,u.i18n.getText("LogoutFailed"),{callback:a.reload});return}let n;try{n=await fetch(t,{method:"POST",headers:{"X-CSRF-Token":s.headers.get("X-CSRF-Token")}});const e=await n.text();this._setWindowLocation(e)}catch(e){i=true}if(i||!n.ok){e.error("logout via POST failed for system: "+A.getAlias(),undefined,"sap.ushell.adapters.cdm.ContainerAdapter::logoutRedirect")}}else{e.info("performing logout from system via GET (redirect)",undefined,"sap.ushell.adapters.cdm.ContainerAdapter::logoutRedirect");this._setDocumentLocation(t)}};this.sessionKeepAlive=function(){if(!b){return}var e=new XMLHttpRequest;e.open(b.method,b.url,true);e.onreadystatechange=function(){if(this.readyState===4){d.debug("Server session was extended")}};e.send()};this._getSessionKeepAliveConfig=function(){return b};function L(e){const i=t(e);const s=["id","email","firstName","lastName","fullName","isJamActive","isAdminUser","timeZone","language","languageBcp47","image","isImageConsent","isLanguagePersonalized","calendarWeekNumbering","trackUsageAnalytics","contentDensity","setContentDensityPermitted","accessibility","setAccessibilityPermitted","bootTheme","themeRoot","ranges","setThemePermitted","importBookmarks","showMyHome","detectDarkMode","getLanguageAndRegionSettingsEntry"];Object.keys(i).forEach(function(e){if(!s.includes(e)){delete i[e]}});return i}};return f},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/MenuAdapter", ["sap/ushell/library","sap/ushell/Config","sap/ushell/Container"],function(e,t,n){"use strict";var r=e.ContentNodeType;var i=function(){};i.prototype.isMenuEnabled=function(){if(!t.last("/core/menu/enabled")){return Promise.resolve(false)}return n.getServiceAsync("CommonDataModel").then(function(e){return e.getMenuEntries("main").then(function(e){return e.length>0})})};i.prototype.getMenuEntries=function(){return n.getServiceAsync("CommonDataModel").then(function(e){return e.getMenuEntries("main")})};i.prototype.getContentNodes=function(){return this.getMenuEntries().then(this._normalizeMenuEntries.bind(this)).then(this._buildContentNodes.bind(this))};i.prototype._normalizeMenuEntries=function(e){var t=[];return n.getServiceAsync("CommonDataModel").then(function(n){e.forEach(function(e){if(this._isSpaceOrPage(e)&&e.menuEntries===undefined){var r=e.target.parameters.find(function(e){return e.name==="pageId"});var i=r&&r.value;e.menuEntries=[{title:i,type:"IBN",target:e.target}];t.push(n.getPage(i).then(function(t){e.menuEntries[0].title=t.identification.title}))}}.bind(this));return Promise.allSettled(t)}.bind(this)).then(function(){return e})};i.prototype._buildContentNodes=function(e){return e.filter(this._isSpaceOrPage).map(function(e){var t=e.target.parameters.find(function(e){return e.name==="spaceId"}).value;var n={id:t,label:e.title,type:r.Space,isContainer:false};n.children=e.menuEntries.filter(this._isSpaceOrPage).map(function(e){var t=e.target.parameters.find(function(e){return e.name==="pageId"});var n=t&&t.value;if(!n){return null}return{id:n,label:e.title,type:r.Page,isContainer:true,children:[]}}).filter(function(e){return!!e});return n}.bind(this))};i.prototype._isSpaceOrPage=function(e){return e.type==="IBN"&&e.target&&e.target.semanticObject==="Launchpad"&&e.target.action==="openFLPPage"&&Array.isArray(e.target.parameters)};return i});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/PagesCommonDataModelAdapter", ["sap/base/Log","sap/base/util/deepExtend","sap/ushell/adapters/cdm/util/cdmSiteUtils","sap/base/util/extend","sap/base/util/Version","sap/ui/thirdparty/jquery","sap/ushell/Config","sap/ushell/Container"],function(e,t,i,n,a,jQuery,r,o){"use strict";var s=function(){this._oCDMPagesRequests={};this._oUnstableVisualizations={};this._sComponent="sap.ushell.adapters.cdm.PagesCommonDataModelAdapter";this.oSitePromise=new Promise(function(e,t){this.fnSiteResolve=e;this.fnSiteReject=t}.bind(this))};s.prototype.getSite=function(){var e=new jQuery.Deferred;o.getServiceAsync("NavigationDataProvider").then(function(e){return e.getNavigationData()}).then(function(e){var n={};var a=e.inbounds;for(var r=0;r<a.length;r++){var o=a[r].permanentKey||a[r].id;n[o]=a[r]}var s={_version:"3.1.0",site:{},catalogs:{},groups:{},visualizations:{},applications:i.getApplications(n),vizTypes:{},systemAliases:t({},e.systemAliases),pages:{}};this.fnSiteResolve(s);return s}.bind(this)).then(e.resolve).catch(function(t){e.reject(t);this.fnSiteReject(t)}.bind(this));return e.promise()};s.prototype.getPage=function(t){if(!t){var i="PagesCommonDataModelAdapter: getPage was called without a pageId";e.fatal(i,null,this._sComponent);return Promise.reject(i)}return this.oSitePromise.then(function(i){if(i.pages[t]){return i.pages[t]}return Promise.all([o.getServiceAsync("PagePersistence"),o.getServiceAsync("NavigationDataProvider")]).then(function(e){var i=e[0];var n=e[1];return Promise.all([i.getPage(t),n.getNavigationData()])}).then(function(e){var t=e[0];var n=e[1];this._addVisualizationsToSite(i,t.visualizations);this._addVizTypesToSite(i,t);this._addPageToSite(i,t.page,n);this._storeUnstableVisualizations(t.page.id,t.unstableVisualizations);return i.pages[t.page.id]}.bind(this)).catch(function(t){e.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",t,this._sComponent);return Promise.reject(t)}.bind(this))}.bind(this))};s.prototype._storeUnstableVisualizations=function(e,t){if(!t){return}this._oUnstableVisualizations[e]=t};s.prototype._addVizTypesToSite=function(e,t){var a={};Object.keys(t.vizTypes).forEach(function(i){if(!e.vizTypes[i]){a[i]=t.vizTypes[i]}});n(e.vizTypes,i.getVizTypes(a))};s.prototype._addVisualizationsToSite=function(e,t,a){var r;if(a){r={};Object.keys(t).forEach(function(i){if(!e.visualizations[i]){r[i]=t[i]}})}else{r=t}n(e.visualizations,i.getVisualizations(r))};s.prototype._addPageToSite=function(t,i,n){var a={};var r=n.inbounds;for(var o=0;o<r.length;o++){var s=r[o].permanentKey||r[o].id;a[s]=r[o]}var u=t.pages[i.id]={identification:{id:i.id,title:i.title},payload:{layout:{sectionOrder:i.sections.map(function(e){return e.id})},sections:{}}};var c;var l;for(var d=0;d<i.sections.length;d++){c=i.sections[d];l=u.payload.sections[c.id]={id:c.id,title:c.title,layout:{vizOrder:c.viz.map(function(e){return e.id})},viz:{}};var v,p;for(var h=0;h<c.viz.length;h++){v=c.viz[h];p=!t.visualizations[v.vizId];if(p){var f=l.layout.vizOrder;f.splice(f.indexOf(v.id),1);if(p){e.error(`Tile '${v.id}' with vizId '${v.vizId}' has no matching visualization. As the tile cannot be used to start an app it is removed from the page.`,null,this._sComponent)}continue}l.viz[v.id]={id:v.id,vizId:v.vizId,displayFormatHint:v.displayFormatHint}}}};s.prototype.getPages=function(t){if(!(t&&Array.isArray(t)&&t.length!==0)){var i="PagesCommonDataModelAdapter: getPages is not an array or does not contain any Page id";e.fatal(i,null,this._sComponent);return Promise.reject(i)}return this.oSitePromise.then(function(i){var n;var a=[];for(var r=0;r<t.length;r++){n=t[r];if(!i.pages[n]){a.push(t[r])}}if(a.length===0){return i.pages}return Promise.all([o.getServiceAsync("PagePersistence"),o.getServiceAsync("NavigationDataProvider")]).then(function(e){var t=e[0];var i=e[1];return Promise.all([t.getPages(a),i.getNavigationData()])}).then(function(e){var t=e[0];var n=e[1];for(var a=0;a<t.length;a++){this._addVisualizationsToSite(i,t[a].visualizations,true);this._addVizTypesToSite(i,t[a]);this._addPageToSite(i,t[a].page,n);this._storeUnstableVisualizations(t[a].page.id,t[a].unstableVisualizations)}return i.pages}.bind(this)).catch(function(t){e.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",t,this._sComponent);return Promise.reject(t)}.bind(this))}.bind(this)).then(function(e){var i={};t.forEach(function(t){var n=e[t];if(n){i[t]=n}});return i})};s.prototype.getPersonalization=function(t){var i=new jQuery.Deferred;o.getServiceAsync("PersonalizationV2").then(async function(n){var r;var o=new a(t);r={container:"sap.ushell.cdm.personalization",item:"data"};if(o.inRange("3.1.0","4.0.0")){r={container:"sap.ushell.cdm3-1.personalization",item:"data"}}var s={validity:"Infinity",keyCategory:n.KeyCategory.GENERATED_KEY,writeFrequency:n.WriteFrequency.HIGH,clientStorageAllowed:false};const u=await n.getPersonalizer(r,s);u.getPersData().then(function(e){i.resolve(e||{})}).catch(function(t){e.error("Could not load page personalization",t,this._sComponent);i.reject(t)}.bind(this))}.bind(this)).catch(function(){i.reject("Personalization Service could not be loaded")});return i.promise()};s.prototype.setPersonalization=function(e){var t=new jQuery.Deferred;o.getServiceAsync("PersonalizationV2").then(async function(i){var n;var r=new a(e.version);n={container:"sap.ushell.cdm.personalization",item:"data"};if(r.inRange("3.1.0","4.0.0")){n={container:"sap.ushell.cdm3-1.personalization",item:"data"}}var o={validity:"Infinity",keyCategory:i.KeyCategory.GENERATED_KEY,writeFrequency:i.WriteFrequency.HIGH,clientStorageAllowed:false};const s=await i.getPersonalizer(n,o);s.setPersData(e).then(function(){t.resolve(e)}).catch(function(e){t.reject(e)})}).catch(function(){t.reject("Personalization Service could not be loaded")});return t.promise()};s.prototype.getVisualizations=function(){return o.getServiceAsync("VisualizationDataProvider").then(function(e){return Promise.all([e.getVisualizationData(),this.oSitePromise]).then(function(e){var t=e[0];var i=e[1];this._addVisualizationsToSite(i,t.visualizations);return i.visualizations}.bind(this))}.bind(this))};s.prototype.getVizTypes=function(){return o.getServiceAsync("VisualizationDataProvider").then(function(e){return Promise.all([e.getVisualizationData(),this.oSitePromise]).then(function(e){var t=e[0];var i=e[1];this._addVizTypesToSite(i,t);return i.vizTypes}.bind(this))}.bind(this))};s.prototype.getVizType=function(e){return this.oSitePromise.then(function(t){var a=t.vizTypes[e];if(a){return a}if(!e.startsWith("X-SAP-UI2-CHIP:")){return}return o.getServiceAsync("VisualizationDataProvider").then(function(t){return t.loadVizType(e)}).then(function(a){if(!a){return}var r={};r[e]=a;n(t.vizTypes,i.getVizTypes(r));return t.vizTypes[e]})})};s.prototype.getCachedVisualizations=function(){return this.oSitePromise.then(function(e){return e.visualizations})};s.prototype.getCachedVizTypes=function(){return this.oSitePromise.then(function(e){return e.vizTypes})};s.prototype.migratePersonalizedPages=function(e){var t=[];e.forEach(function(e){var i=e.identification.id;var n=this._oUnstableVisualizations[i];if(!n){return}Object.keys(e.payload.sections).forEach(function(a){var r=e.payload.sections[a];Object.keys(r.viz).forEach(function(e){var a=r.viz[e];var o=n[a.vizId];if(o){a.vizId=o.vizId;if(!t.includes(i)){t.push(i)}}})});this._oUnstableVisualizations[i]=null}.bind(this));return Promise.resolve(t)};return s},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/PersonalizationAdapter", ["sap/ushell/adapters/cdm/_Personalization/internals","sap/ushell/utils/HttpClient"],function(l,n){"use strict";return l.PersonalizationAdapter.bind(null,n,null)},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/PersonalizationV2Adapter", ["./PersonalizationAdapter"],function(e){"use strict";return e},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/Ui5ComponentLoaderAdapter", [],function(){"use strict";function n(){}return n},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/_LaunchPage/modifyHome", ["sap/ushell/adapters/cdm/_LaunchPage/readHome"],function(e){"use strict";function i(e){return r(e,"Home",true)}function r(e,i,r){var t={identification:{id:e,namespace:"",title:i},payload:{isPreset:false,locked:false,tiles:[],links:[],groups:[]}};if(r){t.payload.isDefaultGroup=true}return t}function t(i,r,t){var o=e.getGroupId(r);i.groups[o]=r;if(t!==undefined){i.site.payload.groupsOrder.splice(t,0,o)}else{i.site.payload.groupsOrder.push(o)}return i}function o(e,i,r){if(e&&e.groups&&e.groups[r]){e.groups[r]=i}return e}function u(e,i){if(e&&e.groups&&e.groups[i.identification.id]){delete e.groups[i.identification.id]}if(e&&e.site&&e.site.payload&&e.site.payload.groupsOrder){e.site.payload.groupsOrder=e.site.payload.groupsOrder.filter(function(e){return e!==i.identification.id})}return e}function s(e,i){e.site.payload.groupsOrder=i;return e}function n(e,i){e.identification.title=i}function a(e,i){if(i){delete e.identification.isVisible}else{e.identification.isVisible=false}}return{createDefaultGroup:i,createEmptyGroup:r,addGroupToSite:t,overwriteGroup:o,removeGroupFromSite:u,setGroupsOrder:s,setGroupTitle:n,setGroupVisibility:a}},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/_LaunchPage/readHome", ["sap/ushell/utils/type"],function(i){"use strict";function e(i){var e=[];i.site.payload.groupsOrder.forEach(function(t,n){var r=i.groups[t];if(r){r.payload=r.payload||{};e.push(r)}});return e}function t(i){return i.groups}function n(i){return i.site.payload.groupsOrder}function r(i,e){return i.groups[e]}function u(i){var e=i.filter(function(i){return i.payload.hasOwnProperty("isDefaultGroup")});if(e.length>0){return e[0]}return undefined}function o(i){return i.identification&&i.identification.id}function l(i){return i.identification.title}function s(i){if(!i.payload.hasOwnProperty("isPreset")){return true}return!!i.payload.isPreset}function a(i){return!!i.payload.locked}function f(i){return!!(i.identification.isVisible===undefined||i.identification.isVisible===true)}function d(e){if(e.payload.tiles&&i.isArray(e.payload.tiles)&&e.payload.tiles.length>0){return e.payload.tiles}return[]}function c(e){if(e.payload.links&&i.isArray(e.payload.links)&&e.payload.links.length>0){return e.payload.links}return[]}function p(i){return i.id}function g(i,e){var t;if(e&&e.isBookmark){return e.title}t=i[e.id];if(t){return e.title||t.tileResolutionResult.title}return undefined}function y(i,e){var t;if(e.isBookmark){return e.subTitle}t=i[e.id];if(t){return e.subTitle||t.tileResolutionResult.subTitle}return undefined}function k(i,e){var t;if(e.isBookmark){return e.info}t=i[e.id];return e.info||t.tileResolutionResult.info}function T(i,e){var t;if(e.isBookmark){return e.icon}t=i[e.id];if(t){return e.icon||t.tileResolutionResult.icon}return undefined}function R(i,e){var t;if(e.isBookmark){return e.icon}t=i[e.id];if(t){return e.icon||t.tileResolutionResult.icon}return undefined}function G(i,e){var t=i[e.id];if(t&&t.tileResolutionResult&&t.tileResolutionResult.size){return t.tileResolutionResult.size}}function v(i,e){var t=i[e.id];if(t){return!!t.isLink}return false}function m(i){return!!(i&&i.id&&!i.isCatalogTile)}function h(i,e){return i.deviceTypes&&i.deviceTypes[e]}return{getGroupsArrayFromSite:e,getGroupsMapFromSite:t,getGroupIdsFromSite:n,getGroupFromSite:r,getDefaultGroup:u,getGroupId:o,getGroupTitle:l,isGroupPreset:s,isGroupLocked:a,isGroupVisible:f,getGroupTiles:d,getGroupLinks:c,getTileId:p,getTileTitle:g,getTileSubtitle:y,getTileInfo:k,getTileIcon:T,getTileIndicatorDataSource:R,getTileSize:G,isLink:v,isGroupTile:m,supportsFormFactor:h}},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/_LaunchPage/uri.transform", ["sap/ui/thirdparty/URI"],function(r){"use strict";function e(e,n,f,v){var c=l(e)?new r(e):null;if(!c){return{error:"Error: Parameter sUri is empty or not a string, use case not supported."}}if(!i(c)){return t(e,null,null,null,e)}var h=l(n)?new r(n):null;if(h&&!i(h)){return t(e,n,null,null,c.absoluteTo(h))}var m=(new r).search("");if(m.toString()===""){m=new r("https://x.y.z:8443/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/shells/cdm/fioriCDM.html?params")}var p=l(f)?new r(s(f)):m;if(!i(p)&&!v){return t(e,n,r.joinPaths(h,c),o(p),r.joinPaths(h,c).absoluteTo(p))}var b=l(v)?new r(v):m;if(!p||!b.toString()){return{error:"Error: Parameter sUriNewBase is empty or not a string, use case not supported."}}if(i(b)){return{error:"Error: Parameter sUriNewBase is a relative uri, but must be absolute."}}if(i(p)&&!i(b)){p=p.absoluteTo(b)}if(!i(p)&&!i(b)){if(p.host()&&b.host()&&p.host()!=b.host()){return{error:"Error: Hosts of the parameters sUriBase and sUriNewBase are given but do not match."}}var g=new r(u(p)).relativeTo(u(b));var w;if(l(n)){w=c.absoluteTo(h.absoluteTo(g.absoluteTo(b)));var d=a(g,h);var T=a(d,c);return t(c,d,T,o(b),w)}w=c.absoluteTo(g.absoluteTo(b));var P=a(g,c);P.query(c.query());return t(P,null,P,o(b),w)}return{error:"Error: Parameter combination not supported."}}function t(r,e,t,n,i){var o={};if(r){o.uri=r.toString()}if(e){o.uriParent=e.toString()}if(t){o.uriRelative=t.toString()}if(n){o.uriBase=n.toString()}if(i){o.uriAbsolute=i.toString()}return o}function n(r){if(!r.is("relative")){return false}return r.toString()[0]==="/"}function i(r){return!r.is("absolute")&&!n(r)}function o(r){return r.filename("").search("").fragment("")}function a(){var e=new r("/1/2/3/4/5/6/7/8/9/");var t=e;for(var n=0;n<arguments.length;n++){t=r.joinPaths(t,arguments[n])}return t.relativeTo(e)}function u(e){var t=e.directory();if(t==="/"){return"/"}return r.joinPaths(t,"/").toString()}function s(e){var t=e;if(e){var n=new r(e);if(n.filename()&&n.filename().indexOf(".")===-1&&n.filename().slice(-1)!=="/"){t+="/"}}return t}function l(r){return r&&typeof r==="string"}return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/_Personalization/internals", ["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,jQuery,n){"use strict";return{PersonalizationAdapter:r,getStorageResourceRoot:i,getContainerPath:s,delAdapterContainer:d,createContainerData:c,getAdapterContainer:f,getContainerCategory:p,isCategoryPContainer:g,trimContainerKey:u,save:y,load:I,del:h,clearContainerData:_,getItemKeys:E,containsItem:R,setItemValue:P,getItemValue:b,delItem:A,addPrefixToItemKey:v,stripPrefixFromItemKey:w,getHttpHeaderValue:C};function r(e,t,n,r,a){var o,s;var u={cache:{},headers:{"sap-client":n.getClient()}};a=a&&a.config;if(!a){throw new Error("PersonalizationAdapter: missing configuration.")}if(!t){t={}}o=i(a);s=new e(o,u);return{getAdapterContainer:f.bind(null,a,t,s),delAdapterContainer:d.bind(null,a,t,s)}}function i(e){var t=!e||!e.storageResourceRoot;if(t){throw new Error("Configuration error: storage resource root is not defined.")}return e.storageResourceRoot}function a(e){var t=!e||!e.relativeUrlReadOptimized;if(t){throw new Error("Configuration error: relative URL for read optimization is not defined.")}return e.relativeUrlReadOptimized}function o(e){var t=!e||!e.relativeUrlWriteOptimized;if(t){throw new Error("Configuration error: relative URL for write optimization is not defined.")}return e.relativeUrlWriteOptimized}function s(e,t,n){return m(e,t)+"/"+encodeURIComponent(u(n))+".json"}function u(e){var r=t.S_CONTAINER_PREFIX,i,a;if(jQuery.type(e)!=="string"||e.length===0){throw new Error("Personalization container key must be a non-empty string")}if(e.substring(0,r.length)===r){i=e.substring(r.length)}else{n.error("Unexpected personalization container key: "+e,"should always be prefixed with "+r,"sap.ushell.adapters.cdm.PersonalizationAdapter");i=e}if(i.length<=40){a=i}else{a=i.substring(0,40);n.error("Invalid personalization container key: '"+i+"'"+" exceeds maximum key length (40 characters) and is shortened to '"+a+"'",undefined,"sap.ushell.adapters.cdm.PersonalizationAdapter")}return a}function l(){return{validity:Infinity,keyCategory:e.keyCategory.GENERATED_KEY,writeFrequency:e.writeFrequency.HIGH,clientStorageAllowed:false}}function d(e,t,n,r,i){var a=s(e,i,r);var o=t&&t[a];if(o){delete t[a]}return h(n,a)}function c(e,t){var r;if(!t&&t!==""||t.constructor!==String){n.warning("Personalization container has an invalid app name; must be a non-empty string",null,"sap.ushell.adapters.cdm.PersonalizationAdapter")}if(!e){e=l()}r={items:{},__metadata:{appName:t,expiry:Date.now()+e.validity*60*1e3,validity:e.validity,category:p(e)}};return r}function f(e,t,n,r,i,a){var o,u,l=s(e,i,r);if(t&&t[l]){return t[l]}u=c(i,a);o=u.items;return{save:y.bind(null,n,u,l),load:I.bind(null,n,u,l),del:h.bind(null,n,u,l),setItemValue:P.bind(null,o),getItemValue:b.bind(null,o),getItemKeys:E.bind(null,o),containsItem:R.bind(null,o),delItem:A.bind(null,o)}}function p(e){return g(e)?"p":"u"}function m(e,t){return g(t)?a(e):o(e)}function g(t){return t&&t.keyCategory===e.keyCategory.FIXED_KEY&&t.writeFrequency===e.writeFrequency.LOW&&t.clientStorageAllowed}function y(e,t,r){return new jQuery.Deferred(function(i){e.put(r,{data:t}).then(function(e){i.resolve()}).catch(function(e){n.error("Failed to save personalization container; response: "+(typeof e==="object"?JSON.stringify(e):e),e.stack?e.stack:null,"sap.ushell.adapters.cdm.PersonalizationAdapter");i.reject(e)})}).promise()}function I(e,t,n){function r(e){_(e.items)}return new jQuery.Deferred(function(i){e.get(n).then(function(e){var n,a;if(e.status===200&&C(e.responseHeaders,"content-length")==="0"&&C(e.responseHeaders,"content-type").indexOf("text/plain")===0){r(t)}else{n=JSON.parse(e.responseText);if(n.data){n.items=n.data;delete n.data;n.__metadata=t.__metadata}a=n.items;_(t.items);Object.keys(a).forEach(function(e){t.items[e]=a[e]});t.__metadata=n.__metadata}i.resolve()}).catch(function(e){if(e.status===404){r(t);i.resolve()}else{_(t.items);i.reject(e)}})}).promise()}function h(e,t){return new jQuery.Deferred(function(n){e.delete(t).then(function(){n.resolve()}).catch(function(e){n.reject(e)})}).promise()}function _(e){Object.keys(e).forEach(function(t){delete e[t]})}function v(e){if(e==="__metadata"){return undefined}else if(e.indexOf(t.S_VARIANT_PREFIX)===0||e.indexOf(t.S_ADMIN_PREFIX)===0){return e}return t.S_ITEM_PREFIX+e}function w(e){if(e.indexOf(t.S_ITEM_PREFIX)===0){return e.substring(t.S_ITEM_PREFIX.length)}else if(e.indexOf(t.S_VARIANT_PREFIX)===0||e.indexOf(t.S_ADMIN_PREFIX)===0){return e}throw new Error("Illegal item key for personalization container: '"+e+"'; must be prefixed with one of the following: ["+t.S_ITEM_PREFIX+", "+t.S_VARIANT_PREFIX+", "+t.S_ADMIN_PREFIX+"] ")}function E(e){return Object.keys(e).map(v).filter(function(e){return!!e})}function R(e,t){return e.hasOwnProperty(w(t))}function P(e,t,n){e[w(t)]=n}function b(e,t){return e[w(t)]}function A(e,t){delete e[w(t)]}function C(e,t){var n=e&&e.filter(function(e){return e.name.toLowerCase()===t});return n&&n[0]&&n[0].value}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/util/AppForInbound", ["sap/base/util/ObjectPath","sap/base/Log"],function(e,t){"use strict";var i={};i.get=function(i,n){var s={};switch(n.resolutionResult.applicationType){case"SAPUI5":s=this._getUI5App(i,n);break;case"TR":s=this._getTRApp(i,n);break;case"WDA":s=this._getWDAApp(i,n);break;case"URL":s=this._getURLApp(i,n);break;case"WCF":s=this._getWCFApp(i,n);break;default:t.error("Unable to get CDM app for inbound: Application type '"+n.resolutionResult.applicationType+"' of app '"+i+"' is unknown and not supported.");throw new Error("Unknown application type: "+n.applicationType)}if(n.resolutionResult.systemAlias){e.set(["sap.app","destination"],{name:n.resolutionResult.systemAlias,semantics:"applied"},s)}return s};i._getURLApp=function(e,t){return{"sap.app":{id:e,crossNavigation:{inbounds:{"Shell-launchURL":{semanticObject:"Shell",action:"launchURL",signature:{parameters:{"sap-external-url":{required:true,filter:{value:t.resolutionResult.url,format:"plain"}}}}}}}},"sap.ui":{technology:"URL",deviceTypes:t.deviceTypes},"sap.url":{uri:t.resolutionResult.url}}};i._getUI5App=function(e,t){return{"sap.app":{id:e,title:t.resolutionResult.text,subTitle:t.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(t)}},"sap.ui5":{componentName:t.resolutionResult.ui5ComponentName},"sap.ui":{technology:"UI5",deviceTypes:t.deviceTypes},"sap.platform.runtime":{componentProperties:{url:t.resolutionResult.url}}}};i._getApplicationInbound=function(e){var t={};t[e.id]={semanticObject:e.semanticObject,action:e.action,signature:e.signature};return t};i._getTRApp=function(e,i){var n,s=i.resolutionResult.url.match(/transaction=(.+?)[&?]/);if(s){n=s[1]}else{t.error("Unable to determine ABAP transaction from inbound URL of app '"+e+"': "+i.resolutionResult.url+".")}return{"sap.app":{id:e,title:i.resolutionResult.text,subTitle:i.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(i)}},"sap.ui":{technology:"GUI",deviceTypes:i.deviceTypes},"sap.flp":{type:"application"},"sap.gui":{transaction:n}}};i._getWDAApp=function(e,t){return{"sap.app":{id:e,title:t.resolutionResult.text,subTitle:t.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(t)}},"sap.ui":{technology:"URL",deviceTypes:t.deviceTypes},"sap.url":{uri:t.resolutionResult.url}}};i._getWCFApp=function(e,t){return{"sap.app":{id:e,title:t.resolutionResult.text,subTitle:t.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(t)}},"sap.ui":{technology:"URL",deviceTypes:t.deviceTypes},"sap.url":{uri:t.resolutionResult.url}}};return i});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/util/cdmSiteUtils", ["sap/ushell/adapters/cdm/util/AppForInbound","sap/base/Log","sap/ushell/adapters/cdm/v3/utilsCdm"],function(i,e,t){"use strict";var a={_VISUALIZATION_TYPES:{STATIC_TILE:"sap.ushell.StaticAppLauncher",DYNAMIC_TILE:"sap.ushell.DynamicAppLauncher"}};a.getVisualizations=function(i){var e={};Object.keys(i).forEach(function(a){var n=i[a];var s;if(n.isCustomTile){s=n.vizType}else if(n.indicatorDataSource){s=this._VISUALIZATION_TYPES.DYNAMIC_TILE}else{s=this._VISUALIZATION_TYPES.STATIC_TILE}var r={vizType:s,vizConfig:{"sap.app":{title:n.title,subTitle:n.subTitle,info:n.info,tags:{keywords:n.keywords}},"sap.ui":{icons:{icon:n.icon}},"sap.flp":{tileSize:n.size,indicatorDataSource:n.indicatorDataSource,numberUnit:n.numberUnit,target:t.toTargetFromHash(n.url)}}};if(n.isCustomTile){r.vizConfig["sap.flp"]._instantiationData=n._instantiationData}e[a]=r}.bind(this));return e};a.getApplications=function(t){return Object.keys(t).reduce(function(a,n){var s=t[n],r=s.permanentKey||s.id;try{a[r]=i.get(n,s)}catch(i){e.error("Unable to dereference app '"+n+"' of CDM page.");a[n]={}}return a},{})};a.getVizTypes=function(i){return Object.keys(i).reduce(function(e,t){var a=i[t].id;if(!e[a]){e[a]={"sap.app":{id:a,type:"chipVizType"},"sap.flp":{vizOptions:i[t].vizOptions,tileSize:i[t].tileSize}}}return e},{})};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/AdapterBase", ["sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/m/GenericTile","sap/ui/core/ComponentContainer","sap/ushell/adapters/cdm/_LaunchPage/uri.transform","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/navigationMode","sap/ushell/resources","sap/ushell/utils","sap/ushell/adapters/cdm/v3/utilsCdm","sap/base/util/Version","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/base/util/deepClone","sap/base/Log","sap/ushell/UI5ComponentType","sap/ushell/Container"],function(e,t,i,r,o,n,a,s,l,u,p,d,c,jQuery,f,v,g,h,m,T,y,R){"use strict";var _=T.getLogger("sap/ushell/adapters/cdm/LaunchPageAdapter");var C=T.Level;var b="sap.ushell.components.tiles.cdm.applauncher";var I="sap.ushell.components.tiles.cdm.applauncherdynamic";function S(e,t,i){this.oAdapterConfiguration=i;this._mResolvedTiles={};this._mCatalogTilePromises={};this._mFailedResolvedCatalogTiles={};this._mFailedResolvedTiles={};this.TileType={Tile:"tile",Link:"link",Card:"card"}}S.prototype.getGroups=function(){var e=new jQuery.Deferred;this._ensureLoaded().then(function(t){p.setPerformanceMark("FLP - homepage groups processed");e.resolve(t)}).catch(function(){e.resolve([])});return e.promise()};S.prototype._ensureLoaded=function(){var t=this;if(this._loaded){return this._loaded}var i=new jQuery.Deferred;this._ensureLoadedDeferred=i;this._loaded=new Promise(function(i,r){this._getSiteData().then(function(r){if(!t.isSiteSupported(r)){throw new Error("Invalid CDM site version: Check the configuration of the launchpage adapter and the version of the FLP site")}var o=[];var n=e.getGroupsArrayFromSite(r);n=t._addDefaultGroup(n,r);n.forEach(function(e){o=t._ensureGroupItemsResolved(e,r).concat(o)});t._allPromisesDone(o).done(function(){i(n);delete t._loaded;t._logTileResolutionFailures(t._mFailedResolvedTiles)})}).catch(function(e){_.error("Delivering homepage groups failed - "+e);i([]);delete t._loaded})}.bind(this));return this._loaded};S.prototype._ensureGroupItemsResolved=function(e,t){var i=[];var r;var o;if(e.payload&&e.payload.tiles){r=this._ensureGroupTilesResolved(e.payload.tiles,t);Array.prototype.push.apply(i,r)}if(e.payload&&e.payload.links){o=this._ensureGroupLinksResolved(e.payload.links,t);Array.prototype.push.apply(i,o)}return i};S.prototype._ensureGroupTilesResolved=function(e,t){return(e||[]).map(function(e,i){return this._resolveGroupTile(e,t).then(function(e){e.isLink=false;return e})},this)};S.prototype._ensureGroupLinksResolved=function(e,t){return(e||[]).map(function(e){return this._resolveGroupTile(e,t).then(function(e){e.isLink=true;return e})},this)};S.prototype._resolveGroupTile=function(e,t){var i=this._mResolvedTiles;var r=this._mFailedResolvedTiles;var o;function n(t){i[e.id]=t;if(r[e.id]){delete r[e.id]}return t}function a(e){var t=e.target;return t&&t.semanticObject==="Shell"&&t.action==="launchURL"}if(i[e.id]){return(new jQuery.Deferred).resolve(i[e.id]).promise()}if(e.target&&e.target.url){o=jQuery.when(this._getTileForUrl(e))}else if(e.isBookmark&&e.vizType===undefined){o=this._resolveTileByIntent(e,t)}else if(a(e)){o=this._resolveTileByIntent(e,t)}else{o=this._resolveTileByVizId(e,t)}var s=new jQuery.Deferred;o.done(function(e){s.resolve(n(e))}).fail(function(t){r[e.id]=t;s.reject(t)});return s.promise()};S.prototype._resolveTileByVizId=function(r,o){var n;var s;var u;var c;var v;var g;var T;var y;var R;var _;var b;var I;var S;var D;function L(e,t){return(new jQuery.Deferred).reject({logLevel:e,message:t}).promise()}var w=new jQuery.Deferred;if(!f(o)){return L(C.ERROR,"Cannot resolve tile: oSite must be an object")}if(!f(r)){return L(C.ERROR,"Cannot resolve tile: oTile must be an object")}s=r.vizId;n=m(t.get(o,s||"")||{});c=r.vizType||t.getTypeId(n);u=t.getType(o,c);if(!u){return L(C.ERROR,"Cannot resolve tile '"+r.id+"': no visualization type found for vizTypeId '"+c+"'")}v=t.getAppId(n);if(v){g=t.getAppDescriptor(o,v);if(!g){return L(C.INFO,"Tile '"+r.id+"' filtered from result: no app descriptor found for appId '"+v+"' (dangling app reference)")}T=e.getInbound(g,t.getTarget(n).inboundId);if(!T){return L(C.ERROR,"Cannot resolve tile '"+r.id+"': app '"+v+"' has no navigation inbound")}y=d.mapOne(T.key,T.inbound,g,n,u,o);var P=y.resolutionResult.applicationType;var G=y.resolutionResult.additionalInformation;var F=a.last("/core/navigation/enableInPlaceForClassicUIs");var k=F?F[P]:false;R=l.computeNavigationModeForHomepageTiles(P,G,k);I=t.getOutbound(n,T.inbound);D=i.harmonizeTarget(I);b=this._toHashFromOutbound(D)}else{n.vizConfig=h({},n.vizConfig,r.vizConfig);y=d.mapOne(undefined,undefined,undefined,n,u,o);if(t.startsExternalUrl(n)){S=p.getMember(n.vizConfig,"sap|flp.target.url")}}_=y.tileResolutionResult;_.navigationMode=R;_.isLink=false;if(!this._isFormFactorSupported(_)){return L(C.INFO,"Tile '"+r.id+"' filtered from result: form factor not supported")}if(S||b){w.resolve({tileResolutionResult:_,tileIntent:S||b})}else{if(r.target){var O=m(r.target);b=d.toHashFromTarget(i.harmonizeTarget(O))}w.resolve({tileResolutionResult:_,tileIntent:b})}return w.promise()};S.prototype._isFormFactorSupported=function(t){var i=p.getFormFactor();return e.supportsFormFactor(t,i)};S.prototype._getFirstInbound=function(e){var t=Object.keys(e["sap.app"].crossNavigation.inbounds).shift();var i=e["sap.app"].crossNavigation.inbounds[t];return{key:t,inbound:i}};S.prototype._resolveTileByIntent=function(e){var t=this._prepareTileHash(e);return this._getTileFromHash(t)};S.prototype._allPromisesDone=function(e){var t=new jQuery.Deferred;if(e.length===0){t.resolve([])}else{var i=e.map(function(e){var t=new jQuery.Deferred;e.always(t.resolve.bind(t));return t.promise()});jQuery.when.apply(this,i).done(function(){var e=Array.prototype.slice.call(arguments);t.resolve(e)})}return t.promise()};S.prototype._logTileResolutionFailures=function(e){var t={};if(!e){return}Object.keys(C).filter(function(e){var t=C[e];return t>=C.FATAL&&t<=C.ALL}).forEach(function(e){t[C[e]]=""});Object.keys(e).forEach(function(i){var r=e[i];if(r.logLevel){t[r.logLevel]=t[r.logLevel].concat(r.message).concat("\n")}});if(t[C.FATAL]){_.fatal(t[C.FATAL])}if(t[C.ERROR]){_.error(t[C.ERROR])}if(t[C.WARNING]){_.warning(t[C.WARNING])}if(t[C.INFO]){_.info(t[C.INFO])}if(t[C.DEBUG]){_.debug(t[C.DEBUG])}if(t[C.TRACE]){_.trace(t[C.TRACE])}};S.prototype._isValidTitle=function(e){return typeof e==="string"&&e};S.prototype._isGroupPreset=function(t){return e.isGroupPreset(t)};S.prototype._isGroupLocked=function(t){return e.isGroupLocked(t)};S.prototype.getGroupTitle=function(t){return e.getGroupTitle(t)};S.prototype.getGroupId=function(t){return e.getGroupId(t)};S.prototype.isGroupVisible=function(t){return e.isGroupVisible(t)};S.prototype.getTileTitle=function(t){return e.getTileTitle(this._mResolvedTiles,t)};S.prototype.getTileContentProviderId=function(t){return e.getContentProviderId(t)};S.prototype.getTileSubtitle=function(t){return e.getTileSubtitle(this._mResolvedTiles,t)};S.prototype.getTileIcon=function(t){return e.getTileIcon(this._mResolvedTiles,t)};S.prototype.getTileInfo=function(t){return e.getTileInfo(this._mResolvedTiles,t)};S.prototype.getTileIndicatorDataSource=function(e){var t=this._mResolvedTiles[e.id];var i={};if(e.indicatorDataSource){i.indicatorDataSource=h({},e.indicatorDataSource);if(e.dataSource){i.dataSource=h({},e.dataSource)}return i}if(!t){return i}var r=t.tileResolutionResult;if(r.indicatorDataSource){i.indicatorDataSource=h({},r.indicatorDataSource);if(r.indicatorDataSource.hasOwnProperty("dataSource")){var o=r.indicatorDataSource.dataSource;var a=r.dataSources;if(a&&a.hasOwnProperty(o)){i.dataSource=h({},a[o])}else{T.warning("datasource referenced but not found for tile: "+t.tileIntent)}}if(p.getMember(r,"runtimeInformation.componentProperties.url")){var s=p.getMember(i,"indicatorDataSource.path");var l=p.getMember(i,"dataSource.uri");var u=p.getMember(r,"runtimeInformation.componentProperties.url");var d=n(s,l,u,this.getWindowLocationHref());if(!d.error){if(s){i.indicatorDataSource.path=d.uri}if(l){i.dataSource.uri=d.uriParent}}}}return i};S.prototype.getWindowLocationHref=function(){return window.location.href};S.prototype.isGroupRemovable=function(e){return!this._isGroupPreset(e)};S.prototype.isGroupLocked=function(e){return this._isGroupLocked(e)};S.prototype.getGroupTiles=function(t){return e.getGroupTiles(t).concat(e.getGroupLinks(t))};S.prototype.getTileType=function(t){if(e.isLink(this._mResolvedTiles,t)){return this.TileType.Link}if(e.isCard(this._mResolvedTiles,t)){return this.TileType.Card}return this.TileType.Tile};S.prototype.getTileId=function(t){return e.getTileId(t)};S.prototype.getTileSize=function(t){return e.getTileSize(this._mResolvedTiles,t)||"1x1"};S.prototype.getTileTarget=function(t){var i=e.getTileId(t);var r=this._mResolvedTiles[i];if(t.target&&t.target.url){return t.target.url}if(r){return r.tileIntent}T.warning("Could not find a target for Tile with id '"+i+"'","sap.ushell.adapters.cdm.LaunchPageAdapter");return""};S.prototype.isTileIntentSupported=function(e){return this._mFailedResolvedTiles[e.id]===undefined};S.prototype.setTileVisible=function(e,t){var i=this._mResolvedTiles[e.id];if(i){if(i.tileComponent){this._notifyTileAboutVisibility(i.tileComponent,t,i.visibility)}i.visibility=t}};S.prototype.getCardManifest=function(e){var t=this._mResolvedTiles[e.id];var i=t.tileResolutionResult;return i.tileComponentLoadInfo};S.prototype._getTileUiComponentContainer=function(e,t,i){var n=this;var a;var l;var p;var d;var c;var f;var v=new jQuery.Deferred;R.getServiceAsync("Ui5ComponentLoader").then(function(r){l=r;var o=this._createTileComponentData(e,i,t);return o}.bind(this)).then(function(t){return this._enhanceTileComponentData(e,t)}.bind(this)).then(function(g){a=t.tileResolutionResult;if(t.isLink){p=a.navigationMode;v.resolve(n._createLinkInstance(e,i,p,r,u));return}var h=this._createTileComponentProperties(g,a.tileComponentLoadInfo);if(!h.name){return Promise.reject("Cannot find name of tile component for tile with id: '"+e.id+"'")}if(h.manifest){g.properties=g.properties||{};g.properties.manifest=h.manifest}f=this._isCustomTileComponent(h.name);var m=function(t){var r;d=t.componentHandle.getInstance();c=new o({component:d,height:"100%"});if(!i){r=n._mResolvedTiles[e.id];r.tileComponent=d;if(typeof r.visibility==="boolean"){n._notifyTileAboutVisibility(d,r.visibility)}}return c};var T=function(){const e=new jQuery.Deferred;l.createComponent({loadCoreExt:f,loadDefaultDependencies:false,componentData:g,url:h.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:h,ui5ComponentName:h.name},{},[],y.Visualization).then(t=>{const i=m(t);e.resolve(i)}).catch(t=>{e.reject(t)});return e.promise()};if(f){s.once("CoreResourcesComplementLoaded").do(function(){T().then(function(e){v.resolve(e)}).fail(function(e){v.reject(e)})})}else{T().then(function(e){v.resolve(e)}).fail(function(e){v.reject(e)})}}.bind(this)).catch(function(e){v.reject(e)});return v.promise()};S.prototype._createTileComponentProperties=function(e,t){var i={};if(!t||v(t)){if(e.properties.indicatorDataSource&&e.properties.indicatorDataSource.path){i.name=I}else{i.name=b}}else{i=t.componentProperties||{};i.name=t.componentName}return i};S.prototype.getTileView=function(e){var t=this;return new jQuery.Deferred(function(i){return t._getTileView(e,false).then(function(e){i.resolve(e)},function(t){var r="Tile with ID '"+e.id+"' could not be initialized"+(t?":\n"+t:".");T.error(r,null,e.tileType);i.reject(r)})}).promise()};S.prototype._getTileView=function(e){var t;var i=new jQuery.Deferred;if(typeof e!=="object"||!e.id){t="Invalid input parameter passed to _getTileView: "+e;T.error(t);return i.reject(t).promise()}var r=this._mResolvedTiles[e.id];if(!r){t="No resolved tile found for tile ID: "+e.id;T.error(t);return i.reject(t).promise()}return this._getTileUiComponentContainer(e,r,false)};S.prototype._createTileComponentData=function(e,t,i){var r=t?this.getCatalogTileTitle(e):this.getTileTitle(e);var o=t?this.getCatalogTilePreviewSubtitle(e):this.getTileSubtitle(e);var n=t?this.getCatalogTilePreviewIcon(e):this.getTileIcon(e);var a=t?this.getCatalogTilePreviewInfo(e):this.getTileInfo(e);var s=t?this.getCatalogTileTargetURL(e):this.getTileTarget(e);var l=this.getTileIndicatorDataSource(e);var u=e.numberUnit||i.tileResolutionResult&&i.tileResolutionResult.numberUnit;var p={properties:{},startupParameters:{}};if(i.tileResolutionResult&&i.tileResolutionResult.isCustomTile===true&&i.tileResolutionResult.startupParameters){p.startupParameters=i.tileResolutionResult.startupParameters}if(r){p.properties.title=r}if(a){p.properties.info=a}if(o){p.properties.subtitle=o}if(n){p.properties.icon=n}if(s){p.properties.targetURL=s}if(u){p.properties.numberUnit=u}if(l.indicatorDataSource){p.properties.indicatorDataSource=l.indicatorDataSource;if(l.dataSource){p.properties.dataSource=l.dataSource}}if(i.tileResolutionResult){p.properties.navigationMode=i.tileResolutionResult.navigationMode;p.properties.contentProviderId=i.tileResolutionResult.contentProviderId||""}return p};S.prototype._enhanceTileComponentData=function(e,t){var i=Promise.resolve();var r=this.getTileContentProviderId(e);if(r){i=R.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getSystemContext(r)}).then(function(e){t.properties.indicatorDataSource.path=e.getFullyQualifiedXhrUrl(t.properties.indicatorDataSource.path)}).catch(function(){T.error("System Context not available")})}return i.then(function(){return t})};S.prototype._isGroupTile=function(t){return e.isGroupTile(t)};S.prototype._isCatalogTile=function(e){return!!(e&&e.isCatalogTile)};S.prototype._isFailedGroupTile=function(t){return!!(t&&this._mFailedResolvedTiles&&this._mFailedResolvedTiles[e.getTileId(t)])};S.prototype.getCatalogTileId=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return undefined}if(e.isBookmark&&g.get("target.url",e)){return e.target.url}return e.vizId||e.target&&e.target.url}if(this._isCatalogTile(e)){return e.id}return undefined};S.prototype.getCatalogTilePreviewTitle=function(e){if(this._isGroupTile(e)){return this.getTileTitle(e)}return e.tileResolutionResult&&e.tileResolutionResult.title||""};S.prototype.getCatalogTileTargetURL=function(e){if(!e){throw new Error("The given tile is falsy")}if(this._isCatalogTile(e)){if(e.tileResolutionResult&&e.tileResolutionResult.isCustomTile){if(!e.tileResolutionResult.targetOutbound){return""}return this._toHashFromOutbound(e.tileResolutionResult.targetOutbound)}return e.tileIntent||""}return this.getTileTarget(e)};S.prototype.isGroupFeatured=function(e){return!!e.isFeatured};S.prototype._getMember=function(e,t){return p.getMember(e,t)};S.prototype.getCdmVersionsSupported=function(){return{min:new c("3.0.0"),max:new c("3.1.0")}};S.prototype.isSiteSupported=function(e){if(!e._version||new c(e._version).compareTo(this.getCdmVersionsSupported().min)<0||new c(e._version).compareTo(this.getCdmVersionsSupported().max)>0){T.fatal("Invalid CDM site version: Only version 3.0.0 is supported");return false}return true};S.prototype._isCustomTileComponent=function(e){return!(e===b||e===I)};return S});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/FlpLaunchPageAdapter", ["sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/_LaunchPage/modifyHome","sap/ushell/adapters/cdm/v3/_LaunchPage/readCatalogs","sap/m/library","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/utils/UrlParsing","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/components/tiles/utils","sap/ushell/adapters/cdm/v3/AdapterBase","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/navigationMode","sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/Log","sap/ushell/EventHub","sap/ushell/Container"],function(e,t,i,r,n,o,a,s,l,u,f,c,d,p,v,jQuery,h,g,m,T,b,R){"use strict";var y=r.GenericTileMode;var S="sap.ushell.components.tiles.cdm.applauncher";var C="sap.ushell.components.tiles.cdm.applauncherdynamic";function _(r,_,k){u.call(this,r,_,k);this.oCDMServicePromise=R.getServiceAsync("CommonDataModel");Promise.all([R.getServiceAsync("URLParsing"),this.oCDMServicePromise]).then(function(e){this.oURLParsingService=e[0];this.oCDMService=e[1]}.bind(this));this._getTileFromHashInContextOfSite=function(e,t,i){var r=new jQuery.Deferred;var n=t[i];if(!n){n=e(i);t[i]=n}n.done(function(e){var t={tileIntent:i,tileResolutionResult:e};r.resolve(t)}).fail(function(e){r.reject("Hash '"+i+"' could not be resolved to a tile. "+e)});return r.promise()};this._getTileFromHash=function(e){var t=new jQuery.Deferred;R.getServiceAsync("ClientSideTargetResolution").then(function(i){function r(...e){const t=new jQuery.Deferred;i.resolveTileIntent(...e).then(e=>{t.resolve(e)}).catch(e=>{t.reject(e)});return t.promise()}this._getTileFromHashInContextOfSite(r,this._mCatalogTilePromises,e).done(t.resolve).fail(t.reject)}.bind(this));return t.promise()};this._getTileForUrl=function(e){var t={componentName:e.indicatorDataSource?C:S};return{tileIntent:"#",tileResolutionResult:{tileComponentLoadInfo:t,isCustomTile:false}}};this._prepareTileHash=function(e){var t={};if(this._isCatalogTile(e)){return e.tileIntent}if(this._isGroupTile(e)&&e.target){var i=e.target.parameters||[];i.forEach(function(e){if(e.name&&e.value){t[e.name]=[e.value]}});var r={target:{semanticObject:e.target.semanticObject,action:e.target.action},params:t,appSpecificRoute:e.target.appSpecificRoute};return"#"+a.constructShellHash(r)}return undefined};this.getDefaultGroup=function(){var e=new jQuery.Deferred;var t;var i=this;if(!this._oDefaultGroup){t=this._ensureLoaded()}if(t){t.done(function(){e.resolve(i._oDefaultGroup)}).fail(function(t){e.reject("Failed to access default group. "+t)})}else{e.resolve(i._oDefaultGroup)}return e.promise()};this.addGroup=function(i){var r=new jQuery.Deferred;var o;var a=this;if(!this._isValidTitle(i)){return r.reject("No valid group title").promise()}var s="Failed to add the group with title '"+i+"' to the homepage. ";this.oCDMService.getSite().done(function(s){o=n.generateUniqueId(e.getGroupIdsFromSite(s));t.addGroupToSite(s,t.createEmptyGroup(o,i));a.oCDMService.save().done(function(){delete a._ensureLoadedDeferred;r.resolve(s.groups[o],o)}).fail(function(e){r.reject(e)})}).fail(function(e){r.reject(s+e)});return r.promise()};this.setGroupTitle=function(i,r){var n=this;var o=new jQuery.Deferred;if(typeof i!=="object"||!e.getGroupId(i)){return o.reject("Unexpected group value").promise()}if(!n._isValidTitle(r)){return o.reject("Unexpected oGroup title value").promise()}var a="Failed to set new title for group with id '"+e.getGroupId(i)+"'. ";var s=e.getGroupTitle(i);this.oCDMService.getSite().done(function(e){if(i){t.setGroupTitle(i,r)}n.oCDMService.save().done(function(){o.resolve()}).fail(function(e){T.error(e);o.reject(s)})}).fail(function(e){o.reject(s,a+e)});return o.promise()};this.hideGroups=function(i){var r=new jQuery.Deferred;var n=this.oCDMService;if(i&&Array.isArray(i)){var o="Failed to hide group. ";n.getSite().done(function(o){e.getGroupsArrayFromSite(o).forEach(function(r){var n=Array.prototype.indexOf.call(i,e.getGroupId(r))===-1;t.setGroupVisibility(r,n)});n.save().done(function(){r.resolve()}).fail(function(e){r.reject("Hiding of groups did not work as expected - "+e)})}).fail(function(e){r.reject(o+e)})}else{r.reject("Invalid input parameter aHiddenGroupIds. Please pass a valid input parameter.")}return r.promise()};this.moveGroup=function(i,r){var o=new jQuery.Deferred;var a=this.oCDMService;if(!i||!e.getGroupId(i)||r<0){return o.reject("Unable to move groups - invalid parameters").promise()}var s="Failed to move group with id '"+i.identification.id+"'. ";a.getSite().done(function(s){var l=e.getGroupIdsFromSite(s);var u=e.getGroupId(i);if(!l){return o.reject("groupsOrder not found - abort operation of adding a group.")}if(l.indexOf(u)===r){return o.resolve()}var f=n.moveElementInsideOfArray(l,l.indexOf(u),r);if(!f){return o.reject("invalid move group operation - abort.")}t.setGroupsOrder(s,f);a.save().done(function(){o.resolve()}).fail(function(e){o.reject(e)});return undefined}).fail(function(e){o.reject(s+e)});return o.promise()};this.removeGroup=function(i){var r=new jQuery.Deferred;var n=this.oCDMService;if(typeof i!=="object"){return r.reject("invalid group parameter").promise()}var o=e.getGroupId(i);if(!o){return r.reject("group without id given").promise()}var a="Failed to remove group with id '"+o+"'. ";n.getSite().done(function(e){t.removeGroupFromSite(e,i);n.save().done(function(){r.resolve()}).fail(function(e){r.reject(e)})}).fail(function(e){r.reject(a+e)});return r.promise()};this.resetGroup=function(i){var r=new jQuery.Deferred;var n=this.oCDMService;var o=[];var a=this;if(typeof i==="object"&&e.getGroupId(i)){var s=e.getGroupId(i);var l="Failed to reset group with id '"+s+"'. ";n.getSite().done(function(l){h(o,e.getGroupsArrayFromSite(l));if(a.isGroupRemovable(i)===false){n.getGroupFromOriginalSite(s).done(function(i){if(typeof l==="object"&&e.getGroupFromSite(l,s)){t.overwriteGroup(l,i,s)}n.save().done(function(){r.resolve(i)}).fail(function(e){r.reject("Group could not be reset - "+e,o)})}).fail(function(e){r.reject("Group could not be reset - "+e,o)})}else{r.reject("Group could not be reset as it was created by the user",o)}}).fail(function(e){r.reject(l+e,[])})}return r.promise()};this.getLinkTiles=function(t){return e.getGroupLinks(t)};this.isLinkPersonalizationSupported=function(){return true};this._notifyTileAboutRefresh=function(e){if(typeof e.tileRefresh==="function"){e.tileRefresh()}};this.refreshTile=function(e){var t=this._mResolvedTiles[e.id];if(t){if(t.tileComponent){this._notifyTileAboutRefresh(t.tileComponent)}}};this._notifyTileAboutVisibility=function(e,t,i){if(typeof e.tileSetVisible==="function"&&i!==t){e.tileSetVisible(t)}};this.getTileView=function(e){var t=this;return new jQuery.Deferred(function(i){return t._getTileView(e,false).then(function(e){i.resolve(e)},function(t){var r="Tile with ID '"+e.id+"' could not be initialized"+(t?":\n"+t:".");T.error(r,null,e.tileType);i.reject(r)})}).promise()};this._getCatalogTileViewControl=function(e){var t=new jQuery.Deferred;if(typeof e!=="object"){var i="Invalid input parameter passed to _getCatalogTileView: "+e;T.error(i);return t.reject(i).promise()}return this._getTileUiComponentContainer(e,e,true)};this._createLinkInstance=function(e,t,i,r,n){var a;var s=this.getTileSubtitle(e);var l=r;if(t===true){a=this.getCatalogTileTitle(e)}else{a=this.getTileTitle(e)}var u=new l({mode:y.LineMode,subheader:s,header:a,url:o.getLeanURL(this.getTileTarget(e)),press:function(t){this._genericTilePressHandler(e,t)}.bind(this)});if(i){var f=n.i18n.getText(i+"NavigationMode");u.setAriaLabel(f+" "+a+" "+s)}this._mResolvedTiles[e.id].linkTileControl=u;return u};this._genericTilePressHandler=function(e,t){var i;if(t.getSource().getScope&&t.getSource().getScope()==="Display"){i=this.getTileTarget(e);if(i){b.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:i}});if(i[0]==="#"){hasher.setHash(i)}else{o.openURL(i,"_blank")}}}};this.addTile=function(e,t){var i=new jQuery.Deferred;var r=this.oCDMService;if(!t){t=this._oDefaultGroup}var n=D();n.vizId=e.vizId;this._mResolvedTiles[n.id]={tileIntent:e.tileIntent,tileResolutionResult:e.tileResolutionResult,isLink:false};r.getSite().done(function(e){e.groups[t.identification.id].payload.tiles.push(n);r.save().done(function(){i.resolve(n)}).fail(function(e){i.reject(e)})}).fail(function(e){var r="Failed to add tile with id '"+n.id+"' to group with id '"+t.identification.id+"'. ";i.reject(r+e)});return i.promise()};this.removeTile=function(e,t,i){var r=this.oCDMService;var n=new jQuery.Deferred;var o=this;if(!e||typeof e!=="object"||!e.identification||!e.identification.id||!t||typeof t!=="object"||!t.id){return n.reject({},"Failed to remove tile. No valid input parameters passed to removeTile method.").promise()}var a="Failed to remove tile with id '"+t.id+"' from group with id '"+e.identification.id+"'. ";r.getSite().done(function(s){var l;i=+i;try{l=s.groups[e.identification.id].payload}catch(t){n.reject(s.groups[e.identification.id],a)}var u=o.getTileType(t)===o.TileType.Link?"links":"tiles";if(o.getTileType(t)===o.TileType.Link){i-=l.tiles.length}if(i>=0){l[u].splice(i,1)}else{l[u]=l[u].filter(function(e){return e.id!==t.id})}r.save().done(function(){n.resolve()}).fail(function(t){T.error(t);n.reject(s.groups[e.identification.id],t)})}).fail(function(e){n.reject({},a+e)});return n.promise()};this.moveTile=function(e,t,i,r,n,o){var a=new jQuery.Deferred;var s=this.oCDMService;var l=this;if(!e||g(e)||t===undefined||t<0||i===undefined||i<0||!r||!r.identification||!r.identification.id||!n||!n.identification||!n.identification.id){return a.reject("Invalid input parameters").promise()}var u="Failed to move tile with id '"+e.id+"'. ";s.getSite().done(function(f){var c=l.getTileType(e)===l.TileType.Link?"links":"tiles";if(!o){o=l._mResolvedTiles[e.id].isLink?"link":"tile"}var d=o==="link"?"links":"tiles";if(c!==d&&l._mResolvedTiles[e.id]){l._mResolvedTiles[e.id].isLink=o==="link"}if(d==="links"){i-=f.groups[n.identification.id].payload.tiles.length}if(c==="links"){t-=f.groups[r.identification.id].payload.tiles.length}if(r.identification.id===n.identification.id){if(t!==i||c!==d){var p=f.groups[n.identification.id].payload;p[c].splice(t,1);p[d].splice(i,0,e)}else{return a.resolve(e).promise()}}else{f.groups[r.identification.id].payload[c].splice(t,1);f.groups[n.identification.id].payload[d].splice(i,0,e)}s.save().done(function(){a.resolve(e)}).fail(function(e){T.error(u+e);a.reject(u+e)});return undefined}).fail(function(e){T.error(u+e);a.reject(u+e)});return a.promise()};this._compareCatalogs=function(e,t){return(e.identification.title||"").toLowerCase()>(t.identification.title||"").toLowerCase()?1:-1};this.getCatalogs=function(){var e=this;var t=new jQuery.Deferred;var i=[];function r(e,t,i,r){var n=e.catalogs[t];i.push(n);r.notify(n)}R.getServiceAsync("CommonDataModel").then(function(n){n.getSite().done(function(n){Object.keys(n.catalogs).forEach(function(e){r(n,e,i,t)});t.resolve(i.sort(e._compareCatalogs))})});return t.promise()};this._isStartableInbound=function(e){if(!e.semanticObject||!e.action){return false}var t=["Shell-plugin","Shell-bootConfig"];if(t.indexOf(e.semanticObject+"-"+e.action)>-1){return false}return true};this._isStartableVisualization=function(e,t){var i=m.get("signature.parameters",t);if(!i){return true}var r=m.get("parameters",f.getTarget(e));return Object.keys(i).every(function(e){var t=i[e];if(e==="sap-external-url"){return true}if(!t.filter||t.filter.format!=="plain"){return true}var n=t.filter.value;var o=m.get([e,"value","value"],r);if(n!==o){return false}return true})};this._isHiddenInbound=function(e){return!!e.hideLauncher};this._toHashFromInbound=function(e){var t=s.toHashFromInbound(e);if(!t){return undefined}return"#"+t};this._getExternalUrlFromInbound=function(e){return m.get("signature.parameters.sap-external-url.launcherValue.value",e)||null};this._toHashFromOutbound=function(e){var t=s.toHashFromOutbound(e);if(!t){return undefined}return"#"+t};this.getCatalogTiles=function(e){var t=this;var i=new jQuery.Deferred;if(typeof e!=="object"||e===null){return i.reject("Invalid input parameter '"+e+"' passed to getCatalogTiles.").promise()}this.oCDMServicePromise.then(function(r){r.getSite().done(function(r){I.call(t,e,r).done(i.resolve).fail(i.reject)}).fail(function(e){i.reject("Failed to get site: "+e)})});return i.promise()};function I(t,i){var r=this;var o=new jQuery.Deferred;setTimeout(function(){var a=(t.payload&&t.payload.viz||[]).reduce(function(o,a){var l;var u;var v;var h;var g;var m;var T;var b;var R;var y;var S;var C;var _;var k;var I;var j;var D;var w;if(!a){return o}u=f.get(i,a);if(!u){return o}v=f.getTypeId(u);h=f.getType(i,v);l=f.getAppId(u);if(l){g=f.getAppDescriptor(i,l);if(!g){return o}m=e.getInbound(g,f.getTarget(u).inboundId);if(!m){return o}if(!r._isStartableInbound(m.inbound)||!r._isStartableVisualization(u,m.inbound)||r._isHiddenInbound(m.inbound)){return o}b=s.mapOne(m.key,m.inbound,g,u,h,i);if(!b||!b.tileResolutionResult){return o}k=b.resolutionResult.applicationType;I=b.resolutionResult.additionalInformation;D=p.last("/core/navigation/enableInPlaceForClassicUIs");j=D?D[k]:false;R=d.computeNavigationModeForHomepageTiles(k,I,j);y=f.getOutbound(u,m.inbound);T=r._toHashFromOutbound(y);w=c.getTechnicalAttributes(g)}else{var G=f.getConfig(u);if(G===undefined){return o}b=s.mapOne(undefined,undefined,undefined,u,h,i);if(n.getMember(G,"sap|flp.target.type")==="URL"){_=n.getMember(G,"sap|flp.target.url")}}S=b.tileResolutionResult;S.navigationMode=R;S.technicalAttributes=w;if(!r._isFormFactorSupported(S)){return o}if(t.contentProviderId){_=r._getMember(g,"sap|app.crossNavigation.inbounds.Shell-launchURL.signature.parameters.sap-external-url.launcherValue.value")}C={id:a,vizId:a,tileIntent:_||T,tileResolutionResult:S,isCatalogTile:true};if(t.contentProviderId&&_){C.contentProviderId=t.contentProviderId;C.externalUrl=_}o.push(C);return o},[]);o.resolve(a)},0);return o.promise()}this.getCatalogError=function(e){if(e.error){return e.error}return undefined};this.getCatalogId=function(e){return i.getId(e)};this.getCatalogTitle=function(e){return i.getTitle(e)};this._isFailedCatalogTile=function(t){return!!(t&&this._mFailedResolvedCatalogTiles&&this._mFailedResolvedCatalogTiles[e.getTileId(t)])};this.getCatalogTileTitle=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return""}return this._mResolvedTiles[e.id].tileResolutionResult.title}if(this._isCatalogTile(e)){if(this._isFailedCatalogTile(e)){return undefined}return e.tileResolutionResult.title}return undefined};this.getCatalogTileContentProviderId=function(e){return e.tileResolutionResult.contentProviderId||""};this.getCatalogTileSize=function(e){return e.tileResolutionResult.size||"1x1"};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewControl(e)};this.getCatalogTilePreviewSubtitle=function(e){if(this._isGroupTile(e)){return this.getTileSubtitle(e)}return e.tileResolutionResult&&e.tileResolutionResult.subTitle||""};this.getCatalogTilePreviewIcon=function(e){if(this._isGroupTile(e)){return this.getTileIcon(e)}return e.tileResolutionResult&&e.tileResolutionResult.icon||""};this.getCatalogTilePreviewInfo=function(e){if(this._isGroupTile(e)){return this.getTileInfo(e)}return e.tileResolutionResult&&e.tileResolutionResult.info||""};this.getCatalogTilePreviewIndicatorDataSource=function(e){return e.tileResolutionResult&&e.tileResolutionResult.indicatorDataSource};this.getCatalogTileKeywords=function(e){var t=[];var i=e;if(!i){T.error("Could not find the Tile","sap.ushell.adapters.cdm.LaunchPageAdapter");return t}if(this._mResolvedTiles&&this._mResolvedTiles[e.id]){i=this._mResolvedTiles[e.id]}if(i&&i.tileResolutionResult&&Array.isArray(i.tileResolutionResult.keywords)){Array.prototype.push.apply(t,i.tileResolutionResult.keywords)}if(i&&i.tileResolutionResult&&i.tileResolutionResult.title){t.push(i.tileResolutionResult.title)}if(i&&i.tileResolutionResult&&i.tileResolutionResult.subTitle){t.push(i.tileResolutionResult.subTitle)}return t};this.getCatalogTileTechnicalAttributes=function(e){var t=[];var i=e;if(!i){T.error("Could not find the Tile","sap.ushell.adapters.cdm.LaunchPageAdapter");return[]}if(this._mResolvedTiles&&this._mResolvedTiles[e.id]){i=this._mResolvedTiles[e.id]}if(i&&i.tileResolutionResult&&Array.isArray(i.tileResolutionResult.technicalAttributes)){Array.prototype.push.apply(t,i.tileResolutionResult.technicalAttributes)}return t};this._visitBookmarks=function(e,t,i,r){var n;var o=a.parseShellHash(e);if(o){n=L(o)}else{n=A(e)}return this.oCDMService.getSite().then(function(e){var o=e.groups;var a=Object.keys(o).filter(function(e){return!o[e].payload.locked}).map(function(e){return o[e].payload.tiles.filter(function(e){return e.isBookmark&&e.vizType===i&&(e.contentProvider||"")===(r||"")&&G(n,e.target)})}).reduce(function(e,t){Array.prototype.push.apply(e,t);return e},[]);if(!t){return a.length}return jQuery.when(a.map(t)).then(function(){return a.length})})};this.addBookmark=function(e,t,i){var r=this;return new jQuery.Deferred(function(n){var o=r.oCDMService;jQuery.when(t||r.getDefaultGroup(),o.getSite()).done(function(t,s){var l;var u=a.parseShellHash(e.url);var f;var c=false;if(!u){l=A(e.url);c=true}else{l=L(u)}var d=j(e,l,i);if(c){f=new jQuery.Deferred;f.resolve(r._getTileForUrl(d))}else{f=r._getTileFromHash(e.url)}f.done(function(e){e.isLink=false;r._mResolvedTiles[d.id]=e;s.groups[t.identification.id].payload.tiles.push(d);o.save().done(function(){n.resolve(d)}).fail(function(e){n.reject(e)})}).fail(function(e){n.reject("Bookmark creation failed because: "+e)})}).fail(function(e){n.reject(e)})}).promise()};this.addCustomBookmark=function(e,t,i){var r=new jQuery.Deferred;Promise.all([R.getServiceAsync("URLParsing"),R.getServiceAsync("CommonDataModel")]).then(function(o){var a=o[0];var s=o[1];jQuery.when(t||this.getDefaultGroup(),s.getSite()).done(function(t,o){var l=a.parseShellHash(e.url);var u=l===undefined;var f=u?A(e.url):L(l);var c={id:n.generateUniqueId([]),vizType:e.vizType,title:e.title,subTitle:e.subtitle,icon:e.icon,info:e.info,numberUnit:e.numberUnit,target:f,indicatorDataSource:{path:e.serviceUrl,refresh:e.serviceRefreshInterval},vizConfig:e.vizConfig,isBookmark:true};if(i){c.contentProvider=i}this._resolveTileByVizId(c,o).done(function(e){e.isLink=false;this._mResolvedTiles[c.id]=e;o.groups[t.identification.id].payload.tiles.push(c);s.save().done(function(){r.resolve(c)}).fail(r.reject)}.bind(this)).fail(function(e){r.reject("Bookmark creation failed because: "+e)})}.bind(this)).fail(r.reject)}.bind(this));return r.promise()};this.countBookmarks=function(e,t){return this._visitBookmarks(e,undefined,undefined,t)};this.countCustomBookmarks=function(e){if(!e.vizType){return Promise.reject("countCustomBookmarks: Required parameter is missing: oIdentifier.vizType")}return new Promise(function(t,i){this._visitBookmarks(e.url,undefined,e.vizType,e.contentProviderId).done(t).fail(i)}.bind(this))};this.updateBookmarks=function(e,t,i,r){var n=this.oCDMService;var o=this._mResolvedTiles;function s(i){return new jQuery.Deferred(function(r){var n;var s=false;var l={};if(t.url||t.url===""){var u=a.parseShellHash(t.url);if(!u){n=A(t.url)}else{n=L(u)}}if(i.icon!==t.icon){l.icon=t.icon;s=true}if(i.title!==t.title){l.title=t.title;s=true}if(i.subTitle!==t.subtitle){l.subtitle=t.subtitle;s=true}if(t.url&&e!==t.url){l.targetURL=t.url;s=true}if(i.info!==t.info){l.info=t.info;s=true}w(i,t,n);if(s&&o[i.id]){var f=o[i.id].tileComponent;if(f){f.tileSetVisualProperties(l)}}r.resolve(i)}).promise()}return this._visitBookmarks(e,s,i,r).then(function(e){return n.save().then(function(){return e})})};this.updateCustomBookmarks=function(e,t){if(!e.vizType){return Promise.reject("updateCustomBookmarks: Required parameter is missing: oIdentifier.vizType")}if(t.title===""){return Promise.reject("updateCustomBookmarks: The bookmark title cannot be an empty string")}if(t.url===""){return Promise.reject("updateCustomBookmarks: The bookmark url cannot be an empty string")}return new Promise(function(i,r){this.updateBookmarks(e.url,t,e.vizType,e.contentProviderId).done(i).fail(r)}.bind(this))};this.deleteBookmarks=function(e,t,i){var r=this.oCDMService;var n=a.parseShellHash(e);var o;if(n){o=L(n)}else{o=A(e)}return r.getSite().then(function(e){var n=e.groups;var a=Object.keys(n).map(function(e){var r=n[e].payload;var a=0;r.tiles=r.tiles.filter(function(e){if(e.isBookmark&&e.vizType===t&&(e.contentProvider||"")===(i||"")&&G(o,e.target)){++a;return false}return true});return a}).reduce(function(e,t){e+=t;return e},0);return r.save().then(function(){return a})})};this.deleteCustomBookmarks=function(e){if(!e.vizType){return Promise.reject("deleteCustomBookmarks: Required parameter is missing: oIdentifier.vizType")}return new Promise(function(t,i){this.deleteBookmarks(e.url,e.vizType,e.contentProviderId).done(t).fail(i)}.bind(this))};this.onCatalogTileAdded=function(e){};this._onTileSettingsSave=function(e,t){var i=new jQuery.Deferred;if(!e||!e.id||!t){return i.reject().promise()}var r=t.oTitleInput.getValue();var n=t.oSubTitleInput.getValue();var o=t.oInfoInput.getValue();var a=this.getTileTitle(e);var s=this.getTileInfo(e);var l=this.getTileSubtitle(e);if(a===r&&l===n&&s===o){return i.resolve().promise()}var u={};if(a!==r){u.title=r;e.title=r}if(l!==n){u.subtitle=n;e.subTitle=n}if(s!==o){u.info=o;e.info=o}if(this._mResolvedTiles[e.id].tileComponent){this._mResolvedTiles[e.id].tileComponent.tileSetVisualProperties(u)}else if(this._mResolvedTiles[e.id].linkTileControl){if(u.title){this._mResolvedTiles[e.id].linkTileControl.setHeader(u.title)}if(u.subtitle){this._mResolvedTiles[e.id].linkTileControl.setSubheader(u.subtitle)}if(u.title||u.subtitle){this._mResolvedTiles[e.id].linkTileControl.invalidate()}}R.getServiceAsync("CommonDataModel").then(function(e){e.save().fail(function(e){T.error(e);i.reject("Could not save personalization changes: "+e)}).done(function(){i.resolve()})});return i.promise()};this.getTileActions=function(e){var t=[];if(this._isGroupTile(e)&&!this._isFailedGroupTile(e)){var i=new v({config:{display_title_text:this.getTileTitle(e),display_subtitle_text:this.getTileSubtitle(e),display_info_text:this.getTileInfo(e)}});var r=l.getTileSettingsAction(i,this._onTileSettingsSave.bind(this,e),this.getTileType(e));t.push(r)}return t};function j(e,t,i){var r=D(e,t);r.isBookmark=true;if(i){r.contentProvider=i}return r}function D(e,t){var i={id:n.generateUniqueId([])};w(i,e,t);return i}function w(e,t,i){t=h({},t);if(i){e.target=i}if(t.title||t.title===""){e.title=t.title}if(t.icon||t.icon===""){e.icon=t.icon}if(t.subtitle||t.subtitle===""){e.subTitle=t.subtitle}if(t.info||t.info===""){e.info=t.info}if(t.numberUnit||t.numberUnit===""){e.numberUnit=t.numberUnit}if(t.dataSource){e.dataSource={type:t.dataSource.type,settings:{odataVersion:m.get(["dataSource","settings","odataVersion"],t)}}}if(t.serviceUrl){e.indicatorDataSource={path:t.serviceUrl}}if(e.indicatorDataSource&&(t.serviceRefreshInterval||t.serviceRefreshInterval===0)){e.indicatorDataSource.refresh=t.serviceRefreshInterval}if(t.vizConfig){e.vizConfig=t.vizConfig}}function G(e,t){if(e&&t){if(e.url){return e.url===t.url}return e.semanticObject===t.semanticObject&&e.action===t.action&&P(e.parameters,t.parameters)&&e.appSpecificRoute===t.appSpecificRoute}return e===t}function P(e,t){e=e||[];t=t||[];if(e.length===t.length){var i=F(e);var r=F(t);return i===r}return false}function F(e){return e.map(function(e){return e.name+e.value}).sort().join()}function A(e){return{url:e}}function L(e){var t={semanticObject:e.semanticObject,action:e.action,parameters:M(e.params)};if(e.appSpecificRoute){t.appSpecificRoute=e.appSpecificRoute}return t}function M(e){return Object.keys(e).map(function(t){var i=e[t]&&e[t][0];return{name:t,value:i||""}})}this._getSiteData=function(){var e=new Promise(function(e,t){R.getServiceAsync("CommonDataModel").then(function(i){i.getSite().done(e).fail(t)})});return e};this._addDefaultGroup=function(i,r){var o=e.getDefaultGroup(i);if(!o){o=t.createDefaultGroup(n.generateUniqueId(e.getGroupIdsFromSite(r)));r=t.addGroupToSite(r,o,0);i=e.getGroupsArrayFromSite(r)}this._oDefaultGroup=o;return i}}_.prototype=u.prototype;return _});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/LaunchPageAdapter", ["sap/ushell/adapters/cdm/v3/FlpLaunchPageAdapter"],function(e){"use strict";return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications", ["sap/base/util/ObjectPath"],function(t){"use strict";var n={};n.getId=function(n){return t.get(["sap.app","id"],n)};n.getTitle=function(n){return t.get(["sap.app","title"],n)};n.getSubTitle=function(n){return t.get(["sap.app","subTitle"],n)};n.getIcon=function(n){return t.get(["sap.ui","icons","icon"],n)};n.getInfo=function(n){return t.get(["sap.app","info"],n)};n.getKeywords=function(n){return t.get(["sap.app","tags","keywords"],n)};n.getContentProviderId=function(n){return t.get(["sap.app","contentProviderId"],n)};n.getInbounds=function(n){return t.get(["sap.app","crossNavigation","inbounds"],n)};n.getInbound=function(n,e){return t.get(["sap.app","crossNavigation","inbounds",e],n)};n.getInboundTarget=function(n,e,i){var r=t.get([e],n)||{};var a=this.getInbound(r,i);if(!r||!a){return}return{semanticObject:a.semanticObject,action:a.action}};n.getTechnicalAttributes=function(n){return t.get(["sap.app","tags","technicalAttributes"],n)};return n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readCatalogs", [],function(){"use strict";function i(i){return i.identification.id}function t(i){return i.identification.title}return{getId:i,getTitle:t}},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readHome", ["sap/ushell/utils/type","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications"],function(i,t){"use strict";var e={};e.getGroupsArrayFromSite=function(i){var t=[];i.site.payload.groupsOrder.forEach(function(e,n){var r=i.groups[e];if(r){r.payload=r.payload||{};t.push(r)}});return t};e.getGroupsMapFromSite=function(i){return i.groups};e.getGroupIdsFromSite=function(i){return i.site.payload.groupsOrder};e.getGroupFromSite=function(i,t){return i.groups[t]};e.getDefaultGroup=function(i){var t=i.filter(function(i){return i.payload.hasOwnProperty("isDefaultGroup")});if(t.length>0){return t[0]}};e.getGroupId=function(i){return i.identification&&i.identification.id};e.getGroupTitle=function(i){return i.identification.title};e.isGroupPreset=function(i){if(!i.payload.hasOwnProperty("isPreset")){return true}return!!i.payload.isPreset};e.isGroupLocked=function(i){return!!i.payload.locked};e.isGroupVisible=function(i){return!!(i.identification.isVisible===undefined||i.identification.isVisible===true)};e.getGroupTiles=function(t){if(t.payload.tiles&&i.isArray(t.payload.tiles)&&t.payload.tiles.length>0){return t.payload.tiles}return[]};e.getGroupLinks=function(t){if(t.payload.links&&i.isArray(t.payload.links)&&t.payload.links.length>0){return t.payload.links}return[]};e.getTileId=function(i){return i.id};e.getTileVizId=function(i){return i.vizId};e.getTileTitle=function(i,t){var e;if(t&&t.isBookmark){return t.title}e=i[t.id];if(e){return t.title||e.tileResolutionResult.title}};e.getContentProviderId=function(i){return i.contentProvider||undefined};e.getTileSubtitle=function(i,t){var e;if(t.isBookmark){return t.subTitle}e=i[t.id];if(e){return t.subTitle||e.tileResolutionResult.subTitle}};e.getTileInfo=function(i,t){var e;if(t.isBookmark){return t.info}e=i[t.id];if(e){return t.info||e.tileResolutionResult.info}};e.getTileIcon=function(i,t){var e;if(t.isBookmark){return t.icon}e=i[t.id];if(e){return t.icon||e.tileResolutionResult.icon}};e.getTileIndicatorDataSource=function(i,t){var e;if(t.isBookmark){return t.icon}e=i[t.id];if(e){return t.icon||e.tileResolutionResult.icon}};e.getTileSize=function(i,t){var e=i[t.id];if(e&&e.tileResolutionResult&&e.tileResolutionResult.size){return e.tileResolutionResult.size}};e.isLink=function(i,t){var e=i[t.id];if(e){return!!e.isLink}return false};e.isCard=function(i,t){var e=i[t.id];if(e){return!!e.tileResolutionResult.isCard}return false};e.isGroupTile=function(i){return!!(i&&i.id&&!i.isCatalogTile)};e.supportsFormFactor=function(i,t){return i.deviceTypes&&i.deviceTypes[t]};e.getInbound=function(i,e){var n=t.getInbound(i,e);return n&&{key:e,inbound:n}};return e},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils", ["sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/Config","sap/ushell/Container","sap/base/util/deepClone","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/ushell/library"],function(a,t,e,i,r,n,o,s,u,c,d,p){"use strict";var l={};var v=p.DisplayFormat;var g={};l.getVizData=async function(r,n,s){if(n.isBookmark&&n.url){n=o(n);n.subTitle=n.subtitle;n.target=i.toTargetFromHash(n.url)}const u=this.getCdmParts(r,n);const d=u&&u[1]||{};const p=u&&u[3]||{};const l=a.get(r,e.getTileVizId(n))||{};const v={id:e.getTileId(n),vizId:e.getTileVizId(n)||"",vizType:n.vizType||a.getTypeId(l)||"",vizConfig:c({},d,n.vizConfig),title:a.getTitle(u)||"",subtitle:a.getSubTitle(u)||"",icon:a.getIcon(u)||"",keywords:a.getKeywords(u)||[],info:a.getInfo(u)||"",target:n.target||a.getTarget(l)||{},indicatorDataSource:this._getIndicatorDataSource(n,l,s),isBookmark:n.isBookmark||false,contentProviderId:n.contentProviderId||t.getContentProviderId(p)||"",displayFormatHint:n.displayFormatHint,numberUnit:a.getNumberUnit(u),_instantiationData:a.getInstantiationData(l)};v.target=this.harmonizeTarget(v.target);v.targetURL=i.toHashFromVizData(v,r.applications);v.contentProviderLabel=await this.getContentProviderLabel(v.contentProviderId);if(v.indicatorDataSource){if(v.indicatorDataSource.dataSource){v.dataSource=a.getDataSource(u,v.indicatorDataSource.dataSource)}else if(n.isBookmark&&n.dataSource){v.dataSource=n.dataSource}}if(n.isBookmark){this._addBookmarkInstantiationData(v,r)}if(!v._instantiationData||!Object.keys(v._instantiationData)){v._instantiationData={platform:"CDM",vizType:a.getType(r,v.vizType)}}this._evaluateDisplayFormat(v,r);return v};l.getContentProviderLabel=function(a){if(Object.hasOwn(g,a)){return g[a]}g[a]=new Promise(async t=>{try{const e=await n.getServiceAsync("ClientSideTargetResolution");const i=await e.getSystemContext(a);t(i?.label)}catch(e){t(a)}});return g[a]};l._getIndicatorDataSource=function(t,e,i){if(t.indicatorDataSource&&t.indicatorDataSource.path){if(t.contentProviderId&&i){t.indicatorDataSource.path=i.getFullyQualifiedXhrUrl(t.indicatorDataSource.path)}return t.indicatorDataSource}return a.getIndicatorDataSource(e)};l.getVizRef=function(a){var t={id:a.id,vizId:a.vizId,title:a.title,subTitle:a.subtitle,icon:a.icon,keywords:a.keywords,info:a.info,target:a.target,indicatorDataSource:a.indicatorDataSource,dataSource:a.dataSource,contentProviderId:a.contentProviderId,displayFormatHint:a.displayFormatHint,numberUnit:a.numberUnit};if(t.indicatorDataSource&&t.indicatorDataSource.originalPath){t.indicatorDataSource.path=t.indicatorDataSource.originalPath;delete t.indicatorDataSource.originalPath}if(a.isBookmark){t.isBookmark=a.isBookmark;if(a.vizConfig!==undefined&&!d(a.vizConfig)){t.vizType=a.vizType;if(a.cdmVizType){t.vizType=a.cdmVizType}t.vizConfig=a.vizConfig}}return t};l.getCdmParts=function(i,r){var n=a.get(i,e.getTileVizId(r))||{};var o=a.getConfig(n);var s=a.getAppDescriptor(i,a.getAppId(n));var u=t.getInbound(s,a.getInboundId(n));return[r,o,u,s]};l.harmonizeTarget=function(a){var t=a.parameters;var e={};if(!t){return a}if(Array.isArray(t)){t.forEach(function(a){if(e[a.name]){if(!Array.isArray(e[a.name].value.value)){e[a.name].value.value=[e[a.name].value.value]}e[a.name].value.value.push(a.value)}else{e[a.name]={value:{value:a.value,format:"plain"}}}})}else{e=Object.keys(t).reduce((a,e)=>{if(!t[e].value||!t[e].value.hasOwnProperty("value")){t[e]={value:t[e]}}return{...a,[e]:t[e]}},{})}a.parameters=e;return a};l._evaluateDisplayFormat=function(t,e){var i=t.displayFormatHint;var r=a.getType(e,t.vizType);var n=a.getTileSize(r);var o=n==="1x2"?v.StandardWide:v.Standard;var s=[o,v.Compact];t.supportedDisplayFormats=a.getSupportedDisplayFormats(r)||s;var u=a.getDefaultDisplayFormat(r)||o;if(t.supportedDisplayFormats.indexOf(i)===-1){t.displayFormatHint=u}};l._addBookmarkInstantiationData=function(t,e){if(t.vizType){var i=a.getType(e,t.vizType);var r=u.get(["sap.app","type"],i||{});if(i&&r!=="chipVizType"){t._instantiationData={platform:"CDM",vizType:i}}else{var n=a.getChipConfigFromVizReference(t);t._instantiationData={platform:"ABAP",chip:o(n),simplifiedChipFormat:true};t.cdmVizType=t.vizType;t.vizType=n.chipId}}else if(t.indicatorDataSource&&t.indicatorDataSource.path){t.vizType="sap.ushell.DynamicAppLauncher"}else{t.vizType="sap.ushell.StaticAppLauncher"}};l.getBookmarkVizTypeIds=function(t){var e=["sap.ushell.StaticAppLauncher","sap.ushell.DynamicAppLauncher"];var i=t.vizType;if(i&&!e.includes(i)){e.push(i)}var r=a.getChipConfigFromVizReference(t);var n=r&&r.chipId;if(n&&!e.includes(n)){e.push(n)}return e};return l});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations", ["sap/ushell/utils","sap/base/util/ObjectPath","sap/base/util/deepClone"],function(t,e,n){"use strict";var i={};i.getMap=function(t){return t.visualizations};i.get=function(t,n){return e.get(["visualizations",n],t)};i.getTypeMap=function(t){return t.vizTypes};i.getType=function(t,n){return e.get(["vizTypes",n],t)};i.getTypeId=function(t){return e.get("vizType",t||{})};i.isStandardVizType=function(t){return t==="sap.ushell.StaticAppLauncher"||t==="sap.ushell.DynamicAppLauncher"};i.getSupportedDisplayFormats=function(t){return e.get(["sap.flp","vizOptions","displayFormats","supported"],t||{})};i.getDefaultDisplayFormat=function(t){return e.get(["sap.flp","vizOptions","displayFormats","default"],t||{})};i.getTileSize=function(t){return e.get(["sap.flp","tileSize"],t||{})};i.getConfig=function(t){return e.get("vizConfig",t||{})};i.getTarget=function(t){var n=this.getConfig(t);return e.get(["sap.flp","target"],n||{})};i.getAppId=function(t){var n=this.getTarget(t);return e.get("appId",n||{})};i.getInboundId=function(t){var n=this.getTarget(t);return e.get("inboundId",n||{})};i.getOutbound=function(t,e){var n={semanticObject:e.semanticObject,action:e.action,parameters:this.getTarget(t).parameters||{}};n.parameters["sap-ui-app-id-hint"]={value:{format:"plain",value:this.getAppId(t)}};return n};i.startsExternalUrl=function(t){var e=this.getTarget(t);return e&&e.type==="URL"};i.getAppDescriptor=function(t,n){return e.get(["applications",n],t)};i.getKeywords=function(e){var i=n(e,20);i.splice(2,1);i.splice(0,1);return t.getNestedObjectProperty(i,["sap|app.tags.keywords","sap|app.tags.keywords"])};i.getTitle=function(e){return t.getNestedObjectProperty(e,["title","sap|app.title","title","sap|app.title"])};i.getSubTitle=function(e){return t.getNestedObjectProperty(e,["subTitle","sap|app.subTitle","subTitle","sap|app.subTitle"])};i.getIcon=function(e){return t.getNestedObjectProperty(e,["icon","sap|ui.icons.icon","icon","sap|ui.icons.icon"])};i.getNumberUnit=function(e){var i=n(e,20);i.splice(2,2);return t.getNestedObjectProperty(i,["numberUnit","sap|flp.numberUnit"])};i.getInfo=function(e){return t.getNestedObjectProperty(e,["info","sap|app.info","info","sap|app.info"])};i.getShortTitle=function(e){var i=n(e,20);i.splice(0,1);return t.getNestedObjectProperty(i,["sap|app.shortTitle","shortTitle","sap|app.shortTitle"])};i.getInstantiationData=function(t){return e.get(["vizConfig","sap.flp","_instantiationData"],t)};i.getIndicatorDataSource=function(t){return e.get(["vizConfig","sap.flp","indicatorDataSource"],t)};i.getDataSource=function(e,i){var r=n(e,20);r.splice(2,1);r.splice(0,1);var a=t.getNestedObjectProperty(r,["sap|app.dataSources","sap|app.dataSources"])||{};return a[i]};i.getChipConfigFromVizReference=function(t){return e.get(["vizConfig","sap.flp","chipConfig"],t)};return i},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cdm/v3/utilsCdm", ["sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/util/merge","sap/base/util/deepEqual","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/utils/UrlParsing","sap/base/Log"],function(e,t,a,r,i,s,n,p,o,u){"use strict";var l={};l.getMember=function(t,a){return e.getMember(t,a)};l.getNestedObjectProperty=function(t,a,r){return e.getNestedObjectProperty(t,a,r)};l.mapOne=function(e,i,n,o,u,l){var c=false;i=a({},i);n=a({},n);o=a({},o);u=a({},u);o=o||{};u=u||{};var m={};m.semanticObject=this.getMember(i,"semanticObject");m.action=this.getMember(i,"action");var f=t.getConfig(o);m.title=t.getTitle([undefined,f,i,n]);m.info=t.getInfo([undefined,f,i,n]);m.icon=t.getIcon([undefined,f,i,n]);m.subTitle=t.getSubTitle([undefined,f,i,n]);m.shortTitle=t.getShortTitle([undefined,f,i,n]);m.keywords=t.getKeywords([undefined,f,i,n]);m.numberUnit=t.getNumberUnit([undefined,f,undefined,undefined]);m.deviceTypes=this.getMember(n,"sap|ui.deviceTypes")||{};["desktop","tablet","phone"].forEach(function(e){if(Object.prototype.hasOwnProperty.call(this.getMember(i,"deviceTypes")||{},e)){m.deviceTypes[e]=i.deviceTypes[e]}if(!Object.prototype.hasOwnProperty.call(m.deviceTypes,e)){m.deviceTypes[e]=true}m.deviceTypes[e]=!!m.deviceTypes[e]}.bind(this));m.signature=this.getMember(i,"signature")||{};m.signature.parameters=this.getMember(m,"signature.parameters")||{};m.signature.additionalParameters=this.getMember(i,"signature.additionalParameters")||"allowed";var d=this.getMember(m,"signature.parameters.sap-hide-intent-link");if(d&&d.hasOwnProperty("defaultValue")){m.hideIntentLink=d.defaultValue.value==="true"}if(d&&!d.required&&d.hasOwnProperty("defaultValue")){delete m.signature.parameters["sap-hide-intent-link"]}var h=this.getMember(n,"sap|platform|runtime");m.resolutionResult=a({},h);if(h){m.resolutionResult["sap.platform.runtime"]=a({},h)}if(this.getMember(n,"sap|ui.technology")==="GUI"){m.resolutionResult["sap.gui"]=this.getMember(n,"sap|gui")}if(this.getMember(n,"sap|ui.technology")==="WDA"){m.resolutionResult["sap.wda"]=this.getMember(n,"sap|wda")}if(this.getMember(n,"sap|ui.technology")==="URL"){if(n["sap.url"]){m.resolutionResult["sap.platform.runtime"]=m.resolutionResult["sap.platform.runtime"]||{};m.resolutionResult.url=n["sap.url"].uri;m.resolutionResult["sap.platform.runtime"].url=n["sap.url"].uri}else if(h&&h.uri){m.resolutionResult["sap.platform.runtime"].url=h.uri;m.resolutionResult.url=h.uri}}if(!m.resolutionResult["sap.ui"]){m.resolutionResult["sap.ui"]={}}m.resolutionResult["sap.ui"].technology=this.getMember(n,"sap|ui.technology");m.resolutionResult.applicationType=this._formatApplicationType(m.resolutionResult,n);m.resolutionResult.systemAlias=m.resolutionResult.systemAlias||this.getMember(i,"systemAlias");m.resolutionResult.systemAliasSemantics="apply";m.resolutionResult.text=m.title;m.resolutionResult.appId=this.getMember(n,"sap|app.id");var g;var b;var y=this.getMember(o,"vizConfig.sap|flp.indicatorDataSource");var v={};if(!r(u)){var M=this.getMember(u,"sap|app.type");if(M==="card"){c=true;v=s({},u,o.vizConfig)}else{v.componentName=this.getMember(u,"sap|ui5.componentName");var O=this.getMember(u,"sap|platform|runtime.componentProperties");if(O){v.componentProperties=O}if(this.getMember(u,"sap|platform|runtime.includeManifest")){v.componentProperties=v.componentProperties||{};v.componentProperties.manifest=s({},u,o.vizConfig);delete v.componentProperties.manifest["sap.platform.runtime"]}}}if(this.getMember(n,"sap|app.type")==="plugin"||this.getMember(n,"sap|flp.type")==="plugin"){return undefined}var R=this.getNestedObjectProperty([f,n,u],"sap|flp.tileSize");var T=this.getNestedObjectProperty([f,n,u],"sap|app.description");if(this.getMember(n,"sap|ui.technology")==="GUI"&&this.getMember(n,"sap|gui.transaction")){g=this.getMember(n,"sap|gui.transaction")}if(this.getMember(n,"sap|ui.technology")==="WDA"&&this.getMember(n,"sap|wda.applicationId")){g=this.getMember(n,"sap|wda.applicationId")}var P=this.getNestedObjectProperty([f,n,u],"sap|app.dataSources");if(this.getMember(n,"sap|app.id")){b=this.getMember(n,"sap|app.id")}var j=p.getContentProviderId(n)||"";m.tileResolutionResult={appId:b,title:m.title,subTitle:m.subTitle,icon:m.icon,size:R,info:m.info,keywords:m.keywords,tileComponentLoadInfo:v,indicatorDataSource:y,dataSources:P,description:T,runtimeInformation:h,technicalInformation:g,deviceTypes:m.deviceTypes,isCard:c,contentProviderId:j,numberUnit:m.numberUnit};var I=this.getMember(n,"sap|integration.urlTemplateId");var S=this.getTemplatePayloadFromSite(I,l);if(S){m.templateContext={payload:S,site:l,siteAppSection:n}}return m};l.getTemplatePayloadFromSite=function(e,t){if(!t||typeof e!=="string"){return null}var a=e.replace(/[.]/g,"|");return this.getMember(t.urlTemplates,a+".payload")};l._formatApplicationType=function(e,t){var a=e.applicationType;if(a){return a}var r=this.getMember(t,"sap|platform|runtime.componentProperties.self.name")||this.getMember(t,"sap|ui5.componentName");if(this.getMember(t,"sap|flp.appType")==="UI5"||this.getMember(t,"sap|ui.technology")==="UI5"){e.applicationType="SAPUI5";e.additionalInformation="SAPUI5.Component="+r;e.url=this.getMember(t,"sap|platform|runtime.componentProperties.url");e.applicationDependencies=this.getMember(t,"sap|platform|runtime.componentProperties");return"SAPUI5"}if(this.getMember(t,"sap|ui.technology")==="GUI"){e.applicationType="TR";e["sap.gui"]=this.getMember(t,"sap|gui");e.systemAlias=this.getMember(t,"sap|app.destination.name");return"TR"}if(this.getMember(t,"sap|ui.technology")==="WDA"){e.applicationType="WDA";e["sap.wda"]=this.getMember(t,"sap|wda");e.systemAlias=this.getMember(t,"sap|app.destination.name");return"WDA"}if(this.getMember(t,"sap|ui.technology")==="URL"){e.applicationType="URL";e.systemAlias=this.getMember(t,"sap|app.destination.name")}return"URL"};l.formatSite=function(e){var t=this;if(!e){return[]}var a=[];try{var r=Object.keys(e.applications||{}).sort();r.forEach(function(r){try{var i=e.applications[r];var s=this.getMember(i,"sap|app.crossNavigation.inbounds");if(s){var n=Object.keys(s).sort();n.forEach(function(r){var n=s[r];var o=t.mapOne(r,n,i,undefined,undefined,e);if(o){o.contentProviderId=p.getContentProviderId(i)||"";a.push(o)}})}}catch(e){u.error("Error in application "+r+": "+e,e.stack)}}.bind(this))}catch(e){u.error(e);u.error(e.stack);return[]}return a};l.toHashFromInbound=function(e,t){var a={target:{semanticObject:e.semanticObject,action:e.action},params:{}};if(t){a.params["sap-ui-app-id-hint"]=t}var r=i.get("signature.parameters",e)||{};Object.keys(r).forEach(function(e){if(r[e].filter&&Object.prototype.hasOwnProperty.call(r[e].filter,"value")&&(r[e].filter.format===undefined||r[e].filter.format==="plain")){a.params[e]=[r[e].filter.value]}if(r[e].launcherValue&&Object.prototype.hasOwnProperty.call(r[e].launcherValue,"value")&&(r[e].launcherValue.format===undefined||r[e].launcherValue.format==="plain")){a.params[e]=[r[e].launcherValue.value]}});var s=o.constructShellHash(a);if(!s){return undefined}return s};l.toHashFromOutbound=function(e){var t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};var a=e.parameters||{};Object.keys(a).forEach(function(e){if(a.hasOwnProperty(e)&&typeof a[e].value==="object"){t.params[e]=[a[e].value.value]}});var r=o.constructShellHash(t);if(!r){return undefined}return r};l.toHashFromVizData=function(e,t){if(!e.target){return undefined}var a=e.target;if(a.type==="URL"){return a.url}var r=a.appId;var i=a.inboundId;var s;if(r&&i){var n=p.getInboundTarget(t,r,i);s={};if(n){s.semanticObject=n.semanticObject;s.action=n.action;s.parameters=a.parameters||{};s.parameters["sap-ui-app-id-hint"]={value:{value:r,format:"plain"}};s.appSpecificRoute=a.appSpecificRoute||""}}else if(a.semanticObject&&a.action){s=a}return l.toHashFromTarget(s)};l.toHashFromTargetIntent=function(e,t){try{if(t.type==="URL"){return t.url}var a={};a.semanticObject=e.semanticObject;a.action=e.action;a.parameters=t.parameters||{};a.parameters["sap-ui-app-id-hint"]={value:{value:e.businessAppId,format:"plain"}};a.appSpecificRoute=t.appSpecificRoute||"";return l.toHashFromTarget(a)}catch(e){return undefined}};l.toHashFromTarget=function(e){try{var t={};var a=i.get("parameters",e)||{};Object.keys(a).forEach(function(e){t[e]=Array.isArray(a[e].value.value)?a[e].value.value:[a[e].value.value]});var r={target:{semanticObject:e.semanticObject,action:e.action},params:t,appSpecificRoute:e.appSpecificRoute};return"#"+o.constructShellHash(r)}catch(e){return undefined}};l.toTargetFromHash=function(e){var t=o.parseShellHash(e);if(t!==undefined){var a=t.params||{};if(Object.keys(a).length>0){t.parameters=[];Object.keys(a).forEach(function(e){var r=Array.isArray(a[e])?a[e]:[a[e]];r.forEach(function(a){var r={name:e,value:a};t.parameters.push(r)})})}delete t.params}else{t={type:"URL",url:e}}return t};l.isSameTarget=function(e,t){var a;if(e.type!==t.type){return false}if(e.type==="URL"){a=e.url===t.url}else{a=e.semanticObject===t.semanticObject&&e.action===t.action&&e.appSpecificRoute===t.appSpecificRoute&&n(e.parameters,t.parameters)}return a};return l});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cep/MenuAdapter", ["sap/base/Log","sap/base/i18n/Localization","sap/ushell/components/tiles/utils","sap/ushell/Config","sap/ushell/library","sap/ushell/utils/HttpClient","sap/ushell/utils/workpage/WorkPageService"],function(e,t,n,i,s,a,r){"use strict";var o=s.ContentNodeType;var u="sap.ushell.adapters.cep.MenuAdapter";const p={Workpage:"workpage",Visualization:"visualization"};const l={workpage:"workpage",page:"page"};const c={Menu:"FLP menu",ContentNodes:"content nodes"};var d=function(t,n,i){if(i&&i.config&&i.config.serviceUrl&&i.config.siteId){this.httpClient=new a;this.serviceUrl=i.config.serviceUrl;this.siteId=i.config.siteId;this.oWorkPageService=new r;this.oSiteDataPromise=this._doRequest(this.serviceUrl,this.siteId);this.oVizDataPromise=this._loadVisualizations()}else{e.error("Invalid configuration provided.","",u)}};d.prototype._loadVisualizations=async function(){if(i.last("/core/menuQueryAvailable")){const e=await this._getVisualizationIds();if(e.length>0){const t={filter:[{id:{in:e}}]};return this.oWorkPageService.loadVisualizations(t,true)}}return[]};d.prototype.isMenuEnabled=function(){if(!i.last("/core/menu/enabled")){return Promise.resolve(false)}return this.getMenuEntries().then(function(e){return e.length>0})};d.prototype.isSideNavigationEnabled=async function(){if(!i.last("/core/sideNavigation/enabled")){return false}const e=await this.getMenuEntries();return e.length>0};d.prototype.getMenuEntries=async function(){const[e,t]=await Promise.all([this._getMenu(),this._getVisualizations()]);return this._buildMenuEntries(e,t)};d.prototype.getContentNodes=async function(){const e=await this._getMenu();return this._buildContentNodes(e)};d.prototype._getVisualizationIds=async function(){const t=new Set;const n=await this._getMenu();n.forEach(n=>{if(!Array.isArray(n?.subMenu)){e.warning(`Menu entry ${n.id} does not contain a sub menu array for site-id: ${this.siteId}, ${u}`);return}n.subMenu.forEach(e=>{if(e.type===p.Visualization&&e.id){t.add(e.id)}})});return[...t]};d.prototype._buildMenuEntries=function(e,t){return e.filter(this._isSpaceNotEmpty.bind(null,c.Menu)).map(e=>{const n=this._buildMenuEntry(e,t);const i=[];e.subMenu.forEach(n=>{n.spaceid=e.id;const s=this._buildMenuEntry(n,t);i.push(s)});if(i.length>1){n.menuEntries=i}return n})};d.prototype._buildMenuEntry=function(t,i){let s=t;let a=t.title;let r=t.icon;let o="Page-";let l="Launchpad";let c="openFLPPage";let d="pageId";let g=t.id;if(Array.isArray(t?.subMenu)&&t.subMenu.length>0){s=t.subMenu[0];o="Space-";g=s.id;if(t.subMenu.length===1&&s.type===p.Visualization){a=s.title;r=s.icon}}const f=i.find(e=>e.id===s?.id);if(f&&f!==undefined){o="App-";d="sap-ui-app-id-hint";if(f.targetAppIntent){g=f.targetAppIntent.businessAppId;l=f.targetAppIntent.semanticObject;c=f.targetAppIntent.action}else{e.warning(`Visualization ${f.id} does not contain a targetAppIntent for site-id: ${this.siteId}, ${u}`)}}if(!n.isIconURIValid(r)){r=undefined}return{title:a,"help-id":o+t.id,description:"",icon:r,type:"IBN",target:{semanticObject:l,action:c,parameters:[{name:"spaceId",value:t.spaceid||t.id},{name:d,value:g}],innerAppRoute:undefined},menuEntries:[]}};d.prototype._buildContentNodes=function(e){return e.filter(this._isSpaceNotEmpty.bind(null,c.ContentNodes)).map(function(e){return{id:e.id,label:e.title||e.id,type:o.Space,isContainer:false,children:e.subMenu.map(function(e){const t=e.type===p.Workpage;return{id:e.id,label:e.title||e.id,type:t?o.Page:o.Visualization,isContainer:e?.pageType===l.page,children:[]}})}})};d.prototype.isWorkPage=async function(e){const t=await this._getMenu();const n=t.flatMap(e=>e.subMenu||[]).filter(e=>e.pageType===l.workpage&&e.type===p.Workpage).find(t=>t.id===e);return!!n};d.prototype._doRequest=function(n,s){let a="";if(i.last("/core/menuQueryAvailable")){a=`{\n            menu(siteId: "${s}")\n        }`}else{a=`{\n                spaces(siteId: "${s}") {\n                    nodes {\n                        id,\n                        descriptor {\n                            value(select: ["/title"])\n                        },\n                        workPages {\n                            nodes {\n                                id,\n                                contents(queryInput: {selectProperties: ["/descriptor"], selectDescriptorValueProperties: ["/title", "/pageType"]})\n                            }\n                        }\n                    }\n                }\n            }`}a=a.replace(/\n/g,"").replace(/ /g,"");const r={"Content-Type":"application/json",Accept:"application/json","Accept-Language":t.getLanguageTag().toString()};if(i.last("/core/site/sapCdmVersion")){r["sap-cdm-content-version"]=i.last("/core/site/sapCdmVersion")}return this.httpClient.get(n+"?query="+a,{headers:r}).then(function(t){if(t.status<200||t.status>=300){e.error(t.responseText,"",u);return Promise.reject(`HTTP request to GraphQL service failed with status: ${t.status} - ${t.statusText}`)}return JSON.parse(t.responseText||"{}")}).then(function(e){if(!i.last("/core/menuQueryAvailable")){e.data.menu=e.data.spaces.nodes.map(function(e){return{id:e.id,type:"space",title:e?.descriptor?.value?.title,subMenu:e?.workPages?.nodes?.map(function(e){return{id:e.id,type:"workpage",title:e?.contents?.descriptor?.value?.title,pageType:e.contents.descriptor?.value?.pageType?"page":"workpage"}})}})}try{e.data.menu=e.data.menu.filter(function(e){return e.id!=="default_space"})}catch(e){}return e})};d.prototype._getMenu=async function(){const t=await this.oSiteDataPromise;if(Array.isArray(t?.data?.menu)&&t.data.menu.length>0){return t.data.menu}e.warning("No menu found for site-id: "+this.siteId,"",u);return[]};d.prototype._getVisualizations=async function(){const t=await this.oVizDataPromise;if(Array.isArray(t?.visualizations?.nodes)&&t.visualizations.nodes.length>0){return t.visualizations.nodes}e.info("No visualizations found for site-id: "+this.siteId,"",u);return[]};d.prototype._isSpaceNotEmpty=function(t,n){if(!(Array.isArray(n?.subMenu)&&n.subMenu.length>0)||!n.subMenu?.some(e=>Object.keys(e).length>0)){e.warning(`FLP space ${n.id} without sub menu content omitted in ${t}.`,"",u);return false}return true};return d});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/cflp/UserDefaultParameterPersistenceAdapter", ["sap/ushell/utils/HttpClient","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath","sap/ushell/Container"],function(e,jQuery,t,r,a){"use strict";var s=function(e,t,r){this.sBaseServicePath="/sap/opu/odata/UI2/INTEROP/";this.oConfig={};if(r&&r.userBaseServicePath!==undefined){this.oConfig.sBaseServicePath=r.userBaseServicePath}else{this.oConfig.sBaseServicePath=this.sBaseServicePath}this.oConfig.oHttpClientConfig={"sap-language":a.getUser().getLanguage(),"sap-client":a.getLogonSystem().getClient(),"sap-statistics":true,headers:{Accept:"application/json"},data:{}};this._mSystems={}};s.prototype.loadParameterValue=function(e,t){var r=new jQuery.Deferred;var a=this._isValidParameterName(e);if(a){this._getUserDefaultParameterContainer(t).done(function(t){var a=t.find(function(t){return t.id===e});if(a!==undefined){var s=JSON.parse(a.value);r.resolve(s)}else{r.reject("Parameter does not exist: "+e)}}).fail(function(e){r.reject(e)})}else{r.reject('Illegal Parameter Key. Parameter must be less than 40 characters and [A-Za-z0-9.-_]+ :"'+e+'"')}return r.promise()};s.prototype._createRequest=function(e){return{data:{PersContainerItems:e,appName:"",category:"P",component:"",id:"sap.ushell.UserDefaultParameter"},headers:{"content-type":"application/json",accept:"application/json"}}};s.prototype.saveParameterValue=function(e,t,r){var a=new jQuery.Deferred;var s=this._isValidParameterName(e);if(s){var i=this._getXHttpWrapper(r);this._getUserDefaultParameterContainer(r).done(function(r){var s=r.findIndex(function(t){return t.id===e});if(s>-1){r[s].value=JSON.stringify(t)}else{var n={category:"I",containerCategory:"P",containerId:"sap.ushell.UserDefaultParameter",id:e,value:JSON.stringify(t)};r.push(n)}i.post("PersContainers",this._createRequest(r)).then(a.resolve).catch(a.reject)}.bind(this)).fail(a.reject)}else{a.reject('Illegal Parameter Key. Parameter must be less than 40 characters and [A-Za-z0-9.-_]+ :"'+e+'"')}return a.promise()};s.prototype.deleteParameter=function(e,t){var r=new jQuery.Deferred;var a=this._isValidParameterName(e);if(a){var s=this._getXHttpWrapper(t);this._getUserDefaultParameterContainer(t).done(function(t){var a=t.findIndex(function(t){return t.id===e});if(a>-1){t.splice(a,1);s.post("PersContainers",this._createRequest(t)).then(r.resolve).catch(r.reject)}else{r.resolve()}}.bind(this)).fail(r.reject)}else{r.reject('Illegal Parameter Key. Parameter must be less than 40 characters and [A-Za-z0-9.-_]+ :"'+e+'"')}return r.promise()};s.prototype.getStoredParameterNames=function(e){var t=new jQuery.Deferred;this._getUserDefaultParameterContainer(e).done(function(e){var r=e.map(function(e){return e.id});r.sort();t.resolve(r)}).fail(function(e){t.reject(e)});return t.promise()};s.prototype._getXHttpWrapper=function(t){if(!this._mSystems[t.id]){this._mSystems[t.id]={}}if(!this._mSystems[t.id].oHttpWrapper){var r=t.getFullyQualifiedXhrUrl(this.oConfig.sBaseServicePath);this._mSystems[t.id].oHttpWrapper=new e(r,this.oConfig.oHttpClientConfig)}return this._mSystems[t.id].oHttpWrapper};s.prototype._isValidParameterName=function(e){var r=!!(typeof e==="string"&&e.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(e));if(!r){t.error('Illegal Parameter Key. Parameter must be less than 40 characters and [A-Za-z0-9.-_]+ :"'+e+'"')}return r};s.prototype._getUserDefaultParameterContainer=function(e){var t=new jQuery.Deferred;var a;try{a=this._getXHttpWrapper(e)}catch(e){t.reject(e.message);return t.promise()}var s=this._mSystems[e.id];if(!s.oContainerCache){s.oContainerCache=t;var i=a.get("PersContainers(category='P',id='sap.ushell.UserDefaultParameter')?$expand=PersContainerItems");i.then(function(e){s.bDataReceived=true;var t=e.responseText?JSON.parse(e.responseText):{};var a=r.get("d.PersContainerItems.results",t)||[];s.oContainerCache.resolve(a)}).catch(function(e){if(e.status===404){s.oContainerCache.resolve([])}else{var t="Server error: "+e.statusText;s.oContainerCache.reject(t)}})}return s.oContainerCache.promise()};return s},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/NavTargetResolutionAdapter", ["sap/ushell/adapters/local/NavTargetResolutionInternalAdapter"],function(e){"use strict";return e},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/NavTargetResolutionInternalAdapter", ["sap/ushell/services/ClientSideTargetResolution/VirtualInbounds","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils","sap/ushell/Container"],function(e,n,jQuery,i,t,r){"use strict";var a=function(a,s,o){var l=n.create("config.applications",o);var f=e.getInbounds();u(f,l);function u(e,n){e.forEach(function(e){var i=e.semanticObject+"-"+e.action;n[i]=e.resolutionResult})}this.resolveHashFragment=function(e){var n=new jQuery.Deferred;var r;if(e&&e.charAt(0)!=="#"){throw new t.Error("Hash fragment expected","sap.ushell.renderers.minimal.Shell")}e=e.substring(1);if(!e&&!l[e]){n.resolve(undefined)}else{i.info("Hash Fragment: "+e);var a=e.indexOf("&/");if(a>=0){e=e.slice(0,a)}a=e.indexOf("?");if(a>=0){r=e.slice(a+1);e=e.slice(0,a)}var s=l[e];if(s){var o={additionalInformation:s.additionalInformation,applicationType:s.applicationType,url:s.url,text:s.text,fullWidth:s.fullWidth,navigationMode:"embedded"};if(r){o.url+=o.url.indexOf("?")<0?"?":"&";o.url+=r}if(s.navigationMode!==undefined){o.navigationMode=s.navigationMode}n.resolve(o)}else{n.reject("Could not resolve link '"+e+"'")}}return n.promise()};this.getSemanticObjectLinks=function(e,n){var t=[];var a=0;var s=new jQuery.Deferred;if(!e){setTimeout(function(){s.resolve([])},0)}else{r.getServiceAsync("URLParsing").then(function(r){var o=r.paramsToString(n);i.info("getSemanticObjectLinks: "+e);for(var f in l){if(l.hasOwnProperty(f)&&f.substring(0,f.indexOf("-"))===e){t[a]=l[f];t[a].id=f;t[a].text=t[a].text||t[a].description||"no text";t[a].intent="#"+f;if(o!==""){if(t[a].intent.indexOf("?")!==-1){t[a].intent+="&"+o}else{t[a].intent+="?"+o}}a+=1}}if(t){s.resolve(t)}else{s.reject("Could not get links for '"+e+"'")}})}return s.promise()};this.isIntentSupported=function(e){var n=new jQuery.Deferred;var i={};var t=[];var r=this;function a(e,n){i[e]={supported:n}}e.forEach(function(e,n){var i=new jQuery.Deferred;t.push(i.promise());r.resolveHashFragment(e).fail(function(n){a(e,false);i.resolve()}).done(function(n){a(e,true);i.resolve()})});if(e.length>0){jQuery.when.apply(jQuery,t).always(function(){n.resolve(i)})}else{n.resolve(i)}return n.promise()}};return a},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/adapters/local/UserInfoAdapter", ["sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/Log","sap/ushell/Container"],function(jQuery,e,n,r){"use strict";var t=function(t,i,a){var s;function o(n){var r=[{id:"sap_horizon",name:"SAP Morning Horizon"},{id:"sap_horizon_dark",name:"SAP Evening Horizon"},{id:"sap_horizon_hcb",name:"SAP HCB (SAP Horizon)"},{id:"sap_horizon_hcw",name:"SAP HCW (SAP Horizon)"},{id:"sap_fiori_3",name:"SAP Quartz Light"},{id:"sap_fiori_3_dark",name:"SAP Quartz Dark"},{id:"sap_belize_plus",name:"SAP Belize Plus"},{id:"sap_belize",name:"SAP Belize"},{id:"theme1_id",name:"Custom Theme"},{id:"sap_fiori_3_hcb",name:"SAP Quartz HCB"},{id:"sap_fiori_3_hcw",name:"SAP Quartz HCW"}];var t=e.get("config.themes",n);return t===undefined?r:t}this.updateUserPreferences=function(e){var t=new jQuery.Deferred;function i(e){var r="Failed to update user preferences: "+(e&&e.message?e.message:e);n.error(r,e&&e.stack,"com.sap.ushell.adapters.local.UserInfo")}r.getServiceAsync("PersonalizationV2").then(function(n){var r={keyCategory:n.KeyCategory.FIXED_KEY,writeFrequency:n.WriteFrequency.LOW,clientStorageAllowed:true};function a(e,n){var r=n.getChangedProperties()||[];r.forEach(function(n){e.setItemValue(n.propertyName,n.newValue)})}n.getContainer("sap.ushell.UserProfile",r,undefined).then(function(n){a(n,e);n.save().then(function(){t.resolve()}).catch(function(e){i(e);t.reject(e)})}).catch(function(e){i(e);t.reject(e)})});return t.promise()};this.getThemeList=function(){var e=new jQuery.Deferred;if(s===undefined){s=o(a)}if(s.length===0){e.reject("no themes were configured")}else{e.resolve({options:s})}return e.promise()};this.getLanguageList=function(){var e=new jQuery.Deferred;e.resolve([{text:"Browser Language",key:"default"},{text:"American English",key:"en-US"},{text:"British English",key:"en-GB"},{text:"English",key:"en"},{text:"German",key:"de"},{text:"Hebrew",key:"he"},{text:"Russian",key:"ru"}]);return e.promise()}};return t},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/api/BootstrapObserver", ["sap/base/util/Deferred"],function(e){"use strict";class r{static#e=new e;static resolveBootstrappedContainer(e){r.#e.resolve(e)}static async ready(){return r.#e.promise}static __reset(){r.#e=new e}}return r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/api/Copilot", ["sap/ushell/api/common/ComponentInstantiation"],function(n){"use strict";class e{async createComponentInstance(e){return n.createComponentInstance(e)}}return new e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/api/Inbox", ["sap/ushell/api/common/ComponentInstantiation"],function(n){"use strict";class t{async createComponentInstance(t,e,a){return n.createComponentInstance(t,e,a)}async createComponentInstantiationData(t,e){return n.createComponentInstantiationData(t,e)}}return new t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/api/NewExperience", ["sap/ui/base/EventProvider","sap/ui/model/json/JSONModel","sap/ushell/api/NewExperience/CustomOverflowListItem","sap/ushell/Config"],function(e,t,i,r){"use strict";const l={Header:"Header",Overflow:"Overflow"};class s{#e=new e;#t=null;#i=null;#r=null;#l=null;constructor(){this.#s();this.#i=this.#o()}reset(){this.#r.destroy();this.#e.destroy();this.#i.destroy();this.#e=new e;this.#t=null;this.#s();this.#i=this.#o()}#s(){this.#r=new t({active:false,isVisible:false,currentState:l.Header,shellHeaderControlId:null,showInShellHeader:false})}#o(){return new i({visible:{parts:["/isVisible","/currentState"],formatter:(e,t)=>e&&t===l.Overflow},contentId:"{/shellHeaderControlId}"}).addStyleClass("newExperienceSwitchListItem").setModel(this.#r).data("help-id","ushell-new-experience-switch",true)}getModel(){return this.#r}getOverflowItemId(){return this.#i.getId()}isActive(){return this.#r.getProperty("/active")}getShellHeaderControl(){return this.#t}getOverflowItemControl(){return this.#i}showInOverflow(){this.#r.setProperty("/currentState",l.Overflow);this.#n()}showInShellHeader(){this.#r.setProperty("/currentState",l.Header);this.#n()}attachActiveChanged(...e){this.#e.attachEvent("activeChanged",...e)}detachActiveChanged(...e){this.#e.detachEvent("activeChanged",...e)}#n(){const e=this.isActive();const t=this.#r.getProperty("/currentState")===l.Header;if(e){this.#r.setProperty("/showInShellHeader",t)}else{this.#r.setProperty("/showInShellHeader",false)}}setSwitchControl(e){const t=this.isActive();this.#t=e;this.#r.setProperty("/shellHeaderControlId",e?.getId?.());this.#r.setProperty("/active",!!e);this.#r.setProperty("/isVisible",!!e);if(t!==this.isActive()){this.#e.fireEvent("activeChanged",{active:this.isActive()})}if(r.last("/core/shellBar/enabled")){if(e){if(!e.data("help-id")){e.data("help-id","ushell-new-experience-switch",true)}const t=sap.ui.require("sap/ushell/Container");t.getServiceAsync("FrameBoundExtension").then(async t=>{this.#l=await t.createHeaderItem({id:e.getId()});this.#l.showForAllApps();this.#l.showOnHome()})}else{this.#l?.hideForAllApps();this.#l?.hideOnHome()}}this.#n()}setSwitchVisibility(e){this.#r.setProperty("/isVisible",e)}}const o=new s;return o});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/api/NewExperience/CustomOverflowListItem", ["sap/m/CustomListItem","sap/m/CustomListItemRenderer","sap/ui/core/Element"],function(e,t,n){"use strict";const s=e.extend("sap.ushell.api.NewExperience.CustomOverflowListItem",{metadata:{library:"sap.ushell",properties:{contentId:{type:"string",group:"Misc",defaultValue:null}}},renderer:t});s.prototype.getContent=function(){const e=n.getElementById(this.getContentId());return[e]};return s});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/api/RTA", ["sap/ui/core/theming/Parameters","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/state/ShellModel"],function(e,t,r,n,o){"use strict";const a={};a.getShellHeader=function(){const e=t.getRendererInternal();if(!n.last("/core/shellBar/enabled")){return e.getRootControl().getShellHeader()}else{return{getLogo:this.getLogo}}};a.getLogo=function(){const t=o.getModel().getProperty("/header/home/showLogo");if(!t){return}const r=n.last("/core/companyLogo/url");if(r!==""){return r}const a=e.get({name:"sapUiGlobalLogo",callback:()=>{}});if(a){const e=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(a);if(e){return e[1]}}if(a==="none"){return sap.ui.require.toUrl("sap/ushell/themes/base/img/SAPLogo.svg")}return""};a.setShellHeaderVisibility=function(e){const r=t.getRendererInternal();r.setHeaderVisibility(e,false)};a.addTopHeaderPlaceHolder=function(){const e=t.getRendererInternal();e.addTopHeaderPlaceHolder()};a.removeTopHeaderPlaceHolder=function(){const e=t.getRendererInternal();e.removeTopHeaderPlaceHolder()};a.setNavigationBarEnabled=function(e){r.emit("enableMenuBarNavigation",e)};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/api/common/ComponentInstantiation", ["sap/base/Log","sap/base/util/deepExtend","sap/ushell/ApplicationType","sap/ushell/Container","sap/ushell/UI5ComponentType","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(e,t,n,a,o,i,s){"use strict";class r{async createComponentInstance(e,t,n){const i=await a.getServiceAsync("Ui5ComponentLoader");let s=await this.createComponentInstantiationData(e,t);s=await i.modifyComponentProperties(s,o.Application);s.loadDefaultDependencies=false;if(n){return new Promise((e,t)=>{n.runAsOwner(()=>{this.#e(s,i).then(e).catch(t)})})}return this.#e(s,i)}async#e(t,n){try{const e=await n.instantiateComponent(t);return e.componentHandle.getInstance()}catch(t){e.error(`Cannot create UI5 component: ${t.toString()}`,t.stack,"sap.ushell.api.common.ComponentInstantiation");return Promise.reject(t)}}async createComponentInstantiationData(e,t){const o={componentData:t};if(o.componentData){delete o.componentData.startupParameters;delete o.componentData.config;delete o.componentData["sap-xapp-state"]}const r=s.constructShellHash(s.parseShellHash(e));if(!r){return Promise.reject("Navigation intent invalid!")}const p=await a.getServiceAsync("NavTargetResolutionInternal");const c=await p.resolveHashFragment("#"+r);if(c.applicationType===n.URL.type&&c.appCapabilities&&c.appCapabilities.appFrameworkId==="UI5"&&a.inAppRuntime()){const[t]=await i.requireAsync(["sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent"]);let n;try{const e=new URL(c.url);const t=new URLSearchParams(e.search);n=t.get("sap-ui-app-id")}catch(e){n=c.url.match(/[?&]sap-ui-app-id=([^&]+)/)[1]}let a=await t.getAppInfo(n);if(a.hasOwnProperty("oResolvedHashFragment")){a=a.oResolvedHashFragment}a=this.#t(a,o);if(a.url&&e.indexOf("?")>0){a.url+="?"+e.split("?")[1]}return this.#n({ui5ComponentName:n,applicationDependencies:a,url:a.url},o)}else if(c.applicationType!==n.URL.type&&!/^SAPUI5\.Component=/.test(c.additionalInformation)){return Promise.reject("The resolved target mapping is not of type UI5 component.")}return this.#n(c,o)}async#n(t,n){try{t=this.#t(t,n);t.loadDefaultDependencies=false;const e=await a.getServiceAsync("Ui5ComponentLoader");return e.createComponentData(t)}catch(t){e.error("Cannot get UI5 component data: "+t,t.stack,"sap.ushell.api.common.ComponentInstantiation");return Promise.reject(t)}}#t(e,n){e=t({},e,n);if(!e.ui5ComponentName){if(e.additionalInformation){e.ui5ComponentName=e.additionalInformation.replace(/^SAPUI5\.Component=/,"")}else if(e.name){e.ui5ComponentName=e.name}}return e}}return new r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/AppLifeCycle", ["sap/base/util/deepEqual","sap/base/util/Deferred","sap/ui/Device","sap/ui/core/Element","sap/ui/core/EventBus","sap/ushell/appIntegration/KeepAliveApps","sap/ushell/state/BackNavigation","sap/ushell/state/ContentDensity","sap/ushell/state/Favicon","sap/ushell/appIntegration/contracts/EmbeddedUI5Handler","sap/ushell/appIntegration/contracts/StatefulContainerV1Handler","sap/ushell/appIntegration/contracts/StatefulContainerV2Handler","sap/ushell/appIntegration/ApplicationContainerCache","sap/ushell/appIntegration/ApplicationHandle","sap/ushell/appIntegration/AppLifeCycle/KeepAliveMode","sap/ushell/appIntegration/PostMessageManager/AppruntimeHandler","sap/ushell/appIntegration/PostMessageManager/NWBCHandler","sap/ushell/appIntegration/PostMessageManager/LifecycleHandler","sap/ushell/appIntegration/PostMessageManager/ServiceHandler","sap/ushell/appIntegration/PostMessageManager/MessageBrokerHandler","sap/ushell/appIntegration/PostMessageManager","sap/ushell/appIntegration/PostMessagePluginInterface","sap/ushell/appIntegration/IframeApplicationContainer","sap/ushell/appIntegration/UI5ApplicationContainer","sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/Config","sap/ushell/ApplicationType","sap/ushell/utils/UriParameters","sap/base/Log","sap/ushell/EventHub","sap/ushell/utils/UrlParsing","sap/ui/thirdparty/hasher","sap/ushell/services/MessageBroker/MessageBrokerEngine","sap/ushell/renderer/utils","sap/m/library","sap/ushell/AppInfoParameters","sap/ushell/Container","sap/ushell/resources","sap/ushell/state/ShellModel","sap/ushell/state/StateManager","sap/ushell/state/KeepAlive","sap/ushell/ui5service/ShellUIServiceFactory","sap/ui/core/service/ServiceFactoryRegistry","sap/ushell/library"],(e,t,i,n,a,s,o,r,p,l,c,u,h,d,f,g,A,y,m,C,I,v,S,_,b,w,R,P,F,M,T,H,N,E,U,L,k,B,x,D,W,$,O,K,V)=>{"use strict";const q=V.appIntegration.contracts.StatefulType;const G=W.ShellMode;const j=W.LaunchpadState;const z=W.Operation;const J=L.URLHelper;const Q=3500;function X(){this._bDisableHomeAppCache=false;this._bEnableRouterRetrigger=true;this._oCurrentApplication={};this._oGlobalShellUIService=null;this._oNavContainer=null;this._pLastApplicationStart=Promise.resolve();this._oStorageAppIdMap={};this._oStorageAppIdNextIndex={};this._aDoables=[];if(window.QUnit===undefined){E.connect("FLP")}}X.prototype.KeepAliveMode=f;X.prototype.init=function(e,t){const i=[];if(R.last("/core/shell/enablePersistantAppstateWhenSharing")){B.getServiceAsync("AppState").then(e=>{const t=J.triggerEmail.bind(J);J.triggerEmail=function(i,n,a,s,o){const r=document.URL;e.setAppStateToPublic(r).done((e,r,p,l,c)=>{n=n&&r&&l&&n.includes(r)?n.replace(r,l):n;n=n&&p&&c&&n.includes(p)?n.replace(p,c):n;a=a&&r&&l&&a.includes(r)?a.replace(r,l):a;a=a&&p&&c&&a.includes(p)?a.replace(p,c):a;t(i,n,a,s,o)}).fail(t)}})}this._startPostMessageHandling();i.push(O.init().then(()=>{K.register("sap.ushell.ui5service.ShellUIService",O)}));i.push(this._createGlobalShellUIService());this._oNavContainer=e;this._bDisableHomeAppCache=t;a.getInstance().subscribe("sap.ushell","getAppLifeCycle",this._onGetAppLifeCycle,this);this._addEvents();i.push(r.init());p.init();d.init(this,this._oNavContainer);this._oNavContainer.attachAfterNavigate(this.onAfterNavigate.bind(this));this._oNavContainer.attachBeforeNavigate(this.onBeforeNavigate.bind(this));return Promise.allSettled(i)};X.prototype._onGetAppLifeCycle=function(e,t,i){M.error("the EventBus channel 'sap.ushell.getAppLifeCycle' is private and was discontinued.")};X.prototype._addEvents=function(){this._aDoables.push(T.on("disableKeepAliveRestoreRouterRetrigger").do(e=>{const t=e.appId;this._bEnableRouterRetrigger=e.disable;const i=s.get(t);if(i){i.enableRouterRetrigger=e.disable}}));this._aDoables.push(T.on("setApplicationFullWidth").do(e=>{this._setApplicationFullWidth(e.bValue)}));this._aDoables.push(T.on("reloadCurrentApp").do(e=>{this._reloadCurrentApp(e)}))};X.prototype._startPostMessageHandling=function(){I.init({getCurrentApplication:()=>this.getCurrentApplication()?.container,getAllApplications:()=>h.getAll()});g.register();A.register();y.register();m.register();C.register();this._waitForPluginsAndReplayPostMessages();v.init(true,t=>{Object.keys(t).forEach(i=>{const n=t[i];if(n.oServiceCalls){Object.keys(n.oServiceCalls).forEach(e=>{const t=n.oServiceCalls[e];const a=`${i}.${e}`;if(t.executeServiceCallFn){I.setRequestHandler(a,async(e,i)=>{const n={oMessageData:JSON.parse(i.data),oMessage:i};return w.promisify(t.executeServiceCallFn(n))})}})}if(n.oRequestCalls){Object.keys(n.oRequestCalls).forEach(t=>{const a=n.oRequestCalls[t];const s=`${i}.${t}`;const o={};if(e(a.distributionType,["all"])){o.ignoreCapabilities=true}else if(a.distributionType){M.error("Unsupported distribution type",a.distributionType,"sap.ushell.appIntegration.AppLifeCycle")}if(a.isActiveOnly){o.activeOnly=true}I.setDistributionPolicy(s,o)})}})})};X.prototype._waitForPluginsAndReplayPostMessages=async function(){const e=await B.getServiceAsync("PluginManager");const t=e.getPluginLoadingPromise("RendererExtensions");await w.promisify(t);I.replayStoredMessages()};X.prototype.registerHandleHashChange=function(e){e.hashChanger.attachEvent("hashChanged",t=>{if(N.disableBlueBoxHashChangeTrigger){return}if(t.mParameters&&e.hashChanger.isInnerAppNavigation(t.mParameters.newHash,t.mParameters.oldHash)){I.sendRequestToAllApplications("sap.ushell.appRuntime.innerAppRouteChange",{oHash:t.mParameters},false)}I.sendRequestToAllApplications("sap.ushell.appRuntime.hashChange",{sHash:t.mParameters.fullHash},false)})};X.prototype.getCurrentApplication=function(){return this._oCurrentApplication};X.prototype._setApplicationFullWidth=function(e){const t=this.getCurrentApplication();if(t.container){t.container.toggleStyleClass("sapUShellApplicationContainerLimitedWidth",!e)}};X.prototype.getShellUIService=function(){return this._oGlobalShellUIService};X.prototype.resetGlobalShellUIService=function(){if(this._oGlobalShellUIService){this._oGlobalShellUIService.resetService()}};X.prototype._createGlobalShellUIService=async function(){this._oGlobalShellUIService=await O.createInstanceInternal()};X.prototype.onBeforeNavigate=function(e){const t=e.getParameter("fromId")||"";const i=e.getParameter("from");const n=e.getParameter("toId")||"";if(n===t){return}if(t&&i&&i.isA("sap.ushell.appIntegration.ApplicationContainer")){const e=i;const t=e.getCurrentAppId();const n=!!e.isA("sap.ushell.appIntegration.IframeApplicationContainer");const a=e.getStatefulType()>q.NotSupported;const o=!!s.get(t);const r=n&&a;if(n&&(o||r)){e.sendRequest("sap.ushell.sessionHandler.beforeApplicationHide",{},false)}}};X.prototype.onAfterNavigate=async function(e){const t=e.getParameter("fromId")||"";const i=e.getParameter("from");const n=e.getParameter("toId")||"";const o=e.getParameter("to");const r=["Shell-appfinder-component","Shell-home-component","pages-component-container","homeApp-component-wrapper-container","homeApp-component-container","workPageRuntime-component-container","runtimeSwitcher-component-container"];const p=t===n;const l=r.some(e=>n.includes(e));if(t&&i){if(i.isA("sap.ushell.appIntegration.ApplicationContainer")){const e=i;if(!p){await this._handleExitApplication(e,l)}}else{const e=t;const s=i;if(p){return}if(n.indexOf("Shell-appfinder-component")>0){a.getInstance().publish("sap.ushell","appFinderAfterNavigate")}if(this._bDisableHomeAppCache){try{this._removeApplicationContainerFromNavContainer(s);s.destroy()}catch(t){M.error(`Error when trying to destroy the home component: '${e}'`,t)}}}}if(n&&o){if(o.isA("sap.ushell.appIntegration.ApplicationContainer")){const e=o;const t=e.getCurrentAppId();if(e.getIframeReusedForApp()){e.setIframeReusedForApp(false);if(e.isA("sap.ushell.appIntegration.IframeApplicationContainer")){e.sendRequest("sap.ushell.sessionHandler.afterApplicationShow",{},false)}}if(s.get(t)){await this._restoreApplication(t)}}else{if(l){await this._destroyKeepAliveApps(e=>e.keepAliveMode===f.Restricted)}k.flush()}}};X.prototype._storeApplication=async function(e){const t=s.get(e);if(t){const e=t.container;const i=e.getIsKeepAlive();if(!i){M.error("Application should be kept alive but the flag is not set",null,"sap.ushell.appIntegration.AppLifeCycle");return}if(e.isA("sap.ushell.appIntegration.IframeApplicationContainer")){e.setDataHelpId("");if(e.getStatefulType()===q.ContractV2){const t=u.isStatefulContainerSupportingKeepAlive(e);if(t){const t=e.getCurrentAppId();if(!t){return}this._setContainerReadyForReuse(e);await u.storeAppWithinSameFrame(e,t)}}await e.sendRequest("sap.ushell.appRuntime.keepAliveAppHide",{},false)}else if(e.isA("sap.ushell.appIntegration.UI5ApplicationContainer")){await l.storeApp(e,t)}t.stateStored=true;const n=e.getCurrentAppTargetResolution();this._publishAppClosedEvent(n)}};X.prototype._destroyApplication=async function(e,t,i){if(typeof e!=="string"||!t){return}const n=s.get(e);const a=!!n;if(!t.getCurrentAppId()&&!i&&!a){return}const o=t.getCurrentAppTargetResolution();s.removeById(e);$.destroy(n);const r=t.getStatefulType()!==q.NotSupported;if(!i&&r){t.setDataHelpId("");this._setContainerReadyForReuse(t);if(t.getStatefulType()===q.ContractV2){await u.destroyApp(t,e)}else if(t.getStatefulType()===q.ContractV1){await c.destroyApp(t,e)}this._publishAppClosedEvent(o);return}if(t.getStatefulType()===q.ContractV2){await u.destroyApp(t,e)}else if(t.getStatefulType()===q.ContractV1){await c.destroyApp(t,e)}s.removeByContainer(t,e=>{$.destroy(e)});try{const e=t.sendBeforeAppCloseEvent();await w.promisify(e)}catch(e){M.error("FLP got a failed response from the iframe for the 'sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent' message sent",e,"sap.ushell.appIntegration.AppLifeCycle.js")}h.removeByContainer(t);this._removeApplicationContainerFromNavContainer(t);try{t.destroy()}catch(e){M.error(`Exception when trying to close application with id '${t.getId()}'. This error must be fixed in order for FLP to operate properly.`,e,"sap.ushell.appIntegration.AppLifeCycle")}this._publishAppClosedEvent(o)};X.prototype._restoreApplication=async function(e){const t=s.get(e);if(t?.stateStored){o.restore(t.service);O.restore(t);const e=t.container;if(e.isA("sap.ushell.appIntegration.IframeApplicationContainer")){await e.sendRequest("sap.ushell.appRuntime.keepAliveAppShow",{},false)}else if(e.isA("sap.ushell.appIntegration.UI5ApplicationContainer")){await l.restoreAppAfterNavigate(e,t)}}};X.prototype._handleExitApplication=async function(e,t){if(!e){return}const i=e.getCurrentAppId();if(!i){return}const n=o.isBackNavigation()&&!t;if(n){await this._destroyApplication(i,e)}else{if(e.getIsKeepAlive()){return this._storeApplication(i)}return this._destroyApplication(i,e)}};X.prototype._destroyKeepAliveApps=async function(e,t){try{const i=[];s.forEach(t=>{if(e(t)){i.push(t)}});const n=i.map(e=>this._destroyApplication(e.appId,e.container,t));await Promise.allSettled(n)}catch(e){M.error("_destroyKeepAliveApps call failed",e)}};X.prototype._addStorageEntry=function(e,t,i,n,a){const o=s.get(e);if(o){return o}const r={service:{},shellHash:`#${H.constructShellHash(n)}`,appId:e,stt:"loading",currentState:null,controlManager:null,container:t,meta:undefined,app:undefined,keepAliveMode:a,appTarget:i,ui5ComponentName:i.ui5ComponentName,enableRouterRetrigger:this._bEnableRouterRetrigger,stateStored:false};s.set(e,r);return r};X.prototype.storeAppExtensions=async function(){const e=this.getCurrentApplication();if(!e){return}const t=e.appId;const i=s.get(t);if(!i){return}o.store(i.service);$.store(i);k.store(i)};X.prototype._calculateKeepAliveMode=function(e,t,i){const n=Object.values(f);if(e.startsWith("application-Shell-startIntent")||e.startsWith("application-Shell-startGUI")||e.startsWith("application-Shell-startWDA")){return f.False}let a=new URLSearchParams(window.location.search).get("sap-keep-alive");if(n.includes(a)){return a}a=i.params?.["sap-keep-alive"];if(n.includes(a)){return a}if(t.url){a=F.fromURL(t.url).get("sap-keep-alive");if(n.includes(a)){return a}}const s=H.constructShellHash(i);if(s&&w.isRootIntent(s)){return f.True}return f.False};X.prototype._calculateAppType=function(e){if(e.applicationType==="URL"&&e.additionalInformation?.startsWith?.("SAPUI5.Component=")){return"SAPUI5"}return e.applicationType};X.prototype._reloadCurrentApp=async function(e){const t=h.getById(e.sAppContainerId);if(t){await this._destroyApplication(t.getCurrentAppId(),t)}const i=await B.getServiceAsync("ShellNavigationInternal");try{i.hashChanger.treatHashChanged(e.sCurrentHash)}catch(e){M.error("Error when trying to re-load the current displayed application",e,"sap.ushell.services.AppLifeCycle")}};X.prototype._createOrReuseApplicationContainer=function(e,t,i,n){let a;const o=s.get(e);if(o&&o.container){a=o.container}if(!a){const e=h.findFreeContainerByUrl(i.url);const t=e?.getStatefulType()!==q.NotSupported;if(t){a=e}}if(!a){i.shellUIService=this._oGlobalShellUIService.getInterface();const n=i?.ui5ComponentName;const s=!!n;const o={dataHelpId:t,initialAppId:e,currentAppId:e,currentAppUrl:i.url,shellUIService:i.shellUIService,currentAppTargetResolution:i,applicationType:i.applicationType,openWithPostByAppParam:i.openWithPostByAppParam,reservedParameters:i.reservedParameters,systemAlias:i.systemAlias,targetNavigationMode:i.targetNavigationMode,url:i.url,frameworkId:i.appCapabilities?.appFrameworkId};if(s){a=new _({...o,ui5ComponentName:i.ui5ComponentName})}else{a=new S({...o})}this._oNavContainer.addPage(a)}else{a.setIsFetchedFromCache(true);a.setDataHelpId(t)}h.setContainerActive(a);a.setIsKeepAlive(n);return a};X.prototype._removeApplicationContainerFromNavContainer=function(e){this._oNavContainer.removePage(e.getId(),true)};X.prototype._setApplicationContainerActive=function(e){h.forEach(t=>{if(t&&t!==e){try{M.info(`Deactivating container ${t.getId()}`);t.setActive(false)}catch(e){}}});if(e){M.info(`Activating container "${e.getId()}"`);e.setActive(true)}};X.prototype._openApp=async function(e,t,i,n,a){const o=t.getIsFetchedFromCache();if(a&&o&&u.isStatefulContainerSupportingKeepAlive(t)){return u.restoreAppWithinSameFrame(t,i.url,e,i)}if(t.getStatefulType()===q.ContractV2){if(o&&t.getCurrentAppId()===e){return}const n=await u.createApp(t,i.url,e,i);if(n?.deletedKeepAliveId){const e=s.get(n.deletedKeepAliveId);if(e){s.removeById(n.deletedKeepAliveId);$.destroy(e)}}return}if(t.getStatefulType()===q.ContractV1){if(o&&t.getCurrentAppId()===e){return}await c.createApp(t,e,i);return}const r=i?.ui5ComponentName;const p=!!r;if(p&&!a){const a=!!i?.componentHandle;if(!a){b.setApplicationInInitMode();await l.createApp(t,i,n);const e=R.last("/core/extension/SupportTicket");if(e){w.awaitTimeout(0).then(()=>w.requireAsync(["sap/ushell/UserActivityLog"])).then(([e])=>{e.activate()})}}const s=i.componentHandle;const o=s.getInstance();t.setUi5ComponentId(i.ui5ComponentId);t.setComponentHandle(s);this._oCurrentApplication.app=o;const r=await l.getNavigationRedirectHash(t);if(typeof r==="string"){await this._destroyApplication(e,t);return r}if(typeof o.active==="function"){o.active()}}};X.prototype._announceAppOpening=function(e){window.setTimeout(()=>{const e=document.getElementById("sapUshellLoadingAccessibilityHelper-loadingComplete");if(e){e.setAttribute("aria-live","polite");e.innerHTML=x.i18n.getText("loadingComplete");window.setTimeout(()=>{e.setAttribute("aria-live","off");e.innerHTML=""},0)}},600)};X.prototype.publishAppOpeningEvent=function(e){window.setTimeout(()=>{a.getInstance().publish("launchpad","appOpening",e)},0)};X.prototype.publishAppOpenedEvent=function(e){w.setPerformanceMark("FLP.appOpened");window.setTimeout(()=>{a.getInstance().publish("sap.ushell","appOpened",e)},0);const t=this._publicEventDataFromResolutionResult(e);T.emit("AppRendered",t,true);U.publishExternalEvent("appOpened",t)};X.prototype._publishAppClosedEvent=function(e){window.setTimeout(()=>{a.getInstance().publish("sap.ushell","appClosed",e)},0);const t=this._publicEventDataFromResolutionResult(e);U.publishExternalEvent("appClosed",t)};X.prototype._publicEventDataFromResolutionResult=function(e){const t={};if(!e){return e}["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(i=>{t[i]=e[i]});Object.freeze(t);return t};X.prototype._isFullWidth=function(e,t){let i;const n=this._calculateAppType(e);const a=P.getDefaultFullWidthSetting(n);const s=e.appCapabilities?.fullWidth;if(a){if(e.fullWidth===false||e.fullWidth==="false"||t.fullWidth===false||t.fullWidth==="false"||s===false){i=false}}else if(e.fullWidth||e.fullWidth==="true"||t.fullWidth||t.fullWidth==="true"){i=true}if(i===undefined){i=a}return i};X.prototype._getBaseAppId=function(e){const t=H.getStableIntent(e);const i=H.getBasicHash(t);const n=`application-${i}`;return n};X.prototype._getStorageAppId=function(e,t){const i=H.getStableIntent(e);if(this._oStorageAppIdMap[i]){return this._oStorageAppIdMap[i]}let n;if(!this._oStorageAppIdNextIndex[t]){this._oStorageAppIdNextIndex[t]=0;n=t}if(!n){n=`${t}-${this._oStorageAppIdNextIndex[t]}`}this._oStorageAppIdMap[i]=n;this._oStorageAppIdNextIndex[t]++;return n};X.prototype._awaitLastApplicationStart=async function(){const e=new t;const i=this._pLastApplicationStart;this._pLastApplicationStart=this._pLastApplicationStart.then(()=>e.promise);await i;return e};X.prototype._startApplication=async function(e,t,i,n,a){const o=this._getBaseAppId(i.sFixedShellHash);const r=this._getStorageAppId(i.sFixedShellHash,o);await this._cleanupBeforeNewApp(r,t,i,n,a);this._sendFocusBackToShell();this.publishAppOpeningEvent(i);this._announceAppOpening(i);const p=this._calculateKeepAliveMode(r,i,t);const l=p!==f.False;const c=this._createOrReuseApplicationContainer(r,o,i,l);const u=!!s.get(r);if(l){this._oCurrentApplication=this._addStorageEntry(r,c,i,t,p)}else{this._oCurrentApplication={appId:r,stt:"loading",container:c,meta:undefined,app:undefined}}w.setPerformanceMark("FLP - addAppContainer");const h=s.get(r);if(h){k.restore(h)}else{k.flush()}this._setApplicationContainerActive(c);const g=await this._openApp(r,c,i,t,u);const A=new d(r,i,c,g);if(typeof g==="string"){return A}this._initializeAppWithMetadata(c,i);c.setReadyForRendering(true);w.setPerformanceMark("FLP -- centerViewPort");this.publishAppOpenedEvent(i);return A};X.prototype.startApplication=async function(e,t,i,n,a){const s=await this._awaitLastApplicationStart();const o=this._oCurrentApplication;try{const o=await this._startApplication(e,t,i,n,a);s.resolve();return o}catch(e){const t=!!this._oCurrentApplication?.appId;const i=t&&this._oCurrentApplication.appId!==o?.appId;if(i){const e=this._oCurrentApplication.container;if(e){await this._destroyApplication(e.getCurrentAppId(),e,true)}const t=o?.container?.isDestroyed()??true;if(t){this._oCurrentApplication={}}else{this._oCurrentApplication=o}}s.resolve();throw e}};X.prototype.switchViewState=function(e,t,i,n){const a=s.get(this._oCurrentApplication.appId);if(!a){W.destroyManagedControls()}const o=W.getShellMode();const r={TR:{headerless:G.Minimal}};let p;if(!n){p=r[i]?.[o]}W.switchState(e,p);const l=s.get(t);if(l){$.restore(l)}else{$.flush()}W.applyStalledChanges()};X.prototype._isFloatingContainerDocked=function(){const e=D.getModel().getProperty("/floatingContainer/state").includes("docked");const t=D.getModel().getProperty("/floatingContainer/visible");return e&&t};X.prototype._sendFocusBackToShell=function(){if(!i.system.desktop){return}sap.ui.require(["sap/ushell/renderer/AccessKeysHandler"],e=>{const t=W.getLaunchpadState();const i=W.getShellMode()===G.Default;const a=n.getElementById("shellAppTitle");if(a&&t===j.App&&i){const t=a.getFocusDomRef();if(t){e.sendFocusBackToShell(t.getAttribute("id"))}}})};X.prototype._initializeAppWithMetadata=function(e,t){const i=b.getMetadata(t,t?.sFixedShellHash);this._oCurrentApplication.meta=i;if(!e.getIsFetchedFromCache()){e.toggleStyleClass("sapUshellDefaultBackground",!i.hideLightBackground);const n=this._isFullWidth(t,i);if(!n){e.addStyleClass("sapUShellApplicationContainerLimitedWidth")}if(this._isFloatingContainerDocked()&&window.matchMedia("(min-width: 106.4rem)").matches){e.addStyleClass("sapUShellDockingContainer");e.removeStyleClass("sapUShellApplicationContainerLimitedWidth")}else if(this._isFloatingContainerDocked()){e.removeStyleClass("sapUShellApplicationContainerLimitedWidth")}}let n="sap-icon://folder";if(i&&i.icon){n=i.icon}W.updateCurrentState("application.icon",z.Set,n)};X.prototype._cleanupBeforeNewApp=async function(e,t,i,n,a){const o=this.getCurrentApplication()?.container;const r=o&&o.getStatefulType()!==q.NotSupported;if(r){await this._handleExitApplication(o,false)}const p=s.get(e);const l=!!p;const c=p?.container;const d=!!i?.ui5ComponentName;if(l){const i=`#${H.constructShellHash(t)}`;const s=H.compareHashes(i,p.shellHash);const o=s.sameIntent&&s.sameParameters;if(!o){M.warning(`The keepAlive app '${e}' has to be destroyed because of id clashes.`);await this._destroyApplication(e,c)}else if(n&&a){M.warning(`The keepAlive app '${e}' has to be destroyed because of a bookmark start.`);await this._destroyApplication(e,c)}}if(d&&!l){const t=H.getBasicHash(i.sFixedShellHash);const n=`application-${t}-component`;if(o&&o.isA("sap.ushell.appIntegration.UI5ApplicationContainer")){if(o.getUi5ComponentName()===i.ui5ComponentName){M.warning(`The app '${o.getCurrentAppId()}' has to be destroyed because of component name clashes.`);await this._destroyApplication(o.getCurrentAppId(),o,true)}else if(o.getUi5ComponentId()===n){M.warning(`The app '${o.getCurrentAppId()}' has to be destroyed because of component id clashes.`);await this._destroyApplication(o.getCurrentAppId(),o,true)}}await this._destroyKeepAliveApps(t=>{if(t.appId===e){return false}if(t.ui5ComponentName===i.ui5ComponentName){M.warning(`The app '${t.appId}' has to be destroyed because of component name clashes.`);return true}if(t.appTarget?.ui5ComponentId===n){M.warning(`The app '${t.appId}' has to be destroyed because of component id clashes.`);return true}return false},true)}const f=h.findFreeContainerByUrl(i.url);if(f&&f.getStatefulType()===q.ContractV2){let t=false;let i;if(f.getIsInvalidIframe()){t=true;i="iframe is in invalid state"}else if(u.isIframeIsValidSupported(f)){const e=(new Date).getTime()-f.getIsIframeValidTime().time;t=e>=Q;i=`iframe did not ping in the last '${e}' ms`}if(t){M.warning(`Destroying stateful container iframe due to unresponsiveness (${f.getId()})`,`reason: ${i}`,"sap.ushell.appIntegration.AppLifeCycle");return this._destroyApplication(e,f,true)}}};X.prototype.setNavContainer=function(e){this._oNavContainer=e};X.prototype._setContainerReadyForReuse=function(e){if(!e){return}h.setContainerReadyForReuse(e,e.getCurrentAppUrl());e.setIsKeepAlive(false);e.setCurrentAppUrl("");e.setIsFetchedFromCache(false)};X.prototype.reset=function(){this._aDoables.forEach(e=>{e.off()});this._aDoables=[];s._clean();h.destroyAllContainers();I.reset();this._oStorageAppIdMap={};this._oStorageAppIdNextIndex={};this._bDisableHomeAppCache=false;this._bEnableRouterRetrigger=true;this._oCurrentApplication={};this._oNavContainer=null;this._pLastApplicationStart=Promise.resolve();this._oStorageAppIdMap={};this._oStorageAppIdNextIndex={}};return new X});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/AppLifeCycle/KeepAliveMode", [],function(){"use strict";const e={True:"true",Restricted:"restricted",False:""};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/ApplicationContainer", ["sap/base/Log","sap/ui/core/Control","sap/ushell/appIntegration/ApplicationContainerRenderer","sap/ushell/library","sap/ushell/utils"],(e,t,i,a,s)=>{"use strict";const r=a.appIntegration.contracts.StatefulType;const o=a.components.container.ApplicationType;const n=t.extend("sap.ushell.appIntegration.ApplicationContainer",{metadata:{library:"sap.ushell",properties:{visible:{type:"boolean",defaultValue:true},height:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},width:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},active:{defaultValue:true,type:"boolean"},initialAppId:{defaultValue:"",type:"string"},currentAppId:{defaultValue:"",type:"string"},currentAppUrl:{defaultValue:"",type:"string"},shellUIService:{type:"object"},statefulType:{defaultValue:r.NotSupported,type:"sap.ushell.appIntegration.contracts.StatefulType"},beforeAppCloseEvent:{type:"object"},isKeepAlive:{defaultValue:false,type:"boolean"},isFetchedFromCache:{defaultValue:false,type:"boolean"},capabilities:{defaultValue:{},type:"object"},iframeReusedForApp:{defaultValue:false,type:"boolean"},isInvalidIframe:{defaultValue:false,type:"boolean"},isIframeValidTime:{defaultValue:{time:0},type:"object"},currentAppTargetResolution:{type:"object"},readyForRendering:{defaultValue:false,type:"boolean"},renderComplete:{defaultValue:false,type:"boolean"},frameworkId:{defaultValue:"",type:"string"},applicationType:{defaultValue:o.URL,type:"sap.ushell.components.container.ApplicationType"},openWithPostByAppParam:{defaultValue:true,type:"boolean"},reservedParameters:{type:"object"},systemAlias:{defaultValue:"",type:"string"},targetNavigationMode:{defaultValue:"",type:"string"},url:{defaultValue:"",type:"string"},dataHelpId:{type:"string",defaultValue:""}},events:{applicationConfiguration:{parameters:{configuration:{type:"object"}}}},interfaces:["sap.ushell.renderer.INavContainerPage"]},renderer:i});n.ui5version=null;n.ui5versionPromise=s.getUi5Version().then(t=>{e.debug(`Using ui5-version: ${t}`,null,"sap.ushell.appIntegration.ApplicationContainer");n.ui5version=t});n.prototype.getUi5Version=function(){return n.ui5version};n.prototype.init=function(){this.setProperty("capabilities",{},true)};n.prototype.invalidate=function(){if(this.getRenderComplete()){return this}return t.prototype.invalidate.apply(this,arguments)};n.prototype.setVisibility=function(e){this.setProperty("visible",e,true);if(e){this.removeStyleClass("sapUShellApplicationContainerHidden")}else{this.addStyleClass("sapUShellApplicationContainerHidden")}const t=this.getDomRef();if(t){t.setAttribute("aria-hidden",!e)}};n.prototype.setDataHelpId=function(e){this.setProperty("dataHelpId",e);const t=this.getDomRef();if(t){t.setAttribute("data-help-id",e)}return this};n.prototype.setActive=function(e){this.setProperty("active",e);const t=this.getDomRef();if(t){t.setAttribute("data-sap-ushell-active",e)}return this};n.prototype.setInitialAppId=function(e){this.setProperty("initialAppId",e);const t=this.getDomRef();if(t){t.setAttribute("data-sap-ushell-initial-app-id",e)}return this};n.prototype.setCurrentAppId=function(e){this.setProperty("currentAppId",e);const t=this.getDomRef();if(t){t.setAttribute("data-sap-ushell-current-app-id",e)}return this};n.prototype.setStatefulType=function(e){this.setProperty("statefulType",e);const t=this.getDomRef();if(t){t.setAttribute("data-sap-ushell-stateful-type",e)}return this};n.prototype.setFrameworkId=function(e){this.setProperty("frameworkId",e);const t=this.getDomRef();if(t){t.setAttribute("data-sap-ushell-framework-id",e)}return this};n.prototype.sendBeforeAppCloseEvent=async function(){};n.setHandleMessageEvent=function(e){n.handleMessageEvent=e;return this};n.prototype.isTrustedPostMessageSource=function(e){return false};n.prototype.getPostMessageTarget=function(){};n.prototype.getPostMessageTargetOrigin=function(){return""};n.prototype.addCapabilities=function(e){const t=this.getCapabilities();e.forEach(e=>{t[`${e}`.toLowerCase()]=true});return this};n.prototype.removeCapabilities=function(e){const t=this.getCapabilities();if(!e){this.setProperty("capabilities",{},true);return this}e.forEach(e=>{delete t[`${e}`.toLowerCase()]});return this};n.prototype.supportsCapabilities=function(e){const t=this.getCapabilities();return e.every(e=>t[`${e}`.toLowerCase()])};n._setCachedUI5Version=function(e){n.ui5version=e;n.ui5versionPromise=n.ui5versionPromise.then(()=>{n.ui5version=e})};return n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/ApplicationContainerCache", ["sap/base/Log"],function(e){"use strict";class t{#e=[];#t={};constructor(){this.init()}init(){this.#e=[];this.#t=[]}setContainerActive(t){if(!t){return}if(this.#e.includes(t)){e.warning("The container is already active");return}this.removeByContainer(t);this.#e.push(t)}setContainerReadyForReuse(t,i){if(!t){return}if(!this.#e.includes(t)&&this.getById(t.getId())){e.warning("The container is already in pool");return}this.removeByContainer(t);this.#t.push({url:i,key:this.#i(i),container:t})}findFreeContainerByUrl(e){const t=this.#i(e);const i=this.#t.reverse().find(e=>e.key===t);if(i){return i.container}}canBeReused(e,t){if(!e){return false}if(this.#e.includes(e)){return false}const i=this.#i(t);const n=this.#t.find(t=>t.container===e);return!!n&&n.key===i}getLength(){return this.#e.length}getPoolLength(){return this.#t.length}removeByContainer(e){if(!e){return}this.#e=this.#e.filter(t=>t!==e);this.#t=this.#t.filter(t=>t.container!==e)}getById(e){let t;this.forEach(i=>{if(i.getId()===e){t=i}});return t}getAll(){return[...this.#e,...this.#t.map(e=>e.container)]}forEach(e){this.#e.forEach(t=>{e(t)});this.#t.forEach(t=>{e(t.container)})}#i(e){let t;let i="";let n="";let a="";let s="";let r="";const o=new URL(e,this._getWindowLocationHref());t=o.origin;if(o.port===""){if(o.protocol==="https:"){t=t+":443"}else if(o.protocol==="http:"){t=t+":80"}}const h=o.searchParams;if(h.has("sap-iframe-hint")){i="@hint:"+h.get("sap-iframe-hint")}if(h.has("sap-ui-version")){n="@uiver:"+h.get("sap-ui-version")}if(h.has("sap-async-loading")&&h.get("sap-async-loading")!=="true"){a="@async:"+h.get("sap-async-loading")}if(h.has("sap-enable-fesr")&&h.get("sap-enable-fesr")!=="false"){s="@fesr:"+h.get("sap-enable-fesr")}if(h.has("sap-testcflp-iframeid")){r="@testid:"+h.get("sap-testcflp-iframeid")}return t.toLowerCase()+i+n+a+s+r}_getWindowLocationHref(){return window.location.href}_getStorageForDebug(){return{activeContainers:this.#e,reusableContainers:this.#t}}destroyAllContainers(){this.forEach(e=>{this.removeByContainer(e);e.destroy()})}}return new t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/ApplicationContainerRenderer", [],()=>{"use strict";const t={apiVersion:2};t.waitForUI5Version=function(t){const e=t.getMetadata().getClass();if(e.ui5version===null){e.ui5versionPromise.then(()=>{t.invalidate()});return true}};t.render=function(t,e){t.openStart("div",e);t.accessibilityState(e);t.attr("data-help-id",e.getDataHelpId());t.attr("data-sap-ushell-active",e.getActive());t.attr("data-sap-ushell-initial-app-id",e.getInitialAppId());t.attr("data-sap-ushell-current-app-id",e.getCurrentAppId());t.attr("data-sap-ushell-stateful-type",e.getStatefulType());t.attr("data-sap-ushell-framework-id",e.getFrameworkId());t.class("sapUShellApplicationContainer");t.style("height",e.getHeight());t.style("width",e.getWidth());t.openEnd();t.close("div")};return t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/ApplicationHandle", ["sap/ushell/state/StateManager"],function(t){"use strict";const a=t.LaunchpadState;class e{static#t=null;static#a=null;#e=null;#i=null;#s=null;#n=null;constructor(t,a,e,i){this.#e=t;this.#i=a;this.#s=e;this.#n=i}static init(t,a){this.#a=t;this.#t=a}navTo(t){const i=this.#s.getId();e.#t.navTo(i);e.#a.switchViewState(t?a.Home:a.App,this.#e,this.#i.applicationType,this.#i.explicitNavMode)}getNavigationRedirectHash(){return this.#n}}return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/IframeApplicationContainer", ["sap/base/Log","sap/base/util/uid","sap/ui/Device","sap/ui/thirdparty/URI","sap/ushell/appIntegration/ApplicationContainer","sap/ushell/appIntegration/IframeApplicationContainerRenderer","sap/ushell/appIntegration/PostMessageManager","sap/ushell/ApplicationType/UrlPostProcessing","sap/ushell/ApplicationType/systemAlias","sap/ushell/Config","sap/ushell/Container","sap/ushell/library","sap/ushell/System","sap/ushell/utils","sap/ushell/utils/UriParameters"],(e,t,s,i,r,a,n,o,l,p,g,h,u,f,c)=>{"use strict";const d=r.extend("sap.ushell.appIntegration.IframeApplicationContainer",{metadata:{library:"sap.ushell",properties:{visible:{type:"boolean",defaultValue:true},globalDirtyStorageKey:{defaultValue:"",type:"string"},iframeUrl:{defaultValue:"",type:"string",visibility:"hidden"},iframePostAllParams:{defaultValue:false,type:"boolean"},iframeWithPost:{defaultValue:false,type:"boolean"}},interfaces:["sap.ushell.renderer.INavContainerPage"]},renderer:a});d.prototype.init=function(){r.prototype.init.apply(this,arguments);this._aPendingRequestsWaitingForResponse=[];this.setProperty("isIframeValidTime",{time:0},true);const e=`sap.ushell.Container.dirtyState.${t()}`;this.setProperty("globalDirtyStorageKey",e,true);localStorage.removeItem(this.getGlobalDirtyStorageKey());this._fnStorageEventListener=this._handleStorageEvent.bind(this);addEventListener("storage",this._fnStorageEventListener);this._fnPagehideEventListener=this.exit.bind(this);addEventListener("pagehide",this._fnPagehideEventListener)};d.prototype.onBeforeRendering=function(){if(!this.getReadyForRendering()){return}this._attachLogoutEvent();this._initNWBCStorage();this._addRemoteSystemForUrl();this._calculateIframeUrl();this._calculateIframeWithPost();if(!this.getProperty("iframeWithPost")){const e=this.getProperty("iframeUrl");const t=l.addSystemAlias(e,this);this.setProperty("iframeUrl",t,true)}};d.prototype.onAfterRendering=async function(){if(!this.getReadyForRendering()){return}const e=await g.getServiceAsync("MessageBroker");const t=this.getPostMessageTargetOrigin();e.addAcceptedOrigin(t);if(s.os.ios&&this.$().prop("tagName")==="IFRAME"){this.$().parent().css("overflow","auto")}};d.prototype.setVisibility=function(e){this.setProperty("visible",e,true);const t=this.getDomRef();if(t){t.setAttribute("aria-hidden",!e)}if(e){this.removeStyleClass("sapUShellApplicationContainerIframeHidden");this.removeStyleClass("sapUShellApplicationContainerIframeHiddenButActive");return}if(this._aPendingRequestsWaitingForResponse.length>0){this.addStyleClass("sapUShellApplicationContainerIframeHiddenButActive")}else{this.addStyleClass("sapUShellApplicationContainerIframeHidden")}};d.prototype.setDataHelpId=function(e){r.prototype.setDataHelpId.apply(this,arguments);if(!this.getDomRef()||!this.getIframeWithPost()){return this}const t=this._getIframe();if(t){t.setAttribute("data-help-id",`${e}-iframe`)}return this};d.prototype._attachLogoutEvent=function(){const e=this.getApplicationType();if(f.isApplicationTypeEmbeddedInIframe(e)){this._fnLogout=this._handleLogout.bind(this);g.attachLogoutEvent(this._fnLogout)}};d.prototype._initNWBCStorage=function(){const e=this.getApplicationType();if(f.isApplicationTypeEmbeddedInIframe(e,true)||f.isApplicationTypeEmbeddedInIframe(this.getFrameworkId())){f.localStorageSetItem(this.getGlobalDirtyStorageKey(),g.DirtyState.INITIAL)}};d.prototype._calculateIframeWithPost=function(){const e=c.fromURL(document.URL);const t=this.getApplicationType();const s=p.last("/core/shell/enableOpenIframeWithPost")??true;const i=e.get("sap-post")==="false";const r=e.get("sap-post")==="true";const a=this.getOpenWithPostByAppParam()===false;const n=["NWBC","TR","WDA","WCF"].includes(t);let o;if(r){o=true}else if(i){o=false}else if(a){o=false}else{o=s&&n}if(o&&t==="TR"){this.setProperty("iframePostAllParams",true,true)}this.setProperty("iframeWithPost",o,true)};d.prototype._calculateIframeUrl=function(){const e=this.getApplicationType();let t=this.getUrl();t=o.processUrl(t,e,false,this);t=this._injectParametersFromUrl(t);this.setProperty("iframeUrl",t,true)};d.prototype._injectParametersFromUrl=function(e){const t=c.fromURL(document.URL);if(!t.has("sap-iframe-params")){return e}const s=t.get("sap-iframe-params")||"";const r=s.split(",");if(r.length===0){return e}const a=new i(e);r.forEach(e=>{if(e&&t.has(e)){a.addQuery(e,t.get(e))}});e=a.toString();return e};d.prototype._addRemoteSystemForUrl=function(){if(this._oSystem){return}const e=this.getUrl();const t=document.createElement("a");const s=c.fromURL(e).get("sap-client");t.href=e;const i=`${t.protocol}//${t.host}`;this._oSystem=new u({alias:s?`${i}?sap-client=${s}`:i,baseUrl:i,client:s||undefined,platform:"abap"});g.addRemoteSystem(this._oSystem)};d.prototype._handleStorageEvent=function(t){if(t.key!==this.getGlobalDirtyStorageKey()){return}if(t.newValue!==g.DirtyState.PENDING){return}const s=this.getPostMessageTarget();if(!s){return}e.debug("getGlobalDirty() send pro54_getGlobalDirty ",null,"sap.ushell.appIntegration.ApplicationContainer");const i=this.getPostMessageTargetOrigin();const r=JSON.stringify({action:"pro54_getGlobalDirty"});s.postMessage(r,i)};d.prototype._handleLogout=function(e){const t=this.getPostMessageTarget();const s=this.getApplicationType();if(t&&f.isApplicationTypeEmbeddedInIframe(s)){const s=this.getPostMessageTargetOrigin();t.postMessage(JSON.stringify({action:"pro54_disableDirtyHandler"}),s);e.preventDefault()}};d.prototype._getIframe=function(){const e=this.getDomRef();if(!e||e.tagName!=="IFRAME"){if(this.getIframeWithPost()===true&&e&&e.getAttribute&&e.getAttribute("data-sap-ushell-iframe-app")==="true"){return document.getElementById(`${e.getAttribute("id")}-iframe`)}return null}return e};d.prototype.getPostMessageTarget=function(){const e=this._getIframe();return e?.contentWindow};d.prototype.getPostMessageTargetOrigin=function(){let e;const t=this._getIframe();if(!t){return""}if(this.getIframeWithPost()===true){const s=`${t.getAttribute("id").replace("-iframe","-form")}`;const r=document.getElementById(s);e=r?.action;if(e===undefined&&(new i).query(true).hasOwnProperty("sap-isolation-enabled")){e=t.src}}else{e=t.src}const s=new i(e);const r=`${s.protocol()}://${s.host()}`;return r};d.prototype.isTrustedPostMessageSource=function(e){if(!e){return false}if(e.source&&e.source===this.getPostMessageTarget()){return true}if(e.origin&&e.origin===this.getPostMessageTargetOrigin()){return true}return false};d.prototype.sendRequest=async function(e,t,s=false){if(!s){return n.sendRequest(e,t,this.getPostMessageTarget(),this.getPostMessageTargetOrigin(),false)}if(!this.getProperty("visible")){this.addStyleClass("sapUShellApplicationContainerIframeHiddenButActive");this.removeStyleClass("sapUShellApplicationContainerIframeHidden")}const i=n.sendRequest(e,t,this.getPostMessageTarget(),this.getPostMessageTargetOrigin(),true);this._aPendingRequestsWaitingForResponse.push(i);const r=await i;this._aPendingRequestsWaitingForResponse=this._aPendingRequestsWaitingForResponse.filter(e=>e!==i);if(this._aPendingRequestsWaitingForResponse.length===0&&!this.getProperty("visible")){this.addStyleClass("sapUShellApplicationContainerIframeHidden");this.removeStyleClass("sapUShellApplicationContainerIframeHiddenButActive")}return r};d.prototype.sendBeforeAppCloseEvent=async function(){const e=this.getBeforeAppCloseEvent&&this.getBeforeAppCloseEvent();if(e&&e.enabled&&e.enabled===true){return this.sendRequest("sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent",e.params,true)}};d.prototype.exit=function(){localStorage.removeItem(this.getGlobalDirtyStorageKey());if(this._fnStorageEventListener){removeEventListener("storage",this._fnStorageEventListener)}if(this._fnPagehideEventListener){removeEventListener("pagehide",this._fnPagehideEventListener)}if(this._fnLogout){g.detachLogoutEvent(this._fnLogout)}r.prototype.exit.apply(this,arguments)};return d});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/IframeApplicationContainerRenderer", ["sap/base/Log","sap/ui/core/Renderer","sap/ui/core/RenderManager","sap/ui/thirdparty/URI","sap/ushell/appIntegration/ApplicationContainerRenderer","sap/ushell/ApplicationType/systemAlias","sap/ushell/Config","sap/ushell/Container","sap/ushell/resources","sap/ushell/utils","sap/ushell/utils/UriParameters"],(t,e,a,r,i,s,n,l,o,p,d)=>{"use strict";let f=0;const c=e.extend(i);c.render=function(t,e){if(!e.getReadyForRendering()){i.render(t,e);return}if(this.waitForUI5Version(e)){return}if(e.getProperty("iframeWithPost")){const a=e.getProperty("iframeUrl");this._renderIframeWithPOST(t,e,a,++f)}else{this._renderIframe(t,e)}e.setRenderComplete(true)};c._renderIframe=function(t,e){const a=e.getProperty("iframeUrl");e.fireEvent("applicationConfiguration");t.openStart("iframe",e);t.accessibilityState(e);t.attr("src",a);t.attr("title",o.i18n.getText("AppilcationContainer.IframeTitle"));t.attr("data-help-id",e.getDataHelpId());t.attr("data-sap-ushell-active",e.getActive());t.attr("data-sap-ushell-iframe-idx",++f);t.attr("data-sap-ushell-initial-app-id",e.getInitialAppId());t.attr("data-sap-ushell-current-app-id",e.getCurrentAppId());t.attr("data-sap-ushell-stateful-type",e.getStatefulType());t.attr("data-sap-ushell-framework-id",e.getFrameworkId());t.class("sapUShellApplicationContainer");t.style("height",e.getHeight());t.style("width",e.getWidth());if(n.last("/core/shell/enableFeaturePolicyInIframes")===true){t.attr("allow",p.getIframeFeaturePolicies())}t.openEnd();t.close("iframe")};c._renderIframeWithPOST=function(e,r,i,s){const n=p.filterOutParamsFromLegacyAppURL(i);this._renderPostWrapper(e,r);this._getAdditionalDataForPost(r,n).then(async t=>{const e=new a;const i=`${r.getId()}-form`;const l=`${r.getId()}-iframe`;const o=this._calculatePostUrls(r,n);this._renderPostForm(e,r,i,l,t,o.form,`${r.getDataHelpId()}-form`,o.iframeWithoutSystemAlias);this._renderPostIframe(e,r,l,o.iframe,o.form,`${r.getDataHelpId()}-iframe`,s);e.flush(r.getDomRef());e.destroy();r.fireEvent("applicationConfiguration");await p.awaitTimeout(0);return i}).then(e=>{const a=document.getElementById(e);if(a){a.submit()}else{t.error("Form element not found")}})};c._renderPostWrapper=function(t,e){t.openStart("div",e);t.attr("data-help-id",e.getDataHelpId());t.attr("data-sap-ushell-active",e.getActive());t.attr("data-sap-ushell-iframe-app","true");t.attr("data-sap-ushell-initial-app-id",e.getInitialAppId());t.attr("data-sap-ushell-current-app-id",e.getCurrentAppId());t.attr("data-sap-ushell-stateful-type",e.getStatefulType());t.attr("data-sap-ushell-framework-id",e.getFrameworkId());t.class("sapUShellApplicationContainer");t.style("height",e.getHeight());t.style("width",e.getWidth());t.openEnd();t.close("div")};c._calculatePostUrls=function(t,e){const a=d.fromURL(e);const i=e;const n=s.addSystemAlias(i,t);let l=e;if(t.getIframePostAllParams()){if(this._getPostParameters(t,i).length){const t=a.get("sap-iframe-hint");const i=a.get("sap-keep-alive");const s=new r(e).query("");if(typeof t==="string"){s.addSearch("sap-iframe-hint",t)}if(typeof i==="string"){s.addSearch("sap-keep-alive",i)}l=s.toString()}}return{iframeWithoutSystemAlias:i,iframe:n,form:l}};c._getAdditionalDataForPost=async function(t,e){let a=[];let r=[];const i=p.getParamKeys(e);if(i.aAppStateNamesArray.length){const t=await l.getServiceAsync("Navigation");try{const e=await t.getAppStateData(i.aAppStateKeysArray);if(e){a=[...i.aAppStateNamesArray];r=[...e]}}catch{}}a.push("sap-flp-url");r.push(l.getFLPUrl(true));a.push("system-alias");r.push(t.getSystemAlias());const s={};a.forEach((t,e)=>{if(r[e]||t==="system-alias"){s[t]=r[e]}});return s};c._renderPostForm=function(t,e,a,r,i,s,n,l){const o=JSON.stringify(i);t.openStart("form");t.attr("id",a);t.attr("method","post");t.attr("name",a);t.attr("target",r);t.attr("action",s);t.attr("data-help-id",n);t.style("display","none");t.openEnd();t.voidStart("input");t.attr("name","sap-flp-params");t.attr("value",o);t.voidEnd();if(e.getIframePostAllParams()){const a=this._getPostParameters(e,l);a.forEach(e=>{t.voidStart("input");t.attr("name",e.key);t.attr("value",e.value);t.voidEnd()})}t.close("form")};c._renderPostIframe=function(t,e,a,i,s,l,d){t.openStart("iframe",a);t.attr("name",a);t.accessibilityState(e);t.attr("sap-orig-src",i);t.attr("title",o.i18n.getText("AppilcationContainer.IframeTitle"));t.attr("data-help-id",l);t.attr("data-sap-ushell-iframe-idx",d);t.class("sapUShellApplicationContainer");t.style("height",e.getHeight());t.style("width",e.getWidth());if(n.last("/core/shell/enableFeaturePolicyInIframes")){t.attr("allow",p.getIframeFeaturePolicies().replaceAll(";",` ${new r(s).origin()};`))}t.openEnd();t.close("iframe")};c._getPostParameters=function(t,e){const a=d.fromURL(e);const r=[];let i="";if(a.has("sap-iframe-hint")){i=a.get("sap-iframe-hint")}const s=a.mParams;if(t.getApplicationType()==="TR"||i==="GUI"){for(const t in s){if(t==="sap-iframe-hint"||t==="sap-keep-alive"){continue}r.push({key:t,value:s[t][0]})}}return r};return c});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/KeepAliveApps", [],function(){"use strict";function t(){var t={};this._clean=function(){t={}};this.get=function(n){if(n&&t.hasOwnProperty(n)){return t[n]}return undefined};this.set=function(n,e){if(n){t[n]=e}};this.removeById=function(n){if(n&&t.hasOwnProperty(n)){delete t[n]}};this.removeByContainer=function(t,n){this.forEach((e,i)=>{if(e.container===t){if(n){n(e)}this.removeById(i)}})};this.forEach=function(n){Object.keys(t).forEach(function(e){n.apply(this,[t[e],e,this])})};this.length=function(){return Object.keys(t).length}}return new t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/PostMessageManager", ["sap/base/Log","sap/base/util/Deferred","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/uid"],(e,s,t,i,r)=>{"use strict";const n={provideApplicationContext:false,allowInactive:false};const a={activeOnly:false,ignoreCapabilities:false};const o=Symbol("DoNotReply");const l=e.getLogger("sap.ushell.appIntegration.PostMessageManager");class d{#e=()=>{throw new Error("PostMessageManager is not initialized")};#s=()=>{throw new Error("PostMessageManager is not initialized")};#t=()=>{throw new Error("PostMessageManager is not initialized")};#i=false;#r=false;#n=[];#a=[];#o={};#l={};#d=true;#c=[];init(e={}){if(this.#i){throw new Error("PostMessageManager is already initialized.")}const s=i.get("sap-ushell-config.services.PostMessage.config")||{};if(s.enabled===false){this.#r=true;this.#i=true;l.warning("PostMessageAPI is disabled by configuration.");return}const t=e.getCurrentApplication||function(){};this.#s=t;const r=e.getAllApplications||function(){return[]};this.#t=r;if(e.skipReplay){this.#d=false}this.#e=this.#u.bind(this);addEventListener("message",this.#e);this.#i=true}async#u(e){let s;try{if(typeof e.data==="string"){s=JSON.parse(e.data)}else if(t(e.data)){s=e.data}else{throw new Error("Invalid message format")}s.body=s.body||{}}catch{l.debug("Received Post Message with invalid JSON. Ignoring the message.",e.data);return}const i=this.#g(e,s);e=i.oEvent;s=i.oMessage;if(!s.service){l.debug("Received Post Message without a service name. Ignoring the message.");return}const r=e.source;const n=e.origin;l.debug(`Received postMessage ${s.service} (${s.request_id}) from iframe with domain '${n}'`,JSON.stringify(s,null,2));if(!["response","request"].includes(s.type)){l.warning(`Received Post Message with an invalid type: '${s.type}'. Ignoring the message.`);return}if(s.type==="response"){const t=this.#p(e);if(t){l.debug(`Response for ${s.service} (${s.request_id}) was handled by a response handler.`)}return}let a;let d=true;try{const t=await this.#f(s,r,n,e);l.debug(`Service request for ${s.service} (${s.request_id}) was handled successfully.`);if(t===o){l.debug(`Service request for ${s.service} (${s.request_id}) was handled successfully, but no response is needed.`);return}if(t&&typeof t==="object"&&Object.hasOwn(t,"_noresponse_")){l.debug(`Service request for ${s.service} (${s.request_id}) was handled successfully, but no response is needed.`);return}a={result:t}}catch(e){d=false;l.error(`Service request for ${s.service} (${s.request_id}) failed.`,e);let t;let i=e;if(e instanceof Error){i=e.message;t=e.stack}a={message:i,stack:t}}return this.sendResponse(s.request_id,s.service,a,d,r,n)}#g(e,s){let t;this.#n.forEach(i=>{if(t){return}t=i(e,s)});return{oEvent:t||e,oMessage:s}}#p(e){let s=false;this.#a.forEach(t=>{if(s){return}s=t(e)});return s}async#f(e,s,t,i){const r=e.service;const n=this.#h(r);if(!n){if(this.#d){this.#c.push(i);return o}await this.sendResponse(e.request_id,r,{code:-1,message:`Unknown service name: '${r}'`},false,s,t);return o}const a=this.#b(r);if(typeof a?.isValidRequest==="function"){const e=await a.isValidRequest(i);if(!e){throw new Error(`Invalid request for service ${r}.`)}}if(a.provideApplicationContext){const t=this.#v(s);if(!t){throw new Error("Cannot find the related application for the service request.")}if(!t.getActive()&&!a?.allowInactive){throw new Error("Received Post Message from an inactive application.")}if(!t.isTrustedPostMessageSource(i)){throw new Error("Received Post Message from an untrusted source.")}l.debug(`Handling service request for ${r} (${e.request_id}) with application context ${t.getId()}.`);return n(e.body,t,i)}l.debug(`Handling service request for ${r} (${e.request_id}) without application context.`);return n(e.body,i)}#h(e){return this.#o[e]?.handler}#b(e){return this.#o[e]?.options}#v(e){let s;this.#t().forEach(t=>{if(s||!t.isA("sap.ushell.appIntegration.IframeApplicationContainer")){return}const i=t.getPostMessageTarget();if(i===e){s=t}});if(s){return s}l.error("Cannot find the related application for the service request; using the current application as fallback. This fallback will be removed in future");const t=this.#s();if(t&&t.isA("sap.ushell.appIntegration.IframeApplicationContainer")){return t}}addEventPreprocessor(e){this.#n.push(e)}setRequestHandler(e,s,t={}){if(this.#o[e]){l.error(`Request handler for service ${e} is already defined. Overwriting the existing handler.`)}this.#o[e]={handler:s,options:{...n,...t}}}async sendRequest(e,s,t,i,n){if(this.#r){throw new Error("PostMessageAPI is disabled by configuration.")}if(!this.#i){throw new Error("PostMessageManager is not initialized.")}const a=r();const o={type:"request",request_id:a,service:e,body:s||{}};return this.#w(o,t,i,n)}async sendResponse(e,s,t,i,r,n){if(this.#r){throw new Error("PostMessageAPI is disabled by configuration.")}if(!this.#i){throw new Error("PostMessageManager is not initialized.")}const a={type:"response",request_id:e,service:s,status:i?"success":"error",body:t||{}};return this.#w(a,r,n,false)}async#w(e,s,t,i){if(!s){throw new Error("No content window provided.")}const r=e.request_id;let n=Promise.resolve();if(i){l.debug(`Waiting for response on ${e.service} (${e.request_id}) from iframe with domain '${t}'`);n=this.#M(r,s)}const a=JSON.stringify(e);l.debug(`Sending post message on ${e.service} (${e.request_id}) to iframe with domain '${t}'`,JSON.stringify(e,null,2));s.postMessage(a,t);return n}#M(e,t){const i=new s;const r=this.#P.bind(null,i,e,t);this.#a.push(r);return i.promise}#P(e,s,t,i){const r=typeof window.QUnit==="object";if(!r&&t!==i.source){return false}let n;try{n=JSON.parse(i.data)}catch{return false}if(n?.request_id!==s){return false}l.debug(`Received response for ${n.service} (${n.request_id}) from iframe with domain '${i.origin}'`);if(n.status==="success"){e.resolve(n.body)}else{let s;if(n.body?.message){s=new Error(n.body.message)}else{s=new Error("Unknown error")}if(n.body?.stack){s.stack=n.body.stack}e.reject(s)}return true}async sendRequestToAllApplications(e,s,t){if(this.#r){throw new Error("PostMessageAPI is disabled by configuration.")}if(!this.#i){throw new Error("PostMessageManager is not initialized.")}const i=this.#y(e);const r=[];if(i.activeOnly){r.push(this.#s())}else{this.#t().forEach(e=>{r.push(e)})}const n=r.filter(s=>{if(!s){return false}if(!s.isA("sap.ushell.appIntegration.IframeApplicationContainer")){return false}if(i.ignoreCapabilities||s.supportsCapabilities([e])){return true}if(typeof i?.isValidRequestTarget==="function"){const e=i.isValidRequestTarget(s);return e}return false});const a=n.map(i=>this.sendRequest(e,s,i.getPostMessageTarget(),i.getPostMessageTargetOrigin(),t));return Promise.all(a)}#y(e){return this.#l[e]||a}setDistributionPolicy(e,s={}){if(this.#l[e]){l.error(`Distribution policy for service ${e} is already defined. Overwriting the existing policy.`)}this.#l[e]={...a,...s}}replayStoredMessages(){this.#d=false;this.#c.forEach(e=>{this.#u(e)});this.#c=[]}reset(){removeEventListener("message",this.#e);this.#e=()=>{throw new Error("PostMessageManager is not initialized")};this.#s=()=>{throw new Error("PostMessageManager is not initialized")};this.#t=()=>{throw new Error("PostMessageManager is not initialized")};this.#i=false;this.#r=false;this.#n=[];this.#o={};this.#a=[];this.#l={};this.#d=true;this.#c=[]}}return new d});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/PostMessageManager/AppruntimeHandler", ["sap/base/Log","sap/ui/thirdparty/hasher","sap/ushell/appIntegration/PostMessageManager","sap/ushell/Container"],function(e,a,t,i){"use strict";const s={"sap.ushell.appRuntime.innerAppRouteChange":{activeOnly:true,ignoreCapabilities:true},"sap.ushell.appRuntime.keepAliveAppHide":{activeOnly:true,ignoreCapabilities:true},"sap.ushell.appRuntime.keepAliveAppShow":{activeOnly:true,ignoreCapabilities:true},"sap.ushell.appRuntime.hashChange":{activeOnly:true},"sap.ushell.appRuntime.setDirtyFlag":{activeOnly:true},"sap.ushell.appRuntime.getDirtyFlag":{activeOnly:true},"sap.ushell.appRuntime.themeChange":{ignoreCapabilities:true},"sap.ushell.appRuntime.uiDensityChange":{ignoreCapabilities:true}};const n={"sap.ushell.appRuntime.hashChange":{async handler(t,s){const{newHash:n,direction:l}=t;a.disableBlueBoxHashChangeTrigger=true;a.replaceHash(n);a.disableBlueBoxHashChangeTrigger=false;if(l){const a=await i.getServiceAsync("ShellNavigationInternal");a.hashChanger.fireEvent("hashReplaced",{hash:a.hashChanger.getHash(),direction:l});e.debug(`PostMessageAPI.hashChange :: Informed by the Iframe, to change the History direction property in FLP to: ${l}`)}}},"sap.ushell.appRuntime.iframeIsValid":{async handler(e,a,t){a.setIsIframeValidTime({time:(new Date).getTime()})},options:{provideApplicationContext:true,allowInactive:true}},"sap.ushell.appRuntime.iframeIsBusy":{async handler(e,a){}},"sap.ushell.appRuntime.isInvalidIframe":{async handler(e,a,t){a.setIsInvalidIframe(e.bValue)},options:{provideApplicationContext:true,allowInactive:true}}};return{register(){Object.keys(s).forEach(e=>{const a=s[e];t.setDistributionPolicy(e,a)});Object.keys(n).forEach(e=>{const a=n[e];t.setRequestHandler(e,a.handler,a.options)})}}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/PostMessageManager/ExtensionItems", ["sap/base/Log","sap/base/util/uid"],function(e,t){"use strict";class s{#e={};generateItemId(){const e=t();if(Object.hasOwn(this.#e,e)){return this.generateItemId()}this.#e[e]=null;return e}storeItem(e,t){this.#e[e]=t}getItem(e){return this.#e[e]}removeItem(e){delete this.#e[e]}visitItems(t,s){t.forEach(t=>{const i=this.getItem(t);if(i){s(i)}else{e.warning(`Item with id ${t} not found`)}})}applyItemVisibility(e,t,s,i){if(s){t?e.showForCurrentApp():e.hideForCurrentApp()}else{t?e.hideForCurrentApp():e.showForCurrentApp();if(Array.isArray(i)){if(i.includes("app")){t?e.showForAllApps():e.hideForAllApps()}else{t?e.hideForAllApps():e.showForAllApps()}if(i.includes("home")){t?e.showOnHome():e.hideOnHome()}else{t?e.hideOnHome():e.showOnHome()}}}}}return s});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/PostMessageManager/LifecycleHandler", ["sap/base/Log","sap/base/util/Deferred","sap/m/library","sap/ui/thirdparty/hasher","sap/ui/thirdparty/URI","sap/ushell/appIntegration/PostMessageManager","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/library","sap/ushell/resources","sap/ushell/state/ShellModel","sap/ushell/utils"],function(e,s,t,l,r,i,a,n,o,c,p,u){"use strict";const d=t.URLHelper;const h=o.appIntegration.contracts.StatefulType;const y=[(e,s)=>{if(s.service?.startsWith("sap.ushell.services.appLifeCycle")){s.service=s.service.replace(/appLifeCycle/gi,"AppLifeCycle");return new MessageEvent("message",{data:JSON.stringify(s),origin:e.origin,source:e.source})}}];const v={"sap.ushell.services.AppLifeCycle.create":{activeOnly:true},"sap.ushell.services.AppLifeCycle.destroy":{activeOnly:true},"sap.ushell.services.AppLifeCycle.store":{activeOnly:true},"sap.ushell.services.AppLifeCycle.restore":{activeOnly:true},"sap.ushell.sessionHandler.extendSessionEvent":{ignoreCapabilities:true},"sap.ushell.sessionHandler.logout":{isValidRequestTarget(e){if(",WCF,GUI,TR,WDA,".includes(e.getApplicationType())){return false}return true}}};const g={"sap.gui.loadFinished":{async handler(e,s,t){s.setStatefulType(h.ContractV1)},options:{provideApplicationContext:true,allowInactive:true}},"sap.ushell.services.AppLifeCycle.subscribe":{async handler(s,t,l){const r=s;if(!Array.isArray(r)){e.error("subscribe service call failed: capabilities must be an array");throw new Error("subscribe service call failed: capabilities must be an array")}const i=r.map(e=>`${e.service}.${e.action}`);t.addCapabilities(i)},options:{provideApplicationContext:true,allowInactive:true}},"sap.ushell.services.AppLifeCycle.setup":{async handler(e,s,t){const l=e;const r=[];if(l){if(l.isStateful){s.setStatefulType(h.ContractV2);r.push("sap.ushell.services.AppLifeCycle.create");r.push("sap.ushell.services.AppLifeCycle.destroy");const e=!u.isSAPLegacyApplicationType(s.getApplicationType(),s.getFrameworkId());if(e){r.push("sap.ushell.services.AppLifeCycle.store");r.push("sap.ushell.services.AppLifeCycle.restore")}}if(l.isIframeValid){r.push("sap.ushell.appRuntime.iframeIsValid")}if(l.session?.bLogoutSupport){r.push("sap.ushell.sessionHandler.logout")}s.addCapabilities(r)}},options:{provideApplicationContext:true,allowInactive:true}},"sap.ushell.sessionHandler.notifyUserActive":{handler:f},"sap.ushell.sessionHandler.extendSessionEvent":{handler:f},"sap.ushell.ui5service.ShellUIService.setTitle":{async handler(e,s,t){const{sTitle:l,oAdditionalInformation:r}=e;const i=s.getShellUIService();i.setTitle(l,r)},options:{provideApplicationContext:true}},"sap.ushell.ui5service.ShellUIService.setBackNavigation":{async handler(e,s,t){const l=s.getShellUIService();let r;if(e.callbackMessage?.service){r=()=>{i.sendRequest(e.callbackMessage.service,null,s.getPostMessageTarget(),s.getPostMessageTargetOrigin(),false)}}l.setBackNavigation(r)},options:{provideApplicationContext:true}},"sap.ushell.services.ShellUIService.setTitle":{async handler(e,s,t){const{sTitle:l,oAdditionalInformation:r}=e;const i=s.getShellUIService();i.setTitle(l,r)},options:{provideApplicationContext:true}},"sap.ushell.services.ShellUIService.setHierarchy":{async handler(e,s,t){const{aHierarchyLevels:l}=e;const r=s.getShellUIService();r.setHierarchy(l)},options:{provideApplicationContext:true}},"sap.ushell.services.ShellUIService.setRelatedApps":{async handler(e,s,t){const{aRelatedApps:l}=e;const r=s.getShellUIService();r.setRelatedApps(l)},options:{provideApplicationContext:true}},"sap.ushell.services.ShellUIService.setDirtyFlag":{async handler(e,s){const{bIsDirty:t}=e;a.setDirtyFlag(t)}},"sap.ushell.services.ShellUIService.showShellUIBlocker":{async handler(e,s){}},"sap.ushell.services.ShellUIService.getFLPUrl":{async handler(e,s){const t=e.bIncludeHash;return a.getFLPUrlAsync(t)}},"sap.ushell.services.ShellUIService.getShellGroupIDs":{async handler(e,s){if(true){const{bGetAll:s}=e;const t=await a.getServiceAsync("BookmarkV2");return t.getShellGroupIDs(s)}throw new Error("Bookmark.getShellGroupIDs is deprecated. Use BookmarkV2.getContentNodes instead.")}},"sap.ushell.services.ShellUIService.addBookmark":{async handler(e,s){if(true){const{oParameters:s,groupId:t}=e;const l=await a.getServiceAsync("BookmarkV2");return l.addBookmarkByGroupId(s,t)}throw new Error("Bookmark.addBookmarkByGroupId is deprecated. Use BookmarkV2.addBookmark instead.")}},"sap.ushell.services.ShellUIService.addBookmarkDialog":{async handler(e,s){const[t]=await u.requireAsync(["sap/ushell/ui/footerbar/AddBookmarkButton"]);const l=new t;l.firePress({})}},"sap.ushell.services.ShellUIService.getShellGroupTiles":{async handler(e,s){if(true){const{groupId:s}=e;const t=await a.getServiceAsync("FlpLaunchPage");const l=t.getTilesByGroupId(s);return u.promisify(l)}throw new Error("Classic homepage is deprecated.")}},"sap.ushell.services.ShellUIService.sendUrlAsEmail":{async handler(e,s){const t=p.getModel().getProperty("/application/title");let l;if(t===undefined){l=c.i18n.getText("linkToApplication")}else{l=`${c.i18n.getText("linkTo")} '${t}'`}A("",l,document.URL,"","",document.URL,true)}},"sap.ushell.services.ShellUIService.sendEmailWithFLPButton":{async handler(e,s){const{bSetAppStateToPublic:t}=e;const l=p.getModel().getProperty("/application/title");let r;if(l===undefined){r=c.i18n.getText("linkToApplication")}else{r=`${c.i18n.getText("linkTo")} '${l}'`}A("",r,document.URL,"","",document.URL,t)}},"sap.ushell.services.ShellUIService.sendEmail":{async handler(e,s){const{sTo:t,sSubject:l,sBody:r,sCc:i,sBcc:a,sIFrameURL:n,bSetAppStateToPublic:o}=e;A(t,l,r,i,a,n,o)}},"sap.ushell.services.ShellUIService.processHotKey":{async handler(e,s){const t=e;let l;try{l=new KeyboardEvent("keydown",t)}catch(e){const{altKey:s,ctrlKey:r,shiftKey:i,key:a,keyCode:n}=t;const o=document.createEvent("KeyboardEvent");let c="";if(s){c+="Alt "}if(r){c+="Control "}if(i){c+="Shift "}o.initKeyboardEvent("keydown",false,false,null,a,n,c,0,false);l=o}document.dispatchEvent(l)}},"sap.ushell.services.Container.setDirtyFlag":{async handler(e,s){const{bIsDirty:t}=e;a.setDirtyFlag(t)}},"sap.ushell.services.Container.registerDirtyStateProvider":{async handler(e,t,l){const{bRegister:r}=e;if(r){a.setAsyncDirtyStateProvider(async function(e){const l=new s;const r=setTimeout(()=>{l.resolve(false)},2500);i.sendRequest("sap.ushell.appRuntime.handleDirtyStateProvider",{oNavigationContext:e},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),true).then(e=>{if(r){clearTimeout(r)}l.resolve(e.result||false)});return l.promise})}else{a.setAsyncDirtyStateProvider()}},options:{provideApplicationContext:true}},"sap.ushell.services.Container.getFLPUrl":{async handler(e,s){const t=e.bIncludeHash;return a.getFLPUrlAsync(t)}},"sap.ushell.services.Container.getFLPConfig":{async handler(e,s){return a.getFLPConfig()}},"sap.ushell.services.Container.getFLPPlatform":{async handler(e,s){return a.getFLPPlatform()}},"sap.ushell.services.Container.attachLogoutEvent":{async handler(e,s,t){a.attachLogoutEvent(async function(){return i.sendRequest("sap.ushell.appRuntime.executeLogoutFunctions",{},s.getPostMessageTarget(),s.getPostMessageTargetOrigin(),true)},true)},options:{provideApplicationContext:true}},"sap.ushell.services.AppLifeCycle.reloadCurrentApp":{async handler(e,s){n.emit("reloadCurrentApp",{sCurrentHash:l.getHash(),date:Date.now()})}},"sap.ushell.services.AppLifeCycle.getFullyQualifiedXhrUrl":{async handler(e,s){const{path:t}=e;if(t!==""&&t!==undefined&&t!==null){const e=await a.getServiceAsync("AppLifeCycle");const s=await e.getCurrentApplication().getSystemContext();const l=s.getFullyQualifiedXhrUrl(t);let i="";let n="";let o="";const c=a.getFLPUrl(true);const p=new r(c);if(p.protocol()!==null&&p.protocol()!==undefined&&p.protocol()!==""){n=`${p.protocol()}://`}if(p.hostname()!==null&&p.hostname()!==undefined&&p.hostname()!==""){i=p.hostname()}if(p.port()!==null&&p.port()!==undefined&&p.port()!==""){o=`:${p.port()}`}const u=n+i+o+l;return u}}},"sap.ushell.services.AppLifeCycle.getSystemAlias":{async handler(e,s,t){const l=s.getCurrentAppTargetResolution();const r=l.systemAlias;const i=l.contentProviderId;const[a]=await u.requireAsync(["sap/ushell/ApplicationType/systemAlias"]);return a.getSystemAliasInProvider(r,i)},options:{provideApplicationContext:true}},"sap.ushell.services.AppLifeCycle.setNewAppInfo":{async handler(e,s){const t=e;const l=await a.getServiceAsync("AppLifeCycle");l.setAppInfo(t,true)}},"sap.ushell.services.AppLifeCycle.updateCurrentAppInfo":{async handler(e,s){const t=e;const l=await a.getServiceAsync("AppLifeCycle");l.setAppInfo(t,false)}},"sap.ushell.services.AppConfiguration.setApplicationFullWidth":{async handler(e,s){const{bValue:t}=e;const[l]=await u.requireAsync(["sap/ushell/services/AppConfiguration"]);l.setApplicationFullWidthInternal(t)}}};async function f(){const e=a.getRenderer().getShellController();const s=e._getSessionHandler();if(s?.isInitialized?.()){s.userActivityHandler()}}async function A(s="",t="",l="",r="",i="",n,o){let c=u.getDocumentUrl();function p(e,s,r,i,a,n){t=t.includes(e)?t.replace(e,s):t;l=l.includes(e)?l.replace(e,s):l;if(r&&a){t=t.includes(r)?t.replaceAll(r,a):t;l=l.includes(r)?l.replaceAll(r,a):l}if(i&&n){t=t.includes(i)?t.replaceAll(i,n):t;l=l.includes(i)?l.replaceAll(i,n):l}}if(o){const o=await a.getServiceAsync("AppState");o.setAppStateToPublic(n).then((e,a,o,u="",h="")=>{if(u){c=c.replace(a,u)}if(h){c=c.replace(o,h)}p(n,c,a,o,u,h);d.triggerEmail(s,t,l,r,i)},e.error)}else{p(n,c);d.triggerEmail(s,t,l,r,i)}}return{register(){y.forEach(e=>{i.addEventPreprocessor(e)});Object.keys(v).forEach(e=>{const s=v[e];i.setDistributionPolicy(e,s)});Object.keys(g).forEach(e=>{const s=g[e];i.setRequestHandler(e,s.handler,s.options)})},sendEmail:A}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/PostMessageManager/MessageBrokerHandler", ["sap/ushell/appIntegration/PostMessageManager","sap/ushell/Config","sap/ushell/Container","sap/ushell/utils"],function(e,s,r,a){"use strict";const n={"sap.ushell.services.MessageBroker":{async handler(e,s){await r.getServiceAsync("MessageBroker");const[n]=await a.requireAsync(["sap/ushell/services/MessageBroker/MessageBrokerEngine"]);const t={oMessageData:JSON.parse(s.data),oMessage:s};return n.processPostMessage(t)},options:{async isValidRequest(e){const s=await r.getServiceAsync("MessageBroker");const a=s.getAcceptedOrigins().find(s=>s===e.origin);if(a!==undefined){return true}return false}}}};return{register(){if(!s.last("/core/shell/enableMessageBroker")){return}Object.keys(n).forEach(s=>{const r=n[s];e.setRequestHandler(s,r.handler,r.options)})}}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/PostMessageManager/NWBCHandler", ["sap/base/Log","sap/base/util/uid","sap/ushell/appIntegration/PostMessageManager","sap/ushell/Container","sap/ushell/utils"],function(e,t,a,s,r){"use strict";const o=[(e,a)=>{if(a.action==="pro54_setGlobalDirty"){a.service="sap.ushell.appIntegration.PostMessageManager.NWBCHandler.pro54_setGlobalDirty";delete a.action;a.body=a.parameters;delete a.parameters;if(!a.request_id){a.request_id=t()}if(!a.type){a.type="request"}return new MessageEvent("message",{data:JSON.stringify(a),origin:e.origin,source:e.source})}}];const l={"sap.ushell.appIntegration.PostMessageManager.NWBCHandler.pro54_setGlobalDirty":{async handler(t,a,o){const l=a.getGlobalDirtyStorageKey();if(localStorage.getItem(l)===s.DirtyState.PENDING){e.debug(`getGlobalDirty() pro54_setGlobalDirty SetItem key:${l} value: ${t.globalDirty}`,null,"sap.ushell.appIntegration.ApplicationContainer");r.localStorageSetItem(l,t.globalDirty,true)}},options:{provideApplicationContext:true}}};return{register(){o.forEach(e=>{a.addEventPreprocessor(e)});Object.keys(l).forEach(e=>{const t=l[e];a.setRequestHandler(e,t.handler,t.options)})}}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/PostMessageManager/ServiceHandler", ["sap/base/i18n/Formatting","sap/base/i18n/Localization","sap/base/Log","sap/base/util/deepExtend","sap/ui/core/Element","sap/ui/core/UIComponent","sap/ui/thirdparty/hasher","sap/ushell/appIntegration/PostMessageManager","sap/ushell/appIntegration/PostMessageManager/ExtensionItems","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/library","sap/ushell/services/Navigation/compatibility","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(e,t,s,a,n,r,o,i,c,l,p,u,g,d,v){"use strict";const y=u.ContentNodeType;let h;const m=new r;const A={"sap.ushell.services.Navigation.getHref":{async handler(e,t){const{oTarget:s}=e;const a=await l.getServiceAsync("Navigation");return a.getHref(s)}},"sap.ushell.services.Navigation.backToPreviousApp":{async handler(e,t){const s=await l.getServiceAsync("Navigation");return s.backToPreviousApp()}},"sap.ushell.services.Navigation.historyBack":{async handler(e,t){const{iSteps:s}=e;const a=await l.getServiceAsync("Navigation");return a.historyBack(s)}},"sap.ushell.services.Navigation.isInitialNavigation":{async handler(e,t){const s=await l.getServiceAsync("Navigation");return s.isInitialNavigation()}},"sap.ushell.services.Navigation.navigate":{async handler(e,t){const{oTarget:s}=e;const n=await l.getServiceAsync("Navigation");const r=a({},s);d.storeSapSystemToLocalStorage(r);return n.navigate(r)}},"sap.ushell.services.Navigation.getPrimaryIntent":{async handler(e,t){const{sSemanticObject:s,oLinkFilter:a}=e;const n=await l.getServiceAsync("Navigation");return n.getPrimaryIntent(s,a)}},"sap.ushell.services.Navigation.getLinks":{async handler(e,t){const s=e;const a=await l.getServiceAsync("Navigation");return a.getLinks(s)}},"sap.ushell.services.Navigation.getSemanticObjects":{async handler(e,t){const s=await l.getServiceAsync("Navigation");return s.getSemanticObjects()}},"sap.ushell.services.Navigation.isNavigationSupported":{async handler(e,t){const{aTargets:s}=e;const a=await l.getServiceAsync("Navigation");return a.isNavigationSupported(s)}},"sap.ushell.services.Navigation.getAppState":{async handler(e,t){const{sAppStateKey:s}=e;const a=await l.getServiceAsync("Navigation");const n=await a.getAppState(m,s);delete n._oServiceInstance;return n}},"sap.ushell.services.Navigation.resolveIntent":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("Navigation");return a.resolveIntent(s)}},"sap.ushell.services.Navigation.isUrlSupported":{async handler(e,t){const{sUrl:s}=e;const a=await l.getServiceAsync("Navigation");return a.isUrlSupported(s)}},"sap.ushell.services.CrossApplicationNavigation.hrefForExternal":{async handler(e,t){const{oArgs:s}=e;const a=await l.getServiceAsync("Navigation");return a.getHref(s)}},"sap.ushell.services.CrossApplicationNavigation.getSemanticObjectLinks":{async handler(e,t){const{sSemanticObject:s,mParameters:a,bIgnoreFormFactors:n,bCompactIntents:r}=e;return g.getSemanticObjectLinks(s,a,n,undefined,undefined,r)}},"sap.ushell.services.CrossApplicationNavigation.isIntentSupported":{async handler(e,t){const{aIntents:s}=e;return g.isIntentSupported(s)}},"sap.ushell.services.CrossApplicationNavigation.isNavigationSupported":{async handler(e,t){const{aIntents:s}=e;const a=await l.getServiceAsync("Navigation");return a.isNavigationSupported(s)}},"sap.ushell.services.CrossApplicationNavigation.backToPreviousApp":{async handler(e,t){const s=await l.getServiceAsync("Navigation");return s.backToPreviousApp()}},"sap.ushell.services.CrossApplicationNavigation.historyBack":{async handler(e,t){const{iSteps:s}=e;const a=await l.getServiceAsync("Navigation");return a.historyBack(s)}},"sap.ushell.services.CrossApplicationNavigation.getAppStateData":{async handler(e,t){const{sAppStateKey:s}=e;return g.getAppStateData(s)}},"sap.ushell.services.CrossApplicationNavigation.toExternal":{async handler(e,t){const{oArgs:s}=e;const n=await l.getServiceAsync("Navigation");const r=a({},s);d.storeSapSystemToLocalStorage(r);return n.navigate(r)}},"sap.ushell.services.CrossApplicationNavigation.registerBeforeAppCloseEvent":{async handler(e,t,s){const a=e;t.setBeforeAppCloseEvent({enabled:true,params:a})},options:{provideApplicationContext:true,allowInactive:true}},"sap.ushell.services.CrossApplicationNavigation.expandCompactHash":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.expandCompactHash(s);return d.promisify(n)}},"sap.ushell.services.CrossApplicationNavigation.getDistinctSemanticObjects":{async handler(e,t){const s=await l.getServiceAsync("Navigation");return s.getSemanticObjects()}},"sap.ushell.services.CrossApplicationNavigation.getLinks":{async handler(e,t){const s=e;return g.getLinks(s)}},"sap.ushell.services.CrossApplicationNavigation.getPrimaryIntent":{async handler(e,t){const{sSemanticObject:s,mParameters:a}=e;const n=await l.getServiceAsync("Navigation");return n.getPrimaryIntent(s,a)}},"sap.ushell.services.CrossApplicationNavigation.hrefForAppSpecificHash":{async handler(e,t){const{sAppHash:s}=e;const a=await l.getServiceAsync("Navigation");return a.getHref(s)}},"sap.ushell.services.CrossApplicationNavigation.isInitialNavigation":{async handler(e,t){const s=await l.getServiceAsync("Navigation");return s.isInitialNavigation()}},"sap.ushell.services.CrossApplicationNavigation.getAppState":{async handler(e,t){const{sAppStateKey:s}=e;const a=await l.getServiceAsync("Navigation");const n=await a.getAppState(m,s);delete n._oServiceInstance;return n}},"sap.ushell.services.CrossApplicationNavigation.setInnerAppRoute":{async handler(e,t){const{appSpecificRoute:s,writeHistory:a}=e;const n=v.parseShellHash(o.getHash());if(n.appSpecificRoute===s){return}n.appSpecificRoute=s;const r=`#${v.constructShellHash(n)}`;o.disableBlueBoxHashChangeTrigger=true;if(a===true||a==="true"){o.setHash(r)}else{o.replaceHash(r)}o.disableBlueBoxHashChangeTrigger=false}},"sap.ushell.services.CrossApplicationNavigation.setInnerAppStateData":{handler:e=>S(e)},"sap.ushell.services.CrossApplicationNavigation.resolveIntent":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("Navigation");return a.resolveIntent(s)}},"sap.ushell.services.AppState.getAppState":{async handler(e,t){const{sKey:s}=e;const a=await l.getServiceAsync("AppState");const n=a.getAppState(s);const r=await d.promisify(n);delete r._oServiceInstance;return r}},"sap.ushell.services.AppState._saveAppState":{async handler(e,t){const{sKey:s,sData:a,sAppName:n,sComponent:r,bTransient:o,iPersistencyMethod:i,oPersistencySettings:c}=e;const p=await l.getServiceAsync("AppState");const u=p._saveAppState(s,a,n,r,o,i,c);return d.promisify(u)}},"sap.ushell.services.AppState._loadAppState":{async handler(e,t){const{sKey:s}=e;const a=await l.getServiceAsync("AppState");const n=a._loadAppState(s);return d.promisify(n)}},"sap.ushell.services.AppState.deleteAppState":{async handler(e,t){const{sKey:s}=e;const a=await l.getServiceAsync("AppState");const n=a.deleteAppState(s);return d.promisify(n)}},"sap.ushell.services.AppState.makeStatePersistent":{async handler(e,t){const{sKey:s,iPersistencyMethod:a,oPersistencySettings:n}=e;const r=await l.getServiceAsync("AppState");const o=r.makeStatePersistent(s,a,n);return d.promisify(o)}},"sap.ushell.services.Bookmark.addBookmarkUI5":{async handler(e,t){const{oParameters:s,vContainer:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();k(s,r);const o=await l.getServiceAsync("BookmarkV2");return o.addBookmark(s,a,r.id)}},"sap.ushell.services.Bookmark.addBookmark":{async handler(e,t){if(true){const{oParameters:t,groupId:s}=e;const a=await l.getServiceAsync("BookmarkV2");return a.addBookmarkByGroupId(t,s)}throw new Error("Bookmark.addBookmarkByGroupId is deprecated. Please use BookmarkV2.addBookmark instead.")}},"sap.ushell.services.Bookmark.getShellGroupIDs":{async handler(e,t){if(true){const e=await l.getServiceAsync("BookmarkV2");return e.getShellGroupIDs()}throw new Error("Bookmark.getShellGroupIDs is deprecated. Please use BookmarkV2.getContentNodes instead.")}},"sap.ushell.services.Bookmark.addCatalogTileToGroup":{async handler(e,t){s.error("Bookmark.addCatalogTileToGroup is deprecated. Please use BookmarkV2.addBookmark instead.");if(true){const{sCatalogTileId:t,sGroupId:s,oCatalogData:a}=e;const n=await l.getServiceAsync("Bookmark");const r=n.addCatalogTileToGroup(t,s,a);return d.promisify(r)}throw new Error("Bookmark.addCatalogTileToGroup is deprecated. Please use BookmarkV2.addBookmark instead.")}},"sap.ushell.services.Bookmark.countBookmarks":{async handler(e,t){const{sUrl:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();const r=await l.getServiceAsync("BookmarkV2");return r.countBookmarks(s,n.id)}},"sap.ushell.services.Bookmark.deleteBookmarks":{async handler(e,t){const{sUrl:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();const r=await l.getServiceAsync("BookmarkV2");return r.deleteBookmarks(s,n.id)}},"sap.ushell.services.Bookmark.updateBookmarks":{async handler(e,t){const{sUrl:s,oParameters:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();const o=await l.getServiceAsync("BookmarkV2");return o.updateBookmarks(s,a,r.id)}},"sap.ushell.services.Bookmark.getContentNodes":{async handler(e,t){const s=await l.getServiceAsync("BookmarkV2");return s.getContentNodes()}},"sap.ushell.services.Bookmark.addCustomBookmark":{async handler(e,t){const{sVizType:s,oConfig:a,vContentNodes:n}=e;const r=await l.getServiceAsync("AppLifeCycle");const o=await r.getCurrentApplication().getSystemContext();const i=await l.getServiceAsync("BookmarkV2");return i.addCustomBookmark(s,a,n,o.id)}},"sap.ushell.services.Bookmark.countCustomBookmarks":{async handler(e,t){const{oIdentifier:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();s.contentProviderId=n.id;const r=await l.getServiceAsync("BookmarkV2");return r.countCustomBookmarks(s)}},"sap.ushell.services.Bookmark.updateCustomBookmarks":{async handler(e,t){const{oIdentifier:s,oConfig:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();s.contentProviderId=r.id;const o=await l.getServiceAsync("BookmarkV2");return o.updateCustomBookmarks(s,a)}},"sap.ushell.services.Bookmark.deleteCustomBookmarks":{async handler(e,t){const{oIdentifier:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();s.contentProviderId=n.id;const r=await l.getServiceAsync("BookmarkV2");return r.deleteCustomBookmarks(s)}},"sap.ushell.services.Bookmark.addBookmarkToPage":{async handler(e,t){const{oParameters:s,sPageId:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();const o=await l.getServiceAsync("BookmarkV2");return o.addBookmarkToPage(s,a,r.id)}},"sap.ushell.services.BookmarkV2.addBookmarkUI5":{async handler(e,t){const{oParameters:s,vContainer:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();k(s,r);const o=await l.getServiceAsync("BookmarkV2");return o.addBookmark(s,a,r.id)}},"sap.ushell.services.BookmarkV2.addBookmark":{async handler(e,t){if(true){const{oParameters:t,groupId:s}=e;const a=await l.getServiceAsync("BookmarkV2");return a.addBookmarkByGroupId(t,s)}throw new Error("BookmarkV2.addBookmarkByGroupId is deprecated. Please use BookmarkV2.addBookmark instead.")}},"sap.ushell.services.BookmarkV2.getShellGroupIDs":{async handler(e,t){if(true){const e=await l.getServiceAsync("BookmarkV2");return e.getShellGroupIDs()}throw new Error("BookmarkV2.getShellGroupIDs is deprecated. Please use BookmarkV2.getContentNodes instead.")}},"sap.ushell.services.BookmarkV2.countBookmarks":{async handler(e,t){const{sUrl:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();const r=await l.getServiceAsync("BookmarkV2");return r.countBookmarks(s,n.id)}},"sap.ushell.services.BookmarkV2.deleteBookmarks":{async handler(e,t){const{sUrl:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();const r=await l.getServiceAsync("BookmarkV2");return r.deleteBookmarks(s,n.id)}},"sap.ushell.services.BookmarkV2.updateBookmarks":{async handler(e,t){const{sUrl:s,oParameters:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();const o=await l.getServiceAsync("BookmarkV2");return o.updateBookmarks(s,a,r.id)}},"sap.ushell.services.BookmarkV2.getContentNodes":{async handler(e,t){const s=await l.getServiceAsync("BookmarkV2");return s.getContentNodes()}},"sap.ushell.services.BookmarkV2.addCustomBookmark":{async handler(e,t){const{sVizType:s,oConfig:a,vContentNodes:n}=e;const r=await l.getServiceAsync("AppLifeCycle");const o=await r.getCurrentApplication().getSystemContext();const i=await l.getServiceAsync("BookmarkV2");return i.addCustomBookmark(s,a,n,o.id)}},"sap.ushell.services.BookmarkV2.countCustomBookmarks":{async handler(e,t){const{oIdentifier:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();s.contentProviderId=n.id;const r=await l.getServiceAsync("BookmarkV2");return r.countCustomBookmarks(s)}},"sap.ushell.services.BookmarkV2.updateCustomBookmarks":{async handler(e,t){const{oIdentifier:s,oConfig:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();s.contentProviderId=r.id;const o=await l.getServiceAsync("BookmarkV2");return o.updateCustomBookmarks(s,a)}},"sap.ushell.services.BookmarkV2.deleteCustomBookmarks":{async handler(e,t){const{oIdentifier:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();s.contentProviderId=n.id;const r=await l.getServiceAsync("BookmarkV2");return r.deleteCustomBookmarks(s)}},"sap.ushell.services.BookmarkV2.addBookmarkToPage":{async handler(e,t){const{oParameters:s,sPageId:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();const o=await l.getServiceAsync("BookmarkV2");return o.addBookmarkToPage(s,a,r.id)}},"sap.ushell.services.UserInfo.getThemeList":{async handler(e,t){const s=await l.getServiceAsync("UserInfo");const a=s.getThemeList();return d.promisify(a)}},"sap.ushell.services.UserInfo.getShellUserInfo":{async handler(e,t){const s=await l.getServiceAsync("UserInfo");return s.getShellUserInfo()}},"sap.ushell.services.UserInfo.getLanguageList":{async handler(e,t){const s=await l.getServiceAsync("UserInfo");const a=s.getLanguageList();return d.promisify(a)}},"sap.ushell.services.UserInfo.updateUserPreferences":{async handler(e,t){const{language:s}=e;if(s){const e=l.getUser();e.setLanguage(s);const t=await l.getServiceAsync("UserInfo");const a=t.updateUserPreferences();await d.promisify(a);e.resetChangedProperty("language")}}},"sap.ushell.services.UserInfo.openThemeManager":{async handler(e,t){p.emit("openThemeManager",Date.now())}},"sap.ushell.services.UserInfo.getLocaleData":{async handler(s,a){const n={calendarType:e.getCalendarType(),dateFormatShort:e.getDatePattern("short"),dateFormatMedium:e.getDatePattern("medium"),numberFormatGroup:e.getNumberSymbol("group"),numberFormatDecimal:e.getNumberSymbol("decimal"),timeFormatShort:e.getTimePattern("short"),timeFormatMedium:e.getTimePattern("medium"),calendarMapping:e.getCustomIslamicCalendarData(),timeZone:t.getTimezone(),currencyFormats:e.getCustomCurrencies()};return n}},"sap.ushell.services.UserDefaultParameters.getValue":{async handler(e,t){const{sParameterName:s}=e;const[a,n]=await Promise.all([l.getServiceAsync("AppLifeCycle"),l.getServiceAsync("UserDefaultParameters")]);const r=await a.getCurrentApplication().getSystemContext();return n.getValue(s,r)}},"sap.ushell.services.ShellNavigation.toExternal":{async handler(e,t){const{oArgs:s,bWriteHistory:a}=e;const n=await l.getServiceAsync("ShellNavigationInternal");n.toExternal(s,undefined,a)}},"sap.ushell.services.ShellNavigation.toAppHash":{async handler(e,t){const{sAppHash:s,bWriteHistory:a}=e;const n=await l.getServiceAsync("ShellNavigationInternal");n.toAppHash(s,a)}},"sap.ushell.services.ShellNavigationInternal.toExternal":{async handler(e,t){const{oArgs:s,bWriteHistory:a}=e;const n=await l.getServiceAsync("ShellNavigationInternal");n.toExternal(s,undefined,a)}},"sap.ushell.services.ShellNavigationInternal.toAppHash":{async handler(e,t){const{sAppHash:s,bWriteHistory:a}=e;const n=await l.getServiceAsync("ShellNavigationInternal");n.toAppHash(s,a)}},"sap.ushell.services.NavTargetResolution.getDistinctSemanticObjects":{async handler(e,t){const s=await l.getServiceAsync("NavTargetResolutionInternal");const a=s.getDistinctSemanticObjects();return d.promisify(a)}},"sap.ushell.services.NavTargetResolution.expandCompactHash":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.expandCompactHash(s);return d.promisify(n)}},"sap.ushell.services.NavTargetResolution.resolveHashFragment":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.resolveHashFragment(s);return d.promisify(n)}},"sap.ushell.services.NavTargetResolution.isIntentSupported":{async handler(e,t){const{aIntents:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.isNavigationSupported(s);const r=await d.promisify(n);return r.reduce((e,t,a)=>{const n=s[a];e[n]=t;return e},{})}},"sap.ushell.services.NavTargetResolution.isNavigationSupported":{async handler(e,t){const{aIntents:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.isNavigationSupported(s);return d.promisify(n)}},"sap.ushell.services.NavTargetResolutionInternal.getDistinctSemanticObjects":{async handler(e,t){const s=await l.getServiceAsync("NavTargetResolutionInternal");const a=s.getDistinctSemanticObjects();return d.promisify(a)}},"sap.ushell.services.NavTargetResolutionInternal.expandCompactHash":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.expandCompactHash(s);return d.promisify(n)}},"sap.ushell.services.NavTargetResolutionInternal.resolveHashFragment":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.resolveHashFragment(s);return d.promisify(n)}},"sap.ushell.services.NavTargetResolutionInternal.isIntentSupported":{async handler(e,t){const{aIntents:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.isNavigationSupported(s);const r=await d.promisify(n);return r.reduce((e,t,a)=>{const n=s[a];e[n]=t;return e},{})}},"sap.ushell.services.NavTargetResolutionInternal.isNavigationSupported":{async handler(e,t){const{aIntents:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.isNavigationSupported(s);return d.promisify(n)}},"sap.ushell.services.Renderer.addHeaderItem":{async handler(e,t,s){const{sId:a,sTooltip:n,sIcon:r,iFloatingNumber:o,bVisible:c,bCurrentState:p,aStates:u}=e;const g=await l.getServiceAsync("FrameBoundExtension");const d=await g.createHeaderItem({id:a,tooltip:n,icon:r,floatingNumber:o,press:function(){i.sendRequest("sap.ushell.appRuntime.buttonClick",{buttonId:a},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)}},{position:"begin"});h.storeItem(a,d);h.applyItemVisibility(d,c,p,u)},options:{provideApplicationContext:true}},"sap.ushell.services.Renderer.addHeaderEndItem":{async handler(e,t,s){const{sId:a,sTooltip:n,sIcon:r,iFloatingNumber:o,bVisible:c,bCurrentState:p,aStates:u}=e;const g=await l.getServiceAsync("FrameBoundExtension");const d=await g.createHeaderItem({id:a,tooltip:n,icon:r,floatingNumber:o,press:function(){i.sendRequest("sap.ushell.appRuntime.buttonClick",{buttonId:a},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)}},{position:"end"});h.storeItem(a,d);h.applyItemVisibility(d,c,p,u)},options:{provideApplicationContext:true}},"sap.ushell.services.Renderer.showHeaderItem":{async handler(e,t){const{aIds:s,bCurrentState:a,aStates:n}=e;const r=Array.isArray(s)?s:[s];h.visitItems(r,e=>{h.applyItemVisibility(e,true,a,n)})}},"sap.ushell.services.Renderer.showHeaderEndItem":{async handler(e,t){const{aIds:s,bCurrentState:a,aStates:n}=e;const r=Array.isArray(s)?s:[s];h.visitItems(r,e=>{h.applyItemVisibility(e,true,a,n)})}},"sap.ushell.services.Renderer.hideHeaderItem":{async handler(e,t){const{aIds:s,bCurrentState:a,aStates:n}=e;const r=Array.isArray(s)?s:[s];h.visitItems(r,e=>{h.applyItemVisibility(e,false,a,n)})}},"sap.ushell.services.Renderer.hideHeaderEndItem":{async handler(e,t){const{aIds:s,bCurrentState:a,aStates:n}=e;const r=Array.isArray(s)?s:[s];h.visitItems(r,e=>{h.applyItemVisibility(e,false,a,n)})}},"sap.ushell.services.Renderer.setHeaderTitle":{async handler(e,t){const{sTitle:s}=e;const a=await l.getServiceAsync("Extension");a.setSecondTitle(s)}},"sap.ushell.services.Renderer.setHeaderVisibility":{async handler(e,t){const{bVisible:s,bCurrentState:a,aStates:n}=e;const r=l.getRendererInternal("fiori2");r.setHeaderVisibility(s,!!a,n)}},"sap.ushell.services.Renderer.createShellHeadItem":{async handler(e,t,s){const{params:a}=e;a.press=async function(){i.sendRequest("sap.ushell.appRuntime.buttonClick",{buttonId:a.id},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)};const[n]=await d.requireAsync(["sap/ushell/ui/shell/ShellHeadItem"]);new n(a)},options:{provideApplicationContext:true}},"sap.ushell.services.Renderer.showActionButton":{async handler(e,t){const{aIds:s,bCurrentState:a,aStates:n}=e;const r=Array.isArray(s)?s:[s];h.visitItems(r,e=>{h.applyItemVisibility(e,true,a,n)})}},"sap.ushell.services.Renderer.hideActionButton":{async handler(e,t){const{aIds:s,bCurrentState:a,aStates:n}=e;const r=Array.isArray(s)?s:[s];h.visitItems(r,e=>{h.applyItemVisibility(e,false,a,n)})}},"sap.ushell.services.Renderer.addUserAction":{async handler(e,t,s){const{controlType:a,oControlProperties:n,bIsVisible:r,bCurrentState:o,aStates:c}=e.oParameters;const p=await l.getServiceAsync("Extension");n.press=async function(){i.sendRequest("sap.ushell.appRuntime.buttonClick",{buttonId:n.id},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)};const u=await p.createUserAction(n,{controlType:a});h.storeItem(n.id,u);h.applyItemVisibility(u,r,o,c)},options:{provideApplicationContext:true}},"sap.ushell.services.Renderer.addOptionsActionSheetButton":{async handler(e,t,s){const a=e;const[n]=await d.requireAsync(["sap/m/Button"]);const r=await l.getServiceAsync("Extension");const o=Array.isArray(a)?a:[a];o.forEach(async e=>{I(e.id);new n({id:e.id,text:e.text,icon:e.icon,tooltip:e.tooltip,press:async function(){i.sendRequest("sap.ushell.appRuntime.buttonClick",{buttonId:e.id},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)}});const s=await r.createUserAction({id:e.id});h.storeItem(e.id,s);h.applyItemVisibility(s,true,true,e.aStates)})},options:{provideApplicationContext:true}},"sap.ushell.services.Renderer.removeOptionsActionSheetButton":{async handler(e,t){const a=e;const n=Array.isArray(a)?a:[a];n.forEach(e=>{const t=h.getItem(e.id);if(t){h.applyItemVisibility(t,false,true,e.aStates);return I(e.id)}s.warning(`User action with id ${e.id} not found`)})}},"sap.ushell.services.Renderer.updateHeaderItem":{async handler(e,t){const{sId:s,oControlProperties:a}=e;if(!Object.hasOwn(a,"floatingNumber")){return}const n=h.getItem(s);if(n?.getControl){const e=await n.getControl();e?.setFloatingNumber?.(a.floatingNumber)}}},"sap.ushell.services.Renderer.destroyButton":{async handler(e,t){const{aIds:s}=e;const a=Array.isArray(s)?s:[s];a.forEach(e=>{I(e)})}},"sap.ushell.services.Extension.createHeaderItem":{async handler(e,t,s){const{controlProperties:a,events:n,parameters:r}=e;const o=h.generateItemId();n.forEach(e=>{a[e]=async function(){i.sendRequest("sap.ushell.services.Extension.handleControlEvent",{eventName:e,itemId:o},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)}});const c=await l.getServiceAsync("Extension");const p=await c.createHeaderItem(a,r);h.storeItem(o,p);return{itemId:o}},options:{provideApplicationContext:true}},"sap.ushell.services.Extension.createUserAction":{async handler(e,t,s){const{controlProperties:a,events:n,parameters:r}=e;const o=h.generateItemId();n.forEach(e=>{a[e]=async function(){i.sendRequest("sap.ushell.services.Extension.handleControlEvent",{eventName:e,itemId:o},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)}});const c=await l.getServiceAsync("Extension");const p=await c.createUserAction(a,r);h.storeItem(o,p);return{itemId:o}},options:{provideApplicationContext:true}},"sap.ushell.services.Extension.Item.destroy":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.destroy){a.destroy();h.removeItem(s)}}},"sap.ushell.services.Extension.Item.showForCurrentApp":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.showForCurrentApp){a.showForCurrentApp()}}},"sap.ushell.services.Extension.Item.hideForCurrentApp":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.hideForCurrentApp){a.hideForCurrentApp()}}},"sap.ushell.services.Extension.Item.showForAllApps":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.showForAllApps){a.showForAllApps()}}},"sap.ushell.services.Extension.Item.hideForAllApps":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.hideForAllApps){a.hideForAllApps()}}},"sap.ushell.services.Extension.Item.showOnHome":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.showOnHome){a.showOnHome()}}},"sap.ushell.services.Extension.Item.hideOnHome":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.hideOnHome){a.hideOnHome()}}},"sap.ushell.services.Extension.setSecondTitle":{async handler(e,t){const{title:s}=e;const a=await l.getServiceAsync("Extension");return a.setSecondTitle(s)}},"sap.ushell.services.LaunchPage.getGroupsForBookmarks":{async handler(e,t){if(true){const e=await l.getServiceAsync("FlpLaunchPage");const t=e.getGroupsForBookmarks();return d.promisify(t)}throw new Error("LaunchPage.getGroupsForBookmarks is deprecated. Please use BookmarkV2.getContentNodes instead.")}},"sap.ushell.services.Menu.getSpacesPagesHierarchy":{async handler(e,t){const s=await l.getServiceAsync("Menu");const a=s.getContentNodes([y.Space,y.Page]);return a.map(({id:e,label:t,children:s})=>({id:e,title:t,pages:(s||[]).map(({id:e,label:t})=>({id:e,title:t}))}))}},"sap.ushell.services.CommonDataModel.getAllPages":{async handler(e,t){const s=await l.getServiceAsync("CommonDataModel");return s.getAllPages()}},"sap.ushell.services.UITracer.trace":{async handler(e,t){const{trace:s}=e;await l.getServiceAsync("UITracer");p.emit("UITracer.trace",s)}},"sap.ushell.services.SearchableContent.getApps":{async handler(e,t){const s=e.oOptions||{};const a=await l.getServiceAsync("SearchableContent");return a.getApps(s)}},"sap.ushell.services.ReferenceResolver.resolveReferences":{async handler(e,t){const{aReferences:s}=e;const a=await l.getServiceAsync("ReferenceResolver");return a.resolveReferences(s)}}};async function S(e){const{sData:t}=e;let s;if(t!==undefined){try{s=JSON.parse(t)}catch(e){s=t}}else{s=""}const a=await l.getServiceAsync("AppState");const n=a.createEmptyAppState();n.setData(s);n.save();const r=n.getKey();let i=o.getHash();if(i.indexOf("&/")>0){if(i.indexOf("sap-iapp-state=")>0){const e=/(?:sap-iapp-state=)([^&/]+)/.exec(i)[1];i=i.replace(e,r)}else{i=`${i}/sap-iapp-state=${r}`}}else{i=`${i}&/sap-iapp-state=${r}`}o.disableBlueBoxHashChangeTrigger=true;o.replaceHash(i);o.disableBlueBoxHashChangeTrigger=false;return r}function k(e,t){if(!e||!e.serviceUrl||!t){return}if(t.id===""||t.id==="saas_approuter"){e.serviceUrl=undefined;s.warning("Dynamic data bookmarks tiles are not supported for local content providers")}}function I(e){const t=n.getElementById(e);if(t?.destroy){t.destroy()}}return{register(){h=new c;Object.keys(A).forEach(e=>{const t=A[e];i.setRequestHandler(e,t.handler,t.options)})},stripBookmarkServiceUrlForLocalContentProvider:k}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/PostMessagePluginInterface", ["sap/base/util/deepExtend","sap/ui/thirdparty/jquery"],(e,jQuery)=>{"use strict";const s="user.postapi.";function t(){let e;let s;this.init=function(t,n){e=t;s=n};this.getInterface=function(){const t={};t.registerPostMessageAPIs=n.bind(null,s);t.createPostMessageResult=i;if(e){t.postMessageToApp=r.bind(null,e)}else{t.postMessageToFlp=r.bind(null,e)}return t}}function n(t,n,r){const i={status:"success",desc:""};const u={isActiveOnly:true,distributionType:["all"]};if(n===undefined||Object.keys(n).length<=0){i.status="error";i.desc="no handler was found to register";return i}if(r===undefined){r=false}Object.keys(n).forEach(t=>{if(typeof t!=="string"){i.status="error";i.desc="oPostMessageAPIs should contain only string keys"}else if(r===false&&t.indexOf(s)!==0){i.status="error";i.desc=`all user custom Message APIs must start with '${s}'`}else{Object.keys(n[t]).forEach(s=>{if(s==="inCalls"){n[t].oServiceCalls=n[t][s];delete n[t][s]}else if(s==="outCalls"){Object.keys(n[t][s]).forEach(r=>{n[t][s][r]=e({},u,n[t][s][r])});n[t].oRequestCalls=n[t][s];delete n[t][s]}else{i.status="error";i.desc="api should contain either 'inCalls' or 'outCalls'"}})}});if(i.status==="success"){t(n)}return i}function r(e,s,t,n){const r=new jQuery.Deferred;if(n===undefined){n={}}if(e){sap.ui.require(["sap/ushell/appIntegration/PostMessageManager"],e=>{const i=`${s}.${t}`;e.sendRequestToAllApplications(i,n,true).then(e=>{r.resolve(e[0]?.result)})})}else{sap.ui.require(["sap/ushell/appRuntime/ui5/AppRuntimeService"],e=>{e.sendMessageToOuterShell(`${s}.${t}`,n).done(e=>{r.resolve(e)})})}return r.promise()}function i(e){if(e===undefined){e={}}return(new jQuery.Deferred).resolve(e).promise()}return new t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/UI5ApplicationContainer", ["sap/base/Log","sap/ui/core/ComponentContainer","sap/ui/core/EventBus","sap/ushell/appIntegration/ApplicationContainer","sap/ushell/appIntegration/UI5ApplicationContainerRenderer","sap/ushell/Container","sap/ushell/library","sap/ushell/utils"],(t,e,n,o,i,a,s,p)=>{"use strict";const r=o.extend("sap.ushell.appIntegration.UI5ApplicationContainer",{metadata:{library:"sap.ushell",properties:{componentHandle:{type:"object"},ui5ComponentId:{type:"string"},ui5ComponentName:{type:"string"}},aggregations:{child:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}}},renderer:i});r.prototype.init=function(){o.prototype.init.apply(this,arguments)};r.prototype.onBeforeRendering=function(){if(!this.getReadyForRendering()){return}this._createComponentContainer()};r.prototype._createComponentContainer=function(){if(this.getAggregation("child")){return}n.getInstance().publish("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",{name:this.getUi5ComponentName()});const t=this.getComponentHandle().getInstance();this.fireEvent("applicationConfiguration",{configuration:t.getManifestEntry("/sap.ui5/config")});const o=new e({id:this.getUi5ComponentId().replace("-component","-content"),component:t});o.setHeight(this.getHeight());o.setWidth(this.getWidth());o.addStyleClass("sapUShellApplicationContainer");this._fnDisableRouterEventHandler=this._disableRouter.bind(this);n.getInstance().subscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",this._fnDisableRouterEventHandler);this.setAggregation("child",o);return this._publishAppComponentLoaded(t)};r.prototype.setReadyForRendering=function(t){o.prototype.setReadyForRendering.apply(this,arguments);if(!this.getRenderComplete()){this.rerender()}return this};r.prototype._publishAppComponentLoaded=async function(t){const e=await a.getServiceAsync("PluginManager");await p.promisify(e.getPluginLoadingPromise("RendererExtensions"));await p.awaitTimeout(0);n.getInstance().publish("sap.ushell","appComponentLoaded",{component:t})};r.prototype._disableRouter=function(){const e=this.getComponentHandle().getInstance();if(!e||!e.isA("sap.ui.core.UIComponent")){return}const n=e.getRouter();if(!n){return}t.info(`router stopped for instance ${e.getId()}`);n.stop()};r.prototype._destroyChild=function(){const e=this.getAggregation("child");if(!e){return}const n=e.getComponentInstance().getMetadata().getComponentName();t.debug(`unloading component ${n}`,null,"sap.ushell.appIntegration.ApplicationContainer");this.destroyAggregation("child")};r.prototype.exit=function(){if(this._fnDisableRouterEventHandler){n.getInstance().unsubscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",this._fnDisableRouterEventHandler)}this._destroyChild();const t=this.getComponentHandle();if(t){t.destroy()}o.prototype.exit.apply(this,arguments)};return r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/UI5ApplicationContainerRenderer", ["sap/ui/core/Renderer","sap/ushell/appIntegration/ApplicationContainerRenderer"],(e,t)=>{"use strict";const a=e.extend(t);a.render=function(e,a){if(!a.getReadyForRendering()){t.render(e,a);return}const r=a.getAggregation("child");if(!r){return}e.openStart("div",a);e.accessibilityState(a);e.attr("data-help-id",a.getDataHelpId());e.attr("data-sap-ushell-active",a.getActive());e.attr("data-sap-ushell-initial-app-id",a.getInitialAppId());e.attr("data-sap-ushell-current-app-id",a.getCurrentAppId());e.attr("data-sap-ushell-stateful-type",a.getStatefulType());e.attr("data-sap-ushell-framework-id",a.getFrameworkId());e.class("sapUShellApplicationContainer");e.style("height",a.getHeight());e.style("width",a.getWidth());e.openEnd();e.renderControl(r);e.close("div");a.setRenderComplete(true)};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/contracts/EmbeddedUI5Handler", ["sap/base/Log","sap/base/util/Deferred","sap/ui/core/EventBus","sap/ushell/Container","sap/ushell/UI5ComponentType","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(e,t,n,i,r,o,a){"use strict";class s{async createApp(e,t,o){const s=t?.ui5ComponentName;n.getInstance().publish("ApplicationContainer","_prior.newUI5ComponentInstantion",{name:s});const p=await i.getServiceAsync("Ui5ComponentLoader");const c=a.getBasicHash(t.sFixedShellHash);t.ui5ComponentId=`application-${c}-component`;e.setUi5ComponentId(t.ui5ComponentId);await p.createComponent(t,o,[this.#e()],r.Application)}#e(){const n=i.getRendererInternal();if(n){e.debug("Shell controller._createWaitForRendererCreatedPromise: shell renderer already created, return empty array.");return[]}const r=new t;const o=r.resolve.bind(r);i.attachRendererCreatedEvent(o);return r.promise.then(()=>{e.info("Shell controller: resolving component waitFor promise after shell renderer created event fired.");i.detachRendererCreatedEvent(o)})}async getNavigationRedirectHash(e){const t=e.getComponentHandle();if(!t){return}const n=t.getInstance({});if(!n){return}if(typeof n.navigationRedirect!=="function"){return}const i=n.navigationRedirect();if(!i||typeof i.then!=="function"){return}try{const e=await o.promisify(i);return e}catch{}}async storeApp(e){const t=e.getCurrentAppTargetResolution();n.getInstance().publish("sap.ushell","appKeepAliveDeactivate",t);const i=e.getComponentHandle();const r=i.getInstance();if(r.isKeepAliveSupported?.()){r.deactivate();return}if(typeof r.suspend==="function"){r.suspend()}const o=r.getRouter?.();if(o&&typeof o.stop==="function"){o.stop()}}async restoreAppAfterNavigate(e,t){const i=e.getCurrentAppTargetResolution();n.getInstance().publish("sap.ushell","appKeepAliveActivate",i);const r=e.getComponentHandle();const o=r.getInstance();if(o.isKeepAliveSupported?.()){o.activate();return}if(typeof o.restore==="function"){o.restore()}const a=o.getRouter?.();if(a&&typeof a.initialize==="function"){if(t.enableRouterRetrigger===false){a.initialize()}else{a.initialize(true)}}if(typeof o.setInitialConfiguration==="function"){o.setInitialConfiguration()}}}return new s});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/contracts/StatefulContainerV1Handler", ["sap/ushell/utils","sap/ushell/Container"],function(e,t){"use strict";class a{async createApp(e,t,a){e.setCurrentAppId(t);e.setCurrentAppUrl(a.url);e.setCurrentAppTargetResolution(a);e.setIframeReusedForApp(true);const s=await this.#e(e,a);await e.sendRequest("sap.its.startService",s,true)}async#e(a,s){let r=s.url;r=await e.appendSapShellParam(r);r=e.filterOutParamsFromLegacyAppURL(r);let p;const i={url:r};if(a.getIframeWithPost&&a.getIframeWithPost()===true){const a=e.getParamKeys(r);if(a.aAppStateNamesArray.length>0){const e=await t.getServiceAsync("Navigation");try{const t=await e.getAppStateData(a.aAppStateKeysArray);p={};a.aAppStateNamesArray.forEach(function(e,a){if(t[a]){p[e]=t[a]}})}catch{}}else{p={}}}if(p){p["sap-flp-url"]=t.getFLPUrl(true);p["system-alias"]=a.getSystemAlias();i["sap-flp-params"]=p}return i}async destroyApp(e){e.setCurrentAppId("");await e.sendRequest("sap.gui.triggerCloseSession",{},false)}}return new a},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/appIntegration/contracts/StatefulContainerV2Handler", ["sap/ushell/ApplicationType/UrlPostProcessing","sap/ui/thirdparty/hasher","sap/ushell/utils","sap/ushell/Container"],(e,s,t,r)=>{"use strict";class a{async createApp(a,p,i,n){let l;a.setReservedParameters(n.reservedParameters);a.setCurrentAppUrl(p);a.setCurrentAppId(i);a.setCurrentAppTargetResolution(n);a.setIframeReusedForApp(true);p=e.processUrl(p,n.applicationType,false,a);const u={sCacheId:i,sUrl:p,sHash:s.getHash()};if(p.indexOf("sap-iframe-hint=GUI")>0||p.indexOf("sap-iframe-hint=WDA")>0||p.indexOf("sap-iframe-hint=WCF")>0){const e=t.getParamKeys(p);if(e.aAppStateNamesArray.length>0){try{const s=await r.getServiceAsync("Navigation");const t=await s.getAppStateData(e.aAppStateKeysArray);l={};e.aAppStateNamesArray.forEach((e,s)=>{if(t[s]){l[e]=t[s]}})}catch{}}else{l={}}}if(l){l["sap-flp-url"]=r.getFLPUrl(true);l["system-alias"]=a.getSystemAlias();u["sap-flp-params"]=l}const c=await a.sendRequest("sap.ushell.services.appLifeCycle.create",u,true);return c?.result}async destroyApp(e,s){const t=e.getCurrentAppId()===s;if(t){e.setCurrentAppUrl("");e.setCurrentAppId("");e.setCurrentAppTargetResolution(undefined);r.setAsyncDirtyStateProvider(undefined)}await e.sendRequest("sap.ushell.services.appLifeCycle.destroy",{sCacheId:s},true)}async storeAppWithinSameFrame(e,s){e.setCurrentAppUrl("");e.setCurrentAppId("");e.setCurrentAppTargetResolution(undefined);r.setAsyncDirtyStateProvider(undefined);await e.sendRequest("sap.ushell.services.appLifeCycle.store",{sCacheId:s},true)}async restoreAppWithinSameFrame(e,t,r,a){e.setCurrentAppUrl(t);e.setCurrentAppId(r);e.setCurrentAppTargetResolution(a);e.setIframeReusedForApp(true);await e.sendRequest("sap.ushell.services.appLifeCycle.restore",{sCacheId:r,sUrl:a.url,sHash:s.getHash()},true)}isStatefulContainerSupportingKeepAlive(e){if(!e){return false}return e.supportsCapabilities(["sap.ushell.services.AppLifeCycle.create","sap.ushell.services.appLifeCycle.destroy","sap.ushell.services.appLifeCycle.store","sap.ushell.services.appLifeCycle.restore"])}isIframeIsValidSupported(e){if(!e){return false}return e.supportsCapabilities(["sap.ushell.services.appRuntime.iframeIsValid"])}}return new a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/SchedulingAgent", ["sap/ushell/bootstrap/SchedulingAgent/FLPScheduler","sap/ushell/bootstrap/SchedulingAgent/EventProcessor","sap/ushell/bootstrap/SchedulingAgent/FLPLoader","sap/ushell/bootstrap/SchedulingAgent/logger","sap/ushell/bootstrap/SchedulingAgent/state","sap/ushell/EventHub"],function(e,t,o,n,i,a){"use strict";var s={CONTINUE_ON_EVENT:"continueOnEvent",BY_EVENT:"byEvent",BY_COMPONENT_CREATE:"byComponentCreate",BY_REQUIRE:"byRequire",WAIT_IN_MS:"waitInMs"};var d={WAIT:"wait",ERROR:"error",DONE:"done",STEP:"step",BLOCKDONE:"blockDone",SKIPPED:"skip"};var g={oComponentsLoading:{},oPathsLoading:{},_initialize:function(){i.clear();n.clearHistory();i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Initializing,"Scheduling Agent starting");var o=e.initializeSchedule();o.then(function(e){if(!e){i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.FatalError,"Configuration error!");return}t.initializeStepDoneListener(this);i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Initialized,"Scheduling Agent ready");this.eventReceived()}.bind(this))},_processStepConfiguration:function(e){var t={sStepType:"",oData:{},sStepName:"",bConfigOk:false};if(e.oConfig.loadingMode===s.CONTINUE_ON_EVENT){t.sStepType=s.CONTINUE_ON_EVENT;t.sStepName=e.oContent.LoadingStep;t.oData.eventName=e.oConfig.continueOnEvent&&e.oConfig.continueOnEvent.eventName;t.oData.timeoutInMs=e.oConfig.continueOnEvent&&e.oConfig.continueOnEvent.timeoutInMs;t.oData.stepName=e.oContent.LoadingStep;t.bConfigOk=!!(t.oData.eventName&&t.oData.stepName)}else if(e.oConfig.loadingMode===s.BY_EVENT){t.sStepType=s.BY_EVENT;t.sStepName=e.oContent.LoadingStep;t.oData.eventName=e.oConfig.byEvent&&e.oConfig.byEvent.eventName;t.oData.eventData={};t.oData.eventData.data=e.oConfig.byEvent.eventData;t.oData.eventData.stepName=e.oContent.LoadingStep;t.bConfigOk=!!t.oData.eventName}else if(e.oConfig.loadingMode===s.BY_COMPONENT_CREATE){t.sStepType=s.BY_COMPONENT_CREATE;t.sStepName=e.oContent.LoadingStep;t.oData=e.oConfig.byComponentCreate&&e.oConfig.byComponentCreate.ui5ComponentOptions||{};t.bConfigOk=!!t.oData}else if(e.oConfig.loadingMode===s.BY_REQUIRE){t.sStepType=s.BY_REQUIRE;t.sStepName=e.oContent.LoadingStep;t.oData={};t.oData.sPath=e.oConfig.byRequire.path;t.oData.sStepName=e.oContent.LoadingStep;t.bConfigOk=!!t.oData.sPath}else if(e.oConfig.loadingMode===s.WAIT_IN_MS){t.sStepType=s.WAIT_IN_MS;t.sStepName=e.oContent.LoadingStep;t.oData.iWaitingTime=e.oConfig.waitInMs&&e.oConfig.waitInMs.waitingTime;t.oData.sStepName=e.oContent.LoadingStep;t.bConfigOk=!!(t.oData.iWaitingTime&&t.oData.sStepName)}return t},dumpState:function(){i.dump()},dumpHistory:function(){n.dumpHistory()},dumpSchedule:function(){e.dumpSchedule()},dumpAll:function(){n.dumpHistory();e.dumpSchedule();i.dump()},eventReceived:function(){i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Working,"Agent is active");var n;do{n=e.getNextLoadingStep();if(n.sStatus===d.ERROR){i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.FatalError,"Fatal loading error. Loading aborted.");t.unregisterStepDoneListener();a.emit("FLPLoadingDone",Date.now());return}if(n.sStatus===d.DONE){i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Done,"Loading finished");t.unregisterStepDoneListener();a.emit("FLPLoadingDone",Date.now());return}if(n.sStatus===d.BLOCKDONE){}if(n.sStatus===d.SKIPPED){}if(n.sStatus===d.STEP){var g=this._processStepConfiguration(n);if(!g.bConfigOk){i.setForLoadingStep(g.sStepName,i.id.loadingStep.Abort,"","Step configuration error");i.setForLoadingStep(g.sStepName,i.id.loadingStep.Skipped,"","Step configuration error");i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.FatalError,g,"Step configuration error!")}else if(g.sStepType===s.CONTINUE_ON_EVENT){t.listenToEvent(g.oData);i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData.eventName,"continueOnEvent step sent to Event Processor")}else if(g.sStepType===s.BY_EVENT){o.loadComponentByEvent(g.oData);i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData,"byEvent step sent to FLP Loader")}else if(g.sStepType===s.WAIT_IN_MS){o.waitInMs(g.oData);i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData.iWaitingTime+"ms","WaitInMs step sent to FLP Loader")}else if(g.sStepType===s.BY_REQUIRE){var p=o.loadComponentByRequire(g.oData.sPath);this.oPathsLoading[g.sStepName]=p;i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData.sPath,"byRequire step sent to FLP Loader");var r=g.sStepName;p.then(function(){i.setForLoadingStep(r,i.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oPathsLoading[r];a.emit("StepDone",r)}.bind(this),function(){i.setForLoadingStep(r,i.id.loadingStep.FatalError,"","Step's promise failed");delete this.oPathsLoading[r];a.emit("StepFailed",r)}.bind(this))}else if(g.sStepType===s.BY_COMPONENT_CREATE){var l=o.loadComponentByComponentCreate(g);this.oComponentsLoading[g.sStepName]=l;i.setForLoadingStep(g.sStepName,i.id.loadingStep.InProgress,g.oData,"byComponentCreate step sent to FLP Loader");l.then(function(e){i.setForLoadingStep(e,i.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oComponentsLoading[e];a.emit("StepDone",e)}.bind(this),function(e){i.setForLoadingStep(e,i.id.loadingStep.FatalError,"","Step's promise failed");delete this.oComponentsLoading[e];a.emit("StepFailed",e)}.bind(this))}}}while(n.sStatus!==d.WAIT);i.setForModule(i.id.module.schedulingAgent.id,i.id.module.schedulingAgent.Waiting,"Agent waits")}};return g},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/SchedulingAgent/EventProcessor", ["sap/ushell/bootstrap/SchedulingAgent/state","sap/ushell/EventHub"],function(e,t){"use strict";var n={SchedulingAgent:{},aDoables:[],initializeStepDoneListener:function(n){this.SchedulingAgent=n;this.aDoables=[t.on("StepDone").do(function(t){e.setForLoadingStep(t,e.id.loadingStep.Done,"","Step event received");this.SchedulingAgent.eventReceived()}.bind(this)),t.on("StepFailed").do(function(t){e.setForLoadingStep(t,e.id.loadingStep.Skipped,"","Step event received");this.SchedulingAgent.eventReceived()}.bind(this))]},listenToEvent:function(n){let i=false;t.once(n.eventName).do(function(){if(i){return}i=true;e.setForLoadingStep(n.stepName,e.id.loadingStep.Done,n.eventName,"Event received");this.SchedulingAgent.eventReceived()}.bind(this));if(n.timeoutInMs){setTimeout(()=>{if(i){return}i=true;e.setForLoadingStep(n.stepName,e.id.loadingStep.Done,n.eventName,"Event received");this.SchedulingAgent.eventReceived()},n.timeoutInMs)}},unregisterStepDoneListener:function(){this.aDoables.forEach(function(e){e.off()})},setTimeOut:function(){}};return n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/SchedulingAgent/FLPLoader", ["sap/ushell/EventHub","sap/ui/core/Component"],function(e,n){"use strict";var t={loadComponentByEvent:function(n){e.emit(n.eventName,n.eventData)},loadComponentByComponentCreate:function(e){return n.create(e.oData).then(function(){return Promise.resolve(e.sStepName)},function(){return Promise.reject(e.sStepName)})},loadComponentByRequire:function(e){return new Promise(function(n,t){sap.ui.require([e],function(e){n(e)})})},waitInMs:function(n){setTimeout(function(){e.emit("StepDone",n.sStepName)},n.iWaitingTime)},directLoading:function(){}};return t},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/SchedulingAgent/FLPScheduler", ["sap/ui/performance/trace/FESR","sap/ushell/bootstrap/SchedulingAgent/state","sap/base/util/LoaderExtensions","sap/base/Log","sap/ushell/Config","sap/ushell/state/StateManager"],function(e,o,n,t,a,i){"use strict";var d={Loaded:"loaded",Wait:"wait",Step:"step",Error:"error",BlockDone:"blockDone",Start:"start",Done:"done",Skipped:"skipped"};var s="sap/ushell/bootstrap/SchedulingAgent/LoadingConfiguration.json";var l="sap/ushell/bootstrap/SchedulingAgent/StepConfiguration.json";var r={oSchedule:{iBlockIndex:0,aBlocksLoading:[]},initializeSchedule:function(){var e=n.loadResource(l,{async:true});var t=n.loadResource(s,{async:true});var a=Promise.all([e,t]).then(function(e){this._adaptForSpecialEvents(e);var n=e[0];var t=e[1];var a=this._validateConfig(t,n);if(a){this.oSchedule.oBlocks=t.LoadingBlocks;this.oSchedule.oSteps=n;this.oSchedule.aBlockOrder=t.OrderOfLoadingBlocks;this.oSchedule.iBlockIndex=0;o.setForModule(o.id.module.flpScheduler.id,o.id.module.flpScheduler.Initialized,"Schedule validated")}else{o.setForModule(o.id.module.flpScheduler.id,o.id.module.flpScheduler.WrongConfiguration,"Configuration error")}return a}.bind(this));return a},getNextLoadingStep:function(){var e={sStatus:d.Start,oContent:{}};if(this.oSchedule.aBlocksLoading.length===0){var n=this._startLoadingBlock();if(n){e.sStatus=d.Done;return e}}var t=true;var a=false;var i,s,l,r,c,p,u,S,g;for(var h=0;h<this.oSchedule.aBlocksLoading.length;h++){i=this.oSchedule.aBlocksLoading[h];s=this.oSchedule.oBlocks[i];l=s.iStepIndex;r=s.LoadingSteps[l];c=l===s.LoadingSteps.length-1;p=this._checkAndUpdateAsyncQueue(s);g=o.isStepLoaded(r.LoadingStep)||o.isStepSkipped(r.LoadingStep);S=o.isStepLoading(r.LoadingStep);t=p.bAllStepsDone&&g;a=p.bAStepIsLoading||S;if(S&&!r.canBeLoadedAsync||a&&c){e.sStatus=d.Wait;continue}if(!c||!g&&!S){if(g||r.canBeLoadedAsync&&S){l+=1}e=this._prepareStepForLoading(s,i,l)}if(t&&c){u=this.oSchedule.aBlocksLoading.indexOf(i);this.oSchedule.aBlocksLoading.splice(u,1);e.sStatus=d.BlockDone;o.setForLoadingBlock(i,o.id.loadingBlock.Done,"","Block removed from loading queue")}if(e.sStatus!==d.wait){break}}return e},dumpSchedule:function(){t.debug(JSON.stringify(this.oSchedule))},_adaptForSpecialEvents:function(o){const n=o[0];if(n.ConditionalWaitForAppLoading&&e.getActive()===false){n.ConditionalWaitForAppLoading={loadingMode:"waitInMs",waitInMs:{waitingTime:3e3},mandatoryShellModeAndLaunchpadStates:[{shellMode:"default",launchpadState:"app"}]};t.info("Step 'ConditionalWaitForAppLoading' was overwritten to 3 sec timeout for apps only.","FLPScheduler")}},_matchesShellModeAndLaunchpadState:function(e,o){const n=i.getLaunchpadState();const t=i.getShellMode()||"default";let a=false;if(e&&o){a=t===e&&n===o}else if(e){a=t===e}else if(o){a=n===o}return a},_loadingIsEnabled:function(e){if(Array.isArray(e.oConfig.excludedShellModeAndLaunchpadStates)){const o=e.oConfig.excludedShellModeAndLaunchpadStates.map(({shellMode:e,launchpadState:o})=>this._matchesShellModeAndLaunchpadState(e,o));if(o.some(e=>e)){return false}}if(Array.isArray(e.oConfig.mandatoryShellModeAndLaunchpadStates)&&e.oConfig.mandatoryShellModeAndLaunchpadStates.length!==0){const o=e.oConfig.mandatoryShellModeAndLaunchpadStates.map(({shellMode:e,launchpadState:o})=>this._matchesShellModeAndLaunchpadState(e,o));return o.every(e=>e)}function o(e){return e.path&&a.last(e.path)!==e.assertionValue}if(e.oConfig.configSwitch){const n=[].concat(e.oConfig.configSwitch);if(n.some(o)){return false}}return true},_checkAndUpdateAsyncQueue:function(e){var n=[];var t,a,i;var d=true;var s=false;if(Array.isArray(e.aAsyncStepsLoading)){for(var l=0;l<e.aAsyncStepsLoading.length;l++){i=e.aAsyncStepsLoading[l];t=o.isStepLoaded(i)||o.isStepSkipped(i);a=o.isStepLoading(i);if(a){n.push(i)}d=d&&t;s=s||a}}e.aAsyncStepsLoading=n;return{bAllStepsDone:d,bAStepIsLoading:s}},_startLoadingBlock:function(){var e=false;if(this.oSchedule.iBlockIndex<this.oSchedule.aBlockOrder.length){var n=this.oSchedule.aBlockOrder[this.oSchedule.iBlockIndex];this.oSchedule.aBlocksLoading.push(n);this.oSchedule.oBlocks[n].iStepIndex=0;this.oSchedule.oBlocks[n].aAsyncStepsLoading=[];this.oSchedule.iBlockIndex+=1;o.setForLoadingBlock(n,o.id.loadingBlock.Prepared,"","Block added to the loading queue.")}else{e=true}return e},_prepareStepForLoading:function(e,n,t){var a;var i={sStatus:d.Step,oContent:e.LoadingSteps[t],oConfig:this.oSchedule.oSteps[e.LoadingSteps[t].LoadingStep]};if(!this._loadingIsEnabled(i)){i.sStatus=d.Skipped;e.iStepIndex=t;o.setForLoadingStep(i.oContent.LoadingStep,o.id.loadingStep.Skipped,"","Step set to skipped");return i}var s=this._checkDependencies(i,n);if(s.bMissing){i.sStatus=d.Error}else if(s.bAllLoaded){o.setForLoadingStep(i.oContent.LoadingStep,o.id.loadingStep.Prepared,"","Step prepared for control unit");a=i.oContent.canBeLoadedAsync;e.iStepIndex=t;if(a){o.setForLoadingStep(i.oContent.LoadingStep,o.id.loadingStep.Prepared,"","Step set on the async loading queue");e.aAsyncStepsLoading.push(i.oContent.LoadingStep)}}else{i.sStatus=d.Wait;o.setForLoadingStep(i.oContent.LoadingStep,o.id.loadingStep.WaitingForDependencies,"","Step missing dependencies")}return i},_checkDependencies:function(e,n){var t={bAllLoaded:true,bMissing:false};if(e.oConfig.Dependencies){for(var a=0;a<e.oConfig.Dependencies.length;a++){t.bAllLoaded=t.bAllLoaded&&o.isStepLoaded(e.oConfig.Dependencies[a]);if(!o.isStepLoaded(e.oConfig.Dependencies[a])&&!o.isStepLoading(e.oConfig.Dependencies[a])){o.setForLoadingStep(e.oContent.LoadingStep,o.id.loadingStep.Aborted,e.oConfig.Dependencies[a],"Missing a dependency");o.setForLoadingBlock(n,o.id.loadingBlock.Aborted,e.oConfig.Dependencies[a],"A step is missing a dependency");o.setForModule(o.id.module.flpScheduler.id,o.id.module.flpScheduler.LoadingAborted,"Dependencies can not be resolved: a dependency isn't loading before it is required.");t.bMissing=true;t.bAllLoaded=false;break}}}return t},_validateConfig:function(e,o){var n=e&&e.OrderOfLoadingBlocks&&e.LoadingBlocks&&e.OrderOfLoadingBlocks.length&&o;if(!n){return false}var t=e.OrderOfLoadingBlocks.reduce(function(n,t){n=n&&e.LoadingBlocks[t];if(n){var a=e.LoadingBlocks[t];var i=true;if(a.LoadingSteps){var d;for(var s=0;s<a.LoadingSteps.length;s++){d=a.LoadingSteps[s].LoadingStep;i=i&&o[d]}}n=n&&i}return!!n},true);return t}};return r},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/SchedulingAgent/logger", ["sap/base/Log"],function(t){"use strict";var r=[];var n=true;var e="FLPScheduler";return{getHistory:function(){return r},verboseOn:function(){n=true;return n===true},verboseOff:function(){n=false;return n===false},isVerboseOn:function(){return n===true},clearHistory:function(){r.length=0},dumpHistory:function(t){var n;if(t){n=r.filter(function(r){return r.id===t});console.table(n)}else{console.table(r)}return n||r},logError:function(n){t.error(this.stateToString(n),undefined,e);r.push(n);return true},logWarning:function(u){if(n){t.warning(this.stateToString(u),e);r.push(u)}return n},logStatus:function(u){if(n){t.info(this.stateToString(u),e);r.push(u)}return n},stateToString:function(t){return"FLP Bootstrap Scheduling Agent :: "+t.type+" '"+t.id+"' /"+t.status+(t.remark?"/ : "+t.remark:"/")}}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/SchedulingAgent/state", ["sap/ushell/bootstrap/SchedulingAgent/logger","sap/base/util/now","sap/base/util/deepClone","sap/base/Log"],function(e,t,o,i){"use strict";var n={module:{schedulingAgent:{id:"schedulingAgent",FatalError:"FATAL_ERROR",Idle:"IDLE",Initialized:"INITIALIZED",Initializing:"INITIALIZING",Waiting:"WAITING",WokeUp:"WOKE_UP",Working:"WORKING"},state:{id:"state",FatalError:"FATAL_ERROR",Available:"AVAILABLE"},flpScheduler:{id:"flpScheduler",Initialized:"INITIALIZED",WrongConfiguration:"WRONG_CONFIGURATION",LoadingAborted:"LOADING_ABORTED"},flpLoader:{id:"flpLoader"},logger:{id:e,Block:"BLOCK",Step:"STEP",Module:"MODULE"}},loadingStep:{Prepared:"STEP_PREPARED",WaitingForDependencies:"STEP_WAITING_FOR_DEPENDENCIES",InProgress:"STEP_IN_PROGRESS",Done:"STEP_DONE",Aborted:"STEP_ABORTED",Skipped:"STEP_SKIPPED"},loadingBlock:{Prepared:"BLOCK_PREPARED",WaitingForDependencies:"BLOCK_WAITING_FOR_DEPENDENCIES",InProgress:"BLOCK_IN_PROGRESS",TimedOut:"BLOCK_TIMEDOUT",Done:"BLOCK_DONE",Aborted:"BLOCK_ABORTED"}};var a={id:n,oState:{ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}},clear:function(){this.oState={ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}}},getIdBase:function(){return n},setForLoadingBlock:function(o,i,a,r,d){this.oState.ofLoadingBlock[o]={time:t(),status:i,parameter:a,remark:r,byModule:d};e.logStatus({time:this.oState.ofLoadingBlock[o].time,type:n.module.logger.Block,id:o,status:i,parameter:a,remark:r,byModule:d})},getForLoadingBlock:function(e){return this.oState.ofLoadingBlock[e]},setForLoadingStep:function(o,i,a,r,d){this.oState.ofLoadingStep[o]={time:t(),status:i,parameter:a,remark:r,byModule:d};e.logStatus({time:this.oState.ofLoadingStep[o].time,type:n.module.logger.Step,id:o,status:i,parameter:a,remark:r,byModule:d})},getForLoadingStep:function(e){return this.oState.ofLoadingStep[e]},setForModule:function(o,i,a){this.oState.ofModule[o]={time:t(),status:i,remark:a,byModule:undefined};e.logStatus({time:this.oState.ofModule[o].time,type:n.module.logger.Module,id:o,status:i,parameter:undefined,remark:a,byModule:undefined})},getForModule:function(e){return this.oState.ofModule[e]},isBlockWaitingForDependencies:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===n.loadingBlock.WaitingForDependencies)},isBlockLoading:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===n.loadingBlock.InProgress)},isBlockLoaded:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===n.loadingBlock.Done)},isBlockLoadingAborted:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===n.loadingBlock.Aborted)},hasBlockLoadingTimedOut:function(e){var t=this.getForLoadingBlock(e);return!!(t&&t.status===n.loadingBlock.TimedOut)},isStepWaitingForDependencies:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===n.loadingStep.WaitingForDependencies)},isStepLoading:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===n.loadingStep.InProgress)},isStepLoaded:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===n.loadingStep.Done)},isStepLoadingAborted:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===n.loadingStep.Sborted)},isStepSkipped:function(e){var t=this.getForLoadingStep(e);return!!(t&&t.status===n.loadingStep.Skipped)},isAgentIdle:function(){var e=this.getForModule(n.module.schedulingAgent.id);return!!(e&&e.status===n.module.schedulingAgent.Idle)},isAgentWaiting:function(){var e=this.getForModule(n.module.schedulingAgent.id);return!!(e&&e.status===n.module.schedulingAgent.Waiting)},agentWokeUp:function(){var e=this.getForModule(n.module.schedulingAgent.id);return!!(e&&e.status===n.module.schedulingAgent.WokeUp)},dump:function(){i.debug(JSON.parse(JSON.stringify(this.oState)));var e=o(this.oState);return e},iStartingTime:t()};a.setForModule(n.module.state.id,n.module.state.Available);return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.create.configcontract.core", ["sap/base/util/ObjectPath","sap/ushell/bootstrap/common/common.debug.mode","sap/base/util/deepExtend"],(e,n,a)=>{"use strict";const o={};const s=new URLSearchParams(document.location.search);function i(i){const l={};function r(e,n){const a=n.split("/");const o=a.slice(0,a.length-1).join("/");const s=a.pop();if(e.hasOwnProperty(o)){return e[o][s]}const l=a.reduce((e,n)=>{if(!e||!e.hasOwnProperty(n)){return{}}return e[n]},i);e[o]=l;return l[s]}function t(e,n){const a=r(l,e);o[e]=n;return a!==undefined?a:n}function c(){const e="renderers/fiori2/componentData/config/enableBackGroundShapes";let n=!!r(l,e);if(n){n=!t("ushell/spaces/enabled",false)}o[e]=n;return n}function u(){return t("renderers/fiori2/componentData/config/enablePersonalization",t("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true))}function d(){let e=t("renderers/fiori2/componentData/config/rootIntent","");if(e){e=`#${e}`}return e}function p(){return t("ushell/spaces/enabled",false)&&!!t("ushell/homeApp/component",false)}const f=t("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",true);const h={enableEasyAccessOnTablet:t("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenuOnTablet",false),enableEasyAccessSAPMenu:t("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenu",f),enableEasyAccessSAPMenuSearch:t("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenuSearch",true),enableEasyAccessUserMenu:t("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenu",f),enableEasyAccessUserMenuSearch:t("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenuSearch",true)};function m(e){if(f===true){return h[e]?h[`${e}Search`]:false}return false}function g(e){if(typeof e!=="string"){return[]}return e.split(",").map(e=>e.trim())}function b(){return{name:"sap.ushell.components.workPageRuntime",asyncHints:{preloadBundles:["sap/ushell/preload-bundles/workpage-rt-common.js","sap/ushell/preload-bundles/workpage-rt-0.js","sap/ushell/preload-bundles/workpage-rt-1.js","sap/ushell/preload-bundles/workpage-rt-2.js","sap/ushell/preload-bundles/workpage-rt-3.js"]}}}function S(){const n={};e.set("spaces.enabled",true,n);if(t("ushell/menu/position")==="Side"){e.set("spaces.selectable",false,n)}else{e.set("spaces.selectable",true,n);e.set("favorites.enabled",true,n)}if(t("ushell/sideNavigation/mode")==="Docked"||t("ushell/menu/position")==="Side"){e.set("spaces.defaultIcon","sap-icon://document-text",n)}return JSON.stringify(n)}function v(){const n={};if(t("ushell/menu/position")!=="Side"){e.set("spaces.personalization.enabled",P(),n)}return JSON.stringify(n)}function A(){return t("ushell/sideNavigation/enabled",false)||t("ushell/menu/position")==="Side"}function P(){return t("ushell/menu/personalization/enabled",false)}const y={core:{site:{siteId:t("ushell/site/siteId",null),sapCdmVersion:t("ushell/site/sapCdmVersion",null)},extension:{dap:{pluginName:t("ushell/extension/dap/pluginName","DAP_PLUGIN"),enabled:t("ushell/extension/dap/enabled",true)},enableHelp:t("renderers/fiori2/componentData/config/enableHelp",false),SupportTicket:t("services/SupportTicket/config/enabled",false)},services:{allMyApps:{enabled:t("services/AllMyApps/config/enabled",true),showHomePageApps:t("services/AllMyApps/config/showHomePageApps",true),showCatalogApps:t("services/AllMyApps/config/showCatalogApps",true)}},navigation:{enableInPlaceForClassicUIs:{GUI:t("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/GUI",false),WDA:t("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WDA",false),WCF:t("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WCF",true)},enableWebguiLocalResolution:true,enableWdaLocalResolution:true,flpURLDetectionPattern:t("services/ClientSideTargetResolution/config/flpURLDetectionPattern","[/]FioriLaunchpad.html[^#]+#[^-]+?-[^-]+"),enableWdaCompatibilityMode:t("ushell/navigation/wdaCompatibilityMode",false)},spaces:{enabled:t("ushell/spaces/enabled",false),configurable:t("ushell/spaces/configurable",false),myHome:{userEnabled:true,enabled:t("startupConfig/spacesMyhome",false)||p(),myHomeSpaceId:t("startupConfig/spacesMyhomeSpaceid",null),myHomePageId:t("startupConfig/spacesMyhomePageid",null),presetSectionId:"3WO90XZ1DX1AS32M7ZM9NBXEF"},hideEmptySpaces:{enabled:t("ushell/spaces/enabled",false)&&t("ushell/spaces/hideEmptySpaces/enabled",false),userEnabled:true},extendedChangeDetection:{enabled:t("ushell/spaces/extendedChangeDetection/enabled",true)},homeNavigationTarget:t("renderers/fiori2/componentData/config/homeNavigationTarget",undefined),currentSpaceAndPage:undefined},workPages:{enabled:t("ushell/spaces/enabled",false)&&t("ushell/workPages/enabled",false),defaultComponent:b(),component:t("ushell/workPages/component",a(b(),{addCoreResourcesComplement:false})),contentApiUrl:t("ushell/workPages/contentApiUrl","/cep/content"),tileCard:t("ushell/workPages/tileCard",!!s.get("sap-ushell-tilecard")),customTileCard:t("ushell/workPages/customTileCard",!!s.get("sap-ushell-customtilecard")),myHome:{pageId:t("ushell/spaces/myHome/myHomePageId",null)},runtimeSwitcher:t("ushell/workPages/runtimeSwitcher",t("ushell/spaces/myHome/myHomePageId",null)===null),contentFinderStandalone:t("core/workPages/contentFinderStandalone",true)&&t("ushell/workPages/enabled",false)},shellBar:{enabled:t("ushell/shellBar/enabled",false)},homeApp:{enabled:p(),component:t("ushell/homeApp/component",{})},sideNavigation:{enabled:A(),mode:t("ushell/sideNavigation/mode","Docked"),navigationListProvider:{modulePath:t("ushell/sideNavigation/navigationListProvider/modulePath",t("ushell/menu/position")==="Side"?"sap/ushell/components/shell/SideNavigation/modules/SpacesNavigationListProvider":"sap/ushell/components/shell/SideNavigation/modules/GenericNavigationListProvider"),configuration:t("ushell/sideNavigation/navigationListProvider/configuration",S())},fixedNavigationListProvider:{modulePath:t("ushell/sideNavigation/fixedNavigationListProvider/modulePath",t("ushell/menu/position")==="Side"?"":"sap/ushell/components/shell/SideNavigation/modules/GenericFixedNavigationListProvider"),configuration:t("ushell/sideNavigation/fixedNavigationListProvider/configuration",v())}},notifications:{enabled:t("ushell/notifications/enabled",false)},menu:{enabled:t("ushell/spaces/enabled",false)&&t("ushell/menu/enabled")!==false&&!A()||t("ushell/menu/enabled",false),personalization:{enabled:P(),showNavigationBarMenuButton:t("ushell/menu/personalization/showNavigationBarMenuButton",P()&&!A())},visibleInAllStates:t("ushell/menu/visibleInAllStates",false)},menuQueryAvailable:t("ushell/menuQueryAvailable",false),darkMode:{enabled:t("ushell/darkMode/enabled",false),supportedThemes:t("ushell/darkMode/supportedThemes",[{dark:"sap_fiori_3_dark",light:"sap_fiori_3"},{dark:"sap_fiori_3_hcb",light:"sap_fiori_3_hcw"},{dark:"sap_horizon_dark",light:"sap_horizon"},{dark:"sap_horizon_hcb",light:"sap_horizon_hcw"}])},contentProviders:{providerInfo:{enabled:t("ushell/contentProviders/providerInfo/enabled",false),userConfigurable:t("ushell/contentProviders/providerInfo/enabled",false)&&t("ushell/contentProviders/providerInfo/userConfigurable",false),showContentProviderInfoOnVisualizations:t("ushell/contentProviders/providerInfo/enabled",false)&&t("ushell/contentProviders/providerInfo/userConfigurable",false)}},productSwitch:{enabled:!!t("ushell/productSwitch/url",""),url:t("ushell/productSwitch/url","")},shellHeader:{rootIntent:t("renderers/fiori2/componentData/config/rootIntent",""),homeUri:d()},companyLogo:{accessibleText:t("ushell/companyLogo/accessibleText",""),url:t("ushell/companyLogo/url","")},userPreferences:{dialogTitle:"Settings",isDetailedEntryMode:false,activeEntryPath:null,entries:[],profiling:[]},userSettings:{displayUserId:t("renderers/fiori2/componentData/config/displayUserId",false)},userActionsMenu:{displayUserId:t("ushell/userActionsMenu/displayUserId",false),displayAvatar:t("ushell/userActionsMenu/displayAvatar",false)},shell:{cacheConfiguration:t("renderers/fiori2/componentData/config/cacheConfiguration",{}),enableAbout:t("renderers/fiori2/componentData/config/enableAbout",true),enablePersonalization:u(),enableRecentActivity:t("renderers/fiori2/componentData/config/enableRecentActivity",true),enableRecentActivityLogging:t("renderers/fiori2/componentData/config/enableRecentActivityLogging",true),enableFiori3:true,sessionTimeoutIntervalInMinutes:t("renderers/fiori2/componentData/config/sessionTimeoutIntervalInMinutes",-1),enableFeaturePolicyInIframes:t("renderers/fiori2/componentData/config/enableFeaturePolicyInIframes",true),enableOpenIframeWithPost:t("renderers/fiori2/componentData/config/enableOpenIframeWithPost",true),favIcon:t("renderers/fiori2/componentData/config/favIcon",undefined),enableMessageBroker:t("services/MessageBroker/config/enabled",true),enablePersistantAppstateWhenSharing:t("services/AppState/config/persistentWhenShared",false),homePageTitle:t("ushell/header/title/home",""),windowTitleExtension:t("ushell/window/title/extension",""),useAppTitleFromNavTargetResolution:g(t("ushell/useAppTitleFromNavTargetResolution")),intentNavigation:t("ushell/intentNavigation",false),model:{enableSAPCopilotWindowDocking:undefined,enableBackGroundShapes:c(),personalization:undefined,contentDensity:undefined,setTheme:undefined,userDefaultParameters:undefined,disableHomeAppCache:undefined,enableHelp:undefined,enableTrackingActivity:undefined,searchAvailable:false,searchFiltering:true,searchTerm:"",isPhoneWidth:false,enableNotifications:t("services/NotificationsV2/config/enabled",t("services/Notifications/config/enabled",false)),enableNotificationsUI:false,notificationsCount:0,currentViewPortState:"Center",migrationConfig:undefined,shellAppTitleState:"",allMyAppsMasterLevel:undefined,userStatus:undefined,userStatusUserEnabled:true,shellAppTitleData:{currentViewInPopover:"navigationMenu",enabled:false,showGroupsApps:false,showCatalogsApps:false,showExternalProvidersApps:false},userImage:{personPlaceHolder:null,account:"sap-icon://account"},showRecentActivity:true}},state:{shellMode:t("renderers/fiori2/componentData/config/appState","")},home:{disableSortedLockedGroups:t("renderers/fiori2/componentData/config/applications/Shell-home/disableSortedLockedGroups",false),draggedTileLinkPersonalizationSupported:true,editTitle:false,enableHomePageSettings:t("renderers/fiori2/componentData/config/applications/Shell-home/enableHomePageSettings",true),enableRenameLockedGroup:t("renderers/fiori2/componentData/config/applications/Shell-home/enableRenameLockedGroup",false),enableTileActionsIcon:t("renderers/fiori2/componentData/config/enableTileActionsIcon",t("renderers/fiori2/componentData/config/applications/Shell-home/enableTileActionsIcon",false)),enableTransientMode:t("ushell/home/enableTransientMode",false),featuredGroup:{enable:t("ushell/home/featuredGroup/enable",false),frequentCard:t("ushell/home/featuredGroup/frequentCard",true)&&t("ushell/home/featuredGroup/enable",false),recentCard:t("ushell/home/featuredGroup/recentCard",true)&&t("ushell/home/featuredGroup/enable",false)},homePageGroupDisplay:t("renderers/fiori2/componentData/config/applications/Shell-home/homePageGroupDisplay","scroll"),isInDrag:false,optimizeTileLoadingThreshold:t("renderers/fiori2/componentData/config/applications/Shell-home/optimizeTileLoadingThreshold",100),sizeBehavior:t("renderers/fiori2/componentData/config/sizeBehavior","Responsive"),sizeBehaviorConfigurable:t("renderers/fiori2/componentData/config/sizeBehaviorConfigurable",false),wrappingType:t("ushell/home/tilesWrappingType","Normal"),segments:t("renderers/fiori2/componentData/config/applications/Shell-home/segments",undefined),tileActionModeActive:false},catalog:{enabled:u()||t("renderers/fiori2/componentData/config/enableAppFinder",false),appFinderDisplayMode:t("renderers/fiori2/componentData/config/applications/Shell-home/AppFinderDisplayMode",t("renderers/fiori2/componentData/config/applications/Shell-home/appFinderDisplayMode",undefined)),easyAccessNumbersOfLevels:t("renderers/fiori2/componentData/config/applications/Shell-home/easyAccessNumbersOfLevels",undefined),enableCatalogSearch:t("renderers/fiori2/componentData/config/enableSearchFiltering",t("renderers/fiori2/componentData/config/applications/Shell-home/enableSearchFiltering",t("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSearch",true))),enableCatalogSelection:t("renderers/fiori2/componentData/config/enableCatalogSelection",t("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSelection",true)),enableCatalogTagFilter:t("renderers/fiori2/componentData/config/applications/Shell-home/enableTagFiltering",t("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogTagFilter",true)),enableEasyAccess:f,enableEasyAccessSAPMenu:f?h.enableEasyAccessSAPMenu:false,enableEasyAccessOnTablet:f?h.enableEasyAccessOnTablet:false,enableEasyAccessSAPMenuSearch:m("enableEasyAccessSAPMenu"),enableEasyAccessUserMenu:f?h.enableEasyAccessUserMenu:false,enableEasyAccessUserMenuSearch:m("enableEasyAccessUserMenu"),enableHideGroups:t("renderers/fiori2/componentData/config/enableHideGroups",t("renderers/fiori2/componentData/config/applications/Shell-home/enableHideGroups",true)),sapMenuServiceUrl:undefined,userMenuServiceUrl:t("renderers/fiori2/componentData/config/applications/Shell-home/userMenuServiceUrl",undefined)},esearch:{defaultSearchScopeApps:t("renderers/fiori2/componentData/config/esearch/defaultSearchScopeApps",false),searchBusinessObjects:t("renderers/fiori2/componentData/config/esearch/searchBusinessObjects",true),searchScopeWithoutAll:t("renderers/fiori2/componentData/config/esearch/searchScopeWithoutAll",false)},customPreload:{enabled:!n.isDebug()&&t("ushell/customPreload/enabled",false),coreResourcesComplement:t("ushell/customPreload/coreResourcesComplement",[])},ui5:{timeZoneFromServerInUI5:t("ui5/timeZoneFromServerInUI5",false)},uiTracer:{enabled:t("services/UITracer/config/enabled",false)}}};return y}function l(){return o}return{createConfigContract:i,getDefaultConfiguration:l}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/bootstrap/common/common.load.model", ["sap/base/i18n/Localization","sap/base/util/extend","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/Config"],function(e,n,i,t,s){"use strict";var a;function o(){var o=s.last("/core");var l={groups:[],rtl:e.getRTL(),personalization:o.shell.enablePersonalization,tagList:[],selectedTags:[],userPreferences:{entries:[]},enableHelp:o.extension.enableHelp,enableTileActionsIcon:i.system.desktop?o.home.enableTileActionsIcon:false};l=n({},o.catalog,o.home,l);a=new t(l);a.setSizeLimit(1e4)}function l(e){a.setProperty("/isPhoneWidth",!e.matches)}function r(){var e=window.matchMedia("(min-width: 800px)");if(e.addListener){e.addListener(l);l(e)}}return{getModel:function(){if(!a){o();r()}return a}}},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/ComponentKeysHandler", ["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/EventBus","sap/ushell/Config","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/renderer/AccessKeysHandler","sap/ushell/bootstrap/common/common.load.model","sap/ushell/ui/launchpad/Tile","sap/ushell/Container"],function(e,t,i,n,s,jQuery,l,r,o,a,h){"use strict";var u=function(){};u._instance=undefined;u.getInstance=function(){if(u._instance===undefined){u._instance=new u;return u._instance._init().then(function(){return u._instance})}return Promise.resolve(u._instance)};u.prototype={keyCodes:s,_init:function(){this.oModel=o.getModel();if(h.getLogonSystem().getPlatform()==="cdm"){return Promise.resolve()}if(!this.oLaunchPageService){return h.getServiceAsync("FlpLaunchPage").then(function(e){this.oLaunchPageService=e}.bind(this))}return Promise.resolve()},goToLastVisitedTile:function(e,t){var i,n,s=jQuery(".sapUshellTile, .sapMGTLineMode, .sapFCard");if(t){var l=jQuery("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),o=this.oModel.getProperty("/topGroupInViewPortIndex");var a=e||jQuery(l.get(o));var h=a.find(".sapUshellTile, .sapMGTLineMode, .sapFCard");i=h.filter(":visible").eq(0);n=h.filter("[tabindex=0]:visible").eq(0);if(!i.length){i=s.filter(":visible").eq(0)}}else{i=s.filter(":visible").eq(0);n=s.filter("[tabindex=0]:visible").eq(0)}if(n.length){this.moveScrollDashboard(n)}else if(i.length){i.attr("tabindex","0");this.moveScrollDashboard(i)}else{r.sendFocusBackToShell()}},_goToFirstTileOfNextGroup:function(e,t){this._preventDefault(t);var i=this._getGroupAndTilesInfo();if(i){var n=this._getNextGroup(e,i.oGroup,false,true);if(n){this._goToTileOfGroup("first",n)}}},_goToTileOfGroup:function(e,t){if(t){var i=t.getTiles().filter(this._filterInvisibleTiles);var n=t.getLinks().filter(this._filterInvisibleTiles);if(t.getShowPlaceholder()){i.push(t.oPlusTile)}i=i.concat(n);e=e==="first"?0:e;e=e==="last"?i.length-1:e;var s=i[e];if(s){this.moveScrollDashboard(s.$());return true}}return false},_moveTile:function(e){var n=this._getGroupAndTilesInfo();if(!n||n.oGroup.getProperty("isGroupLocked")||n.oCurTile.isA("sap.ushell.ui.launchpad.PlusTile")){return null}var s=n.oCurTile;var l=this._getNextTile(e,true);if(l){var r=s.getMode?s.getMode():"ContentMode";var o=l.getMode?l.getMode():"ContentMode";var a=s.getParent();var h=l.getParent();var u=a===h;var f=r===o;var d=o==="LineMode"?h.getLinks():h.getTiles();var c=d.indexOf(l);var p=this._getTileRect(e,s);var g=this._getTileRect(e,l);if(!g){c=0}else{var T=p.right>g.right+5;var v=c===d.length-1;if(!u||!f){if((e==="up"||e==="down")&&T&&v){c++}else if(e==="left"){c++}}}var C=t.getElementById("sapUshellDashboardPage").getParent();i.getInstance().publish("launchpad",f?"movetile":"convertTile",{callBack:this.callbackSetFocus.bind(this),sTileId:C.getController()._getTileUuid(s),toGroupId:h.getGroupId?h.getGroupId():h.groupId,srcGroupId:a.getGroupId?a.getGroupId():a.groupId,toIndex:c,tile:s,sToItems:o==="LineMode"?"links":"tiles",sFromItems:r==="LineMode"?"links":"tiles",sTileType:r==="LineMode"?"link":"tile",longDrop:false})}},callbackSetFocus:function(e){setTimeout(function(){if(e.oParent&&e.oParent instanceof a){this.moveScrollDashboard(jQuery(e.oParent.getDomRef()))}else{this.moveScrollDashboard(e.$())}}.bind(this),0)},_getTileCenter:function(e,t,i){if(!(i instanceof HTMLElement)){var n=i.$().find(".sapMGTLineStyleHelper");if(i.isLink&&n&&n.length>1){if(e==="down"){return t.right}return t.left}}return t.right-(t.right-t.left)/2},_getTileRect:function(e,t){if(t instanceof HTMLElement){return t.getBoundingClientRect()}var i=t.$().find(".sapMGTLineStyleHelper");if(t.isLink&&i&&i.length){if(e==="down"){return i.get(i.length-1).getBoundingClientRect()}return i.get(0).getBoundingClientRect()}if(t.getDomRef()){return t.getDomRef().getBoundingClientRect()}return undefined},_findClosestTile:function(e,t,i){var n=this._getTileRect(e,i),s=this._getTileCenter(e,n,i);var l,r=Infinity,o=e==="down"?1:-1,a=t.indexOf(i)+o,h;for(;;a+=o){var u=t[a];if(!u){return l}if(!l){if(e==="down"&&a===t.length-1){return u}if(e==="up"&&a===0){return u}}var f=this._getTileRect(e,u);if(!f){return l}if(e==="down"&&n.bottom+5>=f.bottom){continue}if(e==="up"&&n.top-5<=f.top){continue}if(l&&h!==f.top){return l}h=f.top;var d=Math.min(Math.abs(f.left-s),Math.abs(f.right-s));if(r>d){r=d;l=u}else{return l}}},_filterInvisibleTiles:function(e){return e.getVisible()&&e.getDomRef()},_getNextTile:function(e,t){var i=this._getGroupAndTilesInfo();if(!i){return null}var n=i.oCurTile;var s=i.oGroup;var l=s.getTiles().filter(this._filterInvisibleTiles);var r=s.getLinks().filter(this._filterInvisibleTiles);var o=n.isLink;var a=s.getShowPlaceholder();var h=n.getBindingContext();var u=!t||h&&this._isLinkPersonalizationSupported(h.getObject().object);var f=o?r:l;var d=f.indexOf(n);if(d<0){if(e==="right"){if(r.length){return r[0]}}if(e==="left"){if(l.length){return l[l.length-1]}}}else{if(e==="right"){if(d<f.length-1){return f[d+1]}if(!o&&a&&!t){return s.oPlusTile}if(!o&&u&&r.length){return r[0]}}if(e==="left"){if(d>0){return f[d-1]}if(o&&a){return s.oPlusTile}if(o&&l.length){return l[l.length-1]}}}var c=this._getNextGroup(e,s,t,u);var p=c?c.getTiles().filter(this._filterInvisibleTiles):[];var g=c?c.getLinks().filter(this._filterInvisibleTiles):[];var T=c&&c.getShowPlaceholder();if(c){if(e==="right"){if(p.length){return p[0]}if(T){return c.oPlusTile}if(g.length){return g[0]}return c.oPlusTile}if(e==="left"){if(u&&g.length){return g[g.length-1]}if(T&&!t){return c.oPlusTile}if(p.length){return p[p.length-1]}return c.oPlusTile}}if(e==="up"||e==="down"){if(!l.length&&t){l=[s.oPlusTile]}var v=u?l.concat(r):l;var C=[];if(c){if(!p.length&&t){p=[c.oPlusTile]}C=u?p.concat(g):p}var _=e==="up"?C.concat(v):v.concat(C);return this._findClosestTile(e,_,n)}},_isLinkPersonalizationSupported:function(e){return!this.oLaunchPageService||this.oLaunchPageService.isLinkPersonalizationSupported(e)},_getNextGroup:function(e,t,i,n){var s;var l=t.getParent().getGroups();var r=l.indexOf(t);var o=r;if(e==="down"||e==="right"){s=1}else{s=-1}o+=s;while(l[o]){var a=l[o];var h=a.getTiles().filter(this._filterInvisibleTiles);var u=a.getLinks().filter(this._filterInvisibleTiles);var f=n?h.concat(u):h;var d=a.getVisible()&&!(a.getIsGroupLocked()&&i)&&!(a.getIsGroupLocked()&&f.length===0)&&!(f.length===0&&!(i||a.getShowPlaceholder()));if(d){return a}o+=s}return undefined},_getGroupAndTilesInfo:function(){var e=this._getFocusOnTile(jQuery(document.activeElement));if(!e||!e.length){return null}var i=t.closestTo(e[0]);i.isLink=e.hasClass("sapUshellLinkTile")||e.hasClass("sapMGTLineMode");var n=t.closestTo(e.closest(".sapUshellTileContainer")[0]);if(!n){return null}return{oCurTile:i,oGroup:n}},_goToSiblingElementInTileContainer:function(e,t){var i=t.closest(".sapUshellTileContainer"),n,s,l;n=t.closest(".sapUshellTileContainerBeforeContent");if(n.length){if(e==="up"||e==="left"){this._goToNextTileContainer(n,e)}else{l=i.find(".sapUshellTileContainerHeader").eq(0);l.focus()}return}n=t.closest(".sapUshellTileContainerHeader");if(n.length){if(e==="up"){if(!this._goToTileContainerBeforeContent(i)){this._goToNextTileContainer(n,e)}}else if(e==="down"){s=i.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(s.length){this.moveScrollDashboard(s)}else{this._goToNextTileContainer(n,e)}}else if(e==="left"){if(t.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(i)){this._goToNextTileContainer(n,"left")}}else{l=t.closest(".sapUshellTileContainerHeader");l.focus()}}else if(e==="right"){var r=t.hasClass("sapMInputBaseInner");if(!r){s=i.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(s.length){this.moveScrollDashboard(s)}else{this._goToNextTileContainer(n,"down")}}}return}n=this._getFocusOnTile(t);if(n){this._goFromFocusedTile(e,n,true);return}n=t.closest(".sapUshellTileContainerAfterContent");if(n.length){if(e==="up"||e==="left"){this._goToTileOfGroup("first",n.control(0))}else{this._goToNextTileContainer(n,e)}}},_goToNextTileContainer:function(e,i){var n=e.closest(".sapUshellTileContainer");if(n.length===1){var s=jQuery(".sapUshellTileContainer").filter(":visible"),l=i==="down"?1:-1,r=jQuery(s[s.index(n)+l]);if(r.length===1){var o=r.find(".sapUshellTileContainerHeader");if(i==="down"){if(!this._goToTileContainerBeforeContent(r)){this._setTileContainerSelectiveFocus(r)}}else if(!this._goToTileContainerAfterContent(r)){if(i==="up"||i==="left"){var a=i==="up"?"first":"last";if(!this._goToTileOfGroup(a,t.closestTo(r[0]))){o.focus()}}}}}},_goToTileContainerBeforeContent:function(e){var t=e.hasClass("sapUshellTileContainer")?e:e.closest(".sapUshellTileContainer"),i=t.find(".sapUshellTileContainerBeforeContent button").filter(":visible");if(i.length){i.focus();return true}return false},_goToTileContainerAfterContent:function(e){var t=e.hasClass("sapUshellTileContainer")?e:e.closest(".sapUshellTileContainer"),i=t.find(".sapUshellTileContainerAfterContent button").filter(":visible");if(i.length){i.focus();return true}return false},_goFromFocusedTile:function(e,t,i){var n=this._getNextTile(e),s=t.closest(".sapUshellTileContainer");if(n){var l=n.$(),r=l.closest(".sapUshellTileContainer");if(i&&s.get(0).id!==r.get(0).id){if(e==="down"||e==="right"){if(!this._goToTileContainerAfterContent(s)){this._setTileContainerSelectiveFocus(r)}}else if(e==="up"||e==="left"){var o=s.find(".sapUshellTileContainerHeader");o.focus()}}else{this.moveScrollDashboard(l)}}else if(i){if(e==="down"||e==="right"){this._goToTileContainerAfterContent(s)}else if(e==="up"||e==="left"){var a=s.find(".sapUshellTileContainerHeader");a.focus()}}},_setTileContainerSelectiveFocus:function(e){var t=jQuery("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),i=e.find(".sapUshellTileContainerBeforeContent button"),n=e.find(".sapUshellTileContainerHeader").eq(0),s=i.length&&i.is(":visible");if(s){i.focus()}else if(e.get(0)===t.get(0)){this.goToLastVisitedTile()}else if(n.length){n.focus()}},_setTileFocus:function(e){var n=document.getElementById("catalogView");if(n&&n.contains(e)){this.setFocusOnCatalogTile(e);return}var s=document.getElementById("dashboardGroups");var l=s.querySelectorAll(".sapUshellTile[tabindex]");for(var r=0;r<l.length;++r){l[r].removeAttribute("tabindex")}var o=[".sapMGTLineMode",".sapMGT",".sapFCard"].join('[tabindex="0"], ');var a=s.querySelectorAll(o);for(var h=0;h<a.length;++h){a[h].setAttribute("tabindex","-1")}e.setAttribute("tabindex",0);var u=t.getElementById(e.getAttribute("id"));if(u){var f=u.getParent();if(f){var d=i.getInstance();d.publish("launchpad","scrollToGroup",{group:f})}u.focus()}},setFocusOnCatalogTile:function(e){var t=jQuery(".sapUshellTile[tabindex=0]"),i,n;if(t.length){jQuery(".sapUshellTileContainerContent [tabindex=0]").get().forEach(function(e){jQuery(e).attr("tabindex",-1)});i=t.find("[tabindex], a").addBack().filter("[tabindex], a");i.attr("tabindex",-1)}if(!e){n=jQuery(".sapUshellTile, .sapUshellAppBox").filter(":visible");if(n.length){e=n[0]}else{var s=document.getElementsByClassName("sapMMessagePageMainText");if(s.length){s[0].focus()}return}}e.setAttribute("tabindex",0);jQuery(e).find("button").attr("tabindex",0);e.focus()},moveScrollDashboard:function(e){if(e.length){this._setTileFocus(e[0])}},_moveGroupFromDashboard:function(e,t){var i,n=jQuery(".sapUshellDashboardGroupsContainerItem"),s,l;i=t.closest(".sapUshellDashboardGroupsContainerItem");s=n.index(i);l=e==="up"||e==="left"?s-1:s+1;this._moveGroup(s,l)},_moveGroup:function(e,t){if(t<0||t>=jQuery(".sapUshellDashboardGroupsContainerItem").length||t<jQuery(".sapUshellDisableDragAndDrop").length){return}i.getInstance().publish("launchpad","moveGroup",{fromIndex:e,toIndex:t});setTimeout(function(){var e=jQuery(".sapUshellTileContainerHeader")[t];jQuery(e).focus()},100)},_getFocusOnTile:function(e){var t;[".sapUshellTile",".sapUshellLinkTile",".sapFCard"].forEach(function(i){var n=e.closest(i);if(n.length){t=n}});return t},_renameGroup:function(e){if(e.closest(".sapUshellTileContainerHeader").length===1){e=e[0].tagName==="H2"?e:e.find("h2");e.click()}},_arrowsButtonsHandler:function(e,t,i){this._preventDefault(t);if(i.hasClass("sapUshellAnchorItem")){this._handleAnchorNavigationItemsArrowKeys(e,i);return}if(i.is("#sapUshellAnchorBarOverflowButton")){this._handleAnchorNavigationOverflowButtonArrowKeys(e);return}var n=this._getFocusOnTile(i);var s=this.oModel.getProperty("/tileActionModeActive");var l=this.oModel.getProperty("/personalization");if(t.ctrlKey===true&&l){var r=i.closest(".sapUshellTileContainerHeader");if(n){this._moveTile(e)}else if(r.length){var o=r.closest(".sapUshellTileContainerContent");if(!o.hasClass("sapUshellTileContainerDefault")||!o.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(e,r)}}}else if(s){this._goToSiblingElementInTileContainer(e,i)}else if(n){this._goFromFocusedTile(e,n,s)}else{this.goToLastVisitedTile()}},_handleAnchorNavigationOverflowButtonArrowKeys:function(e){if(e==="left"||e==="up"){var t=jQuery(".sapUshellAnchorItem").filter(":visible");this._setAnchorItemFocus(t.eq(t.length-1)[0])}},_handleAnchorNavigationItemsArrowKeys:function(e,t){var i=jQuery(".sapUshellAnchorItem").filter(":visible"),n=i.index(t);if(e==="left"||e==="up"){if(n>0){this._setAnchorItemFocus(i.eq(n-1)[0]);return}}if(e==="right"||e==="down"){if(n<i.length-1){this._setAnchorItemFocus(i.eq(n+1)[0])}else if(n===i.length-1){var s=document.getElementById("sapUshellAnchorBarOverflowButton");s.focus()}}},_setAnchorItemFocus:function(e){var t=document.getElementsByClassName("sapUshellAnchorItem");for(var i=0;i<t.length;++i){t[i].setAttribute("tabindex","-1")}if(!e){e=jQuery(".sapUshellAnchorItem").filter(":visible")[0]}e.setAttribute("tabindex","0");e.focus()},_appFinderHomeEndButtonsHandler:function(e,t,i){var n=jQuery(".sapUshellTile, .sapUshellAppBox").filter(":visible"),s;if(n.length){if(e==="home"){s=jQuery(n.get(0))}if(e==="end"){s=jQuery(n.get(n.length-1))}}if(s){this._preventDefault(t);this._appFinderFocusAppBox(i,s)}},_homeEndButtonsHandler:function(e,i,n){if(n.hasClass("sapUshellAnchorItem")){this._preventDefault(i);this._setAnchorItemFocus(jQuery(".sapUshellAnchorItem").filter(":visible:"+e)[0])}else if(i.ctrlKey===true){this._preventDefault(i);var s=jQuery(".sapUshellTile, .sapFCard").filter(":visible")[e]();if(s.length){this._setTileFocus(s[0])}}else{var l=n.closest(".sapUshellTileContainer");if(l){var r=t.closestTo(l[0]);if(r){this._preventDefault(i);this._goToTileOfGroup(e,r)}}}},_deleteButtonHandler:function(e){var n=this.oModel.getProperty("/tileActionModeActive");var s=this.oModel.getProperty("/personalization");if(n&&s){var l=this._getFocusOnTile(e);if(l&&!l.hasClass("sapUshellLockedTile")&&!l.hasClass("sapUshellPlusTile")){var r=this._getGroupAndTilesInfo();if(r&&!r.oCurTile.isLink){var o=t.getElementById("sapUshellDashboardPage").getParent();i.getInstance().publish("launchpad","deleteTile",{tileId:o.getController()._getTileUuid(r.oCurTile),items:"tiles"},this)}}}},_spaceButtonHandler:function(e,i){e.preventDefault();var n=this._getFocusOnTile(i);if(!n||!n.length){i.click();return}if(n.hasClass("sapFCard")){t.closestTo(n[0]).getCardHeader().firePress();return}var s=i.find("[role=button], a.sapMGT");if(s.length&&!this.oModel.getProperty("/tileActionModeActive")){var l=t.closestTo(s[0]);if(l){l.firePress();return}}t.closestTo(n[0]).firePress()},goToSelectedAnchorNavigationItem:function(){this._setAnchorItemFocus(document.getElementsByClassName("sapUshellAnchorItemSelected")[0]);return document.activeElement&&document.activeElement.classList.contains("sapUshellAnchorItemSelected")},handleFocusOnMe:function(e,i){var s=h.getRendererInternal("fiori2"),l=u._instance;if(s){var r=s.getCurrentCoreView();if(r==="home"&&!n.last("/core/spaces/enabled")){var o=document.activeElement?document.activeElement.tagName:"";if(o==="INPUT"||o==="TEXTAREA"){if(e.keyCode===l.keyCodes.ENTER){var a=jQuery(document.activeElement).closest(".sapUshellTileContainerHeader");if(a.length){setTimeout(function(){a=jQuery("#"+a[0].id);a.focus()},10)}}}else{l._dashboardKeydownHandler(e)}}if(r==="appFinder"&&!n.last("/core/workPages/contentFinderStandalone")){if(i){if(e.shiftKey){l.setFocusOnCatalogTile()}else{var f=t.getElementById("openCloseButtonAppFinderSubheader");if(f&&f.getVisible()){f.focus()}else{l.appFinderFocusMenuButtons(e)}}}else{l._appFinderKeydownHandler(e)}}}},_appFinderFocusAppBox:function(e,t){if(e&&t){e.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");t.attr("tabindex","0").focus();t.find(".sapUshellPinButton").attr("tabindex","0")}},_preventDefault:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation()},_getNextCatalog:function(e,t){var i;if(e==="down"||e==="right"){i=t.next()}else if(e==="up"||e==="left"){i=t.prev()}else{l.error("Direction is unkown",e,"sap.ushell.components.ComponentKeysHandler");return null}if(i.length>0){var n=i.find("li.sapUshellAppBox, li.sapUshellTile").get().length;if(n>0){return i}return this._getNextCatalog(e,i)}return undefined},_getNextCatalogItem:function(e,t,i){var n=jQuery(t.parents()[2]),s=n.find("li.sapUshellAppBox, li.sapUshellTile").get();if(e==="right"||e==="left"){var l=s.indexOf(t.get(0)),r=e==="right"?l+1:l-1;if(s[r]){return s[r]}}var o=this._getNextCatalog(e,n),a=o?o.find("li.sapUshellAppBox, li.sapUshellTile").get():[];if(a.length>0&&e==="right"){return a[0]}if(a.length>0&&e==="left"){return a[a.length-1]}if(e==="down"||e==="up"){if(a.length>0&&i){return a[0]}var h=e==="down"?s.concat(a):a.concat(s);return this._findClosestTile(e,h,t.get(0))}return undefined},_appFinderKeysHandler:function(e,t,i,n){if(i.is(".sapUshellAppBox, .sapUshellTile")){this._preventDefault(t);var s=jQuery(this._getNextCatalogItem(e,i,n));if(s){this._appFinderFocusAppBox(i,s)}}},appFinderFocusMenuButtons:function(e){var t=jQuery("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(t.length){t.eq(0).focus();this._preventDefault(e);return true}return false},_appFinderKeydownHandler:function(t){var i=jQuery(document.activeElement);if(t.srcElement.id!=="appFinderSearch-I"){var n=t.keyCode,s=e.getRTL();if(s&&n===this.keyCodes.ARROW_RIGHT){n=this.keyCodes.ARROW_LEFT}else if(s&&n===this.keyCodes.ARROW_LEFT){n=this.keyCodes.ARROW_RIGHT}switch(n){case this.keyCodes.ARROW_UP:this._appFinderKeysHandler("up",t,i);break;case this.keyCodes.ARROW_DOWN:this._appFinderKeysHandler("down",t,i);break;case this.keyCodes.ARROW_RIGHT:this._appFinderKeysHandler("right",t,i);break;case this.keyCodes.ARROW_LEFT:this._appFinderKeysHandler("left",t,i);break;case this.keyCodes.PAGE_UP:this._appFinderKeysHandler("up",t,i,true);break;case this.keyCodes.PAGE_DOWN:this._appFinderKeysHandler("down",t,i,true);break;case this.keyCodes.HOME:this._appFinderHomeEndButtonsHandler("home",t,i);break;case this.keyCodes.END:this._appFinderHomeEndButtonsHandler("end",t,i);break;case this.keyCodes.SPACE:this._spaceButtonHandler(t,i);break;default:return}}},_dashboardKeydownHandler:function(t){var i=document.activeElement&&document.activeElement.tagName;if(i==="INPUT"||i==="TEXTAREA"){return}var n=t.keyCode,s=e.getRTL(),l=jQuery(document.activeElement);if(s){if(n===this.keyCodes.ARROW_RIGHT){n=this.keyCodes.ARROW_LEFT}else if(n===this.keyCodes.ARROW_LEFT){n=this.keyCodes.ARROW_RIGHT}}switch(n){case this.keyCodes.F2:this._renameGroup(l);break;case this.keyCodes.DELETE:case this.keyCodes.BACKSPACE:this._deleteButtonHandler(l);break;case this.keyCodes.ARROW_UP:this._arrowsButtonsHandler("up",t,l);break;case this.keyCodes.ARROW_DOWN:this._arrowsButtonsHandler("down",t,l);break;case this.keyCodes.ARROW_RIGHT:this._arrowsButtonsHandler("right",t,l);break;case this.keyCodes.ARROW_LEFT:this._arrowsButtonsHandler("left",t,l);break;case this.keyCodes.PAGE_UP:this._goToFirstTileOfNextGroup("up",t);break;case this.keyCodes.PAGE_DOWN:this._goToFirstTileOfNextGroup("down",t);break;case this.keyCodes.HOME:this._homeEndButtonsHandler("first",t,l);break;case this.keyCodes.END:this._homeEndButtonsHandler("last",t,l);break;case this.keyCodes.SPACE:this._spaceButtonHandler(t,l);break;case this.keyCodes.ENTER:this._spaceButtonHandler(t,l);break;default:break}}};return u});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/SharedComponentUtils", ["sap/ui/Device","sap/ushell/Config","sap/ushell/EventHub","sap/base/Log","sap/ui/core/Component","sap/ushell/Container"],function(e,t,n,r,i,s){"use strict";var o={PERS_KEY:"flp.settings.FlpSettings",bFlpSettingsAdded:false,toggleUserActivityLog:function(){n.join(n.once("CoreResourcesComplementLoaded"),t.on("/core/extension/SupportTicket")).do((e,t)=>{sap.ui.require(["sap/ushell/UserActivityLog"],e=>{if(t){e.activate()}else{e.deactivate()}})})},initializeAccessKeys:function(){if(e.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderer/AccessKeysHandler"],function(e,t){e.getInstance().then(function(e){t.registerAppKeysHandler(e.handleFocusOnMe)})})}},getEffectiveHomepageSetting:function(e,n){if(t.last(n)===false){return Promise.resolve(t.last(e))}var r=e.split("/").pop();return this._getPersonalization(r).then(function(n){if(typeof n==="undefined"){return t.last(e)}t.emit(e,n);return n}).catch(function(){return t.last(e)})},_getPersonalization:function(e){return o.getPersonalizer(e,s.getRendererInternal("fiori2")).then(function(e){return e.getPersData()}).catch(function(t){r.error("Failed to load "+e+" from the personalization",t,"sap.ushell.components.flp.settings.FlpSettings");return Promise.reject(t)})},getPersonalizer:function(e,t){return s.getServiceAsync("PersonalizationV2").then(function(n){var r=i.getOwnerComponentFor(t);var s={keyCategory:n.KeyCategory.FIXED_KEY,writeFrequency:n.WriteFrequency.LOW,clientStorageAllowed:true};var o={container:this.PERS_KEY,item:e};return n.getPersonalizer(o,s,r)}.bind(this))}};return o});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/pages/controller/PagesAndSpaceId", ["sap/ushell/resources","sap/ushell/Config","sap/ushell/Container"],function(e,n,t){"use strict";var i=function(){};i.prototype.getPageAndSpaceId=function(e){return t.getServiceAsync("URLParsing").then(function(n){if(e===undefined){e=window.hasher.getHash()}var t=n.parseShellHash(e)||{};var i={semanticObject:t.semanticObject||"",action:t.action||""};var a=t.params||{};var r=a.pageId||[];var c=a.spaceId||[];return this._parsePageAndSpaceId(r,c,i)}.bind(this))};i.prototype._parsePageAndSpaceId=function(n,t,i){return new Promise(function(a,r){this.getUserMyHomeEnablement().then(function(){if(n.length<1&&t.length<1){var c=i.semanticObject==="Shell"&&i.action==="home";var g=i.semanticObject===""&&i.action==="";if(c||g){this._getUserDefaultSpaceAndPage().then(function(e){a(e)}).catch(function(e){r(e)});return}r(e.i18n.getText("PageRuntime.NoPageIdAndSpaceIdProvided"))}if(n.length===1&&t.length===0){r(e.i18n.getText("PageRuntime.OnlyPageIdProvided"))}if(n.length===0&&t.length===1){r(e.i18n.getText("PageRuntime.OnlySpaceIdProvided"))}if(n.length>1||t.length>1){r(e.i18n.getText("PageRuntime.MultiplePageOrSpaceIdProvided"))}if(n[0]===""){r(e.i18n.getText("PageRuntime.InvalidPageId"))}if(t[0]===""){r(e.i18n.getText("PageRuntime.InvalidSpaceId"))}a({pageId:n[0],spaceId:t[0]})}.bind(this))}.bind(this))};i.prototype.getUserMyHomeEnablement=function(){return new Promise(function(e,i){var a=t.getUser().getShowMyHome();n.emit("/core/spaces/myHome/userEnabled",a);e(a)})};i.prototype._getUserDefaultSpaceAndPage=function(){return new Promise(function(n,i){Promise.all([t.getServiceAsync("Menu"),this.getUserMyHomeEnablement()]).then(function(t){var a=t[0];a.getDefaultSpace().then(function(t){if(!t){i(e.i18n.getText("PageRuntime.NoAssignedSpace"));return}var a=t&&t.children&&t.children[0];if(!a){i(e.i18n.getText("PageRuntime.NoAssignedPage"));return}n({spaceId:t.id,pageId:a.id})})}).catch(function(e){i(e)})}.bind(this))};return new i});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/Component", ["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],function(e,t){"use strict";return t.extend("sap.ushell.components.tiles.cdm.applauncher.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){var t=this.getComponentData();var o=t.properties.tilePersonalization||{};var i=t.startupParameters;if(i&&i["sap-system"]){o["sap-system"]=i["sap-system"][0]}return e.create({viewName:"sap.ushell.components.tiles.cdm.applauncher.StaticTile",viewData:{properties:t.properties,configuration:o}}).then(function(e){this._oController=e.getController();e.getContent()[0].bindTileContent({path:"/properties",factory:this._oController._getTileContent.bind(this._oController)});return e}.bind(this))},tileSetVisualProperties:function(e){if(this._oController){this._oController.updatePropertiesHandler(e)}},tileRefresh:function(){},tileSetVisible:function(e){},tileSetEditMode:function(e){if(this._oController){this._oController.editModeHandler(e)}},tileSetSizeBehavior:function(e){if(this._oController){this._oController.sizeBehaviorHandler(e)}},exit:function(){this._oController=null}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncher/StaticTile.controller", ["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/base/Log","sap/ushell/utils/UrlParsing","sap/ushell/EventHub","sap/ushell/Container"],function(e,t,i,r,o,n,a,s,p,l){"use strict";var c=n.GenericTileScope;var d=n.GenericTileMode;var f=e.DisplayFormat;var g=e.AppType;return t.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{_aDoables:[],_getConfiguration:function(){var e=this.getView().getViewData();e.properties.configSizeBehavior=i.last("/core/home/sizeBehavior");e.properties.wrappingType=i.last("/core/home/wrappingType");return e},onInit:function(){var e=this.getView();var t=new o;t.setData(this._getConfiguration());e.setModel(t);this._aDoables.push(i.on("/core/home/sizeBehavior").do(function(e){t.setProperty("/properties/configSizeBehavior",e)}));var r=this.getView().getViewData();var n=r.properties;n.mode=n.mode||(n.icon?"ContentMode":"HeaderMode");if(n.displayFormat===f.Compact&&n.title&&n.targetURL){t.setProperty("/properties/mode",d.LineMode)}switch(n.displayFormat){case f.Flat:t.setProperty("/properties/frameType","OneByHalf");break;case f.FlatWide:t.setProperty("/properties/frameType","TwoByHalf");break;case f.StandardWide:t.setProperty("/properties/frameType","TwoByOne");break;default:{t.setProperty("/properties/frameType","OneByOne")}}const a=i.last("/core/contentProviders/providerInfo/enabled");const s=i.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");t.setProperty("/properties/showContentProviderInfoInTooltip",a);t.setProperty("/properties/showContentProviderInfoOnVisualizations",a&&s);if(a){this._aDoables.push(i.on("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations").do(function(e){t.setProperty("/properties/showContentProviderInfoOnVisualizations",e)}))}},onExit:function(){this._aDoables.forEach(function(e){e.off()});this._aDoables=[]},editModeHandler:function(e){var t=e?c.ActionMore:c.Display;this.getView().getModel().setProperty("/properties/scope",t)},sizeBehaviorHandler:function(e){this.getView().getModel().setProperty("/properties/customSizeBehavior",e)},onPress:function(e){var t=this.getView().getViewData().properties;if(e.getSource().getScope&&e.getSource().getScope()===c.Display){var o=this._createTargetUrl();if(!o){return}p.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:o}});if(o[0]==="#"){hasher.setHash(o)}else{var n=i.last("/core/shell/enableRecentActivity")&&i.last("/core/shell/enableRecentActivityLogging");if(n){var a={title:t.title,appType:g.URL,url:t.targetURL,appId:t.targetURL};l.getRendererInternal("fiori2").logRecentActivity(a)}r.openURL(o,"_blank")}}},updatePropertiesHandler:function(e){var t=this.getView().getContent()[0];var i=t.getTileContent()[0];if(typeof e.title!=="undefined"){t.setHeader(e.title)}if(typeof e.subtitle!=="undefined"){t.setSubheader(e.subtitle)}if(typeof e.icon!=="undefined"){i.getContent().setSrc(e.icon)}if(typeof e.info!=="undefined"){i.setFooter(e.info)}},_createTargetUrl:function(){var e=this.getView().getViewData().properties.targetURL;var t=this.getView().getViewData().configuration["sap-system"];var i;if(e&&t){if(s.isIntentUrl(e)){i=s.parseShellHash(e);if(!i.params){i.params={}}i.params["sap-system"]=t;e="#"+s.constructShellHash(i)}else{e+=(e.indexOf("?")<0?"?":"&")+"sap-system="+t}}return e},_getLeanUrl:function(){return r.getLeanURL(this._createTargetUrl())},_getTileContent:function(e,t){var i=t.getPath().split("/");i.pop();var r=t.getProperty(i.join("/"));if(r!==this.oLastBindingObject||this.oTileContent&&this.oTileContent.bIsDestroyed){this.oLastBindingObject=r;this.oTileContent=this.getView().byId(r.icon?"imageTileContent":"standardTileContent").clone()}return this.oTileContent},_getCurrentProperties:function(){var e=this.getView().getContent()[0];var t=e.getTileContent()[0];var r=i.last("/core/home/sizeBehavior");return{title:e.getHeader(),subtitle:e.getSubheader(),info:t.getFooter(),icon:t.getContent().getSrc(),mode:e.getMode(),configSizeBehavior:r}}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/Component", ["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],function(e,t){"use strict";return t.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){var t=this.getComponentData();var r=t.properties||{};var i=r.tilePersonalization||{};var o=r.indicatorDataSource;if(o&&o.path){i.serviceUrl=o.path;i.serviceRefreshInterval=o.refresh}else if(o&&o.url){i.serviceUrl=o.url;i.serviceRefreshInterval=o.refreshInterval}var s=t.startupParameters;if(s&&s["sap-system"]&&s["sap-system"][0]){i["sap-system"]=s["sap-system"][0]}if(i.serviceUrl&&i.serviceUrl.charAt(0)!=="/"&&r.dataSource&&r.dataSource.uri){var n=r.dataSource.uri;if(i["sap-system"]){if(n.charAt(n.length-1)==="/"){n=n.slice(0,n.length-1)}n+=";o="+i["sap-system"]}if(n.charAt(n.length-1)!=="/"){n+="/"}n+=i.serviceUrl;i.serviceUrl=n}return e.create({viewName:"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",viewData:{properties:r,configuration:i}}).then(function(e){this._oController=e.getController();this._oController.visibleHandler(this.bIsVisible);return e}.bind(this))},tileSetVisualProperties:function(e){if(this._oController){this._oController.updateVisualPropertiesHandler(e)}},tileRefresh:function(){if(this._oController){this._oController.refreshHandler()}},tileSetVisible:function(e){if(this._oController){this._oController.visibleHandler(e)}else{this.bIsVisible=e}},tileSetEditMode:function(e){if(this._oController){this._oController.editModeHandler(e)}},tileSetSizeBehavior:function(e){if(this._oController){this._oController.sizeBehaviorHandler(e)}},tileSetPreview:function(e){if(this._oController){this._oController.previewHandler(e)}},exit:function(){this._oController=null}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.controller", ["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/format/NumberFormat","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/ushell/library","sap/base/Log","sap/base/util/merge","sap/ushell/utils/DynamicTileRequest","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/EventHub","sap/ushell/Container"],function(e,t,r,i,a,o,s,n,l,u,p,f,d,c,h){"use strict";var m=s.GenericTileScope;var g=s.DeviationIndicator;var v=s.ValueColor;var b=s.FrameType;var y=n.DisplayFormat;var _=n.AppType;var D="sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile";var R="<RESET>";var w={title:"",subtitle:"",icon:"",info:"",infoState:v.Neutral,targetURL:"",number_value:"...",number_unit:"",number_factor:"",number_state_arrow:g.None,number_value_state:v.Neutral};return e.extend(D,{_aDoables:[],timer:null,iLastTimeoutStart:0,oDataRequest:null,bShouldNotRefreshDataAfterInit:false,_getConfiguration:function(e){var t={};var r;t.configuration=e.configuration;t.properties=e.properties;t.properties.info=t.properties.info||w.info;t.properties.number_value=t.properties.preview?1234:w.number_value;t.properties.number_value_state=w.number_value_state;t.properties.number_state_arrow=w.number_state_arrow;t.properties.number_factor=w.number_factor;t.properties.number_unit=t.properties.numberUnit||w.number_unit;var a=t.configuration["sap-system"];var o=t.properties.targetURL;if(o&&a){if(d.isIntentUrl(o)){r=d.parseShellHash(o);if(!r.params){r.params={}}r.params["sap-system"]=a;o="#"+d.constructShellHash(r)}else{o+=(o.indexOf("?")<0?"?":"&")+"sap-system="+a}t.properties.targetURL=o}t.properties.configSizeBehavior=i.last("/core/home/sizeBehavior");t.properties.wrappingType=i.last("/core/home/wrappingType");switch(t.properties.displayFormat){case y.Flat:t.properties.frameType=b.OneByHalf;break;case y.FlatWide:t.properties.frameType=b.TwoByHalf;break;case y.StandardWide:t.properties.frameType=b.TwoByOne;break;default:{t.properties.frameType=b.OneByOne}}t.originalProperties=u({},e.properties);return t},onInit:function(){var e=this.getView();var t=new o;var r=e.getViewData();var a=r.properties;t.setData(this._getConfiguration(r));const s=i.last("/core/contentProviders/providerInfo/enabled");const n=i.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");t.setProperty("/properties/showContentProviderInfoInTooltip",s);t.setProperty("/properties/showContentProviderInfoOnVisualizations",s&&n);if(s){this._aDoables.push(i.on("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations").do(function(e){t.setProperty("/properties/showContentProviderInfoOnVisualizations",e)}))}e.setModel(t);this._aDoables.push(i.on("/core/home/sizeBehavior").do(function(e){t.setProperty("/properties/configSizeBehavior",e)}));if(a.preview){this.previewHandler(true)}},refreshHandler:function(){this.loadData(0,true)},visibleHandler:function(e){if(e){if(!this.oDataRequest||this.timer===null){this.initRequestInterval()}}else{this.stopRequests()}},editModeHandler:function(e){var t=e?m.ActionMore:m.Display;this.getView().getModel().setProperty("/properties/scope",t)},sizeBehaviorHandler:function(e){this.getView().getModel().setProperty("/properties/customSizeBehavior",e)},previewHandler:function(e){var t=this.getView();var r=t.getModel();if(e){var i=t.getViewData();var a=u({},i,{properties:{preview:true}});var o=this._getConfiguration(a);var s=u({},o.properties,{customSizeBehavior:r.getProperty("/properties/customSizeBehavior"),configSizeBehavior:r.getProperty("/properties/configSizeBehavior")});r.setProperty("/properties",s);return}r.setProperty("/properties/preview",false)},updateVisualPropertiesHandler:function(e){var t=this.getView().getModel().getProperty("/properties");var r=this.getView().getModel().getProperty("/originalProperties");if(f.isDefined(e.title)){t.title=e.title;r.title=e.title}if(f.isDefined(e.subtitle)){t.subtitle=e.subtitle;r.subtitle=e.subtitle}if(f.isDefined(e.icon)){t.icon=e.icon;r.icon=e.icon}if(f.isDefined(e.targetURL)){t.targetURL=e.targetURL;r.targetURL=e.targetURL}if(f.isDefined(e.info)){t.info=e.info;r.info=e.info}this.getView().getModel().refresh()},stopRequests:function(){if(this.timer){clearTimeout(this.timer);this.timer=null}if(this.oDataRequest){this.oDataRequest.abort()}},onPress:function(e){if(e.getSource().getScope&&e.getSource().getScope()===m.Display){var t=this.getView().getModel().getProperty("/properties/targetURL");var r=this.getView().getModel().getProperty("/properties/title");if(!t){return}c.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:t}});if(t[0]==="#"){hasher.setHash(t)}else{var o=i.last("/core/shell/enableRecentActivity")&&i.last("/core/shell/enableRecentActivityLogging");if(o){var s={title:r,appType:_.URL,url:t,appId:t};h.getRendererInternal("fiori2").logRecentActivity(s)}a.openURL(t,"_blank")}}},initRequestInterval:function(){var e=this.getView().getModel();var t=e.getProperty("/configuration/serviceRefreshInterval");if(!t||t==="0"){t=0;if(this.oDataRequest){this.bShouldNotRefreshDataAfterInit=true}}else if(t<10){var r=e.getProperty("/configuration/serviceUrl");l.warning("Refresh Interval "+t+" seconds for service URL "+r+" is less than 10 seconds, which is not supported. Increased to 10 seconds automatically.",null,D);t=10}this.loadData(t,false)},loadData:function(e,t){if(!t&&this.bShouldNotRefreshDataAfterInit){return}var r=this.getView().getModel();var i=r.getProperty("/properties/preview");var a=r.getProperty("/configuration/serviceUrl");if(i){l.info("Tile in preview mode",D);return}if(!a){l.error("No service URL given!",D);this._setTileIntoErrorState();return}var o=e*1e3-(Date.now()-this.iLastTimeoutStart);if(!t&&!this.timer&&o>0){l.info("Started timeout to call "+a+" again in "+Math.ceil(o/1e3)+" seconds",null,D);this.timer=setTimeout(this.loadData.bind(this,e,false),f.sanitizeTimeoutDelay(o));return}if(!this.oDataRequest||this.oDataRequest.sUrl!==a){if(this.oDataRequest){this.oDataRequest.destroy()}var s=r.getProperty("/properties/contentProviderId");var n={dataSource:r.getProperty("/properties/dataSource")};this.oDataRequest=new p(a,this.successHandlerFn.bind(this),this.errorHandlerFn.bind(this),s,n)}else if(this.oDataRequest){this.oDataRequest.refresh()}if(e>0){l.info("Started timeout to call "+a+" again in "+e+" seconds",null,D);this.iLastTimeoutStart=Date.now();this.timer=setTimeout(this.loadData.bind(this,e,false),f.sanitizeTimeoutDelay(e*1e3))}},successHandlerFn:function(e){this.updatePropertiesHandler(e)},errorHandlerFn:function(e){var t=e&&e.message?e.message:e;var r=this.getView().getModel().getProperty("/configuration/serviceUrl");if(e.statusText==="Abort"||e.aborted===true){l.info("Data request from service "+r+" was aborted",null,D);this.bShouldNotRefreshDataAfterInit=false}else{if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}l.error("Failed to update data via service "+r+": "+t,null,D);this._setTileIntoErrorState()}},_setTileIntoErrorState:function(){var e=t.getResourceBundleModel().getResourceBundle();this.updatePropertiesHandler({number:"???",info:e.getText("dynamic_data.error")})},_normalizeNumber:function(e,t,i,a){var o;if(isNaN(e)){o=e}else{var s=r.getFloatInstance({maxFractionDigits:a});if(!i){var n=Math.abs(e);if(n>=1e9){i="B";e/=1e9}else if(n>=1e6){i="M";e/=1e6}else if(n>=1e3){i="K";e/=1e3}}o=s.format(e)}var l=o;var u=l[t-1];t-=u==="."||u===","?1:0;l=l.substring(0,t);return{displayNumber:l,numberFactor:i}},updatePropertiesHandler:function(e){var t=this.getView().getModel().getProperty("/originalProperties");var a=this.getView().getModel().getProperty("/properties");var o=[{dataField:"title",modelField:"title"},{dataField:"subtitle",modelField:"subtitle"},{dataField:"icon",modelField:"icon"},{dataField:"info",modelField:"info"},{dataField:"infoState",modelField:"infoState"},{dataField:"targetURL",modelField:"targetURL"},{dataField:"stateArrow",modelField:"number_state_arrow"},{dataField:"numberState",modelField:"number_value_state"},{dataField:"numberUnit",modelField:"number_unit"},{dataField:"numberFactor",modelField:"number_factor"}];o.forEach(function(r){var i=e[r.dataField];var o=!i;var s=w[r.modelField];if(o){a[r.modelField]=t[r.modelField]||s}else if(this._isResetValue(i)){a[r.modelField]=s}else{a[r.modelField]=i}}.bind(this));a.number_value=!isNaN(e.number)?e.number:w.number_value;a.number_digits=e.numberDigits>=0?e.numberDigits:4;var s=[];if(e.targetParams){s.push(e.targetParams)}if(e.results){var n;var l;var u=0;e.results.forEach(function(e){l=e.number||0;if(typeof l==="string"){l=parseFloat(l)}u+=l;n=e.targetParams;if(n){s.push(n)}});a.number_value=u}if(s.length>0){var p=a.targetURL.indexOf("?")!==-1?"&":"?";a.targetURL+=p+s.join("&")}if(!isNaN(e.number)){if(typeof e.number==="string"){e.number=e.number.trim()}var f=this._shouldProcessDigits(e.number,e.numberDigits);var d=a.icon?4:5;if(e.number&&e.number.toString().length>=d||f){var c=this._normalizeNumber(e.number,d,e.numberFactor,e.numberDigits);a.number_factor=c.numberFactor;a.number_value=c.displayNumber}else{var h=r.getFloatInstance({maxFractionDigits:d});a.number_value=h.format(e.number)}}a.configSizeBehavior=i.last("/core/home/sizeBehavior");this.getView().getModel().refresh()},_shouldProcessDigits:function(e,t){var r;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){r=e.split(".")[1].length;if(r>t){return true}}return false},_getLeanUrl:function(e){return a.getLeanURL(e)},_formatValueColor:function(e){if(e==="Positive"){return v.Good}if(e==="Negative"){return v.Error}return v[e]||v.Neutral},_getValueColor:function(e){var t=this._formatValueColor(e);if(t===v.Neutral){return v.None}return t},_isResetValue:function(e){if(typeof e!=="string"){return false}return e===R},onExit:function(){if(this.oDataRequest){this.stopRequests();this.oDataRequest.destroy()}this._aDoables.forEach(function(e){e.off()});this._aDoables=[]}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view", ["sap/ui/core/mvc/View","sap/m/GenericTile","sap/m/TileContent","sap/m/NumericContent","sap/m/library"],function(e,t,r,i,o){"use strict";var n=o.ValueColor;return e.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile"},createContent:function(e){this.setHeight("100%");this.setWidth("100%");if(this.getContent().length===1){return this.getContent()[0]}return new t({header:"{/properties/title}",scope:"{/properties/scope}",subheader:"{/properties/subtitle}",sizeBehavior:"{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}",frameType:"{/properties/frameType}",wrappingType:"{/properties/wrappingType}",url:{parts:["/properties/targetURL"],formatter:e.formatters&&e.formatters.leanURL},tileContent:new r({footer:"{/properties/info}",footerColor:{path:"/properties/infoState",formatter:function(e){if(e==="Positive"){e=n.Good}if(e==="Negative"){e=n.Error}if(!n[e]){e=n.Neutral}return e}},unit:"{/properties/number_unit}",content:new i({truncateValueTo:5,scale:"{/properties/number_factor}",value:"{/properties/number_value}",indicator:"{/properties/number_state_arrow}",valueColor:{path:"/properties/number_value_state",formatter:function(e){if(!e||e==="Neutral"||!n[e]){return n.None}return e}},icon:"{/properties/icon}",withMargin:false,width:"100%"})}),additionalTooltip:"{/properties/contentProviderLabel}",press:[e.onPress,e]})}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/tiles/utils", ["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/Locale","sap/ushell/services/ClientSideTargetResolution/PrelaunchOperations","sap/ushell/resources","sap/ui/thirdparty/datajs","sap/ui/core/mvc/View","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/SelectDialog","sap/m/StandardListItem","sap/m/Text","sap/m/TableSelectDialog","sap/m/Column","sap/m/ColumnListItem","sap/ui/core/CustomData","sap/ui/core/Item","sap/ui/core/message/MessageType","sap/m/Label","sap/ui/model/Sorter","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/format/NumberFormat"],function(e,t,a,i,n,r,s,l,o,u,p,c,g,d,_,f,b,y,I,v,m,V,w,h,S,jQuery,x,T){"use strict";var P=o.ValueState;var D=o.mvc.ViewType;var C=u.ButtonType;var R={};R.isInitial=function(e){return e==="App Launcher – Static"||e==="App Launcher – Dynamic"||e==="Target Mapping"};R.getResourceBundleModel=function(){return n.i18nModel};R.getEmptyRowObj=function(e){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!e,defValEnabled:true,editable:e}};R.getEmptyTileActionsRowObj=function(e){var t=R.getResourceBundleModel().getResourceBundle();return{menu_title:"",target_type:t.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:e}};R.getTileNavigationActionsRows=function(e,t){var a=[],i=[];i=this.getTileNavigationActions(e);if(i.length){for(var n=0;n<i.length;n++){a.push(A(i[n],t))}}else{a=[this.getEmptyTileActionsRowObj(t)]}return a};R.getTileNavigationActions=function(e){var t=[],a="";var i=e.bag.getBag("tileNavigationActions");if(i.getPropertyNames().indexOf("tile_navigation_actions")>=0){t=JSON.parse(i.getProperty("tile_navigation_actions"));for(var n=0;n<t.length;n++){if(t[n].text){if(i.getTextNames().indexOf("action_tile_"+(n+1))>=0){a=i.getText("action_tile_"+(n+1))}t[n].text=a}}}return t};var A=function(e,t){var a={},i=R.getResourceBundleModel().getResourceBundle();a.menu_title=e.text;a.icon=e.icon;if(e.targetURL.charAt(0)==="#"){a.target_type=i.getText("configuration.tile_actions.table.target_type.intent");var n=e.targetURL.split("-");a.navigation_target=n[0].substring(1,n[0].length);a.action=n[1];a.isTargetTypeIntent=true}else{a.target_type=i.getText("configuration.tile_actions.table.target_type.url");a.navigation_target=e.targetURL;a.action="";a.isTargetTypeIntent=false}a.editable=t;return a};R.tileActionsRows2TileActionsArray=function(e){var t=[];for(var a=0;a<e.length;a++){if(e[a].menu_title){t.push(E(e[a]))}}return t};var E=function(e){var t={};t.text=e.menu_title;t.icon=e.icon;if(e.action){t.targetURL="#"+e.navigation_target+"-"+e.action}else{t.targetURL=e.navigation_target}return t};R.populateTileNavigationActionsBag=function(e,t){e.setProperty("tile_navigation_actions",JSON.stringify(t));for(var a=0;a<t.length;a++){var i=t[a].text;e.setText("action_tile_"+(a+1),i)}};R.getDefaultFormFactors=function(){return{appDefault:false,manual:{desktop:true,tablet:true,phone:true},defaultParam:true}};R.buildFormFactorsObject=function(e){return{appDefault:e.getProperty("/config/appFormFactor"),manual:{desktop:e.getProperty("/config/desktopChecked"),tablet:e.getProperty("/config/tabletChecked"),phone:e.getProperty("/config/phoneChecked")}}};R.tableHasDuplicateParameterNames=function(e){var t={};for(var a=0;a<e.length;a++){var i=e[a].name;if(i!==""){if(t[i]){return true}t[i]=true}}return false};R.tableHasInvalidSapPrelaunchOperationValue=function(e){for(var t=0;t<e.length;t++){if(e[t].name==="sap-prelaunch-operations"){if(i.parseAndValidateOperations(e[t].defaultValue)===null){return false}break}}return true};R.getMappingSignatureString=function(e,t){var a="";for(var i=0;i<e.length;i++){if(e[i].name){a+=M(e[i])+"&"}}return t?a+"*=*":a.substring(0,a.length-1)};var M=function(e){var t="";if(e.mandatory){if(e.isRegularExpression){t="{"+e.name+"="+encodeURIComponent(e.value)+"}"}else{t=e.name+"="+encodeURIComponent(e.value)}}else{t="["+e.name+"="+encodeURIComponent(e.defaultValue)+"]"}return t};R.getMappingSignatureTableData=function(e,t){var a=[];var i=e.split("&");for(var n=0;n<i.length;n++){var r=i[n];if(r!=="*=*"){a.push(k(i[n],t))}}return a};var k=function(e,t){var a={};if(e.charAt(0)==="["){a.mandatory=false;a.isRegularExpression=false;a.value="";e=e.substring(1,e.length-1);a.name=e.substring(0,e.indexOf("="));a.defaultValue=decodeURIComponent(e.substring(e.indexOf("=")+1))}else{a.mandatory=true;a.defaultValue="";if(e.charAt(0)==="{"){a.isRegularExpression=true;e=e.substring(1,e.length-1)}else{a.isRegularExpression=false}a.name=e.substring(0,e.indexOf("="));a.value=decodeURIComponent(e.substring(e.indexOf("=")+1))}a.editable=t;if(t){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory}else{a.valEnabled=true;a.defValEnabled=true}return a};R.getAllowUnknownParametersValue=function(e){if(e&&e.substring(e.length-3,e.length)==="*=*"){return true}return false};R.getMappingSignature=function(e,t){var a=t?"allowed":"ignored";var i=new RegExp("%%UserDefault[.].+%%");var n=[];var r={parameters:{},additional_parameters:a};e.forEach(function(e){r.parameters[e.name]={required:e.mandatory,rename_to:e.rename_to};if(e.defaultValue){n=i.exec(e.defaultValue);if(n){e.defaultValue=n[0]}r.parameters[e.name].defaultValue={value:e.defaultValue}}if(e.value){n=i.exec(e.value);if(n){e.value=n[0]}r.parameters[e.name].filter={value:e.value};if(e.isRegularExpression){r.parameters[e.name].filter.format="regexp"}}});return r};R.getSignatureTableData=function(e,t){var a=[];var i={};var n={};var r=e.parameters;for(var s in r){n=r[s];i={};i.editable=t;i.name=s;i.mandatory=n.required;if(n.rename_to){i.rename_to=n.rename_to}else{i.rename_to=n.renameTo}if(t){i.valEnabled=i.mandatory;i.defValEnabled=!i.mandatory}else{i.valEnabled=true;i.defValEnabled=true}if(n.filter){i.value=n.filter.value;if(n.filter.format&&n.filter.format==="regexp"){i.isRegularExpression=true}}if(n.defaultValue){i.defaultValue=n.defaultValue.value}a.push(i)}return a};R.getTranslatedTitle=function(e){if(e.bag){var t=e.bag.getBag("tileProperties");if(t.getTextNames().indexOf("display_title_text")>=0){return t.getText("display_title_text")}}if(e.title){return e.title.getTitle()}if(e.preview){return e.preview.getTitle()}return""};R.getTranslatedSubtitle=function(e,t){if(e.bag){var a=e.bag.getBag("tileProperties");if(a.getTextNames().indexOf("display_subtitle_text")>=0){return a.getText("display_subtitle_text")}}if(typeof t.display_subtitle_text==="string"){return t.display_subtitle_text}if(e.preview&&e.preview.getDescription&&e.preview.getDescription()){return e.preview.getDescription()}return""};R.getTranslatedProperty=function(e,t,a){if(e.bag){var i=e.bag.getBag("tileProperties");if(i.getTextNames().indexOf(a)>=0){return i.getText(a)}}return t[a]};R.getActionConfiguration=function(e,t){var a=e.configuration.getParameterValueAsString("tileConfiguration");var i=JSON.parse(a||"{}"),n;if(typeof t==="undefined"){t=e.configurationUi.isEnabled()}if(t){n=R.getResourceBundleModel().getResourceBundle()}i.semantic_object=i.semantic_object||(t?"["+n.getText("configuration.semantic_object")+"]":"");i.semantic_action=i.semantic_action||(t?"["+n.getText("configuration.semantic_action")+"]":"");i.navigation_provider=i.navigation_provider||"";i.navigation_provider_role=i.navigation_provider_role||"";i.navigation_provider_instance=i.navigation_provider_instance||"";i.target_application_id=i.target_application_id||"";i.target_application_alias=i.target_application_alias||"";i.display_info_text=i.display_info_text||"";i.editable=true;if(e.configurationUi&&e.configurationUi.isReadOnly){if(e.configurationUi.isReadOnly()){i.editable=false}}return i};R.getViewConfiguration=function(e){var t=e.getViewData();var a=t.chip;var i=R.getAppLauncherConfig(a,true,true);return i};R.getConfigurationUi=function(e,t){var a,i,n,r,o;var u=e.getViewData();var p=R.getViewConfiguration(e);var c=new l({config:p,tileModel:e.getModel()});return s.create({type:D.XML,viewData:u,viewName:t}).then(function(t){t.setModel(c);a=t.byId("navigation_semantic_objectInput")||t.byId("semantic_objectInput");if(a){a.getModel().setProperty("/enabled",p.navigation_use_semantic_object);a.getModel().setProperty("/value",p.semantic_object||p.navigation_semantic_object)}i=t.byId("navigation_provider_roleInput");if(i){i.getModel().setProperty("/value",p.navigation_provider_role)}n=t.byId("navigation_provider_instanceInput");if(n){n.getModel().setProperty("/value",p.navigation_provider_instance)}r=t.byId("target_application_aliasInput");if(r){r.getModel().setProperty("/value",p.target_application_alias)}o=t.byId("targetTypeInput");if(o){if(!t.getModel().getProperty("/config/transaction")){t.getModel().setProperty("/config/transaction",{})}if(!t.getModel().getProperty("/config/web_dynpro")){t.getModel().setProperty("/config/web_dynpro",{})}if(e.getModel().getProperty("/config/navigation_provider")==="LPD"){R.displayLpdCustApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WCF"){o.setSelectedKey("WCF");R.displayWCFApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="SAPUI5"||e.getModel().getProperty("/config/navigation_provider")===""){o.setSelectedKey("SAPUI5");R.displaySapui5ApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="TR"){R.displayTransactionApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WDA"){R.displayWebDynproApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URL"){R.displayURLApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URLT"){R.displayURLTApplicationTypeFields(t);c.setProperty("/config/editable",false);c.setProperty("/config/manualFormFactor",false)}}return t})};R._updateTilePropertiesTexts=function(e,t){var a=t.getTextNames(),i=e.getModel();a.forEach(function(e){i.setProperty("/data/"+e,t.getText(e));i.setProperty("/config/"+e,t.getText(e))})};R._updateTileConfiguration=function(e,t){var a=e.getModel(),i=JSON.parse(t),n;Object.keys(i).forEach(function(e){n=i[e];a.setProperty("/data/"+e,n);a.setProperty("/config/"+e,n);if(e==="navigation_target_url"){a.setProperty("/nav/"+e,n)}})};R.aData=[];R.aActionData=[];R.aRoleData=[];R.aAliasData=[];R.objectSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r;if(a!==undefined){i=e.getParameter("itemsBinding");n=new p("name",c.Contains,a);r=new p("obj",c.Contains,a);t.push(r);t.push(n);i.filter(new p(t,false))}};R.actionSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n;if(a!==undefined){i=e.getParameter("itemsBinding");n=new p("text",c.Contains,a);t.push(n);i.filter(new p(t,false))}};R.roleSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r;if(a!==undefined){i=e.getParameter("itemsBinding");n=new p("role",c.Contains,a);r=new p("instance",c.Contains,a);t.push(n);t.push(r);i.filter(new p(t,false))}};R.instanceSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r,s,l;i=e.getSource().getCustomData();n=i[0].getValue();if(a!==undefined){r=e.getParameter("itemsBinding");if(a!==""){l=new p("instance",c.Contains,a);t.push(l)}if(n!==""){s=new p("role",c.EQ,n);t.push(s)}if(t.length>0){r.filter(new p(t,true))}}};R.instanceSuggest=function(e,t){var a=e.getView(),i=[],n=t.getParameter("value"),r,s,l,o,u;r=a.byId("navigation_provider_roleInput");s=r.getValue();n=t.getParameter("suggestValue");if(n!==""){u=new p("instance",c.Contains,n);i.push(u)}if(s!==""){o=new p("role",c.EQ,s);i.push(o)}if(i.length>0){l=t.oSource.getBinding("suggestionItems");l.filter(new p(i,true))}};R.aliasSuggest=function(e,t){var a=e.getView(),i=[],n=t.getParameter("value"),r,s,l,o,u;r=a.byId("navigation_provider_instanceInput");s=r.getValue();n=t.getParameter("suggestValue");if(n!==""){u=new p("alias",c.Contains,n);i.push(u)}if(s!==""){o=new p("instance",c.EQ,s);i.push(o)}if(i.length>0){l=t.oSource.getBinding("suggestionItems");l.filter(new p(i,true))}};R.aliasSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r,s,l;i=e.getSource().getCustomData();n=i[0].getValue();if(a!==undefined){r=e.getParameter("itemsBinding");s=new p("instance",c.EQ,n);if(a!==""){l=new p("alias",c.Contains,a);t.push(l)}t.push(s);r.filter(new p(t,true))}};R.objectSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new p("name",c.Contains,t);a.push(n);i.filter(a)}};R.actionSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new p("text",c.Contains,t);a.push(n);i.filter(a)}};R.roleSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new p("role",c.Contains,t);a.push(n);i.filter(a)}};R.instanceSelectUpdateDialog=function(e,t){var a=[],i,n=e.getBinding("items"),r,s,l;i=e.getCustomData();s=i[0].getValue();if(t!==undefined){r=new p("instance",c.Contains,t);a.push(r)}if(s!==""){l=new p("role",c.EQ,s);a.push(l)}if(a.length>0){n.filter(a,true)}};R.aliasSelectUpdateDialog=function(e,t){var a=[],i,n,r=e.getBinding("items"),s,l;i=e.getCustomData();n=i[0].getValue();if(t!==undefined){l=new p("alias",c.Contains,t);a.push(l)}if(n!==""){s=new p("instance",c.EQ,n);a.push(s)}if(a.length>0){r.filter(a,true)}};R.sSelectedColor=(jQuery(".sapMStdTileIconDiv").css("color")||"#007cc0").split(" ").join("");R.sDeselectedColor=(jQuery(".sapMLabel:not(.sapFioriDropZoneText )").css("color")||"#666666").split(" ").join("");R.iconSelect=function(e,t){e.setColor(t?R.sSelectedColor:R.sDeselectedColor);e.setActiveColor(t?R.sDeselectedColor:R.sSelectedColor)};R.onSelectIcon=function(e,t,a,i){var n=e.getView().getModel(),r;if(t){r=n.getProperty("/config/tile_actions_selected_icon")}else{r=n.getProperty("/config/selected_icon")}if(r){R.iconSelect(r,false)}r=i.getSource();R.iconSelect(r,true);n.setProperty("/config/ok.enabled",true);if(t){n.setProperty("/config/tile_actions_selected_icon",r)}else{n.setProperty("/config/selected_icon",r)}e.byId("selectIconDialog").setTitle(r.getSrc())};R.onSelectIconClose=function(e){e.byId("selectIconDialog").close()};R.onSelectIconOk=function(e,t){var a=e.getModel().getProperty("/config/selected_icon");if(!t){e.getModel().setProperty("/config/display_icon_url",a.getSrc());e.byId("iconInput").setValueState(P.None)}else{a=e.getModel().getProperty("/config/tile_actions_selected_icon");if(a){t.setValue(a.getSrc());t.setValueState(P.None)}}R.onSelectIconClose(e)};R.iconSelectOnValueHelpRequest=function(e,a,i){var n=e.getView().getModel();var r=e.getView().byId("icons");var s=g.getIconCollectionNames();var l=e.getView().byId("selectIconDialog");var o=e.getView().byId("ok");var u,p,c,_,f,b,y,I=false;r.destroyContent();if(i){c=t.getElementById(a.getParameter("id"));p=c.getValue()}else{p=n.getProperty("/config/display_icon_url")}o.attachEventOnce("press",function(){R.onSelectIconOk(e.getView(),c)});s.sort();s=s.filter(function(e){if(e==="BusinessSuiteInAppSymbols"){I=true;return false}return true});if(I){s.push("BusinessSuiteInAppSymbols")}for(f=0;f<s.length;f+=1){_=g.getIconNames(s[f]);_.sort();for(b=0;b<_.length;b+=1){y=g.getIconURI(_[b],s[f]);r.addContent(new d({height:"38px",press:R.onSelectIcon.bind(null,e,i,c),size:"2rem",src:y,tooltip:y,width:"38px"}))}}u=r.getContent();n.setProperty("/config/ok.enabled",false);l.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(f=0;f<u.length;f+=1){if(u[f].getSrc()===p){if(i){n.setProperty("/config/tile_actions_selected_icon",u[f])}else{n.setProperty("/config/selected_icon",u[f])}R.iconSelect(u[f],true);n.setProperty("/config/ok.enabled",true);l.setTitle(p)}else{R.iconSelect(u[f],false)}}l.open()};R.objectSelectOnValueHelpRequest=function(e,a,i){var n=e.getView();var r=R.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_object");var s;var o;var u=new l;var p=new _("semantic_object_select_dialog",{title:r,search:R.objectSelectDoSearch,liveChange:R.objectSelectDoSearch}),c=new f({title:"{obj}"});if(i){s=t.getElementById(a.getParameter("id"))}else{s=n.byId("semantic_objectInput")||n.byId("navigation_semantic_objectInput")}o=s.getValue();p.open(o);u.setData(e.aDefaultObjects.concat(R.aData));p.bindAggregation("items","/",c);p.setModel(u);R.objectSelectUpdateDialog(p,o);p.attachCancel(function(e){s.setValue(o);if(!i){s.fireChange()}p.destroy();p=null});p.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){s.setValue(t.getTitle());if(!i){s.fireChange()}}p.destroy();p=null})};R.actionSelectOnValueHelpRequest=function(e,a,i){var n=e.getView();var r=R.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_action");var s;var o;var u=new l;var p=new _("semantic_action_select_dialog",{title:r,search:R.actionSelectDoSearch,liveChange:R.actionSelectDoSearch}),c=new f({title:"{text}"});if(i){s=t.getElementById(a.getParameter("id"))}else{s=n.byId("semantic_actionInput")||n.byId("navigation_semantic_actionInput")}o=s.getValue();p.open(o);u.setData(R.aActionData);p.bindAggregation("items","/items",c);p.setModel(u);R.actionSelectUpdateDialog(p,o);p.attachCancel(function(e){s.setValue(o);if(!i){s.fireChange()}p.destroy();p=null});p.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){s.setValue(t.getTitle());if(!i){s.fireChange();s.fireLiveChange({newValue:t.getTitle()})}}p.destroy();p=null})};R.roleSelectOnValueHelpRequest=function(e){var t=e.getView(),a=R.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role"),i,n,r,s=new l,o=new y("role_select_dialog",{title:a,search:R.roleSelectDoSearch,liveChange:R.roleSelectDoSearch,columns:[new I({header:[new b({text:R.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role")})]}),new I({header:[new b({text:R.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance")})]})]}),u=new v({cells:[new b({text:"{role}"}),new b({text:"{instance}"})]});i=t.byId("navigation_provider_roleInput");n=t.byId("navigation_provider_instanceInput");r=i.getValue();o.open(r);s.setData(e.aDefaultObjects.concat(R.aRoleData));o.bindAggregation("items","/",u);o.setModel(s);R.roleSelectUpdateDialog(o,r);o.attachCancel(function(e){i.setValue(r);i.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){i.setValue(t.getCells()[0].getText());n.setValue(t.getCells()[1].getText());i.fireChange();n.fireChange()}o.destroy();o=null})};R.instanceSelectOnValueHelpRequest=function(e){var t=e.getView();var a;var i=R.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance");var n;var r;var s=new l;var o=new _("instance_select_dialog",{title:i,search:R.instanceSelectDoSearch,liveChange:R.instanceSelectDoSearch}),u=new f({title:"{instance}"});n=t.byId("navigation_provider_instanceInput");r=n.getValue();a=t.byId("navigation_provider_roleInput").getValue();o.addCustomData(new m({key:"role",value:a}));o.open(r);s.setData(e.aDefaultObjects.concat(R.aRoleData));o.bindAggregation("items","/",u);o.setModel(s);R.instanceSelectUpdateDialog(o,r);o.attachCancel(function(e){n.setValue(r);n.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){n.setValue(t.getTitle());n.fireChange()}o.destroy();o=null})};R.applicationAliasSelectOnValueHelpRequest=function(e){var t=e.getView();var a=R.getResourceBundleModel().getResourceBundle().getText("configuration.target_application_alias");var i;var n;var r;var s=new l;var o=new _("alias_select_dialog",{title:a,search:R.aliasSelectDoSearch,liveChange:R.aliasSelectDoSearch}),u=new f({title:"{alias}"});i=t.byId("target_application_aliasInput");n=i.getValue();r=t.byId("navigation_provider_instanceInput").getValue();o.addCustomData(new m({key:"instance",value:r}));o.open(n);s.setData(e.aDefaultObjects.concat(R.aAliasData));o.bindAggregation("items","/",u);o.setModel(s);R.aliasSelectUpdateDialog(o,n);o.attachCancel(function(e){i.setValue(n);i.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){i.setValue(t.getTitle());i.fireChange()}o.destroy();o=null})};R.onTargetTypeChange=function(e){var a=e.getParameter("id");var i=t.getElementById(a).getParent().getCells();var n=e.getSource().getSelectedKey();if(n==="INT"){i[3].setEnabled(true);i[2].setShowValueHelp(true);i[2].setValue("")}else{i[2].setShowValueHelp(false);i[2].setValue("");i[3].setEnabled(false);i[3].setValue("")}};R.addTileActionsRow=function(e){var t=e.getModel();var a=t.getProperty("/config/tile_actions_rows");var i=this.getEmptyTileActionsRowObj();a.push(i);t.setProperty("/config/tile_actions_rows",a)};R.deleteTileActionsRow=function(e){var t=e.getModel();var a=t.getProperty("/config/tile_actions_rows");var i=e.byId("tileActions");var n=i.getSelectedIndices();var r=n.sort(function(e,t){return t-e}).slice();for(var s=0;s<r.length;s++){i.removeSelectionInterval(r[s],r[s]);a.splice(r[s],1)}t.setProperty("/config/tile_actions_rows",a)};R.checkInput=function(e,t){var a=R.getResourceBundleModel().getResourceBundle(),i=e.byId("iconInput"),n=e.byId("useLpdCheckbox"),r=e.byId("navigation_semantic_objectInput")||e.byId("semantic_objectInput"),s=e.byId("navigation_semantic_actionInput")||e.byId("semantic_actionInput"),l=P.None,o=null,u=String(t.getParameter("newValue")||"").trim();switch(t.getSource()){case i:if(u!==""&&u.substring(0,11)!=="sap-icon://"){l=P.Error;o=a.getText("configuration.display_icon_url.warning")}break;case n:if(!n.getSelected()){s.setValueState(P.None);r.setValueState(P.None)}break;case r:if(/[-#&? ]/.test(u)){l=P.Error;o=a.getText("configuration.semantic_object.error_invalid_chars")}else if(u===""){l=P.Error}break;case s:if(/[-#&? ]/.test(u)){l=P.Error;o=a.getText("configuration.semantic_action.error_invalid_chars")}else if(u===""){l=P.Error}break;default:break}if(l){t.getSource().setValueState(l);if(o!==null){t.getSource().setValueStateText(o||"")}}};R.checkInputOnSaveConfig=function(e){var t=e.byId("iconInput");var a=e.byId("navigation_semantic_objectInput");var i=e.byId("navigation_semantic_actionInput");var n=e.byId("useLpdCheckbox");var r=R.getResourceBundleModel().getResourceBundle();var s=false;if(t.getValue()!==""&&!R.isIconURIValid(t.getValue())){t.setValueState(P.Error);t.setValueStateText(r.getText("configuration.display_icon_url.warning"));s=true}if(n.getSelected()&&/[-#&? ]/.test(a.getValue())){a.setValueState(P.Error);a.setValueStateText(r.getText("configuration.semantic_object.error_invalid_chars"));s=true}else if(n.getSelected()&&a.getValue()===""){a.setValueState(P.Error);s=true}if(/[-#&? ]/.test(i.getValue())){i.setValueState(P.Error);i.setValueStateText(r.getText("configuration.semantic_action.error_invalid_chars"));s=true}else if(n.getSelected()&&i.getValue()===""){i.setValueState(P.Error);s=true}return s};R.checkTileActions=function(e){var t=e.getModel().getProperty("/config/tile_actions_rows");var a=R.getResourceBundleModel().getResourceBundle();var i=false;for(var n=0;n<t.length;n++){if(!t[n].menu_title&&(t[n].navigation_target||t.length>1)){t[n].valueState=P.Error;i=true}else{t[n].valueState=P.None}if(t[n].icon){if(!R.isIconURIValid(t[n].icon)){t[n].iconValueState=P.Error;t[n].iconValueStateText=a.getText("configuration.display_icon_url.warning");i=true}}}e.getModel().setProperty("/config/tile_actions_rows",t);return i};R.isIconURIValid=function(e){var t=[];var a="";var i="";var n="";t=/sap-icon:\/\/(.+)\//.exec(e);if(t){a=t[1];t=/\/\/.+\/(.+)/.exec(e);if(t){i=t[1]}else{i=""}n=g.getIconURI(i,a);if(n!==e){return false}}else{t=/sap-icon:\/\/(.+)/.exec(e);if(t){i=t[1];if(!g.getIconInfo(i)){return false}}else{return false}}return true};R.checkTMInput=function(e,t){var a=R.getResourceBundleModel().getResourceBundle(),i=e.byId("semantic_objectInput"),n=e.byId("semantic_actionInput"),r=e.byId("target_application_descriptionInput"),s=e.byId("target_application_urlInput"),l=e.byId("target_application_componentInput"),o=e.byId("navigation_provider_roleInput"),u=e.byId("navigation_provider_instanceInput"),p=e.byId("target_application_aliasInput"),c=e.byId("target_application_idInput"),g=String(t.getParameter("newValue")||"").trim(),d=P.None,_=null;switch(t.getSource()){case i:if(/[-#&? ]/.test(g)){d=P.Error;_=a.getText("configuration.semantic_object.error_invalid_chars")}if(n.getValue()===""){n.setValueState(P.Error)}break;case n:if(/[-#&? ]/.test(g)){d=P.Error;_=a.getText("configuration.semantic_action.error_invalid_chars")}else if(g===""){d=P.Error}break;case r:if(g===""){d=P.Error}break;case s:if(g!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(g)){d=P.Error;_=a.getText("configuration.target_application.url.error_invalid_chars")}break;case l:if(g===""){d=P.Error}else if(g.substring(0,17)==="SAPUI5.Component="){d=P.Error;_=a.getText("configuration.target_application.component.error_invalid_input")}break;case o:if(g===""){d=P.Error}else if(!/^[\w/]+$/.test(g)){d=P.Error;_=a.getText("configuration.target_application.role.error_invalid_chars")}break;case u:if(g===""){d=P.Error}else if(!/^[\w/]+$/.test(g)){d=P.Error;_=a.getText("configuration.target_application.instance.error_invalid_chars")}break;case p:if(g===""&&c.getValue()===""){d=P.Error;_=a.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&c.getValue()!==""){d=P.Error;_=a.getText("configuration.target_application.alias_id.warning");c.setValueState(d);c.setValueStateText(_)}else{c.setValueState(P.None)}break;case c:if(g===""&&p.getValue()===""){d=P.Error;_=a.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&p.getValue()!==""){d=P.Error;_=a.getText("configuration.target_application.alias_id.warning");p.setValueState(d);p.setValueStateText(_)}else if(g!==""&&!/^[A-Fa-f0-9]+$/.test(g)){d=P.Error;_=a.getText("configuration.target_application.alias_id.error_invalid_chars")}else{p.setValueState(P.None)}break;default:break}if(d){t.getSource().setValueState(d);if(_!==null){t.getSource().setValueStateText(_||"")}}};R.checkTMInputOnSaveConfig=function(e){var t=R.getResourceBundleModel().getResourceBundle();var a=e.byId("semantic_objectInput");var i=e.byId("semantic_actionInput");var n=e.byId("target_application_descriptionInput");var r=e.byId("target_application_urlInput");var s=e.byId("target_application_componentInput");var l=e.byId("navigation_provider_roleInput");var o=e.byId("navigation_provider_instanceInput");var u=e.byId("target_application_aliasInput");var p=e.byId("target_application_idInput");var c=e.byId("targetTypeInput");var g=e.byId("target_transactionInput");var d=e.byId("target_web_dynpro_applicationInput");var _=e.byId("target_wcf_application_idInput");var f=e.byId("desktopCB");var b=e.byId("tabletCB");var y=e.byId("phoneCB");var I=false;a.setValue(a.getValue().trim());if(/[-#&? ]/.test(a.getValue())){a.setValueState(P.Error);a.setValueStateText(t.getText("configuration.semantic_object.error_invalid_chars"));I=true}i.setValue(i.getValue().trim());if(/[-#&? ]/.test(i.getValue())){i.setValueState(P.Error);i.setValueStateText(t.getText("configuration.semantic_action.error_invalid_chars"));I=true}else if(i.getValue()===""){i.setValueState(P.Error);I=true}var v=e.getModel().getProperty("/config/navigation_provider"),m;if(v==="SAPUI5"){if(n.getValue()===""){n.setValueState(P.Error);I=true}if(r.getValue()!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(r.getValue())){r.setValueState(P.Error);r.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}if(s.getValue()===""){s.setValueState(P.Error);I=true}else if(s.getValue().substring(0,17)==="SAPUI5.Component="){s.setValueState(P.Error);s.setValueStateText(t.getText("configuration.target_application.component.error_invalid_input"));I=true}}else if(v==="LPD"){if(l.getValue()===""){l.setValueState(P.Error);I=true}if(!/^[\w]+$/.test(l.getValue())){l.setValueState(P.Error);m=t.getText("configuration.target_application.role.error_invalid_chars");l.setValueStateText(m);I=true}if(o.getValue()===""){o.setValueState(P.Error);I=true}if(!/^[\w]+$/.test(o.getValue())){o.setValueState(P.Error);m=t.getText("configuration.target_application.instance.error_invalid_chars");o.setValueStateText(m);I=true}if(u.getValue()===""&&p.getValue()===""){m=t.getText("configuration.target_application.alias_id.warning");u.setValueState(P.Error);u.setValueStateText(m);p.setValueState(P.Error);p.setValueStateText(m);I=true}if(u.getValue()!==""&&p.getValue()!==""){m=t.getText("configuration.target_application.alias_id.warning");u.setValueState(P.Error);u.setValueStateText(m);p.setValueState(P.Error);p.setValueStateText(m);I=true}if(p.getValue()!==""&&!/^[A-Fa-f0-9]+$/.test(p.getValue())){p.setValueState(P.Error);p.setValueStateText(t.getText("configuration.target_application.alias_id.error_invalid_chars"));I=true}}else if(v==="TR"){if(g.getValue()===""){g.setValueState(P.Error);I=true}}else if(v==="WDA"){if(d.getValue()===""){d.setValueState(P.Error);I=true}}else if(v==="WCF"){if(_.getValue()===""){_.setValueState(P.Error);I=true}}else if(v==="URL"){if(r.getValue()===""){r.setValueState(P.Error);I=true}else if(!/^[-~+,;:?%&#=/.\w]+$/.test(r.getValue())){r.setValueState(P.Error);r.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}}else{c.setValueState(P.Error);c.setValueStateText(t.getText("configuration.navigation_provider.error_invalid_provider"));I=true}if(!f.getSelected()&&!b.getSelected()&&!y.getSelected()){m=t.getText("configuration.form_factor.warning");f.setValueState(P.Error);f.setValueStateText(m);b.setValueState(P.Error);b.setValueStateText(m);y.setValueState(P.Error);y.setValueStateText(m);I=true}return I};R.updateTooltipForDisabledProperties=function(e){var t=e.getModel();var a=t.getProperty("/config/isLocaleSuitable");if(!a){var i=R.getResourceBundleModel().getResourceBundle();var n=i.getText("edit_configuration.original_locale_not_fit_tooltip",[t.getProperty("/config/userLocale"),t.getProperty("/config/orgLocale")]);e.byId("titleInput").setTooltip(n);e.byId("subtitleInput").setTooltip(n);e.byId("keywordsInput").setTooltip(n);e.byId("infoInput").setTooltip(n)}};R.updateMessageStripForOriginalLanguage=function(e){var t=e.getModel();if(t.getProperty("/config/isLocaleSuitable")===false){var a=R.getResourceBundleModel().getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[t.getProperty("/config/orgLocale").toUpperCase(),t.getProperty("/config/userLocale").toUpperCase()]);var i=e.byId("messageStrip");i.setVisible(true);i.setText(a);i.setType(w.Warning)}};R.createSemanticObjectModel=function(e,t,a){var i=e.getView(),n="/sap/opu/odata/UI2/INTEROP/SemanticObjects",s=[{obj:"",name:""},{obj:"*",name:"*"}],o=(a||s).slice(0),u=new l;u.setSizeLimit(999999);u.setProperty("/value","");u.setProperty("/enabled",true);t.bindAggregation("suggestionItems","suggest>/items",new V({text:"{suggest>obj}"}));t.setModel(u,"suggest");if(R.aData.length>0){setTimeout(function(){u.setData({items:o.concat(R.aData)},true)},0);return}r.read({requestUri:n,headers:{Accept:"application/json"}},function(e){var t,a,i;for(i=0;i<e.results.length;i=i+1){t=e.results[i].id;a=e.results[i].text;R.aData.push({obj:t,name:a||t})}u.setData({items:o.concat(R.aData)},true)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}x.error("Could not fetch data: "+n+": "+t,null,i.getViewName()||"sap.ushell.components.tiles.utils")})};R.createRoleModel=function(e,t,a){var i=e.getView(),n="/sap/opu/odata/UI2/INTEROP/GetLPDInstances",s=new l,o=new l;s.setSizeLimit(999999);o.setSizeLimit(999999);s.setProperty("/value","");s.setProperty("/enabled",true);o.setProperty("/value","");o.setProperty("/enabled",true);var u=new v({cells:[new h({text:"{role}"}),new h({text:"{instance}"})]});t.bindAggregation("suggestionRows","/items",u);a.bindAggregation("suggestionItems","/items",new V({text:"{instance}"}));a.setModel(o);t.setModel(s);t.attachSuggestionItemSelected(function(e){a.setValue(e.getParameter("selectedRow").getCells()[1].getText());a.fireChange()});if(R.aRoleData.length>0){s.setData({items:R.aRoleData},false);o.setData({items:R.aRoleData},false);return}r.read({requestUri:n,headers:{Accept:"application/json"}},function(e){var t,a,i;for(i=0;i<e.results.length;i=i+1){t=e.results[i].lpdRole;a=e.results[i].instance;R.aRoleData.push({role:t,instance:a})}s.setData({items:R.aRoleData},true);o.setData({items:R.aRoleData},true)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}x.error("Could not fetch data: "+n+": "+t,null,i.getViewName()||"sap.ushell.components.tiles.utils")})};R.createAliasModel=function(e,t){var a=e.getView(),i,n="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias",s=new l;s.setSizeLimit(999999);s.setProperty("/value","");s.setProperty("/enabled",true);t.bindAggregation("suggestionItems","/items",new V({text:"{alias}"}));t.setModel(s);i=R.getAppLauncherConfig(a.oViewData.chip,true,true);if(i&&i.navigation_provider_role&&i.navigation_provider_instance){if(i.navigation_provider_role!==""&&i.navigation_provider_instance!==""){n=n+"?role='"+i.navigation_provider_role+"'&instance='"+i.navigation_provider_instance+"'"}}r.read({requestUri:n,headers:{Accept:"application/json"}},function(e){var t,a,i,n,r;R.aAliasData=[];for(n=0;n<e.results.length;n=n+1){t=e.results[n].lpdApplicationAlias;a=e.results[n].lpdRole;i=e.results[n].lpdInstance;R.aAliasData.push({role:a,instance:i,alias:t})}r=s.getData();if(r){r.items=R.aAliasData}else{r={items:R.aAliasData}}s.setData(r,false)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}x.error("Could not fetch data: "+n+": "+t,null,a.getViewName()||"sap.ushell.components.tiles.utils")})};R.updateAliasModel=function(e,t){var a,i,n,s=t.getModel();i=e.byId("navigation_provider_instanceInput").getValue();n=e.byId("navigation_provider_roleInput").getValue();a="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='"+n+"'&instance='"+i+"'";r.read({requestUri:a,headers:{Accept:"application/json"}},function(e){var t,a,i,n,r;R.aAliasData=[];for(n=0;n<e.results.length;n=n+1){t=e.results[n].lpdApplicationAlias;a=e.results[n].lpdRole;i=e.results[n].lpdInstance;R.aAliasData.push({role:a,instance:i,alias:t})}r=s.getData();if(r){r.items=R.aAliasData}else{r={items:R.aAliasData}}s.setData(r,false)},function(t){var i=t&&t.message?t.message:t;if(t.response){i+=" - "+t.response.statusCode+" "+t.response.statusText}x.error("Could not fetch data: "+a+": "+i,null,e.getViewName()||"sap.ushell.components.tiles.utils")})};R.createActionModel=function(e,t){var a=new l;var i=e.getView(),n,r;a.setData({items:[{text:"display"},{text:"approve"},{text:"displayFactSheet"},{text:"manage"},{text:"create"},{text:"monitor"},{text:"track"},{text:"change"},{text:"register"},{text:"release"},{text:"analyzeKPIDetails"},{text:"lookup"},{text:"manageLineItems"}]});R.aActionData=a.getData();n=R.getAppLauncherConfig(i.oViewData.chip,true,true);r=n.navigation_semantic_action||n.semantic_action;if(r){if(!a.getData().items.some(function(e){return e.text===r})){a.getData().items.push({text:r})}}t.bindAggregation("suggestionItems","items>/items",new V({text:"{items>text}"}));t.setModel(a,"items");t.getBinding("suggestionItems").sort(new S("text",false))};R.createNavigationProviderModel=function(e,t){var a=new l;var i=R.getResourceBundleModel().getResourceBundle();var n=[{key:"SAPUI5",text:i.getText("configuration.target_application.sapui5")},{key:"LPD",text:i.getText("configuration.target_application.lpd_cust")},{key:"TR",text:i.getText("configuration.target_application.transaction")},{key:"WDA",text:i.getText("configuration.target_application.web_dynpro")},{key:"URL",text:i.getText("configuration.target_application.url")}];var r=R.getViewConfiguration(e.getView()).navigation_provider;if(r==="WCF"){n.push({key:"WCF",text:i.getText("configuration.target_application.wcf")})}else if(r==="URLT"){n.push({key:"URLT",text:i.getText("configuration.target_application.urlt")})}a.setData({items:n});t.bindItems("items>/items",new V({key:"{items>key}",text:"{items>text}"}));t.setModel(a,"items");t.getBinding("items").sort(new S("text",false))};R.displayApplicationTypeFields=function(e,t){switch(e){case"LPD":R.displayLpdCustApplicationTypeFields(t);break;case"SAPUI5":R.displaySapui5ApplicationTypeFields(t);break;case"TR":R.displayTransactionApplicationTypeFields(t);break;case"WDA":R.displayWebDynproApplicationTypeFields(t);break;case"URL":R.displayURLApplicationTypeFields(t);break;case"WCF":R.displayWCFApplicationTypeFields(t);break;case"URLT":R.displayURLTApplicationTypeFields(t);break}};R.displayWCFApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(true);e.byId("target_wcf_application_idInput").setVisible(true);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displaySapui5ApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(true);e.byId("target_application_componentInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displayLpdCustApplicationTypeFields=function(e){e.byId("application_description").setVisible(false);e.byId("target_application_descriptionInput").setVisible(false);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(true);e.byId("navigation_provider_roleInput").setVisible(true);e.byId("navigation_provider_instance").setVisible(true);e.byId("navigation_provider_instanceInput").setVisible(true);e.byId("target_application_alias").setVisible(true);e.byId("target_application_aliasInput").setVisible(true);e.byId("target_application_id").setVisible(true);e.byId("target_application_idInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(true)};R.displayTransactionApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(true);e.byId("target_transactionInput").setVisible(true);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displayWebDynproApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(true);e.byId("target_web_dynpro_applicationInput").setVisible(true);e.byId("target_web_dynpro_configuration").setVisible(true);e.byId("target_web_dynpro_configurationInput").setVisible(true);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displayURLApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displayURLTApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(true);e.byId("urlt_application_componentInput").setVisible(true);e.byId("target_urlt_system_alias").setVisible(true);e.byId("target_urlt_system_aliasInput").setVisible(true);e.byId("application_type_deprecated").setVisible(false)};R.getAppLauncherConfig=function(t,i,n){var r;var s=t.configuration.getParameterValueAsString("tileConfiguration");var l;try{l=JSON.parse(s||"{}")}catch(e){x.error("Error while trying to parse tile configuration",e,"sap.ushell.components.tiles.utils");return{}}l.editable=true;if(t.configurationUi&&t.configurationUi.isReadOnly){if(t.configurationUi.isReadOnly()){l.editable=false}}var o=R.getTranslatedTitle(t);var u=R.getTranslatedSubtitle(t,l);var p=R.getTranslatedProperty(t,l,"display_info_text");var c=R.getTranslatedProperty(t,l,"display_search_keywords");if(i){r=R.getResourceBundleModel().getResourceBundle();if(n&&t.bag){var g=t.bag.getOriginalLanguage();var d=new a(e.getLanguageTag()).getSAPLogonLanguage();var _=e.getLanguage();l.isLocaleSuitable=g===""||g.toLowerCase()===d.toLowerCase()||g.toLowerCase()===_.toLowerCase();l.orgLocale=g;l.userLocale=d}}l.display_icon_url=l.display_icon_url||"";if(p!==undefined){l.display_info_text=p}else if(l.display_info_text===undefined){if(i&&!n){l.display_info_text="["+r.getText("configuration.display_info_text")+"]"}else{l.display_info_text=""}}l.navigation_semantic_object=l.navigation_semantic_object||"";l.navigation_semantic_action=l.navigation_semantic_action||"";l.navigation_semantic_parameters=l.navigation_semantic_parameters||"";l.display_number_unit=l.display_number_unit||"";l.display_number_factor=l.display_number_factor||"";l.service_refresh_interval=l.service_refresh_interval?parseInt(l.service_refresh_interval,10):0;l.service_url=l.service_url||"";l.navigation_target_url=l.navigation_target_url||"";if(i&&R.isInitial(o)){l.display_title_text=n?"":"["+r.getText("configuration.display_title_text")+"]";l.display_subtitle_text=n?"":"["+r.getText("configuration.display_subtitle_text")+"]"}else{l.display_title_text=o||l.display_title_text||"";if(u!==undefined){l.display_subtitle_text=u}else if(l.display_subtitle_text===undefined){l.display_subtitle_text=""}}l.navigation_use_semantic_object=l.navigation_use_semantic_object!==false;l.display_search_keywords=c||l.display_search_keywords||"";if(i){l.display_number_value=l.display_number_value||1234}l.form_factors=l.form_factors?l.form_factors:R.getDefaultFormFactors();l.desktopChecked=l.form_factors.manual.desktop;l.tabletChecked=l.form_factors.manual.tablet;l.phoneChecked=l.form_factors.manual.phone;l.manualFormFactor=!l.form_factors.appDefault&&l.editable;l.appFormFactor=l.form_factors.appDefault;l.formFactorConfigDefault=!!l.form_factors.defaultParam;if(l.signature){l.rows=R.getSignatureTableData(l.signature,n&&l.editable)}else{l.rows=l.mapping_signature&&l.mapping_signature!=="*=*"?R.getMappingSignatureTableData(l.mapping_signature,n&&l.editable):[R.getEmptyRowObj(l.editable)]}if(l.signature){l.isUnknownAllowed=l.signature.additional_parameters==="allowed"||l.signature.additionalParameters==="allowed"}else{l.isUnknownAllowed=l.mapping_signature!==undefined?R.getAllowUnknownParametersValue(l.mapping_signature):true}if(i){l.tile_actions_rows=R.getTileNavigationActionsRows(t,l.editable)}else if(!l.actions){l.actions=R.getTileNavigationActions(t)}if(i){var f=t.bag.getBag("deprecationProperties"),b=f.getProperty("deprecation"),y=null;if(b){y=r.getText(b==="D"?"configuration.app_deprecated":"configuration.app_archived",[f.getProperty("successor")])}l.deprecation_text=y}return l};R.getDataToDisplay=function(e,t){var a=0,i,n,r,s,l={display_icon_url:t.icon||e.display_icon_url||"",display_title_text:t.title||e.display_title_text||"",display_number_value:!isNaN(t.number)?t.number:"...",display_number_unit:t.numberUnit||e.display_number_unit||"",display_info_text:t.info||e.display_info_text||"",display_info_state:t.infoState||"Neutral",display_subtitle_text:t.subtitle||e.display_subtitle_text||"",display_state_arrow:t.stateArrow||"None",display_number_state:t.numberState||"None",display_number_digits:t.numberDigits>=0?t.numberDigits:4,display_number_factor:t.numberFactor||"",display_search_keyword:t.keywords||e.display_search_keyword||"",targetParams:[]};if(t.infoStatus){l.display_info_state=t.infoStatus}if(t.targetParams){l.targetParams.push(t.targetParams)}if(t.results){for(i=0,n=t.results.length;i<n;i=i+1){r=t.results[i].number||0;if(typeof r==="string"){r=parseFloat(r)}a=a+r;s=t.results[i].targetParams;if(s){l.targetParams.push(s)}}l.display_number_value=a}if(!isNaN(t.number)){if(typeof t.number==="string"){t.number=t.number.trim()}if(t.number===""){l.display_number_value="..."}else{var o=this._shouldProcessDigits(t.number,t.numberDigits),u=l.display_icon_url?4:5;if(t.number&&t.number.toString().length>=u||o){var p=this._normalizeNumber(t.number,u,t.numberFactor,t.numberDigits);l.display_number_factor=p.numberFactor;l.display_number_value=p.displayNumber}else{var c=T.getFloatInstance({maxFractionDigits:u});l.display_number_value=c.format(t.number)}}}if(l&&l.display_number_state){switch(l.display_number_state){case"Positive":l.display_number_state="Good";break;case"Negative":l.display_number_state="Error";break}}return l};R._normalizeNumber=function(e,t,a,i){var n;if(isNaN(e)){n=e}else{var r=T.getFloatInstance({maxFractionDigits:i});if(!a){var s=Math.abs(e);if(s>=1e9){a="B";e/=1e9}else if(s>=1e6){a="M";e/=1e6}else if(s>=1e3){a="K";e/=1e3}}n=r.format(e)}var l=n;var o=l[t-1];t-=o==="."||o===","?1:0;l=l.substring(0,t);return{displayNumber:l,numberFactor:a}};R._shouldProcessDigits=function(e,t){var a;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){a=e.split(".")[1].length;if(a>t){return true}}return false};R.getTileSettingsAction=function(e,t,a){var i=R.getResourceBundleModel().getResourceBundle();var n=!a||a==="tile"?"tileSettingsBtn":"linkSettingsBtn";return{id:n,text:i.getText(n),press:function(){return new Promise(function(n){sap.ui.require(["sap/m/Button","sap/m/Dialog","sap/ui/core/mvc/View","sap/ui/layout/form/SimpleForm","sap/ui/layout/library"],function(r,s,o,u,p){var c=p.form.SimpleFormLayout;var g={showGroupSelection:false,title:e.getProperty("/config/display_title_text"),subtitle:e.getProperty("/config/display_subtitle_text")};if(!a||a==="tile"){g.info=e.getProperty("/config/display_info_text");g.icon=e.getProperty("/config/display_icon_url");g.keywords=e.getProperty("/config/display_search_keywords")}else if(a==="link"){g.showInfo=false;g.showIcon=false;g.showPreview=false}o.create({viewName:"module:sap/ushell/ui/footerbar/SaveAsTile.view"}).then(function(e){var o=new l(g);e.setModel(o);var p=new u({id:"tileSettings",layout:c.GridLayout,content:[e]}).addStyleClass("sapUshellAddBookmarkForm");var d=new r("bookmarkOkBtn",{text:i.getText("okBtn"),type:C.Emphasized,press:function(){t(e);b.close()},enabled:true});var _=new r("bookmarkCancelBtn",{text:i.getText("cancelBtn"),press:function(){b.close()}});var f=function(e){d.setEnabled(!!e.trim())};e.getTitleInput().attachLiveChange(function(){f(this.getValue())});var b=new s({id:"settingsDialog",title:!a||a==="tile"?i.getText("tileSettingsDialogTitle"):i.getText("linkSettingsDialogTitle"),contentWidth:"400px",content:p,beginButton:d,endButton:_,horizontalScrolling:false,afterClose:function(){b.destroy()}}).addStyleClass("sapContrastPlus");b.open();n(b)})})})}}};R.getSemanticNavigationUrl=function(e){var t="#"+String(e.navigation_semantic_object||"").trim();t+="-"+String(e.navigation_semantic_action||"").trim();if(e.navigation_semantic_parameters&&String(e.navigation_semantic_parameters||"").trim().length>0){t+="?"+String(e.navigation_semantic_parameters||"").trim()}return t};R.addParamsToUrl=function(e,t){var a="",i=e.indexOf("?")!==-1,n=t.targetParams,r;if(n&&n.length>0){for(r=0;r<n.length;r=r+1){a+=n[r];if(r<n.length-1){a+="&"}}}if(a.length>0){if(!i){e+="?"}else{e+="&"}e+=a}return e};return R},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/iconfonts", ["sap/ui/core/IconPool"],F=>{"use strict";const E={};E.registerFiori2IconFont=function(){F.registerFont({fontFamily:"SAP-icons-TNT",collectionName:"SAP-icons-TNT",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts/"),lazy:true});F.registerFont({fontFamily:"SAP-icons-TNT",collectionName:"TNTIcons",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts/"),lazy:true});F.registerFont({fontFamily:"BusinessSuiteInAppSymbols",collectionName:"BusinessSuiteInAppSymbols",fontURI:sap.ui.require.toUrl("sap/ushell/themes/base/fonts/"),lazy:true});const E={fontFamily:"SAP-icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0020","e0c3"],["F0021","e10d"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]};const e={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0018","E200"],["F0019","E201"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0366","E22F"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E214"],["F0429","E2A6"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10n","E2B5"],["FK10n","E2B6"],["FS10n","E2B7"],["FBL5n","E2B8"],["FBL1n","E2B9"],["FFS01","E2BA"],["FBL3n","E2BB"],["FCOA1","E2BC"]]};const o={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]};const i={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2EA"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],// License Blocked Documents
["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"]]};const n={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F2001","E31E"],["F0839","E320"],["F0263","E321"],["F0266","E322"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E384"],["F0718","E383"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]};const t={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0670-1","E393"],["F0670-2","E394"],["F0670-3","E395"],["F0670-4","E396"],["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"],["F0767","E3AD"],["F0849","E3AE"]]};const s={fontFamily:"Fiori2",collectionName:"Fiori7",icons:[["F1079","E3B0"],["F0738","E3B1"],["F1301","E3B2"],["F1302","E3B3"],["F1303","E3B4"],["F1338","E3B5"],["F1263","E3B6"],["F1373","E3B7"],["F0863","E3B8"],["F0955","E3B9"],["F1068","E3BA"],["F1242","E3BB"],["F1405","E3BC"],["F1406","E3BD"],["F1407","E3BE"],["F1408","E3BF"],["F1409","E3C0"],["F1410","E3C1"],["F1411","E3C2"],["F1412","E3C3"],["F1413","E3C4"],["F1414","E3C5"],["F1415","E3C6"],["F1476","E3C7"],["F0797","E3C8"],["F0798","E3C9"],["F0800","E3CA"],["F0801","E3CB"],["F0804","E3CC"],["F0850","E3CD"],["F0890","E3CE"],["F1075","E3CF"],["F1394","E3D0"],["F1061","E3D1"],["F1062","E3D2"],["F1255","E3D3"],["F1077","E3D4"],["F0843","E3D5"],["F1076","E3D6"],["F0859","E3D7"],["F1060","E3D8"],["F1053","E3D9"],["F0900","E3DA"],["F0840","E3DB"],["F0842-1","E3A6"],["F0842-2","E22C"]]};const a={fontFamily:"Fiori2",collectionName:"Fiori8",icons:[["F1317","E3DC"],["F1318","E3DD"],["F1319","E3DE"],["F1369","E3DF"],["F1475","E3E0"],["F1345","E3E1"],["F1248","E3E2"],["F1067","E3E3"],["F1332","E3E4"],["F1333","E3E5"],["F1334","E3E6"],["F1335","E3E7"],["F1520","E3E8"],["F1457","E3E9"],["F1504","E3EA"],["F1505","E3EB"]]};const r={fontFamily:"Fiori2",collectionName:"Fiori9",icons:[["F1094","E3EC"],["F1096","E3ED"],["F1353","E3EE"],["F1354","E3EF"],["F1428","E3F0"],["F1492","E3F1"],["F1515","E3F2"],["F1516","E3F3"],["F0997","E400"],["F1512","E401"],["F1562","E402"],["F1564","E403"],["F1599","E404"],["F1596","E405"],["F1254","E406"],["F1618","E407"],["F1561","E408"],["learning-compass","E409"],["partner-enablement","E40A"]]};const c={fontFamily:"Fiori2",collectionName:"S4Hana",icons:[["S0001","E3F4"],["S0002","E3F5"],["S0003","E3F6"],["S0004","E3F7"],["S0005","E3F8"],["S0006","E3F9"],["S0007","E3FA"],["S0008","E3FB"],["S0009","E3FC"],["S0010","E3FD"],["S0011","E3FE"],["S0012","E3FF"]]};const l={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","e700"],["Open","e701"],["Blocked","e702"],["Partially Blocked","e703"],["Open1","e704"],["Partially Adopted","e705"],["Due","e706"],["Overdue","e707"],["Sort","e708"],["Missing Parts","e709"],["Fire","e70a"],["Dangerous Chemicals","e70b"],["Share","e70c"],["Entertainment","e70d"],["Gift","e70e"],["QR Code","e70f"],["Wifi-Online","e710"],["Wifi-Offline","e711"],["Sunrise","e712"],["Sunset","e713"],["Afternoon","e714"],["Night","e715"],["Loading Date","e715"],["Cloudy","e717"],["Rain","e718"],["Storm","e719"],["Partly Sunny","e71a"],["Heavy Rain","e71b"],["Foggy","e71c"],["Snow","e71d"],["Risk Assessment","e71e"],["Database","e71f"],["Marine","e720"],["Blister","e721"],["Pills","e722"],["Main-Sequence","e723"],["Parallel Sequence","e724"],["Alternative Sequence","e725"],["3D","e726"],["Presentation","e727"],["Mute","e728"],["Windy","e729"],["Oil Tank","e72a"],["Location Assets","e72b"],["Transport Systems","e72c"],["Field","e72d"],["Field Group","e72e"],["Record","e730"],["Record Group","e731"]]};const A={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(e,E,o,i,n,t,s,a,r,l,A,c)};E.registerFonts=function(...E){E.forEach(E=>{E.icons.forEach(e=>{F.addIcon(e[0],E.collectionName,{fontFamily:E.fontFamily,content:e[1],overWrite:false,suppressMirroring:true})})})};return E},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/library", ["sap/ui/core/Lib","sap/ui/core/library","sap/m/library"],function(e,l,a){"use strict";const t=e.init({name:"sap.ushell",version:"1.136.1",dependencies:["sap.ui.core","sap.m"],types:["sap.ushell.AllMyAppsState","sap.ushell.AllMyAppsProviderType","sap.ushell.AppTitleState","sap.ushell.ContentNodeType","sap.ushell.appIntegration.contracts.StatefulType","sap.ushell.components.container.ApplicationType","sap.ushell.DisplayFormat","sap.ushell.NavigationState","sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow","sap.ushell.VisualizationLoadState","sap.ushell.AppType","sap.ushell.FloatingNumberType"],interfaces:["sap.ushell.renderer.INavContainerPage"],controls:["sap.ushell.appIntegration.ApplicationContainer","sap.ushell.appIntegration.IframeApplicationContainer","sap.ushell.appIntegration.UI5ApplicationContainer","sap.ushell.components.container.ApplicationContainer","sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.components.shell.Settings.userDefaults.UserDefaultsForm","sap.ushell.components.tiles.sbtilecontent","sap.ushell.components.workPageBuilder.controls.WorkPage","sap.ushell.components.workPageBuilder.controls.WorkPageButton","sap.ushell.components.workPageBuilder.controls.WorkPageCell","sap.ushell.components.workPageBuilder.controls.WorkPageColumn","sap.ushell.components.workPageBuilder.controls.WorkPageColumnResizer","sap.ushell.components.workPageBuilder.controls.WorkPageRow","sap.ushell.renderer.NavContainer","sap.ushell.ui.launchpad.VizInstance","sap.ushell.ui.launchpad.VizInstanceBase","sap.ushell.ui.launchpad.VizInstanceAbap","sap.ushell.ui.launchpad.VizInstanceCdm","sap.ushell.ui.launchpad.VizInstanceLaunchPage","sap.ushell.ui.launchpad.VizInstanceLink","sap.ushell.ui.AppContainer","sap.ushell.ui.ContentNodeSelector","sap.ushell.ui.ContentNodeTreeItem","sap.ushell.ui.CustomGroupHeaderListItem","sap.ushell.ui.ShellHeader","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.appfinder.AppBoxInternal","sap.ushell.ui.appfinder.PinButton","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SendAsEmailButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.CatalogEntryContainer","sap.ushell.ui.launchpad.CatalogsContainer","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Page","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Section","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.launchpad.TileStateInternal","sap.ushell.ui.launchpad.section.CompactArea","sap.ushell.ui.shell.FloatingContainer","sap.ushell.ui.shell.NavigationMiniTile","sap.ushell.ui.shell.OverflowListItem","sap.ushell.ui.shell.RightFloatingContainer","sap.ushell.ui.shell.ShellAppTitle","sap.ushell.ui.shell.ShellFloatingAction","sap.ushell.ui.shell.ShellFloatingActions","sap.ushell.ui.shell.ShellHeadItem","sap.ushell.ui.shell.ShellNavigationMenu","sap.ushell.ui.shell.SidePane","sap.ushell.ui.shell.SubHeader","sap.ushell.ui.shell.SysInfoBar","sap.ushell.ui.shell.ToolArea","sap.ushell.ui.shell.ToolAreaItem","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:["sap.ushell.ui.launchpad.AccessibilityCustomData"],extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin"]}}});t.AllMyAppsState={FirstLevel:"FirstLevel",SecondLevel:"SecondLevel",Details:"Details",FirstLevelSpread:"FirstLevelSpread"};t.AllMyAppsProviderType={HOME:0,EXTERNAL:1,CATALOG:2};t.AppTitleState={ShellNavMenuOnly:"ShellNavMenuOnly",AllMyAppsOnly:"AllMyAppsOnly",ShellNavMenu:"ShellNavMenu",AllMyApps:"AllMyApps"};t.ContentNodeType={HomepageGroup:"HomepageGroup",Space:"Space",Page:"Page",Visualization:"Visualization"};t.appIntegration=t.appIntegration||{};t.appIntegration.contracts=t.appIntegration.contracts||{};t.appIntegration.contracts.StatefulType={NotSupported:"NotSupported",ContractV1:"ContractV1",ContractV2:"ContractV2"};t.components=t.components||{};t.components.container=t.components.container||{};t.components.container.ApplicationType={NWBC:"NWBC",SAPUI5:"SAPUI5",TR:"TR",URL:"URL",WCF:"WCF",WDA:"WDA"};t.DisplayFormat={Standard:"standard",Compact:"compact",Flat:"flat",FlatWide:"flatWide",StandardWide:"standardWide"};t.NavigationState={InProgress:"InProgress",Finished:"Finished"};t.ui=t.ui||{};t.ui.launchpad=t.ui.launchpad||{};t.ui.launchpad.ViewPortState={Left:"Left",Center:"Center",Right:"Right",LeftCenter:"LeftCenter",CenterLeft:"CenterLeft",RightCenter:"RightCenter",CenterRight:"CenterRight"};t.ui.tile=t.ui.tile||{};t.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};t.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"};t.VisualizationLoadState={Loading:"Loading",Loaded:"Loaded",InsufficientRoles:"InsufficientRoles",OutOfRoleContext:"OutOfRoleContext",NoNavTarget:"NoNavTarget",Failed:"Failed",Disabled:"Disabled"};t.AppType={OVP:"OVP",SEARCH:"Search",FACTSHEET:"FactSheet",COPILOT:"Co-Pilot",URL:"External Link",APP:"Application"};t.FloatingNumberType={None:"None",Notifications:"Notifications",OverflowButton:"OverflowButton"};t.NavigationBarMenuState={Button:"Button",Menu:"Menu"};return t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/navigationMode", ["sap/base/Log","sap/base/util/isPlainObject","sap/ushell/Config"],function(e,n,a){"use strict";var i={};var o=function(n){var a=true;if(n){if(typeof n!=="object"){a=false}else{Object.keys(n).forEach(function(e){if(["GUI","WDA","WCF"].indexOf(e)===-1){a=false}else if(typeof n[e]!=="boolean"){a=false}})}}if(!a){e.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual parameter: "+JSON.stringify(n),"sap.ushell.services.navigationMode")}};var d=function(e){switch(e){case"TR":return"GUI";case"WDA":return"WDA";case"WCF":return"WCF";default:return undefined}};i._isInplaceEnabledForApplicationType=function(e){var i=a.last("/core/navigation/enableInPlaceForClassicUIs");o(i);if(n(i)){return i[d(e)]}return false};i._getInternalNavigationMode=function(n,a){var i=a.applicationType;var o={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},URL:{inplace:"embedded",explace:"newWindow",frameless:"newWindow"},WCF:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"}};if(!o.hasOwnProperty(i)){e.error(i+" is not a valid application type","expected one of "+Object.keys(o).join(", "),"sap.ushell.navigationMode");return null}if(n!=="inplace"&&n!=="explace"&&n!=="frameless"){e.error(n+" is not a valid external navigation mode","expected one of 'inplace', 'explace' or 'frameless'","sap.ushell.navigationMode");return null}if(i==="SAPUI5"&&n==="frameless"){e.error("'"+n+"' is not a valid external navigation mode for application type '"+i+"'","falling back to internal navigation mode '"+o.SAPUI5.frameless+"'","sap.ushell.navigationMode")}if(i==="URL"){var d=a.appCapabilities?a.appCapabilities.templateNavigationMode:undefined;if(d){var t={embedded:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindowThenEmbedded"},standalone:{inplace:"newWindow",explace:"newWindow",frameless:"newWindow"}};if(d==="standalone"&&n==="inplace"){e.warning("Inplace navigation was requested for an app that supports only standalone mode! 'newWindow' used instead...","sap.ushell.navigationMode")}if(d==="embedded"&&n==="frameless"){e.warning("Frameless navigation was requested for an app that supports only embedded mode! 'newWindowThenEmbedded' used instead...","sap.ushell.navigationMode")}return t[d][n]}}return o[i][n]};i.getExternalNavigationMode=function(n){var a={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!a.hasOwnProperty(n)){e.error(n+" is not a recognized internal navigation mode","expected one of "+Object.keys(a).join(","),"sap.ushell.navigationMode");return null}return a[n]};var t=["NWBC","WDA","TR","WCF"];i.getNavigationMode=function(n,a,o){var d=n.additionalInformation;var r=n.applicationType;var l;var s;var p={navigationMode:undefined,explicitNavMode:false};if(["inplace","explace"].indexOf(o)>=0){p["sap-ushell-next-navmode"]=o}if(["inplace","explace","frameless"].indexOf(a)>=0){var f=i._getInternalNavigationMode(a,n);e.debug("Navigation mode was forced to "+f+" because sap-ushell-navmode parameter was set to "+a+" for target","sap.ushell.navigationMode");p.navigationMode=f;p.explicitNavMode=true;return p}if(i._isInplaceEnabledForApplicationType(r)===true){p.navigationMode=i._getInternalNavigationMode("inplace",n)}if(n.appCapabilities&&n.appCapabilities.navigationMode){p.navigationMode=n.appCapabilities.navigationMode;return p}if((d===null||typeof d==="string"||typeof d==="undefined")&&(r==="URL"||r==="SAPUI5")){if(d&&d.indexOf("managed=")===0){if(d==="managed=FioriWave1"){p.navigationMode="embedded";return p}if(d==="managed="){p.navigationMode="newWindow";return p}return p}if(d&&d.indexOf("SAPUI5.Component=")===0){l="[a-zA-Z0-9_]+";s=["^SAPUI5.Component=",l,"([.]",l,")*$"].join("");if(!new RegExp(s).test(d)){e.warning(["The UI5 component name in",d,"is not valid.","Please use names satisfying",s].join(" "))}p.navigationMode="embedded";return p}p.navigationMode="newWindow";return p}if(p.navigationMode===undefined){if(t.indexOf(r)>-1){p.navigationMode="newWindowThenEmbedded"}else if(r==="SAPUI5"){p.navigationMode="embedded"}else{p.navigationMode="newWindow";e.error("Invalid ApplicationType: "+r)}}return p};i.computeNavigationModeForHomepageTiles=function(e,n,a){var i={applicationType:e,additionalInformation:n};if(t.indexOf(e)>-1&&a){return"embedded"}return this.getNavigationMode(i).navigationMode};return i},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/override", ["sap/m/GroupHeaderListItem","sap/ui/base/ManagedObject","sap/base/util/uid","sap/base/util/each"],function(t,e,i,n){"use strict";var r={};r.updateAggregation=function(t){if(this.isTreeBinding(t)){e.prototype.updateAggregation.apply(this,arguments)}else{var n=this.mBindingInfos[t],s=n.binding,o=s.getContexts(),a=n.factory,g=this.getMetadata().getJSONKeys()[t],u=g._sMutator+"Group",d=s.isGrouped()&&this[u],p=[],l=function(t){var e=this.getId()+"-"+i(),r=a(e,t);if(r.isA("sap.ui.integration.widgets.Card")){r.setBindingContext(t,"ushellCardModel")}else{r.setBindingContext(t,n.model)}this[g._sMutator](r)}.bind(this);if(d){e.prototype.updateAggregation.apply(this,arguments)}else{p=this[g._sGetter]();r._adaptCurrentGroup(o,p);r._updateCurrentGroup(o,p,n.model,l);p.length=o.length}}};r._adaptCurrentGroup=function(t,e){var i,n,r;for(i=0;i<t.length;i++){n=!!(e[i]&&e[i].isA("sap.ui.integration.widgets.Card"));r=!!t[i].getProperty(t[i].sPath+"/isCard");if(n||r){var s=i;for(;s<e.length;s++){e[s].destroy()}break}}};r._updateCurrentGroup=function(t,e,i,n){var r;for(r=0;r<t.length;r++){if(r<e.length&&!e[r].bIsDestroyed){e[r].setBindingContext(t[r],i)}else{n(t[r])}}for(;r<e.length;++r){e[r].destroy()}};r.updateAggregationGrouped=function(e){var i=this.mBindingInfos[e],r=i.binding,s=i.factory,o,a=null,g=null,u=null,d=this,p=d.getItems(),l=0,f=0,h,c,y=[];g=r.isGrouped()&&this.addItemGroup;n(r.getContexts(),function(e,m){if(g&&r.aSorters.length>0){a=r.aSorters[0].fnGroup(m);if(typeof a==="string"){a={key:a}}if(a.key!==u){var C,I;if(i.groupHeaderFactory){C=i.groupHeaderFactory(a)}I=C||new t({title:a.text||a.key}).addStyleClass("sapMListHdr");d.insertAggregation("items",I,f,true);f=f+1;u=a.key}}p=d.getItems();for(h=f;h<p.length;h=h+1){if(p[h].constructor===t){y.push(d.removeItem(p[h]));p=d.getItems()}}if(f<p.length){p[f].setBindingContext(m,i.model);if(p[f].aDelegates){n(p[f].aDelegates,function(t,e){e.vThis=m})}}else{c=d.getId()+"-"+f;o=s(c,m);o.setBindingContext(m,i.model);d.addItem(o)}f=f+1;l=f});for(h=p.length-1;h>=l;h=h-1){y.push(d.removeItem(p[h]))}setTimeout(function(){n(y,function(t,e){e.destroy()})},1)};r.updateAggregatesFactory=function(t){return function(){r.updateAggregation.bind(this)(t)}};return r},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/performance/FesrEnhancer", ["sap/base/Log","sap/base/util/deepExtend","sap/ui/performance/trace/FESR","sap/ushell/EventHub","sap/ushell/performance/ShellAnalytics"],function(e,t,n,r,a){"use strict";const s="FesrEnhancer";const i="[FesrFlp]";const o={HOME_INITIAL:"FLP@LOAD",HOME_LOADING:"FLP@DURING_LOAD",FINDER_INITIAL:"FLP@LOAD_FINDER",APP_INITIAL:"FLP@DEEP_LINK",NAVIGATION:"NAVIGATION",CUSTOM_HOME_INITIAL:"FLPCUSTOMHOME"};const c=[o.HOME_INITIAL,o.FINDER_INITIAL,o.CUSTOM_HOME_INITIAL,o.APP_INITIAL];const l={APP_START:1,STEP_IN_APP:2,UNKNOWN:3};const u=["stepName","appNameLong","appNameShort","interactionType","timeToInteractive"];const p={stepName:{maxLength:20,postfix:"@H2H"},appNameShort:{maxLength:20}};const d={_fnOriginalOnBeforeCreated:null,_oLastTrackedRecord:null,init:function(){if(n.getActive()){a.enable();this._fnOriginalOnBeforeCreated=n.onBeforeCreated;n.onBeforeCreated=this._onBeforeCreatedHandler.bind(this)}},reset:function(){n.onBeforeCreated=this._fnOriginalOnBeforeCreated;a.disable();this._setLastTrackedRecord(null)},_getPerformanceEntries:function(e,t){if(t){return performance.getEntriesByName(e)}return performance.getEntriesByType("mark").filter(t=>t.name.includes(e))},_getLastTrackedApplicationId:function(){const e=a.getCurrentApplication();if(e){return e.id}return null},_getLastTrackedRecord:function(){return this._oLastTrackedRecord},_setLastTrackedRecord:function(e){this._oLastTrackedRecord=e},_getLastFesrHandle:function(){const e=this._oLastFesrHandle;this._oLastFesrHandle=undefined;return e!==undefined?e:null},_setLastFesrHandle:function(e){this._oLastFesrHandle=e},_onBeforeCreatedHandler:function(n,a){let l=t({},n);try{const{scenario:t,relatedRecord:n}=this._detectScenario(l);e.debug(`${i} identified scenario: ${t}`,null,s);const a=this._getLastTrackedApplicationId();if(a){l.appNameShort=a}let u;switch(t){case o.HOME_INITIAL:case o.CUSTOM_HOME_INITIAL:case o.FINDER_INITIAL:u=this._enhanceInitialStart(l,t,n);break;case o.APP_INITIAL:u=this._enhanceInitialAppStart(t,n);break;case o.NAVIGATION:case o.HOME_LOADING:u=this._enhanceNavigationRecord(t,n);break;default:e.debug(`${i} unknown scenario, step name: ${l.stepName}`,null,s);this._setLastFesrHandle(l);return l}if(c.includes(t)){r.emit("startUpFesrEnhanced",Date.now())}u=this.sanitizeEnhancement(u);l={...l,...u};e.debug(`${i} passing enhancements:`,JSON.stringify(u,null,2),s)}catch(t){e.error(`${i} Could not enhance the FESR:`,t,s)}e.debug(`${i}      => UI5: ${l.stepName} - ${l.appNameShort}`,null,s);this._setLastFesrHandle(l);return l},shortenAccordingToFormatter:function(e,t){var n="";if(t&&t.maxLength){n=e.substring(0,t.maxLength)}else{n=e}return n},shortenWithPostfix:function(e,t){const n=p[t];if(n){if(n.postfix){if(e.endsWith(n.postfix)){const t={...n,maxLength:n.maxLength-n.postfix.length};const r=this.shortenAccordingToFormatter(e.slice(0,-1*t.postfix.length),t);return r+t.postfix}}return this.shortenAccordingToFormatter(e,n)}return e},sanitizeEnhancement:function(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];if(u.includes(n)&&!!r){t[n]=this.shortenWithPostfix(r,n)}return t},{})},_getRelevantPerformanceMark:function(t){if(!t){e.warning(`${i} Could not determine performance mark`,"No Statistical Record found",s);return}const n=[];if(t.getTargetIsHomeApp()){n.push(this._getPerformanceEntries("FLP-TTI-Homepage-Custom",true)[0])}else{switch(t.getTargetApplication()){case"FLP_HOME":n.push(this._getPerformanceEntries("FLP-TTI-Homepage",true)[0]);break;case"FLP_PAGE":n.push(this._getPerformanceEntries("FLP-TTI-Homepage",true)[0]);n.push(this._getPerformanceEntries("FLP-Pages-Service-loadPage-end",false)[0]);break;case"FLP_FINDER":n.push(this._getPerformanceEntries("FLP-TTI-AppFinder",true)[0]);break;default:}}return n.filter(e=>{if(!e){return false}if(typeof e.startTime!=="number"){return false}if(e.startTime>t.getTimeStart()){return true}return false})[0]},_detectScenario:function(t){if(t.stepName==="undetermined_startup"){let n;const r=a.getLastClosedRecord();if(r){this._setLastTrackedRecord(r)}else{e.warning(`${i} Identified undetermined_startup but could not find a closed StatisticalRecord`,null,s);return{scenario:null,relatedRecord:null}}if(r.getTargetIsHomeApp()){n=o.CUSTOM_HOME_INITIAL}else{switch(t.appNameLong){case"sap.ushell.components.homepage":case"sap.ushell.components.pages":n=o.HOME_INITIAL;break;case"sap.ushell.components.appfinder":n=o.FINDER_INITIAL;break;default:n=o.APP_INITIAL}}return{scenario:n,relatedRecord:r}}const n=this._getLastTrackedRecord();const r=a.getNextNavigationRecords(n);if(r.length){const t=r[r.length-1];if(r.length>1){const t=r.reduce((e,t,n)=>{if(n<r.length-1){e.push(t.getTargetHash())}return e},[]);e.warning(`${i} skipped Records:`,JSON.stringify(t,null,2),s)}if(n&&t.isEqual(n)){return{scenario:null,relatedRecord:null}}this._setLastTrackedRecord(t);const a=t.getStep()===o.HOME_LOADING?o.HOME_LOADING:o.NAVIGATION;return{scenario:a,relatedRecord:t}}return{scenario:null,relatedRecord:null}},_enhanceInitialStart:function(t,n,r){const a={};if(n===o.CUSTOM_HOME_INITIAL){a.stepName=n+"@"+t.appNameShort}else{a.stepName=n}a.interactionType=l.APP_START;a.appNameShort=r.getTargetAppNameShort()||r.getTargetApplication();const c=this._getRelevantPerformanceMark(r);if(c){e.debug(`${i} using performance mark: ${c.name}`,null,s);a.timeToInteractive=c.startTime}else{e.warning(`${i} Scenario ${n} detected did not found a performance mark`,null,s)}return a},_enhanceNavigationRecord:function(t,n){const r={};if(t!=="FLP@DURING_LOAD"){r.stepName=n.getStep()}if(n.getTargetApplicationType()==="UI5"){r.interactionType=l.APP_START}r.appNameShort=n.getTargetAppNameShort()||n.getTargetApplication();const a=this._getRelevantPerformanceMark(n);if(/^FLP_BACK/.test(r.stepName)&&a){e.debug(`${i} using performance mark: ${a.name}`,null,s);r.timeToInteractive=a.startTime-n.getTimeStart()}return r},_enhanceInitialAppStart:function(e,t){const n={};n.stepName=e;if(t.getTargetApplicationType()==="UI5"){n.interactionType=l.APP_START}else{n.interactionType=l.STEP_IN_APP}return n}};return d},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/performance/ShellAnalytics", ["sap/base/Log","sap/ushell/EventHub","sap/ushell/services/AppConfiguration","sap/ushell/performance/StatisticalRecord","sap/ushell/utils","sap/ushell/Container"],function(e,n,t,a,i,o){"use strict";const r="ShellAnalytics";const c="[FesrFlp]";let s=[];let l=[];let p=false;let u=false;let d=false;let h,f,g;const m={EXPLACE:"EXPLACE",INPLACE:"INPLACE"};const A={"sap.ushell.components.appfinder":"FLP_FINDER","sap.ushell.components.pages":"FLP_PAGE","sap.ushell.components.homepage":"FLP_HOME"};function C(e){if(!e){return false}return e.id==="FLP_HOME"||e.id==="FLP_PAGE"}function v(e){return e&&e.isHomeApp}function N(){return s}function I(){const e=N().filter(e=>e.isClosed());if(e.length>0){return e[e.length-1]}return null}function y(e){if(!e){return N().filter(e=>e.isClosed())}return N().filter(n=>e.getTimeStart()<n.getTimeStart()&&n.isClosed())}function E(){return f}function P(n){e.debug(`${c} ShellAnalytics setCurrentApplication: ${n&&n.id}`,null,r);f=n}function L(){g=performance.now();i.setPerformanceMark("FLP -- change hash")}function S(){if(!h){const e=s[s.length-1]||null;h=new a(e);s.push(h)}return h}function T(e){if(d){d=false;return}const n=S();n.setTargetHash(e);n.setTimeStart(g||performance.now())}function R(e){const n=e||"";if(n.slice(-7)==="(TCODE)"){return n.replace(/ .*/,"").replace(/^\*/,"").replace(/,/g,"").substring(0,15).concat(" (TR)")}return n}function H(e){let n="";const t=e.componentInstance&&e.componentInstance.getManifest();if(t&&t["sap.app"]&&t["sap.app"].id){n=t["sap.app"].id}return n}async function F(){const e=await o.getServiceAsync("AppLifeCycle");const n=e.getCurrentApplication();if(!n){return{}}const a=n&&n.componentInstance&&n.componentInstance.sId&&n.componentInstance.sId.includes("homeApp-component");let i;if(n.getTechnicalParameter){i=n.getTechnicalParameter("sap-fiori-id")}else{i=Promise.resolve([])}const r=await i;let c=r&&r[0];if(a){return{type:"UI5",id:c,isHomeApp:true}}if(n.homePage){const e=A[H(n)]||"FLP_HOME";return{type:"UI5",id:e}}if(n.applicationType==="UI5"){if(!c){c=H(n);c=A[c]||c}c=c.replace(/,/g,"");return{type:"UI5",id:c}}const s=t.getMetadata().technicalName||t.getCurrentApplication().text||n.applicationType;const l=R(s);return{type:n.applicationType,id:l}}function w(e,n,t,a){if(a){a.setSourceApplication(e&&e.id);a.setTargetApplication(n&&n.id);a.setTargetApplicationType(n&&n.type);a.setNavigationMode(t);a.setTargetIsHomeApp(v(n));a.setSourceIsHomeApp(v(e));if(!p&&(v(n)||C(n))){p=true;a.setHomepageLoading(true)}a.closeRecord()}}function b(e){if(!h){return}const n=h;h=null;F().then(async t=>{const a=E();const i=await M(t.type);if(e&&e.technicalName&&i){t.id=R(e.technicalName);t.type=t.id.slice(-4)==="(TR)"?"GUI":"NWBC"}P(t);w(a,t,m.INPLACE,n)})}async function M(e){const n=await o.getServiceAsync("AppLifeCycle");const{ApplicationType:t}=n;return[t.WDA,t.NWBC,t.TR].includes(e)}function O(){d=true;const e=h;h=null;const n=E();w(n,null,m.EXPLACE,e)}function $(){if(h){const e=E();h.setSourceApplication(e?e.id:undefined);h.closeRecordWithError();h=null}}async function _(){const e=await o.getServiceAsync("ShellNavigationInternal");e.hashChanger.attachEvent("hashChanged",L);e.hashChanger.attachEvent("shellHashChanged",L)}async function U(){const e=await o.getServiceAsync("ShellNavigationInternal");e.hashChanger.detachEvent("hashChanged",L);e.hashChanger.detachEvent("shellHashChanged",L)}function W(){if(u){return}u=true;const t=[{once:true,eventName:"ShellNavigationInitialized",handler:_},{eventName:"trackHashChange",handler:T},{eventName:"doHashChangeError",handler:$},{once:true,eventName:"firstSegmentCompleteLoaded",handler:b},{once:true,eventName:"firstCatalogSegmentCompleteLoaded",handler:b},{once:true,eventName:"PagesRuntimeRendered",handler:b},{once:true,eventName:"CustomHomeRendered",handler:b},{eventName:"PageRendered",handler:D},{eventName:"FESRAppLoaded",handler:b},{eventName:"openedAppInNewWindow",handler:O},{eventName:"CloseFesrRecord",handler:b}];const a=t.map(t=>{if(t.once){return n.once(t.eventName).do((...n)=>{e.debug(`${c} Incoming event: ${t.eventName}`,JSON.stringify(n[0],null,2),r);t.handler(...n)})}return n.on(t.eventName).do((...n)=>{e.debug(`${c} Incoming event: ${t.eventName}`,JSON.stringify(n[0],null,2),r);t.handler(...n)})});l=[...l,...a]}function D(e){const n=S();n.enhanceTargetApplicationData({pageId:e.pageId,spaceId:e.spaceId})}function G(){if(!u){return}l.forEach(e=>{e.off()});l=[];U();P(null);s=[];h=null;u=false;d=false}return{enable:W,disable:G,getAllRecords:N,getCurrentApplication:E,getLastClosedRecord:I,getNextNavigationRecords:y}},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/performance/StatisticalRecord", ["sap/base/Log","sap/ui/performance/trace/Interaction"],function(t,i){"use strict";const e="StatisticalRecord";const r="[FesrFlp]";const s={OPEN:"OPEN",CLOSED:"CLOSED",ERROR:"ERROR"};class o{#t=null;#i=null;#e=false;#r=s.OPEN;#s=null;#o=null;#a=null;#n=null;#l=null;#c=null;#p=null;#h=null;#d=null;#u={};#g=null;constructor(){t.debug(`${r} ======================================`,"‾‾‾ OPEN ‾‾‾",e);t.debug(`${r} Opening Record`,null,e);this.#A()}setNavigationMode(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#i=t}setHomepageLoading(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#e=t}getSourceApplication(){return this.#l}#A(){if(!this.#g){t.debug(`${r} Interaction Start`,null,e);this.#g=i.notifyAsyncStep()}}#E(){if(this.#g){t.debug(`${r} Interaction End`,null,e);this.#g();this.#g=null}}#m(){const t=this.#h||this.#S(this.#p);const i=this.#c||this.#S(this.#l);if(!this.#p&&!this.#l){return""}if(!this.#l&&t){return"FLP@DURING_LOAD"}if(!this.#l&&!t){return"FLP@DEEP_LINK"}if(!t&&!i){return"A2A@"+this.#l}if(this.#l&&t&&!i){return"FLP_BACK@"+this.#l}if(i&&t){if(["FLP_FINDER","FLP_HOME"].includes(this.#p)){return this.#p+"@H2H"}if(this.#h){return this.#p+"@H2H"}return this.#u.pageId+"@H2H"}if(this.#S(this.#l)){return"FLP@HOMEPAGE_TILE"}if(this.#c){return"APPSTART@CUSTOMHOME"}return""}isEqual(t){return this.#a===t.getTimeStart()}closeRecord(){this.#s=this.#m();this.#r=s.CLOSED;this.#n=performance.now();if(this.#a){this.#t=this.#n-this.#a}this.#E();t.debug(`${r} Closing Record`,`${this.#s} - ${this.getTargetAppNameShort()||this.#p}`,e);t.debug(`${r} ======================================`,"___ CLOSE ___",e)}closeRecordWithError(){this.#r=s.ERROR;this.#n=performance.now();this.#t=this.#n-this.#a;this.#E();t.debug(`${r} Closing Record with Error`,`${this.getTargetAppNameShort()||this.#p}`,e);t.debug(`${r} ======================================`,"___ CLOSE ___",e)}isClosed(){return this.#r===s.CLOSED}isClosedWithError(){return this.#r===s.ERROR}getStep(){if(!this.isClosed()&&!this.isClosedWithError()){throw new Error("Statistical record is still open no step can be determined!")}return this.#s}getTimeStart(){return this.#a}setTimeStart(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#a=t}getTimeEnd(){return this.#n}setSourceApplication(i){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}t.debug(`${r} Record setSource: ${i}`,null,e);this.#l=i}getTargetApplication(){return this.#p}setTargetApplication(i){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}t.debug(`${r} Record setTarget: ${i}`,null,e);this.#p=i}getTargetAppNameShort(){if(this.#p==="FLP_PAGE"){const{pageId:t}=this.#u;if(t){return"FLP_PAGE"}}return null}getTargetApplicationType(){return this.#d}setTargetApplicationType(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#d=t}setTargetIsHomeApp(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#h=!!t}getTargetIsHomeApp(){return!!this.#h}setTargetHash(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#o=t}getTargetHash(){return this.#o}setSourceIsHomeApp(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#c=!!t}getSourceIsHomeApp(){return!!this.#c}#S(t){return t&&["FLP_HOME","FLP_PAGE","FLP_FINDER"].includes(t)}enhanceTargetApplicationData(t){if(this.isClosed()||this.isClosedWithError()){throw new Error("Statistical record is already closed!")}this.#u={...this.#u,...t}}}return o},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/AccessKeysHandler", ["sap/ui/base/EventProvider","sap/ui/Device","sap/ui/core/Element","sap/ui/thirdparty/hasher","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/state/StateManager","sap/ushell/Container","sap/ushell/state/ShellModel"],function(e,t,n,s,o,i,r,a,l,u){"use strict";const c=a.LaunchpadState;const f=a.ShellMode;const{Default:d,Headerless:h,Minimal:p}=f;var y=e.extend("sap.ushell.renderer.AccessKeysHandler",{constructor:function(){e.apply(this,arguments);i.on("AppRendered").do(this.appOpenedHandler.bind(this));this.bFocusOnShell=true;this.bFocusPassedToExternalHandlerFirstTime=true;this.isFocusHandledByAnotherHandler=false;this.fnExternalKeysHandler=null;this.sLastExternalKeysHandlerUrl=null;this.fnExternalShortcuts=null;this.bForwardNavigation=true;this.aShortcutsDescriptions=[]}});y.prototype.init=function(){this.oConfigModel=u.getConfigModel();document.addEventListener("keydown",function(e){if(e.keyCode===16){return}this.bForwardNavigation=!e.shiftKey;if(e.key==="Tab"||e.key==="F6"){setTimeout(function(){this._handleEventUsingExternalKeysHandler(e)}.bind(this),0)}else{this._handleEventUsingExternalKeysHandler(e)}const t=a.getShellMode();const n=a.getLaunchpadState();if(t!==h){let s=false;if(n===c.Home){s=a.isLegacyHome()}else{s=[d,p].includes(t)}this.handleShortcuts(e,s)}if(this.fnExternalShortcuts){this.fnExternalShortcuts(e)}}.bind(this),true);this._cancelHelpEvent=this._cancelHelpEvent.bind(this)};y.prototype.appOpenedHandler=function(){var e=s.getHash();if(e!==this.sLastExternalKeysHandlerUrl){this.fnExternalKeysHandler=null}this.sLastExternalKeysHandlerUrl=e};y.prototype._focusItemInOverflowPopover=function(e,t){var s=n.getElementById("headEndItemsOverflow");if(s&&s.isOpen()){if(s.getContent().length){this._focusItemInPopover(e,s.getContent()[0].getItems())}}else if(t<10){var o=window.document.getElementById("endItemsOverflowBtn");if(o){o.click();var i=this;window.setTimeout(function(){i._focusItemInOverflowPopover(e,++t)},300)}}};y.prototype._focusItemInUserMenu=function(e,t){var s=n.getElementById("sapUshellUserActionsMenuPopover");if(s&&s.isOpen()){if(s.getContent().length){this._focusItemInPopover(e,s.getContent()[0].getItems())}}else if(t<10){var o=this;i.emit("showUserActionsMenu",Date.now());window.setTimeout(function(){o._focusItemInUserMenu(e,++t)},300)}};y.prototype._focusItemInPopover=function(e,t){for(var n=0;n<t.length;n++){var s=t[n].getId().split("-");if(s[s.length-1]===e){t[n].getDomRef().focus();return}}};y.prototype._handleAccessOverviewKey=function(e){var n=this.oConfigModel.getProperty("/searchAvailable"),s=this.oConfigModel.getProperty("/personalization"),i=o.last("/core/catalog/enabled"),a=o.last("/core/shell/model/enableNotifications");if(t.browser.msie){document.addEventListener("help",this._cancelHelpEvent)}var l=[];l=l.concat(this.aShortcutsDescriptions);var u;var c;if(t.os.macintosh){u=r.i18n.getText("OptionKey");c=r.i18n.getText("CommandKey")}else{u=r.i18n.getText("AltKey");c=r.i18n.getText("ControlKey")}if(window.document.getElementById("shell-header")){if(i&&e){l.push({text:u+" + A",description:r.i18n.getText("hotkeyFocusOnAppFinderButton")})}if(n){l.push({text:u+" + F",description:r.i18n.getText("hotkeyFocusOnSearchButton")})}l.push({text:u+" + H",description:r.i18n.getText("hotkeyHomePage")});l.push({text:u+" + M",description:r.i18n.getText("hotkeyFocusOnUserActionMenu")});if(a){l.push({text:u+" + N",description:r.i18n.getText("hotkeyFocusOnNotifications")})}if(e){l.push({text:u+" + S",description:r.i18n.getText("hotkeyFocusOnSettingsButton")});l.push({text:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("CommaKey"),description:r.i18n.getText("hotkeyOpenSettings")})}if(s&&i){l.push({text:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("EnterKey"),description:r.i18n.getText("hotkeyExitEditing")})}if(n){l.push({text:c+" + "+r.i18n.getText("ShiftKey")+" + F",description:r.i18n.getText("hotkeyFocusOnSearchField")})}}sap.ui.require(["sap/m/Label","sap/m/MessageBox","sap/m/Text","sap/m/VBox"],function(e,t,n,s){var o=new s;l.forEach(function(t){o.addItem(new e({text:t.description}));o.addItem(new n({text:t.text}).addStyleClass("sapUiSmallMarginBottom"))});t.show(o,{id:"hotKeysGlossary",title:r.i18n.getText("hotKeysGlossary"),styleClass:"sapContrastPlus"})})};y.prototype._focusAppFinderButton=function(){if(!o.last("/core/catalog/enabled")){return}if(this._isFocusInDialog()){return}var e=window.document.getElementById("openCatalogBtn");if(e){e.focus();return}var t=l.getRendererInternal("fiori2").getShellConfig();if(t.moveAppFinderActionToShellHeader){this._focusItemInOverflowPopover("openCatalogBtn",0);return}this._focusItemInUserMenu("openCatalogBtn",0)};y.prototype._focusSettingsButton=function(){if(this._isFocusInDialog()){return}var e=window.document.getElementById("userSettingsBtn");if(e){e.focus();return}var t=l.getRendererInternal("fiori2").getShellConfig();if(t.moveUserSettingsActionToShellHeader){this._focusItemInOverflowPopover("userSettingsBtn",0);return}this._focusItemInUserMenu("userSettingsBtn",0)};y.prototype._blockBrowserDefault=function(e){return new Promise(function(n){if(t.browser.name==="ie"){var s=window.document.getElementById("shell-header");if(s){s.setAttribute("accesskey",e.key);window.setTimeout(function(){s=window.document.getElementById("shell-header");if(s){s.removeAttribute("accesskey");n()}},0)}}else{n()}e.preventDefault()})};y.prototype._handleAltShortcutKeys=function(e,t){var s=n.getElementById("shell-header"),o=n.getElementById("sapUshellUserActionsMenuPopover"),r=n.getElementById("shellNotificationsPopover");if(this._isFocusInInput()){return}if(s){if(t){if(e.keyCode===65){this._blockBrowserDefault(e).then(this._focusAppFinderButton.bind(this))}else if(e.keyCode===83){this._blockBrowserDefault(e).then(this._focusSettingsButton.bind(this))}}if(e.keyCode===70){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}var e=window.document.getElementById("sf"),t=window.document.getElementById("searchFieldInShell-button");if(e){e.focus()}else if(t){t.focus()}else{this._focusItemInOverflowPopover("sf",0)}}.bind(this))}else if(e.keyCode===72){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}var e=document.getElementById("shell-header-logo");if(e){e.focus();return}}.bind(this))}else if(e.keyCode===77){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}if(!(o&&o.isOpen())){i.emit("showUserActionsMenu",Date.now())}}.bind(this))}else if(e.keyCode===78){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return}if(!(r&&r.isOpen())){i.emit("showNotifications",Date.now())}}.bind(this))}}};y.prototype._handleCtrlShortcutKeys=function(e,t){if(e.shiftKey){if(e.keyCode===70){if(this._isFocusInDialog()){return}var s=n.getElementById("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation()}}}else if(e.keyCode===188&&t){if(this._isFocusInDialog()){return}var i=n.getElementById("userSettingsBtn");if(i&&!this._isFocusInATable()){i.firePress();e.preventDefault();e.stopPropagation()}}else if(e.keyCode===112){if(this._isFocusInDialog()){return}this._handleAccessOverviewKey(t)}else if(e.keyCode===83){if(this._isFocusInDialog()){return}var r=window.document.getElementById("appFinderSearch-I");if(r){r.focus();e.preventDefault();e.stopPropagation()}}else if(e.keyCode===13){if(this._isFocusInDialog()){return}if(o.last("/core/spaces/enabled")){this.fireEvent("editModeDone")}else{var a=n.getElementById("sapUshellDashboardFooterDoneBtn");if(a&&a.getDomRef()){a.firePress();e.preventDefault();e.stopPropagation()}}}};y.prototype.handleShortcuts=function(e,n){if(t.os.macintosh&&e.metaKey&&e.shiftKey&&e.keyCode===70){var s=window.document.getElementById("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation()}e.preventDefault()}else if(e.altKey&&!e.shiftKey&&!e.ctrlKey){this._handleAltShortcutKeys(e,n)}else if(e.ctrlKey&&!e.altKey){this._handleCtrlShortcutKeys(e,n)}};y.prototype.registerAppKeysHandler=function(e){this.fnExternalKeysHandler=e;this.sLastExternalKeysHandlerUrl=s.getHash()};y.prototype.resetAppKeysHandler=function(){this.fnExternalKeysHandler=null};y.prototype.getAppKeysHandler=function(){return this.fnExternalKeysHandler};y.prototype.registerAppShortcuts=function(e,t){this.fnExternalShortcuts=e;this.aShortcutsDescriptions=t};y.prototype._handleFocusBackToMe=function(e,t){this.bFocusOnShell=true;var s;if(t){s=window.document.getElementById(t)}else{this.fromOutside=true;if(e){e.preventDefault();this.bForwardNavigation=!e.shiftKey||e.key==="F6"}var i=n.getElementById("shell-header");if(i&&!o.last("/core/shellBar/enabled")){i.setFocusOnShellHeader(!this.bForwardNavigation);this.fromOutside=false}}if(s){s.focus();this.fromOutside=false}this.bFocusPassedToExternalHandlerFirstTime=true};y.prototype.setIsFocusHandledByAnotherHandler=function(e){this.isFocusHandledByAnotherHandler=e};y.prototype.sendFocusBackToShell=function(e){var t,n;if(typeof e==="string"){n=e}else if(typeof e==="object"){t=e}this._handleFocusBackToMe(t,n)};y.prototype._handleEventUsingExternalKeysHandler=function(e){if(!this.bFocusOnShell&&!this.isFocusHandledByAnotherHandler){if(typeof this.fnExternalKeysHandler==="function"){this.fnExternalKeysHandler(e,this.bFocusPassedToExternalHandlerFirstTime);this.bFocusPassedToExternalHandlerFirstTime=false}}this.setIsFocusHandledByAnotherHandler(false)};y.prototype._cancelHelpEvent=function(e){e.preventDefault();document.removeEventListener("help",this._cancelHelpEvent)};y.prototype._isFocusInInput=function(){var e=(document.activeElement||{}).tagName;return e==="INPUT"||e==="TEXTAREA"};y.prototype._isFocusInDialog=function(){var e=document.activeElement;for(;e!==document.body;e=e.parentNode){if(e.classList.contains("sapMDialog")){return true}}return false};y.prototype._isFocusInATable=function(){var e=document.activeElement;var t;for(;e!==document.body;e=e.parentNode){t=e.classList;if(t.contains("sapUiCompSmartTable")||t.contains("sapUiMdcTable")||t.contains("sapMListTbl")||t.contains("sapUiTable")){return true}}return false};return new y});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/History", [],function(){"use strict";var i=function(){this._history=[];this._backwards=false;this._historyPosition=-1;this._virtual={};this.hashChange=function(i){var t=this._history.indexOf(i);if(t===-1){if(this._historyPosition+1<this._history.length){this._history=this._history.slice(0,this._historyPosition+1)}this._history.push(i);this._historyPosition+=1;this.backwards=false;this.forwards=false}else{this.backwards=this._historyPosition>t;this.forwards=this._historyPosition<t;this._historyPosition=t}};this.pop=function(){var i;if(this._history.length>0){i=this._history.pop();this._historyPosition--}return i};this.isVirtualHashchange=function(i,t){return this._virtual.hasOwnProperty(t)&&this.getCurrentHash()===i&&this._history.length-1>this._historyPosition&&this._history[this._historyPosition+1]===t};this.setVirtualNavigation=function(i){this._virtual[i]=true};this.getCurrentHash=function(){return this._history[this._historyPosition]||null};this.getHashIndex=function(i){return this._history.indexOf(i)};this.getHistoryLength=function(){return this._history.length}};return new i});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/LogonFrameProvider", ["sap/m/Button","sap/m/Dialog","sap/ui/core/Element","sap/ui/core/HTML","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/Config","sap/ushell/resources","sap/ushell/Container"],function(e,t,a,n,l,s,o,i){"use strict";function r(){c();var a=new t({id:"SAMLDialog",title:o.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",content:new n("SAMLDialogFrame",{content:'<iframe id=SAMLDialogFrame src=""></iframe>'}),endButton:new e({text:o.i18n.getText("samlCloseBtn"),press:i.cancelLogon.bind(i)})}).addStyleClass("sapUshellIframeDialog sapContrastPlus sapUshellSamlDialogHidden");if(s.last("/core/extension/SupportTicket")){var r=new l;r.setWidth("150px");r.setIcon("");a.setBeginButton(r)}a.open();u(true);return document.getElementById("SAMLDialogFrame")}function u(e){var t=document.getElementById("sap-ui-blocklayer-popup");if(t){if(e){t.classList.add("sapUshellSamlDialogHidden")}else{t.classList.remove("sapUshellSamlDialogHidden")}}}function c(){var e=a.getElementById("SAMLDialog");if(e){e.destroy()}}function d(){var e=a.getElementById("SAMLDialog");if(e){e.removeStyleClass("sapUshellSamlDialogHidden");u(true)}}const p={create:r,show:d,destroy:c};return p});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/NavContainer", ["sap/base/Log","sap/ui/core/Control","sap/ui/core/Element","sap/ui/core/RenderManager","sap/ui/Device","sap/ushell/Container","sap/ushell/renderer/NavContainerRenderer","sap/ushell/utils"],(e,t,r,s,n,o,i,a)=>{"use strict";const p=t.extend("sap.ushell.renderer.NavContainer",{metadata:{library:"sap.ushell",properties:{visible:{type:"boolean",group:"Appearance",defaultValue:true},currentPageId:{type:"string",defaultValue:"",visibility:"hidden"}},aggregations:{pages:{type:"sap.ui.core.Control",multiple:true,singularName:"page"}},events:{beforeNavigate:{parameters:{fromId:{type:"string"},from:{type:"sap.ui.core.Control"},toId:{type:"string"},to:{type:"sap.ui.core.Control"}}},afterNavigate:{parameters:{fromId:{type:"string"},from:{type:"sap.ui.core.Control"},toId:{type:"string"},to:{type:"sap.ui.core.Control"}}}}},renderer:i});p.prototype.addPage=function(e){if(this.getPages().indexOf(e)>-1){return this}this._setPageVisibility(e,false);this.addAggregation("pages",e,true);const t=this.getDomRef();if(t){const r=(new s).getInterface();r.render(e,t);r.destroy()}return this};p.prototype.removePage=function(e){this.removeAggregation("pages",e,true);const t=this.getProperty("currentPageId");if(t===e){this.setProperty("currentPageId","",true)}return this};p.prototype.getPageById=function(e){return this.getPages().reduce((t,r)=>{if(r.getId()===e){return r}return t},null)};p.prototype._setPageVisibility=function(e,t){if(e.isA("sap.ushell.renderer.INavContainerPage")){e.setVisibility(t);return}if(t){e.removeStyleClass("sapUShellNavContainerPageHidden")}else{e.addStyleClass("sapUShellNavContainerPageHidden")}};p.prototype.navTo=function(t){const r=this.getPageById(t);const s=this.getProperty("currentPageId");const n=this.getPageById(s);if(!r){e.error("NavContainer: invalid navigation target");return}this._storeFocus();this.fireBeforeNavigate({toId:t,to:r,fromId:s,from:n});this.getPages().forEach(e=>{this._setPageVisibility(e,e.getId()===t)});this.setProperty("currentPageId",t,true);this._restoreFocus(r.getId());this.fireAfterNavigate({toId:t,to:r,fromId:s,from:n})};p.prototype._storeFocus=async function(){const e=o.getRendererInternal("fiori2").byId("Shell-home-component-container");const t=e&&e.getId();const s=this.getProperty("currentPageId");const i=s&&t===s;const p=n.system.desktop&&i;if(!p){return}const[u]=await a.requireAsync(["sap/ushell/renderer/AccessKeysHandler"]);const c=r.closestTo(document.activeElement);this._sLastFocusId=c?c.getId():null;this._fnLastAppKeyHandler=u.getAppKeysHandler()};p.prototype._restoreFocus=async function(e){const t=o.getRendererInternal("fiori2").byId("Shell-home-component-container");const s=t&&t.getId();const i=s===e;const p=n.system.desktop&&i;if(!p){return}const[u]=await a.requireAsync(["sap/ushell/renderer/AccessKeysHandler"]);if(this._sLastFocusId){u.registerAppKeysHandler(this._fnLastAppKeyHandler);const e=r.getElementById(this._sLastFocusId);if(e){e.focus()}}};return p});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/NavContainerRenderer", ["sap/ushell/resources"],function(e){"use strict";const n={apiVersion:2};n.render=function(n,t){if(!t.getVisible()){return}n.openStart("main",t);n.attr("role","main");n.attr("aria-label",e.i18n.getText("ShellContent.AriaLabel"));n.openEnd();t.getPages().forEach(function(e){n.renderControl(e)});n.close("main")};return n},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/Renderer", ["sap/ui/core/Component","sap/ui/core/Element","sap/ui/core/UIComponent","sap/ushell/ui/shell/ToolAreaItem","sap/ushell/Config","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/appIntegration/AppLifeCycle","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/services/AppConfiguration","sap/ushell/resources","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/deepExtend","sap/base/util/extend","sap/ui/base/Object","sap/base/util/ObjectPath","sap/ui/core/library","sap/ushell/library","sap/ui/core/mvc/View","sap/ushell/ui/shell/ShellHeadItem","sap/m/NotificationListItem","sap/ushell/renderer/ShellLayout","sap/ushell/renderer/utils","sap/ushell/ui/launchpad/ActionItem","sap/ushell/state/ShellModel","sap/ushell/state/StateManager","sap/ushell/renderers/fiori2/RendererExtensions"],function(e,t,n,o,r,i,s,a,l,c,p,u,d,h,jQuery,f,m,g,y,S,w,C,I,b,A,v,P,B,F,R,H){"use strict";const E=w.mvc.ViewType;const T=C.AppType;const _=R.LaunchpadState;const L=R.Operation;const V=R.ShellMode;const{Headerless:k,Merged:M,Blank:z,Lean:j}=V;const U=n.extend("sap.ushell.renderer.Renderer",{metadata:{version:"1.136.1",dependencies:{version:"1.136.1",libs:["sap.ui.core","sap.m"],components:[]},interfaces:["sap.ui.core.IAsyncContentCreation"],routing:{config:{async:true,controlId:"viewPortContainer",clearAggregation:false,controlAggregation:"pages"},routes:[{name:"appfinder-legacy",pattern:"Shell-home&/appFinder/:menu:/:filter:"},{name:"home",pattern:["Shell-home?:hashParameters:","Shell-home&/:innerHash*:","Shell-home"],target:function(){if(r.last("/core/homeApp/enabled")){return"homeapp"}if(r.last("/core/workPages/enabled")&&!r.last("/core/workPages/runtimeSwitcher")){return"workpages"}if(r.last("/core/workPages/enabled")&&r.last("/core/workPages/runtimeSwitcher")){return"runtimeSwitcher"}if(r.last("/core/spaces/enabled")){return"pages"}return"home"}()},{name:"appfinder",pattern:["Shell-appfinder?:hashParameters:&/:innerHash*:","Shell-appfinder?:hashParameters*:","Shell-appfinder&/:innerHash*:","Shell-appfinder"],target:function(){if(!!r.last("/core/site/siteId")&&r.last("/core/catalog/enabled")&&r.last("/core/workPages/contentFinderStandalone")&&r.last("/core/workPages/enabled")){return"contentfinder"}return r.last("/core/catalog/enabled")?"appfinder":undefined}()},{name:"openFLPPage",pattern:["Launchpad-openFLPPage?:hashParameters:","Launchpad-openFLPPage"],target:function(){if(r.last("/core/workPages/enabled")&&!r.last("/core/workPages/runtimeSwitcher")){return"workpages"}if(r.last("/core/workPages/enabled")&&r.last("/core/workPages/runtimeSwitcher")){return"runtimeSwitcher"}if(r.last("/core/spaces/enabled")){return"pages"}return"home"}()},{name:"openWorkPage",pattern:["Launchpad-openWorkPage?:hashParameters:","Launchpad-openWorkPage"],target:"workpages"},{name:"wzsearch",pattern:["WorkZoneSearchResult-display:?query:"],target:"wzsearch"}],targets:{home:{name:"sap.ushell.components.homepage",type:"Component",title:h.i18n.getText("homeBtn_tooltip"),id:"Shell-home-component",options:{manifest:false,asyncHints:{preloadBundles:r.last("/core/home/featuredGroup/enable")?["sap/ushell/preload-bundles/homepage-af-dep.js","sap/ushell/components/homepage/cards-preload.js"]:["sap/ushell/preload-bundles/homepage-af-dep.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},appfinder:{name:"sap.ushell.components.appfinder",type:"Component",id:"Shell-appfinder-component",options:{manifest:false,asyncHints:{preloadBundles:["sap/ushell/preload-bundles/homepage-af-dep.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},contentfinder:{name:"sap.ushell.components.contentFinderStandalone",type:"Component",id:"Shell-appfinder-component",options:{manifest:true,asyncHints:{preloadBundles:[]},componentData:{}}},pages:{name:"sap.ushell.components.pages",type:"Component",id:"pages-component",options:{componentData:{},asyncHints:{preloadBundles:["sap/ushell/preload-bundles/homepage-af-dep.js"]}}},workpages:{name:r.last("/core/workPages/defaultComponent/name"),type:"Component",id:"workPageRuntime-component",options:r.last("/core/workPages/defaultComponent")},runtimeSwitcher:{name:"sap.ushell.components.runtimeSwitcher",type:"Component",id:"runtimeSwitcher-component",options:{componentData:{}}},wzsearch:{name:"sap.ushell.components.cepsearchresult.app",type:"Component",id:"cepsearchresult-app-component",options:{manifest:true,componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}}}}},init:function(){n.prototype.init.apply(this,arguments);const t=this.getRouter();["appfinder-legacy","home","appfinder","openFLPPage","openWorkPage","wzsearch"].forEach(e=>{t.getRoute(e).attachBeforeMatched(()=>{s.emit("trackHashChange",window.hasher.getHash())})});if(r.last("/core/homeApp/enabled")){this._getHomeAppTarget().then(function(e){t.getTargets().addTarget("homeapp",e);t.getTarget("homeapp").attachEventOnce("display",function(){s.emit("CoreResourcesComplementLoaded",{status:"success"})})})}t.getRoute("home").attachMatched(this._prepareHomepage,this);t.getRoute("openFLPPage").attachMatched(this._prepareHomepage,this);t.getRoute("openWorkPage").attachMatched(this._prepareHomepage,this);t.getRoute("appfinder-legacy").attachMatched(function(e){t.navTo("appfinder",{},true)});t.getRoute("appfinder").attachMatched(async function(n){if(!r.last("/core/catalog/enabled")){f.warning("AppFinder is disabled. Re-route to the homepage.");t.navTo("home",null,true);return}const o=e.getComponentById(this.createId("Shell-appfinder-component"));const s=n.getParameter("arguments");if(i.getRendererInternal("fiori2")){l.getShellUIService().setBackNavigation();i.getRendererInternal("fiori2").setCurrentCoreView("appFinder")}d.setCurrentApplication(null);const a=o.getRouter();o.getRootControl().loaded().then(function(){a.parse(s["innerHash*"]||"")});l.switchViewState(_.App,false,"Shell-appfinder");u.initializeAccessKeys()},this);t.getRoute("wzsearch").attachMatched(function(e){l.getShellUIService().setBackNavigation();l.switchViewState(_.App,false,"cepsearchresult-app")});const o=new p(c);o.setDefaultBindingMode("OneWay");this.setModel(o,"device");this.setModel(h.i18nModel,"i18n")}});U.prototype._prepareHomepage=function(e){if(d.getCurrentApplication()){i.getServiceAsync("ShellNavigationInternal").then(function(e){e.setIsInitialNavigation(false)})}const t=window.hasher.getHash();if(!r.last("/core/spaces/enabled")&&t.indexOf("Launchpad-openFLPPage")===0){i.getServiceAsync("ShellNavigationInternal").then(function(e){e.replaceHashWithoutNavigation("Shell-home")})}const n=r.last("/core/shell/homePageTitle");const o=h.getTranslationFromJSON(n)||h.i18n.getText("homeBtn_tooltip");const s=this.getShellConfig().rootIntent;const c=!s||a.isFlpHomeIntent(s);l.switchViewState(c?_.Home:_.App,false,"Shell-home");this.setCurrentCoreView("home");d.setCurrentApplication(null);l.getShellUIService().setTitle(o);l.getShellUIService().setHierarchy();l.getShellUIService().setRelatedApps();u.initializeAccessKeys()};U.prototype._getHomeAppTarget=function(){return i.getServiceAsync("Ui5ComponentLoader").then(function(e){const t=r.last("/core/homeApp/component");const n=e.getCoreResourcesComplementBundle();if(t.url){return{name:"rendererTargetWrapper",type:"Component",id:"homeApp-component-wrapper",path:"sap/ushell/renderer",options:{componentData:{componentId:"homeApp-component",name:t.name,url:t.url},asyncHints:Object.assign({},t.asyncHints||{},{preloadBundles:n})}}}return{name:"error",type:"Component",id:"homeApp-component",path:"sap/ushell/components/homeApp",options:{componentData:{},asyncHints:{preloadBundles:n}}}})};U.prototype.createContent=function(){const e=this.getComponentData()||{};const t={applications:{"Shell-home":{}},rootIntent:"Shell-home"};const n=R.getShellMode();if(e.config){if(e.config.rootIntent===undefined){e.config.migrationConfig=true}e.config=m(t,e.config);g(e.config.applications["Shell-home"],r.last("/core/home"),r.last("/core/catalog"));if([k,M,z].includes(n)){e.config.enablePersonalization=false;r.emit("/core/shell/enablePersonalization",false)}else{e.config.enablePersonalization=r.last("/core/shell/enablePersonalization")}if([j].includes(n)){e.config.showRecentActivity=false}else if(e.config.showRecentActivity===undefined){e.config.showRecentActivity=r.last("/core/shell/model/showRecentActivity")}r.emit("/core/shell/model/showRecentActivity",e.config.showRecentActivity);if(!e.config.enablePersonalization){e.config.moveEditHomePageActionToShellHeader=false;if(!e.config.enableAppFinder){e.config.moveAppFinderActionToShellHeader=false}}}if(!this.getComponentData().async){let t;f.error("sap/ushell/renderer/Renderer component is created synchronously. Synchronous instantiation is not allowed. Please use async:true in component data");(function(){t=this._createSyncContent(e)}).bind(this)();return t}return I.create({id:"mainShell",viewName:"module:sap/ushell/renderer/Shell.view",height:"100%",viewData:e}).then(function(e){e.addStyleClass("sapUshellRenderer");this._oShellView=e;this.shellCtrl=e.getController();P.init(e.getController());return e}.bind(this))};U.prototype._createSyncContent=function(e){const t=sap.ui.view("mainShell",{type:E.JS,viewName:"sap.ushell.renderers.fiori2.Shell",height:"100%",viewData:e});t.addStyleClass("sapUshellRenderer");this._oShellView=t;t.loaded().then(function(e){this.shellCtrl=e.oController;P.init(e.getController())}.bind(this));return t};U.prototype.createExtendedShellState=function(e,t){f.error("The function createExtendedShellState was deprecated  discontinued.")};U.prototype.applyExtendedShellState=function(e,t){f.error("The function applyExtendedShellState was discontinued.")};U.prototype.showLeftPaneContent=function(e,t,n){this._updateItemStates(e,t,n,"sidePane.items",L.Add)};U.prototype.showHeaderItem=function(e,t,n){const o=Array.isArray(e)?e:[e];const r=this._sanitizeStates(n);o.forEach(e=>{R.updateManagedControl(e,!t);if(t){R.updateCurrentState("header.headItems",L.Add,e);return}R.updateBaseStates(r,"header.headItems",L.Add,e)})};U.prototype.showRightFloatingContainerItem=function(e,t,n){this._updateItemStates(e,t,n,"rightFloatingContainer.items",L.Add)};U.prototype.showRightFloatingContainer=function(e){R.updateCurrentState("rightFloatingContainer.visible",L.Set,e)};U.prototype.showToolAreaItem=function(e,t,n){this._updateItemStates(e,t,n,"toolArea.items",L.Add)};U.prototype.showActionButton=function(e,n,o){const r=Array.isArray(e)?e:[e];const{buttons:i,actions:s}=r.reduce(function(e,n){const o=t.getElementById(n);const r=y.isObjectA(o,"sap.m.Button")&&!y.isObjectA(o,"sap.ushell.ui.launchpad.ActionItem");if(r){e.buttons.push(n)}else{e.actions.push(n)}return e},{buttons:[],actions:[]});if(i.length){this.convertButtonsToActions(i,n,o)}this._updateItemStates(s,n,o,"userActions.items",L.Add)};U.prototype.showFloatingActionButton=function(e,t,n){this._updateItemStates(e,t,n,"floatingActions.items",L.Add)};U.prototype.showHeaderEndItem=function(e,t,n){this._updateItemStates(e,t,n,"header.headEndItems",L.Add)};U.prototype._sanitizeStates=function(e){const t=Array.isArray(e)?e:[];const n=t.filter(e=>e!==undefined&&e!==null).filter(e=>{const t=Object.values(this.LaunchpadState).includes(e);if(!t){throw new Error(`Invalid launchpad state: ${e}`)}return t});if(n.length===0){return Object.values(this.LaunchpadState)}return n};U.prototype._updateItemStates=function(e,t,n,o,r){const i=Array.isArray(e)?e:[e];const s=this._sanitizeStates(n);i.forEach(e=>{R.updateManagedControl(e,!t);if(t){R.updateCurrentState(o,r,e);return}R.updateBaseStates(s,o,r,e)})};U.prototype.setHeaderVisibility=function(e,t,n){const o=this._sanitizeStates(n);if(t){R.updateCurrentState("header.visible",L.Set,e);return}R.updateBaseStates(o,"header.visible",L.Set,e)};U.prototype.showSubHeader=function(e,t,n){this._updateItemStates(e,t,n,"subHeader.items",L.Add)};U.prototype.showSignOutItem=function(e,t){this.showActionButton(["logoutBtn"],e,t)};U.prototype.showSettingsItem=function(e,t){this.showActionButton(["userSettingsBtn"],e,t)};U.prototype.setFooter=function(e){this.shellCtrl.setFooter(e)};U.prototype.setNavigationBar=function(e){this.shellCtrl.setNavigationBar(e)};U.prototype.setSideNavigation=function(e){this.shellCtrl.setSideNavigation(e)};U.prototype.setShellShapes=function(e){this.shellCtrl.setShellShapes(e)};U.prototype.setShellFooter=function(e){const n=new jQuery.Deferred;const o=this;let r;const i=e.controlType;const s=e.oControlProperties;if(!i){f.warning("You must specify control type in order to create it");n.reject("You must specify control type in order to create it");return n.promise()}if(!s){f.warning("You must specify control properties in order to create it");n.reject("You must specify control properties in order to create it");return n.promise()}const a=i.replace(/\./g,"/");sap.ui.require([a],function(e){r=t.getElementById(s.id);if(!r){r=new e(s)}if(o.lastFooterId){o.removeFooter()}o.lastFooterId=r.getId();o.shellCtrl.setFooter(r);n.resolve(r)});return n.promise()};U.prototype.setFooterControl=function(e,t){const n=e.replace(/\./g,"/");const o=sap.ui.require(n);let r=false;if(o){r=true}else if(!S.get(e||"")){f.error(`Renderer.setFooterControl: the referenced control resource ${e} is not available.`,undefined,"sap.ushell.renderer.Renderer");return undefined}const i=this.createItem(t,undefined,function(t){if(e){if(r){return new o(t)}const n=S.get(e||"");return new n(t)}f.warning("You must specify control type in order to create it");return undefined});if(this.lastFooterId){this.removeFooter()}this.lastFooterId=i.getId();this.shellCtrl.setFooter(i);return i};U.prototype.hideHeaderItem=function(e,t,n){this._updateItemStates(e,t,n,"header.headItems",L.Remove)};U.prototype.removeToolAreaItem=function(e,t,n){this._updateItemStates(e,t,n,"toolArea.items",L.Remove)};U.prototype.removeRightFloatingContainerItem=function(e,t,n){this._updateItemStates(e,t,n,"rightFloatingContainer.items",L.Remove)};U.prototype.hideActionButton=function(e,t,n){this._updateItemStates(e,t,n,"userActions.items",L.Remove)};U.prototype.hideLeftPaneContent=function(e,t,n){this._updateItemStates(e,t,n,"sidePane.items",L.Remove)};U.prototype.hideFloatingActionButton=function(e,t,n){this._updateItemStates(e,t,n,"floatingActions.items",L.Remove)};U.prototype.hideHeaderEndItem=function(e,t,n){this._updateItemStates(e,t,n,"header.headEndItems",L.Remove)};U.prototype.hideSubHeader=function(e,t,n){this._updateItemStates(e,t,n,"subHeader.items",L.Remove)};U.prototype.removeFooterById=function(e){if(e===this.shellCtrl.getFooterId()){this.shellCtrl.removeFooter()}const n=t.getElementById(e);if(n){n.destroy()}};U.prototype.removeFooter=function(){this.shellCtrl.removeFooter();if(this.lastFooterId){const e=t.getElementById(this.lastFooterId);if(e){e.destroy()}this.lastFooterId=undefined}};U.prototype.addShellSubHeader=function(e){const n=new jQuery.Deferred;const o=this;let r;const i=e.controlType;const s=e.oControlProperties;const a=e.bIsVisible;const l=e.bCurrentState;const c=e.aStates;if(!i){f.warning("You must specify control type in order to create it");n.reject("You must specify control type in order to create it");return n.promise()}if(!s){f.warning("You must specify control properties in order to create it");n.reject("You must specify control properties in order to create it");return n.promise()}const p=i.replace(/\./g,"/");sap.ui.require([p],function(e){r=t.getElementById(s.id);if(!r){r=new e(s);R.addManagedControl(r.getId(),!l)}if(a){o.showSubHeader(r.getId(),l,c)}n.resolve(r)});return n.promise()};U.prototype.addSubHeader=function(e,t,n,o,r){const i=this._sanitizeStates(r);const s=e.replace(/\./g,"/");const a=sap.ui.require(s);let l=false;if(a){l=true}else if(!S.get(e||"")){f.error(`Renderer.setFooterControl: the referenced control resource ${e} is not available.`,undefined,"sap.ushell.renderer.Renderer");return undefined}const c=this.createItem(t,o,function(t){if(e){if(l){return new a(t)}const n=S.get(e||"");return new n(t)}f.warning("You must specify control type in order to create it");return undefined});if(n){this.showSubHeader(c.getId(),o,i)}return c};U.prototype.addUserAction=function(e){const n=new jQuery.Deferred;const o=this;let{controlType:r}=e;const{oControlProperties:i,bIsVisible:s,bCurrentState:a,aStates:l}=e;if(!r){if(t.getElementById(i?.id)){r="sap.ushell.ui.launchpad.ActionItem"}else{const e="You must specify control type in order to create it";f.warning(e);n.reject(e);return n.promise()}}if(!i){const e="You must specify control properties in order to create it";f.warning(e);n.reject(e);return n.promise()}const c=r==="sap.m.Button"?"sap.ushell.ui.launchpad.ActionItem":r;const p=c.replace(/\./g,"/");sap.ui.require([p],e=>{let r=t.getElementById(i.id);if(!r){r=new e(i);R.addManagedControl(r.getId(),!a)}if(s){o.showActionButton(r.getId(),a,l)}n.resolve(r)},function(){const e=`The control type ${c} is not available.`;f.error(e);n.reject(e)});return n.promise()};U.prototype.addActionButton=function(e,t,n,o,r){const i=this._sanitizeStates(r);let s=false;if(e==="sap.m.Button"){e="sap.ushell.ui.launchpad.ActionItem"}const a=e.replace(/\./g,"/");const l=sap.ui.require(a);if(l){s=true}else if(!S.get(e||"")){f.error(`Renderer.setFooterControl: the referenced control resource ${e} is not available.`,undefined,"sap.ushell.renderer.Renderer");return undefined}const c=this.createItem(t,o,function(t){if(e){if(s){return new l(t)}const n=S.get(e||"");return new n(t)}f.warning("You must specify control type in order to create it");return undefined});if(n){this.showActionButton(c.getId(),o,i)}return c};U.prototype.addFloatingButton=function(e){const n=new jQuery.Deferred;const o=this;let r;const i=e.controlType||"sap.m.Button";const s=e.oControlProperties;const a=e.bIsVisible;const l=e.bCurrentState;const c=e.aStates;if(!s){f.warning("You must specify control properties in order to create it");n.reject("You must specify control properties in order to create it");return n.promise()}const p=i.replace(/\./g,"/");sap.ui.require([p],function(e){r=t.getElementById(s.id);if(!r){r=new e(s);R.addManagedControl(r.getId(),!l)}if(a){o.showFloatingActionButton(r.getId(),l,c)}n.resolve(r)});return n.promise()};U.prototype.addFloatingActionButton=function(e,t,n,o,r){const i=this._sanitizeStates(r);let s=false;if(!e){e="sap.m.Button"}const a=e.replace(/\./g,"/");const l=sap.ui.require(a);if(l){s=true}else if(!S.get(e||"")){f.error(`Renderer.setFooterControl: the referenced control resource ${e} is not available.`,undefined,"sap.ushell.renderer.Renderer");return undefined}const c=this.createItem(t,o,function(t){if(e){if(s){return new l(t)}const n=S.get(e||"");return new n(t)}f.warning("You must specify control type in order to create it");return undefined});if(n){this.showFloatingActionButton(c.getId(),o,i)}return c};U.prototype.addSidePaneContent=function(e){const n=new jQuery.Deferred;const o=this;let r;const i=e.controlType;const s=e.oControlProperties;const a=e.bIsVisible;const l=e.bCurrentState;const c=e.aStates;if(!i){f.warning("You must specify control type in order to create it");n.reject("You must specify control type in order to create it");return n.promise()}if(!s){f.warning("You must specify control properties in order to create it");n.reject("You must specify control properties in order to create it");return n.promise()}const p=i.replace(/\./g,"/");sap.ui.require([p],function(e){r=t.getElementById(s.id);if(!r){r=new e(s);R.addManagedControl(r.getId(),!l)}if(a){o.showLeftPaneContent(r.getId(),l,c)}n.resolve(r)});return n.promise()};U.prototype.addLeftPaneContent=function(e,t,n,o,r){const i=this._sanitizeStates(r);const s=e.replace(/\./g,"/");const a=sap.ui.require(s);let l;if(a){l=true}else if(!S.get(e||"")){f.error(`Renderer.setFooterControl: the referenced control resource ${e} is not available.`,undefined,"sap.ushell.renderer.Renderer");return undefined}const c=this.createItem(t,o,function(t){if(e){if(l){return new a(t)}const n=S.get(e||"");return new n(t)}f.warning("You must specify control type in order to create it");return undefined});if(n){this.showLeftPaneContent(c.getId(),o,i)}return c};U.prototype.addHeaderItem=function(e,t,n,o,i){if(typeof arguments[0]==="object"&&typeof arguments[1]==="boolean"){t=arguments[0];n=arguments[1];o=arguments[2];i=arguments[3]}else{f.error("sap.ushell.renderer.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!")}const s=this._sanitizeStates(i);const a=this.createItem(t,o,function(e){if(r.last("/core/shellBar/enabled")){const t=sap.ui.require("sap/ushell/thirdparty/ui5/webcomponents/Button");e={...e,click:e.press};delete e.press;return new t(e)}return new b(e)});if(n){this.showHeaderItem(a.getId(),o,s)}return a};U.prototype.addRightFloatingContainerItem=function(e,t,n,o){const r=this._sanitizeStates(o);const i=this.createItem(e,n,function(e){return new A(e).addStyleClass("sapUshellNotificationsListItem")});if(t){this.showRightFloatingContainerItem(i.getId(),n,r)}return i};U.prototype.addToolAreaItem=function(e,t,n,r){const i=this._sanitizeStates(r);if(t!==null){e.visible=!!t}function s(e){return new o(e)}const a=this.createItem(e,n,s);if(t){this.showToolAreaItem([a.getId()],n,i);if(n){const e=R.getLaunchpadState();this.showToolArea(e,true)}else{i.forEach(e=>{this.showToolArea(e,true)})}}return a};U.prototype.addHeaderEndItem=function(e,t,n,o,i){if(typeof arguments[0]==="object"&&typeof arguments[1]==="boolean"){t=arguments[0];n=arguments[1];o=arguments[2];i=arguments[3]}const s=this._sanitizeStates(i);const a=this.createItem(t,o,function(e){if(r.last("/core/shellBar/enabled")){e={...e,click:e.press};delete e.press;const t=sap.ui.require("sap/ushell/thirdparty/ui5/webcomponents-fiori/ShellBarItem");return new t(e)}return new b(e)});if(n){this.showHeaderEndItem(a.getId(),o,s)}return a};U.prototype.getModelConfiguration=function(){return this.shellCtrl.getModelConfiguration()};U.prototype.addEndUserFeedbackCustomUI=function(e,t){if(e||t){f.info("Application calls sap.ushell.Renderer.addEndUserFeedbackCustomUI. This function is deprecated. The call has no effect.")}};U.prototype.addUserPreferencesEntry=function(e){this.shellCtrl.addUserPreferencesEntry(e)};U.prototype.addUserPreferencesGroupedEntry=function(e){return this.shellCtrl.addUserPreferencesEntry(e,true)};U.prototype.setHeaderTitle=function(e){this.shellCtrl.setHeaderTitle(e)};U.prototype.setLeftPaneVisibility=function(e,t){if(!e){e=this.LaunchpadState.Home}R.updateBaseStates([e],"sidePane.visible",L.Set,t)};U.prototype.showToolArea=function(e,t){if(!e){e=this.LaunchpadState.Home}R.updateBaseStates([e],"toolArea.visible",L.Set,t)};U.prototype.setHeaderHiding=function(e){f.error("sap.ushell.Renderer.setHeaderHiding: Functionality was discontinued.")};U.prototype.setFloatingContainerContent=function(e,t,n){this._updateItemStates([e.getId()],t,n,"floatingContainer.items",L.Add)};U.prototype.setFloatingContainerVisibility=function(e){R.updateAllBaseStates("floatingContainer.visible",L.Set,e)};U.prototype.getFloatingContainerState=function(){return F.getModel().getProperty("/floatingContainer/state")};U.prototype.getFloatingContainerVisiblity=function(){return F.getModel().getProperty("/floatingContainer/visible")};U.prototype.getRightFloatingContainerVisibility=function(){return this.shellCtrl.getRightFloatingContainerVisibility()};U.prototype.setFloatingContainerDragSelector=function(e){R.updateAllBaseStates("floatingContainer.dragSelector",L.Set,e)};U.prototype.LaunchpadState={App:"app",Home:"home"};U.prototype.createTriggers=function(e,t,n){f.error("'createTriggers' was discontinued.")};U.prototype.convertButtonsToActions=function(e,n,o){const r=this._sanitizeStates(o);const i={};const s=this;e.forEach(function(e){const o=t.getElementById(e);i.id=o.getId();i.text=o.getText();i.icon=o.getIcon();i.tooltip=o.getTooltip();i.enabled=o.getEnabled();i.visible=o.getVisible();if(o.mEventRegistry&&o.mEventRegistry.press){i.press=o.mEventRegistry.press[0].fFunction}o.destroy();s.addActionButton("sap.ushell.ui.launchpad.ActionItem",i,i.visible,n,r)})};U.prototype.createItem=function(e,n,o){let r;if(e&&e.id){r=t.getElementById(e.id)}if(!r){r=o(e);R.addManagedControl(r.getId(),!n)}return r};U.prototype.addEntryInShellStates=function(e,t,n,o,r){f.error("'addEntryInShellStates' was deprecated and discontinued.")};U.prototype.removeCustomItems=function(e,t,n,o){f.error("'removeCustomItems' was deprecated and discontinued.")};U.prototype.addCustomItems=function(e,t,n,o){f.error("'addCustomItems' was deprecated and discontinued.")};U.prototype.addRightViewPort=function(e){};U.prototype.addLeftViewPort=function(e){};U.prototype.getShellController=function(){return this.shellCtrl};U.prototype.getViewPortContainerCurrentState=function(){return"Center"};U.prototype.ViewPortContainerNavTo=function(e,t,n){this.shellCtrl.getNavContainer().navTo(t)};U.prototype.switchViewPortStateByControl=function(){};U.prototype.ViewPortContainerAttachAfterSwitchStateAnimationFinished=function(){};U.prototype.setUserActionsMenuSelected=function(e){this.shellCtrl.setUserActionsMenuSelected(e)};U.prototype.setNotificationsSelected=function(e){this.shellCtrl.setNotificationsSelected(e)};U.prototype.addShellDanglingControl=function(e){this.shellCtrl.getView().addDanglingControl(e)};U.prototype.getShellConfig=function(){return this.shellCtrl.getView().getViewData()?this.shellCtrl.getView().getViewData().config||{}:{}};U.prototype.getEndUserFeedbackConfiguration=function(){return{}};U.prototype.reorderUserPrefEntries=function(e){return this.shellCtrl._reorderUserPrefEntries(e)};U.prototype.logRecentActivity=function(e){if(!e.appType){e.appType=T.APP}if(!e.appId){e.appId=e.url}return this.shellCtrl._logRecentActivity(e)};U.prototype.setCurrentCoreView=function(e){this.currentCoreView=e};U.prototype.getCurrentCoreView=function(){return this.currentCoreView};U.prototype._isBuiltInIntent=function(e){if(!U._aBuiltInRoutes){const e=this.getManifestEntry("/sap.ui5/routing/routes");U._aBuiltInRoutes=e.reduce(function(e,t){return e.concat(t.pattern)},[])}if(!e||!e.semanticObject||!e.action){return false}const t=`${e.semanticObject}-${e.action}`;return U._aBuiltInRoutes.indexOf(t)!==-1};this.addTopHeaderPlaceHolder=function(){};this.removeTopHeaderPlaceHolder=function(){};U.prototype.updateHeaderItem=function(e,n){const o=t.getElementById(e);if(o&&n){if(n.hasOwnProperty("floatingNumber")){o.setFloatingNumber(n.floatingNumber)}}};U.prototype.destroyButton=function(e){if(!e){return}const n=Array.isArray(e)?e:[e];n.forEach(function(e){const n=t.getElementById(e);if(n){n.destroy()}})};U.prototype.waitForShellLayout=function(){return this.shellCtrl.getView().waitForShellLayout()};U.prototype.destroy=function(){const e=this.shellCtrl?this.shellCtrl.awaitPendingInitializations():Promise.resolve();return e.then(function(){return n.prototype.destroy.apply(this,arguments)}.bind(this)).then(function(){v.destroyLayout()})};setTimeout(()=>{sap.ui.require(["sap/ushell/renderers/fiori2/Renderer"],function(){})},0);return U});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/Shell.controller", ["sap/ushell/renderer/History","sap/base/Log","sap/base/util/extend","sap/m/InstanceManager","sap/ui/core/Component","sap/ui/core/Element","sap/ui/core/EventBus","sap/ui/core/library","sap/ui/core/mvc/Controller","sap/ui/core/routing/HashChanger","sap/ui/core/routing/History","sap/ui/Device","sap/ui/performance/trace/Interaction","sap/ui/thirdparty/hasher","sap/ui/thirdparty/jquery","sap/ushell/appIntegration/AppLifeCycle","sap/ushell/appIntegration/PostMessageManager","sap/ushell/ApplicationType/UrlPostProcessing","sap/ushell/bootstrap/SchedulingAgent","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/performance/FesrEnhancer","sap/ushell/renderer/LogonFrameProvider","sap/ushell/resources","sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/utils/WindowUtils","sap/ushell/renderer/ShellLayout","sap/ushell/Container","sap/ushell/state/BackNavigation","sap/ushell/state/ShellModel","sap/ushell/state/StateManager","sap/ushell/renderers/fiori2/LogonFrameProvider","sap/ushell/renderers/fiori2/History","sap/ushell/ui5service/ShellUIServiceFactory"],(e,t,n,i,a,o,s,r,l,c,h,g,d,p,jQuery,u,f,y,m,v,w,b,S,C,_,I,A,H,N,E,T,P,M,F,D,R,L)=>{"use strict";const x=E.ShellArea;const B=r.routing.HistoryDirection;const U=b.AppType;const k=F.LaunchpadState;const O=F.Operation;const W=F.ShellMode;const{Standalone:$,Embedded:V,Minimal:z}=W;let j=true;let q=false;const K={embedded:0,newWindowThenEmbedded:1,newWindow:1,replace:0};const G={embedded:"embedded",newWindowThenEmbedded:"newWindowThenEmbedded",newWindow:"newWindow",replace:"replace"};let Q={};S.init();const X="Shell.controller";const Y="[FesrFlp]";return l.extend("sap.ushell.renderer.Shell",{_aDoables:[],addDoable:function(e){this._aDoables.push(e)},_aDanglingControls:[],addDanglingControl:function(e){this._aDanglingControls.push(e)},_aDanglingBindings:[],addDanglingBinding:function(e){this._aDanglingBindings.push(e)},removeDanglingBinding:function(e){const t=this._aDanglingBindings.findIndex(t=>t===e);if(t>-1){this._aDanglingBindings.splice(t,1)}},_aPendingInitializations:[],addPendingInitialization:function(e){this._aPendingInitializations.push(e);return e},awaitPendingInitializations:function(){const e=this._aPendingInitializations.length;return Promise.allSettled(this._aPendingInitializations).then(()=>{const t=this._aPendingInitializations.length;if(e<t){return this.awaitPendingInitializations()}})},onComponentTargetDisplay:function(e){const t=e.getParameters();const n=t.control;const i=t.object;if(this.bRestorePreviousHash){this.bRestorePreviousHash=false}n.navTo(i.getId())},onInit:function(){const t=a.getOwnerComponentFor(this.getView())?.getRouter();t.getTarget("home").attachDisplay(this.onComponentTargetDisplay,this);t.getTarget("appfinder").attachDisplay(this.onComponentTargetDisplay,this);t.getTarget("contentfinder").attachDisplay(this.onComponentTargetDisplay,this);t.getTarget("pages").attachDisplay(this.onComponentTargetDisplay,this);t.getTarget("workpages").attachDisplay(this.onComponentTargetDisplay,this);t.getTarget("runtimeSwitcher").attachDisplay(this.onComponentTargetDisplay,this);t.getTarget("wzsearch").attachDisplay(this.onComponentTargetDisplay,this);if(v.last("/core/homeApp/enabled")){t.getTarget("homeapp").attachDisplay(this.onComponentTargetDisplay,this)}t.oHashChanger=c.getInstance();t.initialize(true);this.bEnableHashChange=true;j=true;const n=this.getView();const i=n.getViewData()||{};const r=window.matchMedia("(min-width: 600px)");const l=i.config||{};n.setModel(this._getConfigModel(),"configModel");n.setModel(M.getModel(),"shellModel");this._bindTabTitle();this._bindContentDensity();v.emit("/core/shell/model/personalization",v.last("/core/shell/enablePersonalization"));function h(e){v.emit("/core/shell/model/isPhoneWidth",!e.matches)}if(r.addListener){r.addListener(h);h(r)}n.setModel(_.i18nModel,"i18n");s.getInstance().subscribe("externalSearch",this.externalSearchTriggered,this);s.getInstance().subscribe("sap.ushell","appOpened",this.onAppOpened,this);s.getInstance().subscribe("ESHSearchFinished",this._logSearchActivity,this);this._setConfigurationToModel();this._registerAndCreateEventHubDoables();L.attachBackNavigationChanged(this._onBackNavigationChanged,this);this.history=e;this.oNavContainer=o.getElementById("viewPortContainer");u.init(this.oNavContainer,l.disableHomeAppCache);Promise.all([T.getServiceAsync("ShellNavigationInternal"),T.getServiceAsync("AppLifeCycle")]).then(e=>{const n=e[0];this._oAppLifeCycleService=e[1];this._oAppLifeCycleService.init(this.oNavContainer);this._initShellNavigationInternal(n,this._oAppLifeCycleService,t)});T.setLogonFrameProvider(this._getLogonFrameProvider());if(g.system.desktop){sap.ui.require(["sap/ushell/renderer/AccessKeysHandler"],e=>{e.init()})}window.onbeforeunload=function(){if(T&&T.getDirtyFlag()&&!(g.browser.name===g.browser.BROWSER.INTERNET_EXPLORER&&u.getCurrentApplication().container.getApplicationType()==="NWBC")){if(!_.browserI18n){_.browserI18n=_.getTranslationModel(window.navigator.language).getResourceBundle()}return _.browserI18n.getText("dataLossExternalMessage")}return};if(Q.enableOnlineStatus){sap.ui.require(["sap/ushell/ui5service/UserStatus"],e=>{this.oUserStatus=new e({scopeObject:this.getOwnerComponent(),scopeType:"component"})})}if(!l.disableSignOut&&(l.sessionTimeoutTileStopRefreshIntervalInMinutes>0||l.sessionTimeoutReminderInMinutes>0)){this._createSessionHandler(l)}if(g.system.desktop){sap.ui.require(["sap/ushell/renderer/AccessKeysHandler"],e=>{n.waitForShellLayout().then(()=>{const t=document.getElementById(x.NavigationBar);t.addEventListener("focusin",()=>{e.bFocusOnShell=false;e.bFocusPassedToExternalHandlerFirstTime=false});t.addEventListener("focusout",()=>{e.bFocusOnShell=true;e.bFocusPassedToExternalHandlerFirstTime=true});const n=document.getElementById(x.RendererRootView);n.addEventListener("focusin",()=>{e.bFocusOnShell=false;e.bFocusPassedToExternalHandlerFirstTime=false});n.addEventListener("focusout",()=>{e.bFocusOnShell=true;e.bFocusPassedToExternalHandlerFirstTime=true})})})}},_initShellNavigationInternal:function(e,t,n){this.oShellNavigationInternal=e;this.oShellNavigationInternal.registerPrivateFilters(t);this.oShellNavigationInternal.registerExtraRouter(n);this.oShellNavigationInternal.registerNavigationFilter(this._handleEmptyHash.bind(this));this.oShellNavigationInternal.init(this.doHashChange.bind(this));this.oShellNavigationInternal.registerNavigationFilter(this._disableSourceAppRouter.bind(this));this.oShellNavigationInternal.registerNavigationFilter(this.handleDataLoss.bind(this));this.oShellNavigationInternal.registerNavigationFilter(this._unblockUI.bind(this));u.registerHandleHashChange(this.oShellNavigationInternal);w.emit("ShellNavigationInitialized",Date.now())},_bindContentDensity:function(){const e=M.getModel().bindProperty("/application/contentDensity");function t(){const t=e.getValue();const n=t==="compact";document.body.classList.toggle("sapUiSizeCompact",n);document.body.classList.toggle("sapUiSizeCozy",!n)}t.call(this);e.attachChange(t);this._aDanglingBindings.push(e)},_bindTabTitle:function(){const e=M.getModel().bindProperty("/application/title");const t=M.getModel().bindProperty("/application/titleAdditionalInformation");function n(){const e=this._calculateWindowTitle();if(e){I.setWindowTitle(e)}}n.call(this);e.attachChange(n.bind(this));t.attachChange(n.bind(this));this._aDanglingBindings.push(e);this._aDanglingBindings.push(t)},_calculateWindowTitle:function(){let e="";const t=M.getModel().getProperty("/application/title")||"";const n=M.getModel().getProperty("/application/titleAdditionalInformation");if(n?.searchTerm){if(n.searchScope){e=_.i18n.getText("titleWindowSearchTermWithScope",[n.searchTerm,n.searchScope])}else{e=_.i18n.getText("titleWindowSearchTerm",[n.searchTerm])}}else if(n?.headerText&&n?.additionalContext){e=_.i18n.getText("titleWindow",[n.headerText,n.additionalContext])}else{e=n?.headerText||n?.additionalContext||t}return e},_getConfigModel:function(){return M.getConfigModel()},getNavContainer:function(){return o.getElementById("viewPortContainer")},_registerAndCreateEventHubDoables:function(){[w.once("CenterViewPointContentRendered").do(this._loadCoreExt.bind(this)),w.once("PagesRuntimeRendered").do(this._loadCoreExt.bind(this)),w.once("AppRendered").do(this._loadCoreExtNonUI5.bind(this)),w.once("CoreResourcesComplementLoaded").do(this._onCoreResourcesComplementLoaded.bind(this)),w.once("loadRendererExtensions").do(this._loadRendererExtensionPlugins.bind(this)),w.once("loadWarmupPlugins").do(this._loadWarmupPlugins.bind(this)),w.once("loadTrackingActivitiesSetting").do(this._loadTrackingActivitiesSetting.bind(this)),w.once("initMessagePopover").do(this._initializeMessagePopover.bind(this))].forEach(e=>{this.addDoable(e)});this.addDoable(w.on("toggleContentDensity").do(this.toggleContentDensity.bind(this)))},_onBackNavigationChanged:async function(e){const t=e.getParameters().data;const n=F.getShellMode();const i=F.getLaunchpadState();if(t){P.setNavigateBack(t);if(i===k.App&&[z,$,V].includes(n)){T.getRendererInternal("fiori2").showHeaderItem("backBtn",true)}}else{P.resetNavigateBack()}},toggleContentDensity:function(e){const t=e.contentDensity==="compact";return f.sendRequestToAllApplications("sap.ushell.appRuntime.uiDensityChange",{isTouch:t?"0":"1"},false)},_handleEmptyHash:function(e){e=typeof e==="string"?e:"";e=e.split("?")[0];if(e.length===0){const e=this.getView()?this.getView().getViewData():{};Q=e.config||{};if(Q.migrationConfig){return this.oShellNavigationInternal.NavigationFilterStatus.Continue}if(Q.rootIntent){window.setTimeout(()=>{window.hasher.setHash(Q.rootIntent)},0);return this.oShellNavigationInternal.NavigationFilterStatus.Abandon}}return this.oShellNavigationInternal.NavigationFilterStatus.Continue},_unblockUI:function(){o.getElementById("shell-header")?.setBlocked?.(false);o.getElementById("menubar")?.setBlocked?.(false);return this.oShellNavigationInternal.NavigationFilterStatus.Continue},_notifyAsyncStep:function(){return d.notifyAsyncStep()},_setConfigurationToModel:function(){const e=this.getView().getViewData();if(e){Q=e.config||{}}if(Q){if(Q.states){t.error("The 'states' configuration was discontinued")}if(Q.enableSetTheme!==undefined){this._getConfigModel().setProperty("/setTheme",Q.enableSetTheme)}this._getConfigModel().setProperty("/contentDensity",Q.enableContentDensity===undefined?true:Q.enableContentDensity);if(Q.migrationConfig!==undefined){this._getConfigModel().setProperty("/migrationConfig",Q.migrationConfig)}if(Q.enableUserDefaultParameters!==undefined){this._getConfigModel().setProperty("/userDefaultParameters",Q.enableUserDefaultParameters)}if(Q.disableHomeAppCache!==undefined){this._getConfigModel().setProperty("/disableHomeAppCache",Q.disableHomeAppCache)}this._getConfigModel().setProperty("/enableHelp",v.last("/core/extension/enableHelp"));this._getConfigModel().setProperty("/searchAvailable",Q.enableSearch!==false);if(Q.title!==undefined){this.setHeaderTitle(Q.title)}}},_loadTrackingActivitiesSetting:async function(e){try{let t=await this._getPersData({container:"flp.settings.FlpSettings",item:"userActivitesTracking"});if(t===undefined){t=true}this._getConfigModel().setProperty("/enableTrackingActivity",t);w.emit("StepDone",e.stepName)}catch(n){t.error("Failed to load tracking activities state from the personalization, tracking activities is disabled",n,"sap.ushell.components.flp.settings.FlpSettings");this._getConfigModel().setProperty("/enableTrackingActivity",false);w.emit("StepDone",e.stepName)}},_getPreviousPageDirty:function(){return q},_setPreviousPageDirty:function(e){q=e},getModelConfiguration:function(){const e=this.getView().getViewData();let t;if(e){const i=e.config||{};t=n({},i)}delete t.applications;return t},_getLogonFrameProvider:function(){return C},onExit:function(){j=true;this._aDoables.forEach(e=>{e.off()});this._aDoables=[];L.detachBackNavigationChanged(this._onBackNavigationChanged,this);this._aDanglingControls.forEach(e=>{e.destroy()});this._aDanglingControls=[];this._aDanglingBindings.forEach(e=>{e.destroy()});this._aDanglingBindings=[];s.getInstance().unsubscribe("externalSearch",this.externalSearchTriggered,this);s.getInstance().unsubscribe("ESHSearchFinished",this._logSearchActivity,this);s.getInstance().unsubscribe("sap.ushell","appOpened",this.onAppOpened,this);if(this.oShellNavigationInternal&&this.oShellNavigationInternal.hashChanger){this.oShellNavigationInternal.hashChanger.destroy()}sap.ui.require("sap/ushell/UserActivityLog")?.deactivate();F.destroy(true);u.reset?.()},_getCurrentAppRouter:function(){const e=this._oAppLifeCycleService;const t=e&&e.getCurrentApplication&&e.getCurrentApplication();const n=t&&t.componentInstance;if(n){return n.getRouter()}return null},_disableSourceAppRouter:function(e,t){if(!this.bEnableHashChange||this.bRestorePreviousHash){return this.oShellNavigationInternal.NavigationFilterStatus.Continue}const n=this.oShellNavigationInternal.hashChanger.isInnerAppNavigation(e,t);if(!n){const e=this._getCurrentAppRouter();if(e&&e.isInitialized()){e.stop()}}return this.oShellNavigationInternal.NavigationFilterStatus.Continue},_resumeAppRouterIgnoringCurrentHash:function(){const e=this._getCurrentAppRouter();if(e){e.initialize(true)}},handleDataLoss:function(e,t){const n=this.oShellNavigationInternal.hashChanger;const i=n.getReloadApplication();if(this.bReloadApplication!==null&&this.bReloadApplication!==undefined){n.setReloadApplication(this.bReloadApplication);this.bReloadApplication=null}if(t===""||p.disableBlueBoxHashChangeTrigger===true){return this.oShellNavigationInternal.NavigationFilterStatus.Continue}if(!this.bEnableHashChange&&!this.bRedoNavigation){this.bEnableHashChange=true;return this.oShellNavigationInternal.NavigationFilterStatus.Custom}if(this.bRestorePreviousHash){return this.oShellNavigationInternal.NavigationFilterStatus.Continue}if(this.bRedoNavigation){this.bRedoNavigation=false;this.bEnableHashChange=true;this.bExplaceNavigation=false;return this.oShellNavigationInternal.NavigationFilterStatus.Continue}const a=H.parseShellHash(e);const o=T.getRendererInternal()._isBuiltInIntent(a);const s=a.params["sap-ushell-navmode"];const r=s&&s[0];if(!o&&(this.bExplaceNavigation||r==="explace"||r==="frameless")){this.bExplaceNavigation=false;return this.oShellNavigationInternal.NavigationFilterStatus.Continue}const l=T.getDirtyFlag();const c=T.isAsyncDirtyStateProviderSet();if(!c&&!l){q=l;return this.oShellNavigationInternal.NavigationFilterStatus.Continue}const g=h.getInstance().getHistoryStateOffset()<0;this._oLastDataLossPromise=Promise.all([this._waitForHash(t),T.getServiceAsync("NavTargetResolutionInternal"),T.getDirtyFlagsAsync()]).then(async t=>{const n=t[1];const a=t[2];q=a;if(!a){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");return}if(o){if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo")}return}const s=`#${e}`;try{const t=await n.resolveHashFragment(s);const a=t.targetNavigationMode==="explace"||t.targetNavigationMode==="frameless";const o=g&&t.navigationMode===G.newWindowThenEmbedded;if(a&&!o){this.bExplaceNavigation=true;this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo")}else if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this.bReloadApplication=i;this._restoreHashUsingAction(e,"redo")}}catch{this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo")}});return this._restoreHashUsingAction(t,"undo")},_waitForHash:function(e){const t=`#${e}`;return new Promise(e=>{function n(){const i=t===decodeURIComponent(window.location.hash);if(i){window.removeEventListener("hashchange",n);e()}}window.addEventListener("hashchange",n)})},_handleDirtyStateUserConfirm:function(){t.debug(`${Y} Interaction Start`,"_handleDirtyStateUserConfirm",X);const e=this._notifyAsyncStep();if(window.confirm(_.i18n.getText("dataLossInternalMessage"))){T.setDirtyFlag(false);t.debug(`${Y} Interaction End`,"_handleDirtyStateUserConfirm",X);e();q=true;return true}t.debug(`${Y} Interaction End`,"_handleDirtyStateUserConfirm",X);e();return false},_restoreHashUsingAction:function(e,t){const n=this.oShellNavigationInternal.wasHistoryEntryReplaced();const i=this._getRestoreHashStrategy(n,t);this._resumeAppRouterIgnoringCurrentHash();return this._restoreHash(i,e)},_getRestoreHashStrategy:function(e,t){if(e){return{strategy:"replaceHash",stepCount:0}}let n;let i=h.getInstance().getHistoryStateOffset();if(i===undefined||i>=0){i=1}else if(i<0){i=-1}if(t==="undo"){if(i<0){n="historyForward"}else{n="historyBack"}this.sLastUndoStrategy=n}else{switch(this.sLastUndoStrategy){case"historyBack":n="historyForward";break;case"historyForward":n="historyBack";break;default:n="replaceHash"}}return{strategy:n,stepCount:1}},_restoreHash:function(e,t){const n={status:this.oShellNavigationInternal.NavigationFilterStatus.Custom,hash:""};switch(e.strategy){case"historyBack":this.bEnableHashChange=false;this._windowHistoryBack(e.stepCount);break;case"historyForward":this.bEnableHashChange=false;this._windowHistoryForward(e.stepCount);break;case"replaceHash":this.bEnableHashChange=false;p.replaceHash(t);break;default:throw new Error("Cannot execute unknown navigation strategy")}return n},_setEnableHashChange:function(e){this.bEnableHashChange=e},_logRecentActivity:async function(e){if(!this.oInitialEnableTrackingPromise){if(v.last("/core/shell/model/enableTrackingActivity")!==undefined){this.oInitialEnableTrackingPromise=Promise.resolve()}else{this.oInitialEnableTrackingPromise=new Promise(e=>{v.once("/core/shell/model/enableTrackingActivity").do(e)})}}await this.oInitialEnableTrackingPromise;if(v.last("/core/shell/model/enableTrackingActivity")){const t=await T.getServiceAsync("UserRecents");return t.addActivity(e)}t.warning("Tracking is not enabled",null,"sap.ushell.renderer.Shell.controller");throw new Error("Tracking is not enabled")},doHashChange:function(e,n,i,a,s){t.debug(`${Y} Interaction Start`,"doHashChange",X);A.setPerformanceMark("FLP-ShellController-doHashChange-begin");w.emit("trackHashChange",e);const r=new jQuery.Deferred;this._bWasHistoryEntryReplaced=this.oShellNavigationInternal.wasHistoryEntryReplaced();this.oShellNavigationInternal.resetHistoryEntryReplaced();if(!this.bEnableHashChange){this.bEnableHashChange=true;r.resolve();return r.promise()}if(this.bRestorePreviousHash){this.bRestorePreviousHash=false;r.resolve();return r.promise()}const l=H.ensureLeadingHash(e);const c=H.ensureLeadingHash(i);if(s){t.error(`Error when parsing the hash: '${l}'`,s);this.hashChangeFailure(this.history.getHistoryLength(),s.message,null,"sap.ushell.renderer.Shell.controller",false).then(r.resolve.bind(r)).catch(r.reject.bind(r));return r.promise()}const h=o.getElementById("sapUshellDashboardPage");if(h){h.setBlocked(true);h.setBusy(true)}const g=this._notifyAsyncStep();this._doHashChange(l,n,c).catch(()=>{w.emit("doHashChangeError",Date.now())}).finally(()=>{t.debug(`${Y} Interaction End`,"doHashChange",X);g();if(h){h.setBlocked(false);h.setBusy(false)}r.resolve()});return r.promise()},_doHashChange:async function(e,n,i){const a=this.history.getHistoryLength();this.history.hashChange(e,i);const o=I.getCurrentApplication();try{const s=await this._resolveHashFragment(e);if(!s&&window.QUnit!==undefined){return}const r=s.resolvedHashFragment;const l=s.parsedShellHash;if(r.navigationMode===null){if(A.isColdStart()){window.hasher.setHash("");return}this.bEnableHashChange=false;this.history.pop();this._windowHistoryBack(1);return}await u.storeAppExtensions();F.stallChanges();const c=await this._openAppViaNWBC(r,o);if(c===true){this.logOpenAppAction(r,n).catch(()=>{t.info("NWBC application was not logged.",undefined,"sap.ushell.renderer.Shell.controller")});F.applyStalledChanges();return}if(r.navigationMode===G.newWindow){this.logOpenAppAction(r,n).catch(()=>{t.info("Application in new window was not logged.",undefined,"sap.ushell.renderer.Shell.controller")});await this._openAppExplace(r,o);F.applyStalledChanges();return}const h=this._rewriteRootIntentForMigrationConfig(r,e);if(h){F.applyStalledChanges();return}try{const s=this.oShellNavigationInternal.isInitialNavigation();try{await this._openAppInplace(l,e,r,i,n,o)}catch(n){t.error(`Application initialization for intent "${e}" failed.`,n);const i=I.getMetadata(r);this.oShellNavigationInternal.setIsInitialNavigation(s);await this.hashChangeFailure(a,n.name,n.message,i?i.title:"",false)}}catch(n){t.error("Failed to open application",n,"sap.ushell.renderer.Shell.controller");const i=_.i18n.getText("cannot_load_ui5_component_details",[e]);const s=`Failed to load UI5 component for navigation intent "${e}"`;I.setCurrentApplication(o);await this.hashChangeFailure(a,{title:_.i18n.getText("error"),message:_.i18n.getText("failed_to_open_ui5_component"),technicalMessage:s},{info:i,technicalMessage:`${n.message}\n${n.stack}`},"sap.ushell.renderer.Shell.controller",false)}}catch(n){t.error("Hash change handling failed. Could not open app.",n,"sap.ushell.renderer.Shell.controller");const i=_.i18n.getText("cannot_resolve_navigation_target_details",[e]);const o=`Failed to resolve navigation target "${e}". This is most likely caused by an incorrect SAP Fiori launchpad content configuration or by missing role assignment.`;await this.hashChangeFailure(a,{title:_.i18n.getText("error"),message:_.i18n.getText("failed_to_open_app_missing_configuration_or_role_assignment"),technicalMessage:o},{info:i,fixedShellHash:e,technicalMessage:n.message},"sap.ushell.renderer.Shell.controller",false);throw n}},_rewriteRootIntentForMigrationConfig:function(e,t){if(v.last("/core/shell/model/migrationConfig")){Q.migrationConfig=false;this._getConfigModel().setProperty("/migrationConfig",false);if(e&&t==="#"){Q.rootIntent=""}else if(t==="#"){window.setTimeout(()=>{window.hasher.setHash(Q.rootIntent)},0);return true}}return false},_openAppExplace:async function(e,t){e.url=y.processUrl(e.url,e.applicationType,true,undefined);u.publishAppOpeningEvent(e);const n=N.openURL(e.url);if(!n&&!this._checkWindowLocationSearch("workzone-mobile-app=true")){const e=_.i18n.getText("fail_to_start_app_popup_blocker",[window.location.hostname]);this.delayedMessageError(e)}u.publishAppOpenedEvent(e);this._restorePreviousHashAfterOpenNewWindow(e,t)},_closeAllDialogs:function(){if(i&&j){i.closeAllDialogs();i.closeAllPopovers()}j=true},_resolveHashFragment:async function(e){const n=H.parseShellHash(e)||{};const i=this._getConfig();let a;if(window["sap-ushell-async-libs-promise-directstart"]){try{const e=await window["sap-ushell-async-libs-promise-directstart"];delete window["sap-ushell-async-libs-promise-directstart"];a=e.resolvedHashFragment}catch(e){delete window["sap-ushell-async-libs-promise-directstart"];throw e}}else{const t=await T.getServiceAsync("NavTargetResolutionInternal");a=await A.promisify(t.resolveHashFragment(e))}if(!a&&window.QUnit!==undefined&&!window._bTestNullNavigationMode){return}if(!a){a={navigationMode:null}}I.setCurrentApplication(a);const o=H.getBasicHash(e);if(i?.applications?.[o]){a.applicationConfiguration=i.applications[o]}a.sFixedShellHash=e;if(`${n.semanticObject}-${n.action}`===i.rootIntent){a.navigationMode=G.embedded}if(a.navigationMode!==null&&!a.navigationMode){t.error("Mandatory member 'navigationMode' is missing in the resolution result! Temporarily set to 'embedded' for further processing...","sap.ushell.renderer.Shell.controller");a.navigationMode=G.embedded}this._setEffectiveNavigationMode(a);A.setPerformanceMark("FLP-ShellController-resolveHashFragment-end");return{resolvedHashFragment:a,parsedShellHash:n}},_setEffectiveNavigationMode:function(e){if(!e){return}const t=e.navigationMode;if(t===G.newWindowThenEmbedded){if(A.isColdStart()||h.getInstance().getDirection()===B.Backwards){e.navigationMode=G.embedded}else{e.navigationMode=G.newWindow;if(!A.isNativeWebGuiNavigation(e)){e.applicationType="URL";e.url=this._getCurrentLocationHash()}}return}if(t===G.newWindow&&A.isColdStart()){if(this._hasAppCapabilitiesNavigationMode(e)&&e.appCapabilities.navigationMode===G.embedded){e.navigationMode=G.embedded;return e}e.navigationMode=G.replace;return}if(t===G.newWindow&&this._hasAppCapabilitiesNavigationMode(e)&&e.appCapabilities.navigationMode===G.embedded){e.url=this._getCurrentLocationHash()}},_hasAppCapabilitiesNavigationMode:function(e){return A.isPlainObject(e.appCapabilities)&&e.appCapabilities.hasOwnProperty("navigationMode")},_openAppInplace:async function(e,n,i,a,o,s){this._closeAllDialogs();const r=i.navigationMode;if(r===G.replace){this.oShellNavigationInternal.setIsInitialNavigation(false);this.bEnableHashChange=false;this._changeWindowLocation(i.url);return}if(r!==G.embedded){return this.hashChangeFailure(this.history.getHistoryLength(),`Navigation mode '${r}' was not recognized`,null,"sap.ushell.renderer.Shell.controller",false)}i.targetNavigationMode=A.isColdStart()?"explace":"inplace";if(!A.isColdStart()&&!this._bWasHistoryEntryReplaced){this.oShellNavigationInternal.setIsInitialNavigation(false)}u.resetGlobalShellUIService();const l=H.getBasicHash(n);const c=this._isFLPIntent(a);const h=!!o;const g=await u.startApplication(l,e,i,c,h);const d=g.getNavigationRedirectHash();if(typeof d==="string"){t.warning(`Performing navigation redirect to hash "${d}"`);this.history.pop();const e=await T.getServiceAsync("ShellNavigationInternal");return e.toExternal({target:{shellHash:d}},undefined,false)}const p=this._getConfig();const f=n==="#"||p.rootIntent&&l===H.getBasicHash(p.rootIntent);g.navTo(f);const y=I.getMetadata(i);w.emit("CloseFesrRecord",{time:Date.now(),technicalName:y.technicalName});return},_openAppViaNWBC:async function(e,n){const i=e&&(A.isNativeWebGuiNavigation(e)||e.nativeNWBCNavigation);if(!i){return false}const a=A.getPrivateEpcm();const o=K[e.navigationMode];let s;if(A.hasNavigationModeCapability()){s=o||K[G.embedded]}const r=await this._appendUserIdToUrl("sap-user",e.url);const l=await A.appendSapShellParam(r);const c=e.applicationType;const h=e?.appCapabilities?.appFrameworkId;let g;try{if(A.isSAPLegacyApplicationType(c,h)){const t=Object.create(null);const n=await T.getServiceAsync("Navigation");const i=A.getParamKeys(l);if(i.aAppStateNamesArray.length>0){const e=await n.getAppStateData(i.aAppStateKeysArray);i.aAppStateNamesArray.forEach((n,i)=>{if(e[i]){t[n]=e[i]}})}t["sap-flp-url"]=T.getFLPUrl(true);t["system-alias"]=e.systemAlias;g=[{name:"sap-flp-params",value:JSON.stringify(t)}]}}catch{}try{u.publishAppOpeningEvent(e);if(!a.doNavigate(l,s,undefined,undefined,undefined,undefined,undefined,g)){return false}u.publishAppOpenedEvent(e);await this._restoreAfterNwbcNavigation(e,n);if(this._oAppLifeCycleService.getCurrentApplication()&&this._oAppLifeCycleService.getCurrentApplication().homePage){this._setMenuVisible(true);this._setSideNavigationVisible(true)}return true}catch(n){if(n.stack){t.error(`Application initialization failed due to an Exception:\n${n.stack}`)}await this.hashChangeFailure(this.history.getHistoryLength(),n.name,n.message,e.text,false);return false}},_restoreAfterNwbcNavigation:async function(e,t){if(this.history.getHistoryLength()===1&&!this._oAppLifeCycleService.getCurrentApplication()){const e=await T.getServiceAsync("Navigation");e.navigate({target:{shellHash:"#"},writeHistory:false});return}this._restorePreviousHashAfterOpenNewWindow(e,t)},_appendUserIdToUrl:async function(e,t){const n=await T.getServiceAsync("UserInfo");const i=n.getUser().getId();const a=t.indexOf("?")>=0?"&":"?";return`${t+a+e}=${i}`},_restorePreviousHashAfterOpenNewWindow:function(e,t){this.history.pop();const n=e.componentHandle&&e.componentHandle.getInstance&&e.componentHandle.getInstance({});if(n){n.destroy()}this._resumeAppRouterIgnoringCurrentHash();this.bRestorePreviousHash=true;this._windowHistoryBack(1);I.setCurrentApplication(t);w.emit("openedAppInNewWindow",Date.now())},_isShellHomeIntent:function(e){return e==="#"||e===Q.rootIntent},hashChangeFailure:async function(e,t,n,i,a){F.discardStalledChanges();if(A.isPlainObject(t)){this.reportError(t.technicalMessage,n.technicalMessage,i);const e=await T.getServiceAsync("MessageInternal");e.show(e.Type.ERROR,t.message,{title:t.title,details:n})}else{this.reportError(t,n,i);this.delayedMessageError(_.i18n.getText("fail_to_start_app_try_later"))}j=false;this._resumeAppRouterIgnoringCurrentHash();if(e===0){window.hasher.setHash("")}else if(new URLSearchParams(window.location.search).get("bFallbackToShellHome")){window.hasher.setHash("")}else{this.bEnableHashChange=a;T.setDirtyFlag(q);this._windowHistoryBack(1)}},reportError:function(e,n,i){t.error(e,n,i)},delayedMessageError:async function(e){try{await A.awaitTimeout(0);const t=await T.getServiceAsync("MessageInternal");t.error(e)}catch{}},_checkWindowLocationSearch:function(e){return window.location.search.indexOf(e)>-1},_windowHistoryBack:function(e){window.history.go(-1*e)},_windowHistoryForward:function(e){window.history.go(e)},_changeWindowLocation:function(e){window.location.href=e},_setMenuVisible:function(e){const t=document.getElementById(x.NavigationBar);if(!t){return}e=e||v.last("/core/menu/enabled")&&v.last("/core/menu/visibleInAllStates");t.classList.toggle("sapUshellShellHidden",!e)},_setSideNavigationVisible:function(e){const t=document.getElementById(x.SideNavigation);if(!t){return}e=e||v.last("/core/sideNavigation/enabled")&&v.last("/core/sideNavigation/mode")==="Docked";t.classList.toggle("sapUshellShellHidden",!e)},onAppOpened:function(e,n,i){if(i.targetNavigationMode!=="explace"&&i.targetNavigationMode!=="frameless"){this._setMenuVisible(false)}this._setSideNavigationVisible(true);const a=this.oShellNavigationInternal.hashChanger.getAppHash();const o=a?`&/${a}`:null;this.logOpenAppAction(i,o).catch(()=>{t.info("Opened application was not logged.",undefined,"sap.ushell.renderer.Shell.controller")});this._notifyUITracer(i)},externalSearchTriggered:function(e,t,n){v.emit("/core/shell/model/searchTerm",n.searchTerm);n.query=n.searchTerm},onBeforeNavigate:function(e){const t=e.getParameter("to");const n=this.getOwnerComponent();const i=t===n.byId("Shell-home-component-container");const a=t===n.byId("pages-component-container");const o=t===n.byId("homeApp-component-wrapper-container");const s=t===n.byId("homeApp-component-container");const r=t===n.byId("workPageRuntime-component-container");const l=t===n.byId("runtimeSwitcher-component-container");const c=i||a||o||s||r||l;this._setMenuVisible(c);this._setSideNavigationVisible(c)},onAfterNavigate:function(e){const t=o.getElementById("sapUshellDashboardPage");if(t){t.setBlocked(false);t.setBusy(false)}s.getInstance().publish("sap.ushell","navigated",{})},logOpenAppAction:async function(e,t){const n=v.last("/core/shell/enableRecentActivity")&&v.last("/core/shell/enableRecentActivityLogging");if(!n){throw new Error("Tracking of RecentActivity is disabled.")}const i=I.getMetadata(e);const a=e.sFixedShellHash||this._getCurrentLocationHash();const o={title:i.title,appType:U.APP,url:t?a+t:a};const s=H.parseShellHash(a);if(s){o.appId=`#${H.constructShellHash({semanticObject:s.semanticObject,action:s.action})}`}else{o.appId=a}if(a&&a.indexOf("#Action-search")===-1&&a.indexOf("#Shell-startIntent")===-1){await A.awaitTimeout(1500);await this._logRecentActivity(o);return}throw new Error("RecentActivity was not logged.")},_notifyUITracer:function(e){try{const t=e.reservedParameters?.["sap-fiori-id"]?.[0]||e.reservedParameters?.["sap-ui-app-id-hint"]?.[0]||e.ui5ComponentName;w.emit("UITracer.trace",{reason:"NavigateApp",source:"Intent",data:{applicationId:t||"",applicationType:e.applicationType||"",hash:e.sFixedShellHash||"",targetNavigationMode:e.targetNavigationMode||"",providerId:e.contentProviderId||"",targetUrl:e.url||""}})}catch(e){t.warning("Could not emit UITracer.trace event",e,"sap.ushell.renderer.Shell.controller")}},_logSearchActivity:function(){if(v.last("/core/shell/enableRecentActivity")&&v.last("/core/shell/enableRecentActivityLogging")){let e="";try{e=o.getElementById("searchFieldInShell-input").getModel().getLastSearchTerm()}catch(e){t.error("Shell: last search term is not available to log a recent activity")}this._logRecentActivity({appId:"#Action-search",appType:U.SEARCH,title:e,url:`#${window.hasher.getHash()}`}).catch(()=>{t.info("Search activity was not logged.",undefined,"sap.ushell.renderer.Shell.controller")})}},_loadCoreExtNonUI5:function(e){if(e&&e.applicationType!=="SAPUI5"){this._loadCoreExt()}},_onCoreResourcesComplementLoaded:function(){A.setPerformanceMark("SchedulingAgent-StartOfFlow");const e=this.getView();if(e){e.createPostCoreExtControls()}m._initialize();w.emit("startScheduler")},_loadRendererExtensionPlugins:async function(e){const t=new URLSearchParams(window.location.search);const n=t.get("sap-ushell-xx-pluginmode")==="delayed";const i=await T.getServiceAsync("PluginManager");if(n){await A.awaitTimeout(5e3)}i.loadPlugins("RendererExtensions").always(function t(){w.emit("StepDone",e.stepName)})},_loadWarmupPlugins:async function(e){const n=await T.getServiceAsync("PluginManager");n.loadPlugins("AppWarmup").always(()=>{t.debug("WARMUP plugins loaded",null,"sap.ushell.renderer.Shell");w.emit("StepDone",e.stepName);A.setPerformanceMark("SchedulingAgent-EndOfFlow");A.setPerformanceMeasure("SchedulingAgentTotalTime","SchedulingAgent-StartOfFlow","SchedulingAgent-EndOfFlow")})},_loadCoreExt:async function(){await T.getServiceAsync("Ui5ComponentLoader");w.emit("loadCoreResourcesComplement",Date.now())},getRightFloatingContainerVisibility:function(){const e=this.getView().getRightFloatingContainer();return e&&e.getVisible()},setHeaderTitle:function(e){F.updateAllBaseStates("header.secondTitle",O.Set,e||"")},setNavigationBar:function(e){e.placeAt(x.NavigationBar,"only");this.addDanglingControl(e)},setSideNavigation:function(e){e.placeAt(x.SideNavigation,"only");this.addDanglingControl(e)},setShellShapes:function(e){if(e.placeAt){e.placeAt(x.ShellShapes,"only");this.addDanglingControl(e)}else if(e instanceof Node){document.getElementById(x.ShellShapes).appendChild(e)}},setFooter:function(e){if(typeof e!=="object"||!e.getId){throw new Error("oFooter value is invalid")}const n=this.getFooterId();if(n){t.warning(`You can only set one footer. Replacing existing footer "${n}", with the new footer "${e.getId()}".`)}F.updateAllBaseStates("footer.content",O.Set,e.getId());e.placeAt(x.Footer,"only");this.addDanglingControl(e);if(e._applyContextClassFor){e._applyContextClassFor("footer")}},getFooterId:function(){return M.getModel().getProperty("/footer/content")},removeFooter:function(){const e=this.getFooterId();if(e){const t=o.getElementById(e);if(t&&t.destroy){t.destroy()}}F.updateAllBaseStates("footer.content",O.Set,"")},addUserPreferencesEntry:function(e,t){this._validateUserPrefEntryConfiguration(e,t);return this._updateUserPrefModel(e,t)},_validateUserPrefEntryConfiguration:function(e,t){if(!e||typeof e!=="object"){throw new Error("object oConfig was not provided")}if(!e.title){throw new Error("title was not provided")}if(!e.value){throw new Error("value was not provided")}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid")}else if(e.entryHelpID===""){throw new Error("entryHelpID should not be an empty string")}}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid")}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid")}["onSave","content","onCancel"].forEach(t=>{if(e[t]&&typeof e[t]!=="function"){throw new Error(`"${t}" type is "${typeof e[t]}" but should be a function`)}});if(t){[{name:"groupingId",type:"string"},{name:"groupingTabTitle",type:"string"},{name:"groupingTabHelpId",type:"string"}].forEach(t=>{if(!e[t.name]){throw new Error(`${t.name} is missing`)}else if(typeof e[t.name]!==t.type){throw new Error(`"${t.name}" type is "${typeof e[t.name]}" but should be a "${t.type}"`)}})}},_createSessionHandler:function(e){const t=2e4;sap.ui.require(["sap/ushell/SessionHandler"],n=>{this.oSessionHandler=new n;this.oSessionHandler.initLogout();window.setTimeout(()=>{this.oSessionHandler.init({sessionTimeoutReminderInMinutes:e.sessionTimeoutReminderInMinutes,sessionTimeoutIntervalInMinutes:e.sessionTimeoutIntervalInMinutes,sessionTimeoutTileStopRefreshIntervalInMinutes:e.sessionTimeoutTileStopRefreshIntervalInMinutes,enableAutomaticSignout:e.enableAutomaticSignout})},t)})},_getSessionHandler:function(){return this.oSessionHandler},_navBack:async function(){this.setUserActionsMenuSelected(false);P.navigateBack()},_updateUserPrefModel:function(e,t){const n=this._getModelEntryFromEntryObject(e);let i=v.last("/core/userPreferences/entries")||[];if(t){n.groupingEnablement=true;n.groupingId=e.groupingId;n.groupingTabTitle=e.groupingTabTitle;n.groupingTabHelpId=e.groupingTabHelpId}i.push(n);i=this._reorderUserPrefEntries(i);v.emit("/core/userPreferences/entries",i);return n.id},_getModelEntryFromEntryObject:function(e){return{id:A._getUid(),entryHelpID:e.entryHelpID,title:e.title,valueArgument:e.value,valueResult:null,onSave:e.onSave,onCancel:e.onCancel,contentFunc:e.content,contentResult:null,icon:e.icon,provideEmptyWrapper:e.provideEmptyWrapper}},_reorderUserPrefEntries:function(e){const t=[];const n=["userAccountEntry","themes","language","notificationsEntry","homepageEntry","spacesEntry","userActivitiesEntry","userDefaultEntry"];const i={};for(let t=e.length-1;t>=0;t--){if(n.indexOf(e[t].id)!==-1){const n=e.splice(t,1)[0];i[n.id]=n}}n.forEach(e=>{const n=i[e];if(n){t.push(n)}});return t.concat(e)},_getConfig:function(){return Q||{}},_getPersData:async function(e){const t=a.getOwnerComponentFor(this.getView());const n=await T.getServiceAsync("PersonalizationV2");const i={keyCategory:n.KeyCategory.FIXED_KEY,writeFrequency:n.WriteFrequency.LOW,clientStorageAllowed:true};const o=await n.getPersonalizer(e,i,t);return o.getPersData()},_getCurrentLocationHash:function(){return window.location.hash},setUserActionsMenuSelected:function(e){w.emit("showUserActionsMenu",e)},setNotificationsSelected:function(e){w.emit("showNotifications",e)},_isFLPIntent:function(e){const t=H.getBasicHash(e);const n=["Shell-home","Shell-appfinder","Launchpad-openFLPPage","Launchpad-openWorkPage"];return n.some(e=>t===e)},_usesNavigationRedirect:async function(e){if(!e){return false}const n=e.getInstance({});if(!n){return false}if(typeof n.navigationRedirect!=="function"){return false}const i=n.navigationRedirect();if(!i||typeof i.then!=="function"){return false}try{const e=await A.promisify(i);t.warning(`Performing navigation redirect to hash "${e}"`);n.destroy();this.history.pop();const a=await T.getServiceAsync("ShellNavigationInternal");a.toExternal({target:{shellHash:e}},undefined,false);return true}catch{return false}},_adaptIsUrlSupportedResultForMessagePopover:async function(e){const t=await T.getServiceAsync("Navigation");try{await t.isUrlSupported(e.url);e.promise.resolve({allowed:true,id:e.id})}catch{e.promise.resolve({allowed:false,id:e.id})}},_initializeMessagePopover:async function(e){const[t]=await A.requireAsync(["sap/m/MessagePopover"]);if(t?.setDefaultHandlers){t.setDefaultHandlers({asyncURLHandler:this._adaptIsUrlSupportedResultForMessagePopover})}w.emit("StepDone",e.stepName)}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/Shell.view", ["sap/base/Log","sap/m/Avatar","sap/m/library","sap/ui/core/Component","sap/ui/core/Element","sap/ushell/renderer/shellHeader/ShellHeader.controller","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils","sap/ui/core/mvc/View","sap/ui/core/mvc/XMLView","sap/ui/core/Fragment","sap/ushell/api/NewExperience","sap/ushell/renderer/ShellLayout","sap/ushell/renderer/Shell.controller","sap/ushell/state/ShellModel","sap/ushell/state/StateManager","sap/ushell/Config","sap/ushell/Container","sap/ushell/state/BindingHelper","sap/ui/core/ComponentContainer"],function(e,t,n,i,a,o,l,r,s,d,h,c,u,g,p,f,y,M,A,b,v,m){"use strict";const C=n.AvatarSize;const S=M.Operation;const w=M.ShellMode;const P=p.ShellArea;const F={Property:"Property",List:"List"};return h.extend("sap.ushell.renderer.Shell",{getControllerName:function(){return"sap.ushell.renderer.Shell"},waitForShellLayout:function(){if(!this._oShellLayoutPromise){this._oShellLayoutPromise=new Promise(function(e){this.getController().addDoable(r.once("ShellLayoutApplied").do(e))}.bind(this))}return this._oShellLayoutPromise},getViewDataConfig:function(){var e=this.getViewData()||{};var t=e.config||{};return t},createContent:function(){this._createUserActionsMenuButton(y.getConfigModel());this._allowUpToThreeActionInShellHeader();M.init(this.getViewDataConfig());this.initBackgroundImage();var e=this.createShellHeader();this.setNavigationBarMinHeight();var t=this.createRendererRootView();this.setDisplayBlock(true);d.setPerformanceMark("FLP - Shell.view rendering started!");return Promise.all([t,e]).then(function(e){var t=e[0];this.initCanvasShapesManager();return t}.bind(this))},initBackgroundImage:function(){this.waitForShellLayout().then(function(){var e=document.getElementById(P.BackgroundImage);var t=["<div class='sapUiShellBackgroundImage sapUiGlobalBackgroundImageForce sapUshellShellBG sapContrastPlus'></div>","<div class='sapMShellBG sapUiGlobalBackgroundImage'></div>"].join("\n");e.insertAdjacentHTML("afterbegin",t)})},createRendererRootView:function(){var e=this.getController();return u.load({name:"sap.ushell.renderer.RendererRootView",controller:e}).then(function(e){v.overrideUpdateAggregation(e);return e})},createRendererRootViewFallback:function(){var e=this.getController();return u.load({name:"sap.ushell.renderer.RendererRootViewFallback",controller:e}).then(function(e){v.overrideUpdateAggregation(e);return e})},createShellHeader:async function(){if(A.last("/core/shellBar/enabled")){return i.create({name:"sap.ushell.components.shell.ShellBar"}).then(e=>{e.setModel(s.i18nModel,"i18n");e.setModel(g.getModel(),"newExperience");e.setModel(y.getModel(),"shellModel");this.waitForShellLayout().then(()=>{const t=new m({component:e,id:"shell-header",async:true});e.enhanceComponentContainerAPI(t);t.placeAt(P.ShellHeader,"only");this.addDanglingControl(t);this._oShellHeader=t})})}else if(!A.last("/core/shellBar/enabled")){var e=new o;return u.load({name:"sap.ushell.renderer.shellHeader.ShellHeader",controller:e}).then(t=>{v.overrideUpdateAggregation(t);if(M.getShellMode()===w.Embedded){t.setNoLogo()}t.setModel(s.i18nModel,"i18n");t.setModel(g.getModel(),"newExperience");t.setModel(y.getModel(),"shellModel");this.addDanglingControl(t);this._oShellHeader=t;this.waitForShellLayout().then(function(){t.placeAt(P.ShellHeader,"only");e.onInit()})})}},setNavigationBarMinHeight:function(){return b.getServiceAsync("Menu").then(function(e){return e.isMenuEnabled()}).then(function(e){if(!e){return}this.waitForShellLayout().then(function(){var e=document.getElementById(P.NavigationBar);e.classList.add("sapUshellMenuBarHeight")})}.bind(this)).catch(function(t){e.info("Could not apply min-height of the navigationBar",t)})},createRightFloatingContainer:function(){this.addPendingInitialization(new Promise(function(e){sap.ui.require(["sap/ushell/ui/shell/RightFloatingContainer"],function(t){var n=new t({id:"right-floating-container",top:"2",right:"2",hideItemsAfterPresentation:true,visible:"{shellModel>/rightFloatingContainer/visible}",floatingContainerItems:{path:"shellModel>/rightFloatingContainer/items",factory:v.factory}});v.overrideUpdateAggregation(n);n.setModel(y.getModel(),"shellModel");this.addDanglingControl(n);this._oRightFloatingContainer=n;e();this.waitForShellLayout().then(function(){n.placeAt(P.RightFloatingContainer,"only")})}.bind(this))}.bind(this)))},initCanvasShapesManager:function(){this.bindFactory({model:y.getConfigModel(),factory:this.createCanvasShapesManager.bind(this),bindingPath:"/enableBackGroundShapes",bindingType:F.Property,valueCheck:function(e){return!!e}})},createCanvasShapesManager:function(){sap.ui.require(["sap/ushell/CanvasShapesManager"])},createSubHeader:function(){sap.ui.require(["sap/ushell/ui/shell/SubHeader"],function(e){var t=new e({id:"subhdr",content:{path:"shellModel>/subHeader/items",factory:v.factory}});v.overrideUpdateAggregation(t);t.setModel(y.getModel(),"shellModel");this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(P.SubHeader,"only")})}.bind(this))},createFloatingContainer:async function(){const e=await i.create({name:"sap.ushell.components.shell.FloatingContainer"});this.addDanglingControl(e);return e},createSidePane:function(){sap.ui.require(["sap/ushell/ui/shell/SidePane"],function(e){var t=new e({id:"shell-sidePane",visible:"{shellModel>/sidePane/visible}",content:{path:"shellModel>/sidePane/items",factory:v.factory}});v.overrideUpdateAggregation(t);t.setModel(y.getModel(),"shellModel");this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(P.SidePane,"only")})}.bind(this))},createToolArea:function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(e){var t=new e({id:"shell-toolArea",visible:"{shellModel>/toolArea/visible}",toolAreaItems:{path:"shellModel>/toolArea/items",factory:v.factory}});v.overrideUpdateAggregation(t);t.setModel(y.getModel(),"shellModel");this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(P.ToolArea,"only")})}.bind(this))},createFloatingActions:function(){sap.ui.require(["sap/ushell/ui/shell/ShellFloatingActions"],function(e){var t=new e({id:"shell-floatingActions",floatingActions:{path:"shellModel>/floatingActions/items",factory:v.factory}});v.overrideUpdateAggregation(t);t.setModel(y.getModel(),"shellModel");this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(P.FloatingActions,"only")})}.bind(this))},initAllMyAppsView:function(){return b.getServiceAsync("AllMyApps").then(function(e){if(e.isEnabled()){return this.createAllMyAppsView()}}.bind(this))},createAllMyAppsView:function(){return c.create({id:"allMyAppsView",viewName:"sap.ushell.renderer.allMyApps.AllMyApps"}).then(function(e){e.setModel(y.getConfigModel(),"configModel");e.setModel(s.i18nModel,"i18n");e.addCustomData(new l({key:"aria-label",value:s.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.addDanglingControl(e);if(A.last("/core/shellBar/enabled")){a.getElementById(this.getShellHeader().getAppTitle()).setAllMyApps(e)}else{this.getShellHeader().getAppTitle().setAllMyApps(e)}}.bind(this))},createPostCoreExtControls:function(){var e=y.getModel();sap.ui.require(["sap/ui/core/Popup"],function(e){e.setInitialZIndex(11)});this.bindFactory({model:e,factory:this.createFloatingContainer.bind(this),bindingPath:"/floatingContainer/items",bindingType:F.List,valueCheck:function(e){return!!e.length}});this.bindFactory({model:e,factory:this.createRightFloatingContainer.bind(this),bindingPath:"/rightFloatingContainer/visible",bindingType:F.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createSubHeader.bind(this),bindingPath:"/subHeader/items",bindingType:F.List,valueCheck:function(e){return!!e.length}});this.bindFactory({model:e,factory:this.createToolArea.bind(this),bindingPath:"/toolArea/visible",bindingType:F.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createSidePane.bind(this),bindingPath:"/sidePane/visible",bindingType:F.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createFloatingActions.bind(this),bindingPath:"/floatingActions/items",bindingType:F.List,valueCheck:function(e){return!!e.length}});this.addPendingInitialization(this.initAllMyAppsView())},_allowUpToThreeActionInShellHeader:function(){const e=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"];const t=this.getViewDataConfig();e.reduce((e,n)=>{if(e>=3){t[n]=false;return e}if(t[n]){e++}return e},0)},_createUserActionsMenuButton:function(e){const n=b.getUser();const i=s.i18n.getText("UserActionsMenuToggleButtonAria",[n.getFullName()||n.getId()]);const a=this.addDanglingControl.bind(this);let o;if(A.last("/core/shellBar/enabled")){sap.ui.require(["sap/ushell/thirdparty/ui5/webcomponents/Avatar"],function(t){o=new t({id:"userActionsMenuHeaderButton",src:"{configModel>/userImage/personPlaceHolder}",initials:n.getInitials(),tooltip:i});o.setModel(e,"configModel");a(o);M.updateAllBaseStates("header.headEndItems",S.Add,"userActionsMenuHeaderButton")})}else{o=new t({id:"userActionsMenuHeaderButton",src:"{configModel>/userImage/personPlaceHolder}",initials:n.getInitials(),ariaHasPopup:"Menu",displaySize:C.XS,tooltip:i,press:function(){r.emit("showUserActionsMenu",Date.now())}});o.setModel(e,"configModel");this.addDanglingControl(o);M.updateAllBaseStates("header.headEndItems",S.Add,"userActionsMenuHeaderButton")}},getShellHeader:function(){return this._oShellHeader},getRightFloatingContainer:function(){return this._oRightFloatingContainer},bindFactory:function(e){var t=e.model;var n=e.factory;var i=e.bindingPath;var a=e.bindingType;var o=e.valueCheck;var l=t.getProperty(i);if(o(l)){n()}else{var r;switch(a){case F.List:r=t.bindList(i);break;default:r=t.bindProperty(i)}this.addDanglingBinding(r);r.attachChange(function(){l=r.getModel().getProperty(r.getPath());if(o(l)){this.removeDanglingBinding(r);r.destroy();n()}},this)}},addDanglingBinding:function(e){this.getController().addDanglingBinding(e)},removeDanglingBinding:function(e){this.getController().removeDanglingBinding(e)},addDanglingControl:function(e){this.getController().addDanglingControl(e)},addPendingInitialization:function(e){return this.getController().addPendingInitialization(e)}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/ShellLayout", ["sap/base/Log"],function(e){"use strict";const a={RootDomRef:"shellLayout",ShellHeader:"header-shellArea",RendererRootView:"canvas",SideNavigation:"sideNavigation-shellArea",SidePane:"sidePane-shellArea",Footer:"footer-shellArea",ToolArea:"toolArea-shellArea",SubHeader:"subHeader-shellArea",NavigationBar:"navigationBar-shellArea",FloatingActions:"floatingActions-shellArea",FloatingContainer:"floatingContainer-shellArea",FloatingContainerDockStart:"floatingContainerDockStart-shellArea",FloatingContainerDockEnd:"floatingContainerDockEnd-shellArea",ShellShapes:"shapes-shellArea",RightFloatingContainer:"rightFloatingContainer-shellArea",BackgroundImage:"backgroundImage-shellArea",HelpContent:"helpContent-shellArea",WebComponents:"WebComponents-shellArea"};function t(t){var o=document.getElementById(t);a.RendererRootView=t;var i=[`<div id='${a.RootDomRef}' class='sapUshellFlexRow'>`,`    <div id='${a.BackgroundImage}' data-sap-ui-root-content=true></div>`,`    <div id='${a.WebComponents}' data-sap-ui-root-content=true></div>`,`    <div id='${a.ShellShapes}' data-sap-ui-root-content=true></div>`,"    <div id='sapUshellPopupWithinArea' class='sapUshellFlexGrowShrink sapUshellFlexRow'>",`        <div id='${a.FloatingContainerDockStart}' class='sapUshellFloatingContainerDock' data-sap-ui-root-content=true></div>`,"        <div class='sapUshellFlexGrowShrink sapUshellFlexColumn'>",`            <div id='${a.ShellHeader}' data-sap-ui-root-content=true></div>`,"            <div class='sapUshellFlexGrowShrink sapUshellFlexRow'>",`                <div id='${a.SideNavigation}' data-sap-ui-root-content=true></div>`,"                <div class='sapUshellFlexGrowShrink sapUshellFlexColumn'>",`                    <div id='${a.SubHeader}' data-sap-ui-root-content=true></div>`,"                    <div class='sapUshellFlexGrowShrink sapUshellFlexRow'>",`                        <div id='${a.ToolArea}' class='sapUshellPositionRelative' data-sap-ui-root-content=true></div>`,`                        <div id='${a.SidePane}' data-sap-ui-root-content=true></div>`,"                        <div class='sapUshellFlexGrowShrink sapUshellFlexColumn'>",`                            <div id='${a.NavigationBar}' data-sap-ui-root-content=true></div>`,"                            <div class='sapUshellFlexGrowShrink sapUshellPositionRelative sapUshellOverflowHidden sapUshellFlexColumn'>",`                                <div id='${a.RendererRootView}' class='sapUshellFlexGrowShrink sapUshellPositionRelative sapUshellShell' data-sap-ui-root-content=true></div>`,`                                <div id='${a.FloatingActions}' data-sap-ui-root-content=true></div>`,`                                <div id='${a.RightFloatingContainer}' data-sap-ui-root-content=true></div>`,"                            </div>","                        </div>","                    </div>","                </div>","            </div>",`            <footer id='${a.Footer}' class='sapUshellPositionStatic sapMPageFooter' data-sap-ui-root-content=true></footer>`,"        </div>",`        <div id='${a.FloatingContainerDockEnd}' class='sapUshellFloatingContainerDock' data-sap-ui-root-content=true></div>`,`        <div id='${a.FloatingContainer}' data-sap-ui-root-content=true></div>`,"    </div>",`    <div id='${a.HelpContent}' data-sap-ui-root-content=true></div>`,"</div>"].join("\n");var l=Object.keys(a).some(function(e){if(e==="RendererRootView"){return false}var t=a[e];return!!document.getElementById(t)});if(l){e.warning("Found a ShellArea element. Did not apply the layout","sap.ushell.renderer.ShellLayout");return}document.body.insertAdjacentHTML("afterbegin","<div id='tmp'>"+i+"</div>");var n=document.getElementById("tmp");o.replaceWith.apply(o,Array.from(n.childNodes));n.remove()}function o(){var e=document.getElementById(a.RootDomRef);if(e){document.getElementById(a.RootDomRef).remove()}}return{applyLayout:t,destroyLayout:o,ShellArea:a}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/shellHeader/ShellHeader.controller", ["sap/m/library","sap/ui/core/Element","sap/ui/core/mvc/Controller","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/api/NewExperience","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/ui/shell/OverflowListItem","sap/ushell/Container","sap/ushell/state/BackNavigation","sap/ushell/state/ShellModel","sap/ushell/state/StateManager"],function(e,t,n,a,i,r,s,o,d,l,h,f,m,u){"use strict";const c=e.ListType;const v=d.FloatingNumberType;const p=u.LaunchpadState;const E=u.Operation;const g="endItemsOverflowBtn";return n.extend("sap.ushell.renderer.shellHeader.ShellHeader",{onInit:function(){this.aDoables=[];this.aDoables.push(o.on("navigateBack").do(this.pressNavBackButton.bind(this)));this.aDoables.push(o.on("showEndItemOverflow").do(this.pressEndItemsOverflow.bind(this)));this.aDoables.push(o.on("navigateFromShellApplicationNavigationMenu").do(this.navigateFromShellApplicationNavigationMenu.bind(this)));this.aDoables.push(o.on("setHeaderCentralAreaElement").do(this._handleSetHeaderCentralAreaElement.bind(this)));this.aDoables.push(s.on("/core/shellHeader/homeUri").do(this._updateHomeUri.bind(this)));this._updateHomeUri(s.last("/core/shellHeader/homeUri"));this.aDoables.push(o.on("updateHeaderOverflowState").do(this._handleHeadEndItemsOverflow.bind(this)));a.media.attachHandler(this._handleHeadEndItemsOverflow,this,a.media.RANGESETS.SAP_STANDARD);this.oHeadEndBinding=m.getModel().bindList("/header/headEndItems");this.oHeadEndBinding.attachChange(this._handleHeadEndItemsOverflow,this);r.attachActiveChanged(this._handleHeadEndItemsOverflow,this)},_handleSetHeaderCentralAreaElement:function(e){const{id:t,currentState:n,states:a}=e;if(n){u.updateCurrentState("header.centralAreaElement",E.Set,t)}else if(Array.isArray(a)){u.updateBaseStates(a,"header.centralAreaElement",E.Set,t)}else{u.updateAllBaseStates("header.centralAreaElement",E.Set,t)}},_addHeadEndItem:function(e,t,n){this._updateHeadEndItems(e,E.Add,t,n)},_removeHeadEndItem:function(e,t,n){this._updateHeadEndItems(e,E.Remove,t,n)},_updateHeadEndItems:function(e,t,n,a){if(n){u.updateCurrentState("header.headEndItems",t,e)}else if(Array.isArray(a)&&a.length>0){u.updateBaseStates(a,"header.headEndItems",t,e)}else{u.updateAllBaseStates("header.headEndItems",t,e)}},_handleHeadEndItemsOverflow:function(){const e=m.getModel().getProperty("/header/headEndItems");var n=e.indexOf(g)>-1;var i=a.media.getCurrentRange(a.media.RANGESETS.SAP_STANDARD).name;if(i==="Phone"&&(r.isActive()||!n&&e.length>2)){this._addHeadEndItem(g,false,[p.Home,p.App]);this._moveNewExperienceToOverflow()}else if(i!=="Phone"&&n){var s=t.getElementById("headEndItemsOverflow");if(s){if(r.isActive()){const e=r.getOverflowItemControl();e.getParent()?.removeItem?.(e)}s.destroy()}this._removeHeadEndItem(g,false,[p.Home,p.App]);this._moveNewExperienceToShellHeader()}},_moveNewExperienceToOverflow:function(){if(r.isActive()){this._addHeadEndItem(r.getOverflowItemId(),false,[p.Home,p.App])}r.showInOverflow()},_moveNewExperienceToShellHeader:function(){if(r.isActive()){this._removeHeadEndItem(r.getOverflowItemId(),false,[p.Home,p.App])}r.showInShellHeader()},_updateHomeUri:function(e){var n=t.getElementById("shell-header");if(n){n.setHomeUri(e)}},pressNavBackButton:async function(){o.emit("showUserActionsMenu",false);f.navigateBack()},pressEndItemsOverflow:function(e){var n=t.getElementById("headEndItemsOverflow"),a=t.getElementById(e),r=Promise.resolve(),s;if(!a){return}if(!n){r=new Promise(function(e,t){sap.ui.require(["sap/ui/core/Fragment"],function(n){n.load({name:"sap.ushell.renderer.HeadEndItemsOverflowPopover",type:"XML",controller:this}).then(e).catch(t)}.bind(this),t)}.bind(this)).then(function(e){n=e;var a=t.getElementById("headEndItemsOverflowList");a.enhanceAccessibilityState=function(e,t){if(!e.isA("sap.ushell.ui.shell.OverflowListItem")){return t}if(e.getFloatingNumberType()!==v.None){t.describedby=e._oAriaDescribedbyText.getId()}return t};s=new i({headEndItems:m.getModel().getProperty("/header/headEndItems")});n.setModel(s)})}r.then(function(){if(n.isOpen()){n.close()}else{if(t.getElementById("shellNotificationsPopover")){o.emit("showNotifications",false)}n.openBy(a)}})},headEndItemsOverflowItemFactory:function(e,n){if(r.isActive()&&n.getObject()===r.getOverflowItemId()){return r.getOverflowItemControl()}var a=t.getElementById(n.getObject());var i=a.getBindingPath("floatingNumber");var s=a.getText();var o=a.getTooltip();var d=new l({id:e+"-"+a.getId(),icon:a.getIcon(),iconInset:true,tooltip:o!==s?o:null,title:s,type:c.Active,floatingNumber:i?{path:i}:undefined,floatingNumberMaxValue:a.getFloatingNumberMaxValue(),floatingNumberType:a.getFloatingNumberType(),visible:a.getVisible(),press:function(){if(a){a.firePress();var e=a.getTarget();if(e){h.getServiceAsync("Navigation").then(function(t){t.navigate({target:{shellHash:e}})})}}var n=t.getElementById("headEndItemsOverflow");if(n.isOpen()){n.close()}}});if(a._oAriaLabel){d.addAriaLabelledBy(a._oAriaLabel)}if(i){d.setModel(a.getModel())}return d},destroyHeadEndItemsOverflow:function(e){if(r.isActive()){const e=r.getOverflowItemControl();e.getParent()?.removeItem?.(e)}e.getSource().destroy()},isHeadEndItemInOverflow:function(e){return e!=="ENDITEMSOVERFLOWBTN"&&!this.isHeadEndItemNotInOverflow(e)},isHeadEndItemNotInOverflow:function(e){var t=this.isHeadEndItemOverflow();var n=a.media.getCurrentRange(a.media.RANGESETS.SAP_STANDARD).name;if(e==="ENDITEMSOVERFLOWBTN"){return t}if(!t){return true}if(["USERACTIONSMENUHEADERBUTTON","BACKBTN"].indexOf(e)>-1){return true}if(n==="Phone"){return false}if(["SF","FLOATINGCONTAINERBUTTON"].indexOf(e)>-1){return true}if(n==="Desktop"&&e==="COPILOTBTN"){return true}return false},isHeadEndItemOverflow:function(){var e=0,n,i=m.getModel().getProperty("/header/headEndItems");if(i.indexOf("endItemsOverflowBtn")===-1){return false}var r=a.media.getCurrentRange(a.media.RANGESETS.SAP_STANDARD).name;var s=3;if(r==="Phone"){s=1}for(var o=0;o<i.length;o++){n=t.getElementById(i[o]);if(n&&n.getVisible()){e++}}if(t.getElementById("endItemsOverflowBtn").getVisible()){return e>s+1}return e>s},navigateFromShellApplicationNavigationMenu:function(e){if(window.hasher.getHash()!==e.substr(1)){o.emit("centerViewPort",Date.now());window.hasher.setHash(e)}var n=t.getElementById("shellAppTitle");if(n){n.close()}},onExit:function(){this.aDoables.forEach(function(e){e.off()});this.oHeadEndBinding.destroy();r.detachActiveChanged(this._handleHeadEndItemsOverflow,this)}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderer/utils", ["sap/ui/core/EventBus","sap/ushell/EventHub"],function(e,n){"use strict";function r(r){setTimeout(function(){e.getInstance().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"})},0);n.emit("RendererLoaded",{rendererName:"fiori2"})}function i(n,r){setTimeout(function(){e.getInstance().publish("sap.ushell.renderers.fiori2.Renderer",n,r)},0)}return{publishExternalEvent:i,init:r}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/History", ["sap/ushell/renderer/History"],function(e){"use strict";return e},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/LogonFrameProvider", ["sap/ushell/renderer/LogonFrameProvider"],function(e){"use strict";return e},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/Renderer", ["sap/ushell/renderer/Renderer"],t=>{"use strict";const e=t.extend("sap.ushell.renderers.fiori2.Renderer");e.prototype.showHeaderItem=function(e,o,r){return t.prototype.showHeaderItem.apply(this,arguments)};e.prototype.showToolAreaItem=function(e,o,r){return t.prototype.showToolAreaItem.apply(this,arguments)};e.prototype.showActionButton=function(e,o,r){return t.prototype.showActionButton.apply(this,arguments)};e.prototype.showFloatingActionButton=function(e,o,r){return t.prototype.showFloatingActionButton.apply(this,arguments)};e.prototype.showHeaderEndItem=function(e,o,r){return t.prototype.showHeaderEndItem.apply(this,arguments)};e.prototype.setHeaderVisibility=function(e,o,r){return t.prototype.setHeaderVisibility.apply(this,arguments)};e.prototype.showSubHeader=function(e,o,r){return t.prototype.showSubHeader.apply(this,arguments)};e.prototype.setFooter=function(e){return t.prototype.setFooter.apply(this,arguments)};e.prototype.setShellFooter=function(e){return t.prototype.setShellFooter.apply(this,arguments)};e.prototype.setFooterControl=function(e,o){return t.prototype.setFooterControl.apply(this,arguments)};e.prototype.hideHeaderItem=function(e,o,r){return t.prototype.hideHeaderItem.apply(this,arguments)};e.prototype.removeToolAreaItem=function(e,o,r){return t.prototype.removeToolAreaItem.apply(this,arguments)};e.prototype.hideActionButton=function(e,o,r){return t.prototype.hideActionButton.apply(this,arguments)};e.prototype.hideLeftPaneContent=function(e,o,r){return t.prototype.hideLeftPaneContent.apply(this,arguments)};e.prototype.hideFloatingActionButton=function(e,o,r){return t.prototype.hideFloatingActionButton.apply(this,arguments)};e.prototype.hideHeaderEndItem=function(e,o,r){return t.prototype.hideHeaderEndItem.apply(this,arguments)};e.prototype.hideSubHeader=function(e,o,r){return t.prototype.hideSubHeader.apply(this,arguments)};e.prototype.removeFooter=function(){return t.prototype.removeFooter.apply(this,arguments)};e.prototype.getCurrentViewportState=function(){return"Center"};e.prototype.addShellSubHeader=function(e){return t.prototype.addShellSubHeader.apply(this,arguments)};e.prototype.addSubHeader=function(e,o,r,p,n){return t.prototype.addSubHeader.apply(this,arguments)};e.prototype.addUserAction=function(e){return t.prototype.addUserAction.apply(this,arguments)};e.prototype.addActionButton=function(e,o,r,p,n){return t.prototype.addActionButton.apply(this,arguments)};e.prototype.addFloatingButton=function(e){return t.prototype.addFloatingButton.apply(this,arguments)};e.prototype.addFloatingActionButton=function(e,o,r,p,n){return t.prototype.addFloatingActionButton.apply(this,arguments)};e.prototype.addSidePaneContent=function(e){return t.prototype.addSidePaneContent.apply(this,arguments)};e.prototype.addLeftPaneContent=function(e,o,r,p,n){return t.prototype.addLeftPaneContent.apply(this,arguments)};e.prototype.addHeaderItem=function(e,o,r,p,n){return t.prototype.addHeaderItem.apply(this,arguments)};e.prototype.addToolAreaItem=function(e,o,r,p){return t.prototype.addToolAreaItem.apply(this,arguments)};e.prototype.addHeaderEndItem=function(e,o,r,p,n){return t.prototype.addHeaderEndItem.apply(this,arguments)};e.prototype.addEndUserFeedbackCustomUI=function(e,o){return t.prototype.addEndUserFeedbackCustomUI.apply(this,arguments)};e.prototype.addUserPreferencesEntry=function(e){return t.prototype.addUserPreferencesEntry.apply(this,arguments)};e.prototype.setHeaderTitle=function(e){return t.prototype.setHeaderTitle.apply(this,arguments)};e.prototype.setLeftPaneVisibility=function(e,o){return t.prototype.setLeftPaneVisibility.apply(this,arguments)};e.prototype.showToolArea=function(e,o){return t.prototype.showToolArea.apply(this,arguments)};e.prototype.LaunchpadState=t.prototype.LaunchpadState;return e},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/RendererExtensions", ["sap/base/Log","sap/ui/core/Element","sap/ushell/Container"],function(e,r,n){"use strict";function i(e,r,i){n.getRendererInternal("fiori2").hideHeaderItem(e.getId(),false,[r,i])}function t(e,r,i){n.getRendererInternal("fiori2").showActionButton(e.getId(),false,[r,i])}function s(e,r,i){n.getRendererInternal("fiori2").hideActionButton(e.getId(),false,[r,i])}function o(e,r,i){n.getRendererInternal("fiori2").showLeftPaneContent(e.getId(),false,[r,i])}function d(e,r){n.getRendererInternal("fiori2").hideLeftPaneContent(false,[e,r])}function a(e,r,i){n.getRendererInternal("fiori2").showFloatingActionButton(e.getId(),false,[r,i])}function l(e,r,i){n.getRendererInternal("fiori2").hideFloatingActionButton(e.getId(),false,[r,i])}function f(e,r,i){n.getRendererInternal("fiori2").showHeaderEndItem(e.getId(),false,[r,i])}function u(e,r,i){n.getRendererInternal("fiori2").hideHeaderEndItem(e.getId(),false,[r,i])}function h(){return n.getRendererInternal("fiori2").getModelConfiguration()}function c(){e.info("Application calls sap.ushell.Renderer.addEndUserFeedbackCustomUI. This function is deprecated. The call has no effect.")}function p(e){n.getRendererInternal("fiori2").addUserPreferencesEntry(e)}function g(e){n.getRendererInternal("fiori2").addUserPreferencesGroupedEntry(e)}function R(e){n.getRendererInternal("fiori2").setHeaderTitle(e)}function I(e,r){n.getRendererInternal("fiori2").setLeftPaneVisibility(e,r)}function E(e){n.getRendererInternal("fiori2").setHeaderHiding(e)}function P(e){n.getRendererInternal("fiori2").setFooter(e)}function C(){n.getRendererInternal("fiori2").removeFooter()}function m(){this.addHeaderItem=function(r,i,t){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");n.getRendererInternal("fiori2").showHeaderItem(r.getId(),false,[i,t])};this.setHeaderItemVisibility=function(i,t,s,o){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");const d=r.getElementById(i);if(o){n.getRendererInternal("fiori2").showHeaderItem(d.getId(),s,[t])}};this.addSubHeader=function(r,i,t){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");n.getRendererInternal("fiori2").showSubHeader(r.getId(),false,[i,t])};this.removeSubHeader=function(r,i,t){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");n.getRendererInternal("fiori2").hideSubHeader(r.getId(),false,[i,t])};this.addHeaderEndItem=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");f(...r)};this.removeHeaderItem=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");i(...r)};this.removeHeaderEndItem=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");u(...r)};this.addEndUserFeedbackCustomUI=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");c(...r)};this.addOptionsActionSheetButton=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");t(...r)};this.removeOptionsActionSheetButton=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");s(...r)};this.setFooter=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");P(...r)};this.removeFooter=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");C(...r)};this.addUserPreferencesEntry=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");p(...r)};this.addUserPreferencesGroupedEntry=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");g(...r)};this.setHeaderTitle=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");R(...r)};this.setHeaderHiding=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");E(...r)};this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");a(...r)};this.removeFloatingActionButton=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");l(...r)};this.setLeftPaneContent=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");o(...r)};this.removeLeftPaneContent=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");d(...r)};this.setLeftPaneVisibility=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");I(...r)};this.getConfiguration=function(...r){e.error("'sap.ushell.renderers.fiori2.RendererExtensions' is deprecated. Please use 'sap.ushell.Container.getRenderer('fiori2')' instead.");return h(...r)}}var x=new m;return x},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/Shell.controller", ["sap/ushell/renderer/Shell.controller"],function(e){"use strict";return e.extend("sap.ushell.renderers.fiori2.Shell")});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/renderers/fiori2/Shell.view", ["sap/base/Log","sap/m/Avatar","sap/m/library","sap/ushell/renderer/shellHeader/ShellHeader.controller","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils","sap/ui/core/mvc/XMLView","sap/ui/core/Core","sap/ui/core/Component","sap/ushell/Container","sap/ushell/renderer/ShellLayout","sap/ushell/state/ShellModel","sap/ushell/state/StateManager","sap/ushell/state/BindingHelper"],function(e,t,n,i,a,o,l,r,s,d,h,u,c,g,p,f){"use strict";const y=n.AvatarSize;const v=p.Operation;const A=p.ShellMode;const M=c.ShellArea;const b={Property:"Property",List:"List"};sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell"},waitForShellLayout:function(){if(!this._oShellLayoutPromise){this._oShellLayoutPromise=new Promise(function(e){this.getController().addDoable(o.once("ShellLayoutApplied").do(e))}.bind(this))}return this._oShellLayoutPromise},getViewDataConfig:function(){var e=this.getViewData()||{};var t=e.config||{};return t},createContent:function(){this._createUserActionsMenuButton(g.getConfigModel());this._allowUpToThreeActionInShellHeader();p.init(this.getViewDataConfig());this.initBackgroundImage();this.createShellHeaderSync();this.setNavigationBarMinHeight();var e=this.createRendererRootViewSync();this.initCanvasShapesManager();this.setDisplayBlock(true);r.setPerformanceMark("FLP - Shell.view rendering started!");return e},initBackgroundImage:function(){this.waitForShellLayout().then(function(){var e=document.getElementById(M.BackgroundImage);var t=["<div class='sapUiShellBackgroundImage sapUiGlobalBackgroundImageForce sapContrastPlus'></div>","<div class='sapMShellBG sapUiGlobalBackgroundImage'></div>"].join("\n");e.insertAdjacentHTML("afterbegin",t)})},createRendererRootViewSync:function(){var e=this.getController();var t=sap.ui.xmlfragment("sap.ushell.renderer.RendererRootView",e);f.overrideUpdateAggregation(t);return t},createRendererRootViewSyncFallback:function(){var e=this.getController();var t=sap.ui.xmlfragment("sap.ushell.renderer.RendererRootViewFallback",e);f.overrideUpdateAggregation(t);return t},createShellHeaderSync:function(){var e=new i;var t=sap.ui.xmlfragment("sap.ushell.renderer.shellHeader.ShellHeader",e);f.overrideUpdateAggregation(t);if(p.getShellMode()===A.Embedded){t.setNoLogo()}t.setModel(g.getModel(),"shellModel");t.setModel(l.i18nModel,"i18n");this.addDanglingControl(t);this._oShellHeader=t;this.waitForShellLayout().then(function(){t.placeAt(M.ShellHeader,"only");e.onInit()});return t},setNavigationBarMinHeight:function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(e){return e.isMenuEnabled()}).then(function(e){if(!e){return}this.waitForShellLayout().then(function(){var e=document.getElementById(M.NavigationBar);e.classList.add("sapUshellMenuBarHeight")})}.bind(this)).catch(function(t){e.info("Could not apply min-height of the navigationBar",t)})},createRightFloatingContainer:function(){sap.ui.require(["sap/ushell/ui/shell/RightFloatingContainer"],function(e){var t=new e({id:"right-floating-container",top:"2",right:"2",hideItemsAfterPresentation:true,visible:"{shellModel>/rightFloatingContainer/visible}",floatingContainerItems:{path:"shellModel>/rightFloatingContainer/items",factory:f.factory}});f.overrideUpdateAggregation(t);t.setModel(g.getModel(),"shellModel");this.addDanglingControl(t);this._oRightFloatingContainer=t;this.waitForShellLayout().then(function(){t.placeAt(M.RightFloatingContainer,"only")})}.bind(this))},initCanvasShapesManager:function(){this.bindFactory({model:g.getConfigModel(),factory:this.createCanvasShapesManager.bind(this),bindingPath:"/enableBackGroundShapes",bindingType:b.Property,valueCheck:function(e){return!!e}})},createCanvasShapesManager:function(){var e=setInterval(function(){if(d.isThemeApplied()){clearInterval(e);sap.ui.require(["sap/ushell/CanvasShapesManager"],function(e){e.drawShapes()})}},200)},createSubHeader:function(){sap.ui.require(["sap/ushell/ui/shell/SubHeader"],function(e){var t=new e({id:"subhdr",content:{path:"shellModel>/subHeader/items",factory:f.factory}});f.overrideUpdateAggregation(t);t.setModel(g.getModel(),"shellModel");this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(M.SubHeader,"only")})}.bind(this))},createFloatingContainer:function(){return h.create({name:"sap.ushell.components.shell.FloatingContainer"})},createSidePane:function(){sap.ui.require(["sap/ushell/ui/shell/SidePane"],function(e){var t=new e({id:"shell-sidePane",visible:"{shellModel>/sidePane/visible}",content:{path:"shellModel>/sidePane/items",factory:f.factory}});f.overrideUpdateAggregation(t);t.setModel(g.getModel(),"shellModel");this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(M.SidePane,"only")})}.bind(this))},createToolArea:function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(e){var t=new e({id:"shell-toolArea",visible:"{shellModel>/toolArea/visible}",toolAreaItems:{path:"shellModel>/toolArea/items",factory:f.factory}});f.overrideUpdateAggregation(t);t.setModel(g.getModel(),"shellModel");this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(M.ToolArea,"only")})}.bind(this))},createFloatingActions:function(){sap.ui.require(["sap/ushell/ui/shell/ShellFloatingActions"],function(e){var t=new e({id:"shell-floatingActions",floatingActions:{path:"shellModel>/floatingActions/items",factory:f.factory}});f.overrideUpdateAggregation(t);t.setModel(g.getModel(),"shellModel");this.addDanglingControl(t);this.waitForShellLayout().then(function(){t.placeAt(M.FloatingActions,"only")})}.bind(this))},initAllMyAppsView:function(){return sap.ushell.Container.getServiceAsync("AllMyApps").then(function(e){if(e.isEnabled()){return this.createAllMyAppsView()}}.bind(this))},createAllMyAppsView:function(){return s.create({id:"allMyAppsView",viewName:"sap.ushell.renderer.allMyApps.AllMyApps"}).then(function(e){e.setModel(g.getConfigModel(),"configModel");e.setModel(l.i18nModel,"i18n");e.addCustomData(new a({key:"aria-label",value:l.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.addDanglingControl(e);this.getShellHeader().getAppTitle().setAllMyApps(e)}.bind(this))},createPostCoreExtControls:function(){var e=g.getModel();sap.ui.require(["sap/ui/core/Popup"],function(e){e.setInitialZIndex(11)});this.bindFactory({model:e,factory:this.createFloatingContainer.bind(this),bindingPath:"/floatingContainer/items",bindingType:b.List,valueCheck:function(e){return!!e.length}});this.bindFactory({model:e,factory:this.createRightFloatingContainer.bind(this),bindingPath:"/rightFloatingContainer/visible",bindingType:b.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createSubHeader.bind(this),bindingPath:"/subHeader/items",bindingType:b.List,valueCheck:function(e){return!!e.length}});this.bindFactory({model:e,factory:this.createToolArea.bind(this),bindingPath:"/toolArea/visible",bindingType:b.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createSidePane.bind(this),bindingPath:"/sidePane/visible",bindingType:b.Property,valueCheck:function(e){return!!e}});this.bindFactory({model:e,factory:this.createFloatingActions.bind(this),bindingPath:"/floatingActions/items",bindingType:b.List,valueCheck:function(e){return!!e.length}});this.addPendingInitialization(this.initAllMyAppsView())},_allowUpToThreeActionInShellHeader:function(){const e=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"];const t=this.getViewDataConfig();e.reduce((e,n)=>{if(t[n]){e++}else{t[n]=false}return e},0)},_createUserActionsMenuButton:function(e){const n=u.getUser();const i=l.i18n.getText("UserActionsMenuToggleButtonAria",[n.getFullName()||n.getId()]);const a=new t({id:"userActionsMenuHeaderButton",src:"{configModel>/userImage/personPlaceHolder}",initials:n.getInitials(),ariaHasPopup:"Menu",displaySize:y.XS,tooltip:i,press:function(){o.emit("showUserActionsMenu",Date.now())}});a.setModel(e,"configModel");this.addDanglingControl(a);p.updateAllBaseStates("header.headEndItems",v.Add,"userActionsMenuHeaderButton")},getShellHeader:function(){return this._oShellHeader},getRightFloatingContainer:function(){return this._oRightFloatingContainer},bindFactory:function(e){var t=e.model;var n=e.factory;var i=e.bindingPath;var a=e.bindingType;var o=e.valueCheck;var l=t.getProperty(i);if(o(l)){n()}else{var r;switch(a){case b.List:r=t.bindList(i);break;default:r=t.bindProperty(i)}this.addDanglingBinding(r);r.attachChange(function(){l=r.getModel().getProperty(r.getPath());if(o(l)){this.removeDanglingBinding(r);r.destroy();n()}},this)}},addDanglingBinding:function(e){this.getController().addDanglingBinding(e)},removeDanglingBinding:function(e){this.getController().removeDanglingBinding(e)},addDanglingControl:function(e){this.getController().addDanglingControl(e)},addPendingInitialization:function(e){return this.getController().addPendingInitialization(e)}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/resources", ["sap/base/i18n/Localization","sap/ui/model/resource/ResourceModel"],function(e,r){"use strict";var t={};t.getTranslationModel=function(e){if(!this._oResourceModel){this._oResourceModel=new r({bundleUrl:sap.ui.require.toUrl("sap/ushell/renderer/resources/resources.properties"),bundleLocale:e})}return this._oResourceModel};t.getTranslationFromJSON=function(r){if(!r){return""}try{const t=JSON.parse(r);const o=e.getLanguage().toLowerCase();for(const[e,r]of Object.entries(t)){if(e.toLowerCase()===o){return r}}for(const[e,r]of Object.entries(t)){const t=e.toLowerCase();if(t.startsWith(o)||o.startsWith(t)){return r}}return t.default||""}catch(e){return r}};t.getRTL=function(){return e.getRTL()};t.i18nModel=t.getTranslationModel(e.getLanguage());t.i18n=t.i18nModel.getResourceBundle();return t},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppConfiguration", ["sap/base/i18n/Localization","sap/base/i18n/ResourceBundle","sap/base/Log","sap/base/util/ObjectPath","sap/m/library","sap/ui/core/IconPool","sap/ui/thirdparty/hasher","sap/ui/thirdparty/jquery","sap/ui/util/Mobile","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils/UrlParsing","sap/ushell/utils","sap/ushell/Container","sap/ushell/Config"],function(t,e,n,i,s,a,o,jQuery,r,c,p,l,u,h,f){"use strict";const g=s.ButtonType;function d(){const s={};let d=true;let m=null;let y=[];const I=[];this._applicationOpenedHandler=function(){d=false;while(I.length>0){I.shift()()}};c.on("AppRendered").do(this._applicationOpenedHandler.bind(this));this.addActivity=function(t){const e=new jQuery.Deferred;h.getServiceAsync("UserRecents").then(e=>e.addActivity(t)).then(e.resolve).catch(e.reject);return e.promise()};this.setApplicationInInitMode=function(){d=true};this.getApplicationRequestQueue=function(){return I};this.getCurrentApplication=function(){return m};this.getCurrentAppliction=this.getCurrentApplication;this.getMetadata=function(t,e){if(!t){t=m}if(t){let n;if(e){n=e.slice(1)}else{n=o?.getHash?o.getHash():""}const i=this._getMemoizationKey(n);return this._getMetadata(t,i)}return{}};this._getMemoizationKey=function(t){const[e,n]=t.split("?");const i=this._processParams(n);if(i){return e+i}const s=l.parseShellHash(t);if(s){const{semanticObject:t,action:e}=s;return`${t}-${e}`}return""};this._processParams=function(t){if(!t){return""}const e={};t.split("&").forEach(t=>{const[n,i]=t.split("=");e[n]=i});const n=Object.keys(e).sort();const i=n.reduce((t,n,i)=>{const s=`${n}=${e[n]}`;return`${t}${i>0?"&":"?"}${s}`},"");return i};this._getMetadata=function(t,e){if(!s.hasOwnProperty(e)||!s[e].complete){this.addMetadata(t,e)}if(!s[e]){s[e]={complete:false}}if(!s[e].title){s[e].title=t.text||p.i18n.getText("default_app_title")}return s[e]};this.setCurrentApplication=function(t){m=t;I.splice(0)};this.setHeaderHiding=function(){n.warning("Application configuration headerHiding property is deprecated and has no effect")};this.addApplicationSettingsButtons=function(t){if(d){I.push(()=>{this._addApplicationSettingsButtons(t)})}else{this._addApplicationSettingsButtons(t)}};this._addApplicationSettingsButtons=function(t){const e=h.getRendererInternal("fiori2");const n=[];for(let e=0;e<t.length;e++){const i=t[e];n.push(i.getId());i.setIcon(i.getIcon()||a.getIconURI("customize"));if(p.i18n.getText("userSettings")===i.getProperty("text")){i.setProperty("text",p.i18n.getText("userAppSettings"))}i.setType(g.Unstyled)}if(e){if(y.length){e.hideActionButton(y,true)}y=n;e.showActionButton(n,true,undefined,true)}};this.setWindowTitle=function(t){const e=p.getTranslationFromJSON(f.last("/core/shell/windowTitleExtension"));if(e){if(p.getRTL()){t=`${e} - ${t}`}else{t=`${t} - ${e}`}}window.document.title=t};this.setIcons=function(t){r.setIcons(t)};this.setApplicationFullWidth=function(t){this.setApplicationFullWidthInternal(t)};this.setApplicationFullWidthInternal=function(t){c.emit("setApplicationFullWidth",{bValue:t,date:Date.now()})};this.getApplicationName=function(t){const e=t?.additionalInformation;if(e){const t=/^SAPUI5\.Component=(.+)$/i.exec(e);if(t){return t[1]}}return null};this.getApplicationUrl=function(t){let e=t?.url;const n="P_TCODE";if(e){if(t.applicationType==="NWBC"&&e.indexOf(n)){return e}const i=e.indexOf("?");if(i>=0){e=e.slice(0,i)}if(e.slice(-1)!=="/"){e+="/"}}return e};this._getPropertyValueFromConfig=function(t,e,n){const i=`${e}Resource`;if(n&&t.hasOwnProperty(i)){return n.getText(t[i])}if(t.hasOwnProperty(e)){return t[e]}};this._getPropertyValueFromManifest=function(t,e,n){const s=e[n].manifestEntryKey;const a=e[n].path||"";const o=t.getManifestEntry(s);return i.get(a,o)};this.addMetadata=function(i,a){try{const o=this.getApplicationName(i);const r=this.getApplicationUrl(i);const c={fullWidth:{manifestEntryKey:"sap.ui",path:"fullWidth"},hideLightBackground:{manifestEntryKey:"sap.ui",path:"hideLightBackground"},title:{manifestEntryKey:"sap.app",path:"title"},icon:{manifestEntryKey:"sap.ui",path:"icons.icon"},favIcon:{manifestEntryKey:"sap.ui",path:"icons.favIcon"},homeScreenIconPhone:{manifestEntryKey:"sap.ui",path:"icons.phone"},"homeScreenIconPhone@2":{manifestEntryKey:"sap.ui",path:"icons.phone@2"},homeScreenIconTablet:{manifestEntryKey:"sap.ui",path:"icons.tablet"},"homeScreenIconTablet@2":{manifestEntryKey:"sap.ui",path:"icons.tablet@2"},startupImage320x460:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x920"},startupImage640x920:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x920"},startupImage640x1096:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x1096"},startupImage768x1004:{manifestEntryKey:"sap.ui",path:"icons.startupImage768x1004"},startupImage748x1024:{manifestEntryKey:"sap.ui",path:"icons.startupImage748x1024"},startupImage1536x2008:{manifestEntryKey:"sap.ui",path:"icons.startupImage1536x2008"},startupImage1496x2048:{manifestEntryKey:"sap.ui",path:"icons.startupImage1496x2048"},compactContentDensity:{manifestEntryKey:"sap.ui5",path:"contentDensities.compact"},cozyContentDensity:{manifestEntryKey:"sap.ui5",path:"contentDensities.cozy"}};const p=i?.componentHandle;if(!a){return}if(!s.hasOwnProperty(a)){s[a]={complete:false}}if(!s[a].complete){let l;let h;if(p){l=p.getInstance();h=p.getMetadata()}else if(o){n.warning(`No component handle available for '${o}'; SAPUI5 component metadata is incomplete`,null,"sap.ushell.services.AppConfiguration");return}if(l&&h){let n;const o=l._getManifestEntry("/sap.ui5/config",true);s[a].complete=true;if(o){let i=o.resourceBundle;if(i){if(i.slice(0,1)!=="/"){i=r+i}n=e.create({url:i,locale:t.getLanguage()})}}const p=!!l.getManifest();for(const t in c){if(c.hasOwnProperty(t)){if(p){s[a][t]=this._getPropertyValueFromManifest(l,c,t)}if(o&&s[a][t]===undefined){s[a][t]=this._getPropertyValueFromConfig(o,t,n)}}}s[a].version=l.getManifestEntry("/sap.app/applicationVersion/version");s[a].technicalName=h.getComponentName();this._setTitleFromNavResult(s[a],i)}else if(u.isApplicationTypeEmbeddedInIframe(i.applicationType)){const t="/~canvas;window=app/wda/";const e=i.url.indexOf(t);const n="/sap/bc/webdynpro/sap/";const o="/bc/gui/sap/its/webgui";const r=i.url.indexOf(o);if(e>=0){s[a].technicalName=i.url.substring(e+t.length,i.url.indexOf("/",e+t.length))}if(i.url.indexOf(n)>=0){s[a].technicalName=new RegExp(`${n}(.*)[?]`).exec(i.url)[1]}s[a].complete=true;if(r>=0){const t="etransaction=";const e=i.url.indexOf(t,r+o.length);const n=i.url.indexOf("&",e);const c=n>=0?n:i.url.length;s[a].technicalName=`${decodeURIComponent(i.url.substring(e+t.length,c))} (TCODE)`}}else{n.warning("No technical information for the given application could be determined",null,"sap.ushell.services.AppConfiguration")}}const l=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];const h=r?.[r.length-1]==="/"?r.substring(0,r.length-1):r;l.forEach(t=>{const e=s[a][t];let n=null;if(e){n=this._isUrlRelative(e)?`${h}/${e}`:e}s[a][t]=n})}catch(t){n.warning("Application configuration could not be parsed")}};this._isUrlRelative=function(t){if(!t){return false}if(t.match(/^https?:\/\/.*/)){return false}return t[0]!=="/"};this._setTitleFromNavResult=function(t,e){const n=e?.text;const i=t.technicalName;const s=f.last("/core/shell/useAppTitleFromNavTargetResolution")||[];if(n&&s.includes(i)){t.title=n}}}return new d},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppLifeCycle", ["sap/ui/base/EventProvider","sap/ui/core/Component","sap/ui/thirdparty/hasher","sap/ui/thirdparty/URI","sap/ushell/AppInfoParameters","sap/ushell/appIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/services/AppConfiguration","sap/ushell/TechnicalParameters"],(e,t,n,p,o,i,r,a,s,l,c)=>{"use strict";const u="appLoaded";function h(t,n,p,o){this._oCurrentApplication=null;this._oCurrentApplicationContainer=null;this._oEventProvider=new e;if(window.QUnit===undefined&&a.inAppRuntime()===false){if(r.last("/core/shell/enableMessageBroker")){a.getServiceAsync("MessageBroker").then(e=>{e.subscribe("FLP",[{channelId:"flp-app-info",version:"1.0"}],this._handleIncomingMessageBrokerMessage.bind(this,e),()=>{})})}}}h.prototype.init=function(e){e.attachAfterNavigate(this.onAfterNavigate.bind(this))};h.prototype._handleIncomingMessageBrokerMessage=function(e,t,n,p,o){if(n==="flp-app-info"&&p==="get-current-app-info"&&this._oCurrentApplication){this._oCurrentApplication.getAllAppInfo(true).then(n=>{e.publish("flp-app-info","FLP",Date.now().toString(),p,[t],n)})}};h.prototype.onAfterNavigate=async function(e){let n=false;const p=e.getParameter("to");let o;if(p?.isA?.("sap.ushell.appIntegration.ApplicationContainer")){o=p}let i;if(o&&typeof o.getComponentHandle==="function"&&o.getComponentHandle()){i=o.getComponentHandle().getInstance()}else if(o){const e=o.getAggregation("child");if(e){i=e.getComponentInstance()}}else{i=t.getComponentById(p?.getComponent?.());if(i?.isA?.("sap.ushell.renderer.rendererTargetWrapper.Component")){i=await i.getComponentInstance()}}if(i){const e=i.getId();n=e.indexOf("Shell-home-component")!==-1||e.indexOf("pages-component")!==-1||e.indexOf("workPageRuntime-component")!==-1||e.indexOf("Shell-appfinder-component")!==-1||e.indexOf("homeApp-component")!==-1||e.indexOf("runtimeSwitcher-component")!==-1}let r=o&&typeof o.getApplicationType==="function"&&o.getApplicationType();if((!r||r==="URL")&&i){r="UI5"}this._setCurrentApplicationObject(r,i,n,o)};h.prototype._getAppIntent=function(e){const t=n.getHash();let o;if(!t){return Promise.reject("Could not identify current application hash")}const i=a.getServiceAsync("URLParsing");return i.then(n=>{o=n.parseShellHash(t);if(e===true&&this._oCurrentApplicationContainer&&typeof this._oCurrentApplicationContainer.getCurrentAppUrl==="function"){const e=this._oCurrentApplicationContainer.getCurrentAppUrl();if(e){const t=new p(e).search(true);if(t.hasOwnProperty("sap-remote-intent")){o.semanticObject=t["sap-remote-intent"].split("-")[0];o.action=t["sap-remote-intent"].split("-")[1];delete o.params["sap-shell-so"];delete o.params["sap-shell-action"]}}}return o})};h.prototype._setCurrentApplicationObject=function(e,t,n,p){this._oCurrentApplicationContainer=p;this._oCurrentApplication={applicationType:e,componentInstance:t,homePage:n,getTechnicalParameter:function(n){return c.getParameterValue(n,t,p,e)},getIntent:this._getAppIntent.bind(this),getInfo:function(e){return o.getInfo(e,this._oCurrentApplication,p)}.bind(this),getAllAppInfo:function(e){return o.getAllAppInfo(e,this._oCurrentApplication,t,p).then(t=>{if(e===true){t.applicationType=this._oCurrentApplication.applicationType;t.homePage=this._oCurrentApplication.homePage}else{t.applicationType={value:this._oCurrentApplication.applicationType};t.homePage={value:this._oCurrentApplication.homePage}}return t})}.bind(this),getSystemContext:function(){const e=l.getCurrentApplication()||{};const t=e.contentProviderId||"";return a.getServiceAsync("ClientSideTargetResolution").then(e=>e.getSystemContext(t))},disableKeepAliveAppRouterRetrigger:function(e){s.emit("disableKeepAliveRestoreRouterRetrigger",{disable:e,appId:this._oCurrentApplicationContainer?.getCurrentAppId(),componentId:this._oCurrentApplication.componentInstance?.oContainer?.sId,date:Date.now()})}.bind(this)};setTimeout(()=>{this._oEventProvider.fireEvent(u,this._oCurrentApplication);s.emit("FESRAppLoaded",{technicalName:this._oCurrentApplication?.technicalName});if(window.QUnit===undefined&&a.inAppRuntime()===false){if(r.last("/core/shell/enableMessageBroker")){a.getServiceAsync("MessageBroker").then(e=>{this._oCurrentApplication.getAllAppInfo(true).then(t=>{e.publish("flp-app-info","FLP",Date.now().toString(),"new-app-info","*",t)})})}}},0)};h.prototype.getCurrentApplication=function(){return this._oCurrentApplication};h.prototype.attachAppLoaded=function(e,t,n){this._oEventProvider.attachEvent(u,e,t,n)};h.prototype.detachAppLoaded=function(e,t){this._oEventProvider.detachEvent(u,e,t)};h.prototype.prepareCurrentAppObject=function(e,t,n,p,o){this._setCurrentApplicationObject(e,t,n,p,o)};h.prototype.reloadCurrentApp=function(){var e=this.getCurrentApplication();s.emit("reloadCurrentApp",{sAppContainerId:this._oCurrentApplicationContainer?.getId?.(),sAppId:e.componentInstance?.getId?.(),sCurrentHash:n.getHash(),date:Date.now()})};h.prototype.setAppInfo=function(e,t){o.setCustomAttributes(e?.info);if(r.last("/core/shell/enableMessageBroker")){a.getServiceAsync("MessageBroker").then(e=>{this._oCurrentApplication.getAllAppInfo(true).then(n=>{e.publish("flp-app-info","FLP",Date.now().toString(),t===true?"new-app-info":"app-info-update","*",n)})})}};h.prototype.ApplicationType={UI5:"UI5",WDA:"WDA",NWBC:"NWBC",URL:"URL",TR:"TR"};h.prototype.AppInfoParameterName={productName:"productName",theme:"theme",languageTag:"languageTag",appIntent:"appIntent",appFrameworkId:"appFrameworkId",technicalAppComponentId:"technicalAppComponentId",appId:"appId",appVersion:"appVersion",appSupportInfo:"appSupportInfo",appFrameworkVersion:"appFrameworkVersion","abap.transaction":"abap.transaction"};h.hasNoAdapter=true;return h},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/AppState", ["sap/ui/base/Object","sap/ui/thirdparty/jquery","sap/ushell/services/appstate/AppState","sap/ushell/services/appstate/AppStatePersistencyMethod","sap/ushell/services/appstate/Sequentializer","sap/ushell/services/appstate/SequentializingAdapter","sap/ushell/services/appstate/WindowAdapter","sap/ushell/utils"],function(e,jQuery,t,n,s,i,r,a){"use strict";function o(e){return a.isDefined(e)&&a.isDefined(e.transient)?!!e.transient:true}function p(e,t,n,s){this._oConfig=s&&s.config;this._sSessionKey="";this._oAdapter=new i(e);this._oAdapter=new r(this,this._oAdapter,s)}p.prototype._getSessionKey=function(){if(!this._sSessionKey){this._sSessionKey=this._getGeneratedKey()}return this._sSessionKey};p.prototype.getAppState=function(e){var n=new jQuery.Deferred;var s=this;var i;this._loadAppState(e).done(function(e,r,a,o){i=new t(s,e,false,r,undefined,undefined,undefined,a,o);n.resolve(i)}).fail(function(){i=new t(s,e);n.resolve(i)});return n.promise()};p.prototype._getGeneratedKey=function(e){var t=a.generateRandomKey();if(e){t=("TAS"+t).substring(0,41)}else{t=("AS"+t).substring(0,40)}return t};p.prototype.createEmptyAppState=function(s,i,r,a){var p;var d="";var f="";var u=i||o(this._oConfig);var h=this._getGeneratedKey(u);if(r!==undefined&&!this.isPersistencyMethodSupported(r)){r=undefined;a=undefined}if(s){if(!e.isObjectA(s,"sap.ui.core.UIComponent")){throw new Error("oComponent passed must be a UI5 Component")}if(s.getMetadata&&s.getMetadata()&&typeof s.getMetadata().getName==="function"){d=s.getMetadata().getName()||""}if(!d&&s.getMetadata&&s.getMetadata().getComponentName){d=s.getMetadata().getComponentName()}if(s.getMetadata&&s.getMetadata()&&typeof s.getManifest==="function"&&typeof s.getManifest()==="object"&&typeof s.getManifest()["sap.app"]==="object"){f=s.getManifest()["sap.app"].ach||""}}if(u===true){r=a=undefined}else if(r===undefined&&this.isPersistencyMethodSupported(n.PersonalState)){r=n.PersonalState;a=undefined}p=new t(this,h,true,undefined,d,f,u,r,a);return p};p.prototype.createEmptyUnmodifiableAppState=function(){var e=this._getGeneratedKey();var n=new t(this,e,false);return n};p.prototype._saveAppState=function(e,t,s,i,r,p,d){var f=this._getSessionKey();var u=a.isDefined(r)?r:o(this._oConfig);if(u){p=undefined;d=undefined}else if(p!==undefined){if(!this.isPersistencyMethodSupported(p)){if(this.isPersistencyMethodSupported(n.PersonalState)){p=n.PersonalState}else{p=undefined}d=undefined}}return this._oAdapter.saveAppState(e,f,t,s,i,u,p,d)};p.prototype._keyIsJson=function(e){if(typeof e==="string"&&e.indexOf("{")===0){try{JSON.parse(e);return true}catch(e){return false}}return false};p.prototype._loadAppState=function(e){if(this._keyIsJson(e)){return(new jQuery.Deferred).resolve(e,e).promise()}return this._oAdapter.loadAppState(e)};p.prototype.deleteAppState=function(e){return this._oAdapter.deleteAppState(e)};p._getSequentializer=function(){return new s};p.prototype.getSupportedPersistencyMethods=function(){if(this._oAdapter.getSupportedPersistencyMethods){return this._oAdapter.getSupportedPersistencyMethods()}return[]};p.prototype.isPersistencyMethodSupported=function(e){var t=this.getSupportedPersistencyMethods();if(t.length>0&&e!==undefined){return t.indexOf(e)>=0}return false};p.prototype.setAppStateToPublic=function(e){var t=d(e,"sap-xapp-state");var s=d(e,"sap-iapp-state");var i=(new jQuery.Deferred).resolve();var r=(new jQuery.Deferred).resolve();var a=new jQuery.Deferred;var o;var p;if(t!==undefined){i=this.makeStatePersistent(t,n.PublicState).done(function(n){if(t!==n){e=e.replace(t,n);o=n}}).fail(a.reject)}if(s!==undefined){r=this.makeStatePersistent(s,n.PublicState).done(function(t){if(s!==t){e=e.replace(s,t);p=t}}).fail(a.reject)}jQuery.when(i,r).done(function(){a.resolve(e,t,s,o,p)});return a.promise()};function d(e,t){var n=new RegExp("(?:"+t+"=)([^&/]+)");var s=n.exec(e);var i;if(s&&s.length===2){i=s[1]}return i}p.prototype.makeStatePersistent=function(e,t,n){var s=new jQuery.Deferred;if(this.getSupportedPersistencyMethods().length===0){return s.resolve(e)}if(this._keyIsJson(e)){return s.resolve(e)}if(this.isPersistencyMethodSupported(t)){this.getAppState(e).done(function(i){if(i._iPersistencyMethod!==t){i.bTransient=false;i._iPersistencyMethod=t;i._oPersistencySettings=n;if(e.startsWith("TAS")){e=e.substring(1,e.length)}this._saveAppState(e,i._sData,i._sAppName,i._sACHComponent,false,t,n).done(function(){s.resolve(e)}).fail(s.reject)}else{s.resolve(e)}}.bind(this)).fail(s.reject)}else{s.reject("AppState.makeStatePersistent - adapter does not support persistence method: "+t)}return s.promise()};p.prototype.getPersistentWhenShared=function(){return this._oConfig&&this._oConfig.persistentWhenShared===true?true:false};p.WindowAdapter=r;p.hasNoAdapter=false;return p},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution", ["sap/base/Log","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/extend","sap/ushell/ApplicationType","sap/ushell/navigationMode","sap/ushell/services/ClientSideTargetResolution/Formatter","sap/ushell/services/ClientSideTargetResolution/InboundIndex","sap/ushell/services/ClientSideTargetResolution/InboundProvider","sap/ushell/services/ClientSideTargetResolution/ParameterMapping","sap/ushell/services/ClientSideTargetResolution/PrelaunchOperations","sap/ushell/services/ClientSideTargetResolution/Search","sap/ushell/services/ClientSideTargetResolution/StagedLogger","sap/ushell/services/ClientSideTargetResolution/SystemContext","sap/ushell/services/ClientSideTargetResolution/Utils","sap/ushell/services/ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/ClientSideTargetResolution/XAppStateProcessing","sap/ui/thirdparty/jquery","sap/ushell/TechnicalParameters","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/Container"],(e,t,n,s,i,a,o,r,l,u,c,d,p,f,g,h,m,jQuery,b,y,v,S)=>{"use strict";function w(e,t,n,s){this._init.apply(this,arguments)}w.prototype._init=function(t,n,s,i){this._iLogId=0;if(!this._implementsServiceInterface(t)){e.error("Cannot get Inbounds","ClientSideTargetResolutionAdapter should implement getInbounds method","sap.ushell.services.ClientSideTargetResolution");return}this._oInboundProvider=new l(t.getInbounds.bind(t));this._oHaveEasyAccessSystemsDeferreds={userMenu:null,sapMenu:null};this._oServiceConfiguration=i;this._oAdapter=t};w.prototype._implementsServiceInterface=function(e){if(typeof e.getInbounds==="function"){return true}return false};w.prototype._extractInboundFilter=function(e){if(!this._oAdapter.hasSegmentedAccess){return undefined}if(typeof e!=="string"){return undefined}const t=e.indexOf("#")===0?e:`#${e}`;const n=v.parseShellHash(t);if(!n||!n.semanticObject||!n.action){return undefined}return[{semanticObject:n.semanticObject,action:n.action}]};w.prototype.resolveHashFragment=async function(e){const t=this._extractInboundFilter(e);const n=await this._oInboundProvider.getInbounds(t);const s=await this._resolveHashFragment(e,n);return s};w.prototype._resolveHashFragmentWithFallback=async function(t,n,s){if(typeof this._oAdapter.resolveHashFragmentFallback!=="function"){e.error("Cannot resolve hash fragment",`${t} has matched an inbound that cannot be resolved client side and no resolveHashFragmentFallback method was implemented in ClientSideTargetResolutionAdapter`,"sap.ushell.services.ClientSideTargetResolution");throw new Error("No fallback provided")}const i=await y.promisify(this._oAdapter.resolveHashFragmentFallback(t,n,s));return i};w.prototype.resolveTileIntent=async function(e){const t=this._extractInboundFilter(e);const n=await this._oInboundProvider.getInbounds(t);const s=await this._resolveTileIntent(e,n);return s};w.prototype.resolveTileIntentInContext=async function(e,t){const n=r.createIndex(e.concat(h.getInbounds()));const s=await this._resolveTileIntent(t,n);return s};w.prototype._resolveHashFragment=async function(t,n){const s=t.indexOf("#")===0?t:`#${t}`;const i=v.parseShellHash(s);if(i===undefined){e.error(`Could not parse shell hash '${t}'`,"please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");throw new Error(`Could not parse shell hash '${t}'please specify a valid shell hash`)}i.formFactor=y.getFormFactor();let a=await this._getMatchingInbounds(i,n,{bExcludeTileInbounds:true});if(a.length===0){e.warning(`Could not resolve ${t}`,"rejecting promise","sap.ushell.services.ClientSideTargetResolution");throw new Error(`Could not resolve ${t}`)}a=this._applySapNavigationScopeFilter(a,i);const o=a[0];if(e.getLevel()>=e.Level.DEBUG){const t=function(e,t){return this[e]===undefined?"<undefined>":t};const n=function(e,n){return e==="_original"?undefined:t.call(this,e,n)};const s=JSON.stringify(o,n,"   ");e.debug("The following target will now be resolved",s,"sap.ushell.services.ClientSideTargetResolution")}return this._resolveSingleMatchingTarget(o,s)};w.prototype._applySapNavigationScopeFilter=function(e,t){const s=t&&t.params&&t.params["sap-navigation-scope-filter"];if(!s){return e}const i=e.filter(e=>{const t=n.get("inbound.signature.parameters",e);const i=t&&t["sap-navigation-scope"];if(i){return s[0]===i.defaultValue.value}return undefined});return i.length>0?i:e};w.prototype._resolveSingleMatchingTarget=async function(t,s){const o=v.parseShellHash(s);const r=[o.semanticObject,o.action].join("-");const l=(t.inbound.resolutionResult||{}).applicationType;let d;if(this._oAdapter.resolveSystemAlias){d=(...e)=>{const t=new jQuery.Deferred;y.promisify(this._oAdapter.resolveSystemAlias.apply(this._oAdapter,e)).then(t.resolve).catch(t.reject);return t}}const p=!!t.inbound.templateContext;const f=i.getEasyAccessMenuResolver(r,l);if(f&&!p){const e=await f(o,t,d,i.WDA.enableWdaCompatibilityMode);const n=a.getNavigationMode(e,(t.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(t.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0]);y.shallowMergeObject(e,n);e.inboundPermanentKey=t.inbound.permanentKey||t.inbound.id;return e}const g=this._getReservedParameters(t);u.mapParameterNamesAndRemoveObjects(t);const h=await S.getServiceAsync("AppState");t=await m.mixAppStateIntoResolutionResultAndRename(t,h);delete t.intentParamsPlusAllDefaults["sap-tag"];delete t.mappedIntentParamsPlusSimpleDefaults["sap-tag"];t.mappedDefaultedParamNames=t.mappedDefaultedParamNames.filter(e=>e!=="sap-tag");const b=n.get("inbound.resolutionResult.url",t);await c.executePrelaunchOperations(t,g["sap-prelaunch-operations"]);try{let n;if(i[l]){n=i[l].generateResolutionResult}else{n=()=>this._constructFallbackResolutionResult(t,s)}const o=await n(t,b,d);const r=a.getNavigationMode(o,(t.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(t.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0]);y.shallowMergeObject(o,r);o.reservedParameters=g;o.inboundPermanentKey=t.inbound.permanentKey||t.inbound.id;if(t.inbound.resolutionResult?.appInfo){o.appInfo=t.inbound.resolutionResult.appInfo}e.debug("Intent was resolved to the following target",JSON.stringify(o,null,3),"sap.ushell.services.ClientSideTargetResolution");y.shallowMergeObject(t.resolutionResult,o);return t.resolutionResult}catch(e){if(typeof e==="string"&&e.indexOf("fallback:")>=0){const e=await this._constructFallbackResolutionResult(t,s);y.shallowMergeObject(t.resolutionResult,e);return t.resolutionResult}throw e}};w.prototype._getReservedParameters=function(e){const t=b.getParameters({injectFrom:"startupParameter"}).map(e=>e.name);const n=g.extractParameters(t,e.intentParamsPlusAllDefaults);b.getParameters({injectFrom:"inboundParameter"}).forEach(t=>{const s=t.name;const i=e.inbound&&e.inbound.signature&&e.inbound.signature.parameters;if(i&&Object.keys(i).length>0){const t=i[s];const a=t&&t.defaultValue&&t.defaultValue.hasOwnProperty("value");const o=t&&t.filter&&t.filter.hasOwnProperty("value");if(t&&(o||a)){if(a){n[s]=t.defaultValue.value}else{n[s]=t.filter.value}}else{delete n[s]}delete e.intentParamsPlusAllDefaults[s];const r=e.defaultedParamNames.indexOf(s);if(r>=0){e.defaultedParamNames.splice(r,1)}}});return n};w.prototype._resolveTileIntent=async function(t,n){const s=t.indexOf("#")===0?t:`#${t}`;const i=v.parseShellHash(s);if(i===undefined){e.error(`Could not parse shell hash '${t}'`,"please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");throw new Error("Cannot parse shell hash")}i.formFactor=y.getFormFactor();const a=await this._getMatchingInbounds(i,n,{bExcludeTileInbounds:false});if(a.length===0){e.warning(`Could not resolve ${t}`,"no matching targets were found","sap.ushell.services.ClientSideTargetResolution");throw new Error("No matching targets found")}const o=a[0];return this._resolveSingleMatchingTileIntent(o,s)};w.prototype._resolveSingleMatchingTileIntent=async function(t,o){const r=(t.inbound.resolutionResult||{}).applicationType;let l;if(this._oAdapter.resolveSystemAlias){l=(...e)=>{const t=new jQuery.Deferred;y.promisify(this._oAdapter.resolveSystemAlias.apply(this._oAdapter,e)).then(t.resolve).catch(t.reject);return t}}u.mapParameterNamesAndRemoveObjects(t);const c=await S.getServiceAsync("AppState");t=await m.mixAppStateIntoResolutionResultAndRename(t,c);delete t.intentParamsPlusAllDefaults["sap-tag"];delete t.mappedIntentParamsPlusSimpleDefaults["sap-tag"];t.mappedDefaultedParamNames=t.mappedDefaultedParamNames.filter(e=>e!=="sap-tag");const d=n.get("inbound.resolutionResult.url",t);let p;if(i[r]){p=i[r].generateResolutionResult}else{p=()=>this._constructFallbackResolutionResult(t,o)}const f=await p(t,d,l);y.shallowMergeObject(t.resolutionResult,f);const g=s({},t.inbound.tileResolutionResult);g.startupParameters=t.effectiveParameters;const h=a.getNavigationMode(f,(t.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(t.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0]);y.shallowMergeObject(g,h);e.debug("Tile Intent was resolved to the following target",JSON.stringify(g,null,3),"sap.ushell.services.ClientSideTargetResolution");return g};w.prototype._constructFallbackResolutionResult=async function(t,n){const i={};Object.keys(t.intentParamsPlusAllDefaults).forEach(e=>{if(Array.isArray(t.intentParamsPlusAllDefaults[e])){i[e]=t.intentParamsPlusAllDefaults[e]}});const a=t.mappedDefaultedParamNames||t.defaultedParamNames;if(a.length>0){i["sap-ushell-defaultedParameterNames"]=[JSON.stringify(a)]}e.warning("Cannot resolve hash fragment client side",`${n} has matched an inbound that cannot be resolved client side. Using fallback logic`,"sap.ushell.services.ClientSideTargetResolution");const o=await this._resolveHashFragmentWithFallback(n,s({},t.inbound),i);const r={};["applicationType","additionalInformation","url","applicationDependencies","text"].forEach(e=>{if(o.hasOwnProperty(e)){r[e]=o[e]}});return r};w.prototype.getDistinctSemanticObjects=async function(){const e={};const t=await this._oInboundProvider.getInbounds();t.getAllInbounds().forEach(t=>{if(typeof t.semanticObject==="string"&&t.semanticObject!=="*"&&!t.hideIntentLink&&t.semanticObject.length>0){e[t.semanticObject]=true}});return Object.keys(e).sort()};w.prototype.getLinks=async function(n){let i;if(arguments.length===1&&t(arguments[0])){const e=arguments[0];i=s({},e);["action","semanticObject"].forEach(t=>{if(e.hasOwnProperty(t)){i[t]=e[t]}});if(i.appStateKey){i.params=i.params||{};i.params["sap-xapp-state"]=[i.appStateKey];delete i.appStateKey}}else if(arguments.length<=3){e.warning("Passing positional arguments to getLinks is deprecated","Please use nominal arguments instead","sap.ushell.services.ClientSideTargetResolution");const t=arguments[0];const n=arguments[1];const s=arguments[2];i={semanticObject:t,params:n,ignoreFormFactor:s}}else{throw new Error("Invalid arguments for getLinks")}const a=await this._oInboundProvider.getInbounds();const o=await this._getLinks(i,a);return o};w.prototype._validateGetSemanticObjectLinksArgs=function(t){const n=t.semanticObject;const s=t.action;const i=!t.hasOwnProperty("action");if(typeof n!=="undefined"||i){if(typeof n!=="string"){e.error("invalid input for _getLinks",`the semantic object must be a string, got ${Object.prototype.toString.call(n)} instead`,"sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object"}if(i&&n.match(/^\s+$/)){e.error("invalid input for _getLinks",`the semantic object must be a non-empty string, got '${n}' instead`,"sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object"}if(!i&&n.length===0){e.error("invalid input for _getLinks",`the semantic object must not be an empty string, got '${n}' instead`,"sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object"}}if(typeof s!=="undefined"){if(typeof s!=="string"){e.error("invalid input for _getLinks",`the action must be a string, got ${Object.prototype.toString.call(s)} instead`,"sap.ushell.services.ClientSideTargetResolution");return"invalid action"}if(s.length===0){e.error("invalid input for _getLinks",`the action must not be an empty string, got '${s}' instead`,"sap.ushell.services.ClientSideTargetResolution");return"invalid action"}}return undefined};w.prototype._getLinks=async function(t,s){const i=t.semanticObject;const a=t.action;const o=t.params;const r=!!t.withAtLeastOneUsedParam;const l=!!t.treatTechHintAsFilter;const u=t.ignoreFormFactor;const c=t.hasOwnProperty("sortResultsBy")?t.sortResultsBy:"intent";if(t.hasOwnProperty("sortResultOnTexts")){e.warning("the parameter 'sortResultOnTexts' was experimental and is no longer supported",`getLinks results will be sorted by '${c}'`,"sap.ushell.services.ClientSideTargetResolution")}const d={bExcludeTileInbounds:true};const p=this._validateGetSemanticObjectLinksArgs(t);if(t.tags){d.tags=t.tags}if(p){throw new Error(p)}if(i==="*"){return[]}function f(e){const t=v.paramsToString(e);return t?`?${t}`:""}const h=y.getFormFactor();const m=v.parseParameters(f(o));const b={semanticObject:i===""?undefined:i,action:a,formFactor:u?undefined:h,params:m};if(l){b.treatTechHintAsFilter=true}const S=await this._getMatchingInbounds(b,s,d);const w={};const R=S.map(e=>{const s=i||e.inbound.semanticObject;const a=`#${s}-${e.inbound.action}`;let o;if(s==="*"){return undefined}if(e.inbound.action==="*"){return undefined}if(e.inbound&&e.inbound.hasOwnProperty("hideIntentLink")&&e.inbound.hideIntentLink===true){return undefined}if(!w.hasOwnProperty(a)){w[a]={matchingInbound:e.inbound,count:1};if(e.inbound.signature.additionalParameters==="ignored"){o=g.filterObjectKeys(m,t=>t.indexOf("sap-")===0||e.inbound.signature.parameters.hasOwnProperty(t),false)}else{o=m}if(r){const e=Object.keys(o).some(e=>e.indexOf("sap-")!==0);if(!e){w[a].hideReason="getLinks called with 'withAtLeastOneUsedParam = true', but the inbound had no business parameters defined.";return undefined}}const s=g.inboundSignatureMeetsParameterOptions(e.inbound.signature.parameters,t.paramsOptions||[]);if(!s){w[a].hideReason="inbound signature does not meet the requested parameter filter options";return undefined}const i={intent:a+f(o),text:e.inbound.title};if(e.inbound.icon){i.icon=e.inbound.icon}if(e.inbound.subTitle){i.subTitle=e.inbound.subTitle}if(e.inbound.shortTitle){i.shortTitle=e.inbound.shortTitle}const l=n.get("inbound.signature.parameters.sap-tag.defaultValue.value",e);if(l){i.tags=[l]}return i}w[a].count++;return undefined}).filter(e=>typeof e==="object");if(c!=="priority"){R.sort((e,t)=>e[c]<t[c]?-1:1)}if(R.length===0){e.debug("_getLinks returned no results")}else if(e.getLevel()>=e.Level.DEBUG){if(e.getLevel()>=e.Level.TRACE){const t=[];const n=[];R.forEach(e=>{const s=e.intent.split("?")[0];if(w[s].hideReason){n.push(["-",`${s}(${w[s].hideReason})\n`," text:",`${e.text}\n`," full intent:",e.intent].join(" "))}else{t.push(["-",s,w[s].count>1?`(${w[s].count-1} others matched)\n`:"\n","text:",`${e.text}\n`,"full intent:",e.intent].join(" "))}});e.debug("_getLinks filtered to the following unique intents:",`\n${t.join("\n")}`,"sap.ushell.services.ClientSideTargetResolution");e.debug("_getLinks would have also returned the following unique intents, but something prevented this:",n.join("\n"),"sap.ushell.services.ClientSideTargetResolution")}else{e.debug("_getLinks filtered to unique intents.",`Reporting histogram: \n - ${Object.keys(w).join("\n - ")}`,"sap.ushell.services.ClientSideTargetResolution")}}return R};w.prototype._getMatchingInbounds=async function(t,n,s){const i=this;let a;let r;let l;let u;if(s){a=s.tags;l=s.bExcludeTileInbounds}if(e.getLevel()>=e.Level.DEBUG){r=++i._iLogId}p.begin(()=>{function e(e){const t=e.action||(typeof e.action==="undefined"?"<any>":"<invalid-value>");const n=e.semanticObject||(typeof e.semanticObject==="undefined"?"<any>":"<invalid-value>");return v.constructShellHash({semanticObject:n,action:t,params:e.params})}const n=e(t);return{logId:r,title:`Matching Intent '${n}' to inbounds (form factor: ${t.formFactor||"<any>"})`,moduleName:"sap.ushell.services.ClientSideTargetResolution",stages:["STAGE1: Find matching inbounds","STAGE2: Resolve references","STAGE3: Rematch with references","STAGE4: Sort matched targets"]}});function c(){p.end(()=>({logId:r}))}const f=t.semanticObject;const g=t.action;this._oShellHash=t;const h=a?n.getSegmentByTags(a):n.getSegment(f,g);if(l){u=h.filter(e=>!e.tileResolutionResult||!e.tileResolutionResult.isCustomTile)}else{u=h}let m=null;if(this._oAdapter.getContentProviderDataOriginsLookup){m=this._oAdapter.getContentProviderDataOriginsLookup.bind(this._oAdapter)}const b=await d.match(t,u,{},m,e.getLevel()>=e.Level.DEBUG);p.log(()=>({logId:r,stage:1,prefix:"✘",lines:Object.keys(b.noMatchReasons||{}).map(e=>`${e} ${b.noMatchReasons[e]}`)}));p.log(()=>{const e=b.matchResults.map(e=>o.formatInbound(e.inbound));return{logId:r,stage:1,prefix:e.length>0?"✅":"✘",lines:e.length>0?e:["No inbound was matched"]}});const y={};let w=false;let R=Object.keys(b.missingReferences);R.forEach(e=>{const t=Object.keys(b.missingReferences[e]);w=w||t.length>0;y[e]=t});R=R.filter(e=>{if(y[e].length>0){return true}delete y[e];return false});let I;if(w){try{R.forEach(e=>{p.log(()=>({logId:r,stage:2,line:`@ Must resolve the following references with contentProviderId = "${e}":`,prefix:"•",lines:y[e]}))});const e=await S.getServiceAsync("ReferenceResolver");const t=await Promise.all(R.map(e=>this.getSystemContext(e)));const n=await Promise.all(R.map((n,s)=>e.resolveReferences(y[n],t[s])));const s={matchResults:b.matchResults,referencesToInclude:{}};R.forEach((e,t)=>{const i=n[t];s.referencesToInclude[e]=i;if(Object.keys(i).length>0){p.log(()=>({logId:r,stage:2,line:`✅ resolved references with contentProviderId = "${e}" to the following values:`,prefix:"•",lines:Object.keys(i).map(e=>`${e}: '${i[e]}'`)}))}});I=s}catch(e){p.log(()=>({logId:r,stage:2,prefix:"❌",line:`Failed to resolve references: ${e}`}));c();return[]}}else{p.log(()=>({logId:r,stage:2,prefix:"✅",line:"No need to resolve references"}));I={matchResults:b.matchResults,referencesToInclude:null}}let P;if(I.referencesToInclude){const e=I.matchResults;const n=e.map(e=>e.inbound);P=await d.match(t,n,I.referencesToInclude,m,0);p.log(()=>{const e=P.matchResults||[];if(e.length>=1){return{logId:r,stage:3,line:"The following inbounds re-matched:",lines:e.map(e=>o.formatInbound(e.inbound)),prefix:"✅"}}return{logId:r,stage:3,line:"No inbounds re-matched",prefix:"-"}})}else{p.log(()=>({logId:r,stage:3,line:"rematch was skipped (no references to resolve)",prefix:"✅"}));P=I}const T=P.matchResults||[];if(T.length<=1){p.log(()=>({logId:r,stage:4,line:"Nothing to sort"}));c();return T}const A=d.sortMatchingResultsDeterministic(P.matchResults||[]);p.log(()=>{const e=A.map(e=>`${o.formatInbound(e.inbound||{})+(e.matchesVirtualInbound?" (virtual)":"")}\n[ Sort Criteria ] `+`\n * 1 * sap-priority: '${e["sap-priority"]}'`+`\n * 2 * Sort string: '${e.priorityString}\n * 3 * Deterministic blob: '${d.serializeMatchingResult(e)}'`);return{logId:r,stage:4,line:"Sorted inbounds as follows:",lines:e,prefix:".",number:true}});c();return A};w.prototype._isIntentSupportedOne=async function(e,t){const n=v.parseShellHash(e);if(e==="#"){return true}if(n===undefined){throw new Error(`Could not parse shell hash '${e}'`)}n.formFactor=y.getFormFactor();const s=await this._getMatchingInbounds(n,t,{bExcludeTileInbounds:true});return s.length>0};w.prototype.isIntentSupported=async function(e){const t=await this._oInboundProvider.getInbounds();const n=await this._isIntentSupported(e,t);return n};w.prototype._isIntentSupported=async function(e,t){const n={};await Promise.all(e.map(async e=>{try{const s=await this._isIntentSupportedOne(e,t);n[e]={supported:s}}catch(e){throw new Error(`One or more input intents contain errors: ${e}`)}}));return n};w.prototype.getUserDefaultParameterNames=async function(e){const t=await this._oInboundProvider.getInbounds();const n=await this._getUserDefaultParameterNames(t.getAllInbounds(),e);return n};w.prototype._getUserDefaultParameterNames=function(e,t){const n={simple:{},extended:{}};e=e.filter(e=>{if(e.contentProviderId===undefined&&t.id===""){return true}return e.contentProviderId===t.id});return S.getServiceAsync("ReferenceResolver").then(t=>{e.forEach(e=>{const s=e.signature&&e.signature.parameters||[];Object.keys(s).forEach(e=>{const i=s[e];let a;if(i){if(i.filter&&i.filter.format==="reference"){a=i.filter.value}else if(i.defaultValue&&i.defaultValue.format==="reference"){a=i.defaultValue.value}if(typeof a==="string"){const e=t.extractUserDefaultReferenceName(a);if(typeof e==="string"){n.simple[e]={}}const s=t.extractExtendedUserDefaultReferenceName(a);if(typeof s==="string"){n.extended[s]={}}}}})});return n})};w.prototype.getEasyAccessSystems=function(e){e=e||"sapMenu";if(!this._oHaveEasyAccessSystemsDeferreds[e]){this._oHaveEasyAccessSystemsDeferreds[e]=this._getEasyAccessSystems(e)}return this._oHaveEasyAccessSystemsDeferreds[e]};w.prototype._getEasyAccessSystems=async function(s){const a={};const r=i.getEasyAccessMenuDefinitions().reduce((e,t)=>{const n=t.easyAccessMenu.intent.split("-")[1];e[n]={appType:t.type,priority:t.easyAccessMenu.systemSelectionPriority};return e},{});let l;switch(s){case"userMenu":l=i.getEasyAccessMenuDefinitions().reduce((e,t)=>{const n=t.easyAccessMenu.intent;e[n]=t.easyAccessMenu.showSystemSelectionInUserMenu;return e},{});break;case"sapMenu":l=i.getEasyAccessMenuDefinitions().reduce((e,t)=>{const n=t.easyAccessMenu.intent;e[n]=t.easyAccessMenu.showSystemSelectionInSapMenu;return e},{});break;default:throw new Error(`Invalid menu type: '${s}'`)}const u=await this._oInboundProvider.getInbounds();const c={};const d=y.getFormFactor();u.getAllInbounds().filter(e=>{if(!e){return false}const t=[e.semanticObject,e.action].join("-");return l[t]&&e.deviceTypes&&d!==undefined&&e.deviceTypes[d]}).forEach(s=>{let i;if(t(s.signature.parameters["sap-system"])&&s.signature.parameters["sap-system"].hasOwnProperty("filter")){i=n.get("signature.parameters.sap-system.filter.value",s)}if(typeof i==="string"){const e=r[s.action].priority;const t=r[s.action].appType;if(!a[i]){c[i]=-1;a[i]={appType:{}}}if(c[i]<e){a[i].text=s.title;c[i]=e}a[i].appType[t]=true}else{e.warning(`Cannot extract sap-system from easy access menu inbound: ${o.formatInbound(s)}`,`This parameter is supposed to be a string. Got '${i}' instead.`,"sap.ushell.services.ClientSideTargetResolution")}});return a};w.prototype.getSystemContext=async function(e){const t=e===undefined?"":e;const n=await y.promisify(this._oAdapter.resolveSystemAlias(t));const s=f.createSystemContextFromSystemAlias(n);return s};w.hasNoAdapter=false;return w},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution/Formatter", [],function(){"use strict";function e(e){return"#"+e.semanticObject+"-"+e.action+"{"+n(e.signature)+"}"}function r(e){var r=e.match(/^#(.+?)-(.+?)({(.+)})?$/);if(!r){throw new Error("Cannot parse inbound")}var n={semanticObject:r[1],action:r[2],signature:{parameters:{}}};if(!r[3]){return n}n.signature=a(r[4]);return n}function n(e){var r=e||{},n=r.parameters||{},a={optional:"[FORMAT]",required:"FORMAT"},t={regexp:"/VALUE/",reference:"@VALUE@",value:"VALUE",plain:"VALUE",_unknown:"?VALUE?"},u={allowed:"<+>",notallowed:"<->",ignored:"<o>",_unknown:"<?>"};var i=n&&Object.prototype.toString.apply(n)==="[object Object]"&&Object.keys(n).length>0;if(!i){return"<no params>"+(u[r.additionalParameters]||u._unknown)}var o=[];Object.keys(n).forEach(function(e){var r=n[e],u=r.required?"required":"optional",i=r.filter&&r.filter.value,l=r.defaultValue&&r.defaultValue.value,f=r.filter&&r.filter.format||"plain",s=r.defaultValue&&r.defaultValue.format||"plain";var c=[],p=t[f]||t._unknown,d=t[s]||t._unknown;if(i){c.push(a["required"].replace("FORMAT",p.replace("VALUE",i)))}if(l){c.push(a["optional"].replace("FORMAT",d.replace("VALUE",l)))}o.push(a[u].replace("FORMAT",e+":"+c.join("")))});return o.join(",")+(u[r.additionalParameters]||u._unknown)}function a(e){function r(e){var r=[{re:new RegExp(/^[/](.+)[/]$/),format:"regexp"},{re:new RegExp(/^[@](.+)[@]$/),format:"reference"},{re:new RegExp(/^[?](.+)[?]$/),format:"???"}].reduce(function(r,n){var a=e.match(n.re);if(r){return r}if(!a){return null}return{format:n.format,value:a[1]}},null);if(r){return r}return{value:e}}function n(e){var n,a,t,u,i,o,l,f,s,c,p,d;d="<no params>";n="[^\\]\\[]";p="("+n+"+?):("+n+"*)(.*)";c="\\["+p+"\\]";s=d+"|"+c+"|"+p;f=new RegExp("^"+s+"$");i={success:false,name:null,value:{}};l=e.match(f);if(!l){return i}o=l.shift();while(l.length>0){u=l.shift();t=l.shift();a=l.shift();if(u){i.name=u;if(t){i.value.filter=r(t)}if(a){i.value.defaultValue=r(a.replace(/\[(.+)\]/,"$1"))}i.value.required=o.charAt(0)!=="["}}i.success=true;return i}function a(e){return[{"<+>":"allowed"},{"<->":"notallowed"},{"<o>":"ignored"}].reduce(function(r,n,a,t){if(r){return r}var u=Object.keys(n)[0];if(e===u){return n[u]}return null},null)}function t(e){var r=[];e.split(":").reduce(function(e,n,a,t){var u,i,o;if(a===0){return n}if(a<t.length-1){o=n.split(",");if(o.length>1){i=o.pop();u=o.join(",")}else{return e+":"+n}}else{u=n}r.push([e,u].join(":"));return i},"");return r}var u={parameters:{}};var i=e.substr(e.length-3,3);var o=!!i.match(/<[?o+-]>/);var l=e;if(o){l=e.substr(0,e.length-3)}var f=t(l);f.forEach(function(r){var a=n(r);if(!a.success){throw new Error("Cannot parse parameters from "+e)}if(a.name){u.parameters[a.name]=a.value}});if(o){var s=a(i);if(s){u.additionalParameters=a(i)}}else{u.additionalParameters="ignored"}return u}return{formatInboundSignature:n,parseInboundSignature:a,parseInbound:r,formatInbound:e}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution/InboundIndex", ["sap/base/util/ObjectPath","sap/base/Log"],function(e,n){"use strict";function t(){return this.index.all}function i(e){if(e==="*"||e===undefined){return this.index.all}return(this.index.segment[e]||[]).concat(this.index.always)}function a(e){return e.map(function(e){return this.index.tag[e]||[]},this).reduce(function(e,n){Array.prototype.push.apply(e,n.filter(function(e){return e.isAlreadyInUnion?false:e.isAlreadyInUnion=true}));return e},[]).map(function(e){delete e.isAlreadyInUnion;return e})}var r={getSegment:i,getAllInbounds:t,getSegmentByTags:a};function u(n,t){var i=e.get("signature.parameters.sap-tag.defaultValue.value",n);if(!i){return}if(!t.tag[i]){t.tag[i]=[]}t.tag[i].push(n)}function s(e,n){var t=e.semanticObject;if(t==="*"){n.always.push(e)}else{if(!n.segment[t]){n.segment[t]=[]}n.segment[t].push(e)}}function o(e){var t={all:e,segment:{},always:[],tag:{}};e.forEach(function(e,i){if(!e){n.warning("Void inbound provided to indexer","the inbound will be skipped");return}u(e,t);s(e,t)});r.index=t;return r}return{createIndex:o,private:{tagInbound:u,createIndex:o,segmentInbound:s}}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution/InboundProvider", ["sap/ushell/services/ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/ClientSideTargetResolution/InboundIndex","sap/ushell/utils"],function(n,e,t){"use strict";function i(){this._init.apply(this,arguments)}i.prototype._init=function(n){this._fnRetrieveInbounds=n;this._oInboundsRetrievalPromise=null};i.prototype.getInbounds=function(n){if(n){return this._getSomeInbounds(n)}return this._getAllInbounds()};i.prototype._getSomeInbounds=async function(i){const s=await t.promisify(this._fnRetrieveInbounds(i));return e.createIndex(s.concat(n.getInbounds()))};i.prototype._getAllInbounds=function(){if(!this._oInboundsRetrievalPromise){this._oInboundsRetrievalPromise=t.promisify(this._fnRetrieveInbounds()).then(t=>e.createIndex((t||[]).concat(n.getInbounds())))}return this._oInboundsRetrievalPromise};return i});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution/ParameterMapping", ["sap/base/Log"],function(e){"use strict";function a(a){var t={},n=a.intentParamsPlusAllDefaults;Object.keys(n).sort().forEach(function(s){var i=r(s,a.inbound.signature,n[s]);if(Array.isArray(a.intentParamsPlusAllDefaults[s])){if(t[i]){e.error('collision of values during parameter mapping : "'+s+'" -> "'+i+'"')}else{t[i]=a.intentParamsPlusAllDefaults[s]}}});a.mappedIntentParamsPlusSimpleDefaults=t}function r(e,a,r){if(!r||!Array.isArray(r)){return e}if(a&&a.parameters&&a.parameters[e]&&a.parameters[e].renameTo){return a.parameters[e].renameTo}return e}return{mapParameterNamesAndRemoveObjects:a,getRenameParameterName:r}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution/PrelaunchOperations", ["sap/base/Log","sap/base/util/deepExtend","sap/fe/navigation/SelectionVariant","sap/ushell/utils","sap/ushell/Container"],function(e,t,r,a,n){"use strict";var i="sap.ushell.services.ClientSideTargetResolution.PrelaunchOperations";async function s(e){if(!e){return null}return n.getServiceAsync("AppState").then(function(t){return new Promise(function(r,a){t.getAppState(e).done(function(e){r(e)}).fail(function(e){a(e)})})})}async function o(e,t,r,i,s){if(e.startupParametersModified){t.mappedIntentParamsPlusSimpleDefaults=i}if(e.defaultedParameterNamesModified){t.mappedDefaultedParamNames=s}if(e.selectionVariantModified){const e=await n.getServiceAsync("AppState");var o=e.createEmptyAppState(undefined,true);o.setData({selectionVariant:r.toJSONObject()});await a.promisify(o.save());t.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[o.getKey()]}return Promise.resolve(t)}function l(e){var t=e.type;switch(t){case"merge":case"split":return t+" - source: "+e.source+" & target: "+e.target;case"delete":return t+" - target: "+e.target;default:return""}}function u(e,t){if(t.getSelectOption(e)){return t.getSelectOption(e)[0].Low}return undefined}function f(e,t){if(t.getSelectOption(e)){return t.getSelectOption(e)[0].High}return undefined}function d(e,t){if(t[e]){return t[e][0]}return undefined}function p(e,t,r){var a=e.source[0],n=e.source[1],i=u(a,t),s=u(n,t),o=d(a,r),l=d(n,r),f,p,c=e.target;function m(e,t){if(t===undefined||e===t){return e}return undefined}if(i&&s){f=m(i,o);p=m(s,l)}else if(o&&l){f=m(o,i);p=m(l,s)}if(f&&p&&!t.getSelectOption(c)&&!r.hasOwnProperty(c)){t.addSelectOption(c,"I","BT",f,p);return{selectionVariantModified:true,startupParametersModified:false,defaultedParameterNamesModified:false}}return{}}function c(t,r,a){var n=t.target,i=t.source;if(!r.getSelectOption(i)){e.error("Invalid split operation: "+i+" does not exist in selection variant");return false}if(r.getSelectOption(n[0])){e.error("Invalid split operation: "+n[0]+" already exists in selection variant");return false}if(r.getSelectOption(n[1])){e.error("Invalid split operation: "+n[1]+" already exists in selection variant");return false}if(a[n[0]]){e.error("Invalid split operation: "+n[0]+" already exists in startup parameters");return false}if(a[n[1]]){e.error("Invalid split operation: "+n[1]+" already exists in startup parameters");return false}return true}function m(e,t,r){var a=e.target,n=e.source,i=c(e,t,r);if(i){var s=u(n,t),o=f(n,t);t.addSelectOption(a[0],"I","EQ",s,null);r[a[0]]=[s];t.addSelectOption(a[1],"I","EQ",o||s,null);r[a[1]]=[o||s];return{selectionVariantModified:true,startupParametersModified:true,defaultedParameterNamesModified:false}}return{}}function g(t,r,a,n){var i=t.target,s={selectionVariantModified:false,startupParametersModified:false,defaultedParameterNamesModified:false};for(var o=0;o<i.length;o++){var l=i[o];if(l==="sap-xapp-state"){e.warning("Cannot execute delete: 'sap-xapp-state' is not allowed to be deleted");continue}if(r.getParameter(l)){r.removeParameter(l);s.selectionVariantModified=true}if(r.getSelectOption(l)){r.removeSelectOption(l);s.selectionVariantModified=true}if(a[l]){delete a[l];s.startupParametersModified=true}var u=n.indexOf(l);if(u>-1){n.splice(u,1);s.defaultedParameterNamesModified=true}}return s}function v(t){var r;if(t===""){return[]}t=t.replaceAll("“",'"');t=t.replaceAll("”",'"');try{r=JSON.parse(t)}catch(t){e.error("Cannot parse operation array: sap-prelaunch-operations should be in json format.");return[]}if(!Array.isArray(r)){e.error("Invalid operation array: sap-prelaunch-operations should be an array.");return[]}return r}function y(t){if(t.length===0){return null}var r={split:true,merge:true,delete:true};var a=t.filter(function(e){return!r[e.type]});if(a.length>0){e.error("Invalid operation: the following sap-prelaunch-operations are invalid: "+a.join(", "));return null}var n=t.some(function(e){return e.type==="split"&&e.target[0]===e.target[1]});if(n){e.error("Invalid operation: split operation contains the same target value. Use two different target values instead.");return null}var i=t.some(function(e){if(e.type==="split"){return!e.hasOwnProperty("source")||!e.hasOwnProperty("target")||typeof e.source!=="string"||!Array.isArray(e.target)||Object.keys(e).length!==3||Object.keys(e.target).length!==2}if(e.type==="merge"){return!e.hasOwnProperty("source")||!e.hasOwnProperty("target")||typeof e.target!=="string"||!Array.isArray(e.source)||Object.keys(e).length!==3||Object.keys(e.source).length!==2}if(e.type==="delete"){return!e.hasOwnProperty("target")||!Array.isArray(e.target)||Object.keys(e).length!==2}});if(i){e.error("Invalid operation: one or more operations are specified in an incorrect format.");return null}return t}function P(e){var t=v(e);return y(t)}function h(t,r,a,n){var s=e.getLevel()>=e.Level.DEBUG?[]:null,o={selectionVariantModified:false,startupParametersModified:false};r.forEach(function(r){var i={};switch(r.type){case"split":i=m(r,t,a);break;case"merge":i=p(r,t,a);break;case"delete":i=g(r,t,a,n);break;default:e.error("Invalid operation: "+r.type+" prelaunch operation type is not supported")}if(s){var u=Object.keys(i).length!==0?"✅":"❌";s.push(u+" "+l(r))}if(Object.keys(i).length===0){e.warning("Cannot execute "+l(r))}o.selectionVariantModified=o.selectionVariantModified||i.selectionVariantModified;o.startupParametersModified=o.startupParametersModified||i.startupParametersModified;o.defaultedParameterNamesModified=o.defaultedParameterNamesModified||i.defaultedParameterNamesModified});if(s){e.debug(i+"\n"+s.join("\n"))}return o}function O(e,a){if(!a){return Promise.resolve(e)}var n=e.mappedIntentParamsPlusSimpleDefaults,i=e.mappedDefaultedParamNames,l=n["sap-xapp-state"]&&n["sap-xapp-state"][0],u=P(a);if(!u||u.length===0){return Promise.resolve(e)}return s(l).then(function(a){var s=a?a.getData():{},l=t({},n),f=t([],i),d;if(s.selectionVariant){d=new r(JSON.stringify(s.selectionVariant))}else{d=new r}var p=h(d,u,l,f);return o(p,e,d,l,f)})}return{executePrelaunchOperations:O,parseAndValidateOperations:P}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution/Search", ["sap/ushell/utils","sap/ushell/services/ClientSideTargetResolution/Utils","sap/ushell/services/ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/ClientSideTargetResolution/Formatter","sap/ushell/TechnicalParameters","sap/base/Log"],function(e,t,r,n,a,i){"use strict";var u=[undefined,"GUI","WDA","UI5"];function s(e,t){var r=e.inbound.resolutionResult;if(!r){return""}return["applicationType","ui5ComponentName","url","additionalInformation","text"].map(function(e){if(t){return r.hasOwnProperty(e)?e+":"+r[e]:""}return r.hasOwnProperty(e)?r[e]:""}).join("")}function o(e){return e.sort(function(e,t){if((e["sap-priority"]||0)-(t["sap-priority"]||0)!==0){return-((e["sap-priority"]||0)-(t["sap-priority"]||0))}if(e.priorityString<t.priorityString){return 1}if(e.priorityString>t.priorityString){return-1}var r=s(e);var n=s(t);if(r<n){return 1}else if(r>n){return-1}return 0})}function l(e,t){var r;if(e&&e["sap-priority"]&&e["sap-priority"][0]){r=parseInt(e["sap-priority"][0],10);if(!isNaN(r)){t["sap-priority"]=r}}return}function f(e,t,r,n){var a;if(!t){return true}if(!e&&e!==""){return false}a=t.value;if(t.format==="reference"){if(/UserDefault\.extended\./.test(a)){i.error("Illegal inbound: extended user default '"+a+"' used as filter");return false}if(r.hasOwnProperty(a)){return e===r[a]}n[a]=true;return true}if(t.format==="value"||t.format==="plain"||t.format===undefined){return e===t.value}else if(t.format==="regexp"){return!!e.match("^"+t.value+"$")}i.error("Illegal oFilter format");return false}function c(e){return e.inbound&&e.inbound.resolutionResult&&e.inbound.resolutionResult["sap.ui"]&&e.inbound.resolutionResult["sap.ui"].technology}function d(e){return e.inbound&&e.inbound.resolutionResult&&e.inbound.resolutionResult.appId}function p(e,t,r,n,a){var i={},u={};Object.keys(e).forEach(function(t){if(t!=="sap-ushell-defaultedParameterNames"){i[t]=e[t]}});if(!t){return i}Object.keys(t).forEach(function(e){var a=t[e],s,o=false;if(!i[e]&&a.hasOwnProperty("defaultValue")){if(a.defaultValue.format&&a.defaultValue.format==="reference"){s=a.defaultValue.value;if(r.hasOwnProperty(s)){if(typeof r[s]==="string"){i[e]=[r[s]];o=true}else if(typeof r[s]==="object"){i[e]=r[s];o=true}}else{i[e]=[a.defaultValue];n.push(a.defaultValue.value)}}else{i[e]=[a.defaultValue.value];o=true}if(o){u[e]=true}}});Object.keys(u).sort().forEach(function(e){a.push(e)});return i}function m(e,t){e.resolutionResult={contentProviderId:t.contentProviderId};if(t&&t.resolutionResult&&t.resolutionResult.hasOwnProperty("sap.platform.runtime")){e.resolutionResult["sap.platform.runtime"]=t.resolutionResult["sap.platform.runtime"]}Object.keys(e.intentParamsPlusAllDefaults).slice(0).forEach(function(t){if(!Array.isArray(e.intentParamsPlusAllDefaults[t])){if(!e.resolutionResult.oNewAppStateMembers){e.resolutionResult.oNewAppStateMembers={}}e.resolutionResult.oNewAppStateMembers[t]=e.intentParamsPlusAllDefaults[t]}})}function h(e,t){e.forEach(function(e){t[e]=true})}function P(e){var t=e.intentParamsPlusAllDefaults["sap-ui-tech-hint"]&&e.intentParamsPlusAllDefaults["sap-ui-tech-hint"][0];var r=e.defaultedParamNames&&e.defaultedParamNames.indexOf("sap-ui-tech-hint")>=0;if(t&&c(e)===t){return r?1:2}return 0}function v(e){var t=e.intentParamsPlusAllDefaults["sap-ui-app-id-hint"]&&e.intentParamsPlusAllDefaults["sap-ui-app-id-hint"][0];if(t&&t===d(e)){return 1}return 0}function g(e,t){function r(e){var t="000"+e;return t.substr(t.length-3)}return["AIDM="+v(e),"CURCP="+(t.isCurrentContentProvider?"1":"0"),e.genericSO?"g":"x","TECM="+P(e),"MTCH="+r(t.countMatchingParams),"MREQ="+r(t.countMatchingRequiredParams),"NFIL="+r(t.countMatchingFilterParams),"NDEF="+r(t.countDefaultedParams),"POT="+r(t.countPotentiallyMatchingParams),"RFRE="+r(999-t.countFreeInboundParams),"TECP="+y(e)].join(" ")}function y(e){var t=c(e);var r=u.indexOf(t);return Math.max(0,r)}function b(e,t){var r=false;if(e.signature.additionalParameters==="allowed"||e.signature.additionalParameters==="ignored"){return true}if(e.signature.additionalParameters==="notallowed"||e.signature.additionalParameters===undefined){r=Object.keys(t).every(function(t){return!(!e.signature.parameters[t]&&t.indexOf("sap-")!==0)})}else{i.error("Unexpected value of inbound for signature.additionalParameters")}return r}async function R(t,r,a,i,u){function s(e,t,r){var a=n.formatInbound(r);e[a]=t.noMatchReason+(t.noMatchDebug?"| DEBUG: "+t.noMatchDebug:"")}let o;if(i){o=await e.promisify(i())}var l=r.reduce(function(e,r){var n=r.contentProviderId||"";var i=a[n]||{};if(!e.missingReferences[n]){e.missingReferences[n]={}}var l=M(t,r,i,e.missingReferences[n],o?o[n]:null);if(l.matches){e.matchResults.push(l)}else if(u){s(e.noMatchReasons,l,r)}return e},{matchResults:[],noMatchReasons:{},missingReferences:{}});return l}function O(e,t,r,n,a,i){var u=Object.keys(e).every(function(r){var n=t[r],u=n&&n[0],s=e[r];if(s.required&&(u===null||u===undefined)){return false}if(s.filter){if(!f(u,s.filter,a,i)){return false}}return true});return u}function I(e,t,r,n,i){var u=e.signature.parameters,s=0,o=0,l=0,f=0,c=false,d={};function p(e){return!a.isTechnicalParameter(e)}var m=Object.keys(r).filter(p);var h=n.filter(p);Object.keys(u).filter(p).forEach(function(e){var n=t[e],a=n&&n[0],i=u[e],c=r.hasOwnProperty(e);if(c){++s;if(i.filter){++l}if(i.required){++o}}else if(a===null||a===undefined){++f}});if(i){d.countPotentiallyMatchingParams=m.filter(function(e){return u.hasOwnProperty(e)}).length}else{d.countPotentiallyMatchingParams=m.length}if(r&&r["sap-app-origin-hint"]&&(r["sap-app-origin-hint"][0]||r["sap-app-origin-hint"][0]==="")){var P=r["sap-app-origin-hint"][0];c=P===e.contentProviderId}d.countDefaultedParams=h.length;d.countMatchingParams=s;d.countMatchingRequiredParams=o;d.countMatchingFilterParams=l;d.countFreeInboundParams=f;d.isCurrentContentProvider=c;return d}function M(e,a,i,u,s){var o={inbound:a};function f(e,t,r){e.matches=false;e.noMatchReason=t;e.noMatchDebug=r;return e}function d(t){t.matches=true;t.matchesVirtualInbound=r.isVirtualInbound(a);t.parsedIntent=e;return t}var P=a.semanticObject==="*";o.genericSO=P;var v=e.semanticObject===undefined||e.semanticObject===a.semanticObject||P;if(!v){return f(o,'Semantic object "'+e.semanticObject+'" did not match')}var y=e.action===undefined||e.action===a.action;if(!y){return f(o,'Action "'+e.action+'" did not match')}var R=!a.deviceTypes||e.formFactor===undefined||a.deviceTypes[e.formFactor];if(!R){return f(o,'Form factor "'+e.formFactor+'" did not match',"Inbound: ["+Object.keys(a.deviceTypes).filter(function(e){return!!a.deviceTypes[e]}).join(", ")+"]")}var M=e.params&&e.params["sap-ui-tech-hint"]&&e.params["sap-ui-tech-hint"][0];if(e.treatTechHintAsFilter&&M){var D=c({inbound:a});if(D!==M){return f(o,'Tech Hint as filter "'+M+'" did not match',"Inbound: ["+D+"]")}}var j=[],A=[],w=e.params||{};var S=p(w,a.signature&&a.signature.parameters,i,j,A);var T=S["sap-system"]&&S["sap-system"][0],F=S["sap-app-origin"]&&S["sap-app-origin"][0],C=a.contentProviderId;if(F&&F!==C){return f(o,'Content provider as filter "'+F+'" did not match',"Inbound: ["+C+"]")}if(T&&typeof C==="string"&&s&&!s[T]){return f(o,'Data origin "'+T+'" is not compatible with the content provider "'+C+'"',"Inbound: ["+Object.keys(s).join(", ")+"]")}o.intentParamsPlusAllDefaults=S;o.defaultedParamNames=A;l(S,o);var N=O(a.signature.parameters,S,w,A,i,u);if(!N){return f(o,"Inbound parameter signature did not match",n.formatInboundSignature(a.signature))}var x=t.constructParameterDominatorMap(a.signature.parameters);var E=t.findDominatedDefaultParameters(S,A,x);var k=A.filter(function(e){return!E[e]});var V=t.filterObjectKeys(S,function(e){return!E[e]});if(!b(a,V)){return f(o,"Additional parameters not allowed",n.formatInboundSignature(a.signature))}var U=a.signature.additionalParameters==="ignored";if(U){t.filterObjectKeys(V,function(e){if(e.indexOf("sap-")===0){return true}if(a.signature.parameters.hasOwnProperty(e)){return true}return false},true)}var q=I(a,S,w,A,U);m(o,a);o.intentParamsPlusAllDefaults=V;o.defaultedParamNames=k;o.priorityString=g(o,q);h(j,u);return d(o)}return{match:R,matchOne:M,sortMatchingResultsDeterministic:o,matchesFilter:f,checkAdditionalParameters:b,addDefaultParameterValues:p,extractSapPriority:l,serializeMatchingResult:s}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution/StagedLogger", ["sap/base/Log"],function(e){"use strict";var n={};function o(e){var o;var r;var t=e();if(!t.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #begin method of StagedLogger.")}o=t.logId;if(n[o]){throw new Error("'cannot call #begin twice with same log id: '"+o+"'")}else{n[o]={}}r=n[o];r.title=t.title||null;r.moduleName=t.moduleName||null;var l=function(e,n){if(n===1){return e}return l(e,n-1)+e};r.stages=t.stages.map(function(e){return[e,l("-",e.length)]});return o}function r(e){var o,r,t,l,i,a,g,u;u=e();if(!u.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.")}o=u.logId;a=u.stage;i=u.prefix;l=u.lines;t=u.line;g=u.number;if(!l&&t&&i){t=i+" "+t}r=n[o].stages[a-1];if(t){r.push(t)}if(l){if(i){i=(t?" ":"")+i}var d=l.map(function(e,n){return(g?n+1:"")+(i?i+" ":"")+e});r.push.apply(r,d)}}function t(o){var r,t,l;r=o();if(!r.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.")}l=r.logId;t=n[l];if(typeof t!=="object"){throw new Error("Logger .end was called on an already ended logger")}var i=t.stages.map(function(e){return e.join("\n")}).join("\n\n");e.debug("[REPORT #"+l+"] "+t.title,"\n"+i+"\n",t.moduleName);delete n[l]}function l(){return n}return{begin:function(){if(e.getLevel()>=e.Level.DEBUG){o.apply(null,arguments)}},log:function(){if(e.getLevel()>=e.Level.DEBUG){r.apply(null,arguments)}},end:function(){if(e.getLevel()>=e.Level.DEBUG){t.apply(null,arguments)}},_getLogs:l}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution/SystemContext", ["sap/base/util/ObjectPath","sap/ui/thirdparty/URI"],function(t,r){"use strict";var e={};e._getProtocol=function(){return new r(window.location.toString()).protocol()};e.createSystemContextFromSystemAlias=function(e){return{id:e.id,label:e.label||e.id,getFullyQualifiedXhrUrl:function(i){var n=new r(i).protocol();if(n==="http"||n==="https"){return i}var o=this._getProtocol();var a="";if(o==="https"){a=t.get("https.xhr.pathPrefix",e)||""}else if(o==="http"){a=t.get("http.xhr.pathPrefix",e)||""}if(a){if(i.indexOf("dynamic_dest")>-1){return i}return r.joinPaths(a,i).query(new r(i).query()).href()}return i}.bind(this),getProperty:function(r){var i=t.get("properties",e)||{};return i[r]}}};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution/Utils", ["sap/base/util/deepExtend"],function(e){"use strict";function r(e,r,t){var n={};r.forEach(function(a){var i=t[a].dominatedBy;var u=i.some(function(t){var n=!!e[t];var i=t!==a;var u=r.indexOf(t)===-1;return n&&u&&i});if(u){n[a]=true}});return n}function t(e){var r={},t={};Object.keys(e).forEach(function(n){var a=e[n].renameTo||n;t[a]=t[a]||{renameTo:a,dominatedBy:[]};t[a].dominatedBy.push(n);t[a].dominatedBy=t[a].dominatedBy.sort();r[n]=t[a]});return r}function n(r,t,n){var a=n?r:e({},r);Object.keys(a).forEach(function(e){if(t(e)===false){delete a[e]}});return a}function a(e,r){var t;t=Object.keys(e).reduce(function(t,n){var a=e[n];if(r(n,a)){t[n]=a}return t},{});return t}function i(e,r){return r.every(function(r){var t,n,a;a=r.name;n=r.options;t=e[a];return Object.keys(n).every(function(e){var r=n[e];if(e==="required"){return!!(t||{}).required===r}return false})})}function u(e,r){var t={};e.forEach(function(e){if(r[e]){t[e]=r[e];delete r[e]}});return t}return{inboundSignatureMeetsParameterOptions:i,filterObjectKeys:n,filterObject:a,constructParameterDominatorMap:t,findDominatedDefaultParameters:r,extractParameters:u}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution/VirtualInbounds", [],()=>{"use strict";const e={};const a=[{hideIntentLink:true,semanticObject:"Action",action:"search",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.renderer.search.searchComponent",additionalInformation:"SAPUI5.Component=sap.ushell.renderer.search.searchComponent",url:sap.ui.require.toUrl("sap/ushell/renderer/search/searchComponent"),loadCoreExt:true,loadDefaultDependencies:false}},{hideIntentLink:true,semanticObject:"FLPPageTemplate",action:"manage",deviceTypes:{desktop:true,tablet:false,phone:false},signature:{parameters:{pageTemplateId:{required:false,defaultValue:{value:""}}},additionalParameters:"ignored"},resolutionResult:{applicationType:"URL",ui5ComponentName:"nw.core.flp.pagecomposer.conf",additionalInformation:"SAPUI5.Component=nw.core.flp.pagecomposer.conf",url:"/sap/bc/ui5_ui5/sap/sui_paget_man",applicationDependencies:{manifest:"/sap/bc/lrep/content/apps/nw.core.flp.pagecomposer.conf/app/sap/sui_paget_man/manifest.appdescr",name:"nw.core.flp.pagecomposer.conf",self:{name:"nw.core.flp.pagecomposer.conf",url:"/sap/bc/ui5_ui5/sap/sui_paget_man"},asyncHints:{libs:[{name:"nw.core.flp.transport.cust",url:{final:false,url:"/sap/bc/ui5_ui5/sap/sui_tr_cust"}}]}},async:true,loadDefaultDependencies:false}}];e.isVirtualInbound=function(e){return a.some(a=>a===e)};e.getInbounds=function(){return a};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ClientSideTargetResolution/XAppStateProcessing", ["sap/ushell/services/ClientSideTargetResolution/Utils","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/fe/navigation/SelectionVariant","sap/base/Log","sap/ushell/utils"],function(e,t,a,r,n,i,s){"use strict";async function o(t,a){var r,n=t.resolutionResult,i=t.inbound&&(t.inbound.signature||{}),s=f(n)||i.additionalParameters==="ignored"||g(t);if(!s){l(t);return t}var o=t.intentParamsPlusAllDefaults["sap-xapp-state"]&&t.intentParamsPlusAllDefaults["sap-xapp-state"][0];if(o){const s=await b(a,o);if(c(s)){if(f(n)){var m=e.constructParameterDominatorMap(i.parameters);Object.keys(n.oNewAppStateMembers).forEach(function(e){var t=m[e].dominatedBy;if(p(s,t)){delete n.oNewAppStateMembers[e]}})}var d=i.additionalParameters==="ignored";if(!f(n)&&!g(t)&&!d){l(t);return t}r=a.createEmptyAppState(undefined,true);if(r){r.setData(s);await u(r,t);return t}}else{delete n.oNewAppStateMembers;l(t);return t}}if(f(n)){var P=a.createEmptyAppState(undefined,true);await u(P,t);return t}l(t);return t}async function u(e,t){var a=e.getData()||{},r,i={},o=t.inbound.signature,u=t.resolutionResult;if(a.selectionVariant){r=new n(JSON.stringify(a.selectionVariant))}else{r=new n}if(f(u)){Object.keys(u.oNewAppStateMembers).forEach(function(e){r.massAddSelectOption(e,u.oNewAppStateMembers[e].Ranges)})}var m=o.additionalParameters==="ignored";r=d(r,i,o.parameters,m);if(r.getParameterNames().length!==0||r.getSelectOptionsPropertyNames().length!==0||i.deleted){a.selectionVariant=r.toJSONObject()}if(!i.changed&&!i.deleted&&!f(u)){l(t);return}e.setData(a);await s.promisify(e.save());t.intentParamsPlusAllDefaults["sap-xapp-state"]=[e.getKey()];t.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[e.getKey()];l(t)}function l(e){P(e);S(e);delete e.resolutionResult.oNewAppStateMembers}function f(e){return e.oNewAppStateMembers&&!a(e.oNewAppStateMembers)}function m(e,t){return Array.isArray(e)&&e.some(function(e){return t.indexOf(e)!==-1})}function p(e,t){if(e&&e.selectionVariant){var a=new n(JSON.stringify(e.selectionVariant)),r=a.getSelectOptionsPropertyNames()||[],i=a.getParameterNames()||[];if(m(r,t)||m(i,t)){return true}}return false}function d(e,t,a,r){var s=new n,o=e.getParameterNames()||[],u=e.getSelectOptionsPropertyNames()||[],l,f;o.forEach(function(n){l=e.getParameter(n);if(r&&!a[n]){t.deleted=true;return}if(a[n]&&a[n].renameTo){if(s.getParameter(a[n].renameTo)===undefined&&s.getSelectOption(a[n].renameTo)===undefined){s.addParameter(a[n].renameTo,l);t.changed=true}else{i.error("renaming of appstate creates duplicates "+n+"->"+a[n].renameTo)}}else if(s.getParameter(n)===undefined&&s.getSelectOption(n)===undefined){s.addParameter(n,l)}});u.forEach(function(n){f=e.getSelectOption(n);if(r&&!a[n]){t.deleted=true;return}if(a[n]&&a[n].renameTo){if(s.getSelectOption(a[n].renameTo)===undefined&&s.getParameter(a[n].renameTo)===undefined){s.massAddSelectOption(a[n].renameTo,f);t.changed=true}else{i.error("renaming of appstate creates duplicates "+n+"->"+a[n].renameTo)}}else if(s.getSelectOption(n)===undefined&&s.getParameter(n)===undefined){s.massAddSelectOption(n,f)}});o.forEach(function(t){e.removeParameter(t)});u.forEach(function(t){e.removeSelectOption(t)});s.getParameterNames().forEach(function(t){e.addParameter(t,s.getParameter(t))});s.getSelectOptionsPropertyNames().forEach(function(t){e.massAddSelectOption(t,s.getSelectOption(t))});return e}function c(e){return e===undefined||r(e)}function g(e){return e.inbound&&e.inbound.signature&&e.inbound.signature.parameters&&Object.keys(e.inbound.signature.parameters).some(function(t){return!!e.inbound.signature.parameters[t].renameTo})}function P(e){e.defaultedParamNames=e.defaultedParamNames.filter(function(t){if(e.intentParamsPlusAllDefaults[t]&&!Array.isArray(e.intentParamsPlusAllDefaults[t])){if(!(e.resolutionResult.oNewAppStateMembers&&e.resolutionResult.oNewAppStateMembers[t])){return false}}return true})}function S(e){var a=t.get("inbound.signature.parameters",e)||{},r={};e.defaultedParamNames.forEach(function(e){var t=a[e]&&a[e].renameTo||e;if(r[t]){i.error("renaming of defaultedParamNames creates duplicates"+e+"->"+t)}else{r[t]=true}});e.mappedDefaultedParamNames=Object.keys(r).sort()}async function b(e,t){const a=await s.promisify(e.getAppState(t));return a.getData()}return{mixAppStateIntoResolutionResultAndRename:o,_hasRenameTo:g}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/CommonDataModel", ["sap/ushell/services/CommonDataModel/PersonalizationProcessor","sap/ushell/services/CommonDataModel/vizTypeDefaults/VizTypeDefaults","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/ushell/services/CommonDataModel/SiteConverter","sap/base/util/isEmptyObject","sap/base/util/deepClone","sap/base/util/deepExtend","sap/base/util/extend","sap/base/util/Version","sap/ushell/Config","sap/base/util/values","sap/ushell/library","sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/base/Log","sap/ushell/Container"],function(e,t,i,jQuery,r,n,o,s,a,l,p,u,h,c,f,d,g,P){"use strict";var v=c.DisplayFormat;var y=c.ContentNodeType;var _="sap.ushell.services.CommonDataModel";function m(t,i,r,o){this._oAdapter=t;this._oPersonalizationProcessor=new e;this._oSiteConverter=new n;this._oSiteDeferred=new jQuery.Deferred;this._oOriginalSite={};this._bPersonalizationLoadingFailed=false;this._oPersonalizedSiteForCDMVersion30={};this._bLoadPersonalizationForCDMVersion30Late=false;this._oPersonalizedPages={};this._oPersonalizationDeltasForCDMVersion31={};this._mGetPagesPromises={};this._pGetSiteFromAdapter=t.getSite().then(e=>{this._oOriginalSite=a({},e);const t=new p(e._version);if(t.compareTo("3.1.0")<0){const t=f.isFlpHomeIntent();if(t){this._loadAndApplyPersonalizationForCDMVersion30(e)}else{this._bLoadPersonalizationForCDMVersion30Late=true}}else{this._prepareSiteForCDMVersion31()}return e}).fail(e=>{this._oSiteDeferred.reject(e);this._bLoadPersonalizationForCDMVersion30Late=false})}m.prototype._loadAndApplyPersonalizationForCDMVersion30=async function(e){try{const t=await this._getPersonalization(e._version);this._oPersonalizedSiteForCDMVersion30=await this._triggerMixinPersonalizationInSite(e,t);this._oSiteDeferred.resolve(this._oPersonalizedSiteForCDMVersion30)}catch(e){this._oSiteDeferred.reject(e)}};m.prototype._prepareSiteForCDMVersion31=function(){this._ensureStandardVizTypesPresent(this._oOriginalSite).then(()=>{this._ensureProperDisplayFormats(this._oOriginalSite);this._oSiteDeferred.resolve(this._oOriginalSite)})};m.prototype._applyPagePersonalization=function(e,t){var i=e.identification.id;if(Object.keys(t).length){var r=t.classicHomePage;if(r&&r.version==="3.1.0"){Object.keys(r).forEach(function(e){if(!t[e]){t[e]=r[e]}});delete t.classicHomePage;t._version=t.version}var n=new p(t._version||t.version);if(n.compareTo("3.1.0")<0){t={classicHomePage:t,_version:"3.1.0",version:"3.1.0"}}}this._oPersonalizationDeltasForCDMVersion31=t;var o=s(t[i],20)||{};var a=this._oSiteConverter.convertTo("3.0.0",s(e,20));return this._triggerMixinPersonalizationInSite(a,o).then(function(e){this._oPersonalizedPages[i]=this._oSiteConverter.convertTo("3.1.0",s(e,20));return this._oPersonalizedPages[i]}.bind(this))};m.prototype._migratePersonalizedPages=function(e){if(typeof this._oAdapter.migratePersonalizedPages!=="function"){return Promise.resolve(e)}return this._oAdapter.migratePersonalizedPages(e).then(function(e){if(e.length===0){return null}return this.save(e)}.bind(this)).then(function(){return e})};m.prototype._triggerMixinPersonalizationInSite=async function(e,t){const i=await f.promisify(this._oPersonalizationProcessor.mixinPersonalization(e,t));this._ensureCompleteSite(i);this._ensureGroupsOrder(i);await this._ensureStandardVizTypesPresent(i);this._ensureProperDisplayFormats(i);return i};m.prototype.getHomepageGroups=function(){var e=new jQuery.Deferred;this.getSite().then(function(t){var i=t&&t.site&&t.site.payload&&t.site.payload.groupsOrder?t.site.payload.groupsOrder:[];e.resolve(i)});return e.promise()};m.prototype.getGroups=function(){var e=new jQuery.Deferred;this.getSite().then(function(t){var i=[];Object.keys(t.groups).forEach(function(e){i.push(t.groups[e])});e.resolve(i)});return e.promise()};m.prototype.getGroup=function(e){var t=new jQuery.Deferred;this.getSite().then(function(i){var r=i.groups[e];if(r){t.resolve(r)}else{t.reject("Group "+e+" not found")}});return t.promise()};m.prototype.getSite=function(){if(this._bLoadPersonalizationForCDMVersion30Late){this.getSiteWithoutPersonalization().then(e=>this._loadAndApplyPersonalizationForCDMVersion30(e));this._bLoadPersonalizationForCDMVersion30Late=false}return this._oSiteDeferred.promise()};m.prototype.getSiteWithoutPersonalization=function(){return this._pGetSiteFromAdapter};m.prototype.getPage=function(e){var t=u.last("/core/shell/enablePersonalization");var i=u.last("/core/spaces/myHome/enabled");var r=u.last("/core/spaces/myHome/myHomePageId");return Promise.resolve(this._pGetSiteFromAdapter).then(function(){if(this._oPersonalizedPages[e]){return this._oPersonalizedPages[e]}if(t||i&&e===r){return Promise.all([this._getPageFromAdapter(e),this._getPersonalization(this._oOriginalSite._version)]).catch(function(){return Promise.reject("CommonDataModel Service: Cannot get page "+e)}).then(function(e){return this._applyPagePersonalization(e[0],e[1]).catch(function(){return Promise.reject("Personalization Processor: Cannot mixin the personalization.")})}.bind(this)).then(function(e){return this._migratePersonalizedPages([e]).then(function(e){return e[0]})}.bind(this))}return this._getPageFromAdapter(e)}.bind(this))};m.prototype._getPageFromAdapter=function(e){if(!this._oAdapter.getPage){return Promise.resolve(s(this._oOriginalSite.pages[e],20))}return this._oAdapter.getPage(e).then(function(t){return Promise.all([this.getCachedVisualizations(),this.getCachedVizTypes()]).then(function(i){var r=i[0];var n=i[1];this._oOriginalSite.pages[e]=t;this._oOriginalSite.visualizations=r;this._oOriginalSite.vizTypes=n;return s(t,20)}.bind(this))}.bind(this))};m.prototype._filterForProperPages=function(e){return e.filter(function(e){return!!e})};m.prototype.getPages=function(e){var t=u.last("/core/shell/enablePersonalization");var i=u.last("/core/spaces/myHome/enabled");var r=u.last("/core/spaces/myHome/myHomePageId");var n;if(this._mGetPagesPromises[e.toString()]){n=this._mGetPagesPromises[e.toString()]}else{n=Promise.resolve(this._pGetSiteFromAdapter).then(function(){if(t||i){return Promise.all([this._getPagesFromAdapter(e),this._getPersonalization(this._oOriginalSite._version)]).catch(function(){return Promise.reject("CommonDataModel Service: Cannot get pages")}).then(function(e){var i=e[0];var n=e[1];return Promise.all(Object.keys(i).map(function(e){if(this._oPersonalizedPages[e]){return Promise.resolve(this._oPersonalizedPages[e])}if(!t&&e!==r){return Promise.resolve(i[e])}return this._applyPagePersonalization(i[e],n).catch(function(){return Promise.reject("Personalization Processor: Cannot mixin the personalization.")})}.bind(this))).then(function(e){return this._migratePersonalizedPages(e)}.bind(this)).then(function(e){return this._filterForProperPages(e)}.bind(this))}.bind(this))}return this._getPagesFromAdapter(e).then(function(e){return this._filterForProperPages(h(e))}.bind(this))}.bind(this));this._mGetPagesPromises[e.toString()]=n}return n};m.prototype._getPagesFromAdapter=function(e){if(!this._oAdapter.getPages){var t={};for(var i in this._oOriginalSite.pages){if(e.includes(this._oOriginalSite.pages[i].identification.id)){t[i]=this._oOriginalSite.pages[i]}}return Promise.resolve(s(t,20))}return this._oAdapter.getPages(e).then(function(e){return Promise.all([this.getCachedVisualizations(),this.getCachedVizTypes()]).then(function(t){var i=t[0];var r=t[1];this._oOriginalSite.visualizations=i;this._oOriginalSite.vizTypes=r;Object.keys(e).forEach(function(t){this._oOriginalSite.pages[t]=e[t]}.bind(this));return s(e,20)}.bind(this))}.bind(this))};m.prototype.getAllPages=function(e){if(e&&e.personalizedPages){return this._getAllPersonalizedPages()}return this._getAssignedPageIds().then(function(e){return this.getPages(e)}.bind(this))};m.prototype._getAssignedPageIds=function(){return P.getServiceAsync("Menu").then(function(e){return e.getContentNodes()}).then(function(e){var t=[];e.forEach(function(e){this._collectPageIds(e,t)}.bind(this));return t}.bind(this))};m.prototype._collectPageIds=function(e,t){if(e.type===y.Page){if(t.indexOf(e.id)===-1){t.push(e.id)}}if(e.children!==undefined){e.children.forEach(function(e){this._collectPageIds(e,t)}.bind(this))}};m.prototype._getAllPersonalizedPages=function(){return Promise.resolve(this._pGetSiteFromAdapter).then(function(){return Promise.all([this._getAssignedPageIds(),this._getPersonalization(this._oOriginalSite._version)])}.bind(this)).then(function(e){var t=e[0];var i=e[1];var r=[];Object.keys(i).forEach(function(e){if(e==="version"||e==="_version"){return}if(!t.includes(e)){return}var n=i[e];if(Object.keys(n).length>1){r.push(e)}});if(r.length>0){return this.getPages(r)}return[]}.bind(this))};m.prototype.getApplications=function(){return new Promise(function(e,t){this.getSite().then(function(i){var r=i.applications;if(r){e(r)}else{t("CDM applications not found.")}}).fail(t)}.bind(this))};m.prototype.getVizTypes=function(){if(typeof this._oAdapter.getVizTypes==="function"){return Promise.all([this._getSiteProperty("vizTypes"),this._oAdapter.getVizTypes()]).then(function(e){var t=e[0];var i=e[1];return l(t,i)})}return this.getCachedVizTypes()};m.prototype.getCachedVizTypes=function(){var e=Promise.resolve();if(typeof this._oAdapter.getCachedVizTypes==="function"){e=this._oAdapter.getCachedVizTypes()}return Promise.all([this._getSiteProperty("vizTypes"),e]).then(function(e){var t=e[0];var i=e[1];return l(t,i)})};m.prototype.getVizType=function(e){var t=Promise.resolve();if(typeof this._oAdapter.getVizType==="function"){t=this._oAdapter.getVizType(e)}return Promise.all([this._getSiteProperty("vizTypes"),t]).then(function(t){var i=t[0];var r=t[1];if(r){i[e]=r}return i[e]})};m.prototype.getVisualizations=function(){if(typeof this._oAdapter.getVisualizations==="function"){return Promise.all([this._getSiteProperty("visualizations"),this._oAdapter.getVisualizations()]).then(function(e){var t=e[0];var i=e[1];return l(t,i)})}return this.getCachedVisualizations()};m.prototype.getCachedVisualizations=function(){var e=Promise.resolve();if(typeof this._oAdapter.getCachedVisualizations==="function"){e=this._oAdapter.getCachedVisualizations()}return Promise.all([this._getSiteProperty("visualizations"),e]).then(function(e){var t=e[0];var i=e[1];return l(t,i)})};m.prototype._getSiteProperty=function(e){return new Promise(function(t,r){this.getSite().then(function(n){var o=i.get(e,n);if(o){t(o)}else{var s=e.toString();r("CDM "+s+" not found.")}}).fail(r)}.bind(this))};m.prototype.getGroupFromOriginalSite=function(e){var t=new jQuery.Deferred;if(typeof e==="string"&&this._oOriginalSite&&this._oOriginalSite.groups&&this._oOriginalSite.groups[e]){t.resolve(a({},this._oOriginalSite.groups[e]))}else{t.reject("Group does not exist in original site.")}return t.promise()};m.prototype.getOriginalPage=function(e){return s(this._oOriginalSite.pages[e],20)};m.prototype.save=function(e){var t=new jQuery.Deferred;if(this._bPersonalizationLoadingFailed){var i="Prior personalization loading failed, cancelling save to prevent data loss. Saving this personalization will only be possible after reloading the FLP again.";g.error(i,null,_);t.reject(i);return t.promise()}if(this._oOriginalSite._version==="3.1.0"){if(!e){return t.reject("No page id was provided").promise()}if(typeof e==="string"){e=[e]}this._saveCdmVersion31(e).then(t.resolve).catch(t.reject)}else{this._saveCdmVersion30().then(t.resolve).catch(t.reject)}return t.promise()};m.prototype._saveCdmVersion30=function(){var e=this._oOriginalSite;var t=this._oPersonalizedSiteForCDMVersion30;return new Promise(function(i,r){this._oPersonalizationProcessor.extractPersonalization(s(t,20),s(e,20)).done(i).fail(r)}.bind(this)).catch(function(){return Promise.reject("Personalization Processor: Cannot extract personalization.")}).then(function(e){if(o(e)){return Promise.resolve()}return this._setPersonalization(e)}.bind(this))};m.prototype._saveCdmVersion31=function(e){var t=e.map(function(e){var t=this._oSiteConverter.convertTo("3.0.0",this._oOriginalSite.pages[e]);var i=this._oSiteConverter.convertTo("3.0.0",this._oPersonalizedPages[e]);return new Promise(function(r,n){this._oPersonalizationProcessor.extractPersonalization(s(i,20),s(t,20)).done(function(t){r({pageId:e,personalization:t})}).fail(function(t){g.error("Cannot extract personalization of page "+e+": "+t,null,_);r()})}.bind(this))}.bind(this));return Promise.all(t).then(function(e){var t=false;e.forEach(function(e){if(!e){return}if(!o(e.personalization)){t=true;if(this._oPersonalizationDeltasForCDMVersion31.version===undefined||this._oPersonalizationDeltasForCDMVersion31._version===undefined){this._oPersonalizationDeltasForCDMVersion31.version=this._oOriginalSite._version;this._oPersonalizationDeltasForCDMVersion31._version=this._oOriginalSite._version}this._oPersonalizationDeltasForCDMVersion31[e.pageId]=e.personalization}}.bind(this));if(t){return this._setPersonalization(this._oPersonalizationDeltasForCDMVersion31)}return Promise.resolve()}.bind(this))};m.prototype._getPersonalization=function(e){return f.promisify(this._oAdapter.getPersonalization(e)).catch(function(e){g.error("Could not get page personalization",e,_);this._bPersonalizationLoadingFailed=true;return{}}.bind(this))};m.prototype._setPersonalization=function(e,t){if(this._oPendingPersonalizationDeferred){if(!this._oNextPersonalizationQuery){this._oNextPersonalizationQuery={fnNextCall:null,aPromiseResolvers:[]}}return new Promise(function(i,r){this._oNextPersonalizationQuery.fnNextCall=this._setPersonalization.bind(this,e,t);this._oNextPersonalizationQuery.aPromiseResolvers.push({resolve:i,reject:r})}.bind(this))}this._oPendingPersonalizationDeferred=this._oAdapter.setPersonalization(e,t);return new Promise(function(e,t){this._oPendingPersonalizationDeferred.then(e).fail(t).always(function(){delete this._oPendingPersonalizationDeferred;if(this._oNextPersonalizationQuery){var e=this._oNextPersonalizationQuery.fnNextCall();this._cleanupPersonalizationQueuePromises(e,this._oNextPersonalizationQuery.aPromiseResolvers);delete this._oNextPersonalizationQuery}}.bind(this))}.bind(this))};m.prototype._cleanupPersonalizationQueuePromises=function(e,t){t.forEach(function(t){e.then(t.resolve).catch(t.reject)})};m.prototype.registerContentProvider=function(){g.error("CommonDataModel.registerContentProvider is obsolete and should not be used.")};m.prototype._ensureCompleteSite=function(e){if(!e.groups){return}const t=e.groups;Object.keys(t).forEach(function(e){if(!t[e]){delete t[e]}else{if(!t[e].payload){t[e].payload={}}if(!t[e].payload.links){t[e].payload.links=[]}if(!t[e].payload.tiles){t[e].payload.tiles=[]}if(!t[e].payload.groups){t[e].payload.groups=[]}}})};m.prototype._ensureGroupsOrder=function(e){const t=i.get("site.payload.groupsOrder",e);const r=e.groups;let n=0;if(!t){return}while(n<t.length){var o=t[n];if(!r[o]){t.splice(n,1)}else{n++}}};m.prototype.getPlugins=function(){var e=function(e,t){var r=Object.keys(t).length;if(r===0){return{}}if(r>1){g.warning("Multiple inbounds are defined for plugin '"+e+"'","Plugin startup configuration will be determined using "+"the first signature inbound with semanticObject:Shell and action:plugin for plugin.",_)}var n=Object.values(t).find(function(e){return e&&e.semanticObject==="Shell"&&e.action==="plugin"});if(n===undefined){g.error("Cannot find inbound with semanticObject:Shell and action:plugin for plugin '"+e+"'","plugin startup configuration cannot be determined correctly",_);return{}}var o=i.get("signature.parameters",n)||{};return Object.keys(o).reduce(function(e,t){var r=i.get(t+".defaultValue.value",o);if(typeof r==="string"){e[t]=r}return e},{})};var t;return function(n){if(n!==undefined){t=n}if(t){return jQuery.when(t)}t={};return this.getSiteWithoutPersonalization().then(function(n){var o=n.applications||{};Object.keys(o).filter(function(e){return i.get("type",this[e]["sap.flp"])==="plugin"},o).forEach(function(n){var o;var s=this[n];var a={};if(!r(s["sap.platform.runtime"])){g.error("Cannot find 'sap.platform.runtime' section for plugin '"+n+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel")}else if(!r(s["sap.platform.runtime"].componentProperties)){g.error("Cannot find 'sap.platform.runtime/componentProperties' "+"section for plugin '"+n+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel")}else{a=s["sap.platform.runtime"].componentProperties}t[n]={url:a.url,component:s["sap.ui5"].componentName};var p=i.get("crossNavigation.inbounds",s["sap.app"])||{};o=e(n,p);var u=l(a.config||{},o);if(u){t[n].config=u}if(a.asyncHints){t[n].asyncHints=a.asyncHints}var h=i.get("deviceTypes",s["sap.ui"]);if(h){t[n].deviceTypes=h}},o);return f.deepFreeze(t)},function(e){return e})}}();m.prototype._mapDisplayFormats=function(e){var t={tile:v.Standard,standard:v.Standard,link:v.Compact,compact:v.Compact,flat:v.Flat,flatWide:v.FlatWide,tileWide:v.StandardWide,standardWide:v.StandardWide};var i=Object.keys(t).filter(function(t){return e.indexOf(t)>-1});return i.map(function(e){return t[e]})};m.prototype._ensureProperDisplayFormats=function(e){if(e.vizTypes){Object.keys(e.vizTypes).forEach(function(t){if(e.vizTypes[t]["sap.flp"]&&e.vizTypes[t]["sap.flp"].vizOptions){var r=e.vizTypes[t];var n=i.get("vizOptions.displayFormats.supported",r["sap.flp"]);var o=i.get("vizOptions.displayFormats.default",r["sap.flp"]);if(n){e.vizTypes[t]["sap.flp"].vizOptions.displayFormats.supported=this._mapDisplayFormats(n)}if(o){e.vizTypes[t]["sap.flp"].vizOptions.displayFormats.default=this._mapDisplayFormats([o])[0]}}}.bind(this))}if(e.hasOwnProperty("pages")){Object.keys(e.pages).forEach(function(t){var i=e.pages[t];if(i.payload&&i.payload.sections){var r=i.payload.sections;Object.keys(r).forEach(function(e){var t=r[e];Object.keys(t.viz).forEach(function(e){var i=t.viz[e];if(i.displayFormatHint){var r=this._mapDisplayFormats([i.displayFormatHint])[0];i.displayFormatHint=r||i.displayFormatHint}}.bind(this))}.bind(this))}}.bind(this))}else if(e.hasOwnProperty("groups")){Object.keys(e.groups).forEach(function(t){var i=e.groups[t];i.payload.tiles.forEach(function(e){if(e.displayFormatHint){var t=this._mapDisplayFormats([e.displayFormatHint])[0];e.displayFormatHint=t||e.displayFormatHint}}.bind(this))}.bind(this))}};m.prototype._ensureStandardVizTypesPresent=async function(e){if(!(e._version&&e._version.startsWith("3."))){return}if(!e.vizTypes){e.vizTypes={}}const i=await t.getAll();Object.keys(i).map(t=>{e.vizTypes[t]=e.vizTypes[t]||i[t]})};m.prototype.getMenuEntries=function(e){return new Promise(function(t,r){this.getSite().then(function(r){var n=i.get("menus."+e+".payload.menuEntries",r);t(s(n)||[])})}.bind(this))};m.prototype.getContentProviderIds=function(){return new Promise(function(e,t){this.getSite().then(function(t){var i=Object.keys(t.systemAliases);var r={};h(t.applications).forEach(function(e){var t=d.getContentProviderId(e);if(i.includes(t)){r[t]=true}});e(Object.keys(r))})}.bind(this))};m.hasNoAdapter=false;return m},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/CommonDataModel/PersonalizationProcessor", ["sap/base/Log","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery"],function(e,r,i,o,t,jQuery){"use strict";function a(){}a.prototype._getItemIndex=function(e,r){var i;for(i=0;i<e.length;i++){if(e[i].id===r){break}}i=i>=e.length?-1:i;return i};a.prototype._applyRenameGroup=function(e,r,i){var o,t=false;if(!r){return false}if(e&&i&&i.groups&&i.groups[e]){o=i.groups[e];if(o.identification&&o.identification.title){i.groups[e].identification.title=r;t=true}}return t};a.prototype._applyGroupVisibility=function(e,r,i){var o=false;if(r===undefined){return false}if(e&&i&&i.groups&&i.groups[e]){i.groups[e].identification.isVisible=r;o=true}return o};a.prototype.mixinPersonalization=function(e,r){var i=new jQuery.Deferred,t=this;if(!r||o(r)){return i.resolve(e).promise()}if(r.groups){Object.keys(r.groups).forEach(function(i){var o=r.groups[i];if(e.groups[i]){if(o.identification){if(o.identification.title){t._applyRenameGroup(i,o.identification.title,e)}if(o.identification.hasOwnProperty("isVisible")&&o.identification.isVisible===false){t._applyGroupVisibility(i,false,e)}}}})}this._applyAddGroups(e,r);if(r.removedGroups&&Array.isArray(r.removedGroups)){r.removedGroups.forEach(function(r){t._applyRemoveGroup(e,r)})}this._applyMoveGroup(e,r);this._applyItemChanges(e,r);this._applyTileSettings(e,r);return i.resolve(e).promise()};a.prototype._applyAddGroups=function(e,i){var o=[];e.site=e.site||{};e.site.payload=e.site.payload||{};e.site.payload.groupsOrder=e.site.payload.groupsOrder||[];e.groups=e.groups||{};if(Array.isArray(i.groupOrder)){e.site.payload.groupsOrder.forEach(function(e){if(i.groupOrder.indexOf(e)===-1){if(i.removedGroups&&i.removedGroups.indexOf(e)===-1||!i.removedGroups){o.push(e)}}})}if(Array.isArray(i.groupOrder)&&i.addedGroups&&Object.keys(i.addedGroups).length>0){Object.keys(i.addedGroups).forEach(function(o){e.groups[o]=r(i.addedGroups[o],20);e.groups[o].payload.isPreset=false});e.site.payload.groupsOrder=i.groupOrder}o.forEach(function(r){e.site.payload.groupsOrder.push(r)})};a.prototype._checkRenameGroup=function(e,r,i,o){if(e&&r&&i){if(i[e]){if(r[e].identification.title!==i[e].identification.title){o=o||{};o.groups=o.groups||{};o.groups[e]=o.groups[e]||{};o.groups[e].identification=o.groups[e].identification||{};o.groups[e].identification.title=r[e].identification.title}}}return o};a.prototype._applyTileSettings=function(e,r){var i,o;if(!r.modifiedTiles){return}i=Object.keys(e.groups).map(function(e){return this[e]},e.groups);o=Object.keys(r.modifiedTiles).map(function(e){return this[e]},r.modifiedTiles);i.some(function(e){["tiles","links"].forEach(function(r){if(e.payload[r]){e.payload[r].some(function(e){var r;o.some(function(i,o){if(i.id===e.id){if(i.title!==undefined){e.title=i.title}if(i.subTitle!==undefined){e.subTitle=i.subTitle}if(i.info!==undefined){e.info=i.info}if(i.displayFormatHint!==undefined){e.displayFormatHint=i.displayFormatHint}r=o;return true}return false});if(r!==undefined){o.splice(r,1)}return o.length===0})}});return o.length===0})};a.prototype._checkGroupVisibility=function(e,r,i,o){if(e&&r&&i){if(i[e]){if(r[e].identification.isVisible!==i[e].identification.isVisible&&typeof r[e].identification.isVisible==="boolean"){o=o||{};o.groups=o.groups||{};o.groups[e]=o.groups[e]||{};o.groups[e].identification=o.groups[e].identification||{};o.groups[e].identification.isVisible=r[e].identification.isVisible}}}return o};a.prototype._addGroupToPersonalizationDelta=function(e,r,o){var t=false,a,s;if(e&&e.site&&e.site.payload&&e.site.payload.groupsOrder&&e.groups&&o&&e.groups[o]&&r){a=e.site.payload.groupsOrder;s=e.groups[o];r.addedGroups=r.addedGroups||{};r.addedGroups[o]={};r.addedGroups[o].identification=i({},s.identification);r.addedGroups[o].payload=i({},s.payload);r.addedGroups[o].payload.tiles=[];r.addedGroups[o].payload.links=[];r.groupOrder=a;t=true}return t};a.prototype.extractPersonalization=function(e,r){var i=new jQuery.Deferred,t,a={},s,p,n=this;if(e&&e.groups&&r&&r.groups){t=e.groups;s=r.groups;p=this._getExtractHelperObject(r,e,a);Object.keys(s).forEach(function(i){n._checkRemoveGroup(e,a,i);n._extractFromOriginalSiteOneGroup(r,p,i,"tiles");n._extractFromOriginalSiteOneGroup(r,p,i,"links")});Object.keys(t).forEach(function(r){if(s[r]){n._checkRenameGroup(r,t,s,a);n._checkGroupVisibility(r,t,s,a)}else{n._addGroupToPersonalizationDelta(e,a,r)}n._extractFromPersonalizedSiteOneGroup(e,p,r,"tiles");n._extractFromPersonalizedSiteOneGroup(e,p,r,"links")});this._checkMoveGroup(e,r,a);this._cleanupRemovedGroups(r,a);if(p.oPersonalizationDelta.movedTiles&&o(p.oPersonalizationDelta.movedTiles)){delete p.oPersonalizationDelta.movedTiles}if(p.oPersonalizationDelta.movedLinks&&o(p.oPersonalizationDelta.movedLinks)){delete p.oPersonalizationDelta.movedLinks}}if(r._version){a._version=r._version}return i.resolve(a).promise()};a.prototype._checkRemoveGroup=function(e,r,i){var o=false;if(e&&e.groups&&r&&i){if(!e.groups[i]){r.removedGroups=r.removedGroups||[];r.groupOrder=r.groupOrder||[];if(r.removedGroups.indexOf(i)===-1){r.removedGroups.push(i)}if(e.site&&e.site.payload&&e.site.payload.groupsOrder&&Array.isArray(e.site.payload.groupsOrder)){r.groupOrder=e.site.payload.groupsOrder.slice(0)}}o=true}return o};a.prototype._applyRemoveGroup=function(e,r){var i,o,t;if(e&&e.groups&&e.site&&e.site.payload&&e.site.payload.groupsOrder&&r){i=e.groups;o=e.site.payload.groupsOrder;t=o.indexOf(r);if(!(t===-1)){o.splice(t,1);delete i[r];return true}}return false};a.prototype._checkMoveGroup=function(e,r,i){var o,t,a=false,s=false;if(e.site&&e.site.payload&&Array.isArray(e.site.payload.groupsOrder)&&r.site&&r.site.payload&&Array.isArray(r.site.payload.groupsOrder)){o=e.site.payload.groupsOrder;t=r.site.payload.groupsOrder;if(o.length===t.length){a=function(){var e=false,r;for(r=0;r<t.length;r++){if(t[r]!==o[r]){e=true;break}}return e}();if(a){i.groupOrder=o;s=true}}}return s};a.prototype._applyMoveGroup=function(e,r){var i=false;if(Array.isArray(r.groupOrder)){e.site=e.site||{};e.site.payload=e.site.payload||{};if(!Array.isArray(e.site.payload.groupsOrder)){e.site.payload.groupsOrder=[]}if(e.site.payload.groupsOrder.length===r.groupOrder.length){e.site.payload.groupsOrder=r.groupOrder;i=true}}return i};a.prototype._getHashedItemsFromSite=function(e){var r=null;if(e&&e.groups){if(Object.keys(e.groups).length>0){r={};Object.keys(e.groups).forEach(function(i){var o=e.groups[i],t;r[i]={};if(o.payload){["tiles","links"].forEach(function(e){r[i][e]={};if(Array.isArray(o.payload[e])){t=o.payload[e];t.forEach(function(o,t){var a;if(o&&o.id){a=o.id;r[i][e][a]={iIndex:t,sItemId:o}}})}})}})}}return r};a.prototype._getExtractHelperObject=function(e,r,i){var o=null;o={};o.oHashedItemsOriginal=this._getHashedItemsFromSite(e)||{};o.oHashedItemsPersonalized=this._getHashedItemsFromSite(r);o.oPersonalizationDelta=i;return o};a.prototype._extractFromOriginalSiteOneGroup=function(e,r,i,o){var t=false,a,s,p,n="movedTiles";o=o||"tiles";if(o!=="tiles"){n="movedLinks"}p=function(e,r){s[e]=s[e]?s[e]:{};s[e].fromGroup=r;s[e].toGroup=null};if(r&&r.oHashedItemsPersonalized&&r.oPersonalizationDelta&&e&&e.groups&&e.groups[i]&&e.groups[i].payload&&Array.isArray(e.groups[i].payload[o])){a=e.groups[i].payload[o];r.oPersonalizationDelta[n]=r.oPersonalizationDelta[n]?r.oPersonalizationDelta[n]:{};s=r.oPersonalizationDelta[n];if(r.oHashedItemsPersonalized[i]){a.forEach(function(e){if(!r.oHashedItemsPersonalized[i][o][e.id]){p(e.id,i)}});t=true}else{a.forEach(function(e){p(e.id,i)});t=true}}return t};a.prototype._extractPersonalizationDeltaForTile=function(e,r,i,a){var s=t.get(["oHashedItemsOriginal",i,a,e.id,"sItemId"],r);if(!s){return false}var p={};if(e.title!==s.title){p.title=e.title}if(e.subTitle!==s.subTitle){p.subTitle=e.subTitle}if(e.info!==s.info){p.info=e.info}if(e.displayFormatHint!==s.displayFormatHint&&!(e.displayFormatHint==="default"&&!s.displayFormatHint)){p.displayFormatHint=e.displayFormatHint}if(o(p)){return false}if(!r.oPersonalizationDelta.modifiedTiles){r.oPersonalizationDelta.modifiedTiles={}}var n=r.oPersonalizationDelta.modifiedTiles;p.id=e.id;n[e.id]=p;return true};a.prototype._extractFromPersonalizedSiteOneGroup=function(r,i,o,t){var a=false,s,p,n=false,l,u=this,d="movedTiles";t=t||"tiles";if(t!=="tiles"&&t!=="links"){return a}if(t!=="tiles"){d="movedLinks"}if(i&&i.oPersonalizationDelta&&r&&r.groups&&r.groups[o]&&r.groups[o].payload&&Array.isArray(r.groups[o].payload[t])){l=r.groups[o].payload[t];i.oPersonalizationDelta[d]=i.oPersonalizationDelta[d]?i.oPersonalizationDelta[d]:{};s=i.oPersonalizationDelta[d];p=[];l.forEach(function(r,a){if(!r){return}p.push(r.id);if(i.oHashedItemsOriginal[o]&&i.oHashedItemsOriginal[o][t][r.id]){if(s[r.id]){e.error("Extract personalization failed","The Tile ID "+r.id+" is not unique in the site","PersonalizationProcessor");delete s[r.id]}if(i.oHashedItemsOriginal[o][t][r.id].iIndex!==a){n=true}u._extractPersonalizationDeltaForTile(r,i,o,t)}else{n=true;if(s[r.id]){if(s[r.id].fromGroup&&s[r.id].fromGroup!==o){if(!s[r.id].toGroup){s[r.id].toGroup=o;u._extractPersonalizationDeltaForTile(r,i,s[r.id].fromGroup,t)}}}else{s[r.id]={};s[r.id].fromGroup=null;s[r.id].toGroup=o;s[r.id].item=r}}});if(n){i.oPersonalizationDelta.groups=i.oPersonalizationDelta.groups||{};i.oPersonalizationDelta.groups[o]=i.oPersonalizationDelta.groups[o]||{};i.oPersonalizationDelta.groups[o].payload=i.oPersonalizationDelta.groups[o].payload||{};if(t==="tiles"){i.oPersonalizationDelta.groups[o].payload.tileOrder=p}else{i.oPersonalizationDelta.groups[o].payload.linkOrder=p}}a=true}return a};a.prototype._cleanupRemovedGroups=function(e,r){var i,o;if(r.removedGroups&&r&&Array.isArray(r.removedGroups)&&r.removedGroups.length>0){r.removedGroups.forEach(function(t){if(e&&e.groups&&e.groups[t]&&e.groups[t].payload){[{sType:"tiles",sPersonalizationDeltaType:"movedTiles"},{sType:"links",sPersonalizationDeltaType:"movedLinks"}].forEach(function(a){if(Array.isArray(e.groups[t].payload[a.sType])){i=e.groups[t].payload[a.sType];i.forEach(function(e){if(r[a.sPersonalizationDeltaType]){o=r[a.sPersonalizationDeltaType][e.id];if(o&&o.fromGroup&&o.fromGroup===t&&!o.toGroup){delete r[a.sPersonalizationDeltaType][e.id]}}})}})}})}};a.prototype._setItemOrderOnSiteCollection=function(e,r){var i=true,o=e.length,t,a={},s,p,n,l;if(!Array.isArray(e)||!Array.isArray(e)||e.length!==r.length){return false}t=e.splice(0,e.length);for(s=0;s<r.length;s++){n=r[s];p=t.shift();if(p&&n===p.id){e.push(p)}else if(a[n]){e.push(a[n]);delete a[n];if(p){a[p.id]=p}}else if(p){a[p.id]=p;l=false;while(t.length>0){p=t.shift();if(n===p.id){e.push(p);l=true;break}else{a[p.id]=p}}if(!l){i=false}}}if(e.length!==o){i=false}return i};a.prototype._setItemOrderOnSiteGroupForItemType=function(e,r,i){var o=true,t,a;if(i==="tiles"||i==="links"){a=i==="tiles"?"tileOrder":"linkOrder"}else{return false}if(r.payload&&Array.isArray(r.payload[a])&&r.payload[a].length>0){if(e.payload&&Array.isArray(e.payload[i])&&e.payload[i].length>0){t=this._setItemOrderOnSiteCollection(e.payload[i],r.payload[a]);if(!t){o=false}}else{o=false}}return o};a.prototype._setItemOrderOnSite=function(e,r){var i=true,o,t=this;if(e.groups&&r.groups){Object.keys(r.groups).forEach(function(a){if(r.groups[a]&&e.groups[a]){o=t._setItemOrderOnSiteGroupForItemType(e.groups[a],r.groups[a],"tiles");if(!o){i=false}o=t._setItemOrderOnSiteGroupForItemType(e.groups[a],r.groups[a],"links");if(!o){i=false}}})}return i};a.prototype._applyMoveItemsWithoutOrder=function(e,r,i){var t=true,a,s,p="tileOrder",n,l,u,d=[],f=this;function y(o,t){var a=true;if(e.groups[t]&&e.groups[t].payload&&r.groups&&r.groups[t]&&r.groups[t].payload&&Array.isArray(r.groups[t].payload[p])&&r.groups[t].payload[p].length>0){if(!Array.isArray(e.groups[t].payload[i])){e.groups[t].payload[i]=[]}e.groups[t].payload[i].push(o)}else{a=false}return a}if(i==="tiles"||i==="links"){s=i==="tiles"?"movedTiles":"movedLinks";p=i==="tiles"?"tileOrder":"linkOrder"}else{return false}if(!e||!e.groups||!e.site||!e.site.payload||!Array.isArray(e.site.payload.groupsOrder)||!r){return false}if(r[s]){Object.keys(r[s]).forEach(function(p){n=r[s][p];if(n.fromGroup){if(n.toGroup){if(n.fromGroup!==n.toGroup){if(e.groups[n.fromGroup]&&e.groups[n.fromGroup].payload&&Array.isArray(e.groups[n.fromGroup].payload[i])){d=e.groups[n.fromGroup].payload[i];l=f._getItemIndex(d,p);if(l>=0){u=d.splice(l,1);a=y(u[0],n.toGroup);if(!a){t=false}}else{t=false}}else{t=false}}else{t=false}}else if(e.groups[n.fromGroup]&&e.groups[n.fromGroup].payload&&Array.isArray(e.groups[n.fromGroup].payload[i])){d=e.groups[n.fromGroup].payload[i];l=f._getItemIndex(d,p);if(l>=0){d.splice(l,1)}else{t=false}}else{t=false}}else if(n.toGroup){if(n.item&&!o(n.item)){a=y(n.item,n.toGroup);if(!a){t=false}}else{t=false}}else{t=false}})}return t};a.prototype._applyItemChanges=function(e,r){var i=true,o;o=this._applyMoveItemsWithoutOrder(e,r,"tiles");if(!o){i=false}o=this._applyMoveItemsWithoutOrder(e,r,"links");if(!o){i=false}if(r.groups){o=this._setItemOrderOnSite(e,r);if(!o){i=false}}return i};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/CommonDataModel/SiteConverter", ["sap/base/Log"],function(e){"use strict";var i=function(){};i.prototype.convertTo=function(i,t){if(t._version==="3.0.0"||t.identification&&t.payload){switch(i){case"3.0.0":return this._convertPageToSite(t);case"3.1.0":return this._convertSiteToPage(t);default:e.error("The received version for the site/page conversion is not supported");return{}}}else{e.error("The site converter did not receive a correct page/site object.");return{}}};i.prototype._convertPageToSite=function(e){var i={groups:{},_version:"3.0.0",site:{identification:e.identification,payload:{groupsOrder:e.payload.layout.sectionOrder}}};var t=e.payload.sections;for(var o=0;o<Object.keys(t).length;o++){var r=Object.keys(t)[o];var a=e.payload.sections[r];i.groups[r]={identification:{id:a.id,title:a.title},payload:{tiles:this._convertVizPayloadObjectToArray(a)}};if("visible"in a){i.groups[r].identification.isVisible=a.visible}if("preset"in a){i.groups[r].payload.isPreset=a.preset}if("locked"in a){i.groups[r].payload.locked=a.locked}if("default"in a){i.groups[r].payload.isDefaultGroup=a.default}}return i};i.prototype._convertSiteToPage=function(e){var i={identification:e.site.identification,payload:{layout:{sectionOrder:e.site.payload.groupsOrder},sections:{}}};var t=e.groups;var o;var r;var a;for(var n=0;n<Object.keys(t).length;n++){o=Object.keys(t)[n];r=e.groups[o];a=this._createVizPayloadObject(r.payload.tiles);i.payload.sections[o]={id:r.identification.id,title:r.identification.title,layout:a.layout,viz:a.viz};var s=i.payload.sections[o];if("isVisible"in r.identification){s.visible=r.identification.isVisible}if("isPreset"in r.payload){s.preset=r.payload.isPreset}if("locked"in r.payload){s.locked=r.payload.locked}if("isDefaultGroup"in r.payload){s.default=r.payload.isDefaultGroup}}return i};i.prototype._createVizPayloadObject=function(e){var i=[];var t={};var o=e.reduce(function(e,t){i.push(t.id);e[t.id]=t;return e},{});t.layout={vizOrder:i};t.viz=o;return t};i.prototype._convertVizPayloadObjectToArray=function(e){return e.layout.vizOrder.reduce(function(i,t){i.push(e.viz[t]);return i},[])};return i});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/CommonDataModel/vizTypeDefaults/VizTypeDefaults", ["sap/base/Log","sap/ui/core/Manifest","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/ObjectPath"],function(s,e,a,t,n,i){"use strict";const l={STATIC_LAUNCHER:"sap.ushell.StaticAppLauncher",DYNAMIC_LAUNCHER:"sap.ushell.DynamicAppLauncher",CARD:"sap.ushell.Card"};class c{static#s=null;#e=null;static async getAll(){if(!c.#s){c.#s=new c}return c.#s._getAll()}async _getAll(){if(!this.#e){this.#e={};const s={};s[l.STATIC_LAUNCHER]="sap/ushell/components/tiles/cdm/applauncher/manifest.json";s[l.DYNAMIC_LAUNCHER]="sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json";s[l.CARD]="sap/ushell/services/CommonDataModel/vizTypeDefaults/cardManifest.json";await Promise.all(Object.keys(s).map(async e=>{const a=s[e];const t=await this._loadManifest(a);this.#e[e]=t}))}return this.#e}async _loadManifest(s){const t=sap.ui.require.toUrl(s);const n=await e.load({manifestUrl:t,async:true});return a(n.getRawJson())}}return c});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ContentExtensionAdapterFactory", ["sap/ushell/Config","sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig","sap/ui/thirdparty/jquery"],function(e,r,jQuery){"use strict";var n={};n.getAdapters=function(r){var t=n._getConfigAdapters(r);var a={};var i=t.map(function(r){var t=e.last(r.configSwitch);if(!t){return Promise.resolve()}var i=n._getAdapter(r);i.then(function(e){a[r.contentProviderName]=e});return i});return new Promise(function(e){jQuery.when.apply(jQuery,i).then(function(){e(a)})})};n._getConfigAdapters=function(e){if(!e){e=r._getConfigAdapters()}if(!Array.isArray(e)){e=[e]}return e};n._getAdapter=function(e){var r=new jQuery.Deferred;var t=e.configHandler?e.configHandler():{};var a=e.adapter.replace(/\./g,"/");sap.ui.require([a],function(){var a=n._getAdapterInstance(e.adapter,e.system,null,t);r.resolve(a)});return r.promise()};n._getAdapterInstance=function(e,r,n,t){var a=sap.ui.require(e.replaceAll(".","/"));if(a){var i={config:t||{}};return new a(r,n,i)}return null};return n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/CrossApplicationNavigation", ["sap/ushell/services/AppConfiguration","sap/ushell/services/_CrossApplicationNavigation/utils","sap/ushell/utils/type","sap/ushell/TechnicalParameters","sap/ushell/appIntegration/AppLifeCycle","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/merge","sap/ushell/utils","sap/ushell/ApplicationType","sap/ushell/UI5ComponentType","sap/base/Log","sap/ushell/utils/UrlParsing","sap/base/util/deepClone","sap/ui/base/Object","sap/ushell/api/common/ComponentInstantiation"],function(e,t,n,a,r,i,s,jQuery,o,p,c,l,u,h,f,g,v,m){"use strict";function d(l,u,d){var A;if(d&&d.config){A=d.config}function y(a,r){var i;var o;var p;if(typeof a!=="string"&&!s(a)&&a!==undefined){h.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined}if(a===undefined){return undefined}var c=e.getCurrentApplication();if(r){if(typeof r.getComponentData!=="function"||!s(r.getComponentData())||!r.getComponentData().startupParameters||!s(r.getComponentData().startupParameters)){h.error("Cannot call getComponentData on component","the component should be an application root component","sap.ushell.services.CrossApplicationNavigation")}else{var l=r.getComponentData().startupParameters;if(l.hasOwnProperty("sap-system")){i=l["sap-system"][0]}if(l.hasOwnProperty("sap-ushell-next-navmode")){o=l["sap-ushell-next-navmode"][0]}}}else{if(c&&c["sap-system"]){i=c["sap-system"]}else if(c&&c.url){i=new URL(c.url,window.location.href).searchParams.get("sap-system")}if(c&&c["sap-ushell-next-navmode"]){o=c["sap-ushell-next-navmode"]}else if(c&&c.url){o=new URL(c.url,window.location.href).searchParams.get("sap-ushell-next-navmode")}}if(c){p=c.contentProviderId}var u=t._injectParameters({type:n,inject:{"sap-system":i,"sap-ushell-navmode":o,"sap-app-origin-hint":p},injectEmptyString:{"sap-app-origin-hint":true},args:a});return u}function S(e){if(localStorage&&localStorage["sap-ushell-enc-test"]==="false"){return e}if(!A||!A["sap-ushell-enc-test"]){if(localStorage&&localStorage["sap-ushell-enc-test"]!=="true"){return e}}if(typeof e!=="string"&&!s(e)&&e!==undefined){h.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined}if(e===undefined){return undefined}if(s(e)){var t=i({},e);if(t.target&&t.target.shellHash){if(typeof t.target.shellHash==="string"){if(t.target.shellHash!=="#"&&t.target.shellHash!==""){t.target.shellHash=S(t.target.shellHash)}}return t}t.params=t.params||{};t.params["sap-ushell-enc-test"]=["A B%20C"];return t}var n=e;if(!/[?&]sap-system=/.test(n)){var a=n.indexOf("?")>-1?"&":"?";n+=a+"sap-ushell-enc-test="+encodeURIComponent("A B%20C")}return n}this._extractInnerAppRoute=function(e){var t=this;if(typeof e==="string"){var n=e.split("&/");var a=n.shift();return{intent:a,innerAppRoute:n.length>0?"&/"+n.join("&/"):""}}if(Object.prototype.toString.apply(e)==="[object Object]"){var r=o.get("target.shellHash",e);if(typeof r==="string"){var i=t._extractInnerAppRoute(r);e.target.shellHash=i.intent;return{intent:e,innerAppRoute:i.innerAppRoute}}if(e.hasOwnProperty("appSpecificRoute")){var s=e.appSpecificRoute;delete e.appSpecificRoute;var p=typeof s==="string"&&s.indexOf("&/")!==0&&s.length>0;return{innerAppRoute:p?"&/"+s:s,intent:e}}return{intent:e,innerAppRoute:""}}h.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:e}};this._injectInnerAppRoute=function(e,t){var n=this;if(!t){return e}if(typeof e==="string"){return e+t}if(Object.prototype.toString.apply(e)==="[object Object]"){var a=o.get("target.shellHash",e);if(typeof a==="string"){e.target.shellHash=n._injectInnerAppRoute(a,t);return e}e.appSpecificRoute=t}return e};this.hrefForExternal=function(e,i,s){if(typeof i!=="object"&&i!==undefined&&i!==null){s=i;i=undefined}if(s){var o=new jQuery.Deferred;this.hrefForExternalAsync(e,i).then(o.resolve).catch(o.reject);return o.promise()}h.error("Deprecated option 'bAsync=false'. Please use 'bAsync=true' instead",null,"sap.ushell.services.CrossApplicationNavigation");var c=p({},e);var l=this._extractInnerAppRoute(c);var u=l.intent;t.addXAppStateFromParameter(u,"sap-xapp-state-data");c=y(u,i);c=t.injectStickyParameters({args:c,appLifeCycle:r,technicalParameters:a,type:n});c=S(c);c=this._injectInnerAppRoute(c,l.innerAppRoute);var f=sap.ushell.Container.getService("ShellNavigationInternal");if(!f){h.debug("Shell not available, no Cross App Navigation");return""}return f.hrefForExternalSync(c,undefined,i)};this.hrefForExternalAsync=function(e,i){var s=p({},e);var o=this._extractInnerAppRoute(s);var c=o.intent;return Promise.resolve().then(function(){return t.addXAppStateFromParameterAsync(c,"sap-xapp-state-data")}).then(function(){s=y(c,i);return t.injectStickyParametersAsync({args:s,appLifeCycle:r,technicalParameters:a,type:n})}).then(function(e){s=e;s=S(s);s=this._injectInnerAppRoute(s,o.innerAppRoute);return sap.ushell.Container.getServiceAsync("ShellNavigationInternal")}.bind(this)).then(function(e){return new Promise(function(t,n){e.hrefForExternal(s,undefined,i).then(t).catch(n)})}).catch(function(){h.debug("Shell not available, no Cross App Navigation");return""})};this.expandCompactHash=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal").then(function(n){n.expandCompactHash(e).done(t.resolve).fail(t.reject)});return t.promise()};this.backToPreviousApp=function(){return this.isInitialNavigationAsync().then(function(e){if(e){return this.toExternal({target:{shellHash:"#"},writeHistory:false})}this.historyBack();return undefined}.bind(this))};this.historyBack=function(e){var t=-1;if(e&&typeof e==="number"){if(e<=0){h.warning("historyBack called with an argument <= 0 and will result in a forward navigation or refresh","expected was an argument > 0","sap.ushell.services.CrossApplicationNavigation#historyBack")}t=e*-1}window.history.go(t)};this.isInitialNavigation=function(){h.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.isInitialNavigation'. Please use 'isInitialNavigationAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var e=o.get("sap.ushell.Container");var t=e&&typeof e.getService==="function"&&e.getService("ShellNavigationInternal");if(!t){h.debug("ShellNavigationInternal service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true}var n=t.isInitialNavigation();if(typeof n==="undefined"){return true}return n};this.isInitialNavigationAsync=function(){return sap.ushell.Container.getServiceAsync("ShellNavigationInternal").then(function(e){var t=e.isInitialNavigation();if(typeof t==="undefined"){return true}return t}).catch(function(){h.debug("ShellNavigationInternal service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true})};this.toExternal=function(e,i){var s=e.writeHistory;var o=p({},e);var c=p({},o);this._processShellHashWithParams(o);var l=this._extractInnerAppRoute(o);var u=l.intent;var f;var g;return Promise.all([sap.ushell.Container.getServiceAsync("AppLifeCycle"),sap.ushell.Container.getServiceAsync("ShellNavigationInternal")]).then(function(e){var t=e[0];f=e[1];g=t.getCurrentApplication();return g&&g.getIntent()}).then(function(e){this._checkIfAppNeedsToBeReloaded(c,g,e,f.hashChanger);return t.addXAppStateFromParameterAsync(u,"sap-xapp-state-data")}.bind(this)).then(function(){o=y(u,i);return t.injectStickyParametersAsync({args:o,appLifeCycle:r,technicalParameters:a,type:n})}).then(function(e){o=e;o=S(o);delete o.writeHistory;o=this._injectInnerAppRoute(o,l.innerAppRoute);return f.toExternal(o,i,s)}.bind(this)).catch(function(e){h.error("CrossAppNavigation.toExternal failed",e,"sap.ushell.services.CrossApplicationNavigation")})};this._checkIfAppNeedsToBeReloaded=function(e,t,n,a){if(!t||!n||!e||!e.target){return}if(e.target.shellHash){var r=f.parseShellHash(e.target.shellHash)||{};e.target={semanticObject:r.semanticObject,action:r.action,contextRaw:r.contextRaw};e.appSpecificRoute=r.appSpecificRoute;e.params=Object.assign({},e.params,r.params)}if(e.appSpecificRoute){return}if(t.applicationType!=="UI5"){return}if(e.target.semanticObject!==n.semanticObject){return}if(e.target.action!==n.action){return}var i={params:{}};if(e.params){Object.keys(e.params).forEach(function(t){var n=e.params[t];var a=Array.isArray(n)?n:[n];i.params[t]=a.map(function(e){return e.toString()})})}if(!f.haveSameIntentParameters(i,n)){return}a.setReloadApplication(true)};this.hrefForAppSpecificHash=function(e){h.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.hrefForAppSpecificHash'. Please use 'hrefForAppSpecificHashAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var t=o.get("sap.ushell.Container");if(t&&typeof t.getService==="function"){var n=t.getService("ShellNavigationInternal");if(n){return n.hrefForAppSpecificHash(e)}}h.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(e)};this.hrefForAppSpecificHashAsync=function(e){return sap.ushell.Container.getServiceAsync("ShellNavigationInternal").then(function(t){return t.hrefForAppSpecificHash(e)}).catch(function(){h.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(e)})};this.getPrimaryIntent=function(e,t){var n={};var a;var r=/^#\w+-displayFactSheet(?:$|\?.)/;n.tags=["primaryAction"];n.semanticObject=e;if(t){n.params=t}return this.getLinks(n).then(function(e){if(e.length===0){delete n.tags;n.action="displayFactSheet";a=function(e,t){var n;if(e.intent===t.intent){return 0}n=r.test(e.intent)^r.test(t.intent);if(n){return r.test(e.intent)?-1:1}return e.intent<t.intent?-1:1};return this.getLinks(n)}a=function(e,t){if(e.intent===t.intent){return 0}return e.intent<t.intent?-1:1};return e}.bind(this)).then(function(e){return e.length===0?null:e.sort(a)[0]})};this.getSemanticObjectLinks=function(e,i,s,o,p,l){var u=new jQuery.Deferred;Promise.resolve().then(function(){return t.injectStickyParametersAsync({args:{params:i},appLifeCycle:r,technicalParameters:a,type:n})}).then(function(t){t=y(t,o).params;t=S({params:t}).params;var n;if(Array.isArray(e)){n=[];e.forEach(function(e){n.push([{semanticObject:e[0],params:e[1],ignoreFormFactor:!!e[2],ui5Component:e[3],appStateKey:e[4],compactIntents:!!e[5]}])})}else{n={semanticObject:e,params:t,ignoreFormFactor:s,ui5Component:o,appStateKey:p,compactIntents:!!l}}return Promise.all([sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal"),n])}).then(function(e){var t=e[0];var n=e[1];c.invokeUnfoldingArrayArguments(t.getLinks.bind(t),[n]).done(u.resolve).fail(u.reject)});return u.promise()};this.getLinks=function(e){var t;t=c.invokeUnfoldingArrayArguments(this._getLinks.bind(this),[e]);return t};this._getLinks=function(e){var s=new jQuery.Deferred;if(typeof e==="undefined"){e={}}var o=i({},e);o.compactIntents=!!o.compactIntents;o.action=o.action||undefined;o.paramsOptions=t.extractGetLinksParameterOptions(o.params);Promise.resolve().then(function(){return t.injectStickyParametersAsync({args:o,appLifeCycle:r,technicalParameters:a,type:n})}).then(function(e){o=e;var n;if(o.params){n=t.extractGetLinksParameterDefinition(o.params)}else{n=o.params}var a=y({params:n},o.ui5Component).params;a=S({params:a}).params;if(o.appStateKey){a["sap-xapp-state"]=[o.appStateKey];delete o.appStateKey}o.params=a;return sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal")}).then(function(e){e.getLinks(o).done(s.resolve).fail(s.reject)});return s.promise()};this.getDistinctSemanticObjects=function(){var e=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal").then(function(t){t.getDistinctSemanticObjects().done(e.resolve).fail(e.reject)});return e.promise()};this.isIntentSupported=function(e,t){var n=new jQuery.Deferred;var a={};var r=e.map(function(e){var n=y(e,t);a[n]=e;return n});sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal").then(function(e){e.isIntentSupported(r).done(function(e){var t={};Object.keys(e).forEach(function(n){t[a[n]]=e[n]});n.resolve(t)}).fail(n.reject.bind(n))});return n.promise()};this.isNavigationSupported=function(e,t){var n=new jQuery.Deferred;var a=g(e).map(function(e){var n=this._extractInnerAppRoute(e);return y(n.intent,t)}.bind(this));sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal").then(function(e){e.isNavigationSupported(a).done(n.resolve).fail(n.reject)});return n.promise()};this.isUrlSupported=function(e){return new Promise((t,n)=>{if(typeof e!=="string"){n()}if(f.isIntentUrl(e)){const a=f.getHash(e);const r={target:{shellHash:a}};this.isNavigationSupported([r]).done(e=>{if(e[0].supported){t()}else{n()}}).fail(()=>{n()})}else{t()}})};this.createComponentInstance=function(e,t,n){const a=new jQuery.Deferred;const r=this._checkComponentConfig(t);if(r){a.reject(r);return a.promise()}const i=t?.componentData;m.createComponentInstance(e,i,n).then(a.resolve).catch(a.reject);return a.promise()};this.createComponentData=function(e,t){const n=this._checkComponentConfig(t);if(n){return Promise.reject(n)}const a=t?.componentData;return m.createComponentInstantiationData(e,a)};this._checkComponentConfig=function(e){if(e){var t=Object.keys(e).length;if(t>1||t===1&&!e.componentData){return"`oConfig` argument should either be an empty object or contain only the `componentData` property."}}return null};this.createEmptyAppState=function(e,t,n,a){h.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.createEmptyAppState'. Please use 'createEmptyAppStateAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var r=sap.ushell.Container.getService("AppState");if(!v.isA(e,"sap.ui.core.UIComponent")){throw new Error("The passed oAppComponent must be a UI5 Component.")}return r.createEmptyAppState(e,t,n,a)};this.createEmptyAppStateAsync=function(e,t,n,a){if(!v.isA(e,"sap.ui.core.UIComponent")){return Promise.reject("The passed oAppComponent must be a UI5 Component.")}return sap.ushell.Container.getServiceAsync("AppState").then(function(r){return r.createEmptyAppState(e,t,n,a)})};this.getStartupAppState=function(e){this._checkComponent(e);var t=e.getComponentData()&&e.getComponentData()["sap-xapp-state"]&&e.getComponentData()["sap-xapp-state"][0];return this.getAppState(e,t)};this._checkComponent=function(e){if(!v.isA(e,"sap.ui.core.UIComponent")){throw new Error("oComponent passed must be a UI5 Component")}};this.getAppState=function(e,t){var n;var a=new jQuery.Deferred;this._checkComponent(e);sap.ushell.Container.getServiceAsync("AppState").then(function(r){if(typeof t!=="string"){if(t!==undefined){h.error("Illegal Argument sAppStateKey ")}setTimeout(function(){n=r.createEmptyUnmodifiableAppState(e);a.resolve(n)},0);return}r.getAppState(t).done(a.resolve).fail(a.reject)});return a.promise()};this.getAppStateData=function(e){return c.invokeUnfoldingArrayArguments(this._getAppStateData.bind(this),[e])};this._getAppStateData=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(n){if(typeof e!=="string"){if(e!==undefined){h.error("Illegal Argument sAppStateKey ")}setTimeout(function(){t.resolve(undefined)},0)}else{n.getAppState(e).done(function(e){t.resolve(e.getData())}).fail(t.resolve.bind(t,undefined))}});return t.promise()};this.saveMultipleAppStates=function(e){var t=[];var n=new jQuery.Deferred;e.forEach(function(e){t.push(e.save())});jQuery.when.apply(this,t).done(function(){n.resolve(t)}).fail(function(){n.reject("save failed")});return n.promise()};this._processShellHashWithParams=function(e){if(e&&e.processParams===true&&e.target&&e.target.shellHash&&e.params){var t=f.parseShellHash(e.target.shellHash);e.target={semanticObject:t.semanticObject,action:t.action,contextRaw:t.contextRaw};e.appSpecificRoute=t.appSpecificRoute;e.params=Object.assign({},e.params,t.params)}};this.getSupportedAppStatePersistencyMethods=function(){h.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.getSupportedAppStatePersistencyMethods'. Please use 'getSupportedAppStatePersistencyMethodsAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var e=sap.ushell.Container.getService("AppState");return e.getSupportedPersistencyMethods()};this.getSupportedAppStatePersistencyMethodsAsync=function(){return sap.ushell.Container.getServiceAsync("AppState").then(function(e){return e.getSupportedPersistencyMethods()})};this.makeStatePersistent=function(e,t,n){var a=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("AppState").then(function(r){r.makeStatePersistent(e,t,n).done(a.resolve).fail(a.reject)});return a.promise()};this.resolveIntent=function(e){var t=new jQuery.Deferred;sap.ushell.Container.getServiceAsync("NavTargetResolutionInternal").then(function(n){n.resolveHashFragment(e).then(function(e){t.resolve({url:e.url})}).fail(function(e){t.reject(e)})});return t.promise()}}d.hasNoAdapter=true;return d},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/DarkModeSupport", ["sap/base/Log","sap/ui/core/Theming","sap/ushell/Container"],function(e,t,o){"use strict";const n="(prefers-color-scheme: dark)";const s="(forced-colors: active)";const r="(prefers-contrast: more)";const i=[{id:"sap_fiori_3_set",type:"SET",label:"SAP Quartz (Set)",set:{themes:[{id:"sap_fiori_3",colorScheme:"LIGHT",contrast:"LOW"},{id:"sap_fiori_3_dark",colorScheme:"DARK",contrast:"LOW"},{id:"sap_fiori_3_hcw",colorScheme:"LIGHT",contrast:"HIGH"},{id:"sap_fiori_3_hcb",colorScheme:"DARK",contrast:"HIGH"}]}},{id:"sap_horizon_set",type:"SET",label:"SAP Horizon (Set)",set:{themes:[{id:"sap_horizon",colorScheme:"LIGHT",contrast:"LOW"},{id:"sap_horizon_dark",colorScheme:"DARK",contrast:"LOW"},{id:"sap_horizon_hcw",colorScheme:"LIGHT",contrast:"HIGH"},{id:"sap_horizon_hcb",colorScheme:"DARK",contrast:"HIGH"}]}}];function a(){}a.Mode={LIGHT:"LIGHT",DARK:"DARK"};a.prototype.prefersDark=function(){return window.matchMedia(n).matches};a.prototype.prefersContrast=function(){return window.matchMedia(s).matches||window.matchMedia(r).matches};a.prototype.setup=async function(){if(o.getUser().getDetectDarkMode()){await this.enableDarkModeBasedOnSystem()}};a.prototype.canAutomaticallyToggleDarkMode=function(){const e=new URLSearchParams(window.location.search);if(e.get("sap-theme")||e.get("sap-ui-theme")){return false}return true};a.prototype.isThemeSupportDarkMode=function(e){e=e||this._getCurrentTheme();return!!this._getThemeSet(e)};a.prototype._toggleDarkModeBasedOnSystemColorScheme=function(){const e=this._getCurrentTheme();const t=this._getThemeSet(e);const n=this._getThemeFromSet(t,e);if(n){const e=this.prefersDark()?"DARK":"LIGHT";const s=this.prefersContrast()?"HIGH":"LOW";const r=this._findThemeInSet(t,e,s)||this._findThemeInSet(t,e,n.contrast);if(r?.id&&r.id!==n.id){o.getUser().setTheme(r.id);o.getServiceAsync("UserInfo").then(function(e){e.updateUserPreferences(o.getUser())})}}};a.prototype._applyDefaultUserTheme=function(){var e=o.getUser();if(e.constants&&e.constants.themeFormat){e.applyTheme(e.getTheme(e.constants.themeFormat.ORIGINAL_THEME))}};a.prototype._toggleMediaListener=function(e){if(e&&!this.fnOnMediaChange){this.fnOnMediaChange=this._toggleDarkModeBasedOnSystemColorScheme.bind(this);window.matchMedia(n).addEventListener("change",this.fnOnMediaChange)}if(!e&&this.fnOnMediaChange){window.matchMedia(n).removeEventListener("change",this.fnOnMediaChange);this.fnOnMediaChange=null}};a.prototype.enableDarkModeBasedOnSystem=async function(){if(!this.canAutomaticallyToggleDarkMode()){e.warning("Automatic dark mode detection is disabled when the theme is provided via url parameter");return}const t=await o.getServiceAsync("UserInfo");let n;if(t?.getThemeList){n=await t.getThemeList()}this._aThemeSets=n?.sets?.length?n.sets:i;this._toggleDarkModeBasedOnSystemColorScheme();this._toggleMediaListener(true)};a.prototype.disableDarkModeBasedOnSystem=function(){this._toggleMediaListener(false);this._applyDefaultUserTheme()};a.prototype.toggleDetection=function(e){if(e){this.enableDarkModeBasedOnSystem()}else{this.disableDarkModeBasedOnSystem()}};a.prototype._getCurrentTheme=function(){return t.getTheme()};a.prototype._getThemeSet=function(e){const t=o.getUser().getThemeSet();const n=this._aThemeSets||[];const s=t=>!!t?.set.themes?.find?.(t=>t?.id===e);const r=n.find(e=>e.id===t);return s(r)?r:n.find(s)};a.prototype._getThemeFromSet=function(e,t){return e?.set.themes.find(e=>e.id===t)};a.prototype._findThemeInSet=function(e,t,o){return e?.set.themes.find(e=>e?.colorScheme===t&&e?.contrast===o)};a.hasNoAdapter=true;return a},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Extension", ["sap/ui/core/Element","sap/ushell/services/Extension/Item","sap/ushell/Container","sap/ushell/utils"],function(e,t,n,i){"use strict";function r(){}r.prototype._createItemVisibilityHandler=function(e,t,n){return async function r(o,s,d){const a=d?[d]:undefined;if(o){await i.promisify(t(e,s,a));return}await i.promisify(n(e,s,a))}};r.prototype._createControl=async function(e,t){return i.promisify(e(...t))};r.prototype.createHeaderItem=async function(e,t={}){const{position:n}=t;const i=["begin","end",undefined];if(!i.includes(n)){throw new Error(`Unexpected Input: '${n}' is not a valid position!`)}if(n==="begin"){return this._createHeaderStartItem(e)}return this._createHeaderEndItem(e)};r.prototype._createHeaderStartItem=async function(i){const r=n.getRendererInternal();const o=[i,false,undefined,undefined];const s=r.addHeaderItem.bind(r);const d=r.showHeaderItem.bind(r);const a=r.hideHeaderItem.bind(r);const c=!!e.getElementById(i.id);const u=await this._createControl(s,o);const l=this._createItemVisibilityHandler(u.getId(),d,a);return new t(u,l,c)};r.prototype._createHeaderEndItem=async function(i){const r=n.getRendererInternal();const o=[i,false,undefined,undefined];const s=r.addHeaderEndItem.bind(r);const d=r.showHeaderEndItem.bind(r);const a=r.hideHeaderEndItem.bind(r);const c=!!e.getElementById(i.id);const u=await this._createControl(s,o);const l=this._createItemVisibilityHandler(u.getId(),d,a);return new t(u,l,c)};r.prototype.createUserAction=async function(i,r={}){const o=n.getRendererInternal();const s=[{controlType:r.controlType||"sap.m.Button",oControlProperties:i,bIsVisible:false,bCurrentState:undefined,aStates:undefined}];const d=o.addUserAction.bind(o);const a=o.showActionButton.bind(o);const c=o.hideActionButton.bind(o);const u=!!e.getElementById(i.id);const l=await this._createControl(d,s);const p=this._createItemVisibilityHandler(l.getId(),a,c);return new t(l,p,u)};r.prototype.setSecondTitle=async function(e){const t=n.getRendererInternal();t.setHeaderTitle(e)};r.hasNoAdapter=true;return r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Extension/Item", ["sap/base/Log","sap/ushell/state/StateManager"],function(t,i){"use strict";class e{#t=null;#i={};#e=async(t,i,e)=>{throw new Error("Shall be implemented by item")};constructor(e,r,s){this.#t=e;this.#e=r;if(!s){i.removeManagedControl(this.#t.getId());i.addManagedControl(this.#t.getId())}else{t.warning("The control was pre-created and the application is responsible for the control life cycle")}}async destroy(){this.hideForAllApps().hideForCurrentApp().hideOnHome();this.#t.destroy()}setVisibilityForCurrentApp(i){if(!i&&this.#i[this.#r()]){t.warning("The item was set to 'visible' for the current launchpad state and cannot be turned off for this app")}this.#e(i,true,undefined)}setVisibilityForLaunchpadState(t,e){if(e){i.updateManagedControl(this.#t.getId(),true)}this.#i[t]=e;this.#e(e,false,t)}showForCurrentApp(){this.setVisibilityForCurrentApp(true);return this}hideForCurrentApp(){if(this.#i[this.#r()]){t.warning("The extension was set visible for the current launchpad state and cannot be turned off for this app")}this.setVisibilityForCurrentApp(false);return this}showForAllApps(){this.setVisibilityForLaunchpadState("app",true);return this}hideForAllApps(){this.setVisibilityForLaunchpadState("app",false);return this}showOnHome(){this.setVisibilityForLaunchpadState("home",true);return this}hideOnHome(){this.setVisibilityForLaunchpadState("home",false);return this}#r(){const t=i.getLaunchpadState();return t}}return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/FlpLaunchPage", ["sap/base/Log","sap/base/util/extend","sap/ushell/services/ContentExtensionAdapterFactory","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/Config","sap/m/library","sap/m/GenericTile","sap/ushell/Container"],function(e,t,r,jQuery,i,o,n,a,s){"use strict";var u=n.LoadState;function l(n){var l=this,d=[],g;this.oAdapters={default:n};g=r.getAdapters();g.then(function(e){t(this.oAdapters,e)}.bind(this));this.getGroups=function(){if(o.last("/core/spaces/enabled")){return(new jQuery.Deferred).resolve([]).promise()}var t=new jQuery.Deferred;g.then(function(){var r=Object.keys(l.oAdapters).map(function(e){return l._getAdapter(e).getGroups()});jQuery.when.apply(jQuery,r).done(function(){var e=[].concat.apply([],arguments);t.resolve(e)}).fail(function(){e.error("getGroups failed")})});return t.promise()};this.getGroupsForBookmarks=function(t){var r=new jQuery.Deferred;this.getGroups().then(function(o){this.getDefaultGroup().then(function(e){if(o.length>0){o=o.filter(function(e){if(t===true){return this.isGroupVisible(e)}return!this.isGroupLocked(e)&&this.isGroupVisible(e)}.bind(this));o=o.map(function(t){return{title:t===e&&i.i18n.getText("my_group")||this.getGroupTitle(t),object:t}}.bind(this))}r.resolve(o)}.bind(this),function(t){e.error("getGroupsForBookmarks - getDefaultGroup - failed: "+t.message)})}.bind(this),function(t){e.error("getGroupsForBookmarks - getGroups - failed: "+t.message)});return r.promise()};this.getGroupTilesForSearch=function(e){var t=this._getAdapter(e.contentProvider);if(t.getGroupTileClones){return t.getGroupTileClones(e)}return Promise.resolve(this.getGroupTiles(e))};this.getDefaultGroup=function(){var t=this._getAdapter().getDefaultGroup();t.fail(function(){e.error("getDefaultGroup failed")});return t};this.getGroupTitle=function(e){return this._getAdapter(e.contentProvider).getGroupTitle(e)};this.getGroupId=function(e){return this._getAdapter(e.contentProvider).getGroupId(e)};this.getGroupById=function(e){var t=new jQuery.Deferred;this.getGroups().then(function(r){t.resolve(r.find(function(t){return this.getGroupId(t)===e}.bind(this)))}.bind(this));return t.promise()};this.getGroupTiles=function(e){return this._getAdapter(e.contentProvider).getGroupTiles(e)};this.getTilesByGroupId=function(e){var t=new jQuery.Deferred,r=this;this.getGroupById(e).then(function(i){if(i){var o=r._getAdapter(i.contentProvider).getGroupTiles(i);if(o){o=o.map(function(t){return{id:r.getTileId(t),title:r.getTileTitle(t),subtitle:r.getCatalogTilePreviewSubtitle(t),url:r.getCatalogTileTargetURL(t),icon:r.getCatalogTilePreviewIcon(t),groupId:e}})}else{o=[]}t.resolve(o)}else{t.resolve([])}});return t.promise()};this.getLinkTiles=function(e){return this._getAdapter(e.contentProvider).getLinkTiles(e)};this.addGroupAt=function(t,r){var i,o=r,n=this._getAdapter();if(n.addGroupAt){i=n.addGroupAt(t,r);i.fail(function(){e.error("addGroup "+t+" failed")})}else{var a=new jQuery.Deferred;i=n.addGroup(t);i.done(function(e){var t=this.moveGroup(e,o),r=e;t.done(function(){a.resolve(r)});t.fail(function(){a.reject()})}.bind(this));i.fail(function(){e.error("addGroup "+t+" failed");a.reject()});return a.promise()}return i};this.addGroup=function(t){var r=this._getAdapter().addGroup(t);r.fail(function(){e.error("addGroup "+t+" failed")});return r};this.removeGroup=function(t,r){var i=this._getAdapter(t.contentProvider).removeGroup(t,r);i.fail(function(){e.error("Fail to removeGroup "+l.getGroupTitle(t))});return i};this.resetGroup=function(t,r){var i=this._getAdapter(t.contentProvider).resetGroup(t,r);i.fail(function(){e.error("Fail to resetGroup "+l.getGroupTitle(t))});return i};this.isGroupRemovable=function(e){return this._getAdapter(e.contentProvider).isGroupRemovable(e)};this.isGroupLocked=function(e){var t=this._getAdapter(e.contentProvider);if(typeof t.isGroupLocked==="function"){return t.isGroupLocked(e)}return false};this.isGroupFeatured=function(e){var t=this._getAdapter(e.contentProvider);if(typeof t.isGroupFeatured==="function"){return t.isGroupFeatured(e)}return false};this.moveGroup=function(t,r){var i=this._getAdapter(t.contentProvider).moveGroup(t,r);i.fail(function(){e.error("Fail to moveGroup "+l.getGroupTitle(t))});return i};this.setGroupTitle=function(t,r){var i=this._getAdapter(t.contentProvider).setGroupTitle(t,r);i.fail(function(){e.error("Fail to set Group title: "+l.getGroupTitle(t))});return i};this.hideGroups=function(t){var r=new jQuery.Deferred,i=this._getAdapter();if(typeof i.hideGroups!=="function"){r.reject("hideGroups() is not implemented in the Adapter.")}else{i.hideGroups(t).done(function(){r.resolve()}).fail(function(t){e.error("Fail to store groups visibility."+t);r.reject()})}return r.promise()};this.isGroupVisible=function(e){var t=this._getAdapter(e.contentProvider);if(typeof t.isGroupVisible==="function"){return t.isGroupVisible(e)}return true};this.addTile=function(t,r){return this._getAdapter(r.contentProvider).addTile(t,r).fail(function(r,i){e.error("Fail to add Tile: "+l.getCatalogTileId(t),i,"sap.ushell.services.LaunchPage")})};this.removeTile=function(t,r,i){var o=new jQuery.Deferred;s.getServiceAsync("AppState").then(function(n){this._getAdapter(t.contentProvider).removeTile(t,r,i).done(function(){var e=this.getCatalogTileTargetURL(r);this.deleteURLStatesPersistentData(e,n);o.resolve()}.bind(this)).fail(function(t){e.error("Fail to remove Tile: "+this.getTileId(r));o.reject(t)}.bind(this))}.bind(this)).catch(o.reject);return o.promise()};this.moveTile=function(t,r,i,o,n,a){var s=this._getAdapter().moveTile(t,r,i,o,n,a);s.fail(function(){e.error("Fail to move Tile: "+l.getTileId(t))});return s};this.isLinkPersonalizationSupported=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(typeof r.isLinkPersonalizationSupported==="function"){return r.isLinkPersonalizationSupported(e)}return false};this.getTileId=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileId(e)};this.getTileTitle=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileTitle(e)};this.getTileType=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(r.getTileType){return r.getTileType(e)}return"tile"};this.getTileView=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t).getTileView(e);if(!jQuery.isFunction(r.promise)){r=(new jQuery.Deferred).resolve(r).promise()}return r};this.getCardManifest=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCardManifest(e)};this.getAppBoxPressHandler=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(r.getAppBoxPressHandler){return r.getAppBoxPressHandler(e)}return undefined};this.getTileSize=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileSize(e)};this.getTileTarget=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getTileTarget(e)};this.getTileDebugInfo=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(typeof r.getTileDebugInfo==="function"){return r.getTileDebugInfo(e)}return undefined};this.isTileIntentSupported=function(e){var t=e&&e.contentProvider,r=this._getAdapter(t);if(typeof r.isTileIntentSupported==="function"){return r.isTileIntentSupported(e)}return true};this.refreshTile=function(e){var t=e&&e.contentProvider;this._getAdapter(t).refreshTile(e)};this.setTileVisible=function(e,t){var r=e&&e.contentProvider;this._getAdapter(r).setTileVisible(e,t)};this.registerTileActionsProvider=function(e){if(typeof e!=="function"){throw new Error("Tile actions Provider is not a function")}d.push(e)};this.getTileActions=function(e){var t=[],r,i=e&&e.contentProvider,o=this._getAdapter(i);if(typeof o.getTileActions==="function"){r=o.getTileActions(e);if(r&&r.length){t.push.apply(t,r)}}for(var n=0;n<d.length;n++){r=d[n](e);if(r&&r.length){t.push.apply(t,r)}}return t};this.getCatalogs=function(){return this._getAdapter().getCatalogs()};this.isCatalogsValid=function(){return this._getAdapter().isCatalogsValid()};this.getCatalogData=function(t){var r=this._getAdapter();if(typeof r.getCatalogData!=="function"){e.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(t)}}return r.getCatalogData(t)};this.getCatalogError=function(e){return this._getAdapter().getCatalogError(e)};this.getCatalogId=function(e){return this._getAdapter().getCatalogId(e)};this.getCatalogTitle=function(e){return this._getAdapter().getCatalogTitle(e)};this.getCatalogTiles=function(t){var r=this._getAdapter().getCatalogTiles(t);r.fail(function(){e.error("Fail to get Tiles of Catalog: "+l.getCatalogTitle(t))});return r};this.getCatalogTileId=function(e){return this._getAdapter(e.contentProvider).getCatalogTileId(e)};this.getCatalogTileContentProviderId=function(e){if(this._getAdapter(e.contentProvider).getCatalogTileContentProviderId){return this._getAdapter(e.contentProvider).getCatalogTileContentProviderId(e)}return""};this.getStableCatalogTileId=function(e){var t=this._getAdapter(e.contentProvider);if(t&&!t.getStableCatalogTileId){return null}return t.getStableCatalogTileId(e)};this.getCatalogTileTitle=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileTitle(e)};this.getCatalogTileSize=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileSize(e)};this.getCatalogTileViewControl=function(e,t){var r=e&&e.contentProvider;var i=this._getAdapter(r);if(typeof i.getCatalogTileViewControl==="function"){return i.getCatalogTileViewControl(e,t)}var o=new jQuery.Deferred;var n=this.getCatalogTileView(e,t);o.resolve(n);return o.promise()};this.getCatalogTileView=function(t,r){e.error("Deprecated API call of 'sap.ushell.LaunchPage.getCatalogTileView'. Please use 'getCatalogTileViewControl' instead",null,"sap.ushell.services.LaunchPage");var i=t&&t.contentProvider;var o=this._getAdapter(i);if(o.getCatalogTileView){return o.getCatalogTileView(t,r)}var n=this.getTileTitle(t)||this.getCatalogTileTitle(t);return this._createErrorTile(n,"The LaunchPageAdapter does not support getCatalogTileView")};this._createErrorTile=function(e,t){var r=new a({state:u.Failed,header:e,subheader:t||""}).addStyleClass("sapUshellTileError");return r};this.getCatalogTileTargetURL=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileTargetURL(e)};this.getCatalogTileTags=function(e){var t=e&&e.contentProvider;var r=this._getAdapter(t);if(typeof r.getCatalogTileTags==="function"){return r.getCatalogTileTags(e)}return[]};this.getCatalogTileKeywords=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTileKeywords(e)};this.getCatalogTileTechnicalAttributes=function(e){var t=e&&e.contentProvider;var r=this._getAdapter(t);if(typeof r.getCatalogTileTechnicalAttributes==="function"){return r.getCatalogTileTechnicalAttributes(e)}return[]};this.getCatalogTilePreviewTitle=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTilePreviewTitle(e)};this.getCatalogTilePreviewInfo=function(e){var t=e&&e.contentProvider;if(this._getAdapter(t).getCatalogTilePreviewInfo){return this._getAdapter(t).getCatalogTilePreviewInfo(e)}return""};this.getCatalogTilePreviewSubtitle=function(e){var t=e&&e.contentProvider;var r=this._getAdapter(t);if(r.getCatalogTilePreviewSubtitle){return r.getCatalogTilePreviewSubtitle(e)}return undefined};this.getCatalogTilePreviewIcon=function(e){var t=e&&e.contentProvider;return this._getAdapter(t).getCatalogTilePreviewIcon(e)};this.addBookmark=function(t,r,i){var o=new jQuery.Deferred;if(this._hasRequiredBookmarkParameters(t)){if(r&&this.isGroupLocked(r)){var n="Tile cannot be added, target group ("+this.getGroupTitle(r)+")is locked!";e.error(n);return o.reject(n)}var a=r&&r.contentProvider;this._getAdapter(a).addBookmark(t,r,i).done(o.resolve).fail(function(){e.error("Fail to add bookmark for URL: "+t.url+" and Title: "+t.title);o.reject()})}return o.promise()};this.addCustomBookmark=function(t,r,i){var o=new jQuery.Deferred;if(this._hasRequiredBookmarkParameters(t)){if(r&&this.isGroupLocked(r)){var n="Tile cannot be added, target group ("+this.getGroupTitle(r)+")is locked!";e.error(n);return o.reject(n)}var a=r&&r.contentProvider;this._getAdapter(a).addCustomBookmark(t,r,i).done(o.resolve).fail(function(){e.error("Fail to add bookmark for URL: "+t.url+" and Title: "+t.title);o.reject()})}return o.promise()};this._hasRequiredBookmarkParameters=function(t){if(!t.title){e.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration")}if(!t.url){e.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration")}return true};this.countBookmarks=function(t,r){if(!t||typeof t!=="string"){e.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL")}var i=this._getAdapter().countBookmarks(t,r);i.fail(function(){e.error("Fail to count bookmarks")});return i};this.countCustomBookmarks=function(e){if(!e.url||!e.vizType){return Promise.reject("countCustomBookmarks: Some required parameters are missing.")}return this._getAdapter().countCustomBookmarks(e)};this.deleteBookmarks=function(t,r){var i=new jQuery.Deferred;if(!t||typeof t!=="string"){return i.reject(new Error("Missing URL")).promise()}s.getServiceAsync("AppState").then(function(o){this._getAdapter().deleteBookmarks(t,undefined,r).done(function(e){this.deleteURLStatesPersistentData(t,o);i.resolve(e)}.bind(this)).fail(function(r){e.error("Fail to delete bookmark for: "+t);i.reject(r)})}.bind(this)).catch(i.reject);return i.promise()};this.deleteCustomBookmarks=function(e){if(!e.url||!e.vizType){return Promise.reject("deleteCustomBookmarks: Some required parameters are missing.")}return this._getAdapter().deleteCustomBookmarks(e)};this.updateBookmarks=function(t,r,i){if(!t||typeof t!=="string"){e.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL")}if(!r||typeof r!=="object"){e.error("Fail to update bookmark. No valid parameters, URL is: "+t);throw new Error("Missing parameters")}var o=new jQuery.Deferred;this._getAdapter().updateBookmarks(t,r,undefined,i).done(o.resolve).fail(function(){e.error("Fail to update bookmark for: "+t);o.reject()});return o.promise()};this.updateCustomBookmarks=function(e,t){if(!e.url||!e.vizType||!t){return Promise.reject("updateCustomBookmarks: Some required parameters are missing.")}return this._getAdapter().updateCustomBookmarks(e,t)};this.onCatalogTileAdded=function(e){this._getAdapter().onCatalogTileAdded(e)};this.deleteURLStatesPersistentData=function(t,r){if(r.getSupportedPersistencyMethods().length===0){return}if(t&&t.length>0){try{var i=p(t,"sap-xapp-state"),o=p(t,"sap-iapp-state");if(i!==undefined||o!==undefined){this.countBookmarks(t).done(function(e){if(e===0){if(i!==undefined){r.deleteAppState(i)}if(o!==undefined){r.deleteAppState(o)}}})}}catch(t){e.error("error in deleting persistent state when bookmark is deleted",t,"sap.ushell.services.LaunchPage")}}};function p(e,t){var r=new RegExp("(?:"+t+"=)([^&/]+)"),i=r.exec(e),o;if(i&&i.length===2){o=i[1]}return o}}l.prototype._getAdapter=function(e){return this.oAdapters[e]||this.oAdapters.default};l.hasNoAdapter=false;return l},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/FrameBoundExtension", ["sap/ui/core/Element","sap/ushell/services/FrameBoundExtension/FloatingContainer","sap/ushell/services/FrameBoundExtension/Footer","sap/ushell/services/FrameBoundExtension/Item","sap/ushell/services/FrameBoundExtension/SidePane","sap/ushell/services/FrameBoundExtension/ToolArea","sap/ushell/Container","sap/ushell/utils","sap/ushell/services/FrameBoundExtension/UserSettingsEntry"],function(e,t,n,r,o,s,i,a,c){"use strict";function d(){}d.prototype._createItemVisibilityHandler=function(e,t,n){return async function r(o,s,i){const c=i?[i]:undefined;if(o){await a.promisify(t(e,s,c));return}await a.promisify(n(e,s,c))}};d.prototype._createControl=async function(e,t){return a.promisify(e(...t))};d.prototype.createHeaderItem=async function(e,t={}){const{position:n}=t;const r=["begin","end",undefined];if(!r.includes(n)){throw new Error(`Unexpected Input: '${n}' is not a valid position!`)}if(n==="begin"){return this._createHeaderStartItem(e)}return this._createHeaderEndItem(e)};d.prototype._createHeaderStartItem=async function(t){const n=i.getRendererInternal();const o=[t,false,undefined,undefined];const s=n.addHeaderItem.bind(n);const a=n.showHeaderItem.bind(n);const c=n.hideHeaderItem.bind(n);const d=!!e.getElementById(t.id);const l=await this._createControl(s,o);const u=this._createItemVisibilityHandler(l.getId(),a,c);return new r(l,u,d)};d.prototype._createHeaderEndItem=async function(t){const n=i.getRendererInternal();const o=[t,false,undefined,undefined];const s=n.addHeaderEndItem.bind(n);const a=n.showHeaderEndItem.bind(n);const c=n.hideHeaderEndItem.bind(n);const d=!!e.getElementById(t.id);const l=await this._createControl(s,o);const u=this._createItemVisibilityHandler(l.getId(),a,c);return new r(l,u,d)};d.prototype.createSubHeader=async function(t,n={}){const o=i.getRendererInternal();const s=[{controlType:n.controlType||"sap.m.Bar",oControlProperties:t,bIsVisible:false,bCurrentState:undefined,aStates:undefined}];const a=o.addShellSubHeader.bind(o);const c=o.showSubHeader.bind(o);const d=o.hideSubHeader.bind(o);const l=!!e.getElementById(t.id);const u=await this._createControl(a,s);const p=this._createItemVisibilityHandler(u.getId(),c,d);return new r(u,p,l)};d.prototype.getSidePane=async function(){return new o};d.prototype.getToolArea=async function(){return new s};d.prototype.createUserAction=async function(t,n={}){const o=i.getRendererInternal();const s=[{controlType:n.controlType||"sap.m.Button",oControlProperties:t,bIsVisible:false,bCurrentState:undefined,aStates:undefined}];const a=o.addUserAction.bind(o);const c=o.showActionButton.bind(o);const d=o.hideActionButton.bind(o);const l=!!e.getElementById(t.id);const u=await this._createControl(a,s);const p=this._createItemVisibilityHandler(u.getId(),c,d);return new r(u,p,l)};d.prototype.createFooter=async function(e,t={}){const r=i.getRendererInternal();const o=[{controlType:t.controlType||"sap.m.Bar",oControlProperties:e}];const s=r.setShellFooter.bind(r);const a=await this._createControl(s,o);return new n(a)};d.prototype.addUserSettingsEntry=async function(e){const t=i.getRendererInternal();const n=t.getShellController().addUserPreferencesEntry(e);return new c(n)};d.prototype.addGroupedUserSettingsEntry=async function(e){const t=i.getRendererInternal();const n=t.getShellController().addUserPreferencesEntry(e,true);return new c(n)};d.prototype.getFloatingContainer=async function(){return new t};d.prototype.setSecondTitle=async function(e){const t=i.getRendererInternal();t.setHeaderTitle(e)};d.hasNoAdapter=true;return d});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/FrameBoundExtension/FloatingContainer", ["sap/ui/base/ManagedObject","sap/ui/core/EventBus","sap/ushell/Container"],function(e,t,n){"use strict";const i=e.extend("sap.ushell.services.FrameBoundExtension.FloatingContainer",{metadata:{library:"sap.ushell",events:{dockingStateUpdate:{parameters:{visible:{type:"boolean"},docked:{type:"boolean"}}}}},constructor:function(){e.apply(this,arguments);this._oRenderer=n.getRendererInternal();this._oEventDelegate=null;this._bDocked=null;t.getInstance().subscribe("launchpad","shellFloatingContainerIsDocked",this._handleDocking,this).subscribe("launchpad","shellFloatingContainerIsUnDocked",this._handleDocking,this).subscribe("launchpad","shellFloatingContainerIsUnDockedOnResize",this._handleDocking,this)}});i.prototype._handleDocking=function(e,t,n={}){const i=!!n.visible;if(t==="shellFloatingContainerIsDocked"&&this._bDocked!==true){this._bDocked=true;this.fireDockingStateUpdate({visible:i,docked:this._bDocked})}else if((t==="shellFloatingContainerIsUnDocked"||t==="shellFloatingContainerIsUnDockedOnResize")&&this._bDocked!==false){this._bDocked=false;this.fireDockingStateUpdate({visible:i,docked:this._bDocked})}};i.prototype.setContent=function(e,t){this._oRenderer.setFloatingContainerContent(e);this._oEventDelegate={onAfterRendering:()=>{this._oRenderer.setFloatingContainerDragSelector(t)}};e.addEventDelegate(this._oEventDelegate,this);return this};i.prototype.show=function(){this._oRenderer.setFloatingContainerVisibility(true);return this};i.prototype.hide=function(){this._oRenderer.setFloatingContainerVisibility(false);return this};i.prototype.isDocked=async function(){const e=this._oRenderer.getFloatingContainerState()||"";return e.startsWith("docked")};i.prototype.isVisible=async function(){return!!this._oRenderer.getFloatingContainerVisiblity()};i.prototype.exit=function(){t.getInstance().unsubscribe("launchpad","shellFloatingContainerIsDocked",this._handleDocking,this).unsubscribe("launchpad","shellFloatingContainerIsUnDocked",this._handleDocking,this).unsubscribe("launchpad","shellFloatingContainerIsUnDockedOnResize",this._handleDocking,this)};return i});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/FrameBoundExtension/Footer", ["sap/ushell/Container"],function(r){"use strict";class t{#r=r.getRendererInternal();#t=null;constructor(r){this.#t=r}async getControl(){return this.#t}async destroy(){this.#r.removeFooterById(this.#t.getId());this.#t.destroy()}}return t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/FrameBoundExtension/Item", ["sap/base/Log","sap/ushell/state/StateManager"],function(t,i){"use strict";class e{#t=null;#i={};#e=async(t,i,e)=>{throw new Error("Shall be implemented by item")};constructor(e,r,s){this.#t=e;this.#e=r;if(!s){i.removeManagedControl(this.#t.getId());i.addManagedControl(this.#t.getId())}else{t.warning("The control was pre-created and the application is responsible for the control life cycle")}}async getControl(){return this.#t}async destroy(){this.hideForAllApps().hideForCurrentApp().hideOnHome();this.#t.destroy()}setVisibilityForCurrentApp(i){if(!i&&this.#i[this.#r()]){t.warning("The item was set to 'visible' for the current launchpad state and cannot be turned off for this app")}this.#e(i,true,undefined)}setVisibilityForLaunchpadState(t,e){if(e){i.updateManagedControl(this.#t.getId(),true)}this.#i[t]=e;this.#e(e,false,t)}showForCurrentApp(){this.setVisibilityForCurrentApp(true);return this}hideForCurrentApp(){if(this.#i[this.#r()]){t.warning("The extension was set visible for the current launchpad state and cannot be turned off for this app")}this.setVisibilityForCurrentApp(false);return this}showForAllApps(){this.setVisibilityForLaunchpadState("app",true);return this}hideForAllApps(){this.setVisibilityForLaunchpadState("app",false);return this}showOnHome(){this.setVisibilityForLaunchpadState("home",true);return this}hideOnHome(){this.setVisibilityForLaunchpadState("home",false);return this}#r(){const t=i.getLaunchpadState();return t}}return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/FrameBoundExtension/SidePane", ["sap/ui/core/Element","sap/ushell/services/FrameBoundExtension/Item","sap/ushell/Container","sap/ushell/utils"],function(e,t,i,n){"use strict";class s{#e=i.getRendererInternal();#t=async(e,t,i)=>{const s=[i,e];await n.promisify(this.#e.setLeftPaneVisibility(...s))};async createItem(i,s){const r=[{controlType:s.controlType,oControlProperties:i,bIsVisible:false,bCurrentState:undefined,aStates:undefined}];const a=this.#e.addSidePaneContent.bind(this.#e);const o=this.#e.showLeftPaneContent.bind(this.#e);const d=this.#e.hideLeftPaneContent.bind(this.#e);const l=!!e.getElementById(i.id);const h=await n.promisify(a(...r));async function u(e,t,i){const s=i?[i]:undefined;if(e){await n.promisify(o(h.getId(),t,s));return}await n.promisify(d(h.getId(),t,s))}return new t(h,u,l)}setVisibilityForLaunchpadState(e,t){this.#t(t,false,e)}showForAllApps(){this.setVisibilityForLaunchpadState("app",true);return this}hideForAllApps(){this.setVisibilityForLaunchpadState("app",false);return this}showOnHome(){this.setVisibilityForLaunchpadState("home",true);return this}hideOnHome(){this.setVisibilityForLaunchpadState("home",false);return this}}return s});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/FrameBoundExtension/ToolArea", ["sap/ui/core/Element","sap/ushell/services/FrameBoundExtension/Item","sap/ushell/Container","sap/ushell/utils"],function(e,t,i,s){"use strict";class r{#e=i.getRendererInternal();#t=async(e,t,i)=>{const r=[i,e];await s.promisify(this.#e.showToolArea(...r))};async createItem(i){const r=[i,null,undefined,undefined];const n=this.#e.addToolAreaItem.bind(this.#e);const a=this.#e.showToolAreaItem.bind(this.#e);const o=this.#e.removeToolAreaItem.bind(this.#e);const d=!!e.getElementById(i.id);const l=await s.promisify(n(...r));async function h(e,t,i){const r=i?[i]:undefined;if(e){await s.promisify(a(l.getId(),t,r));return}await s.promisify(o(l.getId(),t,r))}return new t(l,h,d)}setVisibilityForLaunchpadState(e,t){this.#t(t,false,e)}showForAllApps(){this.setVisibilityForLaunchpadState("app",true);return this}hideForAllApps(){this.setVisibilityForLaunchpadState("app",false);return this}showOnHome(){this.setVisibilityForLaunchpadState("home",true);return this}hideOnHome(){this.setVisibilityForLaunchpadState("home",false);return this}}return r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/FrameBoundExtension/UserSettingsEntry", ["sap/ushell/EventHub"],function(t){"use strict";class e{#t=null;constructor(t){this.#t=t}open(){t.emit("openUserSettings",{targetEntryId:this.#t,time:Date.now()})}}return e},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/LaunchPage", ["sap/ushell/Container"],e=>{"use strict";const t=["getGroups","getGroupsForBookmarks","getGroupTilesForSearch","getDefaultGroup","getGroupTitle","getGroupId","getGroupById","getGroupTiles","getTilesByGroupId","getLinkTiles","addGroupAt","addGroup","removeGroup","resetGroup","isGroupRemovable","isGroupLocked","isGroupFeatured","moveGroup","setGroupTitle","hideGroups","isGroupVisible","addTile","removeTile","moveTile","isLinkPersonalizationSupported","getTileId","getTileTitle","getTileType","getTileView","getCardManifest","getAppBoxPressHandler","getTileSize","getTileTarget","getTileDebugInfo","isTileIntentSupported","refreshTile","setTileVisible","registerTileActionsProvider","getTileActions","getCatalogs","isCatalogsValid","getCatalogData","getCatalogError","getCatalogId","getCatalogTitle","getCatalogTiles","getCatalogTileId","getCatalogTileContentProviderId","getStableCatalogTileId","getCatalogTileTitle","getCatalogTileSize","getCatalogTileViewControl","getCatalogTileView","getCatalogTileTargetURL","getCatalogTileTags","getCatalogTileKeywords","getCatalogTileTechnicalAttributes","getCatalogTilePreviewTitle","getCatalogTilePreviewInfo","getCatalogTilePreviewSubtitle","getCatalogTilePreviewIcon","addBookmark","addCustomBookmark","countBookmarks","countCustomBookmarks","deleteBookmarks","deleteCustomBookmarks","updateBookmarks","updateCustomBookmarks","onCatalogTileAdded","deleteURLStatesPersistentData"];function o(){this._oFlpLaunchPage=e.getService("FlpLaunchPage")}t.forEach(e=>{o.prototype[e]=function(...t){return this._oFlpLaunchPage[e](...t)}});o.hasNoAdapter=true;return o},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Menu", ["sap/ushell/Config","sap/ushell/library","sap/ushell/utils","sap/ui/model/json/JSONModel","sap/base/util/deepClone","sap/base/Log","sap/ushell/resources","sap/ushell/Container"],function(e,t,n,r,i,o,a,s){"use strict";var u=t.ContentNodeType;function d(){this._init.apply(this,arguments)}d.prototype._init=function(e){this.oAdapter=e;this.oModel=new r([]);this.oModel.setSizeLimit(1e3);this.bIsMenuModelFilled=false;this._aBlockedList=[]};d.prototype.isMenuEnabled=function(){return this.oAdapter.isMenuEnabled()};d.prototype.isSideNavigationEnabled=function(){if(this.oAdapter.isSideNavigationEnabled){return this.oAdapter.isSideNavigationEnabled()}return Promise.resolve(false)};d.prototype.getMenuEntries=function(){return this.oAdapter.getMenuEntries().then(function(t){if(e.last("/core/homeApp/enabled")){var n={id:e.last("/core/spaces/myHome/myHomeSpaceId"),title:a.i18n.getText("HomeApp.Menu.Title"),"help-id":"homeApp-menuEntry",description:"",icon:undefined,type:"IBN",target:{semanticObject:"Shell",action:"home",parameters:[],innerAppRoute:undefined},isHomeEntry:true,menuEntries:[]};t.splice(0,0,n)}return t}).then(function(e){return e.map(function(e){e.uid=n.generateUniqueId([]);if(e.menuEntries){e.menuEntries.forEach(function(e){e.uid=n.generateUniqueId([])})}return e})})};d.prototype.getSpacesPagesHierarchy=function(){var e;if(this.oAdapter.getContentNodeEntries){e=this.oAdapter.getContentNodeEntries()}else{e=this.getMenuEntries()}return e.then(function(e){return{spaces:e.reduce(function(e,t){var n;if(t.menuEntries&&t.menuEntries.length){n=this._getAccessiblePages(t.menuEntries)}else{n=this._getAccessiblePages([t])}if(n.length){e.push({title:t.title,id:n[0].spaceId,pages:n.map(function(e){return{title:e.title,id:e.id}})})}return e}.bind(this),[])}}.bind(this)).catch(function(){return{spaces:[]}})};d.prototype.getContentNodes=function(e,t){if(!e){e=Object.values(u)}t=!!t;return this.oAdapter.getContentNodes().then(function(n){n=i(n);var r=this._filterContentNodes(n,e,t);return r}.bind(this))};d.prototype._filterContentNodes=function(e,t,n){if(!Array.isArray(e)){return[]}return e.reduce(function(e,r){r.children=this._filterContentNodes(r.children,t,n);var i=t.includes(r.type);if(i||n&&r.children.length){e.push(r)}return e}.bind(this),[])};d.prototype.getDefaultSpace=async function(){const t=await this.getContentNodes([u.Space,u.Page]);if(e.last("/core/menu/personalization/enabled")){const e=await this.getMenuModel();const n=e.getData().filter(function e(t){return t.type!=="separator"&&t.pinned}).filter(function e(n){return t.some(function e(t){return n.id===t.id&&t.children.length})}).reduce(function e(t,n){return t.pinnedSortOrder<n.pinnedSortOrder?t:n},{});const r=t.find(function e(t){return n.id===t.id});if(r){return r}}const n=t.find(function(e){return e.children.length});return n};d.prototype.getMyHomeSpace=function(){if(!e.last("/core/spaces/myHome/enabled")){return Promise.resolve(null)}var t=e.last("/core/spaces/myHome/myHomeSpaceId");return this.getContentNodes([u.Space,u.Page]).then(function(e){return e.find(function(e){return e.type===u.Space&&e.id===t})||null})};d.prototype._getAccessiblePages=function(e){return e.filter(function(e){return e&&e.type==="IBN"&&e.target&&e.target.semanticObject==="Launchpad"&&e.target.action==="openFLPPage"}).map(function(e){var t=e.target.parameters.find(function(e){return e.name==="spaceId"});var n=e.target.parameters.find(function(e){return e.name==="pageId"});return{title:e.title,id:n&&n.value,spaceId:t&&t.value}})};d.prototype.hasMultiplePages=function(e){return this.getContentNodes([u.Space,u.Page]).then(function(t){var n=t.find(function(t){return t.type===u.Space&&t.id===e});return n&&n.children.length>1})};d.prototype.isSpacePageAssigned=function(e,t){return this.getContentNodes([u.Space,u.Page]).then(function(n){var r=n.find(function(t){return t.type===u.Space&&t.id===e});if(!r){return false}var i=r.children.find(function(e){return e.type===u.Page&&e.id===t});return!!i})};d.prototype.getSpaceAndPageTitles=function(e,t){return this.getContentNodes([u.Space,u.Page]).then(function(n){var r;var i=n.find(function(t){return t.type===u.Space&&t.id===e});if(i){r=i.children.find(function(e){return e.type===u.Page&&e.id===t})}if(r){return{spaceTitle:i.label,pageTitle:r.label}}return null})};d.prototype.getMenuModel=function(){if(this.bIsMenuModelFilled){return Promise.resolve(this.oModel)}var t;if(e.last("/core/menu/personalization/enabled")){t=this._getMenuEntriesWithPersonalizationData()}else{t=this.getMenuEntries()}return t.then(function(e){var t=e;this.oModel.setData(t);this.bIsMenuModelFilled=true;return this.oModel}.bind(this))};d.prototype._getMenuEntriesWithPersonalizationData=function(){return Promise.all([this.getMenuEntries(),this.oAdapter.getMenuPersonalization()]).then(function(e){var t=e[0];var n=e[1];var r;var i={type:"separator",pinned:true};if(t[0]&&t[0].isHomeEntry){t.splice(1,0,i)}else{t.splice(0,0,i)}if(!n){r=t.map(function e(t,n){t.pinned=true;t.pinnedSortOrder=n;return t})}else{var o=1;if(t[0].isHomeEntry){o=2}r=t.map(function e(t){t.pinned=n.pinnedSpaces.includes(t.id);t.pinnedSortOrder=n.pinnedSpaces.indexOf(t.id);if(t.pinnedSortOrder>-1){t.pinnedSortOrder=t.pinnedSortOrder+o}return t});t[0].pinned=true;t[0].pinnedSortOrder=0;if(t[0].isHomeEntry){t[1].pinned=true;t[1].pinnedSortOrder=1}}return r})};d.prototype._extractPersonalization=function(){var e={version:"1.0.0",pinnedSpaces:[]};var t=this.oModel.getData();e.pinnedSpaces=t.filter(function e(t){return!t.isHomeEntry&&t.type!=="separator"&&t.pinned}).sort(function(e,t){return e.pinnedSortOrder-t.pinnedSortOrder}).map(function(e){return e.id});return e};d.prototype.savePersonalization=function(){var e=this._extractPersonalization();return s.getServiceAsync("PersonalizationV2").then(async function(t){var n;n={container:"sap.ushell.menuPersonalization",item:"data"};var r={validity:"Infinity",keyCategory:t.KeyCategory.FIXED_KEY,writeFrequency:t.WriteFrequency.HIGH,clientStorageAllowed:false};const i=await t.getPersonalizer(n,r);return i.setPersData(e)})};d.prototype.moveMenuEntry=function(e,t){var n=this.oModel.getData();var r=n.find(function(t){return t.pinnedSortOrder===e});r.pinnedSortOrder=t-.5;n.map(function(e){return e}).filter(function(e){return e.pinned}).sort(function(e,t){return e.pinnedSortOrder-t.pinnedSortOrder}).forEach(function(e,t){e.pinnedSortOrder=t});this.oModel.refresh(true)};d.prototype.isPinned=function(t){if(e.last("/core/menu/personalization/enabled")===false){return Promise.resolve(true)}return this.getMenuModel().then(function(e){return e.getData().some(function(e){return e.id===t&&e.pinned})})};d.prototype.isWorkPage=function(e){if(this.oAdapter.isWorkPage){return this.oAdapter.isWorkPage(e)}return Promise.resolve(false)};d.prototype._getNodeInfo=function(e,t,n,r){var i;for(var o=0;o<t.length;o++){if(!n){r=this._getManagerIdInNodeTree(e,t[o])}if(t[o].id===e){return{node:t[o],isRootNode:!n,managerId:r||null}}if(t[o].menuEntries&&t[o].menuEntries.length>0){i=this._getNodeInfo(e,t[o].menuEntries,true,r);if(i.node){return i}}}return{node:null,isRootNode:false,managerId:null}};d.prototype._nodeManagementPermitted=function(e,t,n){var r=this._getNodeInfo(e,t);if(!r.node){o.error("Node with id "+e+" cannot be found and will be skipped.");return false}if(r.managerId&&r.managerId!==n){o.error("Node with id "+e+" cannot be managed by '"+n+"'"+" because it is already managed by '"+r.managerId+"'.");return false}return true};d.prototype._getManagerIdInNodeTree=function(e,t,n){if(t.id===e){return n||t.managerId}if(t.managerId){n=t.managerId}if(t.menuEntries&&t.menuEntries.length>0){for(var r=0;r<t.menuEntries.length;++r){n=this._getManagerIdInNodeTree(e,t.menuEntries[r],n)}return n}return null};d.prototype._updateNode=function(e,t,r){var o=i(r||{});function a(e){if(e){e.uid=e.uid||n.generateUniqueId([]);(e.menuEntries||[]).forEach(a)}}a(o);return t.map(function(t){if(t.id===e){return o}if(t.menuEntries&&t.menuEntries.length>0){t.menuEntries=this._updateNode(e,t.menuEntries,o)}return t}.bind(this))};d.prototype._createEntryProviders=function(e,t,n){var r=n.getData();var i={};var o;for(var a=0;a<t.length;++a){o=t[a];if(!this._nodeManagementPermitted(o,r,e)){continue}i[o]={setData:function(e,t){var i=this._updateNode(e,r,t);n.setData(i)}.bind(this,o)}}return i};d.prototype._isManagerBlocked=function(e){return this._aBlockedList.indexOf(e)>-1};d.prototype._setManagerBlocked=function(e){this._aBlockedList.push(e)};d.prototype.getEntryProvider=function(e,t){if(this._isManagerBlocked(e)){o.error("ManagerId '"+e+"' is already listed as an entry manager.");return Promise.reject("ManagerId "+e+" is already listed as an entry manager.")}this._setManagerBlocked(e);return this.getMenuModel().then(function(n){return this._createEntryProviders(e,t,n)}.bind(this))};d.hasNoAdapter=false;return d});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/MessageBroker", ["sap/ushell/services/MessageBroker/MessageBrokerEngine","sap/base/Log"],function(e,n){"use strict";var t={};var r=function(r,i,o){t=o&&o.config||{};e.setEnabled(this.isEnabled());if(!this.isEnabled()){n.warning("FLP's message broker service is disabled by shell configuration")}};r.prototype.isEnabled=function(){if(t.enabled===undefined||t.enabled===true){return true}return false};r.prototype.connect=function(n){return e.connect(n)};r.prototype.disconnect=function(n){return e.disconnect(n)};r.prototype.subscribe=function(n,t,r,i){return e.subscribe(n,t,r,i)};r.prototype.unsubscribe=function(n,t){return e.unsubscribe(n,t)};r.prototype.publish=function(n,t,r,i,o,s){return e.publish(n,t,r,i,o,s)};r.prototype.addAcceptedOrigin=function(n){e.addAcceptedOrigin(n)};r.prototype.removeAcceptedOrigin=function(n){e.removeAcceptedOrigin(n)};r.prototype.getAcceptedOrigins=function(){return e.getAcceptedOrigins()};r.hasNoAdapter=true;return r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/MessageBroker/MessageBrokerEngine", ["sap/base/Log","sap/base/util/deepExtend"],(e,s)=>{"use strict";let n=true;const t={};const i={};const r={};const c={};t[window.location.origin]=true;function a(){this.setEnabled=function(e){n=e};this.processPostMessage=function(s){if(!n){return Promise.reject()}const t=s.oMessageData;const i=t.body;const r=s.oMessage;const c=r.origin;const a=r.source;i.requestId=t.request_id;if(!a){const s="Missing iframe object in PostMessage request";e.error(s,null,"sap.ushell.services.MessageBroker");return Promise.reject(s)}return this._handlePostMessageRequest(i,a,c)};this.connect=function(s){let t;if(!n){return Promise.reject()}if(typeof s!=="string"||!s.length){t="Missing required parameter client id"}else if(r[s]){t="Client is already connected"}else{r[s]=true;return Promise.resolve()}e.error(t,null,"sap.ushell.services.MessageBroker");return Promise.reject(t)};this.disconnect=function(s){let t;if(!n){return Promise.reject()}if(typeof s!=="string"||!s.length){t="Missing required parameter client id"}else if(!r[s]){t="Client is already disconnected"}else{for(const e in i){const n=i[e];for(const e in n){const t=n[e];if(t.clientId===s){n.splice(e,1);break}}}if(c[s]&&c[s].channels.length){this._emitEvent("clientUnsubscribed",s,c[s].channels);delete c[s]}delete r[s];return Promise.resolve()}e.error(t,null,"sap.ushell.services.MessageBroker");return Promise.reject(t)};this.subscribe=function(s,t,a,o,l,u){let d;const h="clientSubscribed";let g=[];let f=false;if(!n){return Promise.reject()}if(typeof s!=="string"||!s.length||!t.length||typeof l!=="object"&&(typeof a!=="function"||typeof o!=="function")){d="Missing required parameter(s)"}else if(!r[s]){d="Client is not connected"}else{for(const e in t){const n=t[e];const r={clientId:s,subscribedChannels:t,messageCallback:a,clientConnectionCallback:o,iframe:l||{},origin:u||"",isUI5:!l};if(!i[n.channelId]){i[n.channelId]=[]}const d=i[n.channelId].find(e=>e.clientId===s);if(!d){i[n.channelId].push(r)}if(c[s]){const e=c[s].channels.find(e=>e.channelId===n.channelId);if(!e){c[s].channels.push(n)}}}if(!c[s]){f=true;const e={clientId:s,channels:t};c[s]=e;g=Object.values(c).filter(e=>e.clientId!==s)}if(Object.keys(c).length>1){this._emitEvent(h,s,t)}if(f){setTimeout(()=>{if(g.length){g.forEach(e=>{if(!l){o(h,e.clientId,e.channels)}else{const s={clientId:e.clientId,channels:e.channels,channelId:"sap.ushell.MessageBroker",messageName:h};sap.ui.require(["sap/ushell/appIntegration/PostMessageManager"],e=>{const n=this._buildPostMessageObject("event",s);this._sendPostMessage(e,n,l,u)})}})}},1e3)}return Promise.resolve()}e.error(d,null,"sap.ushell.services.MessageBroker");return Promise.reject(d)};this.unsubscribe=function(s,t){let a;if(!n){return Promise.reject()}if(typeof s!=="string"||!s.length||!Array.isArray(t)||!t.length){a="Missing required parameter(s)";e.error(a,null,"sap.ushell.services.MessageBroker");return Promise.reject(a)}if(!r[s]){a="Client is not connected";e.error(a,null,"sap.ushell.services.MessageBroker");return Promise.reject(a)}for(const n in t){const r=t[n];if(i[r.channelId]){const e=i[r.channelId];for(const n in e){const t=e[n];if(t.clientId===s){const t=c[s].channels;c[s].channels=t.filter(e=>e.channelId!==r.channelId);e.splice(n,1);break}}}else{const s=`Unknown channel Id: ${r.channelId}`;e.warning(s,null,"sap.ushell.services.MessageBroker")}}this._emitEvent("clientUnsubscribed",s,t);return Promise.resolve()};this.publish=function(s,t,c,a,o,l){let u;let d=[];if(!n){return Promise.reject()}if(!r[t]){u="Client is not connected";e.error(u,null,"sap.ushell.services.MessageBroker");return Promise.reject(u)}if(!i[s]){u=`Unknown channel Id: ${s}`;e.error(u,null,"sap.ushell.services.MessageBroker");return Promise.reject(u)}const h=i[s].find(e=>e.clientId===t);if(!h){u="Client is not subscribed to the provided channel";e.error(u,null,"sap.ushell.services.MessageBroker");return Promise.reject(u)}for(const e in o){const n=o[e];if(n==="*"){d=i[s].concat();break}else{const e=i[s].find(e=>e.clientId===n);if(e){d.push(this._deepCopy(e))}}}if(d.length){this._sendMessage(d,s,c,a,t,l);return Promise.resolve()}u="Target client(s) not found in the provided channel";e.error(u,null,"sap.ushell.services.MessageBroker");return Promise.reject(u)};this.addAcceptedOrigin=function(s){if(!n){return}if(typeof s==="string"&&s.length>0){t[s]=true;if(s.startsWith("https:")&&s.endsWith(":443")){t[s.substring(0,s.length-4)]=true}}else{e.warning("Missing required parameter sOrigin",null,"sap.ushell.services.MessageBroker")}};this.removeAcceptedOrigin=function(e){if(!n){return}delete t[e]};this.getAcceptedOrigins=function(){if(!n){return}return Object.keys(t)};this.getSubscribedClients=function(){if(!n){return}return this._deepCopy(i)};this._emitEvent=function(e,s,n){const t={};for(const r in i){const c=i[r];for(const i in c){const r=c[i];if(r.clientId!==s&&!t[r.clientId]){const i={clientId:s,channels:n};if(r.isUI5!==false){r.clientConnectionCallback(e,s,n)}else{i.channelId="sap.ushell.MessageBroker";i.messageName=e;sap.ui.require(["sap/ushell/appIntegration/PostMessageManager"],e=>{const s=this._buildPostMessageObject("event",i);this._sendPostMessage(e,s,r.iframe,r.origin)})}t[r.clientId]=true}}}};this._sendMessage=function(e,s,n,t,i,r){for(const n in e){const c=e[n];if(c.clientId!==i){if(c.isUI5!==false){c.messageCallback(i,s,t,r)}else{const e={clientId:i,channelId:s,messageName:t,data:r};sap.ui.require(["sap/ushell/appIntegration/PostMessageManager"],s=>{const n=this._buildPostMessageObject("request",e);this._sendPostMessage(s,n,c.iframe,c.origin)})}}}};this._callApi=function(e,s){return this[e].apply(this,s)};this._handlePostMessageRequest=function(e,s,n){return new Promise((t,i)=>{const r=e.clientId;const c=e.channelId;const a=e.requestId;let o=e.messageName;const l=e.subscribedChannels;const u=e.targetClientIds;const d=e.data;const h={connect:[r],disconnect:[r],subscribe:[r,l,null,null,s,n],unsubscribe:[r,l],publish:[c,r,a,o,u,d]};const g={channelId:c,clientId:r,messageName:o,requestId:a};o=h[o]?o:"publish";this._callApi(o,h[o]).then(()=>{if(o!=="publish"){sap.ui.require(["sap/ushell/appIntegration/PostMessageManager"],e=>{const t=this._buildPostMessageObject("response",g);t.messageBody.status="accepted";this._sendPostMessage(e,t,s,n)})}t({_noresponse_:true})}).catch(e=>{i(e)})})};this._buildPostMessageObjectFallback=function(e,s,n){const t="sap.ushell.services.MessageBroker";if(s==="response"){const s={channelId:n.channelId,clientId:n.clientId,correlationMessageId:n.requestId,messageName:n.messageName};const i=e.createPostMessageResponse(t,n.requestId,s,true);return i}if(s==="event"){const s={channelId:n.channelId,clientId:n.clientId,messageName:n.messageName,channels:n.channels};const i=e.createPostMessageRequest(t,s);return i}if(s==="request"){const s={channelId:n.channelId,clientId:n.clientId,messageName:n.messageName,data:n.data};const i=e.createPostMessageRequest(t,s);return i}return e.createPostMessageRequest(t)};this._buildPostMessageObject=function(e,s){const n="sap.ushell.services.MessageBroker";if(e==="response"){const e={channelId:s.channelId,clientId:s.clientId,correlationMessageId:s.requestId,messageName:s.messageName};const t={isRequest:false,requestId:s.requestId,isSuccess:true,serviceRequest:n,messageBody:e};return t}if(e==="event"){const e={channelId:s.channelId,clientId:s.clientId,messageName:s.messageName,channels:s.channels};const t={isRequest:true,serviceRequest:n,messageBody:e};return t}if(e==="request"){const e={channelId:s.channelId,clientId:s.clientId,messageName:s.messageName,data:s.data};const t={isRequest:true,serviceRequest:n,messageBody:e};return t}const t={isRequest:true,serviceRequest:n};return t};this._sendPostMessage=function(e,s,n,t){if(s.isRequest){e.sendRequest(s.serviceRequest,s.messageBody,n,t,false)}else{e.sendResponse(s.requestId,s.serviceRequest,s.messageBody,s.isSuccess,n,t)}};this._buildFunctionName=function(e,s){s=s.charAt(0).toUpperCase()+s.substring(1);return e+s};this._deepCopy=function(e){return s(e)}}return new a},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/NavTargetResolution", ["sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/Container","sap/ushell/services/NavTargetResolutionInternal"],function(jQuery,e,t){"use strict";function n(n,r,s,a){e.error("NavTargetResolution service has been called, which is deprecated. Remove all dependencies!",null,"sap.ushell.services.NavTargetResolution");this._oNavTargetResolutionInternal=t.getService("NavTargetResolutionInternal");this.expandCompactHash=function(e){return this._oNavTargetResolutionInternal.expandCompactHash(e)};this.resolveTarget=function(e){return this._oNavTargetResolutionInternal.resolveTarget(e)};this.resolveHashFragment=function(e){return this._oNavTargetResolutionInternal.resolveHashFragment(e)};this.isIntentSupported=function(e){return this._oNavTargetResolutionInternal.isIntentSupported(e)};this.registerCustomResolver=function(e){return this._oNavTargetResolutionInternal.registerCustomResolver(e)};this.isNavigationSupported=function(e){return this._oNavTargetResolutionInternal.isNavigationSupported(e)}}n.hasNoAdapter=false;return n},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/NavTargetResolutionInternal", ["sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/utils/UrlShortening","sap/ushell/utils/HttpClient","sap/ushell/navigationMode","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/base/Log","sap/ushell/Container"],function(e,t,n,r,i,a,jQuery,s,o,l,u,c){"use strict";function p(e,p,f,h){var d=h&&h.config;var v=function(t){var n=this._isClientSideTargetResolutionEnabled()?this._resolveHashFragmentClientSide(t):e.resolveHashFragment(t);return n}.bind(this);var g;var m=[{name:"DefaultAdapter",isApplicable:function(){return true},resolveHashFragment:v.bind(this)}];var S;var b=new i;this._isClientSideTargetResolutionEnabled=function(){return!!(d&&d.enableClientSideTargetResolution)};this._nextResolveHashFragment=function(e,t){var n=e.pop();if(n.isApplicable(t)){u.info("NavTargetResolutionInternal: custom resolver "+n.name+" resolves "+t);var r=this._nextResolveHashFragment.bind(this,e);return n.resolveHashFragment(t,r)}return this._nextResolveHashFragment(e,t)};this._resolveHashFragmentClientSide=function(e){var t=this._validateHashFragment(e);if(!t.success){return(new jQuery.Deferred).reject(e+" is not a valid hash fragment").promise()}var n=t.hashFragmentWithoutHash;return this._resolveHashFragmentClientSideAndFixApplicationType(n)};this._resolveHashFragmentClientSideAndFixApplicationType=function(e){var t=new jQuery.Deferred;c.getServiceAsync("ClientSideTargetResolution").then(function(t){return t.resolveHashFragment(e)}).then(function(e){if(e&&e.applicationType==="SAPUI5"){e.applicationType="URL"}t.resolve(e)}).catch(t.reject);return t.promise()};this._validateHashFragment=function(e){var n="";var r={success:false};if(e&&e.charAt(0)!=="#"){throw new t.Error("Hash fragment expected in _validateHashFragment","sap.ushell.services.NavTargetResolutionInternal")}n=e.substring(1);if(n){r.success=true}r.hashFragmentWithoutHash=n;return r};this.expandCompactHash=function(e){var t=new jQuery.Deferred;var i=n.parseShellHash(e);if(i&&i.params&&i.params["sap-intent-param"]){c.getServiceAsync("AppState").then(function(n){n.getAppState(i.params["sap-intent-param"][0]).done(function(n){var i=n.getData("sap-intent-param");var a=e;if(i){a=r.expandParamGivenRetrievalFunction(e,"sap-intent-param",function(){return i})}t.resolve(a)}).fail(function(){t.resolve(e)})}).catch(t.reject)}else{t.resolve(e)}return t.promise()};var R=["NWBC","WDA","TR"];this._adjustResolutionResultForUi5Components=function(e){if(typeof e!=="object"){return}delete e["sap.platform.runtime"];if(e&&e.applicationType&&e.applicationType==="SAPUI5"){e.applicationType="URL"}if(e.applicationType==="URL"){var t=/^SAPUI5\.Component=(.*)/.exec(e.additionalInformation);var n=t&&t[1];if(n){e.ui5ComponentName=n}}};this._getSapSystem=function(e,t){var n;if(t&&t["sap-system"]){return t["sap-system"]}if(t&&t.url){n=new URL(t.url,window.location.href).searchParams.get("sap-system");if(n){return n}}if(R.indexOf(t.applicationType)>=0&&e&&e.substring(1)){n=new URL(e.substring(1),window.location.href).searchParams.get("sap-system");if(n){return n}}return undefined};this.resolveTarget=function(e){var r;var i=o({},e);var a=new jQuery.Deferred;s.average("sap.ushell.navigation.resolveTarget");t.storeSapSystemToLocalStorage(i);r=n.constructShellHash(i);c.getServiceAsync("NavTargetResolutionInternal").then(function(e){e.resolveHashFragment("#"+r).done(function(e){s.end("sap.ushell.navigation.resolveTarget");a.resolve({url:e.url,text:e.text,externalNavigationMode:e.targetNavigationMode==="explace"})}).fail(a.reject)}).catch(a.reject);return a.promise()};this.resolveHashFragment=function(t){var n=new jQuery.Deferred;s.average("sap.ushell.navigation.resolveHashFragment");this.expandCompactHash(t).done(function(r){var i=jQuery.when();if(r.indexOf("sap-ushell-enc-test")>=0){var o=/sap-ushell-enc-test=([^&]*)(&.*)?$/.exec(r);if(o){var p=o[1];if(p!=="A%20B%2520C"){i=new jQuery.Deferred;c.getServiceAsync("MessageInternal").then(function(e){e.error("This navigation is flagged as erroneous because"+" (likely the calling procedure) generated a wrong encoded hash."+" Please track down the encoding error and make sure to use the CrossApplicationNavigation service for navigation.","Navigation encoding wrong");i.resolve()}).catch(i.reject)}r=r.replace(/sap-ushell-enc-test=([^&]*)&/,"");r=r.replace(/[&?]sap-ushell-enc-test=([^&]*)$/,"")}}var f=this._invokeResolveHashChain(r);if(typeof e.processPostResolution==="function"){f=e.processPostResolution(r,f)}jQuery.when(f,i).done(function(e){this._adjustResolutionResultForUi5Components(e);if(e&&e.navigationMode!==undefined){e.targetNavigationMode=a.getExternalNavigationMode(e.navigationMode)}else{u.error("Resolution Result doesn't contain mandatory navigationMode!","sap.ushell.services.NavTargetResolutionInternal")}if(l(e)&&!e.hasOwnProperty("sap-system")){var r=this._getSapSystem(t,e);if(r){e["sap-system"]=r}}s.end("sap.ushell.navigation.resolveHashFragment");n.resolve(e)}.bind(this)).fail(n.reject)}.bind(this)).fail(n.reject);return n.promise().done(function(e){return this._recordNavigation("resolveHashFragment",{sHashFragment:t},e)}.bind(this))};this._invokeResolveHashChain=function(e){var t=m.map(function(e){return e});return this._nextResolveHashFragment(t,e).done(function(e){S=e})};this.baseResolveHashFragment=v.bind(this);this._getGetLinksResolver=function(t){var n;if(this._isClientSideTargetResolutionEnabled()){n=this._getLinksClientSide.bind(this);return{resolver:n,warning:undefined,isGetSemanticObjectLinksCall:false}}if(Object.prototype.toString.apply(t.paramsOptions)==="[object Array]"&&t.paramsOptions.length>0){u.warning("Parameter options supplied to #getLinks will be ignored because FLP is not configured to use sap.ushell.services.ClientSideTargetResolution for target resolution","provided parameters options: "+JSON.stringify(t.paramsOptions,null,4),"sap.ushell.services.NavTargetResolutionInternal")}n=e&&e.getLinks&&e.getLinks.bind(e);if(n){return{resolver:n,warning:undefined,isGetSemanticObjectLinksCall:false}}n=e&&e.getSemanticObjectLinks&&e.getSemanticObjectLinks.bind(e);if(n){return{resolver:n,warning:t.hasOwnProperty("action")?"the action argument was given, however, NavTargetResolutionAdapter does not implement getLinks method. Action will be ignored.":undefined,isGetSemanticObjectLinksCall:true}}return{resolver:undefined,warning:"Cannot determine resolver for getLinks method",isGetSemanticObjectLinksCall:undefined}};this.getLinks=function(e){var t=e.semanticObject;var n=e.params;var r=e.ignoreFormFactor;var i=e.ui5Component;var a=e.appStateKey;var s=e.compactIntents;var o=new jQuery.Deferred;if(/\?/.test(t)){throw new Error("Parameter must not be part of semantic object")}var l=n===undefined?undefined:JSON.parse(JSON.stringify(n));if(a){l=l||{};l["sap-xapp-state"]=encodeURIComponent(a)}var p=this._getGetLinksResolver(e);if(p.warning){u.warning("A problem occurred while determining the resolver for getLinks",p.warning,"sap.ushell.services.NavTargetResolutionInternal")}var f=p.resolver;if(f){var h=function(e){if(s){this._shortenGetSemanticObjectLinksResults(e,i).done(o.resolve)}else{o.resolve(e)}}.bind(this);if(p.isGetSemanticObjectLinksCall){var d={target:{semanticObject:t,action:"dummyAction"},params:l};c.getServiceAsync("ShellNavigationInternal").then(function(e){e.hrefForExternal(d,true,i).then(function(e){var n=e.params||l;f(t,n,r).then(h).catch(o.reject)}).catch(o.reject)})}else{f(e).done(h).fail(o.reject)}}else{o.resolve([])}return o.promise().done(function(t){return this._recordNavigation("getLinks",{oArgs:e},t)}.bind(this))};this.getDistinctSemanticObjects=function(){var t=new jQuery.Deferred;if(this._isClientSideTargetResolutionEnabled()){c.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.getDistinctSemanticObjects()}).then(t.resolve).catch(t.reject);return t.promise().done(function(e){return this._recordNavigation("getDistinctSemanticObjects",{},e)}.bind(this))}if(e&&e.getDistinctSemanticObjects){return e.getDistinctSemanticObjects()}u.error("Cannot execute getDistinctSemanticObjects method","ClientSideTargetResolution must be enabled or NavTargetResolutionAdapter must implement getDistinctSemanticObjects method","sap.ushell.services.NavTargetResolutionInternal");return t.reject("Cannot execute getDistinctSemanticObjects").promise()};this._getLinksClientSide=function(e){var t=new jQuery.Deferred;var r=new jQuery.Deferred;if((e.params||{}).hasOwnProperty("sap-intent-param")){var i="#"+e.semanticObject+"-dummyAction?"+n.paramsToString(e.params);this.expandCompactHash(i).done(function(e){var t=n.parseShellHash(e);r.resolve(t.params)}).fail(t.reject)}else{r.resolve(e.params)}r.done(function(){c.getServiceAsync("ClientSideTargetResolution").then(function(t){return t.getLinks(e)}).then(t.resolve).catch(t.reject)});return t.promise()};this._shortenGetSemanticObjectLinksResults=function(e,t){var r=[];var i=0;var a=e.length;var s=new jQuery.Deferred;c.getServiceAsync("ShellNavigationInternal").then(function(o){e.forEach(function(e){var l=n.parseShellHash(e.intent);var c=o.compactParams(l.params,undefined,t);r.push(c);r[i].done(function(t,i){r[t]={text:e.text,intent:"#"+l.semanticObject+"-"+l.action+"?"+n.paramsToString(i)}}.bind(null,i)).fail(function(t,n){u.warning("Cannot shorten GetSemanticObjectLinks result, using expanded form","Failure message: "+n+"; intent had title ''"+e.title+"'' and link ''"+e.intent+"'","sap.ushell.services.NavTargetResolutionInternal");r[t]={text:e.text,intent:e.intent}}.bind(null,i)).always(function(){a--;if(a===0){s.resolve(r)}});i++})}).catch(s.reject);return s.promise()};this.isIntentSupported=function(t){var n={};var r=new jQuery.Deferred;if(this._isClientSideTargetResolutionEnabled()){c.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.isIntentSupported(t)}).then(r.resolve).catch(r.reject);return r.promise()}if(e.isIntentSupported){return e.isIntentSupported(t)}t.forEach(function(e){n[e]={supported:undefined}});return r.resolve(n).promise()};this._isIntentSupported=function(t){var n={};var r=new jQuery.Deferred;if(this._isClientSideTargetResolutionEnabled()){c.getServiceAsync("ClientSideTargetResolution").then(function(e){return e.isIntentSupported(t)}).then(r.resolve).catch(r.reject);return r.promise()}if(e.isIntentSupported){return e.isIntentSupported(t)}t.forEach(function(e){n[e]={supported:undefined}});return r.resolve(n).promise()};this.isNavigationSupported=function(e){var t=new jQuery.Deferred;var r=[];r=e.map(function(e){if(typeof e==="string"){return e}return"#"+n.constructShellHash(e)});this._isIntentSupported(r).done(function(e){var n=r.map(function(t){return e[t]||{supported:false}});t.resolve(n)}).fail(t.reject.bind(t));return t.promise().done(function(t){return this._recordNavigation("isNavigationSupported",{aIntents:e},t)}.bind(this))};this._recordNavigation=function(e,t,n){var r=d&&d.usageRecorder||{};if(r.enabled){var i=r.serviceUrl||"/navigation/api/v2/record";b.post(i,{headers:{"content-type":"application/json; charset=utf-8"},data:{function:e,parameters:JSON.stringify(t),result:JSON.stringify(n)}})}return n};this.registerCustomResolver=function(e){if(typeof e.name!=="string"){u.error("NavTargetResolutionInternal: Custom Resolver must have name {string} member");return false}if(typeof e.isApplicable!=="function"){u.error("NavTargetResolutionInternal: Custom Resolver must have isApplicable member");return false}if(typeof e.resolveHashFragment!=="function"){u.error('NavTargetResolutionInternal: Custom Resolver must have "resolveHashFragment" member');return false}m.push(e);return true};if(d&&Array.isArray(d.resolveLocal)){g=d.resolveLocal.map(function(e){return e.linkId});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(e){if(e===""){return"#"}var t=n.parseShellHash(e.substring(1));if(!t){return"#"}e="#"+t.semanticObject+"-"+t.action;return e},_getIndex:function(e){var t=this.cleanHash(e);return g.indexOf(t.substring(1))},isApplicable:function(e){return this._getIndex(e)>=0},resolveHashFragment:function(e){var t=this._getIndex(e);var r=new jQuery.Deferred;var i=JSON.parse(JSON.stringify(d.resolveLocal[t].resolveTo));var a=n.parseShellHash(e);if(a&&a.params){var s=n.paramsToString(a.params);if(s){var o=i.url.indexOf("?")>=0;i.url=i.url+(o?"&":"?")+s}}r.resolve(i);return r.promise()}})}this.registerCustomResolver({name:"LocalResolver",aElement:undefined,cleanHash:function(e){if(e===""){return undefined}var t=n.parseShellHash(e.substring(1));if(!t){return undefined}e="#"+t.semanticObject+"-"+t.action;return e},isApplicable:function(e){e=this.cleanHash(e);if(!e){return false}return e==="#Test-url"||e==="#Test-local1"||e==="#Test-local2"||e==="#Test-config"||e==="#Test-clear"},parseUrl:function(e){if(!this.aElement){this.aElement=window.document.createElement("a")}this.aElement.href=e;return this.aElement},resolveHashFragment:function(e){var n=new jQuery.Deferred;var r;var i;var a=this;e=this.cleanHash(e);if(!e){return false}var s={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp",navigationMode:"embedded"},none:{applicationType:"URL",url:"",additionalInformation:""}};function o(e){if(localStorage){return localStorage[e]}return undefined}function l(e){if(t.calculateOrigin(a.parseUrl(e))!==t.calculateOrigin(window.location)){return undefined}return e}function c(e){return new URLSearchParams(window.location.search).get(e)}function p(e,t){if(localStorage){localStorage[e]=t}}if(s[e]){r=s[e]}else if(e==="#Test-clear"){p("sap.ushell.#Test-local1",undefined);p("sap.ushell.#Test-local2",undefined);u.info("NavTargetResolutionInternal: Local storage keys for #Test have been cleared");r=s["#Test-config"]}else if(e==="#Test-local1"||e==="#Test-local2"||e==="#Test-url"){r=o("sap.ushell."+e);if(!r||r==="undefined"){i={applicationType:"URL",navigationMode:"embedded"}}else{i=JSON.parse(r)}if(window.location.hostname==="localhost"||d&&d.allowTestUrlComponentConfig){var f="sap-ushell-test-"+e.substring(6);var h=c(f+"-additionalInformation");if(h){i.additionalInformation=h}var v=c(f+"-url");if(v){i.url=l(v)}}if(!i.url){u.info("NavTargetResolutionInternal: No configured app for "+e+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");u.info("NavTargetResolutionInternal: Defaulting to config app ...\n");n.reject("URL is not resolvable");return n.promise()}i.url=l(i.url);r=i}if(r.url===undefined){n.reject("URL is not resolvable");return n.promise()}u.info("NavTargetResolutionInternal: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent(r&&r.url||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent(r&&r.additionalInfo||"")+"#Test-local1");u.info("NavTargetResolutionInternal: Resolving "+e+" to "+JSON.stringify(r));n.resolve(r);return n.promise()}});this.getCurrentResolution=function(){return S}}p.hasNoAdapter=false;return p});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Navigation/compatibility", ["sap/base/util/isPlainObject","sap/ushell/Container","sap/ushell/services/Navigation/utils","sap/ushell/TechnicalParameters","sap/ushell/utils","sap/ushell/utils/type"],function(t,e,a,n,s,r){"use strict";const i={};i.getLinks=async function(a={}){const n=await e.getServiceAsync("Navigation");if(t(a)){const[t]=await n.getLinks([a]);return t}const s=a.reduce((t,[e])=>{t.push(e);return t},[]);const r=await n.getLinks(s);const i=r.reduce((t,e)=>{t.push([e]);return t},[]);return i};i.getAppStateData=async function(t){const a=await e.getServiceAsync("Navigation");if(typeof t==="string"){const[e]=await a.getAppStateData([t]);return e}const n=t.reduce((t,[e])=>{t.push(e);return t},[]);const s=await a.getAppStateData(n);const r=s.reduce((t,e)=>{t.push([e]);return t},[]);return r};i.getSemanticObjectLinks=async function(t,i,c,o,p,u){const g=await e.getServiceAsync("Navigation");const[l]=await s.requireAsync(["sap/ushell/appIntegration/AppLifeCycle"]);let m=await a.injectStickyParameters({args:{params:i},appLifeCycle:l,technicalParameters:n,type:r});m=g.getTargetWithCurrentSystem(m,o).params;m=g.amendTargetWithSapUshellEncTestParameter({params:m}).params;const y=await e.getServiceAsync("NavTargetResolutionInternal");if(!Array.isArray(t)){const e=y.getLinks({semanticObject:t,params:m,ignoreFormFactor:c,ui5Component:o,appStateKey:p,compactIntents:!!u});return s.promisify(e)}return Promise.all(t.map(async t=>{const[e,a,n,r,i,c]=t;const o=y.getLinks({ignoreFormFactor:!!n,compactIntents:!!c,semanticObject:e,params:a,ui5Component:r,appStateKey:i});const p=await s.promisify(o);return[p]}))};i.isIntentSupported=async function(t,a){const n=await e.getServiceAsync("Navigation");const r={};const i=t.map(t=>{const e=n.getTargetWithCurrentSystem(t,a);r[e]=t;return e});const c=await e.getServiceAsync("NavTargetResolutionInternal");const o=c.isNavigationSupported(i);const p=await s.promisify(o);return p.reduce((t,e,a)=>{const n=i[a];const s=r[n];t[s]=e;return t},{})};return i});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Navigation/utils", ["sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/Log","sap/ushell/Container","sap/ushell/utils/UrlParsing"],function(e,t,r,a,n){"use strict";var i={};i.extractGetLinksParameterOptions=function(e){return i._parseGetLinksParameters(e).filter(function(e){return Object.keys(e.options).length>0}).map(function(e){return{name:e.name,options:e.options}})};i.extractGetLinksParameterDefinition=function(e){return i._parseGetLinksParameters(e).reduce(function(e,t){e[t.name]=t.value;return e},{})};i._parseGetLinksParameters=function(e){if(Object.prototype.toString.apply(e)!=="[object Object]"){return[]}var t=JSON.parse(JSON.stringify(e));return Object.keys(t).map(function(e){var r=t[e];var a={};if(Object.prototype.toString.apply(r)==="[object Object]"){r=r.value;delete t[e].value;a=t[e]}return{name:e,value:r,options:a}})};i._safeParseToObject=function(e){try{return JSON.parse(e)}catch(t){r.error("Cannot parse the given string to object",e)}return null};i._createAppStateFromData=function(e){return a.getServiceAsync("AppState").then(function(t){var r=t.createEmptyAppState(null);r.setData(e);r.save();return r.getKey()})};i._extractParameter=function(a,s){var c;var p=null;if(typeof a==="string"){if(a.indexOf(s+"=")===-1){return{intent:a,data:null}}var u=n.parseShellHash(a);if(!u){return{intent:a,data:null}}p=u.params[s];delete u.params[s];c=n.constructShellHash(u);return{intent:c,data:p}}if(e(a)){var o=t.get("target.shellHash",a);if(typeof o==="string"){var l=i._extractParameter(o,s);a.target.shellHash=l.intent;return{intent:a,data:l.data}}var f=a.params;if(f&&f[s]){const e=f[s];p=typeof e==="string"?[e]:e;delete f[s]}return{intent:a,data:p}}r.error("Invalid input parameter","expected string or object");return{intent:a}};i.addXAppStateFromParameter=function(e,t){var r=i._extractParameter(e,t);var a=r.intent;var n=r.data&&r.data[0];if(!n){return Promise.resolve()}var s=i._safeParseToObject(n);if(!s){return Promise.resolve()}return i._createAppStateFromData(s).then(function(e){i._injectParameter(a,"sap-xapp-state",e)})};i._injectParameter=function(e,r,a){if(typeof e==="string"){var s=n.parseShellHash(e);s.params[r]=a;return n.constructShellHash(s)}if(Object.prototype.toString.apply(e)==="[object Object]"){var c=t.get("target.shellHash",e);if(typeof c==="string"){e.target.shellHash=i._injectParameter(c,r,a);return e}if(!e.params){e.params={}}e.params[r]=a}return e};i.injectParameters=function(e){var t=e.inject;var r=e.injectEmptyString||{};var a=e.type;var n=e.args;function s(e,t){return e||e===""&&t}if(a.isPlainObject(n)){if(n.target&&n.target.shellHash){if(typeof n.target.shellHash==="string"){n.target.shellHash=i.injectParameters({inject:t,injectEmptyString:r,type:e.type,args:n.target.shellHash})}return n}var c=Object.keys(t).reduce(function(e,a){var n=t[a];var i=r[a]===true;if(s(n,i)&&typeof e==="string"){var c=new RegExp("[&]"+a);var p=!c.test(e);if(p){var u=e?"&":"";e+=u+a+"="+n}}else if(s(n,i)&&!e.hasOwnProperty(a)){e[a]=n}return e},n.params||{});if(c&&Object.keys(c).length>0){n.params=c}return n}var p=n;if(p){Object.keys(t).forEach(function(e){var a=t[e];var n=r[e]===true;var i=new RegExp("[?&]"+e);var c=!i.test(p);if(s(a,n)&&c){var u=p.indexOf("?")>-1?"&":"?";p+=u+e+"="+a}})}return p};i.injectStickyParameters=function(e){return a.getServiceAsync("AppLifeCycle").then(function(t){return i._injectStickyParameters(e,t)})};i._injectStickyParameters=function(e,t){if(!t||Object.keys(t).length<=0){return e.args}var r=t.getCurrentApplication();if(!r||Object.keys(r).length<=0){return e.args}var a=e.appLifeCycle;var n=e.technicalParameters;var s=n.getParameters({sticky:true}).reduce(function(e,t){var i=t.name;var s=r.componentInstance;var c=r.applicationType;var p;if(c==="UI5"){p={}}else{p=a.getCurrentApplication().container}var u=n.getParameterValueSync(i,s,p,c);var o=t.stickyName||i;e[o]=u;return e},{});var c={type:e.type,inject:s,args:e.args};return i.injectParameters(c)};return i});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PagePersistence", [],function(){"use strict";function t(){this._init.apply(this,arguments)}t.prototype._init=function(t,e){this._oServiceConfiguration=e;this.oAdapter=t;this._pagesCache=[]};t.prototype.getPage=function(t){if(!this._pagesCache[t]){this._pagesCache[t]=this.oAdapter.getPage(t)}return this._pagesCache[t]};t.prototype.getPages=function(t){return this.oAdapter.getPages(t)};t.hasNoAdapter=false;return t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Pages", ["sap/base/Log","sap/ushell/utils/RestrictedJSONModel","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/deepExtend","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/Container","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/base/util/ObjectPath"],function(e,t,i,n,a,o,r,s,d,c,l,u,h){"use strict";var v=function(){this.COMPONENT_NAME="sap.ushell.services.Pages";this._oCdmServicePromise=d.getServiceAsync("CommonDataModel");this._oCSTRServicePromise=d.getServiceAsync("ClientSideTargetResolution");this._oPagesModel=new t({pages:[]});this._bImplicitSaveEnabled=true;this._aPagesToBeSaved=[]};v.prototype._generateId=function(e){var t=[];var i=this.getModel().getProperty(this.getPagePath(e));i.sections.forEach(function(e){t.push(e.id);e.visualizations.forEach(function(e){t.push(e.id)})});return r.generateUniqueId(t)};v.prototype.getModel=function(){return this._oPagesModel};v.prototype.enableImplicitSave=function(e){this._bImplicitSaveEnabled=e};v.prototype.getPageIndex=function(e){var t=this._oPagesModel.getProperty("/pages");for(var i=0;i<t.length;++i){if(t[i].id===e){return i}}return undefined};v.prototype.getPagePath=function(e){var t=this.getPageIndex(e);if(typeof t==="undefined"){return""}return"/pages/"+t};v.prototype.loadPage=function(t){var i=this.getPagePath(t);if(i){return Promise.resolve(i)}r.setPerformanceMark(["FLP-Pages-Service-loadPage-start[",t,"]"].join(""));return this._oCdmServicePromise.catch(function(t){e.error("Pages - loadPage: Couldn't resolve CDM Service.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this)).then(function(e){return Promise.all([e.getPage(t),e.getCachedVisualizations(),e.getApplications(),e.getCachedVizTypes()])}).then(function(e){var t=e[0];var i=e[1];var n=e[2];var a=e[3];return this._getModelForPage(t,i,n,a)}.bind(this)).then(function(e){var i=this._oPagesModel.getProperty("/pages/").length;var n="/pages/"+i;this._oPagesModel._setProperty(n,e);r.setPerformanceMark(["FLP-Pages-Service-loadPage-end[",t,"]"].join(""));return n}.bind(this)).catch(function(t){e.error("Pages - loadPage: Failed to gather site data.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this))};v.prototype.loadPages=function(e){return this._oCdmServicePromise.then(function(t){return t.getPages(e)}).then(function(){return Promise.all(e.map(function(e){return this.loadPage(e)}.bind(this)))}.bind(this)).then(function(t){var i={};e.forEach(function(e,n){i[e]=t[n]});return i})};v.prototype.findVisualization=function(t,i,n,a){return this._oCdmServicePromise.catch(function(t){e.error("Pages - findVisualization: Personalization cannot be saved: CDM Service cannot be retrieved.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this)).then(function(o){return Promise.all([this.loadPage(t),o.getCachedVisualizations(),o.getApplications()]).then(function(e){var o=e[0];var r=this.getModel().getProperty(o+"/sections")||[];return r.reduce(function(e,o,r){if(i&&o.id!==i){return e}var s=o.visualizations.reduce(function(e,t,i){if(n&&t.vizId===n||a&&t.id===a){e.push(i)}return e},[]);if(s.length){e.push({pageId:t,sectionIndex:r,vizIndexes:s})}return e},[])}.bind(this)).catch(function(t){e.error("Pages - findVisualization: Couldn't load page, get visualizations or applications.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this))}.bind(this))};v.prototype.moveVisualization=function(t,n,a,o,r){if(n===o&&a===r){return Promise.resolve({visualizationIndex:r})}this.setPersonalizationActive(true);var s=this._oPagesModel.getProperty("/pages/"+t);var d=s.id;var c=s.sections;var l=c[n];var u=c[o];var h=l.id;var v=u.id;var f=l.visualizations[a];var g=f.id;l.visualizations=l.visualizations.concat([]);u.visualizations=u.visualizations.concat([]);l.visualizations.splice(a,1);if(r===-1){r=u.visualizations.length}u.visualizations.splice(r,0,f);var p;if(u.visualizations[r]){p=r-1}else{p=u.visualizations.length-2}var P;if(u.visualizations[p]){P=u.visualizations[p].id}if(l.default&&!l.visualizations.length){c.splice(n,1)}this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(d)}).catch(function(t){e.error("Pages - moveVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this)).then(function(e){var t=e.payload.sections[h];var a=t.layout.vizOrder;var o=t.viz;var r=e.payload.sections[v];var s=r.layout.vizOrder;var c=r.viz;var l=i(o[g]);var u=a.indexOf(g);a.splice(u,1);var f=P?s.indexOf(P)+1:0;s.splice(f,0,g);if(h!==v){delete o[g];c[g]=l}if(t.default&&!Object.keys(o).length){delete e.payload.sections[h];e.payload.layout.sectionOrder.splice(n,1)}return this._conditionalSavePersonalization(d)}.bind(this)).then(function(){return{visualizationIndex:r}}).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};v.prototype.deleteVisualization=function(t,i,n){var a=this._oPagesModel.getProperty("/pages/"+t);var o=a.sections[i];if(o.default&&o.visualizations.length<2){return this.deleteSection(t,i)}this.setPersonalizationActive(true);var r=o.visualizations;var s=r[n];r.splice(n,1);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(a.id)}).catch(function(t){e.error("Pages - deleteVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this)).then(function(e){var t=e.payload.sections[o.id].layout.vizOrder;var i=e.payload.sections[o.id].viz;var n=t.indexOf(s.id);delete i[s.id];if(n>-1){t.splice(n,1)}return this._conditionalSavePersonalization(e.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};v.prototype._getSectionIndex=function(e,t){var i=this.getModel().getProperty(e+"/sections")||[];var n=0;for(;n<i.length;n+=1){if(i[n].id===t){return n}}};v.prototype._getVisualizationData=async function(e,t,i,n,a,o,r){var s=n||{vizId:t};var d={applications:a,visualizations:i,vizTypes:o};var c=await l.getVizData(d,s,r);if(!c.id){c.id=this._generateId(e)}return c};v.prototype.addVisualization=async function(t,i,n,a){let r;try{r=await this._oCdmServicePromise}catch(t){e.error("Pages - addVisualization: Personalization cannot be saved: CDM Service cannot be retrieved.",t,this.COMPONENT_NAME);throw t}try{let s;try{s=await Promise.all([this.loadPage(t),r.getVisualizations(),r.getApplications(),r.getVizTypes()])}catch(t){e.error("Pages - addVisualization: Personalization cannot be saved: Failed to load page, get visualizations or get applications.",t,this.COMPONENT_NAME);throw t}const[d,c,l,u]=s;const h=this._getSectionIndex(d,i);const v=this.getModel().getProperty(d+"/sections")||[];const f=await this._getVisualizationData(t,n,c,null,l,u);if(a){f.displayFormatHint=a}let g;for(let e=0;e<v.length;e++){if(v[e].default){g=e}}if(h!==undefined||g!==undefined){this.setPersonalizationActive(true);const o=h!==undefined?h:g||0;const s=d+"/sections/"+o+"/visualizations";this.getModel().getProperty(s).push(f);this.getModel().refresh();let c;try{c=await r.getPage(t)}catch(t){e.error("Pages - addVisualization: Personalization cannot be saved: Failed to get page.",t,this.COMPONENT_NAME);return Promise.reject(t)}const l=c.payload.sections[i||c.payload.layout.sectionOrder[0]];l.layout.vizOrder.push(f.id);l.viz[f.id]={id:f.id,vizId:n};if(a){l.viz[f.id].displayFormatHint=a}return this._conditionalSavePersonalization(t)}const p=parseInt(d.split("/")[2],10);return this.addSection(p,0,{title:o.i18n.getText("DefaultSection.Title"),default:true,visualizations:[f]})}catch(e){this.setPersonalizationActive(false);throw e}};v.prototype.copyVisualization=function(e,t,i){var n=i.isBookmark;if(!n){return this.addVisualization(e,t,i.vizId,i.displayFormatHint)}return this.addBookmarkToPage(e,{title:i.title,subtitle:i.subtitle,url:i.targetURL,icon:i.icon,info:i.info,serviceUrl:i.indicatorDataSource?i.indicatorDataSource.path:"",serviceRefreshInterval:i.indicatorDataSource?i.indicatorDataSource.refresh:"",numberUnit:i.numberUnit,vizType:i.vizType,vizConfig:i.vizConfig},t)};v.prototype.moveSection=function(t,i,n){if(i===n){return Promise.resolve()}this.setPersonalizationActive(true);var a=this._oPagesModel.getProperty("/pages/"+t+"/id");var o=this._oPagesModel.getProperty("/pages/"+t+"/sections");var r=this._oPagesModel.getProperty("/pages/"+t+"/sections/"+i);var s=r.id;o.splice(i,1);if(i<n){n--}o.splice(n,0,r);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(a)}).catch(function(t){e.error("Pages - moveSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this)).then(function(e){var t=e.payload.layout.sectionOrder;t.splice(t.indexOf(s),1);t.splice(n,0,s);return this._conditionalSavePersonalization(a)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};v.prototype.addSection=function(t,i,n){this.setPersonalizationActive(true);var a=n||{};var o=this._oPagesModel.getProperty("/pages/"+t+"/sections");var r=this._oPagesModel.getProperty("/pages/"+t+"/id");var s={id:a.id!==undefined?a.id:this._generateId(r),title:a.title!==undefined?a.title:"",visible:a.visible!==undefined?a.visible:true,preset:a.preset!==undefined?a.preset:false,locked:a.locked!==undefined?a.locked:false,default:a.default!==undefined?a.default:false,visualizations:a.visualizations!==undefined?a.visualizations:[]};o.splice(i,0,s);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(r)}).catch(function(t){e.error("Pages - addSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this)).then(function(e){var t={id:s.id,title:s.title,visible:s.visible,preset:s.preset,locked:s.locked,default:s.default,layout:{vizOrder:[]},viz:{}};if(s.visualizations){var n=0;var a;for(;n<s.visualizations.length;n++){a=s.visualizations[n];t.layout.vizOrder.push(a.id);if(a.isBookmark){t.viz[a.id]=l.getVizRef(a)}else{t.viz[a.id]={id:a.id,vizId:a.vizId};if(a.displayFormatHint){t.viz[a.id].displayFormatHint=a.displayFormatHint}}}}e.payload.layout.sectionOrder.splice(i,0,s.id);e.payload.sections[s.id]=t;return this._conditionalSavePersonalization(r)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};v.prototype.deleteSection=function(t,i){this.setPersonalizationActive(true);var n=this._oPagesModel.getProperty("/pages/"+t+"/id");var a=this._oPagesModel.getProperty("/pages/"+t+"/sections");var o=a[i].id;a.splice(i,1);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(n)}).catch(function(t){e.error("Pages - deleteSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this)).then(function(e){delete e.payload.sections[o];e.payload.layout.sectionOrder.splice(i,1);return this._conditionalSavePersonalization(n)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};v.prototype.setSectionVisibility=function(t,i,n){this.setPersonalizationActive(true);var a=this._oPagesModel.getProperty("/pages/"+t+"/id");var o=this._oPagesModel.getProperty("/pages/"+t+"/sections/"+i+"/id");var r=this._oPagesModel.getProperty("/pages/"+t+"/sections/"+i);if(r.visible===n){return Promise.resolve()}r.visible=n;this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(a)}).catch(function(t){e.error("Pages - setSectionVisibility: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this)).then(function(e){e.payload.sections[o].visible=n;return this._conditionalSavePersonalization(a)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};v.prototype.renameSection=function(t,i,n){this.setPersonalizationActive(true);var a=this._oPagesModel.getProperty("/pages/"+t);var o=a.sections[i];o.title=n;this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(e){return e.getPage(a.id)}).catch(function(t){e.error("Pages - renameSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this)).then(function(e){e.payload.sections[o.id].title=n;return this._conditionalSavePersonalization(e.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};v.prototype.resetSection=function(t,n){this.setPersonalizationActive(true);var a=this._oPagesModel.getProperty("/pages/"+t+"/id");var o=this._oPagesModel.getProperty("/pages/"+t+"/sections/"+n+"/id");return this._oCdmServicePromise.then(function(e){return Promise.all([e.getCachedVisualizations(),e.getApplications(),e.getPage(a),e.getOriginalPage(a),e.getCachedVizTypes()])}).catch(function(t){e.error("Pages - resetSection: Personalization cannot be saved: Failed to gather data from CDM Service.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this)).then(function(e){var t=e[0];var i=e[1];var n=e[2];var a=e[3];var o=e[4];return Promise.all([this._getModelForPage(a,t,i,o),n,a])}.bind(this)).then(function(e){var r=e[0];var s=e[1];var d=e[2];var c=i(r.sections.find(function(e){return e.id===o}),20);var l=c.visualizations.map(function(e){return e.id});var u=this._oPagesModel.getProperty("/pages/"+t);u.sections.forEach(function(e){if(c.id!==e.id){e.visualizations.forEach(function(t){if(l.indexOf(t.id)!==-1){var n=this._generateId(a);var o=i(s.payload.sections[e.id].viz[t.id]);delete s.payload.sections[e.id].viz[t.id];var r=s.payload.sections[e.id].layout.vizOrder.indexOf(o.id);o.id=n;s.payload.sections[e.id].viz[n]=o;s.payload.sections[e.id].layout.vizOrder[r]=n;t.id=n}}.bind(this))}}.bind(this));this._oPagesModel._setProperty("/pages/"+t+"/sections/"+n,c);s.payload.sections[c.id]=d.payload.sections[c.id];return this._conditionalSavePersonalization(s.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};v.prototype.resetPage=function(t){this.setPersonalizationActive(true);var n=this._oPagesModel.getProperty("/pages/"+t+"/id");return this._oCdmServicePromise.then(function(e){return Promise.all([e.getCachedVisualizations(),e.getApplications(),e.getPage(n),e.getOriginalPage(n),e.getCachedVizTypes()])}).catch(function(t){e.error("Pages - resetPage: Personalization cannot be saved: Failed to gather data from CDM Service.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this)).then(function(e){var t=e[0];var i=e[1];var n=e[2];var a=e[3];var o=e[4];return Promise.all([this._getModelForPage(a,t,i,o),n,a])}.bind(this)).then(function(e){var n=e[0];var a=e[1];var o=e[2];this._oPagesModel._setProperty("/pages/"+t,n);a.payload=i(o.payload);return this._conditionalSavePersonalization(a.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};v.prototype.setPersonalizationActive=function(e){if(!this._bDirtyState&&e===true){this._bDirtyState=true;this._oCopiedModelData=i(this._oPagesModel.getProperty("/"),20)}else if(this._bDirtyState&&e===false){this._oPagesModel._setData(this._oCopiedModelData);this._bDirtyState=false}};v.prototype.savePersonalization=function(t){var n;if(!t){n=i(this._aPagesToBeSaved)}else{n=[t]}return this._oCdmServicePromise.then(function(e){return Promise.all(n.map(function(t){var i=this._aPagesToBeSaved.indexOf(t);this._aPagesToBeSaved.splice(i,1);return new Promise(function(i,n){e.save(t).then(i,n)}).catch(function(e){if(this._aPagesToBeSaved.indexOf(t)===-1){this._aPagesToBeSaved.push(t)}return Promise.reject(e)}.bind(this))}.bind(this)))}.bind(this)).then(function(){this._bDirtyState=false}.bind(this)).catch(function(t){e.error("Pages - savePersonalization: Personalization cannot be saved: CDM Service cannot be retrieved or the save process encountered an error.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this))};v.prototype._conditionalSavePersonalization=function(e){if(this._bImplicitSaveEnabled){return this.savePersonalization(e)}if(this._aPagesToBeSaved.indexOf(e)===-1){this._aPagesToBeSaved.push(e)}return Promise.resolve()};v.prototype._getModelForPage=async function(t,i,n,a){const d={id:t&&t.identification&&t.identification.id||"",title:t&&t.identification&&t.identification.title||"",description:"",sections:[]};r.setPerformanceMark(["FLP-Pages-Service-getModelForPage-start[",d.id,"]"].join(""));const c=await this._oCSTRServicePromise;const l=s.last("/core/catalog/enableHideGroups");await Promise.all(t.payload.layout.sectionOrder.map(async r=>{const s=t.payload.sections[r];const u={id:s.id||"",title:s.default?o.i18n.getText("DefaultSection.Title"):s.title||"",visualizations:[],visible:!l||(s.visible!==undefined?s.visible:true),locked:s.locked!==undefined?s.locked:false,preset:s.preset!==undefined?s.preset:true,default:s.default!==undefined?s.default:false};d.sections.push(u);await Promise.all(s.layout.vizOrder.map(async o=>{const r=s.viz[o];const d=r.vizId;const l=await c.getSystemContext(r.contentProviderId);const h=await this._getVisualizationData(t.identification.id,d,i,r,n,a,l);u.visualizations.push(h);const v=await this._isIntentSupported(h,c);if(!v){const t=u.visualizations.findIndex(function(e){return e.id===h.id});u.visualizations.splice(t,1);e.warning(`The visualization with title '${h.title}' and ID '${h.vizId}' is filtered out, because intent '${h.targetURL}' is not supported.`,null,this.COMPONENT_NAME)}}))}));r.setPerformanceMark(["FLP-Pages-Service-getModelForPage-end[",d.id,"]"].join(""));return d};v.prototype.removeUnsupportedVisualizations=function(e,t){return this._oCSTRServicePromise.then(function(i){var n=this.getModel().getProperty("/pages/"+e+"/sections/"+t+"/visualizations/");var a=[];for(var o=n.length-1;o>=0;--o){a.push(this._isIntentSupported(n[o],i).then(function(e,t){if(!t){n.splice(e,1)}return t}.bind(this,o)))}return Promise.all(a).then(function(e){if(e.indexOf(false)!==-1){this.getModel().refresh()}}.bind(this))}.bind(this))};v.prototype._isIntentSupported=async function(e,t){if(e.target===undefined){return false}if(e.target.type==="URL"){if(u.isStandardVizType(e.vizType)){return Promise.resolve(!!e.target.url)}return true}try{const i=await t.isIntentSupported([e.targetURL]);return i[e.targetURL].supported}catch{return false}};v.prototype.addBookmarkToPage=async function(t,i,n,a){if(!t){throw new Error("Pages - addBookmarkToPage: Adding bookmark tile failed: No page id is provided.")}const r=l.getBookmarkVizTypeIds(i);this.setPersonalizationActive(true);const[s,d]=await Promise.all([this._oCdmServicePromise,this._oCSTRServicePromise]);const u=await Promise.all(r.map(e=>s.getVizType(e)));const v={};u.forEach((e,t)=>{v[r[t]]=e;return v});let f;try{f=await Promise.all([this.loadPage(t),v,d.getSystemContext(a)])}catch(t){e.error("Pages - addBookmarkToPage: Personalization cannot be saved: Could not load page.",t,this.COMPONENT_NAME);throw t}const[g,p,P]=f;const z={id:this._generateId(t),vizType:i.vizType,title:i.title,subTitle:i.subtitle,icon:i.icon,info:i.info,numberUnit:i.numberUnit,target:c.toTargetFromHash(i.url),indicatorDataSource:{path:i.serviceUrl,refresh:i.serviceRefreshInterval},vizConfig:i.vizConfig,isBookmark:true};if(i.dataSource){z.dataSource={type:i.dataSource.type,settings:{odataVersion:h.get(["dataSource","settings","odataVersion"],i)}}}if(a){z.contentProviderId=a}const y=await this._getVisualizationData(t,undefined,{},z,{},p,P);const m=parseInt(/pages\/(\d+)/.exec(g)[1],10);const _=this._oPagesModel.getProperty(g);let b;if(n){b=_.sections.find(e=>e.id===n);if(!b){e.error("Pages - addBookmarkToPage: Adding bookmark tile failed: specified section was not found in the page.");throw new Error("Pages - addBookmarkToPage: Adding bookmark tile failed: specified section was not found in the page.")}}else{b=_.sections.find(e=>e.default);if(!b){return this.addSection(m,0,{title:o.i18n.getText("DefaultSection.Title"),default:true,visualizations:[y]})}}try{b.visualizations.push(y);this._oPagesModel.refresh();let i;try{i=await s.getPage(t)}catch(t){e.error("Pages - addBookmarkToPage: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",t,this.COMPONENT_NAME);throw t}const n=i.payload.sections[b.id];n.layout.vizOrder.push(y.id);n.viz[y.id]=l.getVizRef(y);return this._conditionalSavePersonalization(t)}catch(e){this.setPersonalizationActive(false);throw e}};v.prototype._visitPages=function(e){return this._oCdmServicePromise.then(function(e){return e.getAllPages()}).then(function(t){t=t||[];t.forEach(function(t){e(t)})})};v.prototype._visitSections=function(e){return this._visitPages(function(t){var i=t.payload&&t.payload.sections||{};Object.keys(i).forEach(function(n){e(i[n],t)})})};v.prototype._visitVizReferences=function(e){return this._visitSections(function(t,i){var n=t.viz||{};Object.keys(n).forEach(function(a){e(n[a],t,i)})})};v.prototype._findBookmarks=function(e){var t=[];return Promise.resolve().then(function(){var i=c.toTargetFromHash(e.url);i=l.harmonizeTarget(i);return this._visitVizReferences(function(n,a,o){if(n.isBookmark&&e.vizType===n.vizType&&(n.contentProviderId||"")===(e.contentProviderId||"")&&c.isSameTarget(i,n.target)){t.push({vizRefId:n.id,sectionId:a.id,pageId:o.identification.id})}}).then(function(){return t})}.bind(this))};v.prototype.countBookmarks=function(e){return this._findBookmarks(e).then(function(e){return e.length})};v.prototype.deleteBookmarks=function(e,t,i){var n=0;return this._findBookmarks(e).then(function(e){return e.reduce(function(e,a){if(t&&a.pageId!==t){return e}if(i&&a.sectionId!==i){return e}return e.then(function(){return this.findVisualization(a.pageId,a.sectionId,null,a.vizRefId)}.bind(this)).then(function(e){var t=e[0];var i=this.getPageIndex(t.pageId);return this.deleteVisualization(i,t.sectionIndex,t.vizIndexes[0])}.bind(this)).then(function(){n=n+1}).catch(function(){})}.bind(this),Promise.resolve())}.bind(this)).then(function(){return n})};v.prototype.updateBookmarks=function(t,i){if(!t||!t.url||typeof t.url!=="string"){e.error("Fail to update bookmark. No valid URL");return Promise.reject("Invalid URL provided")}if(!i||typeof i!=="object"){e.error("Fail to update bookmark. No valid parameters, URL is: "+t.url);return Promise.reject("Missing parameters")}var n=0;return Promise.all([this._findBookmarks(t)]).then(function(e){var t=e[0];return t.reduce(function(e,t){return e.then(function(){return this.findVisualization(t.pageId,t.sectionId,null,t.vizRefId)}.bind(this)).then(function(e){var t=e[0];var n=this.getPageIndex(t.pageId);var a={subtitle:i.subtitle,icon:i.icon,info:i.info,numberUnit:i.numberUnit,indicatorDataSource:{path:i.serviceUrl,refresh:i.serviceRefreshInterval},vizConfig:i.vizConfig};if(i.title){a.title=i.title}if(i.url){a.target=l.harmonizeTarget(c.toTargetFromHash(i.url))}return this.updateVisualization(n,t.sectionIndex,t.vizIndexes[0],a)}.bind(this)).then(function(){n=n+1}).catch(function(){})}.bind(this),Promise.resolve())}.bind(this)).then(function(){return n})};v.prototype.updateVisualization=async function(e,t,o,r){const s=await this._oCdmServicePromise;const[d,u,h]=await Promise.all([s.getCachedVisualizations(),s.getApplications(),s.getCachedVizTypes()]);const v=this._oPagesModel.getProperty("/pages/"+e);const f=v.sections[t];const g=f.visualizations;let p=g[o];const P={};this.setPersonalizationActive(true);if(this._isPropertyChanged(p.title,r.title)){P.title=r.title}if(r.target&&!c.isSameTarget(p.target,r.target)){P.target=r.target}if(this._isPropertyChanged(p.subtitle,r.subtitle)){P.subtitle=r.subtitle}if(this._isPropertyChanged(p.icon,r.icon)){P.icon=r.icon}if(this._isPropertyChanged(p.info,r.info)){P.info=r.info}if(this._isPropertyChanged(p.numberUnit,r.numberUnit)){P.numberUnit=r.numberUnit}if(this._isPropertyChanged(p.displayFormatHint,r.displayFormatHint)){P.displayFormatHint=r.displayFormatHint}if(r.indicatorDataSource&&p.indicatorDataSource&&(this._isPropertyChanged(p.indicatorDataSource.path,r.indicatorDataSource.path)||this._isPropertyChanged(p.indicatorDataSource.refresh,r.indicatorDataSource.refresh))){P.indicatorDataSource=i(p.indicatorDataSource);n(P.indicatorDataSource,r.indicatorDataSource)}if(r.vizConfig){p.vizConfig=a({},p.vizConfig,r.vizConfig);P.vizConfig=p.vizConfig}n(p,P);const z=l.getVizRef(p);p=await this._getVisualizationData(v.id,z.vizId,d,z,u,h);g[o]=p;this._oPagesModel.refresh();await this._updateVisualizationCDMData(v.id,f.id,p.id,P);return{pageId:v.id,sectionId:f.id,vizRefId:p.id}};v.prototype._updateVisualizationCDMData=function(t,i,a,o){return this._oCdmServicePromise.then(function(e){return e.getPage(t)}).catch(function(t){e.error("Pages - updateVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",t,this.COMPONENT_NAME);return Promise.reject(t)}.bind(this)).then(function(e){var t=e.payload.sections[i].viz[a];var r=l.getVizRef(o);r.vizConfig=o.vizConfig;n(t,r);return this._conditionalSavePersonalization(e.identification.id)}.bind(this)).catch(function(e){this.setPersonalizationActive(false);return Promise.reject(e)}.bind(this))};v.prototype._isPropertyChanged=function(e,t){if((t||t==="")&&e!==t){return true}return false};v.hasNoAdapter=true;return v},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Personalization", ["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/base/Object","sap/ui/core/Core","sap/ui/thirdparty/jquery","sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/ContextContainer","sap/ushell/services/PersonalizationV2/WindowAdapter","sap/ushell/services/_Personalization/TransientPersonalizer","sap/ushell/services/_Personalization/PersonalizationContainer","sap/ushell/services/_Personalization/Personalizer","sap/ushell/services/personalization/VariantSetAdapter","sap/ushell/services/_Personalization/Variant","sap/ushell/services/_Personalization/VariantSet","sap/ushell/services/PersonalizationV2/WindowAdapterContainer"],function(e,t,n,r,jQuery,a,i,o,s,p,d,u,c,l,f,h,_){"use strict";function v(e,t,n,r){this._oConfig=r&&r.config||{};this._oAppVariantAdapterWithBackendAdapter=this._configureAppVariantStorage(this._oConfig.appVariantStorage);this._oAdapterWithBackendAdapter={lazy:false,instance:new p(this,e)};this._oAdapterWindowOnly={lazy:false,instance:new p(this,undefined)};this._oContainerMap=new a.Map;this._oPendingOperationsMap=new a.Map}v.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseded by subsequent save";v.prototype.constants=o;v.prototype._configureAppVariantStorage=function(e){var t=this;var n="sap.ushell.adapters.AppVariantPersonalizationAdapter";if(!e){e={adapter:{module:n}}}if(Object.keys(e).length===0||e.enabled===false){return}var r=e.adapter&&e.adapter.module||n;var a=r.split(".").join("/");var i=function(){t._oAppVariantAdapterLoadPromise=t._oAppVariantAdapterLoadPromise||function(){var e=new jQuery.Deferred;try{sap.ui.require([a],n)}catch(t){e.reject(t)}function n(n){try{var r=new n;var a=new p(t,r);e.resolve(a)}catch(t){e.reject(t)}}return e.promise()}();return t._oAppVariantAdapterLoadPromise};return{lazy:true,create:i}};v.prototype.getGeneratedKey=function(){return a.generateRandomKey()};v.prototype.getPersonalizer=function(e,t,n){n=n||this._getApplicationComponent();return new c(this,this._oAdapterWithBackendAdapter.instance,e,t,n)};v.prototype._getApplicationComponent=function(){var e=t._sOwnerId;if(e){var a=r.getComponent(e);if(n.isA(a,"sap.ui.core.UIComponent")){return a}}return undefined};v.prototype.getTransientPersonalizer=function(){return new d};v.prototype.getContainer=function(e,t,n){n=n||this._getApplicationComponent();return this._createContainer(e,t,false,n)};v.prototype.createEmptyContainer=function(e,t,n){n=n||this._getApplicationComponent();return this._createContainer(e,t,true,n)};v.prototype._createContainer=function(e,t,n,r){var o=this;var p=new jQuery.Deferred;if(typeof e!=="string"){throw new a.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ")}var d=!!(i.isAppVariant(r)&&(!t||!t.shared)&&this._oAppVariantAdapterWithBackendAdapter);var u=i.adjustScope(t);var c=i.addContainerPrefix(e);if(d){var l=r.getManifestObject();u.component=r;u.appVarId=l.getEntry("/sap.ui5/appVariantId");u.appVersion=l.getEntry("/sap.app/applicationVersion/version");c+="#"+l.getEntry("/sap.ui5/appVariantId")}var f=d?this._oAppVariantAdapterWithBackendAdapter:this._oAdapterWithBackendAdapter;var h=o._oAdapterWindowOnly;var _=i.pickAdapter(t,h,f);i.loadAdapter(_).then(function(e){var t;var a=new s(o,e,c,u,r);var i=e&&e.supportsGetWithoutSubsequentLoad===true;if(n&&i){t=new jQuery.Deferred;t.resolve(a)}else{t=a.load()}t.fail(function(){p.reject()}).done(function(){if(n||a._isExpired()){a.clear()}p.resolve(a)})},function(e){p.reject(e)});return p.promise()};v.prototype.delContainer=function(e,t){var n={};var r="";var a=this;t=a._adjustScope(t);r=i.addContainerPrefix(e);n=new jQuery.Deferred;var o=a._pendingContainerOperations_cancelAddNext(e,null);o.always(function(){a.getContainer(e,t).fail(function(){a._pendingContainerOperations_cancelAddNext(e,n);n.reject()}).done(function(){var o;a._pendingContainerOperations_cancelAddNext(e,n);o=t.validity===0?a._oAdapterWindowOnly:a._oAdapterWithBackendAdapter;i.loadAdapter(o).then(function(e){e.delAdapterContainer(r,t).fail(function(){n.reject()}).done(function(){n.resolve()})},function(){n.reject()})})});return n.promise()};v.prototype._pendingContainerOperations_flushAddNext=function(e,t){var n=this._oPendingOperationsMap.get(e);if(!n){n=new jQuery.Deferred;n.resolve()}if(t!==null){this._oPendingOperationsMap.put(e,t)}if(!n||n.state()!=="pending"){return n}clearTimeout(n._sapTimeoutId);n._sapTimeoutId=undefined;if(typeof n._sapFnSave==="function"){var r=n._sapFnSave;n._sapFnSave=undefined;r()}return n};v.prototype._pendingContainerOperations_cancelAddNext=function(e,t){var n;n=this._oPendingOperationsMap.get(e);if(!n){n=new jQuery.Deferred;n.resolve()}if(t!==null){this._oPendingOperationsMap.put(e,t)}if(!n||n.state()!=="pending"){return n}if(n._sapTimeoutId){clearTimeout(n._sapTimeoutId);n._sapTimeoutId=undefined;n.resolve(v.prototype.SAVE_DEFERRED_DROPPED)}return n};v.prototype.getPersonalizationContainer=function(e){var t="";var n={};var r={};if(typeof e!=="string"){throw new a.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ")}t=i.addContainerPrefix(e);if(this._oContainerMap.containsKey(t)){return this._oContainerMap.get(t).promise()}r=new jQuery.Deferred;n=new u(this._oAdapterWithBackendAdapter.instance,t);n.done(function(e){r.resolve(e)}).fail(function(e){r.reject(e)});this._oContainerMap.put(t,r);return r.promise()};v.prototype.delPersonalizationContainer=function(e){var t={};var n="";var r=this;n=i.addContainerPrefix(e);t=new jQuery.Deferred;this.getPersonalizationContainer(e).fail(function(){t.reject()}).done(function(){r._oAdapterWithBackendAdapter.instance.delAdapterContainer(n).fail(function(){t.reject()}).done(function(){r._oContainerMap.remove(n);t.resolve()})});return t.promise()};v.prototype._getBackendAdapter=function(){return this._oAdapterWithBackendAdapter.instance._oBackendAdapter};v.prototype.resetEntirePersonalization=function(){var e=this._getBackendAdapter();return this.isResetEntirePersonalizationSupported().then(function(t){if(t){return e.resetEntirePersonalization()}return Promise.reject()})};v.prototype.isResetEntirePersonalizationSupported=function(){var t=this._getBackendAdapter();if(typeof t.resetEntirePersonalization!=="function"){return Promise.resolve(false)}if(typeof t.isResetEntirePersonalizationSupported==="function"){return t.isResetEntirePersonalizationSupported().then(function(e){return e}).catch(function(t){e.error("isResetEntirePersonalizationSupported failed with error: "+t.toString());return Promise.reject(t)})}return Promise.resolve(true)};v.prototype._adjustScope=i.adjustScope;v.hasNoAdapter=false;v.ContextContainer=s;v.Variant=f;v.VariantSet=h;v.VariantSetAdapter=l;v.WindowAdapter=p;v.WindowAdapterContainer=_;return v},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2", ["sap/base/Log","sap/base/util/Deferred","sap/ui/base/ManagedObject","sap/ui/base/Object","sap/ui/core/Component","sap/ui/thirdparty/jquery","sap/ushell/utils","sap/ushell/services/PersonalizationV2/utils","sap/ushell/services/PersonalizationV2/constants","sap/ushell/services/PersonalizationV2/ContextContainer","sap/ushell/services/PersonalizationV2/WindowAdapter","sap/ushell/services/PersonalizationV2/TransientPersonalizer","sap/ushell/services/PersonalizationV2/Personalizer","sap/ushell/services/PersonalizationV2/VariantSetAdapter","sap/ushell/services/PersonalizationV2/Variant","sap/ushell/services/PersonalizationV2/VariantSet","sap/ushell/services/PersonalizationV2/WindowAdapterContainer"],function(e,t,n,r,a,jQuery,i,o,s,p,d,u,c,l,f,h,A){"use strict";function _(e,t,n,r){this._oConfig=r&&r.config||{};this._oAppVariantAdapterWithBackendAdapter=this._configureAppVariantStorage(this._oConfig.appVariantStorage);this._oAdapterWithBackendAdapter={lazy:false,instance:new d(this,e)};this._oAdapterWindowOnly={lazy:false,instance:new d(this,undefined)};this._oContainerMap=new i.Map;this._oPendingOperationsMap=new i.Map}_.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseded by subsequent save";_.prototype.constants=s;_.prototype.KeyCategory=s.keyCategory;_.prototype.WriteFrequency=s.writeFrequency;_.prototype._configureAppVariantStorage=function(e){var n=this;var r="sap.ushell.adapters.AppVariantPersonalizationAdapter";if(!e){e={adapter:{module:r}}}if(Object.keys(e).length===0||e.enabled===false){return}var a=e.adapter&&e.adapter.module||r;var i=a.split(".").join("/");var o=function(){n._oAppVariantAdapterLoadPromise=n._oAppVariantAdapterLoadPromise||function(){var e=new t;try{sap.ui.require([i],r)}catch(t){e.reject(t)}function r(t){try{var r=new t;var a=new d(n,r);e.resolve(a)}catch(t){e.reject(t)}}return e.promise}();return n._oAppVariantAdapterLoadPromise};return{lazy:true,create:o}};_.prototype.getGeneratedKey=async function(){return i.generateRandomKey()};_.prototype.getPersonalizer=async function(e,t,n){n=n||this._getApplicationComponent();return new c(this,this._oAdapterWithBackendAdapter.instance,e,t,n)};_.prototype._getApplicationComponent=function(){var e=n._sOwnerId;if(e){var t=a.getComponentById(e);if(r.isObjectA(t,"sap.ui.core.Component")){return t}}return undefined};_.prototype.getTransientPersonalizer=async function(){return new u};_.prototype.getContainer=async function(e,t,n){n=n||this._getApplicationComponent();const r=await this._createContainer(e,t,false,n);return r};_.prototype.createEmptyContainer=async function(e,t,n){n=n||this._getApplicationComponent();const r=await this._createContainer(e,t,true,n);return r};_.prototype._createContainer=async function(e,t,n,r){if(typeof e!=="string"){throw new i.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ")}var a=!!(o.isAppVariant(r)&&(!t||!t.shared)&&this._oAppVariantAdapterWithBackendAdapter);var s=o.adjustScope(t);var d=o.addContainerPrefix(e);if(a){var u=r.getManifestObject();s.component=r;s.appVarId=u.getEntry("/sap.ui5/appVariantId");s.appVersion=u.getEntry("/sap.app/applicationVersion/version");d+="#"+u.getEntry("/sap.ui5/appVariantId")}var c=a?this._oAppVariantAdapterWithBackendAdapter:this._oAdapterWithBackendAdapter;var l=this._oAdapterWindowOnly;var f=o.pickAdapter(t,l,c);const h=await o.loadAdapter(f);var A=new p(this,h,d,s,r);var _=h&&h.supportsGetWithoutSubsequentLoad===true;if(!(n&&_)){await A.load()}if(n||A.isExpired()){A.clearData()}return A};_.prototype.deleteContainer=function(t,n){var r="";var a=this;n=a._adjustScope(n);r=o.addContainerPrefix(t);const s=new jQuery.Deferred;var p=a._pendingContainerOperations_cancelAddNext(t,null);p.always(function(){a.getContainer(t,n).then(function(){var i;a._pendingContainerOperations_cancelAddNext(t,s);i=n.validity===0?a._oAdapterWindowOnly:a._oAdapterWithBackendAdapter;o.loadAdapter(i).then(function(t){t.delAdapterContainer(r,n).fail(function(t){e.error("Delete failed",t);s.reject()}).done(function(){s.resolve()})},function(t){e.error("Delete failed",t);s.reject()})}).catch(function(n){e.error("Delete failed",n);a._pendingContainerOperations_cancelAddNext(t,s);s.reject()})});return i.promisify(s.promise())};_.prototype._pendingContainerOperations_flushAddNext=function(e,t){var n=this._oPendingOperationsMap.get(e);if(!n){n=new jQuery.Deferred;n.resolve()}if(t!==null){this._oPendingOperationsMap.put(e,t)}if(!n||n.state()!=="pending"){return n}clearTimeout(n._sapTimeoutId);n._sapTimeoutId=undefined;if(typeof n._sapFnSave==="function"){var r=n._sapFnSave;n._sapFnSave=undefined;r()}return n};_.prototype._pendingContainerOperations_cancelAddNext=function(e,t){var n;n=this._oPendingOperationsMap.get(e);if(!n){n=new jQuery.Deferred;n.resolve()}if(t!==null){this._oPendingOperationsMap.put(e,t)}if(!n||n.state()!=="pending"){return n}if(n._sapTimeoutId){clearTimeout(n._sapTimeoutId);n._sapTimeoutId=undefined;n.resolve(_.prototype.SAVE_DEFERRED_DROPPED)}return n};_.prototype._getBackendAdapter=function(){return this._oAdapterWithBackendAdapter.instance._oBackendAdapter};_.prototype.resetEntirePersonalization=function(){var e=this._getBackendAdapter();return this.isResetEntirePersonalizationSupported().then(function(t){if(t){return e.resetEntirePersonalization()}return Promise.reject()})};_.prototype.isResetEntirePersonalizationSupported=function(){var t=this._getBackendAdapter();if(typeof t.resetEntirePersonalization!=="function"){return Promise.resolve(false)}if(typeof t.isResetEntirePersonalizationSupported==="function"){return t.isResetEntirePersonalizationSupported().then(function(e){return e}).catch(function(t){e.error("isResetEntirePersonalizationSupported failed with error:",t);return Promise.reject(t)})}return Promise.resolve(true)};_.prototype._adjustScope=o.adjustScope;_.hasNoAdapter=false;_.ContextContainer=p;_.Variant=f;_.VariantSet=h;_.VariantSetAdapter=l;_.WindowAdapter=d;_.WindowAdapterContainer=A;return _});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/ContextContainer", ["sap/ushell/utils","sap/ushell/services/PersonalizationV2/utils","sap/ushell/services/PersonalizationV2/constants.private","sap/ui/core/format/DateFormat","sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/base/Log"],function(t,e,n,i,o,jQuery,r){"use strict";function a(){this._init.apply(this,arguments)}a.prototype._init=function(t,n,i,r,a){this._oService=t;this._sContainerKey=i;this._oAdapterContainer={};this._oScope=r||e.adjustScope(r);this._aLoadedKeys=[];this._oUnmodifiableContainer=undefined;let s;if(!(a instanceof o)&&a!==undefined){throw new Error("oComponent passed is not a UI5 Component and not undefined")}if(a&&a.getMetadata&&a.getMetadata().getComponentName){s=a.getMetadata().getComponentName()}this.clearData();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new Error("Invalid container key: sap.ushell.services.PersonalizationV2")}this._oAdapterContainer=n.getAdapterContainer(this._sContainerKey,this._oScope,s);return this};a.prototype._getValidity=function(){return this._oScope.validity};a.prototype.clearData=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new t.Map};a.prototype.load=function(){const e=new jQuery.Deferred;if(!this._sContainerKey){throw new Error("Invalid container key: sap.ushell.services.PersonalizationV2")}this.clearData();const n=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,e);const i=this;n.always(()=>{i._oAdapterContainer.load().fail(function(){e.reject()}).done(()=>{i._copyFromAdapter();if(i.isExpired()){i.clearData()}e.resolve()})});return t.promisify(e.promise())};a.prototype._copyFromAdapter=function(){const t=this._oAdapterContainer.getItemKeys().splice(0);t.forEach(t=>{this._oItemMap.put(t,JSON.stringify(this._oAdapterContainer.getItemValue(t)))});this._aLoadedItemKeys=this._oItemMap.keys().splice(0)};a.prototype.isExpired=function(){if(this._getValidity()===Infinity||this._getValidity()===0){return false}const t=this._getItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE);const e=i.getDateInstance({pattern:n.S_ABAPTIMESTAMPFORMAT});const o=e.format(new Date,true);return t&&o>t};a.prototype._copyToAdapterUpdatingValidity=function(){let t=[];if(this._clear){t=this._oAdapterContainer.getItemKeys().splice(0);t.forEach(t=>{this._oAdapterContainer.delItem(t)});this._clear=false}if(this._getValidity()===Infinity||this._getValidity()===0){this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_SCOPE);this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE);this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_STORAGE)}else{const t=i.getDateInstance({pattern:n.S_ABAPTIMESTAMPFORMAT});const e=new Date;const o=t.format(e,true);const r=t.format(new Date(e.getTime()+this._getValidity()*6e4),true);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_SCOPE,this._oScope);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE,r);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_STORAGE,o)}t=this._oItemMap.keys();t.forEach(t=>{this._oAdapterContainer.setItemValue(t,e.cloneToObject(this._oItemMap.get(t)))});const o=this._aLoadedItemKeys.filter(function(e){return!(t.indexOf(e)>-1)});o.forEach(t=>{this._oAdapterContainer.delItem(t)})};a.prototype.save=function(e){this._copyToAdapterUpdatingValidity();const n=new jQuery.Deferred;const i=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,n);const o=this;function r(){i.always(function(){try{o._oAdapterContainer.save().fail(function(){n.reject()}).done(function(){n.resolve()})}catch(t){n.reject()}})}n._sapFnSave=r;n._sapTimeoutId=setTimeout(r,e);return t.promisify(n.promise())};a.prototype.flushPendingRequests=function(){this._copyToAdapterUpdatingValidity();const e=new jQuery.Deferred;const n=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,e);n.fail(function(){e.reject()}).done(function(){e.resolve()});return t.promisify(e.promise())};a.prototype.getItemKeys=function(){const t=this._oItemMap.keys().filter(function(t){return t.startsWith(n.S_ITEM_PREFIX)});return t.map(function(t){return t.replace(n.S_ITEM_PREFIX,"","")})};a.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0)};a.prototype.getItemValue=function(t){return this._getItemValueInternal(n.S_ITEM_PREFIX,t)};a.prototype._getItemValueInternal=function(t,n){if(typeof n!=="string"||typeof t!=="string"){return undefined}return e.cloneToObject(this._oItemMap.get(t+n))};a.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.containsKey(n.S_ITEM_PREFIX+t)};a.prototype.setItemValue=function(t,e){this._setItemValueInternal(n.S_ITEM_PREFIX,t,e)};a.prototype._setItemValueInternal=function(t,e,n){if(typeof e!=="string"||typeof t!=="string"){throw Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.PersonalizationV2")}if(e.length>40){r.error('Personalization Service item key/variant set name ("'+e+'") should be less than 40 characters [current :'+e.length+"]")}this._oItemMap.put(t+e,JSON.stringify(n))};a.prototype.deleteItem=function(t){this._delItemInternal(n.S_ITEM_PREFIX,t)};a.prototype._delItemInternal=function(t,e){if(typeof e!=="string"){return undefined}if(typeof t!=="string"){return undefined}this._oItemMap.remove(t+e)};a.prototype.getKey=function(){return this._sContainerKey.substring(n.S_CONTAINER_PREFIX.length)};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/Personalizer", ["sap/ushell/utils","sap/base/Log"],function(e,t){"use strict";function r(e,t,r,i,n){this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter=t;this._oPersonalizationService=e;this._oScope=i;this._oComponent=n;if(!r||!r.container||!r.item||typeof r.container!=="string"||typeof r.item!=="string"){throw new Error("Invalid input for oPersId: sap.ushell.services.Personalization")}this._sPersContainer=r.container;this._sPersItem=r.item}r.prototype._getContainer=function(e){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oPersonalizationService.getContainer(e,this._oScope,this._oComponent)}return this._oGetContainerPromise};r.prototype.getPersData=function(){return this._getContainer(this._sPersContainer).then(e=>e.getItemValue(this._sPersItem)).catch(e=>{t.error("Failed to get personalization data for Personalizer container: "+this._sPersContainer,e);return Promise.reject()})};r.prototype.setPersData=function(r){return this._getContainer(this._sPersContainer).then(t=>{t.setItemValue(this._sPersItem,r);return e.promisify(t.save())}).catch(e=>{t.error("Failed to get personalization data for Personalizer container: "+this._sPersContainer,e);return Promise.reject()})};r.prototype.deletePersData=function(){return this._getContainer(this._sPersContainer).then(t=>{t.deleteItem(this._sPersItem);return e.promisify(t.save())}).catch(e=>{t.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer,e);return Promise.reject()})};return r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/TransientPersonalizer", [],function(){"use strict";function t(){this._oValue=undefined}t.prototype.getPersData=async function(){return this._oValue};t.prototype.setPersData=async function(t){this._oValue=t};t.prototype.deletePersData=async function(){this._oValue=undefined};return t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/Variant", ["sap/ushell/services/PersonalizationV2/utils"],function(t){"use strict";function a(t,a,e){if(typeof a!=="string"){throw new Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization")}if(typeof e!=="string"){throw new Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}this._oVariantSet=t;this._sVariantKey=a;this._sVariantName=e}a.prototype.getVariantKey=function(){return this._sVariantKey};a.prototype.getVariantName=function(){return this._sVariantName};a.prototype.setVariantName=function(t){const a=this._oVariantSet._getVariantSet();if(typeof t!=="string"){throw new Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}if(this._oVariantSet.getVariantKeyByName(t)!==undefined){throw new Error(`Variant with name '${t}' already exists in variant set '${this._oVariantSet._sVariantSetKey}': sap.ushell.services.Personalization"`)}if(Object.hasOwn(a,"variants")&&Object.hasOwn(a.variants,this._sVariantKey)){const e=a.variants[this._sVariantKey];e.name=t;this._sVariantName=t;this._oVariantSet._serialize()}else{throw new Error("Variant does not longer exist")}};a.prototype.getItemValue=function(a){if(typeof a!=="string"){return}const e=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;if(!Object.hasOwn(e,a)){return}return t.clone(e[a])};a.prototype.setItemValue=function(a,e){if(typeof a!=="string"){throw new Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization")}const i=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!i){throw new Error("Variant does not longer exist")}if(!i.variantData){i.variantData={}}const r=i.variantData;r[a]=t.clone(e);this._oVariantSet._serialize()};a.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}const a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.hasOwn(a,t)};a.prototype.getItemKeys=function(){const t=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;let a;const e=[];for(a in t){if(Object.hasOwn(t,a)){e.push(a)}}e.sort();return e};a.prototype.deleteItem=function(t){if(typeof t!=="string"){return}const a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete a[t];this._oVariantSet._serialize()};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/VariantSet", ["sap/ushell/utils","sap/ushell/services/PersonalizationV2/constants.private","sap/ushell/services/PersonalizationV2/Variant"],function(t,a,e){"use strict";function n(e,n){let r;const i=new t.Map;this._oContextContainer=n;this._sVariantSetKey=e;this._oVariantSetData=this._oContextContainer._getItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey);if(!Object.hasOwn(this._oVariantSetData,"currentVariant")){throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}if(Object.hasOwn(this._oVariantSetData,"variants")){for(r in this._oVariantSetData.variants){if(Object.hasOwn(this._oVariantSetData.variants,r)){const t=this._oVariantSetData.variants[r].name;const a=this._oVariantSetData.variants[r].variantData;if(i.containsKey(t)){throw new Error("Variant name already exists: sap.ushell.services.Personalization")}else{if(typeof r!=="string"){throw new Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization")}if(typeof t!=="string"){throw new Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}if(a&&typeof a!=="object"){throw Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}i.put(t,r)}}}}else{throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}return this}n.prototype._getVariantSet=function(){return this._oVariantSetData};n.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey,this._oVariantSetData)};n.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant};n.prototype.setCurrentVariantKey=function(t){this._getVariantSet().currentVariant=t;this._serialize()};n.prototype.getVariantKeys=function(){const a=new t.Map;const e=this._getVariantSet(this._sVariantSetKey);let n;if(Object.hasOwn(e,"variants")){for(n in e.variants){if(Object.hasOwn(e.variants,n)){a.put(n,"dummy")}}}else{throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}return a.keys()};n.prototype.getVariantNamesAndKeys=function(){const a=new t.Map;const e=new t.Map;const n=this._getVariantSet(this._sVariantSetKey);let r;if(Object.hasOwn(n,"variants")){for(r in n.variants){if(Object.hasOwn(n.variants,r)){const t=n.variants[r].name;if(a.containsKey(t)){throw new Error("Variant name already exists: sap.ushell.services.Personalization")}else{a.put(t,r)}e.put(r,"dummy")}}}else{throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}return a.entries};n.prototype.getVariant=function(t){if(typeof t!=="string"){return undefined}const a=this._getVariantSet(this._sVariantSetKey);if(Object.hasOwn(a,"variants")&&Object.hasOwn(a.variants,t)){const n=a.variants[t].name;const r=a.variants[t].variantData;const i=new e(this,t,n,r);return i}return undefined};n.prototype.getVariantKeyByName=function(t){if(typeof t!=="string"){return undefined}const a=this._getVariantSet(this._sVariantSetKey);let e;if(Object.hasOwn(a,"variants")){for(e in a.variants){if(Object.hasOwn(a.variants,e)){if(t===a.variants[e].name){return e}}}}else{throw new Error("Corrupt variant set data: sap.ushell.services.Personalization")}return undefined};n.prototype.containsVariant=function(t){const a=this._getVariantSet();if(typeof t!=="string"){return undefined}return Object.hasOwn(a,"variants")&&Object.hasOwn(a.variants,t)};n.prototype.addVariant=function(t){const a=this.getVariantKeys();const n=parseInt(a.sort(function(t,a){return t-a}).reverse()[0],10);const r=isNaN(n)?"0":(n+1).toString();if(a.indexOf(r)>=0){throw new Error(`Variant key '${r}' already exists in variant set '${this._sVariantSetKey}': sap.ushell.services.Personalization`)}if(typeof t!=="string"){throw new Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization")}if(this.getVariantKeyByName(t)!==undefined){const a=`(Old key: '${this.getVariantKeyByName(t)}' New key: '${r}')`;throw new Error(`Variant name '${t}' already exists in variant set '${this._sVariantSetKey}' ${a}: sap.ushell.services.Personalization`)}const i=new e(this,r,t);this._getVariantSet(this._sVariantSetKey).variants[r]={name:t,variantData:{}};this._serialize();return i};n.prototype.deleteVariant=function(t){if(typeof t!=="string"){return}const a=this._getVariantSet();if(a&&a.variants){delete this._oVariantSetData.variants[t]}this._serialize()};return n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/VariantSetAdapter", ["sap/ushell/services/PersonalizationV2/constants.private","sap/ushell/services/PersonalizationV2/VariantSet"],function(t,n){"use strict";function e(t){this._oContextContainer=t}e.prototype.save=function(){return this._oContextContainer.save()};e.prototype.getVariantSetKeys=function(){const n=this._oContextContainer._getInternalKeys();const e=n.map(function(n){return n.replace(t.S_VARIANT_PREFIX,"","")});return e};e.prototype.containsVariantSet=function(t){return this.getVariantSetKeys().indexOf(t)>=0};e.prototype.getVariantSet=function(e){const o=this._oContextContainer._getItemValueInternal(t.S_VARIANT_PREFIX,e);if(!o){return}return new n(e,this._oContextContainer)};e.prototype.addVariantSet=function(e){if(this.containsVariantSet(e)){throw new Error(`Container already contains a variant set with key '${e}': sap.ushell.services.Personalization`)}const o={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(t.S_VARIANT_PREFIX,e,o);const r=new n(e,this._oContextContainer);return r};e.prototype.deleteVariantSet=function(n){this._oContextContainer._delItemInternal(t.S_VARIANT_PREFIX,n)};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/WindowAdapter", ["sap/ui/thirdparty/jquery","sap/ushell/services/PersonalizationV2/WindowAdapterContainer"],function(jQuery,e){"use strict";function t(e,t){this._oBackendAdapter=t;if(t){this.supportsGetWithoutSubsequentLoad=t.supportsGetWithoutSubsequentLoad}}t.prototype.data={};t.prototype.getAdapterContainer=function(n,o,r){const a=this._oBackendAdapter&&this._oBackendAdapter.getAdapterContainer(n,o,r);return new e(n,o,a,t)};t.prototype.delAdapterContainer=function(e,n){const o=new jQuery.Deferred;delete t.prototype.data[e];if(this._oBackendAdapter){this._oBackendAdapter.delAdapterContainer(e,n).done(function(){o.resolve()}).fail(function(e){o.reject(e)})}else{o.resolve()}return o.promise()};return t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/WindowAdapterContainer", ["sap/ushell/utils","sap/ushell/services/PersonalizationV2/utils","sap/ui/thirdparty/jquery"],function(e,t,jQuery){"use strict";function n(t,n,o,i){this._oBackendContainer=o;this._oItemMap=new e.Map;this._sContainerKey=t;this.WindowAdapter=i}function o(e){let t;const n=e.getItemKeys();for(t=0;t<n.length;t=t+1){e.delItem(n[t])}}n.prototype.load=function(){const e=new jQuery.Deferred;let n,i;if(this.WindowAdapter.prototype.data[this._sContainerKey]){this._oItemMap.entries=t.clone(this.WindowAdapter.prototype.data[this._sContainerKey]);if(this._oBackendContainer){o(this._oBackendContainer);i=this.getItemKeys();for(n=0;n<i.length;n=n+1){this._oBackendContainer.setItemValue(i[n],this._oItemMap.get(i[n]))}}e.resolve()}else if(this._oBackendContainer){const o=this;this._oBackendContainer.load().done(function(){i=o._oBackendContainer.getItemKeys();for(n=0;n<i.length;n=n+1){o.setItemValue(i[n],o._oBackendContainer.getItemValue(i[n]))}this.WindowAdapter.prototype.data[o._sContainerKey]=t.clone(o._oItemMap.entries);e.resolve()}.bind(this)).fail(function(t){e.reject(t)})}else{this.WindowAdapter.prototype.data[this._sContainerKey]={};e.resolve()}return e.promise()};n.prototype.save=function(){const e=new jQuery.Deferred;this.WindowAdapter.prototype.data[this._sContainerKey]=t.clone(this._oItemMap.entries);if(this._oBackendContainer){this._oBackendContainer.save().done(function(){e.resolve()}).fail(function(t){e.reject(t)})}else{e.resolve()}return e.promise()};n.prototype.getItemKeys=function(){return this._oItemMap.keys()};n.prototype.containsItem=function(e){this._oItemMap.containsKey(e)};n.prototype.getItemValue=function(e){return this._oItemMap.get(e)};n.prototype.setItemValue=function(e,t){this._oItemMap.put(e,t);if(this._oBackendContainer){this._oBackendContainer.setItemValue(e,t)}};n.prototype.delItem=function(e){this._oItemMap.remove(e);if(this._oBackendContainer){this._oBackendContainer.delItem(e)}};return n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/constants", [],function(){"use strict";const E={FIXED_KEY:"FIXED_KEY",GENERATED_KEY:"GENERATED_KEY"};const e={HIGH:"HIGH",LOW:"LOW"};return{keyCategory:E,writeFrequency:e}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/constants.private", [],function(){"use strict";return{S_CONTAINER_PREFIX:"sap.ushell.personalization#",S_ITEM_PREFIX:"ITEM#",S_VARIANT_PREFIX:"VARIANTSET#",S_ABAPTIMESTAMPFORMAT:"yyyyMMddHHmmss",S_ADMIN_PREFIX:"ADMIN#",S_ITEMKEY_SCOPE:"sap-ushell-container-scope",S_ITEMKEY_STORAGE:"sap-ushell-container-storageUTCTimestamp",S_ITEMKEY_EXPIRE:"sap-ushell-container-expireUTCTimestamp"}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PersonalizationV2/utils", ["sap/ushell/services/PersonalizationV2/constants","sap/ushell/services/PersonalizationV2/constants.private","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,n,jQuery,i){"use strict";function r(e,t){let n;for(n in t){if(typeof t[n]!=="function"){if(t.hasOwnProperty(n)){if(n===e){return true}}}}return false}function a(e){if(e.length>40){i.error('Personalization Service container key ("'+e+'") should be less than 40 characters [current :'+e.length+"]")}return t.S_CONTAINER_PREFIX+e}function l(e,t,n){if(e&&e.validity===0){return t}return n}function o(t){const n={validity:Infinity,keyCategory:e.keyCategory.GENERATED_KEY,writeFrequency:e.writeFrequency.HIGH,clientStorageAllowed:false};if(t){n.validity=t.validity;if(n.validity===null||n.validity===undefined||typeof n.validity!=="number"){n.validity=Infinity}if(!(typeof n.validity==="number"&&(n.validity>=0&&n.validity<1e3||n.validity===Infinity))){n.liftime=Infinity}n.keyCategory=r(t.keyCategory,e.keyCategory)?t.keyCategory:n.keyCategory;n.writeFrequency=r(t.writeFrequency,e.writeFrequency)?t.writeFrequency:n.writeFrequency;if(typeof t.clientStorageAllowed==="boolean"&&(t.clientStorageAllowed===true||t.clientStorageAllowed===false)){n.clientStorageAllowed=t.clientStorageAllowed}}return n}function u(e){if(!e.lazy){return n.promisify(jQuery.when(e.instance))}try{return n.promisify(e.create.call(null))}catch(e){return Promise.reject(e)}}function f(e){if(!e){return false}const t=e.getManifestObject();if(!t){return false}const n=t.getEntry("/sap.ui5/appVariantId");if(!n){return false}const i=t.getComponentName();if(n===i){return false}return true}function c(e){if(e===undefined){return undefined}try{return JSON.parse(e)}catch(e){return undefined}}function y(e){if(e===undefined){return undefined}try{return JSON.parse(JSON.stringify(e))}catch(e){return undefined}}return{adjustScope:o,cloneToObject:c,clone:y,addContainerPrefix:a,pickAdapter:l,isAppVariant:f,loadAdapter:u}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PluginManager", ["sap/base/Log","sap/ui/thirdparty/jquery","sap/ushell/appIntegration/PostMessagePluginInterface","sap/ushell/services/PluginManager/Extensions","sap/ushell/UI5ComponentType","sap/ushell/utils","sap/ushell/Container","sap/ushell/services/PluginManager/SimpleExpression"],(e,jQuery,n,i,t,o,s,r)=>{"use strict";const a="sap.ushell.services.PluginManager";const l="sap-ushell-plugin-type";const u="RendererExtensions";const c="sap.ushell.components.shell.defaults";const g=[u,"UserDefaults","UserImage","AppWarmup"];function p(p,d,f){const h=this;this._oPluginCollection={};this._oCategoryLoadingProgress={};this._mInitializedComponentPromise={};this._sPluginAgentsNames="";this._oConfig=f&&f.config||{};if(this._oConfig.isBlueBox===undefined){this._oConfig.isBlueBox=false}g.forEach(e=>{h._oPluginCollection[e]={};h._oCategoryLoadingProgress[e]=new jQuery.Deferred});this._handlePluginCreation=async function(n,i,t,s){const r=h._oPluginCollection[n][i];o.setPerformanceMark(`FLP -- PluginManager.loadPlugin[${n}][${i}]`);try{if(r.hasOwnProperty("component")){if(h._mInitializedComponentPromise.hasOwnProperty(r.component)){h._mInitializedComponentPromise[r.component].then(()=>{h._instantiateComponent(r,t,s)},()=>{h._instantiateComponent(r,t,s)})}else{h._mInitializedComponentPromise[r.component]=h._instantiateComponent(r,t,s)}}else{e.error(`Invalid plugin configuration. The plugin ${i} must contain a <component> key`,a)}}catch(n){e.error(`Error while loading bootstrap plugin: ${r.component}`||"",a);if(t){t.reject(n)}}};this._getFileNameForXhrAuth=function(){return"Component-preload.js"};this._handleXhrAuthentication=function(n,i){let t;if(n&&["true",true,"X"].indexOf(n["sap-ushell-xhr-authentication"])>-1){if(!i){e.error(["Illegal state: configuration parameter 'sap-ushell-xhr-authentication-timeout' set, but no component URL specified.","XHR authentication request will not be sent. Please check the target mapping definitions for plug-ins","and the application index."].join(" "),undefined,a);return jQuery.when()}if(n.hasOwnProperty("sap-ushell-xhr-authentication-timeout")){t=parseInt(n["sap-ushell-xhr-authentication-timeout"],10);if(isNaN(t)){e.error(["Invalid value for configuration parameter 'sap-ushell-xhr-authentication-timeout' for plug-in component with URL '",i,"': '",n["sap-ushell-xhr-authentication-timeout"],"' is not a number. Timeout will be ignored."].join(""),undefined,a)}else{s.setXhrLogonTimeout(i,t)}}return jQuery.ajax(`${i}/${this._getFileNameForXhrAuth()}`,{dataType:"text"})}return jQuery.when()};this._instantiateComponent=function(n,o,r){const l=new jQuery.Deferred;const u=JSON.parse(JSON.stringify(n));const c={ui5ComponentName:u.component,url:u.url,getExtensions:i.bind(null,n.component)};function g(n){return function(i){n=n||`Cannot create UI5 plugin component: (componentId/appdescrId :${c.ui5ComponentName})\n${i} properties ${JSON.stringify(c)}\n This indicates a plugin misconfiguration, see e.g. Note 2316443.`;i=i||"";e.error(n,i.stack,a);if(o){o.reject.apply(this,arguments)}l.reject.apply(this,arguments)}}u.name=u.component;delete u.component;c.applicationDependencies=u;if(u.config){c.applicationConfiguration=u.config;delete u.config}c.loadDefaultDependencies=false;if(r!==undefined){c.oPostMessageInterface=r}s.getServiceAsync("Ui5ComponentLoader").then(e=>{this._handleXhrAuthentication(c.applicationConfiguration,u.url).done(()=>{e.createComponent(c,{},[],t.Plugin).then(function(e){if(o){o.resolve(e)}l.resolve.apply(this,arguments)}).catch(g())}).fail(g("XHR logon for FLP plugin failed"))}).catch(g());return l.promise()};this.getSupportedPluginCategories=function(){return JSON.parse(JSON.stringify(g))};this.getRegisteredPlugins=function(){return JSON.parse(JSON.stringify(this._oPluginCollection))};this.isPluginConfigured=function(e,n=u){if(!this._oPluginCollection[n]){return false}const i=new URLSearchParams(window.location.search).get("sap-ushell-xx-pluginmode")||"";const t=this.filterPluginIds(Object.keys(this._oPluginCollection[n]),i,n);return t.includes(e)};this.registerPlugins=async function(n){let i;if(!n){return}if(this._oConfig.isBlueBox===true){i=new URLSearchParams(window.location.search).get("sap-plugins");if(i&&i.length>0){i=`,${i},`}else{i=undefined}}const t=await this._addPluginsIntoCollection(n,i);try{if(this._oConfig.isBlueBox!==true){this._buildNamesOfPluginsWithAgents()}}catch(n){e.error("failed to build plugin agents names list",n.message||n.toString(),"sap.ushell.services.PluginManager")}t.forEach(e=>{if(Object.hasOwn(this._oCategoryLoadingProgress,e)&&this._oCategoryLoadingProgress[e].state()==="resolved"){this.loadPlugins(e)}})};this._addPluginsIntoCollection=async function(n,i=""){const t=[];for(const s of Object.keys(n).sort()){const r=n[s]||{};const c=r.config||{};const p=c[l]||"";r.enabled??=true;if(r.enabled===false){continue}if(!this._isFormFactorSupported(r)){e.info(`Plugin '${s}' filtered from result: form factor not supported`);continue}if(this._oConfig.isBlueBox===true&&c["sap-plugin-agent"]===true){const e=c["sap-plugin-agent-id"]||s;if(!i.includes(`,${e},`)){continue}}if(Object.hasOwn(r,"module")){const n=(r.module||"").replace(/\./g,"/");e.error(`Plugin ${s} cannot get registered, because the module mechanism for plugins is not valid anymore. Plugins need to be defined as SAPUI5 components.`,a);try{await o.requireAsync([n])}catch(i){e.error(`Plugin module ${n} is not found.`)}continue}if(Object.hasOwn(c,l)){if(g.includes(p)){if(!t.includes(p)){t.push(p)}this._oPluginCollection[p][s]=JSON.parse(JSON.stringify(r))}else{e.warning(`Plugin ${s} will not be inserted into the plugin collection of the PluginManager, because of unsupported category ${p}`,a)}}else{this._oPluginCollection[u][s]=JSON.parse(JSON.stringify(r));if(!t.includes(u)){t.push(u)}}}return t};this._isFormFactorSupported=function(e){const n=e.deviceTypes;const i=o.getFormFactor();if(n&&n[i]===false){return false}return true};this.getPluginLoadingPromise=function(e){if(this._oCategoryLoadingProgress.hasOwnProperty(e)){return this._oCategoryLoadingProgress[e].promise()}};this.filterPluginIds=function(e,n,i){let t;if(n.startsWith("discard-filter-")){t="discardFilterPluginsAccordingToSimpleExpression"}else if(n.startsWith("discard")){t="discardAlmostAllPlugins"}else{t="noDiscard"}switch(t){case"discardFilterPluginsAccordingToSimpleExpression":var o=n.replace("discard-filter-","");return r.filterByExpression(e,o);case"discardAlmostAllPlugins":return e.filter(e=>h._oPluginCollection[i][e].component===c);case"noDiscard":default:return e}};this.loadPlugins=function(i){let t;o.setPerformanceMark(`FLP -- PluginManager.startLoadPlugins[${i}]`);if(i===u){t=n.getInterface()}if(g&&Array.prototype.indexOf.call(g,i)!==-1){if(h._oCategoryLoadingProgress[i].pluginLoadingTriggered===undefined){h._oCategoryLoadingProgress[i].pluginLoadingTriggered=true}if(Object.keys(h._oPluginCollection[i]).length>0){const e=[];let n=Object.keys(h._oPluginCollection[i]);const s=new URLSearchParams(window.location.search).get("sap-ushell-xx-pluginmode")||"";n=this.filterPluginIds(n,s,i,h);n.forEach(n=>{const o=h._oPluginCollection[i][n];if(!o.loaded){o.loaded=true;const s=new jQuery.Deferred;e.push(s.promise());h._handlePluginCreation(i,n,s,t)}});if(e.length>0){Promise.allSettled(e.map((e,i)=>new Promise(t=>{const o={pluginName:n[i],success:true};e.done(()=>{t(o)}).fail(e=>{o.success=false;o.error=e;t(o)})}))).then(e=>{o.setPerformanceMark(`FLP -- PluginManager.endLoadPlugins[${i}]`);h._oCategoryLoadingProgress[i].resolve(e.map(e=>e.value))})}}else{h._oCategoryLoadingProgress[i].resolve()}}else{e.error(`Plugins with category ${i} cannot be loaded by the PluginManager`,a);h._oCategoryLoadingProgress[i].reject(`Plugins with category ${i} cannot be loaded by the PluginManager`)}return h._oCategoryLoadingProgress[i].promise()};this._buildNamesOfPluginsWithAgents=function(){let e="";Object.keys(h._oPluginCollection).forEach(n=>{Object.keys(h._oPluginCollection[n]).forEach(i=>{const t=h._oPluginCollection[n][i];if(t&&t.enabled&&t.enabled===true){if(t.config&&t.config["sap-plugin-agent"]===true){e+=`${t.config["sap-plugin-agent-id"]||i},`}}})});if(e.endsWith(",")){e=e.slice(0,-1)}this._sPluginAgentsNames=e};this._getNamesOfPluginsWithAgents=function(){return this._sPluginAgentsNames}}p.hasNoAdapter=true;return p},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PluginManager/Extensions", ["sap/ushell/services/PluginManager/HeaderExtensions","sap/ushell/services/PluginManager/MenuExtensions"],function(e,n){"use strict";var r={Header:i,Menu:s};function s(e){return Promise.resolve(n(e))}function i(){return Promise.resolve(e)}function u(e,n){var s=r[n];if(!s){return Promise.reject("Unsupported extension: '"+n+"'")}return s(e)}return u});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PluginManager/HeaderExtensions", ["sap/ushell/EventHub"],function(e){"use strict";function t(t,n,r){e.emit("setHeaderCentralAreaElement",{id:t,currentState:n,states:r})}return{setHeaderCentralAreaElement:t}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PluginManager/MenuExtensions", ["sap/ushell/Container"],function(n){"use strict";function e(e){return function r(t){return n.getServiceAsync("Menu").then(function(n){return n.getEntryProvider(e,t)})}}return function(n){return{getMenuEntryProvider:e(n)}}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/PluginManager/SimpleExpression", [],function(){"use strict";var e={};e.parseAndEvaluate=function(a,p){const t=p.split(" ");return e.evaluate(a,t)};e.evaluate=function(e,a){var p=[];var t;while(a.length){switch(t=a.shift()){case"includes":p.push(e.includes(p.pop()));break;case"not":p.push(!p.pop());break;case"and":p.push(p.pop()&&p.pop());break;case"or":p.push(p.pop()||p.pop());break;default:p.push(t)}}return p.pop()};e.filterByExpression=function(a,p){return a.filter(a=>e.parseAndEvaluate(a,p))};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ReferenceResolver", ["sap/base/Log","sap/base/i18n/Formatting","sap/base/i18n/date/CalendarType","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/ui/core/Lib","sap/ui/core/Supportability","sap/ui/core/format/DateFormat","sap/ui/model/odata/ODataUtils","sap/ui/model/odata/v4/ODataUtils","sap/ushell/User","sap/ushell/utils","sap/ushell/Container"],function(e,t,n,a,s,r,i,l,c,o,u,f,d){"use strict";const m="sap.ushell.services.ReferenceResolver";function g(){this.getValue=async function(e){let n;if(e==="User.env.sap-ui-legacy-date-format"){n=t.getABAPDateFormat()}if(e==="User.env.sap-ui-legacy-number-format"){n=t.getABAPNumberFormat()}if(e==="User.env.sap-ui-legacy-time-format"){n=t.getABAPTimeFormat()}if(e==="User.env.sap-language"){n=d.getUser().getLanguage()}if(e==="User.env.sap-languagebcp47"){n=d.getUser().getLanguageBcp47()}if(e==="User.env.sap-accessibility"){n=d.getUser().getAccessibilityMode()?"X":undefined}if(e==="User.env.sap-statistics"){n=i.isStatisticsEnabled()?"true":undefined}if(e==="User.env.sap-theme"){n=d.getUser().getTheme(u.prototype.constants.themeFormat.THEME_NAME_PLUS_URL)}if(e==="User.env.sap-theme-name"){n=d.getUser().getTheme()}if(e==="User.env.sap-theme-NWBC"){n=d.getUser().getTheme(u.prototype.constants.themeFormat.NWBC)}return{value:n}}}function h(t,i,u){this._getUserEnvReferenceResolver=function(){if(!this.oUserEnvReferenceResolver){this.oUserEnvReferenceResolver=new g}return this.oUserEnvReferenceResolver};this.resolveReferences=async function(t,n){const a=[];let r=true;const i={};const l={};const c=t.map(t=>{let n;if(t.indexOf("User.env.")===0){n=t;l[n]=1}if(t.indexOf("UserDefault.")===0){n=this._extractAnyUserDefaultReferenceName(t);i[n]=1}if(typeof n!=="string"){r=false;e.error(`'${t}' is not a legal reference name`,null,m)}return{full:t,name:n}});if(!r){throw new Error("One or more references could not be resolved")}if(!n){const e=await d.getServiceAsync("ClientSideTargetResolution");n=await e.getSystemContext()}const o=await d.getServiceAsync("UserDefaultParameters");Object.keys(i).forEach(e=>{a.push(o.getValue(e,n))});const u=this._getUserEnvReferenceResolver();Object.keys(l).forEach(e=>{a.push(u.getValue(e))});const f=await Promise.all(a);const g={};let h=0;Object.keys(i).forEach(e=>{i[e]=f[h];h=h+1});Object.keys(l).forEach(e=>{l[e]=f[h];h=h+1});c.forEach(e=>{let t;if(e.full.indexOf("UserDefault.extended.")===0){t=this.mergeSimpleAndExtended(i[e.name]);if(!s(t)){g[e.full]=t}else{g[e.full]=undefined}}else if(e.full.indexOf("UserDefault.")===0){g[e.full]=i[e.name].value}else if(e.full.indexOf("User.env.")===0){g[e.full]=l[e.name].value}});return g};this._extractAnyUserDefaultReferenceName=function(e){const t=this.extractExtendedUserDefaultReferenceName(e);if(typeof t==="string"){return t}return this.extractUserDefaultReferenceName(e)};this.extractExtendedUserDefaultReferenceName=function(e){if(typeof e!=="string"||e.indexOf("UserDefault.extended.")!==0){return undefined}return e.replace(/^UserDefault[.]extended[.]/,"")};this.extractUserDefaultReferenceName=function(e){if(typeof e!=="string"||e.indexOf("UserDefault.")!==0||e.indexOf("UserDefault.extended.")===0){return undefined}return e.replace(/^UserDefault[.]/,"")};this.mergeSimpleAndExtended=function(e){const t=a({},e.extendedValue);if(typeof e.value==="string"){if(!Array.isArray(t.Ranges)){t.Ranges=[]}t.Ranges.push({Sign:"I",Option:"EQ",Low:e.value,High:null})}return t};function h(e){const t=/{([^}%]*%%[^%]+%%)}?/g;const n=/([^%]*)%%/;const a=/%%([^%]+)%%/;const s=[];let r=t.exec(e);while(r){const i=n.exec(r[1]);const l=a.exec(r[1]);s.push({edmType:i[1],name:l[1]});r=t.exec(e)}return s}this._extractUrlPlaceholders=function(e,t){let n,a;const s=[];n=/[^(?]*/.exec(e);a=n===null?[]:h(n[0]);a.forEach(e=>{s.push(e.name)});n=/[(?][^]*/.exec(e);a=n===null?[]:h(n[0]);const r=a.filter(e=>{const n=e.name;if(t.test(n)){return true}s.push(n);return false});return{extractedReferences:r,ignoredReferences:s}};this._replaceUrlPlaceholders=function(e,t,n){let a=e;const s=[];const r=n?o.formatLiteral.bind(o):c.formatValue.bind(c);t.forEach(e=>{const t=e.name;let n=null;let i=false;while(n!==a){n=a;if(e.value!==undefined){const n=r(e.value,e.edmType);a=a.replace(`{${e.edmType}%%${t}%%}`,window.encodeURIComponent(n))}else{i=true;a=a.replace(`{${e.edmType}%%${t}%%}`,"")}}if(i){s.push(t)}});return{resolvedUrl:a,placeholdersWithoutValue:s}};this.resolveUserDefaultParameters=async function(e,t){const n=this._extractUrlPlaceholders(e,/^UserDefault\.(?!extended\.).+/);const a=n.extractedReferences;const s=n.ignoredReferences;if(a.length===0){return{url:e,defaultsWithoutValue:[],ignoredReferences:s}}const r=a.map(e=>e.name);const i=await this.resolveReferences(r,t);a.forEach(e=>{e.value=i[e.name]});const l=this._replaceUrlPlaceholders(e,a);return{url:l.resolvedUrl,defaultsWithoutValue:l.placeholdersWithoutValue,ignoredReferences:s}};this._loadDynamicDateRange=async function(){await r.load("sap.ui.unified");const[e]=await f.requireAsync(["sap/m/DynamicDateRange"]);return e};this._rSemanticDateRangeRegex=/^DynamicDate\..+/;this.resolveSemanticDateRanges=async function(t,n){const a=this._extractUrlPlaceholders(t,this._rSemanticDateRangeRegex);const s=a.extractedReferences;const r=a.ignoredReferences;if(s.length===0){return{url:t,hasSemanticDateRanges:false,invalidSemanticDates:[],ignoredReferences:r}}const i=["2.0","4.0"];if(!n||!i.includes(n)){throw new Error(`Invalid OData version: ${n}`)}const l=n==="4.0";const c=await this._resolveSemanticDateRanges(s,l);const o=this._replaceUrlPlaceholders(t,c,l);if(e.getLevel()>=e.Level.DEBUG){const a=c.filter(e=>"value"in e);e.debug("Resolving semantic date ranges \n"+`- OData Version: ${n}\n`+`- URL: ${t}\n`+`- ignoring references: ${JSON.stringify(r,null,4)}\n`+`- resolved semantic date ranges: ${JSON.stringify(a,null,4)}\n`+`- invalid semantic date ranges:${JSON.stringify(o.placeholdersWithoutValue,null,4)}\n`+`- final URL: ${o.resolvedUrl}`,null,m)}return{url:o.resolvedUrl,hasSemanticDateRanges:s.length>0,invalidSemanticDates:o.placeholdersWithoutValue,ignoredReferences:r}};this._resolveSemanticDateRanges=async function(e,t){const n=this._getDateTimeFormatters();const a=await this._loadDynamicDateRange();return e.map(e=>{const s={name:e.name,edmType:e.edmType};const r=e.name.split(".");const i={operator:r[1],values:[]};let l;if(r.length===3){l=r[2]}else if(r.length===4){i.values.push(r[2]);l=r[3]}else if(r.length===5){i.values=r.slice(2,4);l=r[4]}let c;try{c=a.toDates(i)}catch(e){return s}if(r.length>=3&&l!=="start"&&l!=="end"){return s}let o;if(l==="end"){o=c[1]}else{o=c[0]}if(!o){return s}switch(e.edmType){case"Edm.String":s.value=n.string.format(o);break;case"Edm.Date":s.value=n.date.format(o);break;case"Edm.DateTime":o.setUTCFullYear(o.getFullYear(),o.getMonth(),o.getDate());o.setUTCHours(0,0,0,0);s.value=o;break;case"Edm.DateTimeOffset":if(t){s.value=n.dateTimeOffsetV4.format(o,true)}else{s.value=o}break;default:break}return s})};this._getDateTimeFormatters=function(){if(!this._oDateTimeFormatters){this._oDateTimeFormatters={string:l.getDateInstance({pattern:"yyyyMMdd",calendarType:n.Gregorian}),date:l.getDateInstance({pattern:"yyyy-MM-dd",calendarType:n.Gregorian}),dateTimeOffsetV4:l.getDateInstance({pattern:"yyyy-MM-dd'T'HH:mm:ss'.'SSS'Z'",calendarType:n.Gregorian})}}return this._oDateTimeFormatters};this.hasSemanticDateRanges=function(e){const t=this._extractUrlPlaceholders(e,this._rSemanticDateRangeRegex);return t.extractedReferences.length>0}}h.hasNoAdapter=true;return h},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ShellNavigation", ["sap/base/Log","sap/ushell/Container"],function(t,e){"use strict";function i(i,a,n){t.error("Deprecated service call. Please migrate any dependencies to this service.",null,"sap.ushell.services.ShellNavigation");this._oShellNavigationInternal=e.getService("ShellNavigationInternal");this.NavigationFilterStatus=this._oShellNavigationInternal.NavigationFilterStatus;this.hashChanger=this._oShellNavigationInternal.hashChanger}i.prototype.getNavigationContext=function(){return this._oShellNavigationInternal.getNavigationContext()};i.prototype.compactParams=function(t,e,i,a){return this._oShellNavigationInternal.compactParams(t,e,i,a)};i.prototype.init=function(t){return this._oShellNavigationInternal.init(t)};i.prototype.wasHistoryEntryReplaced=function(){return this._oShellNavigationInternal.wasHistoryEntryReplaced()};i.prototype.resetHistoryEntryReplaced=function(){this._oShellNavigationInternal.resetHistoryEntryReplaced()};i.prototype.replaceHashWithoutNavigation=function(t){this._oShellNavigationInternal.replaceHashWithoutNavigation(t)};i.prototype.registerNavigationFilter=function(t){this._oShellNavigationInternal.registerNavigationFilter(t)};i.prototype.unregisterNavigationFilter=function(t){this._oShellNavigationInternal.unregisterNavigationFilter(t)};i.hasNoAdapter=true;return i},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ShellNavigationHashChanger", ["sap/ui/core/EventBus","sap/ushell/library","sap/ushell/utils/UrlShortening","sap/ushell/utils/UrlParsing","sap/ui/core/routing/HashChanger","sap/ui/performance/trace/Interaction","sap/ui/thirdparty/hasher","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/Container"],function(e,t,a,i,r,n,s,o,jQuery,h,p){"use strict";var l=t.NavigationState;var u={HASH_SET:{name:"hashSet",historyEntry:true},HASH_REPLACED:{name:"hashReplaced",historyEntry:false},SHELL_HASH_CHANGED:{name:"shellHashChanged",historyEntry:true,usedByUi5HistoryDetection:true,ui5EventParameterNames:{oldHash:"oldAppSpecificRouteNoSeparator",newHash:"newAppSpecificRouteNoSeparator"},updateHashOnly:true},SHELL_HASH_PARAMETER_CHANGED:{name:"shellHashParameterChanged",historyEntry:null},HASH_CHANGED:{name:"hashChanged",historyEntry:false,usedByUi5HistoryDetection:true,ui5EventParameterNames:{newHash:"newHash",fullHash:"fullHash"}}};const c="ShellNavigationHashChanger";const f="[FesrFlp]";var v=r.extend("sap.ushell.services.ShellNavigationHashChanger",{constructor:function(e){this.oServiceConfig=e;this._oNavigationState={};r.apply(this);this._initializedByShellNav=false;this._bReloadApplication=false;this.privfnShellCallback=null;this.privappHashPrefix="&/";this.privhashPrefix="#";this.aNavigationFilters=[];this.NavigationFilterStatus={Continue:"Continue",Custom:"Custom",Abandon:"Abandon",Keep:"Keep"};this.getRelevantEventsInfo=function(){return this._getAllEvents().filter(function(e){return e.usedByUi5HistoryDetection}).map(function(e){var t={name:e.name,paramMapping:e.ui5EventParameterNames};if(e.updateHashOnly!==undefined){t.updateHashOnly=e.updateHashOnly}return t})}}});v.prototype.privgetCurrentShellHash=function(){var e=this.privsplitHash(s.getHash());return{hash:"#"+(e&&e.shellPart?e.shellPart:"")}};v.prototype.privconstructHash=function(e){var t=this.privgetCurrentShellHash();t.hash+=e;return t};v.prototype.privconstructShellHash=function(e){return i.constructShellHash(e)};v.prototype.privsplitHash=function(e){if(e===undefined||e===null||e===""){return{shellPart:null,appSpecificRoute:null,intent:null,params:null}}var t=i.parseShellHash(e);if(t===undefined||t===null){return null}var a=t.params&&!o(t.params)?t.params:null;var r=t.appSpecificRoute;t.appSpecificRoute=undefined;return{shellPart:this.privstripLeadingHash(this.privconstructShellHash(t))||null,appSpecificRoute:r||null,intent:t.semanticObject&&t.action&&t.semanticObject+"-"+t.action+(t.contextRaw||"")||null,params:a}};v.prototype.privsetHash=function(e,t,a){s.prependHash="";e=this.privstripLeadingHash(e);t=t||"";if(a===undefined){a=true}if(a){this.fireEvent(u.HASH_SET.name,{sHash:t});s.setHash(e)}else{this.fireEvent(u.HASH_REPLACED.name,{sHash:t});s.replaceHash(e)}};v.prototype.privstripLeadingHash=function(e){if(e[0]==="#"){return e.substring(1)}return e};v.prototype.registerNavigationFilter=function(e){if(typeof e!=="function"){throw new Error("fnFilter must be a function")}this.aNavigationFilters.push(e)};v.prototype.unregisterNavigationFilter=function(e){if(typeof e!=="function"){throw new Error("fnFilter must be a function")}this.aNavigationFilters=this.aNavigationFilters.filter(function(t){return t!==e})};function H(e,t,a){this.oAppState=undefined;this.oPromise=(new jQuery.Deferred).resolve();this.getNextKey=function(){this.oAppState=e.createEmptyAppState(t,a);return this.oAppState.getKey()};this.store=function(e){var t;this.oAppState.setData(e);t=this.oAppState.save();this.oPromise=jQuery.when(this.oPromise,t)};this.getPromise=function(){return this.oPromise}}v.prototype.compactParams=function(e,t,r,n){var s=new jQuery.Deferred;var o=i.constructShellHash({target:{semanticObject:"SO",action:"action"},params:e});if(e===undefined||Object.keys(e).length===0){return s.resolve(e).promise()}p.getServiceAsync("AppState").then(function(e){var h=new H(e,r,n);var p=a.compactHash(o,t,h);var l=i.parseParameters(p.hash.match(/\?.*/)[0]);var u=h.getPromise();u.done(function(){s.resolve(l)}).fail(function(e){s.reject(e)})});return s.promise()};v.prototype.hrefForExternal=function(e,t){function a(e,t){if(t===true){e.hash=encodeURI(e.hash)}else{e=encodeURI(e)}return e}return this.hrefForExternalNoEncAsync(e,t).then(function(e){return a(e,t)})};v.prototype.hrefForExternalSync=function(e,t,a){function i(e,t){if(t===true){e.hash=encodeURI(e.hash)}else{e=encodeURI(e)}return e}var r=this.hrefForExternalNoEnc(e,t,a);return i(r,t)};v.prototype.hrefForExternalNoEnc=function(e,t,a,i){h.error("Deprecated API call of 'sap.ushell.services.ShellNavigationHashChanger.hrefForExternalNoEnc'. Please use 'hrefForExternalNoEncAsync' instead",null,"sap.ushell.services.ShellNavigationHashChanger");if(i){var r=new jQuery.Deferred;this.hrefForExternalNoEncAsync(e,t).then(r.resolve).catch(r.reject);return r.promise()}var n=this.privhrefForExternalNoEnc(e);if(t===true){return{hash:n.hash,params:n.params,skippedParams:n.skippedParams}}return n.hash};v.prototype.hrefForExternalNoEncAsync=function(e,t){var a;var i=this.privhrefForExternalNoEnc(e);if(t===true){a={hash:i.hash,params:i.params,skippedParams:i.skippedParams}}else{a=i.hash}return new Promise(function(e){e(a)})};v.prototype.privhrefForExternalNoEnc=function(e){if(e===undefined){return this.privgetCurrentShellHash()}if(e&&e.target&&(typeof e.target.semanticObject==="string"||typeof e.target.shellHash==="string")){return{hash:"#"+this.privconstructShellHash(e)}}return this.privgetCurrentShellHash()};v.prototype.privgetAppHash=function(e){var t;if(e&&e.target&&typeof e.target.shellHash==="string"){var a=i.parseShellHash(e.target.shellHash);t=a&&a.appSpecificRoute;t=t&&t.substring(2)}return t};v.prototype.hrefForAppSpecificHash=function(e){return encodeURI(this.privconstructHash(this.privappHashPrefix+e).hash)};v.prototype.toExternal=function(e,t,a){var i=this.privhrefForExternalNoEnc(e).hash;var r=this.privgetAppHash(e);this.privsetHash(i,r,a);return Promise.resolve()};v.prototype.toAppHash=function(e,t){var a=this.privconstructHash(this.privappHashPrefix+e).hash;this.privsetHash(a,e,t)};v.prototype.initShellNavigation=function(e){if(this._initializedByShellNav){h.info("initShellNavigation already called on this ShellNavigationHashChanger instance.");return false}this.privfnShellCallback=e;s.changed.add(this.treatHashChanged,this);if(!s.isActive()){s.initialized.addOnce(this.treatHashChanged,this);s.init()}else{this.treatHashChanged(s.getHash())}this._initializedByShellNav=true;return true};v.prototype.init=function(){if(this._initialized){h.info("init already called on this ShellNavigationHashChanger instance.");return false}var e=this.privsplitHash(s.getHash());var t=(e&&e.appSpecificRoute||"  ").substring(2);var a=t?"&/":"";var i=e&&e.shellPart||"";this.fireEvent(u.HASH_CHANGED.name,{newHash:t,fullHash:i+a+t});this._initialized=true;return true};v.prototype._removeInnerAppSeparator=function(e){return(e||"").replace("&/","")};v.prototype._setNavigationStatus=function(e){if(e===l.InProgress&&!this._fnResolveInteraction){h.debug(`${f} Interaction Start`,null,c);this._fnResolveInteraction=n.notifyAsyncStep()}else if(e===l.Finished&&this._fnResolveInteraction){h.debug(`${f} Interaction End`,null,c);this._fnResolveInteraction();this._fnResolveInteraction=null}this._oNavigationState.status=e};v.prototype._trackNavigation=function(e,t){this._oNavigationState.newHash=e;this._oNavigationState.oldHash=t};v.prototype.getCurrentNavigationState=function(){return this._oNavigationState};v.prototype.treatHashChanged=function(e,t){this._trackNavigation(e,t);this._setNavigationStatus(l.InProgress);if(this.inAbandonFlow){this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}var r;e=a.expandHash(e);t=a.expandHash(t);var n=this.privsplitHash(e);var o=this.privsplitHash(t);if(!n){var p=new Error("Illegal new hash - cannot be parsed: '"+e+"'");this.fireEvent(u.SHELL_HASH_CHANGED.name,{newShellHash:e,newAppSpecificRoute:null,fullHash:e,oldShellHash:o?o.shellPart:t,error:p});this.privfnShellCallback(e,null,o?o.shellPart:t,o?o.appSpecificRoute:null,p);this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}if(!o){o={shellPart:t,appSpecificRoute:null}}for(var c=0;c<this.aNavigationFilters.length;c++){try{var f;var v=this.aNavigationFilters[c].call(undefined,e,t);var H=v;if(typeof v!=="string"){H=v.status;f=v.hash}if(H===this.NavigationFilterStatus.Custom){if(f&&f.length>0){this.inAbandonFlow=true;s.replaceHash(f);this.inAbandonFlow=false}this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}if(H===this.NavigationFilterStatus.Abandon){this.inAbandonFlow=true;s.replaceHash(t);this.inAbandonFlow=false;this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}if(H===this.NavigationFilterStatus.Keep){r=true}}catch(e){h.error("Error while calling Navigation filter! ignoring filter...",e.message,"sap.ushell.services.ShellNavigationHashChanger")}}if(r){this.fireEvent(u.HASH_CHANGED.name,{newHash:e,oldHash:t,fullHash:e});this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}var S=t===undefined;var g=i.compareHashes(e,t);g.sameIntent=g.sameIntent&&!S;var d=g.sameIntent&&g.sameParameters&&g.sameAppSpecificRoute;if(d){h.info("Navigation happened but hash stayed the same",null,"sap.ushell.services.ShellNavigationHashChanger");this.fireEvent(u.HASH_CHANGED.name,{newHash:this._removeInnerAppSeparator(n.appSpecificRoute),oldHash:this._removeInnerAppSeparator(o.appSpecificRoute),fullHash:e});this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}var m=g.sameIntent&&g.sameParameters;if(m){if(this.getReloadApplication()){this.setReloadApplication(false)}else{var A=this._removeInnerAppSeparator(n.appSpecificRoute);var y=this._removeInnerAppSeparator(o.appSpecificRoute);h.info("Inner App Hash changed from '"+y+"' to '"+A+"'",null,"sap.ushell.services.ShellNavigationHashChanger");this.fireEvent(u.HASH_CHANGED.name,{newHash:A,oldHash:y,fullHash:e});this._setNavigationStatus(l.Finished);return}}if(g.sameIntent&&this.hasListeners(u.SHELL_HASH_PARAMETER_CHANGED.name)){var E=i.paramsToString(n.params);var N=i.paramsToString(o.params);h.info("Shell hash parameters changed from '"+N+"' to '"+E+"'",null,"sap.ushell.services.ShellNavigationHashChanger");this.fireEvent(u.SHELL_HASH_PARAMETER_CHANGED.name,{oNewParameters:n.params,oOldParameters:o.params});this._setNavigationStatus(l.Finished);this.setReloadApplication(false);return}h.info("Outer shell hash changed from '"+t+"' to '"+e+"'",null,"sap.ushell.services.ShellNavigationHashChanger");this.fireEvent(u.SHELL_HASH_CHANGED.name,{newShellHash:n.shellPart,newAppSpecificRoute:n.appSpecificRoute,fullHash:e,oldShellHash:o.shellPart,oldAppSpecificRoute:o.appSpecificRoute,error:"",oldAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(o.appSpecificRoute),newAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(n.appSpecificRoute)});this.privfnShellCallback(n.shellPart,n.appSpecificRoute,o.shellPart,o.appSpecificRoute);this._setNavigationStatus(l.Finished);this.setReloadApplication(false)};v.prototype.setHash=function(e){this.toAppHash(e,true)};v.prototype.replaceHash=function(e){this.toAppHash(e,false)};v.prototype.getHash=function(){return this.getAppHash()};v.prototype.getAppHash=function(){var e=this.privsplitHash(s.getHash());var t=(e&&e.appSpecificRoute||"  ").substring(2);return t};v.prototype.destroy=function(){s.changed.remove(this.treatHashChanged,this);r.prototype.destroy.apply(this,arguments)};v.prototype._getAllEvents=function(){return Object.keys(u).map(function(e){return u[e]})};v.prototype.getReplaceHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===false}).map(function(e){return e.name})};v.prototype.getSetHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===true}).map(function(e){return e.name})};v.prototype.isInnerAppNavigation=function(e,t){var a=i.parseShellHash(e);var r=i.parseShellHash(t);var n=t===undefined;var s=i.haveSameIntent(a,r)&&!n;var o=i.haveSameIntentParameters(a,r);return s&&o};v.prototype.getReloadApplication=function(){return this._bReloadApplication};v.prototype.setReloadApplication=function(e){this._bReloadApplication=e};return v});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/ShellNavigationInternal", ["sap/ui/core/EventBus","sap/ushell/services/ShellNavigationHashChanger","sap/ui/core/routing/HashChanger"],function(t,i,e){"use strict";function a(a,n,s){function h(){sap.ui.require(["sap/m/MessageBox"],function(t){t.show("Due to a configuration change on the server,\nclient and server are out of sync.\n We strongly recommend to reload the page soon.\nReload page now?",{icon:t.Icon.ERROR,title:"Client out of sync with server.",actions:[t.Action.YES,t.Action.NO],onClose:function(i){if(i===t.Action.YES){window.setTimeout(function(){window.location.reload()},0)}}})})}var r=s&&s.config;this.hashChanger=new i(r);this._navigationFilterForForwardingToRegisteredRouters=function(t,i){var e=this._aRouters.some(function(t){return t.match(i)});if(e){var a=t.getCurrentApplication();var n=a&&a.componentInstance&&!a.homePage;if(n){var s=a.componentInstance.getRouter();if(s){s.stop()}}return this.NavigationFilterStatus.Keep}return this.NavigationFilterStatus.Continue};this.getNavigationContext=function(){var t=this.hashChanger.getCurrentNavigationState();var i=!this.hashChanger.isInnerAppNavigation(t.oldHash,t.newHash);return{status:t.status,isCrossAppNavigation:i,innerAppRoute:this.hashChanger.getHash()}};this.isInitialNavigation=function(){return this._bIsInitialNavigation};this.setIsInitialNavigation=function(t){this._bIsInitialNavigation=t};this.hrefForExternal=function(t,i,e){return this.hashChanger.hrefForExternal(t,i,e)};this.hrefForExternalSync=function(t,i,e){return this.hashChanger.hrefForExternalSync(t,i,e)};this.hrefForAppSpecificHash=function(t){return this.hashChanger.hrefForAppSpecificHash(t)};this.compactParams=function(t,i,e,a){return this.hashChanger.compactParams(t,i,e,a)};this.toExternal=function(t,i,e){return this.hashChanger.toExternal(t,i,e)};this.toAppHash=function(t,i){this.hashChanger.toAppHash(t,i)};this.init=function(i){this._bIsInitialNavigation=true;hasher.prependHash="";e.replaceHashChanger(this.hashChanger);var a=t.getInstance();a.subscribe("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",h);this.hashChanger.initShellNavigation(i);this._enableHistoryEntryReplacedDetection();return this};this._enableHistoryEntryReplacedDetection=function(){this._lastHashChangeMode=null;this._fnOriginalSetHash=hasher.setHash;this._fnOriginalReplaceHash=hasher.replaceHash;hasher.setHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="setHash";return this._fnOriginalSetHash.apply(hasher,arguments)}.bind(this);hasher.replaceHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="replaceHash";return this._fnOriginalReplaceHash.apply(hasher,arguments)}.bind(this)};this.wasHistoryEntryReplaced=function(){return this._lastHashChangeMode==="replaceHash"};this.resetHistoryEntryReplaced=function(){this._lastHashChangeMode=null};this.replaceHashWithoutNavigation=function(t){hasher.changed.active=false;this._fnOriginalSetHash(t);hasher.changed.active=true};this.NavigationFilterStatus=this.hashChanger.NavigationFilterStatus;this.registerNavigationFilter=function(t){this.hashChanger.registerNavigationFilter(t)};this._aRouters=[];this.registerExtraRouter=function(t){this._aRouters.push(t)};this.unregisterNavigationFilter=function(t){this.hashChanger.unregisterNavigationFilter(t)};this.registerNavigationFilter(function(){if(!this._hashChangedByApp){this.resetHistoryEntryReplaced()}this._hashChangedByApp=undefined;return this.NavigationFilterStatus.Continue}.bind(this));this.registerPrivateFilters=function(t){this.registerNavigationFilter(this._navigationFilterForForwardingToRegisteredRouters.bind(this,t))}}a.hasNoAdapter=true;return a},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/SupportTicket", ["sap/ushell/Config"],function(e){"use strict";function t(t,n,i,r){this.createTicket=function(e){return t.createTicket(e)};this.isEnabled=function(){return e.last("/core/extension/SupportTicket")}}t.hasNoAdapter=false;return t},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UITracer", ["sap/ushell/EventHub","sap/base/util/isPlainObject","sap/base/Log","sap/ushell/Config","sap/ui/Device","sap/base/util/fetch"],function(e,t,s,i,r,n){"use strict";var a=32768;var c=2;var o=1;var h="UITracer.trace";function u(e,t,s){this._sServiceUrl=s.serviceUrl||"/bff/ui-trace/v1/trace";this._pToken=null;this._sToken="";this._resetTrace();this._attachBrowserEvents();this._attachEventHubEvents();this._sSpacesPages=i.last("/core/spaces/enabled")?"-spaces":"-groups";this._sSiteType="wz-standard"+this._sSpacesPages;this._sSiteId=new URLSearchParams(window.location.search).get("siteId")||i.last("/core/site/siteId");this._sDeviceType=this._getDeviceType();const r=sap.ui.require("sap/ushell/Container");if(r){this._initialized=r.getFLPPlatform().then(function(e){if(e==="MYHOME"){this._sSiteType="sap-start"+this._sSpacesPages;return}return r.getServiceAsync("CommonDataModel").then(function(e){e.getApplications().then(function(e){if(e.SFHost){this._sSiteType="wz-advancedhr"+this._sSpacesPages}else if(e.WorkzoneHome){this._sSiteType="wz-advanced"+this._sSpacesPages}}.bind(this))}.bind(this))}.bind(this))}else{this._initialized=Promise.resolve()}}u.prototype._getToken=function(){this._pToken=n(this._sServiceUrl).then(function(e){this._sToken="-";return e.json()}.bind(this)).then(function(e){if(e&&e.token){this._sToken=e.token}}.bind(this)).catch(function(){s.debug("UITracer: getToken failed on "+this._sServiceUrl,"","sap.ushell.services.UITracer");this._sToken="-"}.bind(this))};u.prototype.trace=function(e){if(!this._sToken&&!this._pToken){this._getToken()}this._addEntry(e)};u.prototype._getDeviceType=function(){var e="desktop";if(r.system.tablet){e="tablet"}else if(r.system.phone){e="phone"}return"browser-"+e};u.prototype._resetTrace=function(){this._aTrace=[];this._iSize=c};u.prototype._addEntry=function(e){if(t(e)&&Object.keys(e).length>0){try{var i=this._createTraceEntry(e);var r=this._getBlob(i).size+o;if(this._iSize+r>a){this._sendTrace()}this._iSize+=r;this._aTrace.push(i);s.debug("UITracer: Trace entry added with size "+r,JSON.stringify(i),"sap.ushell.services.UITracer");return true}catch(e){return false}}return false};u.prototype._createTraceEntry=function(e){var t=JSON.parse(JSON.stringify(e));var s=t.data||{};s.siteType=this._sSiteType;s.siteId=this._sSiteId;s.deviceType=this._sDeviceType;t._ts=(new Date).toISOString();t.data=s;return t};u.prototype._sendTrace=function(e){if(!this._sToken||this._sToken==="-"){s.debug("UITracer: _sendTrace failed, token "+this._sToken==="-"?"request failed ":"is missing","","sap.ushell.services.UITracer");return}if(this._aTrace.length>0){var t=this._aTrace[this._aTrace.length-1];if(!e&&t.reason==="LaunchApp"&&t.data&&t.data.targetUrl&&t.data.targetUrl.indexOf("#")===0){return}var i=this._getBlob({token:this._sToken,data:this._aTrace});try{window.navigator.sendBeacon(this._sServiceUrl,i);s.debug("UITracer: _sendTrace to "+this._sServiceUrl+"with size "+i.size+" byte, entry count "+this._aTrace.length,"","sap.ushell.services.UITracer")}catch(e){s.debug("UITracer: _sendTrace failed "+this._sServiceUrl+"with size "+i.size+" byte, entry count "+this._aTrace.length,"","sap.ushell.services.UITracer")}}this._resetTrace()};u.prototype._getBlob=function(e){if(t(e)||Array.isArray(e)){e=JSON.stringify(e)}if(typeof e==="string"){return new Blob([e],{type:"application/json"})}return null};u.prototype._attachBrowserEvents=function(){if(document.visibilityState){document.addEventListener("visibilitychange",function(){if(document.visibilityState==="hidden"){this._sendTrace()}}.bind(this))}window.addEventListener("beforeunload",function(){this._sendTrace(true)}.bind(this))};u.prototype._attachEventHubEvents=function(){e.on(h).do(function(e){this.trace(e)}.bind(this))};u.hasNoAdapter=true;return u},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/URLParsing", ["sap/base/Log","sap/ui/base/Object","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/Container"],function(e,t,s,r,n){"use strict";function a(){this.getShellHash=function(e){return r.getShellHash(e)};this.getHash=function(e){return r.getHash(e)};this.isIntentUrl=function(t){e.error("Deprecated API call of 'sap.ushell.URLParsing.isIntentUrl'. Please use 'isIntentUrlAsync' instead",null,"sap.ushell.services.URLParsing");return r.isIntentUrl(t)};this.isIntentUrlAsync=function(e){return r.isIntentUrlAsync(e)};this.parseParameters=function(e){return r.parseParameters(e)};this.paramsToString=function(e){return r.paramsToString(e)};this.removeParametersWithEmptyValue=function(e,t){r.removeParametersWithEmptyValue(e,t)};this.privparamsToString=function(e,t,s){return r.privparamsToString(e,t,s)};this.parseShellHash=function(e){return r.parseShellHash(e)};this.privstripLeadingHash=function(e){return r.privstripLeadingHash(e)};this.splitHash=function(e){return r.splitHash(e)};this.constructShellHash=function(e){return r.constructShellHash(e)};this.addSystemToServiceUrl=function(e,r){var a=r;if(!e||e.indexOf("/")!==0||e.indexOf("//")===0){throw new s.Error("Invalid URL: "+e,"sap.ushell.services.URLParsing")}if(t.isA(r,"sap.ui.core.Component")){var i=typeof r.getComponentData==="function"&&r.getComponentData();a=i&&i.startupParameters&&i.startupParameters["sap-system"]&&i.startupParameters["sap-system"][0]}var u=n.getService("NavTargetResolutionInternal").getCurrentResolution();if(!a&&!r&&u&&u.url){a=new URL(u.url,window.location.href).searchParams.get("sap-system")}if(/^[^?]*(;mo([/;?]|$))/.test(e)){}else if(/^[^?]*(;o=([/;?]|$))/.test(e)){e=e.replace(/;o=([/;?]|$)/,(a?";o="+a:"")+"$1")}else if(!/^[^?]*;o=/.test(e)&&a){e=e.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+a+"$2")}n.addRemoteSystemForServiceUrl(e);return e}}a.hasNoAdapter=true;return a},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/URLShortening", ["sap/ushell/utils/UrlShortening"],function(n){"use strict";function e(){this.compactHash=n.compactHash.bind(n);this.checkHashLength=n.checkHashLength.bind(n);this.expandHash=n.expandHash.bind(n);this.expandParamGivenRetrievalFunction=n.expandParamGivenRetrievalFunction.bind(n)}e.hasNoAdapter=true;return e},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/URLTemplate", ["sap/ushell/utils","sap/base/Log"],function(e,t){"use strict";function s(){this._init.apply(this,arguments)}s.prototype._init=function(e){this.oAdapter=e};s.prototype.handlePostTemplateProcessing=function(e,t,s){if(this.oAdapter&&this.oAdapter.handlePostTemplateProcessing){return this.oAdapter.handlePostTemplateProcessing(e,t,s)}return Promise.resolve(e)};s.hasNoAdapter=false;s.useConfiguredAdapterOnly=true;return s});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Ui5ComponentHandle", function(){"use strict";var t=function(t){this._oComponent=t};t.onBeforeApplicationInstanceCreated=function(){sap.ui.require(["sap/ushell/Fiori20AdapterTest"],function(){})};t.prototype.getInstance=function(){return this._oComponent};t.prototype.getMetadata=function(){return this._oComponent.getMetadata()};t.prototype.getComponentName=function(){return this._oComponent.getMetadata().getComponentName()};t.prototype.destroy=function(){if(this._oComponent&&!this._oComponent.isDestroyed()){return this._oComponent.destroy()}};return t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/Ui5ComponentLoader", ["sap/base/Log","sap/base/util/deepExtend","sap/ui/core/Component","sap/ui/core/Lib","sap/ui/core/util/AsyncHintsHelper","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/services/Ui5ComponentHandle","sap/ushell/utils","sap/ushell/utils/UriParameters"],(e,t,o,n,r,jQuery,s,a,i,p,c,l)=>{"use strict";let u=["sap.ui.unified"];u=["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"];function m(e,t,o,n){this._oServiceConfig=n&&n.config||{};this._oAdapter=e;i.once("loadCoreResourcesComplement").do(()=>{this.loadCoreResourcesComplement()})}m.prototype.modifyComponentProperties=async function(e,t){if(this._oAdapter.modifyComponentProperties){const o=await this._oAdapter.modifyComponentProperties(e.componentProperties,t);e.componentProperties=o}return e};m.prototype.createComponent=async function(t,o={},n,r){let s;try{s=await this.createComponentData(t,o,n);s=await this.modifyComponentProperties(s,r)}catch(o){e.error("Ui5ComponentLoader: Error while creating component data",o,"sap.ushell.services.Ui5ComponentLoader");return t}const a=await this.instantiateComponent(s);return a};m.prototype.createComponentData=async function(e={},t={},o){const n={};const r=e.applicationDependencies||{};this._logAnyApplicationDependenciesMessages(r.name,r.messages);if(!e.ui5ComponentName){throw new Error("Ui5ComponentLoader: ui5ComponentName is mandatory")}n.appPropertiesSafe=e;n.loadCoreExt=this._shouldLoadCoreExt(e);n.componentData=this._createComponentData(e);const s=a.last("/core/customPreload/enabled");const i=n.loadCoreExt&&s;const p=this._shouldLoadDefaultDependencies(e);const c=e.ui5ComponentId||this._constructAppComponentId(t);n.componentProperties=await this._createComponentProperties(c,e,o,i,p);delete n.appPropertiesSafe.loadCoreExt;delete n.appPropertiesSafe.loadDefaultDependencies;return n};m.prototype.instantiateComponent=async function(t){const o=t.componentProperties;o.componentData=t.componentData;p.onBeforeApplicationInstanceCreated.call(null,o);try{const e=await this._createUi5Component(o);const n=t.appPropertiesSafe;n.componentHandle=new p(e);const r=t.loadCoreExt;if(r){n.coreResourcesFullyLoaded=r;i.emit("CoreResourcesComplementLoaded",{status:"success"})}return n}catch(t){const n=o.name;const r=JSON.stringify(o,null,4);let s=`The issue is most likely caused by application ${n}`;let a=`Failed to load UI5 component with properties: '${r}'.`;if(t.stack){a+=` Error likely caused by:\n${t.stack}`}else{a+=` Error: '${t}'`}if(t.status==="parsererror"){s+=", as one or more of its resources could not be parsed"}s+=". Please create a support incident and assign it to the support component of the respective application.";e.error(s,a,n);throw t}};m.prototype.getCoreResourcesComplementBundle=function(){if(a.last("/core/customPreload/enabled")){return a.last("/core/customPreload/coreResourcesComplement")}return[]};m.prototype.loadCoreResourcesComplement=function(){if(!this.loadCoreResourcesComplementPromise){this.loadCoreResourcesComplementPromise=new Promise(async(e,t)=>{try{await this._loadBundle(this.getCoreResourcesComplementBundle());i.emit("CoreResourcesComplementLoaded",{status:"success"});e()}catch(e){i.emit("CoreResourcesComplementLoaded",{status:"failed"});t(e)}});this.loadCoreResourcesComplementPromise.finally(()=>{this.loadCoreResourcesComplementPromise=undefined})}return this.loadCoreResourcesComplementPromise};m.prototype._createUi5Component=function(e){if(e.manifest===undefined){e.manifest=false}return o.create(e)};m.prototype._shouldLoadCoreExt=function(e){let t=true;if(e.hasOwnProperty("loadCoreExt")){t=e.loadCoreExt}return t};m.prototype._shouldLoadDefaultDependencies=function(e){let t=true;if(e.hasOwnProperty("loadDefaultDependencies")){t=e.loadDefaultDependencies}if(this._oServiceConfig&&this._oServiceConfig.hasOwnProperty("loadDefaultDependencies")){t=t&&this._oServiceConfig.loadDefaultDependencies}return t};m.prototype._constructAppComponentId=function(e={}){const t=e.semanticObject||null;const o=e.action||null;if(!t||!o){return null}return`application-${t}-${o}-component`};m.prototype._removeCacheBusterTokenFromUrl=function(e){const t=new RegExp("[/]~[\\w-]+~[A-Z0-9]?");return e.replace(t,"")};m.prototype._removeParametersFromUrl=function(e){if(!e){return e}const t=e.indexOf("?");if(t>=0){return e.slice(0,t)}return e};m.prototype._getParameterMap=function(e){const t=l.fromURL(e||window.location.href).mParams;const o=t["sap-xapp-state"];const n=t["sap-xapp-state-data"];delete t["sap-xapp-state"];delete t["sap-xapp-state-data"];const r={startupParameters:t};if(n){r["sap-xapp-state"]=n}if(o){r["sap-xapp-state"]=o}return r};m.prototype._loadBundle=function(t){if(!Array.isArray(t)){e.error("Ui5ComponentLoader: loadBundle called with invalid arguments");return null}return Promise.all(t.map(e=>sap.ui.loader._.loadJSResourceAsync(e))).catch(o=>{e.error(`Ui5ComponentLoader: failed to load bundle resources: [${t.join(", ")}]`);return Promise.reject(o)})};m.prototype._createComponentProperties=async function(o,i,p,l,m){const d=i.ui5ComponentName;const f=i.url;const C=i.applicationDependencies||{};const y=c.getParameterValueBoolean("sap-ushell-nocb");const h=t({},C);if(!h.asyncHints){h.asyncHints=m?{libs:u}:{}}if(l){const e=a.last("/core/customPreload/coreResourcesComplement");h.asyncHints.preloadBundles=[...h.asyncHints.preloadBundles||[],...e]}if(p){h.asyncHints.waitFor=p}if(!h.name){h.name=d}if(f){h.url=this._removeParametersFromUrl(f)}if(o){h.id=o}if(y&&h.asyncHints){r.modifyUrls(h.asyncHints,this._removeCacheBusterTokenFromUrl)}const P=h.manifest;if(typeof P==="string"&&P.length>0&&"sap.ui.fl"in n.all()){try{const[t]=await c.requireAsync(["sap/ui/fl/apply/api/FlexRuntimeInfoAPI"]);try{const e=t.getFlexVersion({reference:d});if(typeof e==="string"&&e.length>0){const t=new s(P);t.addQuery("version",e);h.manifest=t.toString()}return h}catch(t){e.error("Error when trying to get manifest version from 'sap.ui.fl.apply.api.FlexRuntimeInfoAPI'",t,"sap.ushell.services.Ui5ComponentLoader");return h}}catch(t){e.error("Error when trying to load 'sap/ui/fl/apply/api/FlexRuntimeInfoAPI'",t,"sap.ushell.services.Ui5ComponentLoader");return h}}return h};m.prototype._createComponentData=function(e){const o=e.componentData||{};const n=e.url;const r=e.applicationConfiguration;const s=e.reservedParameters;const a=t({startupParameters:{}},o);if(r){a.config=r}if(s){a.technicalParameters=s}const i=n&&n.indexOf("?")>=0;if(i){const e=this._getParameterMap(n);a.startupParameters=e.startupParameters;if(e["sap-xapp-state-data"]){a["sap-xapp-state"]=e["sap-xapp-state-data"]}if(e["sap-xapp-state"]){a["sap-xapp-state"]=e["sap-xapp-state"]}}if(e.getExtensions){a.getExtensions=e.getExtensions;delete e.getExtensions}if(e.oPostMessageInterface){a.oPostMessageInterface=e.oPostMessageInterface;delete e.oPostMessageInterface}return a};m.prototype._logAnyApplicationDependenciesMessages=function(t,o){if(!Array.isArray(o)){return}o.forEach(o=>{let n=String.prototype.toLowerCase.call(o.severity||"");n=["trace","debug","info","warning","error","fatal"].indexOf(n)!==-1?n:"error";e[n](o.text,o.details,t)})};m.prototype._setDefaultDependencies=function(e){u=e};m.hasNoAdapter=false;return m});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserDefaultParameterPersistence", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/ushell/Container","sap/ushell/utils"],function(e,t,a,s,i){"use strict";const r=["value","extendedValue","noEdit","alwaysAskPlugin","_shellData","pluginData"];function n(e){this._oAdapter=e;this._oData={}}n.prototype._cleanseValue=function(e){const a=t({},e);for(const e in a){if(a.hasOwnProperty(e)&&r.indexOf(e)<0){delete a[e]}}return a};n.prototype._getSystemContextFallback=async function(){e.warning("UserDefaultParameterPersistence: The systemContext was not provided, using defaultSystemContext as fallback");const t=await s.getServiceAsync("ClientSideTargetResolution");return t.getSystemContext()};n.prototype.loadParameterValue=async function(t,s){if(!s){s=await this._getSystemContextFallback()}const r=a.get([s.id,t],this._oData);if(r!==undefined){return r}const n=await i.promisify(this._oAdapter.loadParameterValue(t,s));const o=this._cleanseValue(n);a.set([s.id,t],o,this._oData);e.debug(`[UserDefaults] Fetched "${t}" for SystemContext=${s.id} from Persistence`,JSON.stringify(o,null,2));return o};n.prototype.saveParameterValue=async function(t,s,r){if(!r){r=await this._getSystemContextFallback()}if(!s){return i.promisify(this.deleteParameter(t,r))}const n=this._cleanseValue(s);if(s&&s.noStore===true){e.debug(`[UserDefaults] Skipped Save "${t}" for SystemContext=${r.id}`,"noStore=true");return}e.debug(`[UserDefaults] Saving "${t}" for SystemContext=${r.id} to Persistence`,JSON.stringify(n,null,2));a.set([r.id,t],n,this._oData);return i.promisify(this._oAdapter.saveParameterValue(t,n,r))};n.prototype.deleteParameter=async function(t,a){if(!a){a=await this._getSystemContextFallback()}if(this._oData[a.id]){e.debug(`[UserDefaults] Deleting "${t}" for SystemContext=${a.id} from Persistence`);delete this._oData[a.id][t]}return i.promisify(this._oAdapter.deleteParameter(t,a))};n.prototype.getStoredParameterNames=async function(e){if(!e){e=await this._getSystemContextFallback()}const t=await i.promisify(this._oAdapter.getStoredParameterNames(e));return t.sort()};n.hasNoAdapter=false;return n},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserDefaultParameters", ["sap/base/Log","sap/base/util/deepClone","sap/base/util/deepEqual","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/ui/base/EventProvider","sap/ushell/utils","sap/ushell/Container"],function(e,t,a,r,s,n,i,o){"use strict";const u="valueStored";const l=["value","noEdit","noStore","extendedValue","alwaysAskPlugin"];function c(c,d,f,m){this._aPlugins=[];this._oUserDefaultParametersNames={};this._oWasParameterPersisted={};const h=new n;function g(e){const t=typeof e.getComponentData==="function"&&e.getComponentData()&&e.getComponentData().config&&e.getComponentData().config["sap-priority"]||0;if(typeof t!=="number"||isNaN(t)){return 0}return t}this._insertPluginOrdered=function(e,t){const a=g(t);for(let r=0;r<e.length&&t;++r){const s=g(e[r]);if(t&&a>s){e.splice(r,0,t);t=undefined}}if(t){e.push(t)}return e};this.registerPlugin=function(e){this._aPlugins=this._insertPluginOrdered(this._aPlugins,e)};this._getUserDefaultValueFromPlugin=async function(t,a,r,s){if(typeof t.getUserDefault==="function"){try{const n=await i.promisify(t.getUserDefault(a,s,r));const o=n||s;const u=this._getComponentNameOfPlugin(t);e.debug(`[UserDefaults] Fetched "${a}" for SystemContext="${r.id}" from Plugin="${u}"`,JSON.stringify(o,null,2));return o}catch{e.error(`invocation of getUserDefault("${a}") for plugin ${this._getComponentNameOfPlugin(t)} rejected.`,null,"sap.ushell.services.UserDefaultParameters")}}return s};this._iterateOverPluginsToGetDefaultValue=async function(e,t,a){await this._loadPlugins();return this._aPlugins.reduce(async(t,r)=>{const s=await t;return this._getUserDefaultValueFromPlugin(r,e,a,s)},Promise.resolve(t))};this._getStoreDate=function(){return(new Date).toString()};this._storeValue=async function(t,a,r,s){if(r&&a.extendedValue){try{const e=await o.getServiceAsync("ClientSideTargetResolution");const n=await e.getUserDefaultParameterNames(s);const i=this._extractKeyArrays(n);const u=i.extended.indexOf(t)<0;return this._saveParameterValue(t,a,r,u,s)}catch{e.error(`Cannot save value for ${t}. One or more plugins could not be loaded.`)}}return this._saveParameterValue(t,a,r,false,s)};this._saveParameterValue=async function(e,a,s,n,i){if(n){a.extendedValue=undefined}if(s&&this._valueIsEmpty(a)){a=undefined;this._oWasParameterPersisted[e]=false}else{a._shellData=r({storeDate:this._getStoreDate()},a._shellData)}try{const t=await o.getServiceAsync("UserDefaultParameterPersistence");await t.saveParameterValue(e,a,i)}catch{}const l={parameterName:e,parameterValue:t(a||{}),systemContext:i};h.fireEvent(u,l);return e};this._getPersistedValue=async function(e,t){const a=await o.getServiceAsync("UserDefaultParameterPersistence");return a.loadParameterValue(e,t)};this._valueIsEmpty=function(e){return!e||!e.value&&!e.extendedValue};this._haveSameMembersValue=function(e,t,r){return r.every(r=>e[r]===t[r]||a(e[r],t[r]))};this._getUserDefaultParameterNames=function(e){if(!this._oUserDefaultParametersNames[e.id]){this._oUserDefaultParametersNames[e.id]=new Promise(async t=>{const a=await o.getServiceAsync("ClientSideTargetResolution");const r=await a.getUserDefaultParameterNames(e);const s=this._extractKeyArrays(r);const n=s.extended;const i=s.allParameters;const u=this._arrayToObject(i);t({aAllParameterNames:i,aExtendedParameterNames:n,oMetadataObject:u})})}return this._oUserDefaultParametersNames[e.id]};this._isSupportedParameterName=async function(t,a){const r=await this._getUserDefaultParameterNames(a);if(!r.aAllParameterNames||r.aAllParameterNames.indexOf(t)===-1){e.error(`The given parameter "${t}" is not part of the list of parameters for the given system context.`);return false}return true};this.hasRelevantMaintainableParameters=async function(e){try{const t=await this._getUserDefaultParameterNames(e);if(!s(t)&&t.aAllParameterNames){const a=await Promise.all(t.aAllParameterNames.map(async t=>{try{const a=await this.getValue(t,e);if(a&&!a.hasOwnProperty("noEdit")){return true}}catch{}return false}));return a.some(e=>e)}}catch{}return false};this.getValue=async function(a,r){const s=await this._isSupportedParameterName(a,r);if(!s){return{value:undefined}}const n=await this._getPersistedValue(a,r).then(e=>{this._oWasParameterPersisted[a]=true;return e||{}}).catch(()=>({value:undefined}));const i=t(n);const o=!i._shellData&&this._valueIsEmpty(i)||i.noStore||i.alwaysAskPlugin;if(!o){return i}const u=await this._iterateOverPluginsToGetDefaultValue(a,n,r);if(!this._oWasParameterPersisted[a]||!this._haveSameMembersValue(i,u,l)){this._oWasParameterPersisted[a]=true;await this._storeValue(a,u,false,r).catch(t=>{e.error(t.message)})}return u};this._addParameterValuesToParameters=async function(e,t,a){await Promise.all(t.map(async t=>{const r=await this.getValue(t,a);e[t].valueObject=r}));return e};this._arrayToObject=function(e){const t={};e.forEach(e=>{t[e]={}});return t};this._getComponentNameOfPlugin=function(e){try{return e.getMetadata().getComponentName()||""}catch(e){return"'name of plugin could not be determined'"}};this._getEditorDataAndValue=async function(t,a,s,n){const o=await Promise.all(this._aPlugins.map(async t=>{if(typeof t.getEditorMetadata==="function"){try{const e=t.getEditorMetadata(s,n);const a=await i.promisify(e);return a}catch(t){e.error(`Error invoking getEditorMetaData on plugin: ${t}${t.stack}`,null,"sap.ushell.services.UserDefaultParameters");return}}}));const u=[];const l=o.reverse().reduce((e,a)=>{t.forEach(t=>{if(a?.[t]?.editorMetadata){e[t].editorMetadata=a[t].editorMetadata}});return e},s);t.forEach(e=>{if(!(l[e]&&l[e].editorMetadata)){u.push(e)}});const c=await this._addParameterValuesToParameters(l,t,n);const d=r({},c);a.forEach(e=>{if(d[e]){d[e].editorMetadata=d[e].editorMetadata||{};d[e].editorMetadata.extendedUsage=true}});const f=Object.keys(d).splice(0);f.forEach(e=>{let t;if(d[e].valueObject&&d[e].valueObject.noEdit===true){delete d[e];t=u.indexOf(e);if(t>=0){u.splice(t,1)}}});if(u.length>0){e.error(`The following parameter names have no editor metadata and thus likely no configured plugin:\n"${u.join('",\n"')}".`)}return d};this.editorGetParameters=async function(e){const t=await this._getUserDefaultParameterNames(e);const{aAllParameterNames:a,aExtendedParameterNames:r,oMetadataObject:s}=t;if(s.length===0){return{}}await this._loadPlugins();return this._getEditorDataAndValue(a,r,s,e)};this._extractKeyArrays=function(e){const t={simple:e&&e.simple&&Object.keys(e.simple).sort()||[],extended:e&&e.extended&&Object.keys(e.extended).sort()||[]};const a=t.extended.filter(e=>t.simple.indexOf(e)<0);t.allParameters=t.simple.concat(a).sort();return t};this.editorSetValue=async function(e,t,a){await this._storeValue(e,t,true,a)};this.attachValueStored=function(e){h.attachEvent(u,e)};this.detachValueStored=function(e){h.detachEvent(u,e)};this._loadPlugins=async function(){const t=await o.getServiceAsync("PluginManager");try{await i.promisify(t.loadPlugins("UserDefaults"))}catch{e.error("One or more plugins could not be loaded");throw new Error("Initialization of plugins failed")}}}c.hasNoAdapter=true;return c},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserInfo", ["sap/base/Log","sap/ushell/Config","sap/ushell/User","sap/ushell/Container"],function(e,t,r,i){"use strict";var s={themeList:null,languageList:null,userSettingList:null};function n(t,r){this.getId=function(){return i.getUser().getId()};this.getFirstName=function(){return i.getUser().getFirstName()};this.getLastName=function(){return i.getUser().getLastName()};this.getFullName=function(){return i.getUser().getFullName()};this.getEmail=function(){return i.getUser().getEmail()};this.getUser=function(){return i.getUser()};this.getShellUserInfo=function(){return Promise.resolve({id:this.getId(),email:this.getEmail(),firstName:this.getFirstName(),lastName:this.getLastName(),fullName:this.getFullName()})};this.getCalendarWeekNumberingList=function(){return t.getCalendarWeekNumberingList?.()};this.getThemeList=function(){if(s.themeList){return s.themeList}var r=t.getThemeList();s.themeList=r;r.fail(function(){e.error("getThemeList failed")});return r};this.updateUserPreferences=function(){var r=t.updateUserPreferences(i.getUser());r.fail(function(){e.error("updateAttributes: ")});return r};this.getLanguageList=function(){if(s.languageList){return s.languageList}var r=t.getLanguageList();s.languageList=r;r.fail(function(){e.error("getLanguageList failed")});return r};this.getUserSettingList=function(){if(s.userSettingList){return s.userSettingList}var r=t.getUserProfilePropertyValueLists();s.userSettingList=r;r.fail(function(){e.error("getUserProfilePropertyValueLists failed")});return r};this.getUserSettingListEditSupported=function(){if(typeof t.getUserProfilePropertyValueLists!=="undefined"){return true}return false}}n.hasNoAdapter=false;return n},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserRecents", ["sap/base/util/ObjectPath","sap/ushell/services/UserRecents/RecentsList","sap/ushell/services/UserRecents/RecentActivity","sap/ushell/services/UserRecents/RecentAppsUsage","sap/ushell/utils/UrlParsing"],function(e,t,c,o,a){"use strict";function s(){this.oRecentSearches=new t("RecentSearches",10,s._compareSearchItems);this.oRecentDataSources=new t("RecentDataSources",6,s._compareDataSources);this.oRecentApps=new t("RecentApps",6,s._compareApps);this.oRecentActivity=new c(500);this.oAppsUsage=new o}s._compareSearchItems=function(e,t){let c=false;if(e.oDataSource&&t.oDataSource){if(e.oDataSource.objectName&&t.oDataSource.objectName){c=e.sTerm===t.sTerm&&e.oDataSource.objectName.value===t.oDataSource.objectName.value}if(!e.oDataSource.objectName&&!t.oDataSource.objectName){c=e.sTerm===t.sTerm}}if(!e.oDataSource&&!t.oDataSource){c=e.sTerm===t.sTerm}return c};s.prototype.noticeSearch=s.prototype.addSearchActivity;s.prototype.addSearchActivity=async function(e){await this.oRecentSearches.newItem(e);return this.oRecentSearches.getRecentItems()};s.prototype.getRecentSearches=function(){return this.oRecentSearches.getRecentItems()};s._compareDataSources=function(e,t){if(e.objectName&&t.objectName){return e.objectName.value===t.objectName.value}return false};s.prototype.noticeDataSource=s.prototype.addDataSourceActivity;s.prototype.addDataSourceActivity=async function(t){const c=e.get("objectName.value",t)||"";const o=e.get("objectName",t)||"";const a=c.toLowerCase()==="$$all$$";const s=o.toLowerCase()==="$$all$$";if(!a&&!s){await this.oRecentDataSources.newItem(t)}return this.oRecentDataSources.getRecentItems()};s.prototype.getRecentDataSources=function(){return this.oRecentDataSources.getRecentItems()};s._compareApps=function(e,t){return e.semanticObject===t.semanticObject&&e.action===t.action};s.prototype.noticeApp=s.prototype.addAppActivity;s.prototype.addAppActivity=async function(e){await this.oRecentApps.newItem(e);return this.oRecentApps.getRecentItems()};s.prototype.getRecentApps=function(){return this.oRecentApps.getRecentItems()};s.prototype.addActivity=async function(e){await this.oRecentActivity.newItem(e);return this.oRecentActivity.getRecentItems()};s.prototype.clearRecentActivities=async function(){await this.oRecentActivity.clearAllActivities()};s.prototype.getRecentActivity=function(){return this.oRecentActivity.getRecentItems()};s.prototype.getFrequentActivity=function(){return this.oRecentActivity.getFrequentItems()};s.prototype.addAppUsage=async function(e){const t=a.getBasicHash(e);await this.oAppsUsage.addAppUsage(t)};s.prototype.getAppsUsage=function(){return this.oAppsUsage.getAppsUsage()};s.hasNoAdapter=true;return s});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserRecents/RecentActivity", ["sap/base/Log","sap/base/util/extend","sap/ui/Device","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/library","sap/ushell/services/UserRecents/UserRecentsBase","sap/ushell/utils/UrlParsing"],function(e,t,n,r,s,i,a,c){"use strict";const o=i.AppType;const u=a.extend("sap.ushell.services.UserRecents.RecentActivity",{constructor:function(e){a.call(this,"RecentActivity",e)}});const p=["#Shell-launchURL","#Shell-startGUI","#Shell-startIntent","#Shell-startURL","#Shell-startWDA"];u.MAX_DAYS=30;u.ITEM_COUNT=30;u._compareItems=function(e,t){const n=e.appType===t.appType;const r=e.url===t.url;const s=e.appId===t.appId;const i=e.title===t.title;if(n){if(e.appType!==o.APP){return r}if(s&&p.includes(e.appId)){return i}return s}else if(e.appType===o.APP||t.appType===o.APP){return s&&r}return false};u.prototype._updateIfAlreadyIn=function(e,n,r){return e.recentUsageArray.some(s=>{const{oItem:i,aUsageArray:c}=s;if(u._compareItems(i,n)){const u=n.appType===i.appType;const p=n.appType===o.APP;if(u||!p){t(i,n);i.timestamp=r;s.iTimestamp=r;s.mobile=undefined;s.tablet=undefined;s.desktop=undefined;s[this._getCurrentDevice()]=true;const l=i.appType===o.APP;if(u||!p&&!l){c[c.length-1]+=1;s.iCount+=1}e.recentUsageArray.sort(a.itemSorter)}return true}return false})};u.prototype._insertNew=function(e,t,n,r){t.timestamp=n;if(r){t.icon=r}const s={oItem:t,iTimestamp:n,aUsageArray:[1],iCount:1,mobile:undefined,tablet:undefined,desktop:undefined};s[this._getCurrentDevice()]=true;if(e.recentUsageArray.length===this.iMaxItems){e.recentUsageArray.pop()}e.recentUsageArray.unshift(s)};u.prototype.newItem=async function(e){const t=Date.now();const n=this._getActivityIcon(e.appType,e.icon);const r=this.getDayFromDate(new Date);const i=await this._getRecentActivitiesFromLoadedData();if(r!==i.recentDay){this._addNewDay(i);i.recentDay=r}const a=this._updateIfAlreadyIn(i,e,t);if(!a){this._insertNew(i,e,t,n)}await this.save(i);s.emit("newUserRecentsItem",i)};u.prototype._getActivityIcon=function(e,t){if(t){return t}switch(e){case o.SEARCH:return"sap-icon://search";case o.COPILOT:return"sap-icon://co";case o.URL:return"sap-icon://internet-browser";default:return"sap-icon://product"}};u.prototype.clearAllActivities=async function(){await this.save([]);s.emit("userRecentsCleared",Date.now())};u.prototype._getCurrentDevice=function(){if(n.system.desktop){return"desktop"}else if(n.system.tablet){return"tablet"}return"mobile"};u.prototype._filterRecentItems=async function(e){const t=this.getDayFromDate(new Date);const n=this._getCurrentDevice();const s=await this._getRecentActivitiesFromLoadedData();let i=false;if(t!==s.recentDay){this._addNewDay(s);s.recentDay=t;i=true}const a=s.recentUsageArray.reduce((e,t,r)=>{if(t[n]===undefined){const{url:n}=t.oItem;const s=c.getShellHash(n);if(s){e.intent.push({index:r,hash:s})}else{e.url.push({index:r})}}return e},{url:[],intent:[]});const o=i||a.url.length>0||a.intent.length>0;a.url.forEach(({index:e})=>{const t=s.recentUsageArray[e];t[n]=true});if(a.intent.length>0){const e=a.intent.map(({hash:e})=>({target:{shellHash:e}}));const t=await r.getServiceAsync("Navigation");const i=await t.isNavigationSupported(e);a.intent.forEach(({index:e},t)=>{const{supported:r}=i[t];const a=s.recentUsageArray[e];a[n]=r})}if(o){await this.save(s)}const u=this._getRecentItemsForCurrentDevice(s);if(e){return u.slice(0,e)}return u};u.prototype._getRecentItemsForCurrentDevice=function(e){const t=this._getCurrentDevice();return e.recentUsageArray.filter(e=>e[t])};u.prototype.getRecentItems=async function(){const e=await this._filterRecentItems(u.ITEM_COUNT);return e.map(e=>e.oItem)};u.prototype.getFrequentItems=async function(){const e=await this._filterRecentItems();let t=0;let n=[];let r=e[0]?new Date(e[0].iTimestamp).toDateString():"";for(let s=0;s<e.length&&t<u.MAX_DAYS;s++){const i=e[s];if(i.iCount>1){n.push(i)}const a=new Date(i.iTimestamp).toDateString();if(r!==a){t++;r=a}}n.sort(function(e,t){return t.iCount-e.iCount});n=n.slice(0,u.ITEM_COUNT);return n.map(e=>e.oItem)};u.prototype._addNewDay=function(e){e.recentUsageArray.forEach(function(e){if(!e.aUsageArray){e.aUsageArray=[];e.iCount=0}const{aUsageArray:t}=e;t.push(0);if(t.length>u.MAX_DAYS){e.iCount-=t[0];t.shift()}})};u.prototype._getRecentActivitiesFromLoadedData=async function(){const t=await this.load();let n;let r;if(Array.isArray(t)){r=t}else{n=t}const s=n||{recentDay:null,recentUsageArray:r||[]};s.recentUsageArray=s.recentUsageArray.filter(function(t){const n=!!t?.oItem?.url;if(!n){e.error("FLP Recent Activity",t,"is not valid. The activity is removed from the list.")}return n});return s};return u});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserRecents/RecentAppsUsage", ["sap/base/Log","sap/ushell/services/UserRecents/UserRecentsBase","sap/ushell/utils"],function(e,s,t){"use strict";const a=s.extend("sap.ushell.services.UserRecents.RecentAppsUsage",{constructor:function(){s.call(this,"AppsUsage")}});a.MAX_DAYS=30;a.prototype.init=async function(){const s=this.getDayFromDate(new Date);let t=false;if(!t||s!==this.oAppsUsageData.recentDay){t=true;try{const e=await this.load();this.oAppsUsageData=e||{recentDay:null,recentAppsUsageMap:{}};await this.calculateInitialUsage(s);return this.oAppsUsageData}catch(s){e.error("Load data in Init failed",s,"sap.ushell.services.UserRecents.RecentAppsUsage");return Promise.reject(s)}}};a.prototype.calculateInitialUsage=async function(e){if(e!==this.oAppsUsageData.recentDay){this._addNewDay();this.oAppsUsageData.recentDay=e;this._cleanUnusedHashes();await this.save(this.oAppsUsageData)}};a.prototype.addAppUsage=async function(e){if(!t.validHash(e)){return Promise.reject("Non valid hash")}await this.init();const s=this.oAppsUsageData.recentAppsUsageMap[e]||[];if(s.length===0){s[0]=1}else{s[s.length-1]+=1}this.oAppsUsageData.recentAppsUsageMap[e]=s;await this.save(this.oAppsUsageData)};a.prototype.getAppsUsage=async function(){await this.init();const e={};let s,t;let a=true;for(const p in this.oAppsUsageData.recentAppsUsageMap){e[p]=this._getHashUsageSum(p);if(a){s=t=e[p];a=false}else if(e[p]<t){t=e[p]}else if(e[p]>s){s=e[p]}}return{usageMap:e,maxUsage:s,minUsage:t}};a.prototype._addNewDay=function(){let e;for(const s in this.oAppsUsageData.recentAppsUsageMap){e=this.oAppsUsageData.recentAppsUsageMap[s];e[e.length]=0;if(e.length>a.MAX_DAYS){e=e.shift()}}};a.prototype._cleanUnusedHashes=function(){let e;for(const s in this.oAppsUsageData.recentAppsUsageMap){e=this._getHashUsageSum(s);if(e===0){delete this.oAppsUsageData.recentAppsUsageMap[s]}}};a.prototype._getHashUsageSum=function(e){const s=this.oAppsUsageData.recentAppsUsageMap[e];return s.reduce(function(e,s){return e+s},0)};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserRecents/RecentsList", ["sap/ushell/services/UserRecents/UserRecentsBase"],function(t){"use strict";const e=t.extend("sap.ushell.services.UserRecents.RecentsList",{constructor:function(e,s,n){t.apply(this,arguments);this._compareItems=n}});e.prototype._updateIfAlreadyIn=function(t,e,s){return t.some(t=>{let n;if(this._compareItems(t.oItem,e)){t.oItem=e;t.iTimestamp=s;t.iCount+=1;n=true}else{n=false}return n})};e.prototype._insertNew=function(e,s,n){const i={oItem:s,iTimestamp:n,iCount:1};if(e.length===this.iMaxItems){e.sort(t.itemSorter);e.pop()}e.push(i)};e.prototype.newItem=async function(t){const e=Date.now();const s=await this.load()||[];const n=this._updateIfAlreadyIn(s,t,e);if(!n){this._insertNew(s,t,e)}await this.save(s)};e.prototype.getRecentItems=async function(){const e=await this.load()||[];e.sort(t.itemSorter);const s=e.slice(0,this.iMaxItems);return s.map(t=>t.oItem)};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/UserRecents/UserRecentsBase", ["sap/base/Log","sap/ui/base/Object","sap/ushell/Container"],function(e,t,o){"use strict";const r=t.extend("sap.ushell.services.UserRecents.UserRecentsBase",{constructor:function(e,t){this.iMaxItems=t;this.sPersonalizationItemName=e;if(!r.prototype.oContainerPromise){r.prototype.oContainerPromise=o.getServiceAsync("PersonalizationV2").then(async e=>{const t="sap.ushell.services.UserRecents";const o={};const r=await e.getContainer(t,o);await r.load();return r})}}});r.prototype.load=async function(){try{const e=await r.prototype.oContainerPromise;return e.getItemValue(this.sPersonalizationItemName)}catch(t){e.error("Personalization service does not work:",t);return Promise.reject(t)}};r.prototype.save=async function(t){try{const e=await r.prototype.oContainerPromise;e.setItemValue(this.sPersonalizationItemName,t);await e.save()}catch(t){e.error("Personalization service does not work:",t);return Promise.reject(t)}};r.itemSorter=function(e,t){return t.iTimestamp-e.iTimestamp};r.prototype.getDayFromDate=function(e){return`${e.getUTCFullYear()}/${e.getUTCMonth()+1}/${e.getUTCDate()}`};return r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/VisualizationDataProvider", ["sap/ushell/resources","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/utils/chipsUtils","sap/base/Log","sap/ushell/Config"],function(i,jQuery,t,e,a,o){"use strict";var r=t.DisplayFormat;function n(){this.S_COMPONENT_NAME="sap.ushell.services.VisualizationDataProvider";this._init.apply(this,arguments)}n.prototype._init=function(i){this.oLaunchPageAdapter=i;this.oCatalogTilePromise=null};n.prototype._getCatalogTileIndex=function(){if(this._oCatalogTileIndexPromise){return this._oCatalogTileIndexPromise}var i=this.oLaunchPageAdapter;return i._getCatalogTileIndex()};n.prototype._getCatalogTiles=function(){if(this.oCatalogTilePromise){return this.oCatalogTilePromise}var i=this.oLaunchPageAdapter;this.oCatalogTilePromise=new Promise(function(t,e){i.getCatalogs().then(function(a){var o=[];var r=[];var n=[];var l={};for(var s=0;s<a.length;s++){if(typeof a[s].ui2catalog==="undefined"||a[s].ui2catalog.getType()!=="REMOTE"){o.push(i.getCatalogTiles(a[s]).then(function(i){r.push(i)}))}}jQuery.when.apply(null,o).done(function(){n=[].concat.apply([],r);for(var e=0;e<n.length;e++){const t=i.getStableCatalogTileId(n[e]);l[t]=n[e]}t(l)}).fail(e)}).fail(e)});return this.oCatalogTilePromise};n.prototype.getVisualizationData=function(){var t;var e=this.oLaunchPageAdapter;if(this._oVisualizationDataPromise){return this._oVisualizationDataPromise}this._oVisualizationDataPromise=Promise.all([this._getCatalogTiles(),this._getCatalogTileIndex()]).then(function(i){var a=i[0];t=i[1];var o=[];var r=[];Object.keys(a).forEach(function(i){var t=a[i];e.setTileVisible(t,false);r.push(e.isTileIntentSupportedAsync(t).then(function(t){if(t===true){o.push(i)}}))});return Promise.all(r).then(function(){var i=o.map(function(i){var t=a[i];if(!e.getCatalogTilePreviewTitle(t)){return new Promise(function(i,a){e.getCatalogTileViewControl(t).done(i).fail(a)}).then(function(e){return{id:i,catalogTile:t,view:e}})}return Promise.resolve({id:i,catalogTile:t})});return Promise.all(i)})}).then(function(i){return i.reduce(function(i,o){var r=o.id;var n=o.view;var l=o.catalogTile;try{var s=l.getChip().getBaseChipId();i.visualizations[r]={vizType:s,title:e.getCatalogTilePreviewTitle(l),subTitle:e.getCatalogTilePreviewSubtitle(l),icon:e.getCatalogTilePreviewIcon(l),info:e.getCatalogTilePreviewInfo(l),keywords:e.getCatalogTileKeywords(l),size:e.getCatalogTileSize(l),indicatorDataSource:e.getCatalogTilePreviewIndicatorDataSource(l),url:e.getCatalogTileTargetURL(l),numberUnit:e.getCatalogTileNumberUnit(l),isCustomTile:e.isCustomTile&&e.isCustomTile(l)};if(t[r]){i.visualizations[r]._instantiationData={platform:"ABAP",simplifiedChipFormat:false,chip:t[r]}}if(i.visualizations[r].isCustomTile&&!i.vizTypes[s]){i.vizTypes[s]={id:s,url:undefined,vizOptions:{displayFormats:this._getDisplayFormats(l,i.visualizations[r].size)},tileSize:i.visualizations[r].size}}}catch(i){a.error(`Could not get visualization data from tile ${r}`,i,this.S_COMPONENT_NAME)}if(n){n.destroy()}return i}.bind(this),{visualizations:{},vizTypes:{},page:{}})}.bind(this)).catch(function(t){var e={component:this.S_COMPONENT_NAME,description:i.i18n.getText("VisualizationDataProvider.CannotLoadData"),detail:t};return Promise.reject(e)}.bind(this));return this._oVisualizationDataPromise};n.prototype._getDisplayFormats=function(i,t){var e=["tile"];var a="tile";var o=i.getContract("types");if(o){e=o.getAvailableTypes();a=o.getDefaultType()}return{supported:this._mapDisplayFormats(e,t),default:this._mapDisplayFormats([a],t)[0]}};n.prototype._mapDisplayFormats=function(i,t){var e={tile:r.Standard,tilewide:r.StandardWide,link:r.Compact,flat:r.Flat,flatwide:r.FlatWide};return i.map(function(i){i=e[i];if(i===r.Standard&&t==="1x2"){return r.StandardWide}return i})};n.prototype.loadVizType=function(i){var t={chipId:i};return e.loadChipInstanceFromSimplifiedChip(t).then(function(t){var a=e.getTileSize(t);return{id:i,url:undefined,vizOptions:{displayFormats:this._getDisplayFormats(t,a)},tileSize:a}}.bind(this)).catch(function(t){a.error("The chipInstance '"+i+"' could not be loaded: ",t)})};n.hasNoAdapter=false;return n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/VisualizationInstantiation", ["sap/ushell/ui/launchpad/VizInstance","sap/ushell/ui/launchpad/VizInstanceAbap","sap/ushell/ui/launchpad/VizInstanceCdm","sap/ushell/ui/launchpad/VizInstanceLaunchPage","sap/ushell/ui/launchpad/VizInstanceLink","sap/m/library","sap/ushell/library","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations"],function(e,t,a,i,n,o,r,d,s,l){"use strict";var c=o.LoadState;var u=r.DisplayFormat;function p(){}p.prototype.instantiateVisualization=function(o){var r;var p=d.get("_instantiationData.platform",o);var f={vizRefId:o.id,title:o.title,subtitle:o.subtitle,icon:o.icon,keywords:o.keywords,instantiationData:o._instantiationData,indicatorDataSource:o.indicatorDataSource,dataSource:o.dataSource,contentProviderId:o.contentProviderId,contentProviderLabel:o.contentProviderLabel,vizConfig:o.vizConfig,supportedDisplayFormats:o.supportedDisplayFormats,displayFormat:o.displayFormatHint,numberUnit:o.numberUnit,dataHelpId:o.vizId,preview:o.preview};if(f.indicatorDataSource){f.indicatorDataSource.ui5object=true}if((p==="ABAP"||p==="CDM")&&f.displayFormat===u.Compact){this._cleanInstantiationDataForLink(f);p="LINK"}if(p==="ABAP"){r=new t(f)}else if(p==="CDM"){r=new a(f)}else if(p==="LINK"){r=new n(f)}if(p==="LAUNCHPAGE"){r=new i(f)}if(!r){return new e({state:c.Failed})}r.setTargetURL(o.targetURL);if(p!=="LINK"){r.setInfo(o.info)}if(l.isStandardVizType(o.vizType)){try{r.load().then(function(){s.emit("VizInstanceLoaded",o.id)})}catch(e){r.setState(c.Failed);s.emit("VizInstanceLoaded",o.id)}}else{r.setState(c.Loading);s.once("CoreResourcesComplementLoaded").do(function(){try{r.load(true).then(function(){r.setState(c.Loaded)})}catch(e){r.setState(c.Failed)}})}return r};p.prototype._cleanInstantiationDataForLink=function(e){delete e.info;delete e.icon;delete e.keywords;delete e.instantiationData;delete e.dataSource;delete e.contentProviderId;delete e.contentProviderLabel;delete e.vizConfig;delete e.numberUnit;delete e.indicatorDataSource;delete e.preview};p.hasNoAdapter=true;return p});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_AppState/AppStatePersistencyMethod", ["sap/base/Log"],function(t){"use strict";function e(){this.PersonalState="PersonalState";this.ACLProtectedState="ACLProtectedState";this.PublicState="PublicState";this.AuthorizationProtectedState="AuthorizationProtectedState"}t.error("sap/ushell/services/_AppState/AppStatePersistencyMethod is deprecated and will be removed in an upcoming release!");return new e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig", ["sap/ushell/Config","sap/ushell/System","sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig"],function(e,t,r){"use strict";var a={};var o=[{contentProviderName:"featured",adapter:"sap.ushell.adapters.cdm.v3.StaticGroupsAdapter",configSwitch:"/core/home/featuredGroup/enable",system:{alias:"",platform:"cdm"},configHandler:function(){var t=e.last("/core/shell/enableRecentActivity")&&e.last("/core/shell/model/showRecentActivity"),a=t&&e.last("/core/home/featuredGroup/frequentCard"),o=t&&e.last("/core/home/featuredGroup/recentCard");return r.getMockAdapterConfig(a,o)}}];a._getConfigAdapters=function(){o.forEach(function(e){e.system=new t(e.system)});return o};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig", ["sap/ushell/resources"],function(e){"use strict";var t={},a=e.i18n.getText("featuredGroup.title"),i=e.i18n.getText("recentActivities"),n=e.i18n.getText("frequentActivities"),r=e.i18n.getText("top",[4]),s={_version:"3.0.0",site:{identification:{version:"3.0",id:"c9dcc1f3-dec0-4db4-91d3-639bf38d91ce",title:"Featured Group",description:"Sample site for featured group cards"},payload:{groupsOrder:["FeaturedGroupCards"]}},catalogs:{},vizTypes:{"sap.ushell.Card":{"sap.app":{id:"sap.ushell.Card",type:"card",applicationVersion:{version:"1.0.0"}},"sap.ui":{deviceTypes:{desktop:true,tablet:true,phone:true}}}},visualizations:{FrequentCard:{vizType:"sap.ushell.Card",businessApp:"fin.cash.bankmaster.manage.BusinessApp",target:{appId:"fin.cash.bankmaster.manage",inboundId:"Bank-manage",parameters:{}},vizConfig:{"sap.flp":{columns:"4",rows:"4"},"sap.app":{id:"FrequentCard",type:"card"},"sap.card":{extension:"module:sap/ushell/ui/cards/FrequentActivitiesExtension",data:{extension:{method:"getData"}},type:"List",header:{title:n,status:{text:r},actions:[{type:"Navigation",parameters:{openUI:"FrequentActivities"}}]},content:{maxItems:4,item:{title:{value:"{Name}"},description:{value:"{Description}"},highlight:"{Highlight}",icon:{src:"{Icon}",label:"icon"},actions:[{type:"Navigation",enabled:"{Enabled}",parameters:{title:"{Name}",url:"{Url}",intentSemanticObject:"{Intent/SemanticObject}",intentAction:"{Intent/Action}",intentAppRoute:"{Intent/AppSpecificRoute}",intentParameters:"{Intent/Parameters}"}}]}}}}},RecentCard:{vizType:"sap.ushell.Card",businessApp:"fin.cash.bankmaster.manage.BusinessApp",target:{appId:"fin.cash.bankmaster.manage",inboundId:"Bank-manage",parameters:{}},vizConfig:{"sap.flp":{columns:"4",rows:"4"},"sap.app":{id:"RecentCard",type:"card"},"sap.card":{extension:"module:sap/ushell/ui/cards/RecentActivitiesExtension",type:"List",data:{extension:{method:"getData"}},header:{title:i,status:{text:r},actions:[{type:"Navigation",parameters:{openUI:"RecentActivities"}}]},content:{maxItems:4,item:{title:{label:"{{title_label}}",value:"{Name}"},description:{label:"{{description_label}}",value:"{Description}"},icon:{src:"{Icon}",label:"icon"},highlight:"{Highlight}",actions:[{type:"Navigation",enabled:"{Enabled}",parameters:{title:"{Name}",url:"{Url}",intentSemanticObject:"{Intent/SemanticObject}",intentAction:"{Intent/Action}",intentAppRoute:"{Intent/AppSpecificRoute}",intentParameters:"{Intent/Parameters}"}}]}}}}}},applications:{},groups:{FeaturedGroupCards:{identification:{id:"FeaturedGroupCards",title:a},contentProvider:"featured",isFeatured:true,payload:{locked:true,tiles:[{id:"frequentCard",vizId:"FrequentCard",contentProvider:"featured"},{id:"recentCard",vizId:"RecentCard",contentProvider:"featured"}],links:[],groups:[]}}},systemAliases:{}};t.getMockAdapterConfig=function(e,t){var a=s.groups.FeaturedGroupCards.payload.tiles,i=s.visualizations;for(var n=0;n<a.length;n++){var r=a[n],p=!e&&r.vizId==="FrequentCard",o=!t&&r.vizId==="RecentCard";if(p||o){delete i[r.vizId];a.splice(n,1);n--}}return s};return t},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_CrossApplicationNavigation/utils", ["sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/Log","sap/ushell/utils/UrlParsing"],function(e,t,r,a){"use strict";var n={};n.extractGetLinksParameterOptions=function(e){return n.parseGetLinksParameters(e).filter(function(e){return Object.keys(e.options).length>0}).map(function(e){return{name:e.name,options:e.options}})};n.extractGetLinksParameterDefinition=function(e){return n.parseGetLinksParameters(e).reduce(function(e,t){e[t.name]=t.value;return e},{})};n.parseGetLinksParameters=function(e){if(Object.prototype.toString.apply(e)!=="[object Object]"){return[]}var t=JSON.parse(JSON.stringify(e));return Object.keys(t).map(function(e){var r=t[e];var a={};if(Object.prototype.toString.apply(r)==="[object Object]"){r=r.value;delete t[e].value;a=t[e]}return{name:e,value:r,options:a}})};n.safeParseToObject=function(e){try{return JSON.parse(e)}catch(t){r.error("Cannot parse the given string to object",e)}return null};n.createAppStateFromData=function(e){r.error("Deprecated API call of '_CrossApplicationNavigation.utils.createAppStateFromData'. Please use 'createAppStateFromDataAsync' instead",null,"sap.ushell.services._CrossApplicationNavigation.utils");var t=sap.ushell.Container.getService("AppState");var a=t.createEmptyAppState(null);a.setData(e);a.save();return a.getKey()};n.createAppStateFromDataAsync=function(e){return sap.ushell.Container.getServiceAsync("AppState").then(function(t){var r=t.createEmptyAppState(null);r.setData(e);r.save();return r.getKey()})};n.extractParameter=function(i,s){var c;var p=null;if(typeof i==="string"){if(i.indexOf(s+"=")===-1){return{intent:i,data:null}}var o=a.parseShellHash(i);if(!o){return{intent:i,data:null}}p=o.params[s];delete o.params[s];c=a.constructShellHash(o);return{intent:c,data:p}}if(e(i)){var u=t.get("target.shellHash",i);if(typeof u==="string"){var l=n.extractParameter(u,s);i.target.shellHash=l.intent;return{intent:i,data:l.data}}var f=i.params;if(f&&f[s]){const e=f[s];p=typeof e==="string"?[e]:e;delete f[s]}return{intent:i,data:p}}r.error("Invalid input parameter","expected string or object");return{intent:i}};n.addXAppStateFromParameter=function(e,t){var r=n.extractParameter(e,t);var a=r.intent;var i=r.data&&r.data[0];if(!i){return}var s=n.safeParseToObject(i);if(!s){return}var c=n.createAppStateFromData(s);n.injectParameter(a,"sap-xapp-state",c)};n.addXAppStateFromParameterAsync=function(e,t){var r=n.extractParameter(e,t);var a=r.intent;var i=r.data&&r.data[0];if(!i){return Promise.resolve()}var s=n.safeParseToObject(i);if(!s){return Promise.resolve()}return n.createAppStateFromDataAsync(s).then(function(e){n.injectParameter(a,"sap-xapp-state",e)})};n.injectParameter=function(e,r,i){if(typeof e==="string"){var s=a.parseShellHash(e);s.params[r]=i;return a.constructShellHash(s)}if(Object.prototype.toString.apply(e)==="[object Object]"){var c=t.get("target.shellHash",e);if(typeof c==="string"){e.target.shellHash=n.injectParameter(c,r,i);return e}if(!e.params){e.params={}}e.params[r]=i}return e};n._injectParameters=function(e){var t=e.inject;var r=e.injectEmptyString||{};var a=e.type;var i=e.args;function s(e,t){return e||e===""&&t}if(a.isPlainObject(i)){if(i.target&&i.target.shellHash){if(typeof i.target.shellHash==="string"){i.target.shellHash=n._injectParameters({inject:t,injectEmptyString:r,type:e.type,args:i.target.shellHash})}return i}var c=Object.keys(t).reduce(function(e,a){var n=t[a];var i=r[a]===true;if(s(n,i)&&typeof e==="string"){var c=new RegExp("[&]"+a);var p=!c.test(e);if(p){var o=e?"&":"";e+=o+a+"="+n}}else if(s(n,i)&&!e.hasOwnProperty(a)){e[a]=n}return e},i.params||{});if(c&&Object.keys(c).length>0){i.params=c}return i}var p=i;if(p){Object.keys(t).forEach(function(e){var a=t[e];var n=r[e]===true;var i=new RegExp("[?&]"+e);var c=!i.test(p);if(s(a,n)&&c){var o=p.indexOf("?")>-1?"&":"?";p+=o+e+"="+a}})}return p};n.injectStickyParameters=function(e){r.error("Deprecated API call of '_CrossApplicationNavigation.utils.injectStickyParameters'. Please use 'injectStickyParametersAsync' instead",null,"sap.ushell.services._CrossApplicationNavigation.utils");var t=sap.ushell.Container.getService("AppLifeCycle");return n._injectStickyParameters(e,t)};n.injectStickyParametersAsync=function(e){return sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(t){return n._injectStickyParameters(e,t)})};n._injectStickyParameters=function(e,t){if(!t||Object.keys(t).length<=0){return e.args}var r=t.getCurrentApplication();if(!r||Object.keys(r).length<=0){return e.args}var a=e.appLifeCycle;var i=e.technicalParameters;var s=i.getParameters({sticky:true}).reduce(function(e,t){var n=t.name;var s=r.componentInstance;var c=r.applicationType;var p;if(c==="UI5"){p={}}else{p=a.getCurrentApplication().container}var o=i.getParameterValueSync(n,s,p,c);var u=t.stickyName||n;e[u]=o;return e},{});var c={type:e.type,inject:s,args:e.args};return n._injectParameters(c)};return n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/ContextContainer", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ui/core/format/DateFormat","sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,n,i,o,jQuery,r){"use strict";function a(){this._init.apply(this,arguments)}a.prototype._init=function(n,i,r,a,s){this._oService=n;this._sContainerKey=r;this._oAdapterContainer={};this._oScope=a||t.adjustScope(a);this._aLoadedKeys=[];this._oUnmodifiableContainer=undefined;var p;if(!(s instanceof o)&&s!==undefined){throw new Error("oComponent passed must be a UI5 Component or must be undefined")}if(s&&s.getMetadata&&s.getMetadata().getComponentName){p=s.getMetadata().getComponentName()}this.clear();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new e.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this._oAdapterContainer=i.getAdapterContainer(this._sContainerKey,this._oScope,p);return this};a.prototype.getValidity=function(){return this._oScope.validity};a.prototype._getValidity=function(){return this._oScope.validity};a.prototype.clear=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new e.Map};a.prototype.load=function(){var t={},n,i=this;t=new jQuery.Deferred;if(!this._sContainerKey){throw new e.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this.clear();n=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,t);n.always(function(){i._oAdapterContainer.load().fail(function(){t.reject()}).done(function(){i._copyFromAdapter();if(i._isExpired()){i.clear()}t.resolve()})});return t.promise()};a.prototype._copyFromAdapter=function(){var e=this,t;t=e._oAdapterContainer.getItemKeys().splice(0);t.forEach(function(t){e._oItemMap.put(t,JSON.stringify(e._oAdapterContainer.getItemValue(t)))});this._aLoadedItemKeys=e._oItemMap.keys().splice(0)};a.prototype._isExpired=function(){var e,t,o;if(this._getValidity()===Infinity||this._getValidity()===0){return false}t=this._getItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE);e=i.getDateInstance({pattern:n.S_ABAPTIMESTAMPFORMAT});o=e.format(this._getNow(),true);return t&&o>t};a.prototype._getNow=function(){return new Date};a.prototype._copyToAdapterUpdatingValidity=function(){var e=[],o=[],r=this,a,s,p,_;if(this._clear){e=this._oAdapterContainer.getItemKeys().splice(0);e.forEach(function(e){r._oAdapterContainer.delItem(e)});this._clear=false}if(this._getValidity()===Infinity||this._getValidity()===0){this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_SCOPE);this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE);this._delItemInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_STORAGE)}else{s=i.getDateInstance({pattern:n.S_ABAPTIMESTAMPFORMAT});a=this._getNow();_=s.format(a,true);p=s.format(new Date(a.getTime()+this._getValidity()*6e4),true);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_SCOPE,this._oScope);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_EXPIRE,p);this._setItemValueInternal(n.S_ADMIN_PREFIX,n.S_ITEMKEY_STORAGE,_)}e=this._oItemMap.keys();e.forEach(function(e){r._oAdapterContainer.setItemValue(e,t.cloneToObject(r._oItemMap.get(e)))});o=this._aLoadedItemKeys.filter(function(t){return!(e.indexOf(t)>-1)});o.forEach(function(e){r._oAdapterContainer.delItem(e)})};a.prototype.save=function(){var e,t,n=this;this._copyToAdapterUpdatingValidity();e=new jQuery.Deferred;t=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,e);t.always(function(){try{n._oAdapterContainer.save().fail(function(){e.reject()}).done(function(){e.resolve()})}catch(t){e.reject()}});return e.promise()};a.prototype.saveDeferred=function(e){var t,n,i=this;this._copyToAdapterUpdatingValidity();t=new jQuery.Deferred;n=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,t);function o(){n.always(function(){try{i._oAdapterContainer.save().fail(function(){t.reject()}).done(function(){t.resolve()})}catch(e){t.reject()}})}t._sapFnSave=o;t._sapTimeoutId=setTimeout(o,e);return t.promise()};a.prototype.flush=function(){var e,t;this._copyToAdapterUpdatingValidity();e=new jQuery.Deferred;t=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,e);t.fail(function(){e.reject()}).done(function(){e.resolve()});return e.promise()};a.prototype.getItemKeys=function(){var e=this._oItemMap.keys().filter(function(e){return e.indexOf(n.S_ITEM_PREFIX)===0});return e.map(function(e){return e.replace(n.S_ITEM_PREFIX,"","")})};a.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0)};a.prototype.getItemValue=function(e){return this._getItemValueInternal(n.S_ITEM_PREFIX,e)};a.prototype._getItemValueInternal=function(e,n){if(typeof n!=="string"||typeof e!=="string"){return undefined}return t.cloneToObject(this._oItemMap.get(e+n))};a.prototype.containsItem=function(e){if(typeof e!=="string"){return undefined}return this._oItemMap.containsKey(n.S_ITEM_PREFIX+e)};a.prototype.setItemValue=function(e,t){this._setItemValueInternal(n.S_ITEM_PREFIX,e,t)};a.prototype._setItemValueInternal=function(t,n,i){if(typeof n!=="string"||typeof t!=="string"){throw new e.Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.Personalization"," ")}if(n.length>40){r.error('Personalization Service item key/variant set name ("'+n+'") should be less than 40 characters [current :'+n.length+"]")}this._oItemMap.put(t+n,JSON.stringify(i))};a.prototype.delItem=function(e){this._delItemInternal(n.S_ITEM_PREFIX,e)};a.prototype._delItemInternal=function(e,t){if(typeof t!=="string"){return undefined}if(typeof e!=="string"){return undefined}this._oItemMap.remove(e+t)};a.prototype.getKey=function(){return this._sContainerKey.substring(n.S_CONTAINER_PREFIX.length)};a.prototype.getUnmodifiableContainer=function(){var t=this;if(!this._oUnmodifiableContainer){this._oUnmodifiableContainer=function(){var n={};["clear","delItem","flush","load","save","saveDeferred","setItemValue"].forEach(function(t){n[t]=function(t){throw new e.Error("Function "+t+" can't be called on unmodifiable container","ContextContainer"," ")}.bind(undefined,t)});["containsItem","getItemKeys","getItemValue","getUnmodifiableContainer"].forEach(function(e){if(t[e]){n[e]=t[e].bind(t)}});return n}()}return this._oUnmodifiableContainer};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/PersonalizationContainer", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariantSet","sap/ui/thirdparty/jquery"],function(t,e,n,r,jQuery){"use strict";function i(e,n){this._sContainerKey=n;this._oAdapterContainer={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];var r={},i=this;this._init();r=new jQuery.Deferred;if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new t.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this._oAdapterContainer=e.getAdapterContainer(this._sContainerKey);this.load().fail(function(){r.reject()}).done(function(){r.resolve(i)});return r.promise()}i.prototype._init=function(){this._oVariantSetMap={};this._oItemMap={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];this._oVariantSetMap=new t.Map;this._oItemMap=new t.Map};i.prototype.load=function(){var i={},a=[],o=[],s=[],p=[],u=this;function _(t){var r=[],i=[];r=t.filter(function(t){return t.indexOf(n.S_ITEM_PREFIX)!==0});if(r.length===0){return t}i=t.filter(function(t){return t.indexOf(n.S_ITEM_PREFIX)===0});r.forEach(function(t){var r={},a="";a=n.S_ITEM_PREFIX+t;r=e.clone(u._oAdapterContainer.getItemValue(t));u._oAdapterContainer.setItemValue(a,r);u._oAdapterContainer.delItem(t);if(i&&Array.prototype.indexOf.call(i,a)===-1){i.push(a)}});return i}i=new jQuery.Deferred;if(!this._sContainerKey){throw new t.Error("Invalid container key: sap.ushell.services.Personalization"," ")}this._init();this._oAdapterContainer.load().fail(function(){i.reject()}).done(function(){a=u._oAdapterContainer.getItemKeys().splice(0);o=a.filter(function(t){return t.indexOf(n.S_VARIANT_PREFIX)===0});o.forEach(function(t){var e={};e=new r(t,u._oAdapterContainer);u._oVariantSetMap.put(t,e)});s=a.filter(function(t){return t.indexOf(n.S_VARIANT_PREFIX)!==0});p=_(s);p.forEach(function(t){u._oItemMap.put(t,e.clone(u._oAdapterContainer.getItemValue(t)))});u._aLoadedVariantSetKeys=u._oVariantSetMap.keys().splice(0);u._aLoadedItemKeys=u._oItemMap.keys().splice(0);i.resolve()});return i.promise()};i.prototype.save=function(){var t,e;this._serializeVariantSets();this._serializeItems();t=new jQuery.Deferred;function n(){t.resolve()}function r(){t.reject()}try{e=this._oAdapterContainer.save();e.fail(r);e.done(n)}catch(e){t.reject()}return t.promise()};i.prototype.getItemKeys=function(){return this._oItemMap.keys().map(function(t){return t.replace(n.S_ITEM_PREFIX,"","")})};i.prototype.getItemValue=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.get(n.S_ITEM_PREFIX+t)};i.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.containsKey(n.S_ITEM_PREFIX+t)};i.prototype.setItemValue=function(e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ")}this._oItemMap.put(n.S_ITEM_PREFIX+e,r)};i.prototype.delItem=function(t){if(typeof t!=="string"){return undefined}if(this.containsItem(t)){this._oItemMap.remove(n.S_ITEM_PREFIX+t)}};i.prototype._serializeItems=function(){var t=[],n=[],r=this;t=this._oItemMap.keys();t.forEach(function(t){r._oAdapterContainer.setItemValue(t,e.clone(r._oItemMap.get(t)))});n=this._aLoadedItemKeys.filter(function(e){return!(t.indexOf(e)>-1)});n.forEach(function(t){r._oAdapterContainer.delItem(t)})};i.prototype.getVariantSetKeys=function(){var t=[],e=[];e=this._oVariantSetMap.keys();t=e.map(function(t){return t.replace(n.S_VARIANT_PREFIX,"","")});return t};i.prototype.containsVariantSet=function(t){return this._oVariantSetMap.containsKey(n.S_VARIANT_PREFIX+t)};i.prototype.getVariantSet=function(t){var e,r={};e=n.S_VARIANT_PREFIX+t;r=this._oVariantSetMap.get(e);return r};i.prototype.addVariantSet=function(e){var i={},a={},o="";if(this.containsVariantSet(e)){throw new t.Error("Container already contains a variant set with key '"+e+"': sap.ushell.services.Personalization"," ")}o=n.S_VARIANT_PREFIX+e;i={currentVariant:null,variants:{}};this._oAdapterContainer.setItemValue(o,i);a=new r(o,this._oAdapterContainer);this._oVariantSetMap.put(o,a);return a};i.prototype._serializeVariantSets=function(){var t=[],n=[],r=this;t=this._oVariantSetMap.keys();t.forEach(function(t){var n={},i={};n=r._oVariantSetMap.get(t);i=n._serialize();r._oAdapterContainer.setItemValue(t,e.clone(i))});n=this._aLoadedVariantSetKeys.filter(function(e){return!(t.indexOf(e)>-1)});n.forEach(function(t){r._oAdapterContainer.delItem(t)})};i.prototype.delVariantSet=function(t){var e="";e=n.S_VARIANT_PREFIX+t;this._oVariantSetMap.remove(e);return this._oAdapterContainer.delItem(e)};return i});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/PersonalizationContainerVariant", ["sap/ushell/utils"],function(t){"use strict";function e(e,r,n){if(typeof e!=="string"){throw new t.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ")}if(typeof r!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(n&&typeof n!=="object"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}this._oVariantKey=e;this._oVariantName=r;this._oItemMap=new t.Map;this._oItemMap.entries=n||{}}e.prototype.getVariantKey=function(){return this._oVariantKey};e.prototype.getVariantName=function(){return this._oVariantName};e.prototype.getItemValue=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.get(t)};e.prototype.setItemValue=function(e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ")}return this._oItemMap.put(e,r)};e.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.containsKey(t)};e.prototype.getItemKeys=function(){return this._oItemMap.keys()};e.prototype.delItem=function(t){if(typeof t!=="string"){return undefined}return this._oItemMap.remove(t)};e.prototype._serialize=function(){var t=[],e={},r={},n=this;e.name=this.getVariantName();t=this._oItemMap.keys();t.forEach(function(t){r[t]=n.getItemValue(t)});e.variantData=r;return e};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/PersonalizationContainerVariantSet", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/PersonalizationContainerVariant"],function(t,a,r){"use strict";function e(e,n){var i,s,o,p,u;this._sVariantSetKey=e;this._oAdapterContainer=n;this._oVariantNameMap=new t.Map;this._oVariantMap=new t.Map;i=a.clone(this._oAdapterContainer.getItemValue(e));if(i.hasOwnProperty("currentVariant")){this._sCurrentVariantKey=i.currentVariant}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}if(i.hasOwnProperty("variants")){for(s in i.variants){if(i.variants.hasOwnProperty(s)){o=i.variants[s].name;p=i.variants[s].variantData;if(this._oVariantNameMap.containsKey(o)){throw new t.Error("Variant name already exists: sap.ushell.services.Personalization"," ")}else{this._oVariantNameMap.put(o,s);u=new r(s,o,p);this._oVariantMap.put(s,u)}}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return this}e.prototype.getCurrentVariantKey=function(){return this._sCurrentVariantKey};e.prototype.setCurrentVariantKey=function(t){this._sCurrentVariantKey=t};e.prototype.getVariantKeys=function(){return this._oVariantMap.keys()};e.prototype.getVariantNamesAndKeys=function(){return JSON.parse(JSON.stringify(this._oVariantNameMap.entries))};e.prototype.getVariant=function(t){if(typeof t!=="string"){return undefined}return this._oVariantMap.get(t)};e.prototype.getVariantKeyByName=function(t){if(typeof t!=="string"){return undefined}return this._oVariantNameMap.get(t)};e.prototype.containsVariant=function(t){if(typeof t!=="string"){return undefined}return this._oVariantMap.containsKey(t)};e.prototype.addVariant=function(a){var e=0,n="",i={};e=parseInt(this._oVariantMap.keys().sort(function(t,a){return t-a}).reverse()[0],10);n=isNaN(e)?"0":(e+1).toString();if(this._oVariantMap.containsKey(n)){throw new t.Error("Variant key '"+n+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ")}if(typeof a!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(this._oVariantNameMap.containsKey(a)){throw new t.Error("Variant name '"+a+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this._oVariantNameMap.get(a)+"' New key: '"+n+"') ': sap.ushell.services.Personalization"," ")}i=new r(n,a);this._oVariantMap.put(n,i);this._oVariantNameMap.put(a,n);return i};e.prototype._serialize=function(){var t=[],a={},r={},e=this;a.currentVariant=this._sCurrentVariantKey;t=this.getVariantKeys();t.forEach(function(t){var a={};a=e._oVariantMap.get(t);r[t]=a._serialize()});a.variants=r;return a};e.prototype.delVariant=function(t){var a=this._oVariantMap.get(t);if(a){this._oVariantNameMap.remove(a.getVariantName());this._oVariantMap.remove(t)}};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/Personalizer", ["sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,jQuery,t){"use strict";function n(t,n,r,i,o){this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter=n;this._oService=t;this._oScope=i;this._oComponent=o;if(!r||!r.container||!r.item||typeof r.container!=="string"||typeof r.item!=="string"){throw new e.Error("Invalid input for oPersId: sap.ushell.services.Personalization"," ")}this._sPersContainer=r.container;this._sPersItem=r.item}n.prototype._getContainer=function(e){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oService.getContainer(e,this._oScope,this._oComponent)}return this._oGetContainerPromise};n.prototype.getPersData=function(){var e={},n=this;e=new jQuery.Deferred;this._getContainer(this._sPersContainer).fail(function(){e.reject()}).done(function(t){e.resolve(t.getItemValue(n._sPersItem))});e.fail(function(){t.error("Failed to get personalization data for Personalizer container: "+n._sPersContainer)});return e.promise()};n.prototype.setPersData=function(e){var n={},r=this;n=new jQuery.Deferred;this._getContainer(this._sPersContainer).fail(function(){n.reject()}).done(function(t){t.setItemValue(r._sPersItem,e);t.save().fail(function(){n.reject()}).done(function(){n.resolve()})});n.fail(function(){t.error("Fail to set Personalization data for Personalizer container: "+r._sPersContainer)});return n.promise()};n.prototype.delPersData=function(){var e={},n=this,r;e=new jQuery.Deferred;this._getContainer(this._sPersContainer).fail(function(){e.reject()}).done(function(t){t.delItem(n._sPersItem);t.save().fail(function(){e.reject()}).done(function(){e.resolve()})});r=e.promise();r.fail(function(){t.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer)});return r};return n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/TransientPersonalizer", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(){this._oValue=undefined}e.prototype.getPersData=function(){var e;e=new jQuery.Deferred;e.resolve(this._oValue);return e.promise()};e.prototype.setPersData=function(e){var t;t=new jQuery.Deferred;this._oValue=e;t.resolve();return t.promise()};e.prototype.delPersData=function(){var e;e=new jQuery.Deferred;this._oValue=undefined;e.resolve();return e.promise()};e.prototype.setValue=function(e){this._oValue=e};e.prototype.getValue=function(){return this._oValue};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/Variant", ["sap/ushell/utils","sap/ushell/services/_Personalization/utils"],function(t,a){"use strict";function e(a,e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ")}if(typeof r!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}this._oVariantSet=a;this._sVariantKey=e;this._sVariantName=r}e.prototype.getVariantKey=function(){return this._sVariantKey};e.prototype.getVariantName=function(){return this._sVariantName};e.prototype.setVariantName=function(a){var e=this._oVariantSet._getVariantSet(),r;if(typeof a!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(this._oVariantSet.getVariantKeyByName(a)!==undefined){throw new t.Error("Variant with name '"+a+"' already exists in variant set '"+this._oVariantSet._sVariantSetKey+"': sap.ushell.services.Personalization"," ")}if(Object.prototype.hasOwnProperty.call(e,"variants")&&Object.prototype.hasOwnProperty.call(e.variants,this._sVariantKey)){r=e.variants[this._sVariantKey];r.name=a;this._sVariantName=a;this._oVariantSet._serialize()}else{throw new t.Error("Variant does not longer exist"," ")}};e.prototype.getItemValue=function(t){if(typeof t!=="string"){return undefined}var e=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;if(!Object.prototype.hasOwnProperty.call(e,t)){return undefined}return a.clone(e[t])};e.prototype.setItemValue=function(e,r){if(typeof e!=="string"){throw new t.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ")}var i,n=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!n){throw new t.Error("Variant does not longer exist"," ")}if(!n.variantData){n.variantData={}}i=n.variantData;i[e]=a.clone(r);this._oVariantSet._serialize()};e.prototype.containsItem=function(t){if(typeof t!=="string"){return undefined}var a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(a,t)};e.prototype.getItemKeys=function(){var t=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData,a,e=[];for(a in t){if(Object.prototype.hasOwnProperty.call(t,a)){e.push(a)}}e.sort();return e};e.prototype.delItem=function(t){if(typeof t!=="string"){return undefined}var a=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete a[t];this._oVariantSet._serialize()};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/VariantSet", ["sap/ushell/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/Variant"],function(t,a,e){"use strict";function r(e,r){var n,i,s;var o=new t.Map;this._oContextContainer=r;this._sVariantSetKey=e;this._oVariantSetData=this._oContextContainer._getItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey);if(!Object.prototype.hasOwnProperty.call(this._oVariantSetData,"currentVariant")){throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"variants")){for(n in this._oVariantSetData.variants){if(Object.prototype.hasOwnProperty.call(this._oVariantSetData.variants,n)){i=this._oVariantSetData.variants[n].name;s=this._oVariantSetData.variants[n].variantData;if(o.containsKey(i)){throw new t.Error("Variant name already exists: sap.ushell.services.Personalization"," ")}else{if(typeof n!=="string"){throw new t.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ")}if(typeof i!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(s&&typeof s!=="object"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}o.put(i,n)}}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return this}r.prototype._getVariantSet=function(){return this._oVariantSetData};r.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(a.S_VARIANT_PREFIX,this._sVariantSetKey,this._oVariantSetData)};r.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant};r.prototype.setCurrentVariantKey=function(t){this._getVariantSet().currentVariant=t;this._serialize()};r.prototype.getVariantKeys=function(){var a=new t.Map,e=this._getVariantSet(this._sVariantSetKey),r;if(Object.prototype.hasOwnProperty.call(e,"variants")){for(r in e.variants){if(Object.prototype.hasOwnProperty.call(e.variants,r)){a.put(r,"dummy")}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return a.keys()};r.prototype.getVariantNamesAndKeys=function(){var a=new t.Map,e=new t.Map,r=this._getVariantSet(this._sVariantSetKey),n,i;if(Object.prototype.hasOwnProperty.call(r,"variants")){for(n in r.variants){if(Object.prototype.hasOwnProperty.call(r.variants,n)){i=r.variants[n].name;if(a.containsKey(i)){throw new t.Error("Variant name already exists: sap.ushell.services.Personalization"," ")}else{a.put(i,n)}e.put(n,"dummy")}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return a.entries};r.prototype.getVariant=function(t){if(typeof t!=="string"){return undefined}var a=this._getVariantSet(this._sVariantSetKey),r,n,i;if(Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,t)){r=a.variants[t].name;i=a.variants[t].variantData;n=new e(this,t,r,i);return n}return undefined};r.prototype.getVariantKeyByName=function(a){if(typeof a!=="string"){return undefined}var e=this._getVariantSet(this._sVariantSetKey),r;if(Object.prototype.hasOwnProperty.call(e,"variants")){for(r in e.variants){if(Object.prototype.hasOwnProperty.call(e.variants,r)){if(a===e.variants[r].name){return r}}}}else{throw new t.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ")}return undefined};r.prototype.containsVariant=function(t){var a=this._getVariantSet();if(typeof t!=="string"){return undefined}return Object.prototype.hasOwnProperty.call(a,"variants")&&Object.prototype.hasOwnProperty.call(a.variants,t)};r.prototype.addVariant=function(a){var r=[],n=0,i="",s={};r=this.getVariantKeys();n=parseInt(r.sort(function(t,a){return t-a}).reverse()[0],10);i=isNaN(n)?"0":(n+1).toString();if(r.indexOf(i)>=0){throw new t.Error("Variant key '"+i+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ")}if(typeof a!=="string"){throw new t.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ")}if(this.getVariantKeyByName(a)!==undefined){throw new t.Error("Variant name '"+a+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this.getVariantKeyByName(a)+"' New key: '"+i+"') ': sap.ushell.services.Personalization"," ")}s=new e(this,i,a);this._getVariantSet(this._sVariantSetKey).variants[i]={name:a,variantData:{}};this._serialize();return s};r.prototype.delVariant=function(t){var a;if(typeof t!=="string"){return undefined}a=this._getVariantSet();if(a&&a.variants){delete this._oVariantSetData.variants[t]}this._serialize()};return r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/constants", [],function(){"use strict";return{keyCategory:{FIXED_KEY:"FIXED_KEY",GENERATED_KEY:"GENERATED_KEY"},writeFrequency:{HIGH:"HIGH",LOW:"LOW"}}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/constants.private", [],function(){"use strict";return{S_CONTAINER_PREFIX:"sap.ushell.personalization#",S_ITEM_PREFIX:"ITEM#",S_VARIANT_PREFIX:"VARIANTSET#",S_ABAPTIMESTAMPFORMAT:"yyyyMMddHHmmss",S_ADMIN_PREFIX:"ADMIN#",S_ITEMKEY_SCOPE:"sap-ushell-container-scope",S_ITEMKEY_STORAGE:"sap-ushell-container-storageUTCTimestamp",S_ITEMKEY_EXPIRE:"sap-ushell-container-expireUTCTimestamp"}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/_Personalization/utils", ["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","sap/ui/thirdparty/jquery","sap/base/Log"],function(e,t,jQuery,r){"use strict";function n(e,t){var r;for(r in t){if(typeof t[r]!=="function"){if(t.hasOwnProperty(r)){if(r===e){return true}}}}return false}function i(e){if(e.length>40){r.error('Personalization Service container key ("'+e+'") should be less than 40 characters [current :'+e.length+"]")}return t.S_CONTAINER_PREFIX+e}function a(e,t,r){if(e&&e.validity===0){return t}return r}function u(t){var r={validity:Infinity,keyCategory:e.keyCategory.GENERATED_KEY,writeFrequency:e.writeFrequency.HIGH,clientStorageAllowed:false};if(t){r.validity=t.validity;if(r.validity===null||r.validity===undefined||typeof r.validity!=="number"){r.validity=Infinity}if(!(typeof r.validity==="number"&&(r.validity>=0&&r.validity<1e3||r.validity===Infinity))){r.liftime=Infinity}r.keyCategory=n(t.keyCategory,e.keyCategory)?t.keyCategory:r.keyCategory;r.writeFrequency=n(t.writeFrequency,e.writeFrequency)?t.writeFrequency:r.writeFrequency;if(typeof t.clientStorageAllowed==="boolean"&&(t.clientStorageAllowed===true||t.clientStorageAllowed===false)){r.clientStorageAllowed=t.clientStorageAllowed}}return r}function l(e){if(!e.lazy){return jQuery.when(e.instance)}try{return e.create.call(null)}catch(e){return(new jQuery.Deferred).reject(e).promise()}}function o(e){if(!e){return false}var t=e.getManifestObject();if(!t){return false}var r=t.getEntry("/sap.ui5/appVariantId");if(!r){return false}var n=t.getComponentName();if(r===n){return false}return true}function f(e){if(e===undefined){return undefined}try{return JSON.parse(e)}catch(e){return undefined}}function y(e){if(e===undefined){return undefined}try{return JSON.parse(JSON.stringify(e))}catch(e){return undefined}}return{adjustScope:u,cloneToObject:f,clone:y,addContainerPrefix:i,pickAdapter:a,isAppVariant:o,loadAdapter:l}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/appstate/AppState", ["sap/base/Log","sap/ui/thirdparty/jquery"],function(t,jQuery){"use strict";function e(e,n,r,a,o,h,c,p,_){this._oServiceInstance=e;this._sKey=n;this._sData=a;this._sAppName=o;this._sACHComponent=h;this._bTransient=c;this._bModifiable=r;this._sPersistencyMethod=p;this._oPersistencySettings=_;if(this._bModifiable){this.setData=function(e){try{this._sData=JSON.stringify(e)}catch(e){t.error("Data can not be serialized","sap.ushell.services.AppState.AppState");this._sData=undefined}};this.save=s.bind(this);this.delete=i.bind(this)}}function s(){var t=new jQuery.Deferred;this._oServiceInstance._saveAppState(this._sKey,this._sData,this._sAppName,this._sACHComponent,this._bTransient,this._sPersistencyMethod,this._oPersistencySettings).done(function(){t.resolve()}).fail(function(e){t.reject(e)});return t.promise()}function i(){var t=new jQuery.Deferred;this._oServiceInstance._deleteAppState(this._sKey).done(function(){t.resolve()}).fail(function(e){t.reject(e)});return t.promise()}e.prototype.getData=function(){var e;if(this._sData===undefined||this._sData===""){return undefined}try{e=JSON.parse(this._sData)}catch(e){t.error("Could not parse ["+this._sData+"]"+e)}return e};e.prototype.getPersistencyMethod=function(){return this._sPersistencyMethod};e.prototype.getPersistencySettings=function(){return this._oPersistencySettings};e.prototype.getKey=function(){return this._sKey};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/appstate/AppStatePersistencyMethod", [],function(){"use strict";function t(){this.PersonalState="PersonalState";this.ACLProtectedState="ACLProtectedState";this.PublicState="PublicState";this.AuthorizationProtectedState="AuthorizationProtectedState"}return new t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/appstate/LimitedBuffer", [],function(){"use strict";function t(t){this.index=-1;this.capacity=t;this.array=[]}t.prototype._clear=function(){this.array=[];this.index=-1};t.prototype.addAsHead=function(t,i,e,a){this.index=(this.index+1)%this.capacity;this.array[this.index]={key:t,value:i,persistencyMethod:e,persistencySettings:a}};t.prototype.getByKey=function(t){var i,e;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===t){return this.array[e]}}return undefined};t.prototype.deleteByKey=function(t){var i,e,a=false;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===t){delete this.array[e];a=true}}return a};return t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/appstate/Sequentializer", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(){this.oLastPromise=new jQuery.Deferred;this.oLastPromise.resolve()}e.prototype.addToQueue=function(e){var r=new jQuery.Deferred;this.oLastPromise.always(function(){var t=e();t.done(function(){r.resolve.apply(r,arguments)}).fail(function(){r.reject.apply(r,arguments)})});this.oLastPromise=r;return r.promise()};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/appstate/SequentializingAdapter", ["sap/ushell/services/appstate/Sequentializer"],function(e){"use strict";function t(t){this._oSequentializer=new e;this._oUnderlyingAdapter=t}t.prototype.saveAppState=function(e,t,r,n,i,p,d){var o;o=this._oUnderlyingAdapter.saveAppState.bind(this._oUnderlyingAdapter,e,t,r,n,i,p,d);return this._oSequentializer.addToQueue(o)};t.prototype.loadAppState=function(e){return this._oUnderlyingAdapter.loadAppState(e)};t.prototype.deleteAppState=function(e){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.deleteAppState){return this._oUnderlyingAdapter.deleteAppState(e)}};t.prototype.getSupportedPersistencyMethods=function(){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.getSupportedPersistencyMethods){return this._oUnderlyingAdapter.getSupportedPersistencyMethods()}return[]};return t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/appstate/WindowAdapter", ["sap/ushell/services/appstate/LimitedBuffer","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,jQuery){"use strict";var r=500;var a=18;function o(){this._init.apply(this,arguments)}o.prototype._init=function(t,a,p){var n=p&&p.config&&p.config.initialAppStates||{};var i=p&&p.config&&p.config.initialAppStatesPromise;this._oServiceInstance=t;this._oBackendAdapter=a;if(!o.prototype.data){o.prototype.data=new e(r)}if(i){i.then(function(e){if(typeof e==="object"){Object.keys(e).forEach(function(t){o.prototype.data.addAsHead(t,e[t])})}})}Object.keys(n).forEach(function(e){o.prototype.data.addAsHead(e,n[e])})};o.prototype.saveAppState=function(e,t,r,a,p,n,i,s){this.sComponent=p;var d=new jQuery.Deferred;o.prototype.data.addAsHead(e,r,i,s);if(this._oBackendAdapter&&!n){return this._oBackendAdapter.saveAppState(e,t,r,a,p,i,s)}d.resolve();return d.promise()};o.prototype._checkIfTransient=function(e){return e.startsWith("TAS")};o.prototype.loadAppState=function(e){var r=new jQuery.Deferred,p=o.prototype.data.getByKey(e);if(p){setTimeout(function(){r.resolve(e,p.value,p.persistencyMethod,p.persistencySettings)},0);return r.promise()}try{if(window.opener&&window.opener.sap&&window.opener.sap.ushell){var n=window.opener.sap.ui.require("sap/ushell/services/AppState").WindowAdapter.prototype.data.getByKey(e);if(n){r.resolve(e,n.value);return r.promise()}}}catch(e){if(e.code===a){t.warning("AppState.js - loadAppState: Opener is not of the same origin and cannot be used for AppState resolving.")}else{t.warning("AppState.js - loadAppState: Opener is a FLP but AppState could not get resolved from there.")}}if(this._oBackendAdapter&&!this._checkIfTransient(e)){this._oBackendAdapter.loadAppState(e).done(function(e,t,a,p){o.prototype.data.addAsHead(e,t);r.resolve(e,t,a,p)}).fail(r.reject.bind(r));return r.promise()}r.reject("AppState.js - loadAppState: Application State could not be loaded");return r.promise()};o.prototype.deleteAppState=function(e){var t=new jQuery.Deferred;o.prototype.data.deleteByKey(e);if(this._oBackendAdapter&&this._oBackendAdapter.deleteAppState&&!this._checkIfTransient(e)){return this._oBackendAdapter.deleteAppState(e)}t.resolve();return t.promise()};o.prototype.getSupportedPersistencyMethods=function(){if(this._oBackendAdapter&&this._oBackendAdapter.getSupportedPersistencyMethods){return this._oBackendAdapter.getSupportedPersistencyMethods()}return[]};return o});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/services/personalization/VariantSetAdapter", ["sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/VariantSet"],function(t,n,e){"use strict";function r(t){this._oContextContainer=t}r.prototype.save=function(){return this._oContextContainer.save()};r.prototype.getVariantSetKeys=function(){var n=this._oContextContainer._getInternalKeys();var e=[];e=n.map(function(n){return n.replace(t.S_VARIANT_PREFIX,"","")});return e};r.prototype.containsVariantSet=function(t){return this.getVariantSetKeys().indexOf(t)>=0};r.prototype.getVariantSet=function(n){var r=this._oContextContainer._getItemValueInternal(t.S_VARIANT_PREFIX,n);if(!r){return undefined}return new e(n,this._oContextContainer)};r.prototype.addVariantSet=function(r){var a={};var i={};if(this.containsVariantSet(r)){throw new n.Error("Container already contains a variant set with key '"+r+"': sap.ushell.services.Personalization"," ")}a={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(t.S_VARIANT_PREFIX,r,a);i=new e(r,this._oContextContainer);return i};r.prototype.delVariantSet=function(n){this._oContextContainer._delItemInternal(t.S_VARIANT_PREFIX,n)};return r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/BackNavigation", ["sap/ui/core/library","sap/ui/core/routing/History","sap/ushell/Container"],(t,i,e)=>{"use strict";const a=t.routing.HistoryDirection;function n(){let t=false;let n;this.isBackNavigation=function(){return i.getInstance().getDirection()===a.Backwards};this.navigateBack=async function(){if(t===true){window.history.back()}else if(n){n()}else{const t=await e.getServiceAsync("Navigation");const i=await t.isInitialNavigation();if(i){return t.navigate({target:{shellHash:"#"},writeHistory:false})}window.history.back()}};this.setNavigateBack=function(i){t=false;n=i};this.resetNavigateBack=function(){t=true;n=undefined};this.restore=function(i){t=i.bDefaultBrowserBack;n=i.fnCustomBackNavigation};this.store=function(i){i.bDefaultBrowserBack=t;i.fnCustomBackNavigation=n};this.reset=function(){t=false;n=undefined}}return new n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/BaseState", ["sap/base/util/deepClone","sap/ushell/state/StrategyFactory","sap/ushell/state/StateManager/LaunchpadState"],function(t,a,e){"use strict";class s{#t={};constructor(a){Object.values(e).forEach(e=>{this.#t[e]=t(a)})}updateState(t,e,s,r){if(!t){Object.keys(this.#t).forEach(t=>{a.perform(this.#t[t],e,s,r)});return}a.perform(this.#t[t],e,s,r)}getStateData(a,e){const s=t(this.#t[e]);return s}}return s});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/BindingHelper", ["sap/ui/core/Element"],function(t){"use strict";class e{overrideUpdateAggregation(t){t.updateAggregation=this.#t}#t(t){const g=this.getBindingInfo(t).model;const n=[...this.getAggregation(t)||[]];n.forEach(e=>{this.removeAggregation(t,e,true)});this.getBinding(t).getCurrentContexts().forEach(n=>{const i=e.prototype.factory("",n);if(!i){return}i.setBindingContext(n,g);this.addAggregation(t,i,true)});this.invalidate()}factory(e,g){return t.getElementById(g.getObject())}}return new e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/ContentDensity", ["sap/ui/Device","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/services/AppConfiguration","sap/ushell/state/StateManager"],function(t,e,n,i,s){"use strict";const a=s.Operation;class o{#t=()=>{throw new Error("ContentDensity is not initialized")};#e=false;#n=[];constructor(){this.#i()}async init(){if(this.#e){return}this.#e=true;this.#t=this.#s.bind(this);this.#n.push(n.on("toggleContentDensity").do(this.#t));const t=await e.getServiceAsync("AppLifeCycle");t?.attachAppLoaded(this.#t)}#i(){const t=this.#a();const e=this.#o();if(t.length===1){s.updateAllBaseStates("application.contentDensity",a.Set,t[0]);s.updateCurrentState("application.contentDensity",a.Set,t[0]);return}s.updateAllBaseStates("application.contentDensity",a.Set,e);s.updateCurrentState("application.contentDensity",a.Set,e)}async resetContentDensity(){await this.#s()}async#s(){const t=await this.#c();const e=this.#p();const n=this.#a();const i=this.#o();if(n.length===1){s.updateAllBaseStates("application.contentDensity",a.Set,n[0]);s.updateCurrentState("application.contentDensity",a.Set,n[0]);return}const o=t||i;let c;if(e.length===1){c=e[0]}else{c=o}s.updateAllBaseStates("application.contentDensity",a.Set,o);s.updateCurrentState("application.contentDensity",a.Set,c)}#o(){if(t.support.touch){return"cozy"}return"compact"}#a(){if(!t.system.desktop&&!t.system.combi){return["cozy"]}return["cozy","compact"]}#p(){const t=i.getMetadata();const e=[];if(t.cozyContentDensity){e.push("cozy")}if(t.compactContentDensity){e.push("compact")}return e}async#c(){const t=await e.getServiceAsync("UserInfo");const n=t.getUser();return n?.getContentDensity()}async reset(){const t=await e.getServiceAsync("AppLifeCycle");t?.detachAppLoaded(this.#t);this.#n.forEach(t=>t.off());this.#t=()=>{throw new Error("Favicon is not initialized")};this.#e=false;this.#n=[]}}return new o});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/ControlManager", ["sap/base/util/deepClone","sap/ui/core/Element"],function(t,o){"use strict";class r{#t=[];#o=[];#r=[];addManagedControl(t,o,r){if(!this.#t.includes(t)){this.#t.push(t)}if(r==="home"){o=false}const s=this.#r.includes(t);const e=this.#o.includes(t);if(o&&!e){this.#o.push(t)}else if(!o&&!s){this.#r.push(t)}}updateManagedControl(t,o){if(!this.#t.includes(t)){return}this.addManagedControl(t,o)}removeManagedControl(t){this.#t=this.#t.filter(o=>o!==t);this.#o=this.#o.filter(o=>o!==t);this.#r=this.#r.filter(o=>o!==t)}destroyManagedControls(){this.#o.forEach(t=>{if(this.#r.includes(t)){return}this.destroyManagedControl(t)});this.#o=[]}#s(){this.#t.forEach(t=>{this.destroyManagedControl(t)});this.#t=[]}destroyManagedControl(t){const r=o.getElementById(t);if(r){r.destroy()}}storeList(o={}){o.controlManager={currentControls:t(this.#o)}}restoreList(o={}){const{currentControls:r}=o.controlManager||{};if(r){this.#o=t(r)}else{this.#o=[]}}flushList(){this.#o=[]}destroyFromStorage(t={}){const{currentControls:o}=t.controlManager||{};if(Array.isArray(o)){o.forEach(t=>{this.destroyManagedControl(t)})}}reset(){this.destroy();this.#o=[];this.#r=[]}destroy(){this.#s()}}return new r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/CurrentState", ["sap/base/util/deepClone","sap/ui/base/EventProvider","sap/ushell/state/StrategyFactory"],function(t,e,a){"use strict";class s{#t=[];#e=new e;attachStateChange(...t){this.#e.attachEvent("stateChange",...t)}detachStateChange(...t){this.#e.detachEvent("stateChange",...t)}updateState(t,e,a){this.#t.push({path:t,value:a,operation:e})}flushState(){this.#t=[];this.#e.fireEvent("stateChange")}storeState(e){e.currentState={commandList:t(this.#t)}}restoreState(e){const{commandList:a}=e.currentState||{};if(a){this.#t=t(a)}else{this.#t=[]}this.#e.fireEvent("stateChange")}applyState(t){this.#t.forEach(({path:e,value:s,operation:i})=>{a.perform(t,e,i,s)})}reset(){this.destroy();this.#t=[];this.#e=new e}destroy(){this.#e.destroy()}}return new s});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/Favicon", ["sap/ui/core/Theming","sap/ui/util/Mobile","sap/ushell/Config","sap/ushell/utils"],function(e,i,t,n){"use strict";class s{#e=()=>{throw new Error("Favicon is not initialized")};#i=false;#t=[];init(){if(this.#i){return}this.#i=true;this.#e=this.#n.bind(this);e.attachApplied(this.#e);this.#t.push(t.on("/core/shell/favIcon").do(this.#e))}async#s(){let e;let i=false;const[s]=await n.getThemingParameters(["sapUiShellFavicon"]);if(s){const t=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(s);if(t){e=t[1];i=true}else if(s!=="''"&&s!=="none"){e=s}}const a=t.last("/core/shell/favIcon");if(!e&&a){e=a;i=true}if(!e){const i=sap.ui.require.toUrl("sap/ushell");e=`${i}/themes/base/img/launchpad_favicon.ico`}return{favicon:e,isCustomFavicon:i}}async#n(){const{favicon:e,isCustomFavicon:t}=await this.#s();let n;if(t){n={phone:e,"phone@2":e,tablet:e,"tablet@2":e,favicon:e,precomposed:false}}else{const i=sap.ui.require.toUrl("sap/ushell");n={phone:`${i}/themes/base/img/launchicons/phone-icon_120x120.png`,"phone@2":`${i}/themes/base/img/launchicons/phone-retina_180x180.png`,tablet:`${i}/themes/base/img/launchicons/tablet-icon_152x152.png`,"tablet@2":`${i}/themes/base/img/launchicons/tablet-retina_167x167.png`,favicon:e,precomposed:false}}i.setIcons(n)}reset(){e.detachApplied(this.#e);this.#t.forEach(e=>e.off());this.#e=()=>{throw new Error("Favicon is not initialized")};this.#i=false;this.#t=[]}}return new s});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/KeepAlive", ["sap/ushell/state/ControlManager","sap/ushell/state/CurrentState"],function(t,e){"use strict";class s{store(s){e.storeState(s);t.storeList(s)}restore(s){e.restoreState(s);t.restoreList(s)}flush(){e.flushState();t.flushList()}destroy(e){t.destroyFromStorage(e)}}return new s});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/ShellModel", ["sap/base/util/deepClone","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/utils/RestrictedJSONModel"],function(e,o,s,t){"use strict";class l{#e=new t;#o=s.createModel("/core/shell/model",o);constructor(){this.#s(this.#e)}#s(e){const o=e.refresh.bind(e);e.refresh=function e(s){if(s){throw new Error("The shell model does not support force update.")}o()}}updateModel(o){const s=e(o);this.#e._setData(s)}getModel(){return this.#e}getConfigModel(){return this.#o}reset(){this.destroy();this.#e=new t;this.#o=s.createModel("/core/shell/model",o);this.#s(this.#e)}destroy(){this.#e.destroy();this.#o.destroy()}}return new l});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StateManager", ["sap/base/Log","sap/ushell/Config","sap/ushell/state/BaseState","sap/ushell/state/ControlManager","sap/ushell/state/CurrentState","sap/ushell/state/ShellModel","sap/ushell/state/StateRules","sap/ushell/state/StateManager/LaunchpadState","sap/ushell/state/StateManager/Operation","sap/ushell/state/StateManager/ShellMode","sap/ushell/utils"],function(e,t,a,s,l,i,n,r,h,d,o){"use strict";const{Default:u,Standalone:p,Lean:g,Minimal:c}=d;class S{#e=o.deepFreeze({sideNavigation:{visible:true},sidePane:{visible:false,items:[]},toolArea:{visible:false,items:[]},rightFloatingContainer:{visible:false,items:[]},floatingContainer:{visible:false,state:"floating",dragSelector:"",items:[]},userActions:{items:[]},floatingActions:{items:[]},header:{visible:true,home:{showLogo:false},secondTitle:"",headItems:[],centralAreaElement:null,headEndItems:[]},subHeader:{items:[]},footer:{content:""},application:{title:"",titleAdditionalInformation:{headerText:"",additionalContext:"",searchTerm:"",searchScope:""},icon:"",contentDensity:"",subTitle:"",relatedApps:[],hierarchy:[]}});#t=false;#a=r.Home;#s=d.Default;#l=d.Default;#i=null;#n=l;#r=false;#h=false;#d=[];LaunchpadState=r;ShellMode=d;Operation=h;constructor(){this.#o()}#o(){const e=this.#u();this.#l=e;this.#s=e;this.#a=o.isFlpHomeIntent()?r.Home:r.App;this.#i=new a(this.#e);this.#n.attachStateChange(this.#p,this);this.#p()}init(e){if(this.#t){throw new Error("State Manager is already initialized!")}this.#t=true;n.setShellConfig(e);this.#p()}getShellMode(){return this.#l}getLaunchpadState(){return this.#a}switchState(e,t){this.#g(e);const a=t??this.#s;this.#c(a);this.#l=a;this.#a=e;this.#p()}updateBaseStates(e,t,a,s){this.#S(a);this.#f(e);if(this.#h){this.#d.push({handler:this.updateBaseStates.bind(this),args:arguments});return}e.forEach(e=>{this.#i.updateState(e,t,a,s)});this.#p()}updateAllBaseStates(e,t,a){this.updateBaseStates(Object.values(r),e,t,a)}updateCurrentState(e,t,a){this.#S(t);if(this.#h){this.#d.push({handler:this.updateCurrentState.bind(this),args:arguments});return}this.#n.updateState(e,t,a);this.#p()}refreshState(e){const t=i.getModel();const a=t.getBindings();const s=`/${e.replace(/\./g,"/")}`;const l=a.filter(e=>{const t=e.getResolvedPath();if(!t){return false}return t.startsWith(s)});l.forEach(function(e){e.refresh(true)})}addManagedControl(e,t){if(this.#h){this.#d.push({handler:this.addManagedControl.bind(this),flushHandler:(e,t)=>{s.destroyManagedControl(e)},args:arguments});return}s.addManagedControl(e,!t,this.#a)}updateManagedControl(e,t){if(this.#h){this.#d.push({handler:this.updateManagedControl.bind(this),args:arguments});return}s.updateManagedControl(e,!t)}removeManagedControl(e){if(this.#h){this.#d.push({handler:this.removeManagedControl.bind(this),args:arguments});return}s.removeManagedControl(e)}destroyManagedControls(){s.destroyManagedControls()}#p(){if(this.#h||this.#r){return}const e=this.#i.getStateData(this.#l,this.#a);this.#n.applyState(e);n.applyRules(e,this.#l,this.#a);i.updateModel(e)}#u(){let a;const s=new URLSearchParams(window.location.search);if(s.has("sap-ushell-config")){a=s.get("sap-ushell-config")}else{a=t.last("/core/state/shellMode");(()=>{if(s.has("appState")){a=s.get("appState");if(a){e.error("URL parameter 'appState' is given, but deprecated. Please use 'sap-ushell-config' instead!","sap.ushell.renderer.Renderer")}}else{a=t.last("/core/state/shellMode")}})()}a=a?.toLowerCase()??d.Default;try{this.#c(a)}catch(t){e.error(`Error occurred during validation: "${t.message}", Defaulting to default ShellMode`);a=d.Default}return a}stallChanges(){this.#h=true}applyStalledChanges(){this.#h=false;this.#r=true;this.#d.forEach(({handler:e,args:t})=>{e(...t)});this.#d=[];this.#r=false;this.#p()}discardStalledChanges(){this.#h=false;this.#d.forEach(({flushHandler:e,args:t})=>{if(e){e(...t)}});this.#d=[]}reset(){this.#n.detachStateChange(this.#p,this);this.#o();this.#t=false;this.#r=false;this.#h=false;this.#d=[]}resetAll(){n.reset();s.reset();i.reset();this.#n.reset();this.reset()}destroy(){this.#n.detachStateChange(this.#p,this);this.#n.destroy();i.destroy();s.destroy()}#c(e){if(!Object.values(d).includes(e)){throw new Error(`Invalid shell mode: ${e}`)}}#S(e){if(!Object.values(h).includes(e)){throw new Error(`Invalid operation: ${e}`)}}#g(e){if(!Object.values(r).includes(e)){throw new Error(`Invalid launchpad state: ${e}`)}}#f(e){if(!Array.isArray(e)){throw new Error("Launchpad states must be provided as an array!")}if(e.length===0){throw new Error("No launchpad states provided!")}e.forEach(e=>{this.#g(e)})}isLegacyHome(){if(this.getLaunchpadState()!==r.Home){return false}const e=[u,p,g,c];return e.includes(this.getShellMode())}}return new S});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StateManager/LaunchpadState", [],function(){"use strict";const e={Home:"home",App:"app"};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StateManager/Operation", [],function(){"use strict";const e={Add:"add",Remove:"remove",Set:"set"};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StateManager/ShellMode", [],function(){"use strict";const e={Default:"",Standalone:"standalone",Embedded:"embedded",Merged:"merged",Headerless:"headerless",Lean:"lean",Blank:"blank",Minimal:"minimal"};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StateRules", ["sap/base/Log","sap/ushell/state/StateManager/LaunchpadState","sap/ushell/state/StateManager/Operation","sap/ushell/state/StateManager/ShellMode","sap/ushell/state/StrategyFactory"],function(e,t,s,n,o){"use strict";const{Default:i,Standalone:r,Embedded:l,Merged:a,Headerless:d,Lean:m,Blank:h,Minimal:u}=n;class f{#e=null;setShellConfig(e){this.#e=e}applyRules(e,t,s){this.#t(e,t,s);this.#s(e);this.#n(e);this.#o(e);this.#i(e)}#t(e,n,f){if(n===d){o.perform(e,"header.visible",s.Set,false)}if(n===d){o.perform(e,"sideNavigation.visible",s.Set,false)}let c;if(f===t.Home){c=![d,l,a].includes(n)}else{c=![d,r,l,a].includes(n)}o.perform(e,"header.home.showLogo",s.Set,c);if(f===t.Home){o.perform(e,"header.headItems",s.Remove,"backBtn")}else{const t=[i,r,l,a,m,u].includes(n);if(!t){o.perform(e,"header.headItems",s.Remove,"backBtn")}}const p=[i,r,u,l,m,h,a].includes(n);if(!p){o.perform(e,"header.headEndItems",s.Remove,"userActionsMenuHeaderButton")}let S;if(f===t.Home){S=[i,r,u,m].includes(n)}else{S=[i,u].includes(n)}if(!S){o.perform(e,"userActions.items",s.Remove,"openCatalogBtn")}let g;if(f===t.Home){g=[i,r,u,m].includes(n)}else{g=[i,u].includes(n)}if(!g){o.perform(e,"userActions.items",s.Remove,"userSettingsBtn")}let v;if(f===t.Home){v=[i,r,u,m].includes(n)}else{v=[i,u].includes(n)}if(!v){o.perform(e,"header.headEndItems",s.Remove,"NotificationsCountButton")}}#s(t){if(!this.#e){e.warning("StateRules not initialized: Cannot move UserAction ShellHeader");return}if(this.#e.moveEditHomePageActionToShellHeader){}if(this.#e.moveAppFinderActionToShellHeader){if(t.userActions.items.includes("openCatalogBtn")){o.perform(t,"userActions.items",s.Remove,"openCatalogBtn");o.perform(t,"header.headEndItems",s.Add,"openCatalogBtn")}}if(this.#e.moveUserSettingsActionToShellHeader){if(t.userActions.items.includes("userSettingsBtn")){o.perform(t,"userActions.items",s.Remove,"userSettingsBtn");o.perform(t,"header.headEndItems",s.Add,"userSettingsBtn")}}if(this.#e.moveContactSupportActionToShellHeader){if(t.userActions.items.includes("ContactSupportBtn")){o.perform(t,"userActions.items",s.Remove,"ContactSupportBtn");o.perform(t,"header.headEndItems",s.Add,"ContactSupportBtn")}}}#n(e){if(e.subHeader.items.length>1){const t=[...e.subHeader.items];for(let n=0;n<t.length-1;n++){const i=t[n];o.perform(e,"subHeader.items",s.Remove,i)}}}#o(e){if(e.sidePane.items.length>1){const t=[...e.sidePane.items];for(let n=0;n<t.length-1;n++){const i=t[n];o.perform(e,"sidePane.items",s.Remove,i)}}}#i(e){const t=3;const n=[...e.header.headItems];if(n.length>t){for(let i=t;i<n.length;i++){const t=n[i];o.perform(e,"header.headItems",s.Remove,t)}}}reset(){this.#e=null}}return new f});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StrategyFactory", ["sap/base/util/ObjectPath","sap/ushell/state/StateManager/Operation","sap/ushell/state/StrategyFactory/DefaultStrategy","sap/ushell/state/StrategyFactory/FloatingActionsStrategy","sap/ushell/state/StrategyFactory/FloatingContainerStrategy","sap/ushell/state/StrategyFactory/HeadItemsStrategy","sap/ushell/state/StrategyFactory/HeadEndItemsStrategy","sap/ushell/state/StrategyFactory/SidePaneStrategy","sap/ushell/state/StrategyFactory/SubHeaderStrategy","sap/ushell/state/StrategyFactory/UserActionsStrategy"],function(t,e,a,r,s,n,i,o,l,y){"use strict";class d{perform(t,a,r,s){const n=this.#t(a,r);if(r===e.Add||r===e.Remove){this.#e(t,a,s,n);return}this.#a(t,a,s,n)}#e(e,a,r,s){const n=t.get(a,e);if(!n){throw new Error(`Invalid path: ${a}`)}if(!Array.isArray(n)){throw new Error(`The path ${a} does not point to an array.`)}s(n,r)}#a(e,a,r,s){let n;let i;if(a.lastIndexOf(".")<0){n=a;i=e}else{n=a.substring(a.lastIndexOf(".")+1);const r=a.substring(0,a.lastIndexOf("."));i=t.get(r,e)}if(!i||!Object.hasOwn(i,n)){throw new Error(`Invalid path: ${a}`)}s(i,n,r)}#t(t,e){let d;switch(t){case"header.headItems":d=n[e]?.bind(n);break;case"header.headEndItems":d=i[e]?.bind(i);break;case"userActions.items":d=y[e]?.bind(y);break;case"floatingActions.items":d=r[e]?.bind(r);break;case"floatingContainer.items":d=s[e]?.bind(s);break;case"sidePane.items":d=o[e]?.bind(o);break;case"subHeader.items":d=l[e]?.bind(l);break;default:}if(!d){d=a[e]?.bind(a)}return d}}return new d});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StrategyFactory/DefaultStrategy", [],function(){"use strict";class e{add(e,n){if(n===undefined||n===null){return}if(e.includes(n)){return}e.push(n)}remove(e,n){const i=e.indexOf(n);if(i===-1){return}e.splice(i,1)}set(e,n,i){e[n]=i}}return new e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StrategyFactory/FloatingActionsStrategy", ["sap/base/Log","sap/ui/core/Element"],function(i,n){"use strict";class t{add(t,e){if(!n.getElementById(e)){i.warning(`Failed to find control with id '${e}'`);return}if(t.includes(e)){this.#i(t,e)}this.#n(t,e)}#i(i,n){const t=i.indexOf(n);if(t===-1){return}i.splice(t,1)}#n(i,n){i.push(n)}}return new t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StrategyFactory/FloatingContainerStrategy", [],function(){"use strict";class e{add(e,s){e.splice(0,e.length);e.push(s)}}return new e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StrategyFactory/HeadEndItemsStrategy", ["sap/base/Log","sap/ui/core/Element","sap/ushell/api/NewExperience"],function(e,t,n){"use strict";const s=10;class r{add(n,s){if(n.includes(s)){return}if(!t.getElementById(s)){e.warning(`Failed to find control with id '${s}'`);return}if(this.#e([...n,s])){e.error("The maximum number of head end items has been reached. The item could not be added.")}else{this.#t(n,s)}}#e(e){const t=[...new Set(e)];const n=["endItemsOverflowBtn"];const r=t.filter(e=>!n.includes(e)).length;return r>s}#t(e,t){e.push(t);const s={shellAppTitle:-7,shellBarSpacer:-4,sf:-3,"sap.das.webclientplugin.s4.shellitem":-2,"sap.das.webclientplugin.workzone.shellitem":-2,copilotBtn:-1,NotificationsCountButton:1,endItemsOverflowBtn:2,userActionsMenuHeaderButton:3,productSwitchBtn:4};s[n.getShellHeaderControl()?.getId()]=-5;s[n.getOverflowItemId()]=-6;e.sort((e,t)=>{const n=s[e]||0;const r=s[t]||0;if(n===r){return e.localeCompare(t)}return n-r})}}return new r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StrategyFactory/HeadItemsStrategy", ["sap/base/Log","sap/ui/core/Element"],function(e,n){"use strict";const t=3;class s{add(t,s){if(t.includes(s)){return}if(!n.getElementById(s)){e.warning(`Failed to find control with id '${s}'`);return}if(this.#e([...t,s])){e.error("The maximum number of head items has been reached. The item could not be added.")}else{this.#n(t,s)}}#e(e){const n=[...new Set(e)];const s=["backBtn","sideMenuExpandCollapseBtn"];const d=n.filter(e=>!s.includes(e)).length;return d>t}#n(e,n){e.push(n);const t={sideMenuExpandCollapseBtn:-2,backBtn:-1};e.sort((e,n)=>{const s=t[e]||0;const d=t[n]||0;return s-d})}}return new s});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StrategyFactory/SidePaneStrategy", ["sap/base/Log","sap/ui/core/Element"],function(e,i){"use strict";class n{add(n,t){if(!i.getElementById(t)){e.warning(`Failed to find control with id '${t}'`);return}if(n.includes(t)){this.#e(n,t)}this.#i(n,t)}#e(e,i){const n=e.indexOf(i);if(n===-1){return}e.splice(n,1)}#i(e,i){e.push(i)}}return new n});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StrategyFactory/SubHeaderStrategy", ["sap/base/Log","sap/ui/core/Element"],function(e,i){"use strict";class d{add(d,n){if(!i.getElementById(n)){e.warning(`Failed to find control with id '${n}'`);return}if(d.includes(n)){this.#e(d,n)}this.#i(d,n)}#e(e,i){const d=e.indexOf(i);if(d===-1){return}e.splice(d,1)}#i(e,i){e.push(i)}}return new d});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/state/StrategyFactory/UserActionsStrategy", [],function(){"use strict";class t{add(t,n){if(t.includes(n)){return}t.push(n);const e={userSettingsBtn:-7,recentActivitiesBtn:-6,frequentActivitiesBtn:-5,openCatalogBtn:-4,ActionModeBtn:-3,EditModeBtn:-2,ContactSupportBtn:-1,dataPrivacyBtn:1,aboutBtn:2,logoutBtn:3};t.sort((t,n)=>{const i=e[t]||0;const o=e[n]||0;return i-o})}}return new t});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/ShellHeader", ["sap/base/i18n/Localization","sap/ui/core/Control","sap/ui/core/Element","sap/ui/core/theming/Parameters","sap/ui/Device","sap/ui/dom/units/Rem","sap/base/Log","sap/ushell/api/NewExperience","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/ShellHeaderRenderer","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/state/StateManager","sap/ushell/Container","sap/ui/events/KeyCodes"],(e,t,o,i,n,s,a,r,l,h,u,g,d,c,p,f,m,y)=>{"use strict";const L=f.ShellMode;const S="sapUshellShellShowSearchOverlay";let v=0;let R,_;const E=sap.ui.require.toUrl("sap/ushell/themes/base/img/SAPLogo.svg");const F=t.extend("sap.ushell.ui.ShellHeader",{metadata:{library:"sap.ushell",properties:{logo:{type:"sap.ui.core.URI",defaultValue:""},showLogo:{type:"boolean",defaultValue:true},homeUri:{type:"sap.ui.core.URI",defaultValue:"#"},searchState:{type:"string",defaultValue:"COL"},ariaLabel:{type:"string"},centralAreaElement:{type:"string",defaultValue:null},showNewExperienceSwitch:{type:"boolean",defaultValue:false},title:{type:"string",defaultValue:""}},aggregations:{headItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},headEndItems:{type:"sap.ui.core.Control",multiple:true},search:{type:"sap.ui.core.Control",multiple:false},appTitle:{type:"sap.ushell.ui.shell.ShellAppTitle",multiple:false}},associations:{},events:{searchSizeChanged:{}}},renderer:d});F.prototype.setHomeUri=function(e){if(p.hasInvalidProtocol(e)){a.fatal("Tried to set a URL with an invalid protocol as the home uri. Setting to an empty string instead.",null,"sap/ushell/ui/ShellHeader");e=""}this._bHomeIsRoot=c.isRootIntent(e);return this.setProperty("homeUri",e)};F.prototype.SearchState={COL:"COL",EXP:"EXP",EXP_S:"EXP_S"};F.prototype.FLPRangeSet={name:"Ushell",rangeBorders:[600,1024,1440,1920],rangeNames:["Phone","Tablet","Desktop","LargeDesktop","ExtraLargeDesktop"]};F.prototype.init=function(){n.media.initRangeSet(this.FLPRangeSet.name,this.FLPRangeSet.rangeBorders,"px",this.FLPRangeSet.rangeNames);n.media.attachHandler(this.invalidate,this,this.FLPRangeSet.name);n.resize.attachHandler(this.refreshLayout,this);this.getCustomLogoAltText();l.once("ShellNavigationInitialized").do(()=>{m.getServiceAsync("ShellNavigationInternal").then(e=>{this._rerenderLogoNavigationFilterBound=this._rerenderLogoNavigationFilter.bind(this,e);e.registerNavigationFilter(this._rerenderLogoNavigationFilterBound);this._rerenderLogoNavigationFilterBound.detach=function(){e.unregisterNavigationFilter(this._rerenderLogoNavigationFilterBound)}})});this._oLastFocusedHeaderElement=null;this._oEventDelegate={onfocusin:this._handleOnFocusIn,onkeydown:this._handleOnKeyDown,onBeforeFastNavigationFocus:this._handleOnBeforeFastNavigationFocus};this.addEventDelegate(this._oEventDelegate,this)};F.prototype.exit=function(){n.media.detachHandler(this.invalidate,this,this.FLPRangeSet.name);n.resize.detachHandler(this.refreshLayout,this);if(this._rerenderLogoNavigationFilterfnRerenderLogoNavigationFilter){this._rerenderLogoNavigationFilterfnRerenderLogoNavigationFilter.detach()}this.removeEventDelegate(this._oEventDelegate);delete this._oEventDelegate};F.prototype.setFocusOnShellHeader=function(e){if(e){const e=this.getHeadEndItems();if(e.length>0){e[e.length-1].focus()}else{this.getAppTitle().focus()}}else{const e=this.getHeadItems();if(e.length>0){e[0].focus()}else{this.getAppTitle().focus()}}};F.prototype.onsapspace=function(e){if(e.target===this.getDomRef("logo")){this._setLocationHref(e.target.href)}};F.prototype._setLocationHref=function(e){if(p.hasInvalidProtocol(e)){a.fatal("Tried to navigate to URL with an invalid protocol. Preventing navigation.",null,"sap/ushell/ui/ShellHeader");return}window.location.href=e};F.prototype.onAfterRendering=function(){const e=this.getDomRef();if(!R&&document.body.getBoundingClientRect().height===0){e.style.visibility="hidden";e.style.height="2.75rem";return}this.refreshLayout()};F.prototype._handleOnKeyDown=function(e){if(e.keyCode!==y.ARROW_RIGHT&&e.keyCode!==y.ARROW_LEFT){return}this._handleArrowNavigation(e)};F.prototype._handleArrowNavigation=function(e){const t=this.getDomRef();const o=document.activeElement;if(!o||!t.contains(o)||o.tagName==="INPUT"||o.tagName==="TEXTAREA"){return}const i=this._getFocusableHeaderItems();let n;let s=i.indexOf(o);if(s<0&&this._oLastFocusedHeaderElement){s=i.indexOf(this._oLastFocusedHeaderElement)}if(s>=0){const t=e.keyCode===y.ARROW_RIGHT?s+1:s-1;n=i[t]}if(!n){if(document.getElementById("shell-header-logo")){document.getElementById("shell-header-logo").focus();return}this.setFocusOnShellHeader();return}n.focus()};F.prototype._handleOnFocusIn=function(){const e=document.activeElement;this._oLastFocusedHeaderElement=e};F.prototype._getFocusableHeaderItems=function(){const t=this.getDomRef();const o=Array.from(t.querySelectorAll("*:is(input, textarea, select, button, a, [tabindex])")).filter(e=>!e.disabled&&!e.hidden&&(e.checkVisibility?.()??true)&&e.getAttribute("tabindex")!=="-1");if(e.getRTL()){return o.reverse()}return o};F.prototype._handleOnBeforeFastNavigationFocus=function(e){e.preventDefault();const t=this._getFocusableHeaderItems();if(this._oLastFocusedHeaderElement&&t.includes(this._oLastFocusedHeaderElement)){this._oLastFocusedHeaderElement.focus();return}this._oLastFocusedHeaderElement=null;if(document.getElementById("shell-header-logo")){document.getElementById("shell-header-logo").focus()}else{this.setFocusOnShellHeader()}};F.prototype.onThemeChanged=function(e){let t=false;if(R!==e.theme){R=e.theme;t=true}if(_!==this.getLogo()){_=this.getLogo();t=true}if(t){this.invalidate()}};F.prototype.getLogo=function(){const e=this.getCustomCompanyLogoUrl();if(e!==""){return e}if(this.getProperty("logo")!==""){return this.getProperty("logo")}const t=i.get({name:"sapUiGlobalLogo",callback:()=>{this.invalidate()}});if(t==="none"){return E}if(t){const e=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(t);if(e){return e[1]}}return undefined};F.prototype.getCustomCompanyLogoUrl=function(){return h.last("/core/companyLogo/url")};F.prototype.getCustomLogoAltText=function(){const t=h.last("/core/companyLogo/accessibleText");let o;delete this._sCustomAltText;if(t){try{const i=JSON.parse(t);if(i){o=e.getLanguage();this._sCustomAltText=i[o];if(!this._sCustomAltText){Object.keys(i).forEach(e=>{if(e.indexOf(o)===0){this._sCustomAltText=i[e]}})}if(!this._sCustomAltText){Object.keys(i).forEach(e=>{if(o.indexOf(e)===0){this._sCustomAltText=i[e]}})}if(!this._sCustomAltText){this._sCustomAltText=i.default}}}catch(e){a.warning("Custom logo image ALT text is not a JSON string.",t);this._sCustomAltText=t}}};F.prototype.getLogoAltText=function(e){if(!e){return""}if(e===E){return g.i18n.getText("sapLogoText")}return this._sCustomAltText||g.i18n.getText("SHELL_LOGO_TOOLTIP")};F.prototype.refreshLayout=function(){if(!this.getDomRef()){return}if(this.getSearchVisible()){const e=this.getDomRef("hdr-search");e.style.display="none";this._hideElementsForSearch();e.style.display="";e.style["max-width"]=`${v}rem`;this.fireSearchSizeChanged({remSize:s.fromPx(e.getBoundingClientRect().width),isFullWidth:this.isPhoneState()||this.getDomRef("hdr-end").style.display==="none"})}};F.prototype.removeHeadItem=function(e){if(typeof e==="number"){e=this.getHeadItems()[e]}this.removeAggregation("headItems",e)};F.prototype.isExtraLargeState=function(){return n.media.getCurrentRange(this.FLPRangeSet.name).from===this.FLPRangeSet.rangeBorders[3]};F.prototype.isMediumOrBiggerState=function(){return n.media.getCurrentRange(this.FLPRangeSet.name).from>=this.FLPRangeSet.rangeBorders[0]};F.prototype.isPhoneState=function(){const e=n.media.getCurrentRange(n.media.RANGESETS.SAP_STANDARD).name;const t=this.getDomRef().getBoundingClientRect().width>v;return n.system.phone||e==="Phone"||!t};F.prototype.setSearchState=function(e,t,o){if(this.SearchState[e]&&this.getSearchState()!==e){if(typeof t==="boolean"){o=t;t=undefined}this.setProperty("searchState",e,false);const i=e!=="COL";document.body.classList.toggle(S,i&&o);v=i?t||35:0}};F.prototype._hideElementsForSearch=function(){if(this.isExtraLargeState()){return}let e;const t=this.getDomRef("hdr-search-container");const o=this.getDomRef("hdr-begin");const i=this.getDomRef("hdr-center");const n=this.getDomRef("hdr-end");if(this.getSearchState()==="EXP"||this.isPhoneState()){e=s.toPx(v+3)}else{e=s.toPx(9+.5)}const a=[o];Array.prototype.forEach.call(o.childNodes,e=>{a.unshift(e)});if(i){a.unshift(i)}o.style.flexBasis="";n.style.display="";a.forEach(e=>{if(e.getAttribute("id")==="shellAppTitle"){e.classList.remove("sapUiPseudoInvisibleText")}else{e.style.display=""}});let r;for(let n=0;n<a.length;n++){r=a[n];if(e>t.getBoundingClientRect().width){if(r.getAttribute("id")==="shellAppTitle"){r.classList.add("sapUiPseudoInvisibleText")}else{r.style.display="none";if(i&&n===0){o.style.flexBasis="auto"}}}else{return}}if(s.toPx(v)>t.getBoundingClientRect().width){n.style.display="none"}};F.prototype.getSearchWidth=function(){return v};F.prototype.isHomepage=function(){const e=window.hasher&&`#${window.hasher.getHash()}`||"";const t=new RegExp("[?]"+"(?:"+"(?!&[/])."+")*");const o=e.replace(t,"");return c.isRootIntent(o)||o==="#Launchpad-openFLPPage"};F.prototype._rerenderLogoNavigationFilter=function(e,t,o){const i=e.hashChanger.isInnerAppNavigation(t,o);if(i){this.invalidate()}return e.NavigationFilterStatus.Continue};F.prototype.getSearchVisible=function(){return this.getSearchState()!==this.SearchState.COL};F.prototype.getCentralControl=function(){return o.getElementById(this.getCentralAreaElement())};F.prototype.setNoLogo=function(){this.setLogo(undefined)};F.prototype._getLeanMode=function(){return f.getShellMode()===L.Lean};F.prototype.getNewExperienceSwitchControl=function(){if(!r.isActive()){return}if(this.getShowNewExperienceSwitch()){return r.getShellHeaderControl()}};return F});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/ShellHeaderRenderer", ["sap/ushell/Config","sap/ushell/resources"],(e,t)=>{"use strict";const r={apiVersion:2};r.render=function(r,n){const a=n.getId();const s=n.getCentralControl();r.openStart("header",n);if(!n.getVisible()){r.style("display","none")}r.class("sapUshellShellHeader");r.class("sapContrastPlus");if(e.last("/core/sideNavigation/enabled")){r.class("sapUshellSideNavigationEnabled")}r.attr("aria-label",t.i18n.getText("Shell_Header_AriaLabel"));r.attr("data-sap-ui-customfastnavgroup","true");r.openEnd();r.openStart("div");r.attr("id",`${a}-hdr-begin`);r.class("sapUshellShellHeadBegin");if(s){r.class("sapUshellHeadWithCenter")}r.openEnd();this.renderReservedHeaderItems(r,n);this.renderLogo(r,n);this.renderHeaderItems(r,n);this.renderTitle(r,n);this.renderNewExperienceSwitch(r,n);r.close("div");if(s){r.openStart("div",s);r.attr("id",`${a}-hdr-center`);r.class("sapUshellShellHeadCenter");r.openEnd();r.renderControl(s);r.close("div")}r.openStart("div");r.attr("id",`${a}-hdr-search-container`);r.class("sapUshellShellHeadSearchContainer");r.openEnd();this.renderSearch(r,n);r.close("div");r.openStart("div");r.attr("id",`${a}-hdr-end`);r.class("sapUshellShellHeadEnd");r.openEnd();this.renderHeaderEndItems(r,n);r.close("div");r.close("header")};r.renderSearch=function(e,t){const r=t.getSearch();e.openStart("div");e.attr("id",`${t.getId()}-hdr-search`);e.attr("data-help-id","shellHeader-search");e.class("sapUshellShellSearch");e.style("max-width",`${t.getSearchWidth()}rem`);if(t.getSearchState()==="COL"){e.style("display","none")}e.openEnd();if(r){e.renderControl(r)}e.close("div")};r.renderNewExperienceSwitch=function(e,t){const r=t.getNewExperienceSwitchControl();if(r){e.openStart("div");e.attr("id",`${t.getId()}-hdr-new-experience-switch`);e.attr("data-help-id","ushell-new-experience-switch");e.class("sapUshellShellNewExperienceSwitch");e.openEnd();e.renderControl(r);e.close("div")}};r.renderTitle=function(e,t){const r=t.getTitle();e.renderControl(t.getAppTitle());if(r&&t.isMediumOrBiggerState()){e.openStart("div");e.attr("id",`${t.getId()}-hdr-shell-title`);e.class(t.getAppTitle()?"sapUshellShellHeadSubtitle":"sapUshellShellHeadTitle");e.openEnd();e.openStart("h2");e.class("sapUshellHeadTitle");e.attr("aria-level","2");e.attr("title",r);e.openEnd();e.text(r);e.close("h2");e.close("div")}};r.renderReservedHeaderItems=function(e,t){const r=t.getHeadItems();r.forEach(t=>{if(t.getId()==="sideMenuExpandCollapseBtn"||t.getId()==="backBtn"){e.renderControl(t)}})};r.renderHeaderItems=function(e,t){const r=t.getHeadItems();r.forEach(t=>{if(t.getId()!=="backBtn"&&t.getId()!=="sideMenuExpandCollapseBtn"){e.renderControl(t)}})};r.renderHeaderEndItems=function(e,t){t.getHeadEndItems().forEach(e.renderControl)};r.renderLogo=function(e,r){const n=r.getLogo();if(!r.getShowLogo()||n===undefined){return}const a=r._getLeanMode();const s=r._bHomeIsRoot?t.i18n.getText("homeBtn_tooltip_text"):t.i18n.getText("lastPage_tooltip");e.openStart(a?"div":"a");e.attr("id",`${r.getId()}-logo`);e.class("sapUshellShellIco");if(a){e.class("sapUshellLean")}else{e.attr("href",r.getHomeUri());e.attr("title",s);e.attr("role","button")}e.openEnd();e.voidStart("img");e.attr("id",`${r.getId()}-icon`);e.attr("alt",r.getLogoAltText(n));e.attr("src",n);e.voidEnd();e.close(a?"div":"a")};return r},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/footerbar/ContactSupportButton", ["sap/m/ButtonRenderer","sap/ushell/resources","sap/ushell/ui/launchpad/ActionItem"],function(t,o,e){"use strict";var a=e.extend("sap.ushell.ui.footerbar.ContactSupportButton",{metadata:{library:"sap.ushell"},renderer:t});a.prototype.init=function(){if(e.prototype.init){e.prototype.init.apply(this,arguments)}this.setIcon("sap-icon://email");this.setText(o.i18n.getText("contactSupportBtn"));this.attachPress(this.showContactSupportDialog)};a.prototype.showContactSupportDialog=function(){return new Promise(t=>{sap.ui.require(["sap/ushell/ui/footerbar/ContactSupportDialog.controller","sap/ui/core/Fragment"],async function(o,e){const a=await e.load({id:"contactSupportDialogFragment",name:"sap.ushell.ui.footerbar.ContactSupportDialog",type:"XML",controller:new o});a.attachAfterOpen(t);a.open()})})};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/AccessibilityCustomData", ["sap/ui/core/ControlBehavior","sap/ui/core/CustomData"],function(e,t){"use strict";var a=t.extend("sap.ushell.ui.launchpad.AccessibilityCustomData",{metadata:{library:"sap.ushell"}});a.prototype._checkWriteToDom=function(){if(!e.isAccessibilityEnabled()){return null}var a=this.getKey();var i=t.prototype._checkWriteToDom.apply(this,arguments);if(i&&(a.indexOf("aria-")===0||a==="role"||a==="tabindex")){i.key=i.key.replace(/^data-/,"")}return i};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/ActionItem", ["sap/m/Button","sap/m/ButtonRenderer","sap/m/library"],function(e,t,r){"use strict";var s=r.ButtonType;var a=e.extend("sap.ushell.ui.launchpad.ActionItem",{metadata:{library:"sap.ushell",properties:{actionType:{type:"string",group:"Appearance",defaultValue:"standard"}},events:{press:{},afterRendering:{}}},renderer:t});a.prototype.setActionType=function(e){if(!this.sOrigType){this.sOrigType=this.getType()}this.setType(e==="action"?s.Unstyled:this.sOrigType||s.Standard);this.setProperty("actionType",e,true)};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/LoadingDialog", ["sap/m/Label","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/core/Popup","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","./LoadingDialogRenderer"],function(e,t,i,s,o,a,n,l){"use strict";var p=t.extend("sap.ushell.ui.launchpad.LoadingDialog",{metadata:{library:"sap.ushell",properties:{iconUri:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},text:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},loadAnimationWithInterval:{type:"boolean",group:"Appearance",defaultValue:true}}},renderer:l});p.prototype.init=function(){this._oPopup=new s;this._oPopup.restoreFocus=false;this._oPopup.setShadow(false);this._oPopup.setModal(true,"sapUshellLoadingDialog");this.oIcon=new i;this._oLabel=new e(this.getId()+"loadingLabel").addStyleClass("sapUshellLoadingDialogLabel");this.sState="idle";this.sLoadingString=a.i18n.getText("genericLoading").replace("..."," ")};p.prototype.exit=function(){this._oPopup.close();this._oPopup.destroy();this.oIcon.destroy();this._oLabel.destroy()};p.prototype.isOpen=function(){return this._oPopup.isOpen()};p.prototype.openLoadingScreen=function(){if(this.sState==="idle"){this.sState="busy"}if(this.getLoadAnimationWithInterval()){this.addStyleClass("sapUshellVisibilityHidden");this._iTimeoutId=setTimeout(function(){this.removeStyleClass("sapUshellVisibilityHidden");this.focus()}.bind(this),3e3)}else{this.removeStyleClass("sapUshellVisibilityHidden");this.focus()}if(!this.getVisible()){this.setVisible(true);this.$().show()}if(!this.isOpen()){this._oPopup.setContent(this);this._oPopup.setPosition("center center","center center",document,"0 0","fit");this._oPopup.open()}};p.prototype.showAppInfo=function(e,t,i){this.setText(e);this.setIconUri(t);this.oIcon.setSrc(t);this._oLabel.setText(e);this._oLabel.addCustomData(new n({key:"aria-hidden",value:"true",writeToDom:true}));var s=this.getDomRef("accessibility-helper");if(s&&i){s.innerText=this.sLoadingString}};p.prototype.closeLoadingScreen=function(){if(this._iTimeoutId){clearTimeout(this._iTimeoutId)}if(this.getVisible()){this.sState="idle";this.setVisible(false);this.$().hide();this._oPopup.close()}};return p});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/LoadingDialogRenderer", [],function(){"use strict";var e={apiVersion:2,render:function(e,n){var t=n.getTooltip_AsString();e.openStart("div",n);e.class("sapUshellLoadingDialogControl");if(t){e.attr("title",t)}e.openEnd();this.renderAppInfo(e,n);e.close("div")},renderAppInfo:function(e,n){e.openStart("div");e.class("sapUshellLoadingDialogAppData");e.openEnd();if(n.getIconUri()){e.renderControl(n.oIcon)}e.openStart("span",n.getId()+"-accessibility-helper");e.class("sapUshellAccessibilityHelper");e.attr("aria-live","rude");e.attr("aria-relevant","additions text");e.openEnd();e.close("span");e.renderControl(n._oLabel);e.close("div")}};return e},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/Tile", ["sap/base/Log","sap/m/Text","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/EventBus","sap/ui/core/Icon","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","./TileRenderer"],function(e,t,i,o,s,n,jQuery,a,l,r,c){"use strict";var u=o.extend("sap.ushell.ui.launchpad.Tile",{metadata:{library:"sap.ushell",properties:{long:{type:"boolean",group:"Misc",defaultValue:false},uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},tileCatalogIdStable:{type:"string",group:"Misc",defaultValue:null},isCustomTile:{type:"boolean",group:"Misc",defaultValue:false},target:{type:"string",group:"Misc",defaultValue:null},debugInfo:{type:"string",group:"Misc",defaultValue:null},rgba:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},showActionsIcon:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},navigationMode:{type:"string",group:"Misc",defaultValue:null},isDraggedInTabBarToSourceGroup:{type:"boolean",group:"Misc",defaultValue:false},noContainerMode:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},pinButton:{type:"sap.ui.core.Control",multiple:true,singularName:"pinButton"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{},deletePress:{}}},renderer:c});u.prototype.init=function(){this.addDelegate({onkeyup:function(e){var t=e.originalEvent;var i=t.code==="Space"||e.keyCode===32;var o=t.code==="Enter"||e.keyCode===13;var s=t.altKey||t.shiftKey||t.ctrlKey||t.metaKey;if((i||o)&&!s){this._launchTileViaKeyboard(e)}}},this)};u.prototype.exit=function(){if(this.actionSheetIcon){this.actionSheetIcon.destroy()}if(this.actionIcon){this.actionIcon.destroy()}if(this.failedToLoadViewText){this.failedToLoadViewText.destroy()}};u.prototype.getFailedtoLoadViewText=function(){if(!this.failedToLoadViewText){this.failedToLoadViewText=new t({text:l.i18n.getText("Tile.failedToLoadView")})}return this.failedToLoadViewText};u.prototype.getActionSheetIcon=function(){if(!this.getTileActionModeActive()){return undefined}if(!this.actionSheetIcon){this.actionSheetIcon=new n({src:"sap-icon://overflow",tooltip:l.i18n.getText("configuration.category.tile_actions")}).addStyleClass("sapUshellTileActionIconDivBottomInner")}return this.actionSheetIcon};u.prototype.ontap=function(){e.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.Tile");this.firePress()};u.prototype.destroy=function(e){this.destroyTileViews();o.prototype.destroy.call(this,e)};u.prototype.addTileView=function(e,t){e.setParent(null);i.prototype.addAggregation.call(this,"tileViews",e,t)};u.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0}};u.prototype.onBeforeRendering=function(){var e=this.getDomRef();if(e){var t=e.querySelector("a.sapUshellTileInner");if(t){t.onclick=null}if(document.activeElement===e){this.bFocused=true}this.sTabIndex=e.getAttribute("tabindex");if(this.sTabIndex){e.removeAttribute("tabindex")}}};u.prototype.onAfterRendering=function(){if(this.getIsDraggedInTabBarToSourceGroup()){var e=this.getParent();e.removeAggregation("tiles",this,false)}var t=this.getDomRef();if(t){if(this.sTabIndex){t.setAttribute("tabindex",this.sTabIndex);delete this.sTabIndex}if(this.bFocused){t.focus();delete this.bFocused}}this._redrawRGBA();this._disableInnerLink();this.fireAfterRendering()};u.prototype._disableInnerLink=function(){var e=this.getDomRef();var t=e.querySelector("a.sapUshellTileInner");if(t){t.onclick=function(e){e.preventDefault()}}};u.prototype._launchTileViaKeyboard=function(e){if(this.getTileActionModeActive()){this.fireCoverDivPress({id:this.getId()})}else{this._announceLoadingApplication();if(e.target.tagName!=="BUTTON"){var t=this.getTileViews()[0],i=false,o,s;if(t.firePress){t.firePress({id:this.getId()})}else if(t.getComponentInstance){o=t.getComponentInstance();if(o._oController&&o._oController.oView.getContent()){s=o._oController.oView.getContent()[0];if(s&&s.firePress){s.firePress({id:this.getId()})}}}else{while(t.getContent&&!i){t=t.getContent()[0];if(t.firePress){t.firePress({id:this.getId()});i=true}}}}}};u.prototype.onfocusin=function(){var t=this.getDomRef();if(!t.classList.contains("sapUshellPlusTile")){var i=this.$().prevUntil("h3"),o;if(i.length>0){o=i[i.length-1].previousSibling}else{o=t.previousSibling}var s=t.querySelector(".sapUshellTileInner");if(s&&s.children&&s.children[0]){var n=[];if(o){n.push("sapUshellCatalogAccessibilityTileText")}else{n.push("sapUshellDashboardAccessibilityTileText")}var a=this.getNavigationMode();if(a){var r=l.i18n.getText(a+"NavigationMode");if(r){var c=this.getId()+"-navigationMode";if(!document.getElementById(c)){var u=document.createElement("div");u.setAttribute("id",c);u.style.display="none";u.innerText=r;s.appendChild(u)}n.push(c)}else{e.warning("The navigation mode is of a unkown mode, it can not be read!")}}n.push(s.children[0].getAttribute("id"));var d=t.querySelector(".sapUshellTileDeleteClickArea .sapUiIcon");if(d){n.push(d.id)}if(o){n.push(o.getAttribute("id"))}if(this.getTileActionModeActive()){n.push("sapUshellDashboardAccessibilityTileEditModeText")}t.setAttribute("aria-labelledby",n.join(" "))}}};u.prototype.onclick=function(e){if(this.getTileActionModeActive()){var t=e.originalEvent.srcElement;if(jQuery(t).closest(".sapUshellTileDeleteClickArea").length>0){this.fireDeletePress()}else{this.fireCoverDivPress({id:this.getId()})}}else{this._announceLoadingApplication()}};u.prototype._announceLoadingApplication=function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-appInfo"),t=l.i18n.getText("screenReaderNavigationLoading");if(e){e.setAttribute("role","alert");e.innerText=t;setTimeout(function(){e.removeAttribute("role");e.innerText=""},0)}};u.prototype._initDeleteAction=function(){var e=this;if(!this.deleteIcon){this.deleteIcon=new n({src:"sap-icon://decline",tooltip:l.i18n.getText("removeButtonTitle")});this.deleteIcon.addEventDelegate({onclick:function(t){e.fireDeletePress();t.stopPropagation()}});this.deleteIcon.addStyleClass("sapUshellTileDeleteIconInnerClass");this.deleteIcon.addCustomData(new r({key:"aria-label",value:l.i18n.getText("removeButtonLabel"),writeToDom:true}))}return this.deleteIcon};u.prototype.setShowActionsIcon=function(e){if(e){if(!this.actionIcon){this.actionIcon=new n({size:"1rem",src:"sap-icon://overflow",press:function(){this.fireShowActions();this.addStyleClass("showTileActionsIcon");var e=s.getInstance(),t=function(i,o,s){s.removeStyleClass("showTileActionsIcon");e.unsubscribe("dashboard","actionSheetClose",t)};e.subscribe("dashboard","actionSheetClose",t)}.bind(this)}).addStyleClass("sapUshellTileActionsIconClass")}}this.setProperty("showActionsIcon",e)};u.prototype.setIsDraggedInTabBarToSourceGroup=function(e){this.setProperty("isDraggedInTabBarToSourceGroup",e);this.setVisible(!e)};u.prototype.setRgba=function(e){this.setProperty("rgba",e);this._redrawRGBA()};u.prototype._redrawRGBA=function(){var e=this.getRgba(),t=this.$();if(e&&t){var i=this.getModel();t.css("background-color",e);t.unbind("mouseenter mouseleave");var o,s=t.css("border").split("px")[0];if(s>0){o=t.css("border-color")}else{o=e}t.hover(function(){if(i&&!i.getProperty("/tileActionModeActive")){var e=t.css("box-shadow"),s=e?e.split(") ")[1]:null;if(s){t.css("box-shadow",s+" "+o)}}},function(){t.css("box-shadow","")})}};return u});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/TileRenderer", ["sap/base/Log","sap/ushell/Config"],function(e,l){"use strict";var i={apiVersion:2};i.render=function(i,t){var n=null;try{n=t.getTileViews()[0]}catch(l){e.warning("Failed to load tile view: ",l.message);n=t.getFailedtoLoadViewText()}var o=t.getParent();if(!o){return}var s=t.getNoContainerMode();i.openStart(s?"div":"li",t);if(l.last("/core/shell/model/enableHelp")){i.attr("data-help-id",t.getTileCatalogId());if(t.getTileCatalogIdStable()){i.attr("data-help-id2",t.getTileCatalogIdStable())}}i.class("sapUshellTile");if(t.getTileActionModeActive()){i.class("sapUshellTileWrapper")}if(n&&n.getContent){var a=n.getContent();a.forEach(function(e){if(e.isA("sap.m.GenericTile")){i.class("sapUshellFeedTileBG")}})}if(t.getLong()){i.class("sapUshellLong")}if(!t.getVisible()){i.class("sapUshellHidden")}if(t.getIsLocked()){i.class("sapUshellLockedTile")}if(l.last("/core/home/sizeBehavior")==="Small"){i.class("sapUshellSmall")}var r=o.getId()+"-titleText";i.attr("aria-describedby",r);i.openEnd();if(t.getTileActionModeActive()){this.renderTileActionMode(i,t);this.renderTileView(i,t,n)}else{i.openStart("div");i.class("sapUshellTileWrapper");i.openEnd();this.renderTileView(i,t,n);if(t.getShowActionsIcon()){i.renderControl(t.actionIcon)}i.close("div");this.renderTileActionsContainer(i,n,t.getPinButton())}i.close(s?"div":"li")};i.renderTileActionsContainer=function(e,l,i){i=i.length?i[0]:undefined;if(i){i.addStyleClass("sapUshellActionButton");e.openStart("div");e.class("sapUshellTilePinButtonOverlay");if(l.getHeader){e.attr("role","toolbar");e.attr("aria-label",l.getHeader())}e.openEnd();e.renderControl(i);e.close("div")}};i.renderTileView=function(e,l,i){e.openStart("div");e.class("sapUshellTileInner");if(l.getTileActionModeActive()){e.class("sapUshellTileActionBG")}e.openEnd();e.renderControl(i);e.close("div")};i.renderTileActionMode=function(e,l){e.openStart("div");e.class("sapUshellTileActionLayerDiv");e.openEnd();if(!l.getIsLocked()){e.openStart("div");e.class("sapUshellTileDeleteClickArea");e.openEnd();e.openStart("div");e.class("sapUshellTileDeleteIconOuterClass");e.openEnd();e.renderControl(l._initDeleteAction());e.close("div");e.close("div")}e.openStart("div");e.class("sapUshellTileActionDivCenter");e.openEnd();e.close("div");e.openStart("div");e.class("sapUshellTileActionIconDivBottom");e.openEnd();e.openStart("div");e.class("sapUshellTileActionIconDivBottomInnerDiv");e.openEnd();e.renderControl(l.getActionSheetIcon());e.close("div");e.close("div");e.close("div")};return i},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/VizInstance", ["sap/m/ActionSheet","sap/m/GenericTile","sap/m/library","sap/m/Popover","sap/m/Text","sap/m/VBox","sap/ui/core/Component","sap/ui/core/Icon","sap/ui/core/Lib","sap/ui/events/PseudoEvents","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/VizInstanceBase","sap/ushell/ui/launchpad/VizInstanceRenderer"],function(e,t,i,o,n,a,s,r,l,p,c,d,u,h){"use strict";var f=i.PlacementType;var g=i.FrameType;var y=i.GenericTileScope;var m=i.LoadState;var b=c.DisplayFormat;var v=u.extend("sap.ushell.ui.launchpad.VizInstance",{metadata:{library:"sap.ushell",properties:{title:{type:"string",defaultValue:"",bindable:true},subtitle:{type:"string",defaultValue:"",bindable:true},height:{type:"int",defaultValue:2},width:{type:"int",defaultValue:2},info:{type:"string",defaultValue:"",bindable:true},icon:{type:"sap.ui.core.URI",defaultValue:"",bindable:true},numberUnit:{type:"string",defaultValue:"",bindable:true},state:{type:"sap.m.LoadState",defaultValue:m.Loaded,bindable:true},sizeBehavior:{type:"sap.m.TileSizeBehavior",defaultValue:undefined,bindable:true},editable:{type:"boolean",defaultValue:false,bindable:true},removable:{type:"boolean",defaultValue:true,bindable:true},clickable:{type:"boolean",defaultValue:true,bindable:true},active:{type:"boolean",defaultValue:false},targetURL:{type:"string"},indicatorDataSource:{type:"object",defaultValue:undefined},dataSource:{type:"object",defaultValue:undefined},keywords:{type:"string[]",defaultValue:[]},instantiationData:{type:"object",defaultValue:{}},contentProviderId:{type:"string",defaultValue:""},contentProviderLabel:{type:"string",defaultValue:""},vizConfig:{type:"object"},supportedDisplayFormats:{type:"sap.ushell.DisplayFormat[]",defaultValue:[b.Standard]},dataHelpId:{type:"string",defaultValue:""},vizRefId:{type:"string",defaultValue:""},displayFormat:{type:"sap.ushell.DisplayFormat",defaultValue:b.Standard},preview:{type:"boolean",defaultValue:false,bindable:true}},defaultAggregation:"tileActions",aggregations:{content:{type:"sap.ui.core.Control",multiple:false},tileActions:{type:"sap.m.Button",forwarding:{getter:"_getTileActionSheet",aggregation:"buttons"}}},events:{press:{parameters:{scope:{type:"sap.m.GenericTileScope"},action:{type:"string"}}},beforeActionSheetOpen:{},afterActionSheetClose:{}}},renderer:h});v.prototype.init=function(){this._pLoad=Promise.resolve();var e=new t({frameType:this._formatPlaceholderFrameType(this.getDisplayFormat()),state:this.getState()});this._disableTabindexOfGenericTile(e);this.setAggregation("content",e)};v.prototype.setDisplayFormat=function(e){this.setProperty("displayFormat",e);this._setSize();var t=this.getContent();if(t&&t.isA("sap.m.GenericTile")){t.setFrameType(this._formatPlaceholderFrameType(e))}return this};v.prototype.setState=function(e){this.setProperty("state",e);var t=this.getContent();if(t&&t.isA("sap.m.GenericTile")){t.setState(e)}return this};v.prototype.setSizeBehavior=function(e){this.setProperty("sizeBehavior",e);this.setTileSizeBehavior(e);return this};v.prototype.setEditable=function(e){this.setProperty("editable",e);this.setTileEditable(e);return this};v.prototype.setTileEditable=function(e){var t=e?y.ActionMore:y.Display;var i=this.getContent();if(i&&i.isA("sap.m.GenericTile")){i.setScope(t)}return this};v.prototype.setTileSizeBehavior=function(e){var t=this.getContent();if(t&&t.isA("sap.m.GenericTile")){t.setSizeBehavior(e)}return this};v.prototype._formatPlaceholderFrameType=function(e){this._setSize();switch(e){case b.Flat:return g.OneByHalf;case b.FlatWide:return g.TwoByHalf;case b.StandardWide:return g.TwoByOne;default:return g.OneByOne}};v.prototype.exit=function(){if(this._oActionModeButtonIconVBox){this._oActionModeButtonIconVBox.destroy()}if(this._oActionDivCenter){this._oActionDivCenter.destroy()}if(this._oActionSheet){this._oActionSheet.destroy()}if(this._oRemoveIconVBox){this._oRemoveIconVBox.destroy()}};v.prototype.getLayout=function(){return{columns:this.getWidth(),rows:this.getHeight()}};v.prototype.setContent=function(e){var t=this.getLayoutData();if(t&&t.isA("sap.f.GridContainerItemLayoutData")){t.setRows(this.getHeight());t.setColumns(this.getWidth())}var i=this.getDataHelpId();var o=this.getVizRefId();if(i){e.data("help-id",i,true);e.data("tile-id",i,true)}else{e.data("tile-id",o,true)}this._disableTabindexOfContent(e);this.setAggregation("content",e)};v.prototype._disableTabindexOfContent=function(e){if(e){if(e.isA("sap.ui.core.ComponentContainer")){var t=e.getComponent();var i=s.getComponentById(t);if(i){this._disableTabindexOfContent(i.getRootControl())}}else if(e.isA("sap.m.FlexBox")){var o=e;var n=e.getItems()[0];o.addEventDelegate({onAfterRendering:this._disableTabindexOfContent.bind(this,n)});this._disableTabindexOfContent(n)}else if(e.isA("sap.ui.core.mvc.View")){this._disableTabindexOfContent(e.getContent()[0])}else if(e.isA("sap.cloudfnd.smartbusiness.lib.reusetiles.Singleton")){this._disableTabindexOfContent(e.getContent())}else if(e.isA("sap.m.GenericTile")){this._disableTabindexOfGenericTile(e)}}};v.prototype._disableTabindexOfGenericTile=function(e){function t(e){var t=e.getFocusDomRef();if(t){if(t.getAttribute("tabindex")==="0"){t.setAttribute("tabindex",-1);t.tabIndex=-1}}}t(e);e.addEventDelegate({onAfterRendering:t.bind(this,e)})};v.prototype._getTileActionSheet=function(){if(!this._oActionSheet){this._oActionSheet=new e({placement:f.VerticalPreferedBottom});this._oActionSheet.attachAfterClose(this.fireAfterActionSheetClose.bind(this))}return this._oActionSheet};v.prototype._openActionMenu=function(){if(this._oActionModeIcon){if(!this._getTileActionSheet().isOpen()){this.fireBeforeActionSheetOpen()}if(this.getTileActions().length===0){this._openNoActionsPopover();return}this._getTileActionSheet().openBy(this._oActionModeIcon)}};v.prototype.getFocusDomRef=function(){if(this.getEditable()){return this._oActionModeIcon&&this._oActionModeIcon.getFocusDomRef()}var e=this.getContent();var t=e.findAggregatedObjects(true,function(e){return e.isA("sap.m.GenericTile")||e.isA("sap.f.Card")||e.isA("sap.m.SlideTile")});if(t.length){return t[0].getFocusDomRef()}if(e.isA("sap.ui.core.ComponentContainer")){const i=e.getComponentInstance();if(i?.findAggregatedObjects){t=i.findAggregatedObjects(true,function(e){return e.isA("sap.m.GenericTile")||e.isA("sap.f.Card")||e.isA("sap.m.SlideTile")});if(t.length){return t[0].getFocusDomRef()}}}return e.getFocusDomRef()};v.prototype.onclick=function(e){if(this._preventDefault(e)){this.firePress({scope:"Display",action:"Press"})}else if(this._oRemoveIconVBox&&this._oRemoveIconVBox.getDomRef&&this._oRemoveIconVBox.getDomRef()&&this._oRemoveIconVBox.getDomRef().contains(e.target)){this.firePress({scope:"Actions",action:"Remove"})}else if(this.getEditable()){this._openActionMenu()}};v.prototype.onBeforeRendering=function(){var e=this.getDomRef();if(e){e.removeEventListener("keyup",this._fnKeyupHandler);e.removeEventListener("touchend",this._fnTouchendHandler)}};v.prototype._openNoActionsPopover=function(){var e=new n({text:d.i18n.getText("tileHasNoActions")});new o({placement:f.VerticalPreferedBottom,showHeader:false,ariaLabelledBy:e.getId(),content:e}).addStyleClass("sapUiContentPadding").openBy(this._oActionModeIcon)};v.prototype.onAfterRendering=function(){var e=this.getDomRef();this._fnKeyupHandler=this.onkeyup.bind(this);this._fnTouchendHandler=this.onclick.bind(this);e.addEventListener("keyup",this._fnKeyupHandler,true);e.addEventListener("touchend",this._fnTouchendHandler,true);if(e.parentElement){e.parentElement.setAttribute("aria-description",d.i18n.getText("VizInstance.AriaDescription.Link"))}};v.prototype.onkeyup=function(e){if(this.getEditable()){if(p.events.sapdelete.fnCheck(e)||p.events.sapbackspace.fnCheck(e)){this.firePress({scope:"Actions",action:"Remove"})}if(p.events.sapspace.fnCheck(e)||p.events.sapenter.fnCheck(e)){this._openActionMenu();this._preventDefault(e)}}};v.prototype._preventDefault=function(e){if(this.getEditable()||!this.getClickable()){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();return false}return true};v.prototype.load=function(){return this._pLoad};v.prototype.loaded=function(){return this._pLoad};v.prototype._setSize=function(){var e={};switch(this.getDisplayFormat()){case b.Flat:e.width=2;e.height=1;break;case b.FlatWide:e.width=4;e.height=1;break;case b.StandardWide:e.width=4;e.height=2;break;default:e.width=2;e.height=2;break}this.setWidth(e.width);this.setHeight(e.height)};v.prototype.getAvailableDisplayFormats=function(){var e;var t=this.getSupportedDisplayFormats();var i=this.getDisplayFormat();e=t.filter(function(e){return e!==i});var o=e.indexOf("compact");var n=this.getTitle();var a=this.getTargetURL();if(o>-1&&(!n||!a)){e.splice(o,1)}return e};v.prototype._getRemoveIconVBox=function(){if(!this._oRemoveIconVBox){var e=l.getResourceBundleFor("sap.m");var t=new r({id:this.getId()+"-action-remove",alt:e.getText("GENERICTILE_ACTIONS_ARIA_TEXT"),decorative:false,noTabStop:true,src:"sap-icon://decline",tooltip:d.i18n.getText("removeButtonTitle")}).addStyleClass("sapUshellTileDeleteIconInnerClass sapMPointer");this._oRemoveIconVBox=new a({items:[t]}).addStyleClass("sapUshellTileDeleteIconOuterClass sapUshellTileDeleteClickArea sapMPointer");this._oRemoveIconVBox.setParent(this)}return this._oRemoveIconVBox};v.prototype._getActionModeButtonIconVBox=function(){if(!this._oActionModeButtonIconVBox){var e=l.getResourceBundleFor("sap.m");this._oActionModeIcon=new r({id:this.getId()+"-action-more",decorative:false,alt:e.getText("LIST_ITEM_NAVIGATION"),noTabStop:true,src:"sap-icon://overflow",tooltip:d.i18n.getText("configuration.category.tile_actions")}).addStyleClass("sapUshellTileActionIconDivBottomInner sapMPointer");var t=this._oActionModeIcon.onkeyup;this._oActionModeIcon.onkeyup=function(){t.apply(this._oActionModeIcon,arguments);this.onkeyup.apply(this,arguments)}.bind(this);this._oActionModeButtonIconVBox=new a({items:[this._oActionModeIcon]}).addStyleClass("sapUshellTileActionIconDivBottom sapMPointer");this._oActionModeButtonIconVBox.setParent(this)}return this._oActionModeButtonIconVBox};return v});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/VizInstanceAbap", ["sap/base/util/Deferred","sap/ushell/ui/launchpad/VizInstance","sap/m/library","sap/base/Log","sap/ushell/library","sap/ushell/utils/chipsUtils","sap/ushell/ui/launchpad/VizInstanceRenderer","sap/ushell/Container"],function(t,e,i,n,s,a,r,o){"use strict";var p=i.LoadState;var h=s.DisplayFormat;var c=e.extend("sap.ushell.ui.launchpad.VizInstanceAbap",{metadata:{library:"sap.ushell"},renderer:r});c.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oLoadDeferred=new t;this._oChipInstancePromise=o.getServiceAsync("PageBuilding").then(function(t){var e=t.getFactory();var i=this.getInstantiationData();var n;var s;if(!i.simplifiedChipFormat){n={chipId:i.chip.id,chip:i.chip}}else{var r=i.chip||{};s=r.bags;n={chipId:r.chipId,configuration:r.configuration?JSON.stringify(r.configuration):"{}"}}var o=e.createChipInstance(n);a.addBagDataToChipInstance(o,s);return o}.bind(this))};c.prototype.load=function(t){this._oChipInstancePromise.then(function(t){this._oChipInstance=t;return new Promise(this._oChipInstance.load)}.bind(this)).then(function(){if(this.getPreview()){var t=this._oChipInstance.getContract("preview");if(t){t.setEnabled(true)}}this._setVisible(this.getActive());return this._oChipInstance.getImplementationAsSapui5Async()}.bind(this)).then(function(t){this._setChipInstanceType();this.setContent(t);if(t.getComponentInstance&&t.getComponentInstance()){t.getComponentInstance().setParent(this)}this._oLoadDeferred.resolve()}.bind(this)).catch(function(t){this.setState(p.Failed);this._oLoadDeferred.reject(t)}.bind(this));return this._oLoadDeferred.promise};c.prototype.loaded=function(){return this._oLoadDeferred.promise};c.prototype._setChipInstanceType=function(){var t=this._oChipInstance.getContract("types");if(t){t.setType(this._mapDisplayFormatToChip(this.getDisplayFormat()))}};c.prototype._mapDisplayFormatToChip=function(t){var e={};e[h.Standard]="tile";e[h.StandardWide]="tile";e[h.Compact]="link";e[h.Flat]="flat";e[h.FlatWide]="flatwide";return e[t]};c.prototype._setVisible=function(t){var e=this._oChipInstance&&!this._oChipInstance.isStub()&&this._oChipInstance.getContract("visible");if(e){e.setVisible(t)}};c.prototype.refresh=function(){if(this._oChipInstance){this._oChipInstance.refresh()}};c.prototype.setActive=function(t,e){this._setVisible(t);if(e){this.refresh()}return this.setProperty("active",t,false)};return c});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/VizInstanceBase", ["sap/ui/core/Control"],function(e){"use strict";var a=e.extend("sap.ushell.ui.launchpad.VizInstanceBase",{metadata:{library:"sap.ushell",properties:{active:{type:"boolean",defaultValue:false}}},renderer:(e,a)=>{e.openStart("div",a);e.class("sapUshellVizInstanceBase");e.close("div")}});return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/VizInstanceCdm", ["sap/base/util/Deferred","sap/ushell/ui/launchpad/VizInstance","sap/m/library","sap/ui/core/Component","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/ui/core/ComponentContainer","sap/ushell/UI5ComponentType","sap/ushell/ui/launchpad/VizInstanceRenderer","sap/ushell/Container"],function(t,e,o,i,n,r,a,s,p,u){"use strict";var h=o.LoadState;var l=e.extend("sap.ushell.ui.launchpad.VizInstanceCdm",{metadata:{library:"sap.ushell"},renderer:p});l.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oLoadDeferred=new t};l.prototype.load=function(t){var e;if(t===true){e=this._loadCustomVizType()}else{e=this._loadStandardVizType()}e.then(function(t){this._oComponent=t;var e=new a({component:t});t.setParent(this);this.setContent(e);if(this.getSizeBehavior()){this.setTileSizeBehavior(this.getSizeBehavior())}this._setComponentTileVisible(this.getActive());this.setTileEditable(this.getEditable());this._oLoadDeferred.resolve(t)}.bind(this)).catch(function(t){this.setState(h.Failed);this._oLoadDeferred.reject(t)}.bind(this));return this._oLoadDeferred.promise};l.prototype.loaded=function(){return this._oLoadDeferred.promise};l.prototype._loadStandardVizType=function(){var t=this._getComponentConfiguration();return i.create(t)};l.prototype._loadCustomVizType=function(){var t=this._getCustomComponentConfiguration();var e={};var o=[];return u.getServiceAsync("Ui5ComponentLoader").then(function(i){return i.createComponent(t,e,o,s.Visualization)}).then(function(t){if(t&&t.componentHandle&&t.componentHandle.getInstance){return t.componentHandle.getInstance()}throw new Error("Create component failed: no instance found in the component handle.")})};l.prototype._getComponentConfiguration=function(){var t=this.getInstantiationData().vizType;var e=this.getVizConfig();var o=n.get(["sap.platform.runtime","componentProperties"],t);o=r({},this._getComponentProperties(),o);var i={name:t["sap.ui5"].componentName,componentData:{properties:o},url:n.get(["sap.platform.runtime","componentProperties","url"],t),manifest:n.get(["sap.platform.runtime","componentProperties","manifest"],t),asyncHints:n.get(["sap.platform.runtime","componentProperties","asyncHints"],t)};var a=n.get(["sap.platform.runtime","includeManifest"],t);var s=n.get(["sap.platform.runtime","includeManifest"],e);if(a||s){i.manifest=r({},t,e)}if(typeof i.manifest==="object"){o.manifest=i.manifest}return i};l.prototype._getCustomComponentConfiguration=function(){var t=this._getComponentConfiguration();var e={loadCoreExt:true,loadDefaultDependencies:false,componentData:t.componentData,url:t.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:t,ui5ComponentName:t.name};return e};l.prototype._getComponentProperties=function(){return{title:this.getTitle(),subtitle:this.getSubtitle(),icon:this.getIcon(),info:this.getInfo(),indicatorDataSource:this.getIndicatorDataSource(),dataSource:this.getDataSource(),contentProviderId:this.getContentProviderId(),contentProviderLabel:this.getContentProviderLabel(),targetURL:this.getTargetURL(),displayFormat:this.getDisplayFormat(),numberUnit:this.getNumberUnit(),preview:this.getPreview()}};l.prototype._setComponentTileVisible=function(t){if(this._oComponent&&typeof this._oComponent.tileSetVisible==="function"){this._oComponent.tileSetVisible(t)}};l.prototype.setActive=function(t,e){this._setComponentTileVisible(t);if(e){this.refresh()}return this.setProperty("active",t,false)};l.prototype.setTileEditable=function(t){if(this._oComponent&&typeof this._oComponent.tileSetEditMode==="function"){this._oComponent.tileSetEditMode(t)}return this};l.prototype.setTileSizeBehavior=function(t){if(this._oComponent&&typeof this._oComponent.tileSetSizeBehavior==="function"){this._oComponent.tileSetSizeBehavior(t)}e.prototype.setTileSizeBehavior.apply(this,arguments);return this};l.prototype.setPreview=function(t){var o=!!this.getProperty("preview")&&!t;if(this._oComponent&&typeof this._oComponent.tileSetPreview==="function"){this._oComponent.tileSetPreview(t)}if(o){this.refresh()}e.prototype.setPreview.apply(this,arguments);return this};l.prototype.refresh=function(){if(this._oComponent&&typeof this._oComponent.tileRefresh==="function"){this._oComponent.tileRefresh()}};return l});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/VizInstanceLaunchPage", ["sap/base/util/Deferred","sap/ushell/ui/launchpad/VizInstance","sap/ushell/library","sap/ushell/ui/launchpad/VizInstanceRenderer"],function(e,t,a,i){"use strict";var n=a.DisplayFormat;var r=t.extend("sap.ushell.ui.launchpad.VizInstanceLaunchPage",{metadata:{library:"sap.ushell"},renderer:i});r.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oLoadDeferred=new e};r.prototype.load=function(){var e=this.getInstantiationData().launchPageTile;sap.ushell.Container.getServiceAsync("FlpLaunchPage").then(t=>new Promise((a,i)=>{const n=this.getPreview();t.getCatalogTileViewControl(e,n).done(a).fail(()=>{t.getTileView(e).done(a).fail(i)})}).then(a=>{this._setDisplayFormatFromTileSize(e,t);this.setContent(a);if(a.getComponentInstance?.()){a.getComponentInstance().setParent(this)}})).then(()=>{this._oLoadDeferred.resolve()}).catch(e=>{this._oLoadDeferred.reject(e)});return this._oLoadDeferred.promise};r.prototype.loaded=function(){return this._oLoadDeferred.promise};r.prototype._setDisplayFormatFromTileSize=function(e,t){var a=t.getTileSize(e);if(a==="1x2"){this.setDisplayFormat(n.StandardWide)}else{this.setDisplayFormat(n.Standard)}};return r});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/VizInstanceLink", ["sap/m/library","sap/ushell/library","sap/m/GenericTile","sap/ushell/ui/launchpad/VizInstance","sap/ui/thirdparty/hasher","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/m/ActionSheet","sap/ushell/EventHub","sap/ushell/Container"],function(e,t,i,a,r,o,s,l,p,n){"use strict";var u=e.GenericTileMode;var d=e.GenericTileScope;var h=t.AppType;var c=t.DisplayFormat;var y=i.extend("sap.ushell.ui.launchpad.VizInstanceLink",{metadata:{library:"sap.ushell",properties:{title:{type:"string",defaultValue:"",group:"Appearance",bindable:true},subtitle:{type:"string",defaultValue:"",group:"Appearance",bindable:true},editable:{type:"boolean",defaultValue:false,group:"Behavior",bindable:true},removable:{type:"boolean",defaultValue:true,group:"Behavior",bindable:true},active:{type:"boolean",group:"Misc",defaultValue:false},targetURL:{type:"string",group:"Misc"},mode:{type:"sap.m.GenericTileMode",group:"Appearance",defaultValue:u.LineMode},displayFormat:{type:"sap.ushell.DisplayFormat",defaultValue:c.Compact},supportedDisplayFormats:{type:"sap.ushell.DisplayFormat[]",defaultValue:[c.Compact]},dataHelpId:{type:"string",defaultValue:""},vizRefId:{type:"string",defaultValue:""},height:{type:"int",defaultValue:0},info:{type:"string",defaultValue:"",bindable:true},icon:{type:"sap.ui.core.URI",defaultValue:"",bindable:true},clickable:{type:"boolean",defaultValue:true,bindable:true},numberUnit:{type:"string",defaultValue:"",bindable:true},indicatorDataSource:{type:"object",defaultValue:undefined},dataSource:{type:"object",defaultValue:undefined},instantiationData:{type:"object",defaultValue:{}},contentProviderId:{type:"string",defaultValue:""},contentProviderLabel:{type:"string",defaultValue:""},keywords:{type:"string[]",defaultValue:[]},preview:{type:"boolean",defaultValue:false,bindable:true},vizConfig:{type:"object"}},defaultAggregation:"tileActions",aggregations:{tileActions:{type:"sap.m.Button",forwarding:{getter:"_getTileActionSheet",aggregation:"buttons"}},content:{type:"sap.ui.core.Control",multiple:false}},events:{beforeActionSheetOpen:{},afterActionSheetClose:{}}},renderer:i.getMetadata().getRenderer()});y.prototype.init=function(){i.prototype.init.apply(this,arguments);this.attachPress(this._handlePress,this);this._pLoad=Promise.resolve()};y.prototype.exit=function(){if(this._oActionSheet){this._oActionSheet.destroy()}};y.prototype._getTileActionSheet=function(){if(!this._oActionSheet){this._oActionSheet=new l;this._oActionSheet.attachAfterClose(this.fireAfterActionSheetClose.bind(this))}return this._oActionSheet};y.prototype._handlePress=function(){if(this.getEditable()){if(!this._getTileActionSheet().isOpen()){this.fireBeforeActionSheetOpen()}this._getTileActionSheet().openBy(this);return}var e=this.getTargetURL();if(!e){return}p.emit("UITracer.trace",{reason:"LaunchApp",source:"Link",data:{targetUrl:e}});if(e[0]==="#"){r.setHash(e)}else{var t=o.last("/core/shell/enableRecentActivity")&&o.last("/core/shell/enableRecentActivityLogging");if(t){var i={title:this.getTitle(),appType:h.URL,url:this.getTargetURL(),appId:this.getTargetURL()};n.getRendererInternal("fiori2").logRecentActivity(i)}s.openURL(e,"_blank")}};y.prototype.load=function(){return this._pLoad};y.prototype.loaded=function(){return this._pLoad};y.prototype.setVizRefId=function(e){if(!this.getDataHelpId()){this.data("tile-id",e,true)}return this.setProperty("vizRefId",e)};y.prototype.setDataHelpId=function(e){this.data("help-id",e,true);this.data("tile-id",e,true);return this.setProperty("dataHelpId",e)};y.prototype.setTitle=function(e){this.setHeader(e);return this.setProperty("title",e)};y.prototype.setSubtitle=function(e){this.setSubheader(e);return this.setProperty("subtitle",e)};y.prototype.setTargetURL=function(e){this.setUrl(e);return this.setProperty("targetURL",e)};y.prototype.setProperty=function(e,t,a){if(e==="title"){this.setProperty("header",t,a)}if(e==="subtitle"){this.setProperty("subheader",t,a)}if(e==="targetURL"){this.setProperty("url",t,a)}if(e==="editable"){if(t&&this.getRemovable()){this.setProperty("scope",d.Actions,a)}else if(t){this.setProperty("scope",d.ActionMore,a)}else{this.setProperty("scope",d.Display,a)}}if(e==="removable"){var r=this.getEditable();if(t&&r){this.setProperty("scope",d.Actions,a)}else if(r){this.setProperty("scope",d.ActionMore,a)}else{this.setProperty("scope",d.Display,a)}}return i.prototype.setProperty.apply(this,arguments)};y.prototype.getLayout=function(){return{columns:0,rows:0}};y.prototype.getAvailableDisplayFormats=a.prototype.getAvailableDisplayFormats;y.prototype.setTileEditable=a.prototype.setTileEditable;y.prototype.setTileSizeBehavior=a.prototype.setTileSizeBehavior;return y});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/launchpad/VizInstanceRenderer", [],function(){"use strict";var e={apiVersion:2};e.render=function(e,n){var t=this._prepareControlsToBeRendered(n);e.openStart("div",n);e.class("sapUshellVizInstance");if(n.getEditable()){e.class("sapUshellVizInstanceEdit")}e.openEnd();t.forEach(function(n){e.renderControl(n)});e.close("div")};e._prepareControlsToBeRendered=function(e){var n=[e.getContent()];if(e.getEditable()){if(e.getRemovable()){var t=e._getRemoveIconVBox();n.unshift(t)}var o=e._getActionModeButtonIconVBox();n.push(o)}return n};return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/OverflowListItem", ["sap/m/StandardListItem","sap/ui/core/CustomData","sap/ushell/library","sap/ushell/ui/shell/ShellHeadItem"],function(e,t,a,r){"use strict";var o=r.getMetadata().getProperties();var l=e.extend("sap.ushell.ui.shell.OverflowListItem",{metadata:{library:"sap.ushell",properties:{floatingNumber:{type:o.floatingNumber.type,group:o.floatingNumber.group,defaultValue:o.floatingNumber.defaultValue},floatingNumberMaxValue:{type:o.floatingNumberMaxValue.type,group:o.floatingNumberMaxValue.group,defaultValue:o.floatingNumberMaxValue.defaultValue},floatingNumberType:{type:o.floatingNumberType.type,group:o.floatingNumberType.group,defaultValue:o.floatingNumberType.defaultValue}}},renderer:{apiVersion:2}});l.prototype.init=r.prototype.init;l.prototype.onBeforeRendering=r.prototype.onBeforeRendering;l.prototype.tooltipFormatter=r.prototype.tooltipFormatter;l.prototype.floatingNumberFormatter=r.prototype.floatingNumberFormatter;l.prototype._getImage=function(){var a=this._oImage;if(!a){a=e.prototype._getImage.call(this)}if(this.getFloatingNumber()>0){a.addStyleClass("sapUshellShellHeadItmCounter");a.addCustomData(new t({key:"counter-content",value:this.floatingNumberFormatter(),writeToDom:true}))}else{a.removeStyleClass("sapUshellShellHeadItmCounter")}this._oImage=a;return this._oImage};return l},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellAppTitle", ["sap/m/Bar","sap/m/Button","sap/m/Label","sap/m/HBox","sap/m/VBox","sap/m/library","sap/m/Popover","sap/m/ResponsivePopover","sap/m/Title","sap/m/ToggleButton","sap/ui/core/Element","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ui/Device","sap/ui/performance/Measurement","sap/ushell/Config","sap/ushell/Container","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/state/StateManager","sap/ushell/state/ShellModel"],function(e,t,o,n,s,l,i,p,r,a,h,u,c,d,g,y,v,A,f,M,T,S){"use strict";const C=A.AppTitleState;const P=A.AllMyAppsState;const _=l.PlacementType;const m=T.ShellMode;var N=t.extend("sap.ushell.ui.shell.ShellAppTitle",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Data",defaultValue:null},subTitle:{type:"string",group:"Data",defaultValue:null},showAppTitle:{type:"boolean",group:"Data",defaultValue:true},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:"sap-icon://folder"}},associations:{navigationMenu:{type:"sap.ushell.ui.shell.ShellNavigationMenu"},allMyApps:{type:"sap.ui.core.mvc.View"},newExperienceControl:{type:"sap.ui.core.Control"}},events:{textChanged:{deprecated:true}}},renderer:{apiVersion:2,render:function(e,t){var o=t._getControlVisibilityAndState();var n=t.getText();e.openStart("div",t);e.class("sapUshellHeadTitle");if(o||d.system.phone){e.class("sapUshellAppTitleClickable")}e.openEnd();e.openStart("h1");e.class("sapUiPseudoInvisibleText");e.attr("aria-level","1");e.openEnd();e.text(n||"");e.close("h1");e.openStart("div",t.getId()+"-button");e.class("sapUshellAppTitle");if(o||d.system.phone){e.attr("tabindex","0")}if(t.getTooltip_AsString()){e.attr("title",t.getTooltip_AsString())}if(o){e.attr("role","button");e.attr("aria-haspopup","dialog");e.attr("aria-label",n)}e.openEnd();if(t.getShowAppTitle()){e.openStart("span");e.class("sapUshellAppTitleText");e.openEnd();e.text(n||"");e.close("span")}if(o&&n){e.openStart("span");e.class("sapUshellShellHeadAction");e.openEnd();e.renderControl(t.oIcon);e.close("span")}e.close("div");e.close("div")}}});N.prototype.init=function(){t.prototype.init.apply(this,arguments);this.oIcon=c.createControlByURI(c.getIconURI("slim-arrow-down"));this.oIcon.addStyleClass("sapUshellAppTitleMenuIcon");this._screenWidth=null;if(d.system.desktop){this.addEventDelegate({onkeydown:function(e){if(e.altKey&&e.keyCode===40){this.onclick(e)}}.bind(this)})}if(y.last("/core/shellBar/enabled")){d.resize.attachHandler(N._showAppTitleText.bind(this))}};N._showAppTitleText=function(e){const t=e.width;if(!this._screenWidth||Math.abs(this._screenWidth-t)>50){this.setShowAppTitle(true);this._screenWidth=t}};N.prototype._getNewExperienceWrapper=function(){if(!this._oNewExperienceWrapper){this._oNewExperienceWrapper=new s({renderType:"Bare"});this._oNewExperienceWrapper.addStyleClass("sapUiSmallMarginBeginEnd");this.addDependent(this._oNewExperienceWrapper)}return this._oNewExperienceWrapper};N.prototype.onBeforeRendering=function(){if(!y.last("/core/shellBar/enabled")){this.setShowAppTitle(d.media.getCurrentRange(d.media.RANGESETS.SAP_STANDARD).name!=="Phone")}};N.prototype.getFocusDomRef=function(){return this.getDomRef("button")};N._getCurrentState=function(){return S.getConfigModel().getProperty("/shellAppTitleState")};N._setCurrentState=function(e){S.getConfigModel().setProperty("/shellAppTitleState",e)};N.prototype.onclick=function(e){e.preventDefault();this.firePress();if(!this._getControlVisibilityAndState()){if(d.system.phone){window.hasher.setHash(y.last("/core/shellHeader/rootIntent"))}return}if(N._getCurrentState()===C.AllMyAppsOnly){g.start("FLP:ShellAppTitle.onClick","Click ShellAppTitle in HOME state, Launching AllMyApps","FLP");this._openCloseAllMyAppsPopover();return}this._openCloseNavMenuPopover()};N.prototype._openCloseAllMyAppsPopover=function(){if(!this.oAllMyAppsPopover){this.oAllMyAppsPopover=this._createAllMyAppsPopover()}if(this.oAllMyAppsPopover){if(this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close()}else{this.oAllMyAppsPopover.openBy(this)}}};N.prototype._openCloseNavMenuPopover=function(){if(!this.oNavMenuPopover){this.oNavMenuPopover=this._createNavMenuPopover()}N._setCurrentState(C.ShellNavMenu);if(this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close()}else{this.oNavMenuPopover.openBy(this)}if(this.oNavMenuPopover.getFooter()){const e=T.getShellMode()===m.Default;const t=T.isLegacyHome();this.oNavMenuPopover.getFooter().setVisible(e||t)}};N.prototype._getControlVisibilityAndState=function(){g.start("FLP:ShellAppTitle.getControlVisibilityAndState","Check AllMyApps and NavShellMenu visibility","FLP");const e=T.getShellMode()===m.Default;const t=T.isLegacyHome();var o=this._isNavMenuEnabled();var n=o;if(e||t){var s=y.last("/core/services/allMyApps/enabled");n=s||o;if(s&&o){N._setCurrentState(C.ShellNavMenu)}else if(!s&&o){N._setCurrentState(C.ShellNavMenuOnly)}else if(s&&!o){N._setCurrentState(C.AllMyAppsOnly)}}else{N._setCurrentState(C.ShellNavMenuOnly)}g.end("FLP:ShellAppTitle.getControlVisibilityAndState");return n};N.prototype._createAllMyAppsPopover=function(){var e=h.getElementById(this.getAllMyApps());if(!e){return null}var t=new p("sapUshellAllMyAppsPopover",{placement:_.Bottom,title:"",showArrow:true,customHeader:this._getPopoverHeader(),verticalScrolling:false,showHeader:{path:"configModel>/shellAppTitleState",formatter:function(e){return e!==C.ShellNavMenu}},content:[e],contentHeight:"28rem",contentWidth:"56rem"}).addStyleClass("sapContrastPlus");t.setModel(S.getConfigModel(),"configModel");t.attachBeforeOpen(()=>{v.getServiceAsync("AppLifeCycle").then(e=>{if(e.getCurrentApplication()?.homePage){const e=h.getElementById(this.getNewExperienceControl());if(e){const o=this._getNewExperienceWrapper();o.addItem(e);t.insertContent(o,0)}else if(this._oNewExperienceWrapper){this.addDependent(this._oNewExperienceWrapper)}}})});t.attachAfterOpen(function(){var e=t.getCustomHeader();var o=e.getContentLeft()[0];var n=e.getContentLeft()[1];if(n.getVisible()){n.firePress();n.setPressed(true)}o.focus()});t.attachAfterClose(this._afterCloseAllMyAppsPopover.bind(this));return t};N.prototype._afterCloseAllMyAppsPopover=function(){if(this._bOpenNavigationMenu===true){this._bOpenNavigationMenu=false;this.oNavMenuPopover.openBy(this)}else if(!d.system.phone){this.focus()}};N.prototype._createNavMenuPopover=function(){var e=h.getElementById(this.getNavigationMenu());this.oTitle=new r("navMenuInnerTitle",{wrapping:true,text:"{shellModel>/application/title}"});this.oSecondTitle=new o("navMenuInnerSecondTitle",{text:"{shellModel>/header/secondTitle}",visible:"{= !!${shellModel>/header/secondTitle}}",wrapping:true});this.oIconControl=new u({src:"{shellModel>/application/icon}"});const t=new s({items:[this.oTitle,this.oSecondTitle]}).addStyleClass("sapUshellNavTitleBox");const l=new s({items:[this.oIconControl]}).addStyleClass("sapUiContentPadding");const p=new n("navMenuTitleBar",{width:"100%",items:[l,t]});var a=new i("sapUshellAppTitlePopover",{placement:_.Bottom,showArrow:true,showHeader:false,contentWidth:"20rem",horizontalScrolling:false,content:[p,e]}).addStyleClass("sapContrastPlus");if(y.last("/core/services/allMyApps/enabled")){a.setFooter(this._getPopoverFooterContent())}a.addStyleClass("sapUshellAppTitleNavigationMenuPopover");a.setModel(S.getModel(),"shellModel");S.getConfigModel().setProperty("/allMyAppsMasterLevel",P.FirstLevel);a.attachBeforeOpen(function(){e._beforeOpen();const t=h.getElementById(this.getNewExperienceControl());if(t){const e=this._getNewExperienceWrapper();e.addItem(t);a.insertContent(e,1)}else if(this._oNewExperienceWrapper){this.addDependent(this._oNewExperienceWrapper)}}.bind(this));a.attachAfterOpen(function(){e.$().on("touchmove.scrollFix",function(e){e.stopPropagation()});e._afterOpen()});a.attachAfterClose(this._afterCloseNavigationMenuPopover.bind(this));return a};N.prototype._afterCloseNavigationMenuPopover=function(){if(this._bOpenAllMyApps){this._bOpenAllMyApps=false;this._openCloseAllMyAppsPopover()}else if(!d.system.phone){this.focus()}};N.prototype._setAllMyAppsTitle=function(e){const t=N._getCurrentState();const o=S.getModel().getProperty("/header/secondTitle");if(o&&(t==="AllMyAppsOnly"||t==="AllMyApps")){e=`${e} - ${o}`}r.prototype.setText.apply(this,[e])};N.prototype._getPopoverHeader=function(){var t=new r({text:f.i18n.getText("allMyApps_headerTitle"),level:"H1"});t.setText=this._setAllMyAppsTitle.bind(t);var o=new e("sapUshellShellAppPopoverHeader",{contentLeft:[this._createPopoverBackButton(),this._createPopoverToggleButton()],contentMiddle:[t]});return o};N.prototype.onAfterRendering=function(){this._adjustAppTitleTooltip()};N.prototype._adjustAppTitleTooltip=function(){const e=this.getDomRef("button");const t=e&&e.firstChild;if(t){let e;const o=y.last("/core/services/allMyApps/enabled");const n=T.getShellMode()===m.Default;const s=T.isLegacyHome();const l=(n||s)&&o;const i=h.getElementById(this.getNavigationMenu());const p=i&&i.getItems()&&i.getItems().length>0;if(p){e=f.i18n.getText("shellNavMenu_openMenuTooltip_navigationMenu")}else if(l){e=f.i18n.getText("shellNavMenu_openMenuTooltip_allMyApps")}else{const o=t.offsetWidth<t.scrollWidth;e=o?this.getText():null}if(this.getTooltip()!==e){this.setTooltip(e)}}};N.prototype._createPopoverBackButton=function(){var e=new t("sapUshellAppTitleBackButton",{icon:c.getIconURI("nav-back"),press:[this._popoverBackButtonPressHandler,this],tooltip:f.i18n.getText("backBtn_tooltip"),visible:this.getAllMyAppsController().getBackButtonVisible()});e.addStyleClass("sapUshellCatalogNewGroupBackButton");return e};N.prototype._popoverBackButtonPressHandler=function(){var e=this.getAllMyAppsController();var t=e.getCurrentState();if(t===P.FirstLevel||t===P.FirstLevelSpread){if(N._getCurrentState()!==C.AllMyAppsOnly){N._setCurrentState(C.ShellNavMenu);this.oAllMyAppsPopover.close();this._bOpenNavigationMenu=true}}else if(t===P.SecondLevel){e.switchToInitialState()}else{e.handleSwitchToMasterAreaOnPhone()}e.updateHeaderButtonsState()};N.prototype._createPopoverToggleButton=function(){var e=this.getAllMyAppsController();var t=new a("sapUshellAllMyAppsToggleListButton",{icon:c.getIconURI("sap-icon://menu2"),press:function(t){e.switchToInitialState();this.setTooltip(t.getParameter("pressed")?f.i18n.getText("ToggleButtonHide"):f.i18n.getText("ToggleButtonShow"))},tooltip:f.i18n.getText("ToggleButtonShow"),visible:e.getToggleListButtonVisible()});d.media.attachHandler(function(){t.setVisible(e.getToggleListButtonVisible())},this,d.media.RANGESETS.SAP_STANDARD);t.addStyleClass("sapUshellAllMyAppsToggleListButton");return t};N.prototype._getPopoverFooterContent=function(){var o=new t("allMyAppsButton",{text:f.i18n.getText("allMyApps_launchingButtonTitle"),press:this._allMyAppsButtonPressHandler.bind(this),visible:{path:"shellConfig>/shellAppTitleState",formatter:function(e){return e===C.ShellNavMenu}}});var n=new e("shellpopoverFooter",{contentMiddle:[o]});this.addCustomData(o,"role","button");this.addCustomData(o,"aria-label",f.i18n.getText("allMyApps_launchingButtonTitle"));return n};N.prototype._allMyAppsButtonPressHandler=function(){if(h.getElementById(this.getAllMyApps())){g.start("FLP:ShellNavMenu.footerClick","Click the footer of ShellNavMenu, Launching AllMyApps","FLP");N._setCurrentState(C.AllMyApps);this.oNavMenuPopover.close();this._bOpenAllMyApps=true}};N.prototype._isNavMenuEnabled=function(){var e=h.getElementById(this.getNavigationMenu());return e?e.getItems()&&e.getItems().length>0:false};N.prototype.addCustomData=function(e,t,o){e.addCustomData(new M({key:t,value:o,writeToDom:true}))};N.prototype.close=function(){if(this.oNavMenuPopover&&this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close()}if(this.oAllMyAppsPopover&&this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close()}};N.prototype.setTooltip=function(e){this.setAggregation("tooltip",e);this.oIcon.setTooltip(e)};N.prototype.getAllMyAppsController=function(){var e=h.getElementById(this.getAllMyApps());return e.getController()};N.prototype.onkeyup=function(e){if(e.keyCode===32){this.onclick(e)}};N.prototype.onsapenter=N.prototype.onclick;N.prototype.exit=function(){var e=h.getElementById(this.getNavigationMenu());var t=h.getElementById(this.getAllMyApps());if(e){e.destroy()}if(t){t.destroy()}if(this.oAllMyAppsPopover){this.oAllMyAppsPopover.destroy()}if(this.oNavMenuPopover){this.oNavMenuPopover.destroy()}if(this.oIcon){this.oIcon.destroy()}};return N});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ShellHeadItem", ["sap/base/util/ObjectPath","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/core/InvisibleText","sap/ushell/library","sap/ushell/resources"],function(e,t,a,i,r,o){"use strict";var n=r.FloatingNumberType;var l=t.extend("sap.ushell.ui.shell.ShellHeadItem",{metadata:{library:"sap.ushell",properties:{startsSection:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},showSeparator:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},enabled:{type:"boolean",group:"Appearance",defaultValue:true},selected:{type:"boolean",group:"Appearance",defaultValue:false},showMarker:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},target:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Accessibility",defaultValue:null},ariaHidden:{type:"boolean",group:"Accessibility",defaultValue:false},ariaHaspopup:{type:"string",group:"Accessibility",defaultValue:""},text:{type:"string",group:"Appearance",defaultValue:null},floatingNumber:{type:"int",group:"Appearance",defaultValue:null},floatingNumberMaxValue:{type:"int",group:"Appearance",defaultValue:999},floatingNumberType:{type:"sap.ushell.FloatingNumberType",group:"Appearance",defaultValue:n.None}},events:{press:{}}},renderer:{apiVersion:2,render:function(e,t){var i=t.getTarget();e.openStart("a",t);e.attr("tabindex","0");if(i){e.attr("href",i)}e.attr("role",i?"link":"button");var r=t.getAriaLabel();if(r){e.attr("aria-label",r)}var o=t.getAriaHidden();if(o){e.attr("aria-hidden",o)}var n=t.getAriaHaspopup();if(n){e.attr("aria-haspopup",n)}e.attr("aria-describedby",t._oAriaDescribedbyText.getId());if(t.getTooltip_AsString()){e.attr("title",t.getTooltip_AsString())}if(t.getFloatingNumber()>0){e.attr("data-counter-content",t.floatingNumberFormatter());e.class("sapUshellShellHeadItmCounter")}e.class("sapUshellShellHeadItm");if(!t.getEnabled()){e.class("sapUshellShellHeadItmDisabled")}if(t.getSelected()){e.class("sapUshellShellHeadItmSel")}var l=t.getText();var s=t.getTooltip_AsString();if(l||s){e.attr("title",s||l)}e.openEnd();e.openStart("span");e.class("sapUshellShellHeadItmCntnt");var u=t.getIcon();var p=a.isIconURI(u)&&a.getIconInfo(u);if(p){e.style("font-family",p.fontFamily);e.openEnd();e.text(p.content)}else{e.openEnd();e.voidStart("img");e.attr("id",t.getId()+"-img-inner");e.attr("src",u);e.voidEnd()}e.close("span");e.close("a")}}});l.prototype.init=function(){this._oAriaDescribedbyText=new i(this.getId()+"-describedby").toStatic();this.addDependent(this._oAriaDescribedbyText)};l.prototype.onBeforeRendering=function(){switch(this.getFloatingNumberType()){case n.None:this._oAriaDescribedbyText.setText("");break;default:var e=this.getFloatingNumber();if(!e){this._oAriaDescribedbyText.setText("")}else{var t=this.getFloatingNumberMaxValue();this._oAriaDescribedbyText.setText(e>t?o.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",[t]):o.i18n.getText("NotificationToggleButton.NewNotifications",[e]))}break}};l.prototype.tooltipFormatter=function(e){var t=typeof e!=="undefined"?e:this.getFloatingNumber();var a=this.getFloatingNumberMaxValue();switch(this.getFloatingNumberType()){default:case n.None:return"";case n.Notifications:if(!t){return o.i18n.getText("NotificationToggleButton.NoNewNotifications")}return t>a?o.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",[a]):o.i18n.getText("NotificationToggleButton.NewNotifications",[t]);case n.OverflowButton:var i=o.i18n.getText("shellHeaderOverflowBtn_tooltip");if(!t){return i}i+=" ("+(t>a?o.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",[a]):o.i18n.getText("NotificationToggleButton.NewNotifications",[t]))+")";return i}};l.prototype.floatingNumberFormatter=function(e){var t=typeof e!=="undefined"?e:this.getFloatingNumber();var a=this.getFloatingNumberMaxValue();return t>a?a+"+":t.toString()};l.prototype.onclick=function(e){if(this.getEnabled()){this.firePress();if(!this.getTarget()){e.preventDefault()}}};l.prototype.onkeyup=function(e){var t=e.originalEvent;var a=t.key;var i=t.shiftKey;if(["Enter"," "].includes(a)&&!i){this.onclick(e)}};e.set("sap.ui.unified.ShellHeadItem",l);return l},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui/shell/ToolAreaItem", ["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/ui/core/IconPool","sap/ushell/library"],function(jQuery,e,t){"use strict";var a=e.extend("sap.ushell.ui.shell.ToolAreaItem",{metadata:{library:"sap.ushell",properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false},text:{type:"string",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},expandable:{type:"boolean",group:"Appearance",defaultValue:false}},events:{press:{},expand:{}}},renderer:{apiVersion:2,render:function(e,a){var l;e.openStart("div",a);if(!a.getIcon()){e.class("sapUshellToolAreaItmTextOnly")}else{e.class("sapUshellToolAreaItm")}if(!a.getVisible()){e.class("sapUshellShellHidden")}if(a.getAriaLabel()){e.accessibilityState(a,{label:this.getAriaLabel(),role:"button"})}var s=a.getTooltip_AsString();if(s){e.attr("title",s)}e.openEnd();if(a.getIcon()){l=t.createControlByURI(a.getIcon());l.setUseIconTooltip(false);l.addStyleClass("sapUshellToolAreaItemIcon");e.renderControl(l)}if(a.getText()){e.openStart("span");e.class("sapUshellToolAreaItemText");e.openEnd();e.text(a.getText());e.close("span")}if(a.getExpandable()){this.renderExpandable(e)}e.close("div")},renderExpandable:function(e){var a=t.createControlByURI("sap-icon://icon-dropdown");a.addStyleClass("sapUshellToolAreaItemExpandable");e.renderControl(a)}}});a.prototype.onclick=function(e){if(this.$().parent().hasClass("sapUshellToolAreaItemSelected")){this.setSelected(false)}else{this.setSelected(true)}if(e.target.className.indexOf("sapUshellToolAreaItemExpandable")>0){this.fireExpand()}else{this.firePress()}};a.prototype.onsapenter=a.prototype.onclick;a.prototype.setExpandable=function(e){e=!!e;this.setProperty("expandable",e,true);this.$().toggleClass("sapUshellToolAreaItemExpandable",e)};a.prototype.setSelected=function(e){e=!!e;if(e){var t=jQuery(".sapUshellToolAreaItemSelected");t.each(function(){jQuery(this).removeClass("sapUshellToolAreaItemSelected")})}this.setProperty("selected",e,true);this.$().parent().toggleClass("sapUshellToolAreaItemSelected",e)};a.prototype.setVisible=function(e){var t=this.getParent()&&this.getParent().getDomRef();this.setProperty("visible",!!e,t);this.$().toggleClass("sapUshellShellHidden",!e)};a.prototype.setAriaLabel=function(e){this.setProperty("ariaLabel",e);return this};return a});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/ShellUIService", ["sap/base/Log","sap/base/util/extend","sap/base/util/isPlainObject","sap/ui/base/EventProvider","sap/ui/core/service/Service","sap/ui/thirdparty/hasher","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/services/AppConfiguration","sap/ushell/state/ShellModel","sap/ushell/state/StateManager","sap/ushell/utils","sap/ushell/utils/UrlParsing"],(e,t,i,a,n,s,r,l,o,c,h,u,f,d)=>{"use strict";const p=u.LaunchpadState;const g=u.Operation;const _=u.ShellMode;const{Default:v,Embedded:y}=_;const A="backNavigationChanged";const b="serviceDestroyed";const S=n.extend("sap.ushell.ui5service.ShellUIService",{constructor:function(){n.apply(this,arguments);this._oEventProvider=new a;this._bIsActive=true;this._bDestroyed=false;this._bInitialized=false;this._sLastTitle=null;this._aLastHierarchy=null;this._aLastRelatedApps=null;this._fnLastBackNavigation=null;this._bEnableAutoTitle=false;this._bEnableAutoHierarchy=false},initService:function(e){if(!e){if(!this._sLastTitle){this._initTitle()}if(!this._aLastHierarchy){this.setHierarchy()}if(!this._aLastRelatedApps){this.setRelatedApps()}if(!this._fnLastBackNavigation){this.setBackNavigation()}}const t=this.getContext().scopeObject;if(this._shouldEnableAutoHierarchy(t)){this._enableAutoHierarchy(t)}if(this._shouldEnableAutoTitle(t)){this._enableAutoTitle(t)}this._bInitialized=true},resetService:function(){this._sLastTitle=null;this._aLastHierarchy=null;this._aLastRelatedApps=null;this._fnLastBackNavigation=null;this._bInitialized=false},_isCallAllowed:function(){if(this._bDestroyed){e.error("The ShellUIService has been destroyed and cannot be used anymore.",null,"sap.ushell.ui5service.ShellUIService");return false}if(!this._bIsActive){e.warning("The ShellUIService is currently inactive and calls will be ignored.",null,"sap.ushell.ui5service.ShellUIService");return false}return true},setHierarchy:function(e){this._preventOverrideOfAutoHierarchy();if(!this._isCallAllowed()){return}if(typeof e!=="undefined"){this._ensureArrayOfObjectOfStrings(e,"setHierarchy")}this._changeHierarchy(e)},_initTitle:function(){if(!this._isCallAllowed()){return}const e=s.getHash()||"";const t=e.startsWith("Shell-startIntent");this._changeTitleAdditionalInformation();this._changeTitle("",t)},setTitle:function(e,t){this._preventOverrideOfAutoTitle();if(!this._isCallAllowed()){return}if(typeof e!=="undefined"&&typeof e!=="string"){throw new Error("'setTitle' was called with invalid arguments. The parameter should be a string")}this._changeTitleAdditionalInformation(t);this._changeTitle(e)},setBackNavigation:function(e){if(!this._isCallAllowed()){return}if(typeof e!=="undefined"&&typeof e!=="function"){throw new Error("'setBackNavigation' was called with invalid arguments. The parameter should be a function")}const t=this.getContext().scopeObject;this._oEventProvider.fireEvent(A,{data:e,component:t});this._fnLastBackNavigation=e},getTitle:function(){if(!this._isCallAllowed()){return}return h.getModel().getProperty("/application/title")},setRelatedApps:function(e){if(!this._isCallAllowed()){return}if(typeof e!=="undefined"){this._ensureArrayOfObjectOfStrings(e,"setRelatedApps")}this._changeRelatedApps(e)},attachBackNavigationChanged:function(...e){this._oEventProvider.attachEvent(A,...e)},detachBackNavigationChanged:function(...e){this._oEventProvider.detachEvent(A,...e)},attachServiceDestroyed:function(...e){this._oEventProvider.attachEvent(b,...e)},detachServiceDestroyed:function(...e){this._oEventProvider.detachEvent(b,...e)},_changeHierarchy:function(e){let i=[];if(!e){e=[]}const a=this._getHierarchyDefaultValue();e.forEach((e,a)=>{i[a]=t({},e)});i=i.concat(a);if(u.isLegacyHome()){u.updateBaseStates([p.Home],"application.hierarchy",g.Set,i)}u.updateCurrentState("application.hierarchy",g.Set,i);this._aLastHierarchy=i},_changeRelatedApps:function(e){if(!e){e=[]}if(u.isLegacyHome()){u.updateBaseStates([p.Home],"application.relatedApps",g.Set,e)}u.updateCurrentState("application.relatedApps",g.Set,e);this._aLastRelatedApps=e},_changeTitle:function(e,t){if(!e&&!t){e=this._getTitleDefaultValue()}if(u.isLegacyHome()){u.updateBaseStates([p.Home],"application.title",g.Set,e)}u.updateCurrentState("application.title",g.Set,e);f.setPerformanceMark("FLP -- title change");l.emit("TitleChanged",e);this._sLastTitle=e},_changeTitleAdditionalInformation:function(e){const t={headerText:e?.headerText||"",additionalContext:e?.additionalContext||"",searchTerm:e?.searchTerm||"",searchScope:e?.searchScope||""};if(u.isLegacyHome()){u.updateBaseStates([p.Home],"application.titleAdditionalInformation",g.Set,t)}u.updateCurrentState("application.titleAdditionalInformation",g.Set,t);f.setPerformanceMark("FLP -- titleAdditionalInformation change");l.emit("TitleAdditionalInformationChanged",t)},_getTitleDefaultValue:function(){let e="";const t=c.getMetadata();if(t&&t.title){e=t.title}return e},_getHierarchyDefaultValue:function(){const e=[];const t=r.last("/core/shellHeader/rootIntent");const i=u.getLaunchpadState();const a=u.getShellMode();if(i===p.App&&[v,y].includes(a)){e.push({icon:"sap-icon://home",title:o.i18n.getText("actionHomePage"),intent:t?`#${t}`:"#"});const i=r.last("/core/spaces/currentSpaceAndPage");if(i!==undefined){e.splice(0,0,{icon:"sap-icon://space-navigation",title:i.pageTitle,subtitle:i.pageTitle!==i.spaceTitle?i.spaceTitle:undefined,intent:`#${i.hash}`})}}return e},_shouldEnableAutoHierarchy:function(e){if(typeof e.getManifestEntry!=="function"){return false}const t=e.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setHierarchy");return t==="auto"},_enableAutoHierarchy:function(t){const i=t.getRouter&&t.getRouter();if(!i){e.error("Could not enable automatic setHierarchy on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return}this._bEnableAutoHierarchy=true;i.attachTitleChanged(function(e){const t=e.getParameter("history");const i=this._getCurrentShellHashWithoutAppRoute();const a=t.reverse().map(e=>({title:e.title,intent:`${i}&/${e.hash}`}));this._bSkipAutoHierarchyCheck=true;this.setHierarchy(a)},this)},_preventOverrideOfAutoHierarchy:function(){if(!this._bInitialized){return}if(this._bSkipAutoHierarchyCheck){this._bSkipAutoHierarchyCheck=false;return}const e=this._shouldEnableAutoHierarchy(this.getContext().scopeObject);if(e){throw new Error("Cannot set hierarchy manually - Auto hierarchy is enabled")}},_shouldEnableAutoTitle:function(e){if(typeof e.getManifestEntry!=="function"){return false}const t=e.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setTitle");return t==="auto"},_enableAutoTitle:function(t){const i=t.getRouter&&t.getRouter();if(!i){e.error("Could not enable automatic setTitle on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return}this._bEnableAutoTitle=true;const a=i.getTitleHistory()[0];if(a&&a.title){setTimeout(()=>{this._bSkipAutoTitleCheck=true;this.setTitle(a.title)},0)}i.attachTitleChanged(function(e){const t=e.getParameter("title");this._bSkipAutoTitleCheck=true;this.setTitle(t)},this)},_preventOverrideOfAutoTitle:function(){if(!this._bInitialized){return}if(this._bSkipAutoTitleCheck){this._bSkipAutoTitleCheck=false;return}const e=this._shouldEnableAutoTitle(this.getContext().scopeObject);if(e){throw new Error("Cannot set title manually - Auto title is enabled")}},_getCurrentShellHashWithoutAppRoute:function(){const t=`#${s.getHash()}`;const i=d.getShellHash(t);if(!i){e.error("Cannot get the current shell hash",`UrlParsing service returned a falsy value for ${t}`,"sap.ushell.ui5service.ShellUIService");return""}return`#${i}`},_ensureArrayOfObjectOfStrings:function(e,t){const a=Array.isArray(e)&&e.every(e=>i(e)&&Object.keys(e).length>0&&Object.keys(e).every(t=>typeof e[t]==="string"));if(!a){throw new Error(`'${t}' was called with invalid parameters. An array of non-empty objects with string values is expected`)}},setApplicationFullWidth:function(e){if(!this._isCallAllowed()){return}c.setApplicationFullWidthInternal(e)},setActive:function(e){this._bIsActive=e},getActive:function(){return this._bIsActive},exit:function(){this._oEventProvider.fireEvent(b);this._oEventProvider.destroy();this._bDestroyed=true}});return S});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/ui5service/ShellUIServiceFactory", ["sap/base/util/Deferred","sap/ui/base/EventProvider","sap/ui/core/Component","sap/ui/core/service/ServiceFactory","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/ui5service/ShellUIService","sap/ushell/utils"],(e,t,n,s,i,o,c,r)=>{"use strict";const a="backNavigationChanged";const l=s.extend("sap.ushell.ui5service.ShellUIServiceFactory",{constructor:function(){s.apply(this,arguments);this._mServiceInstances=new Map;this._oGlobalServiceInstance=null;this._oCurrentApplication=null;this._oEventProvider=new t;this._aDoables=[]},init:async function(){this._AppLifeCycle=await i.getServiceAsync("AppLifeCycle");this._AppLifeCycle.attachAppLoaded(this._handleAppOpened,this);const e=o.on("reloadCurrentApp").do(this._handleReloadCurrentApp.bind(this));this._aDoables.push(e);await this.createInstanceInternal()},_setInitialAppValues:function(){if(this._oCurrentApplication?.componentInstance){const e=this._mServiceInstances.get(this._oCurrentApplication.componentInstance.getId());if(e?.instance){return}}if(r.isFlpHomeIntent()){return}this._oGlobalServiceInstance.getContext().scopeObject=this._oCurrentApplication.componentInstance||{};this._oGlobalServiceInstance.initService()},_handleAppOpened:function(e){this._oCurrentApplication=e.getParameters();this._setServiceActive(null);if(this._oCurrentApplication?.componentInstance){const e=this._oCurrentApplication.componentInstance;this._setServiceActive(e);this._resolveServiceInstance(e)}this._setInitialAppValues()},restore:function(e){const t=e.app;if(!t){this._setServiceActive(null);return}this._oCurrentApplication={componentInstance:t};this._setServiceActive(this._oCurrentApplication.componentInstance)},_handleReloadCurrentApp:function(){this._oCurrentApplication=null},_handleServiceDestroyed:function(e,t){this._mServiceInstances.delete(t.id)},attachBackNavigationChanged:function(...e){this._oEventProvider.attachEvent(a,...e)},detachBackNavigationChanged:function(...e){this._oEventProvider.detachEvent(a,...e)},_handleBackNavigationChanged:function(e){const t=e.getParameters();this._oEventProvider.fireEvent(a,t)},createInstance:async function(t){if(!t||!t.scopeObject){throw new Error("No service context provided")}const n=t.scopeObject.getId();const s=this._mServiceInstances.get(n);if(s){return s.deferred.promise}t.settings=t.settings||{};t.settings.isGlobal=false;t.settings.id=n;const i=new c(t);i.attachBackNavigationChanged(this._handleBackNavigationChanged,this);i.attachServiceDestroyed({id:n},this._handleServiceDestroyed,this);const o={instance:i,scopeObject:t.scopeObject||{},deferred:new e,resolved:false};this._mServiceInstances.set(n,o);const r=this._getRootComponent(t.scopeObject);if(this._isComponentActive(r)){this._resolveServiceInstance(r)}return o.deferred.promise},_getRootComponent:function(e){if(!e){return null}const t=n.getOwnerComponentFor(e);if(!t){return e}if(t.isA("sap.ushell.renderer.Renderer")){return e}return this._getRootComponent(t)},_isComponentActive:function(e){const t=this._oCurrentApplication?.componentInstance;if(!t||!e){return false}return e===t},createInstanceInternal:async function(){if(this._oGlobalServiceInstance){return this._oGlobalServiceInstance}const e={scopeObject:{getId:function(){return""}},scopeType:"component",settings:{isGlobal:true}};this._oGlobalServiceInstance=new c(e);this._oGlobalServiceInstance.attachBackNavigationChanged(this._handleBackNavigationChanged,this);return this._oGlobalServiceInstance},_setServiceActive(e){this._mServiceInstances.forEach(t=>{const n=this._getRootComponent(t.scopeObject);if(!e){t.instance.setActive(false)}else if(n===e){t.instance.setActive(true)}else{t.instance.setActive(false)}})},_resolveServiceInstance(e){if(!e){return}this._mServiceInstances.forEach(t=>{const n=this._getRootComponent(t.scopeObject);const s=n===e;if(s&&!t.resolved){const n=this._hasResolvedInstances(e);t.instance.initService(n);t.resolved=true;t.deferred.resolve(t.instance)}})},_hasResolvedInstances(e){if(!e){return false}return Array.from(this._mServiceInstances.values()).some(t=>{const n=this._getRootComponent(t.scopeObject);const s=n===e;return s&&t.resolved})},destroy(){s.prototype.destroy.apply(this,arguments);this._aDoables.forEach(e=>{e.off()});this._AppLifeCycle?.detachAppLoaded?.(this._handleAppOpened,this);this._mServiceInstances.forEach(e=>{e.instance.destroy()});this._oGlobalServiceInstance?.destroy?.();this._oEventProvider.destroy();this._oGlobalServiceInstance=null;this._mServiceInstances=null;this._oCurrentApplication=null;this._AppLifeCycle=null;this._aDoables=null},reset(){this.destroy();this._mServiceInstances=new Map;this._oEventProvider=new t;this._aDoables=[]}});return new l});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils", ["sap/base/Log","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/uid","sap/ui/Device","sap/ui/core/Element","sap/ui/core/EventBus","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/base/util/deepClone","sap/ushell/utils/UrlParsing","sap/ushell/utils/objectOperations","sap/ushell/utils/type","sap/ushell/renderer/History","sap/ushell/renderers/fiori2/History"],function(e,t,r,n,i,a,o,jQuery,s,u,l,c,p,f,d){"use strict";var g={};g.isArray=p.isArray;g.isPlainObject=p.isPlainObject;g.isDefined=p.isDefined;g.clone=u;g.getMember=c.getMember;g.updateProperties=c.updateProperties;g.getNestedObjectProperty=c.getNestedObjectProperty;g.deepFreeze=function(e){Object.keys(e).filter(r=>{const n=e[r];return t(n)||Array.isArray(n)}).forEach(t=>{e[t]=this.deepFreeze(e[t])});return Object.freeze(e)};g.removeDuplicatedActions=function(e){if(Array.isArray(e)){var t=e.reduce(function(e,t){if(e.indexOf(t)<0){e.push(t)}return e},[]);return t}return e};g.storeSapSystemData=function(t,r){var n,i,a,o=[t.id];if(arguments.length>1){o.unshift(r)}try{a=JSON.stringify(t)}catch(t){e.error("Cannot stringify and store expanded system data: "+t)}if(a){i=g.getLocalStorage();n=g.generateLocalStorageKey("sap-system-data",o);i.setItem(n,a)}};g.getLocalSystemInSidFormat=function(){const e=sap.ui.require("sap/ushell/Container");var t=e.getLogonSystem();var r=t.getSystemName();var n=t.getClient();return"sid("+r+"."+n+")"};g.matchesLocalSid=function(e){return g.getLocalSystemInSidFormat().toLowerCase()===e.toLowerCase()};g.storeSapSystemToLocalStorage=function(e){var t=(e||{}).params;if(!t||!t.hasOwnProperty("sap-system")){return}if(g.isPlainObject(t["sap-system"])){var r=t["sap-system"],n=t["sap-system-src"];if(typeof n==="string"){g.storeSapSystemData(r,n);t["sap-system-src"]=n}else{g.storeSapSystemData(r)}t["sap-system"]=r.id}else if(g.matchesLocalSid(t["sap-system"])){delete t["sap-system"]}};g.setPerformanceMark=function(e,t){if(performance&&performance.mark){if(!t){t={}}if(t.bUseUniqueMark){if(t.bUseLastMark){performance.clearMarks(e)}else if(performance.getEntriesByName(e,"mark").length>0){return}}performance.mark(e)}};g.setPerformanceMeasure=function(e,t,r){if(performance&&performance.measure&&t&&r){performance.measure(e,t,r)}};g.Error=function(t,r){this.name="sap.ushell.utils.Error";this.message=t;e.error(t,null,r)};g.Error.prototype=new Error;g.localStorageSetItem=function(t,r,n){var i;try{localStorage.setItem(t,r);if(n){i=document.createEvent("StorageEvent");i.initStorageEvent("storage",false,false,t,"",r,"",localStorage);dispatchEvent(i)}}catch(t){e.warning("Error calling localStorage.setItem(): "+t,null,"sap.ushell.utils")}};g.getLocalStorage=function(){return window.localStorage};g.getLocalStorageItem=function(e){return window.localStorage.getItem(e)};g.generateUniqueId=function(e){var t,r,n;if(Array.isArray(e)){r=e;n=function(e){return r.indexOf(e)===-1}}else{n=e}do{t=g._getUid()}while(!n(t));return t};g._getUid=function(){return n()};g.reload=function(){location.reload()};g.calculateOrigin=function(e){var t;if(e.origin){return e.origin}if(e.protocol&&e.hostname){return e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")}if(e.href){t=new s(e.href);return t.protocol()+"://"+t.hostname()+(t.port()?":"+t.port():"")}return undefined};g.getPrivateEpcm=function(){if(window.external&&window.external&&typeof window.external.getPrivateEpcm!=="undefined"){return window.external.getPrivateEpcm()}return undefined};g.hasNativeNavigationCapability=function(){return g.isFeatureBitEnabled(1)};g.getShellType=function(){return g.isFeatureBitEnabled(1)?"NWBC":"FLP"};g.hasNativeLogoutCapability=function(){return g.isFeatureBitEnabled(2)};g.hasNavigationModeCapability=function(){return g.isFeatureBitEnabled(4)};g.hasFLPReadyNotificationCapability=function(){return g.isFeatureBitEnabled(8)};g.hasFLPReady2NotificationCapability=function(){return g.isFeatureBitEnabled(16)};g.isFeatureBitEnabled=function(t){var r="0",n;n=g.getPrivateEpcm();if(n){try{r=n.getNwbcFeatureBits();e.debug("Detected epcm getNwbcFeatureBits returned feature bits: "+r)}catch(t){e.error("failed to get feature bit vector via call getNwbcFeatureBits on private epcm object",t.stack,"sap.ushell.utils")}}return(parseInt(r,16)&t)>0};g.isApplicationTypeEmbeddedInIframe=function(e,t){return e==="NWBC"||e==="TR"||e==="WCF"||t===true&&e==="WDA"};g.isSAPLegacyApplicationType=function(e,t,r){var n=r===true?["TR","GUI","NWBC"]:["TR","GUI","NWBC","WDA","WCF"];return n.includes(e)||n.includes(t)};g.isTRApplicationType=function(e,t){return e==="TR"||t==="TR"};g.getParamKeys=function(t){var r=[],n=[],i;if(t.indexOf("sap-intent-param=")>0){i=/(?:sap-intent-param=)([^&/]+)/.exec(t);if(i&&i.length===2){n.push("sap-intent-param-data");r.push(i[1])}}if(t.indexOf("sap-xapp-state=")>0){i=/(?:sap-xapp-state=)([^&/]+)/.exec(t);if(i&&i.length===2){n.push("sap-xapp-state-data");r.push(i[1])}}else if(t.indexOf("sap-xapp-state-data=")>0){i=/(?:sap-xapp-state-data=)([^&/]+)/.exec(t);if(i&&i.length===2){try{var a=decodeURIComponent(i[1]);n.push("sap-xapp-state-data");r.push(a)}catch(t){e.error("Invalid encoding of the sap-xapp-state-data parameter in the url: ",i[1])}}}if(t.indexOf("sap-iapp-state=")>0){i=/(?:sap-iapp-state=)([^&/]+)/.exec(t);if(i&&i.length===2){n.push("sap-iapp-state-data");r.push(i[1])}}return{aAppStateNamesArray:n,aAppStateKeysArray:r}};g.appendSapShellParamSync=function(e,t,r){var n=t==="TR"?"":"-NWBC";if(r){e+=e.indexOf("?")>=0?"&":"?";e+="sap-shell="+encodeURIComponent("FLP"+r+n)}return e};g.appendSapShellParam=async function(e,t){const r=t==="TR"?"":"-NWBC";const n=await g.getUi5Version();if(n){e+=e.indexOf("?")>=0?"&":"?";e+="sap-shell="+encodeURIComponent("FLP"+n+r)}return e};g.filterOutParamsFromLegacyAppURL=function(e){var t=["sap-ach","sap-fiori-id","sap-hide-intent-link","sap-priority","sap-tag","sap-ui-app-id-hint","sap-ui-debug","sap-ui-fl-control-variant-id","sap-ui-fl-max-layer","sap-ui-tech-hint","sap-ui2-tcode","sap-ui2-wd-app-id","sap-ui2-wd-conf-id","sap-ushell-cdm-site-url","sap-ushell-navmode","sap-ushell-next-navmode","sap-ushell-url","sap-app-origin-hint"];var r=new s(e);r=r.removeSearch(t);return r.toString()};g.getIframeFeaturePolicies=function(){return"autoplay;battery;camera;display-capture;geolocation;gyroscope;magnetometer;microphone;midi;clipboard-write;clipboard-read;fullscreen;serial;"};function h(e){var t=/\d+(\.\d+){0,2}/.exec(e);if(t&&t[0]){return t[0]}return undefined}g.getUi5Version=function(){return new Promise(function(t,r){sap.ui.require(["sap/ui/VersionInfo"],function(r){r.load().then(function(e){t(h(e.version))}).catch(function(){e.error("UI5 version could not be determined.");t("")})})})};g.isNativeWebGuiNavigation=function(e){var t=r.get("applicationType",e);var n=r.get("appCapabilities.nativeNWBCNavigation",e);if(this.hasNativeNavigationCapability()&&(t==="TR"||n)){return true}return false};g.Map=function(){this.entries={}};g.Map.prototype.put=function(e,t){var r=this.get(e);this.entries[e]=t;return r};g.Map.prototype.containsKey=function(e){if(typeof e!=="string"){throw new g.Error("Not a string key: "+e,"sap.ushell.utils.Map")}return Object.prototype.hasOwnProperty.call(this.entries,e)};g.Map.prototype.get=function(e){if(this.containsKey(e)){return this.entries[e]}};g.Map.prototype.keys=function(){return Object.keys(this.entries)};g.Map.prototype.remove=function(e){delete this.entries[e]};g.Map.prototype.toString=function(){var e=["sap.ushell.utils.Map("];e.push(JSON.stringify(this.entries));e.push(")");return e.join("")};g.getParameterValueBoolean=function(e,t){var r=new URLSearchParams(t||window.location.search),n=r.getAll(e),i=["true","x"],a=["false",""],o;if(!n||n.length===0){return undefined}o=n[0].toLowerCase();if(i.indexOf(o)>=0){return true}if(a.indexOf(o)>=0){return false}return undefined};g.call=function(t,r,n){var i;if(n){setTimeout(function(){g.call(t,r,false)},0);return}try{t()}catch(t){i=t.message||t.toString();e.error("Call to success handler failed: "+i,t.stack,"sap.ushell.utils");if(r){r(i)}}};g.handleTilesVisibility=function(){g.getVisibleTiles()};g.refreshTiles=function(){o.getInstance().publish("launchpad","refreshTiles")};g.setTilesNoVisibility=function(){o.getInstance().publish("launchpad","setTilesNoVisibility")};g.validHash=function(e){return e&&e.constructor===String&&e.trim()!==""};g.getFormFactor=function(){var e=i.system;if(e.desktop){return e.SYSTEMTYPE.DESKTOP}if(e.tablet){return e.SYSTEMTYPE.TABLET}if(e.phone){return e.SYSTEMTYPE.PHONE}return undefined};g.getVisibleTiles=function(){var e=document.body.clientHeight;var t=a.getElementById("dashboardGroups");var r=a.getElementById("viewPortContainer");var n=0;var i=[];var s=[];var u=o.getInstance();var l,c,p,f,d,h,m,y,v,b,w,S,T,E,C,P,x;if(window.document.hidden){u.publish("launchpad","onHiddenTab")}if(t&&t.getGroups()&&r){S=jQuery(t.getDomRef());T=S?S.is(":visible"):false;E=t.getGroups();for(l=0;l<E.length;l=l+1){f=E[l];d=f.getTiles();h=f.getLinks();C=[d,h];for(p=0;p<C.length;p++){P=C[p];if(P){for(c=0;c<P.length;c++){m=P[c];if(!T||window.document.hidden){i.push(m)}else{y=jQuery(m.getDomRef());v=y.offset();if(v){b=y.offset().top;w=b+y.height();x=f.getVisible()&&w>n-300&&b<e+300;if(x){s.push({oTile:g.getTileModel(m),iGroup:l,bIsExtanded:!(w>n)||!(b<e)})}else if(s.length>0){u.publish("launchpad","visibleTilesChanged",s);return i}i.push(m)}}}}}}}if(s.length>0){u.publish("launchpad","visibleTilesChanged",s)}return i};g.getTileModel=function(e){var t;if(e.isA("sap.ui.integration.widgets.Card")){t=e.getBindingContext("ushellCardModel")}else{t=e.getBindingContext()}return t.getObject()?t.getObject():null};g.getTileObject=function(e){var t;if(e.isA("sap.ui.integration.widgets.Card")){t=e.getBindingContext("ushellCardModel")}else{t=e.getBindingContext()}return t.getObject()?t.getObject().object:null};g.recalculateBottomSpace=function(){var e=jQuery("#dashboardGroups").find(".sapUshellTileContainer:visible"),t=e.last(),r=jQuery(".sapUshellShellHead > header").height(),n=t.parent().height(),i=parseInt(t.find(".sapUshellContainerTitle").css("margin-top"),10),a=parseInt(jQuery(".sapUshellDashboardGroupsContainer").css("padding-bottom"),10),o;if(e.length===1){o=0}else{o=jQuery(window).height()-r-n-i-a;o=o<0?0:o}jQuery(".sapUshellDashboardGroupsContainer").css("margin-bottom",o+"px")};g.calcVisibilityModes=function(e,t){var r=true,n=true,a=e.pendingLinks&&e.pendingLinks.length?e.pendingLinks:e.links,o=g.groupHasVisibleTiles(e.tiles,a);if(!o&&(!t||e.isGroupLocked||e.isDefaultGroup||i.system.phone||i.system.tablet&&!i.system.desktop)){r=false}if(!o&&!t){n=false}return[r,n]};g.groupHasVisibleTiles=function(e,t){var r=false,n,i,a=!e?[]:e,o=!t?[]:t;a=a.concat(o);if(!a.length){return false}for(n=0;n<a.length;n=n+1){i=a[n];if(i.isTileIntentSupported){r=true;break}}return r};g.invokeUnfoldingArrayArguments=function(t,r){var n=this,i,a,o,s,u;if(!Array.isArray(r[0])){return t.apply(this,r)}i=r[0];if(i.length===0){return(new jQuery.Deferred).resolve([]).promise()}a=new jQuery.Deferred;o=[];s=[];u=(new jQuery.Deferred).resolve();i.forEach(function(r,i){if(!Array.isArray(r)){var a="Expected Array as nTh Argument of multivalue invocation: "+"first Argument must be array of array of arguments: single valued f(p1,p2), f(p1_2,p2_2), f(p1_3,p2_3) : "+"multivalued : f([[p1,p2],[p1_2,p2_2],[p1_3,p2_3]]";e.error(a);throw new Error(a)}var l=t.apply(n,r),c=new jQuery.Deferred;l.done(function(){var e=Array.prototype.slice.call(arguments);s[i]=e;c.resolve()}).fail(c.reject.bind(c));o.push(c.promise());u=jQuery.when(u,c)});jQuery.when.apply(jQuery,o).done(function(){a.resolve(s)}).fail(function(){a.reject("failure")});return a.promise()};g._getCurrentDate=function(){return new Date};g._convertToUTC=function(e){return Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())};g.formatDate=function(e){var t,r,n,i,a,o;var s=sap.ui.require("sap/ushell/resources");if(!s){throw new Error("sap/ushell/resources was not required before utils.formatDate usage!")}t=g._convertToUTC(new Date(e));r=g._convertToUTC(g._getCurrentDate());n=r-t;i=parseInt(n/(1e3*60*60*24),10);if(i>0){if(i===1){return s.i18n.getText("time_day",[i])}return s.i18n.getText("time_days",[i])}a=parseInt(n/(1e3*60*60),10);if(a>0){if(a===1){return s.i18n.getText("time_hour",[a])}return s.i18n.getText("time_hours",[a])}o=parseInt(n/(1e3*60),10);if(o>0){if(o===1){return s.i18n.getText("time_minute",[o])}return s.i18n.getText("time_minutes",[o])}return s.i18n.getText("just_now")};g.toExternalWithParameters=function(e,t,r){return new Promise(function(n){sap.ui.require(["sap/ushell/Container"],function(i){return Promise.all([i.getServiceAsync("URLParsing"),i.getServiceAsync("Navigation")]).then(function(i){var a=i[0];var o=i[1];var s={};var u=t.split("&/");if(u.length>1){s.appSpecificRoute="&/"+u[1]}s.target={semanticObject:e,action:u[0]};if(r&&r.length>0){s.params={};r.forEach(function(e){s.params[e.Key]=e.Value})}n(o.navigate({target:{shellHash:a.constructShellHash(s)}}))})})})};g.moveElementInsideOfArray=function(e,t,r){if(!g.isArray(e)||t===undefined||r===undefined){throw new Error("Incorrect input parameters passed")}if(t>=e.length||r>=e.length||r<0||t<0){throw new Error("Index out of bounds")}var n=e.splice(t,1)[0];e.splice(r,0,n);return e};g.shallowMergeObject=function(e){return Array.prototype.slice.call(arguments,1,arguments.length).map(function(e){return{sourceObject:e,properties:Object.keys(e)}}).reduce(function(e,t){t.properties.forEach(function(r){e[r]=t.sourceObject[r]});return e},e)};g.getLocationHref=function(){return window.location.href};g.getLocationSearch=function(){return window.location.search};g.windowLocationReload=function(){window.location.reload()};g.windowLocationAssign=function(e){window.location.assign(e)};g.generateLocalStorageKey=function(e,t){var r=t.length;if(r===0){throw new Error("At least one id should be provided when generating the local storage key")}var n="$";if(r===2){n="#"}else if(r>2){n="@"+r+"@"}return e+n+t.join(":")};g.urlParametersToString=function(e,t,r){return l.privparamsToString(e,t,r)};g.isRootIntent=function(e){if(typeof e!=="string"){throw new Error("The given intent must be a string")}var t="renderers.fiori2.componentData.config.rootIntent";var n=r.get(t,window["sap-ushell-config"])||"#Shell-home";var i=n.replace("#","");var a=e.replace("#","");return a===""||a===i};g.isFlpHomeIntent=function(e){if(!e){e=window.location.hash;if(!e){e=r.get("renderers.fiori2.componentData.config.rootIntent",window["sap-ushell-config"])||"Shell-home"}}else if(typeof e!=="string"){throw new Error("The given intent must be a string")}var t=e.replace("#","");return t.indexOf("Shell-home")===0||t.indexOf("Launchpad-openFLPPage")===0||t.indexOf("Launchpad-openWorkPage")===0};g.generateRandomKey=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var t="";var r=new window.Uint32Array(40);window.crypto.getRandomValues(r);var n=function(t){var n=r[t]%e.length;return e[n]};while(t.length<40){t+=n(t.length)}return t};g.copyToClipboard=function(e){var t;var r=document.createElement("textarea");try{r.contentEditable=true;r.readonly=false;r.textContent=e;document.documentElement.appendChild(r);r.select();document.execCommand("copy");t=true}catch(e){t=false}finally{r.parentNode.removeChild(r)}return t};g._getUserSettingPersContainer=function(){return new Promise(function(e){sap.ui.require(["sap/ushell/Container"],function(t){return t.getServiceAsync("PersonalizationV2").then(function(t){var r={container:"sap.ushell.usersettings.personalization",item:"data"};var n={validity:"Infinity",keyCategory:t.KeyCategory.GENERATED_KEY,writeFrequency:t.WriteFrequency.HIGH,clientStorageAllowed:false};e(t.getPersonalizer(r,n))})})})};g.getHideEmptySpacesEnabled=function(){return new Promise(function(e){sap.ui.require(["sap/ushell/Config"],function(t){e(t)})}).then(function(e){var t=e.last("/core/spaces/hideEmptySpaces/enabled");if(!t){return Promise.resolve(false)}return g._getUserSettingPersContainer().then(function(e){return e.getPersData()}).then(function(t){var r=(t||{}).hideEmptySpaces!==false;if(e.last("/core/spaces/hideEmptySpaces/userEnabled")!==r){e.emit("/core/spaces/hideEmptySpaces/userEnabled",r)}return r})})};g.setHideEmptySpacesEnabled=function(e){return new Promise(function(e){sap.ui.require(["sap/ushell/Config"],function(t){e(t)})}).then(function(t){var r=t.last("/core/spaces/hideEmptySpaces/enabled");if(!r){return Promise.resolve()}return g._getUserSettingPersContainer().then(function(r){return r.getPersData().then(function(n){n=n||{};var i=n.hideEmptySpaces!==false;if(i===!!e){return Promise.resolve()}n.hideEmptySpaces=e;return r.setPersData(n).then(function(){t.emit("/core/spaces/hideEmptySpaces/userEnabled",e)})})})})};g.sanitizeTimeoutDelay=function(e){if(typeof e!=="number"){throw new Error("Invalid type! Expected type 'number'.")}var t=2147483647;return e>t?t:e};g.promisify=function(t){if(typeof t==="object"){if(t.done){return new Promise((r,n)=>{t.done((...t)=>{if(t.length>1){e.warning("jQuery.Deferred provided multiple return values, but only single return values are supported!")}r(t[0])}).fail(n)})}if(t.then){return t}}return Promise.resolve(t)};g.requireAsync=function(e){return new Promise(function(t,r){sap.ui.require(e,(...e)=>{t(e)},r)})};g.awaitTimeout=function(e=0){return new Promise(function(t){setTimeout(t,e)})};g.getThemingParameters=async function(e){const t=await new Promise((t,r)=>{sap.ui.require(["sap/ui/core/theming/Parameters"],r=>{const n=r.get({name:e,callback:t});if(n){t(n)}})});return e.map(e=>{if(typeof t!=="object"){return t}return t[e]})};g.isColdStart=function(){var e=sap.ui.require("sap/ushell/Container");var t=e.getRendererInternal("fiori2");var r=!t||!t.getCurrentCoreView();if(f.getHistoryLength()<=1&&r){return true}return false};g.getDocumentUrl=function(){return document.URL};return g});
//Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/DynamicTileRequest", ["sap/base/i18n/Localization","sap/ushell/utils/HttpClient","sap/ui/thirdparty/URI","sap/base/util/isEmptyObject","sap/ushell/utils/UriParameters","sap/base/Log","sap/ui/core/Configuration","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/ushell/Container"],function(e,t,s,r,n,i,a,o,l,u){"use strict";const c="sap.ushell.utils.DynamicTileRequest";class h{#e=()=>{};#t=()=>{};#s=null;#r=null;#n=null;#i=null;#a=null;#o=null;#l=null;#u=null;#c=null;#h=Promise.resolve();constructor(e,t,s,r,n){this.#e=t;this.#t=s;this.#s=e;this.#r=o.get(["dataSource","settings","odataVersion"],n);this.#n=true;this.#i=r;this.#h=this.#f(e,r).then(e=>{if(e){this.#a=e}}).catch(e=>{i.error("Was not able to create a DynamicTileRequest:",e,c)});this._oInitialRefreshPromise=this.#h.then(()=>{if(this.#a){return this.refresh()}})}set originalUrl(e){throw new Error("originalUrl is read-only!")}get originalUrl(){return this.#s}set oDataVersion(e){throw new Error("oDataVersion is read-only!")}get oDataVersion(){return this.#r}refresh(){if(!this.#o){this.#o=this.#h.then(this.#g.bind(this)).then(e=>{if(e){return this.#d(e)}})}return this.#o}async#g(){if(!this.#n){return this.#a}try{const e=await u.getServiceAsync("ReferenceResolver");const t=await e.resolveSemanticDateRanges(this.#a,this.#r);if(t.ignoredReferences&&t.ignoredReferences.length>0||t.invalidSemanticDates&&t.invalidSemanticDates.length>0){const e=[].concat(t.invalidSemanticDates||[],t.ignoredReferences||[]);i.error("The service URL contains invalid Reference(s): "+e.join(", "),"",c);return}this.#n=t.hasSemanticDateRanges;return t.url}catch(e){i.error("Could not resolve semantic date ranges:",e,c);return Promise.reject(e)}}#d(r){let n=new s(r).escapeQuerySpace(false);const i=e.getSAPLogonLanguage();if(i&&!n.hasQuery("sap-language")){n.addQuery("sap-language",i)}let a=false;if(n.is("relative")){a=true;n=n.absoluteTo(location.href)}const o=this.#R(a);const l={headers:o};this.#c=n.origin();this.#u=n.href();this.#l=new t(this.#c,l);return this.#l.get(n.relativeTo(this.#c).href()).then(this.#U.bind(this)).catch(this.#m.bind(this))}abort(){if(this.#o&&this.#l){this.#l.abortAll();this.#l=null;this.#o=null;return true}return false}#U(e){l.emit("UITracer.trace",{source:"Tile",reason:"FetchData",data:{providerId:this.#i,targetUrl:this.#u,status:200}});let t;try{t=JSON.parse(e.responseText)}catch(e){throw new Error("Was not able to parse response of dynamic tile request")}this.#l=null;this.#o=null;let s;if(typeof t==="object"){t=t.d?t.d:t;const e=n.fromURL(this.#u);if(e.get("$inlinecount")==="allpages"){s={number:t.__count}}else if(e.get("$count")==="true"){s={number:t["@odata.count"]}}else{s=this.#v(t)}}else if(typeof t==="string"||typeof t==="number"){s={number:t}}this.#e(s)}#m(e){l.emit("UITracer.trace",{source:"Tile",reason:"FetchData",data:{providerId:this.#i,targetUrl:this.#u,status:e.status}});this.#l=null;this.#o=null;this.#t(e)}#v(e){const t=["results","icon","title","number","numberUnit","info","infoState","infoStatus","targetParams","subtitle","stateArrow","numberState","numberDigits","numberFactor"];const s=Object.keys(e).reduce((s,r)=>{if(t.indexOf(r)>-1){s[r]=e[r]}return s},{});if(!r(s)){return s}const n=Object.keys(e)[0];if(n!==undefined&&Object.keys(e).length===1){return Object.keys(e[n]).reduce((s,r)=>{if(t.indexOf(r)>-1){s[r]=e[n][r]}return s},{})}return{}}#R(t){const s={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":e.getLanguage()||"",Accept:"application/json, text/plain"};const r=e.getSAPLogonLanguage();if(r){s["sap-language"]=r}if(t){const e=u.getLogonSystem();const t=e&&e.getClient();if(t){s["sap-client"]=t}}return s}async#f(e,t){const s=await u.getServiceAsync("ClientSideTargetResolution");const r=await u.getServiceAsync("ReferenceResolver");const n=await s.getSystemContext(t);const a=await r.resolveUserDefaultParameters(e,n);if(a.defaultsWithoutValue&&a.defaultsWithoutValue.length>0){i.error("The service URL contains User Default(s) with no set value: "+a.defaultsWithoutValue.join(", "),"",c);return}if(a.ignoredReferences&&a.ignoredReferences.length>0){const e=a.ignoredReferences.filter(e=>!e.startsWith("DynamicDate"));if(e.length>0){i.error("The service URL contains invalid Reference(s): "+e.join(", "),"",c);return}}return a.url}destroy(){this.abort();this.#t=null;this.#e=null}}return h});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/HttpClient", ["sap/ui/core/Supportability","sap/ui/thirdparty/URI","sap/ushell/utils"],function(e,t,s){"use strict";var r=function(e,s){this._oOngoingRequests={};this._oCSRFTokens={};this._oDefaultOptions={headers:s&&s.headers||{}};if(typeof e==="string"){this._oBasePath=new t(e)}else{this._oDefaultOptions={headers:e&&e.headers||{}}}};r.prototype.get=function(e,t){return this._executeRequest("GET",e,t)};r.prototype.put=function(e,t){return this._executeRequest("PUT",e,t)};r.prototype.post=function(e,t){return this._executeRequest("POST",e,t)};r.prototype.patch=function(e,t){return this._executeRequest("PATCH",e,t)};r.prototype.delete=function(e,t){return this._executeRequest("DELETE",e,t)};r.prototype.options=function(e,t){return this._executeRequest("OPTIONS",e,t)};r.prototype.abortAll=function(){Object.keys(this._oOngoingRequests).forEach(function(e){this._oOngoingRequests[e].abort()}.bind(this))};r.prototype._executeRequest=function(r,o,n){var i=new Error("The provided resource path is not a valid URL.");var a={};var u=e.isStatisticsEnabled();if(u){a["sap-statistics"]=u}try{var h;var c=new t(o);if(!c.is("url")){return Promise.reject(i)}if(this._oBasePath){h=c.absoluteTo(this._oBasePath)}else{h=c}var d=new XMLHttpRequest;d._sapUshellHttpClientId=s.generateUniqueId(Object.keys(this._oOngoingRequests));this._oOngoingRequests[d._sapUshellHttpClientId]=d;var f=Object.assign({},a,this._oDefaultOptions.headers,n&&n.headers);return this._getCSRFTokenHeader(r,h).then(function(e){Object.assign(f,e);return new Promise(function(e,t){var s=h.href();d.onload=this._onLoad.bind(this,e,t,{xhr:d,method:r,url:s,data:n});d.onerror=function(){t.call(this,this._getFormattedResponse(d))}.bind(this);d.onabort=function(){d.bAborted=true;t.call(this,this._getFormattedResponse(d))}.bind(this);d.onloadend=function(){delete this._oOngoingRequests[d._sapUshellHttpClientId]}.bind(this);d.open(r,s);Object.keys(f).forEach(function(e){d.setRequestHeader(e,f[e])});var o=n&&n.data||"";if(typeof o!=="string"){o=JSON.stringify(o)}d.send(o)}.bind(this))}.bind(this))}catch(e){return Promise.reject(i)}};r.prototype._getCSRFTokenHeader=function(e,t){var s="",r="";switch(e){case"HEAD":case"GET":case"OPTIONS":return Promise.resolve({"x-csrf-token":"fetch"});case"POST":s=this._getCSRFTokenKey(t);if(this._oCSRFTokens[s]){return Promise.resolve({"x-csrf-token":this._oCSRFTokens[s]})}r=t.href();if(this._oBasePath){r=this._oBasePath.origin()+this._oBasePath.directory()}return this._executeRequest("HEAD",r).then(function(e){var t=this._getCSRFTokenFromHeader(e.responseHeaders);if(!t){throw new Error("CSRF Token couldn't be fetched.")}return{"x-csrf-token":t}}.bind(this));case"PATCH":case"PUT":case"DELETE":s=this._getCSRFTokenKey(t);if(this._oCSRFTokens[s]){return Promise.resolve({"x-csrf-token":this._oCSRFTokens[s]})}r=t.href();if(this._oBasePath){r=this._oBasePath.origin()+this._oBasePath.directory()}return this._executeRequest("OPTIONS",r).then(function(e){var t=this._getCSRFTokenFromHeader(e.responseHeaders);if(!t){throw new Error("CSRF Token couldn't be fetched.")}return{"x-csrf-token":t}}.bind(this));default:return Promise.resolve({})}};r.prototype._onLoad=function(e,s,r){var o=this._getFormattedResponse(r.xhr);var n=this._getCSRFTokenFromHeader(o.responseHeaders);if(n){var i=this._getCSRFTokenKey(new t(r.url));if(n.toLowerCase()==="required"&&o.status===403){delete this._oCSRFTokens[i];return this._executeRequest(r.method,r.url,r.data).then(e).catch(s)}this._oCSRFTokens[i]=n}if(o.status>=200&&o.status<300){return e(o)}return s(o)};r.prototype._getCSRFTokenKey=function(e){if(this._oBasePath){return this._oBasePath.origin()+this._oBasePath.directory()}return e.origin()+e.directory()};r.prototype._getCSRFTokenFromHeader=function(e){var t=e.filter(function(e){return e.name==="x-csrf-token"})[0];return t&&t.value};r.prototype._getFormattedResponse=function(e){return{aborted:e.bAborted||false,status:e.status,statusText:e.statusText,responseText:e.responseText,responseHeaders:e.getAllResponseHeaders().split(/\r\n/g).filter(function(e){return e.length>0}).map(function(e){var t=e.split(":");return{name:t[0].trim(),value:t[1].trim()}})}};return r},true);
//Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/RestrictedJSONModel", ["sap/ui/model/json/JSONModel"],function(t){"use strict";function e(){throw new Error("sap.ushell.utils.RestrictedJSONModel : Function not supported")}return t.extend("sap.ushell.utils.RestrictedJSONModel",{metadata:{events:{dataChange:{parameters:{}}}},constructor:function(){t.prototype.constructor.apply(this,arguments);this.setDefaultBindingMode("OneWay");this.setDefaultBindingMode=e;this.setSizeLimit(1e3);this.setData=e;this.setJSON=e;this.setProperty=e;this.loadData=e},_setData:function(){t.prototype.setData.apply(this,arguments);this.fireEvent("dataChange")},_setJSON:function(){this.setData=t.prototype.setData;t.prototype.setJSON.apply(this,arguments);this.setData=e;this.fireEvent("dataChange")},_setProperty:function(){this.setData=t.prototype.setData;t.prototype.setProperty.apply(this,arguments);this.setData=e;this.fireEvent("dataChange")},refresh:function(){t.prototype.refresh.apply(this,arguments);this.fireEvent("dataChange")}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/UriParameters", function(){"use strict";function r(r){const e=r.indexOf("#");if(e>=0){r=r.slice(0,e)}const s=r.indexOf("?");if(s>=0){return r.slice(s+1)}return""}class e extends URLSearchParams{#r;constructor(e){super(r(e))}get mParams(){if(this.#r===null||this.#r===undefined){this.#r=Array.from(this.keys()).reduce((r,e)=>{r[e]=this.getAll(e);return r},Object.create(null))}return this.#r}static fromURL(r){return new e(r)}}return e});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/UrlParsing", ["sap/ui/thirdparty/URI","sap/base/Log","sap/base/util/deepEqual","sap/base/util/merge","sap/ushell/TechnicalParameters"],function(e,t,n,r,a){"use strict";const s={};const o=/^(([A-Za-z0-9_/]+)-([A-Za-z0-9_/-]+)(~([A-Z0-9a-z=+/]+))?)?([?]([^&]|(&[^/]))*&?)?$/;s.getShellHash=function(e){const t=/[^#]*#(([^&]|&[^/])*)(&\/.*)?/;const n=t.exec(e);if(n){return n[1]}return undefined};s.getHash=function(e){const t=/#(.*)/;const n=t.exec(e);if(n){return n[1]}return undefined};s.isIntentUrl=function(e){return this._isIntentUrl(e,window.location.href)};s.isIntentUrlAsync=function(e){return new Promise(function(e,t){sap.ui.require("sap/ushell/Container").getFLPUrlAsync(true).done(e).fail(t)}).then(function(t){return this._isIntentUrl(e,t)}.bind(this))};s._isIntentUrl=function(t,n){const r=/^#/;if(typeof t!=="string"){return false}if(!r.test(t)){const r=new e(t).normalize();const a=`${r.protocol()}://${r.host()}${r.pathname()}`;const s=new e(n).normalize();const o=`${s.protocol()}://${s.host()}${s.pathname()}`;if(a!==o){return false}}const a=s.getHash(t);if(!a){return false}const o=s.parseShellHash(a);if(o&&o.semanticObject&&o.action){return true}return false};s.parseParameters=function(e){try{const t=new URLSearchParams(e);const n=t.keys();let r=n.next();const a={};while(r.done===false){a[decodeURIComponent(r.value)]=t.getAll(r.value);r=n.next()}return a}catch(n){t.error("URL parsing - malformed URL parameters string:",e);return{}}};function c(e,t,n){let r="";t=t||"&";n=n||"=";let a="";const s=[];for(const t in e){if(e.hasOwnProperty(t)){s.push(t)}}s.sort();for(let o=0;o<s.length;o=o+1){const c=s[o];if(Array.isArray(e[c])){for(let s=0;s<e[c].length;s=s+1){r+=a+encodeURIComponent(c)+n+encodeURIComponent(e[c][s]);a=t}}else{r+=a+encodeURIComponent(c)+n+encodeURIComponent(e[c]);a=t}}return r}s.paramsToString=function(e){return c(e)};s.removeParametersWithEmptyValue=function(e,t){if(!e){return}Object.keys(e).forEach(n=>{if(t.includes(n)&&e[n].length===1&&e[n][0]===""){delete e[n]}})};s.privparamsToString=function(e,t,n){return c(e,t,n)};s.addParamsToUrl=function(t,n){const r=new e(t);Object.keys(n).forEach(e=>{r.addSearch(e,n[e])});return r.toString()};s.addShellParamsToURL=function(t,n){const r=new e(t);const a=r.hash();const o=r.toString().replace(a,"");const c=s.parseShellHash(a)||{};Object.assign(c.params,n.params);const i=`#${s.constructShellHash(c)}`;return o+i};s.parseShellHash=function(e){const t=o;if(!e){return undefined}const n=s.splitHash(e);const r=t.exec(n.shellPart);if(r){const e=r[2];const t=r[3];const a=r[5];const o=r[6];const c=s.parseParameters(o);return{semanticObject:e,action:t,contextRaw:a,params:c,appSpecificRoute:n.appSpecificRoute}}if(n.appSpecificRoute){return{semanticObject:undefined,action:undefined,contextRaw:undefined,params:{},appSpecificRoute:n.appSpecificRoute}}return undefined};s.privstripLeadingHash=function(e){if(e[0]==="#"){return e.substring(1)}return e};s.ensureLeadingHash=function(e){if(!e){e="#"}else if(e.charAt(0)!=="#"){e=`#${e}`}return e};s.getBasicHash=function(e){const t=this.parseShellHash(e);if(!t){return""}return`${t.semanticObject}-${t.action}`};s.splitHash=function(e){const t=/^(?:#|)([\S\s]*?)(&\/[\S\s]*)?$/;if(e===undefined||e===null||e===""){return{}}const n=t.exec(e);const r=n[1];if(r!==""&&!o.test(r)){return{}}const a=n[2];if(r||a){return{shellPart:r,appSpecificRoute:a}}return{}};function i(e,t){if(t){return e+t}return e}s.constructShellHash=function(e){let n;if(!e){return""}if(!e.target){e.target={};e.target.semanticObject=e.semanticObject;e.target.action=e.action;e.target.contextRaw=e.contextRaw}if(e.target.shellHash||e.target.shellHash===""){const t=s.privstripLeadingHash(e.target.shellHash);return i(t,e.appSpecificRoute)}if(e.target.semanticObject&&e.target.action){n=`${e.target.semanticObject}-${e.target.action.replace(/[?].*/,"")}`}else{return i("",e.appSpecificRoute)}if(e.target.contextRaw){n+=`~${e.target.contextRaw}`}let r="?";const a=[];for(const t in e.params){if(e.params.hasOwnProperty(t)){a.push(t)}}const o=e.params&&JSON.parse(JSON.stringify(e.params))||{};if(e.appStateKey){a.push("sap-xapp-state");o["sap-xapp-state"]=e.appStateKey}a.sort();for(let e=0;e<a.length;e=e+1){const s=a[e];if(Array.isArray(o[s])){if(o[s].length>1){t.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!")}for(let e=0;e<o[s].length;e=e+1){n+=`${r+encodeURIComponent(s)}=${encodeURIComponent(o[s][e])}`;r="&"}}else{n+=`${r+encodeURIComponent(s)}=${encodeURIComponent(o[s])}`;r="&"}}return i(n,e.appSpecificRoute)};s.compareHashes=function(e,t){const n=this.parseShellHash(e)||{};const r=this.parseShellHash(t)||{};return{sameIntent:this.haveSameIntent(n,r),sameParameters:this.haveSameIntentParameters(n,r),sameAppSpecificRoute:n.appSpecificRoute===r.appSpecificRoute}};s.haveSameIntent=function(e,t){e=e||{};t=t||{};return e.semanticObject===t.semanticObject&&e.action===t.action&&e.contextRaw===t.contextRaw};s.haveSameIntentParameters=function(e,t){e=e||{};t=t||{};const n=r({},e.params);const a=r({},t.params);return!this._parametersChanged(this._removeNonIntentParameters(n),this._removeNonIntentParameters(a))};s.getStableIntent=function(e){const t=this.parseShellHash(e)||{};const n=this._removeNonIntentParameters(t.params);const r=Object.keys(n).sort().reduce((e,t)=>{const r=n[t];r.sort();e[t]=r;return e},{});return this.constructShellHash({target:{semanticObject:t.semanticObject,action:t.action,contextRaw:t.contextRaw},params:r})};s._removeNonIntentParameters=function(e){const t=a.getParameters({isIntentParameter:false});let n;if(e){for(let r=0;r<t.length;r++){n=t[r];if(e[n.name]){delete e[n.name]}}}return e||{}};s._parametersChanged=function(e,t){return!n(e,t)};return s});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/UrlShortening", ["sap/base/Log","sap/ushell/utils/UrlParsing"],function(t,e){"use strict";function a(){var a=this;this.ABBREV_PARAM_NAME="sap-intent-param";this.URL_LENGTH_LIMIT=1023;this.URL_PARAMS_LENGTH_LIMIT=512;this._replaceSapXAppStateRawWithKeyIfRequired=function(e,a){var r,s;if(typeof e!=="string"||/^[A-Z0-9]{40,41}$/.test(e)){return e}try{r=JSON.parse(e)}catch(a){t.error("This cannot happen: sap-xapp-state parameter value is neither key nor JSON parseable");return e}s=a&&a.getNextKey();this._storeValue(s,r,a);return s};this.compactHash=function(r,s,i){var n,p,h,c,o,u=[this.ABBREV_PARAM_NAME,"sap-system","sap-xapp-state"];if(s){s.forEach(function(t){u.push(t)})}n=e.parseShellHash(r);if(!n){t.error("the URL "+r+" is not compliant. It may break the product and cause unwanted navigation behavior.");return{hash:r}}c="";if(r.charAt(0)==="#"){c="#"}var f=n&&n.params&&n.params["sap-xapp-state"]&&n.params["sap-xapp-state"][0];if(f){n.params["sap-xapp-state"]=[this._replaceSapXAppStateRawWithKeyIfRequired(f,i)];r=c+e.constructShellHash({target:{semanticObject:n.semanticObject,action:n.action,contextRaw:n.contextRaw},params:n.params,appSpecificRoute:n.appSpecificRoute})}if(typeof r!=="string"||r.length<a.URL_LENGTH_LIMIT){return{hash:r}}if(n&&(n.params&&n.params[a.ABBREV_PARAM_NAME])){return{hash:r}}p=i&&i.getNextKey();h=this._splitParameters(n.params,u,p);if(!h.key){return{hash:r}}o=e.paramsToString(h.tailParams);this._storeValue(h.key,o,i);return{hash:c+e.constructShellHash({target:{semanticObject:n.semanticObject,action:n.action,contextRaw:n.contextRaw},params:h.headParams,appSpecificRoute:n.appSpecificRoute}),params:h.headParams,skippedParams:h.tailParams}};this.checkHashLength=function(r){var s,i,n;if(typeof r!=="string"||r.length<a.URL_LENGTH_LIMIT){return{hash:r}}s=e.parseShellHash(r);n="";if(r.charAt(0)==="#"){n="#"}i=this._splitParameters(s.params,[],"DummyKey");if(i.key){t.error("Application startup parameter length exceeds "+a.URL_PARAMS_LENGTH_LIMIT+" characters, truncation occured!");delete i.headParams[this.ABBREV_PARAM_NAME];return{hash:n+e.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:i.headParams,appSpecificRoute:s.appSpecificRoute}),params:i.headParams,skippedParams:i.tailParams}}t.error("URL exceeds dangerous limits, arbitrary shortening or worse may occur!");return{hash:r}};this._findIndex=function(t,e){var a=t.indexOf(e);if(a>=0){return a}a=-1;t.every(function(t,r){if(t.length>0&&t[t.length-1]==="*"&&t.substring(0,t.length-1)===e.substring(0,t.length-1)){a=r;return false}return true});return a};this._cmpByList=function(t,e,a){var r,s;t=t||[];if(e===a){return 0}r=this._findIndex(t,e);s=this._findIndex(t,a);if(r>=0&&s>=0){if(r-s!==0){return r-s}if(e<a){return-1}if(e>a){return+1}return 0}if(r>=0){return-1}if(s>=0){return+1}if(e<a){return-1}return+1};this._sortByPriority=function(t,e){return t.sort(this._cmpByList.bind(this,e))};this._splitParameters=function(e,a,r){var s,i,n,p={},h={},c=false,o,u,f=0,l,m=[];if(!r||typeof r!=="string"){throw new Error("sap.ushell.services.URLShortening._splitParameters: key must be supplied!")}for(s in e){if(Object.prototype.hasOwnProperty.call(e,s)){m.push(s)}}m.sort();m=this._sortByPriority(m,a);for(n=0;n<m.length;n=n+1){s=m[n];o=e[s];if(o.length>1){t.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!")}for(i=0;i<o.length;i=i+1){u=e[s][i];l=s.length+u.length;if(l+f>this.URL_PARAMS_LENGTH_LIMIT){if(h[s]){h[s].push(u)}else{h[s]=[u]}c=true}else if(p[s]){p[s].push(u)}else{p[s]=[u]}f=f+l+1}}if(c){p[this.ABBREV_PARAM_NAME]=[r]}return{key:r,tailParams:h,headParams:p}};this.expandHash=function(t){var e=function(t){return a._retrieveValue(t)};return this.expandParamGivenRetrievalFunction(t,this.ABBREV_PARAM_NAME,e)};this.expandParamGivenRetrievalFunction=function(t,a,r){var s,i,n,p,h;if(typeof t!=="string"){return t}s=e.parseShellHash(t);n=s&&s.params&&s.params[a]&&s.params[a][0];if(!n){return t}p="";if(t.charAt(0)==="#"){p="#"}i=r(n);if(!i){return t}h=this._blendParameters(s.params,a,i);return p+e.constructShellHash({target:{semanticObject:s.semanticObject,action:s.action,contextRaw:s.contextRaw},params:h,appSpecificRoute:s.appSpecificRoute})};this._retrieveValue=function(){return undefined};this._storeValue=function(t,e,a){if(a&&typeof a.store==="function"){a.store(e)}};this._blendParameters=function(t,a,r){var s=e.parseParameters("?"+r),i;delete t[a];for(i in s){if(Object.prototype.hasOwnProperty.call(s,i)){if(t[i]){t[i]=t[i].concat(s[i])}else{t[i]=s[i]}}}return t}}var r=new a;return r},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/WindowUtils", ["sap/base/Log","sap/ui/util/isCrossOriginURL","sap/ushell/utils"],function(n,e,r){"use strict";var o={};o.hasInvalidProtocol=function(n){var e=document.createElement("a");e.setAttribute("href",n);if(e.protocol==="javascript:"){return true}return false};o.isCrossOriginUrl=function(n){return e(n)};o.openURL=function(e,r,o,i){var t=i===undefined?true:i;var a=this.isCrossOriginUrl(e);o=o||"";if(t&&this.hasInvalidProtocol(e)){n.fatal("Tried to open a URL with an invalid protocol",null,"sap/ushell/utils/WindowUtils");throw new Error("Tried to open a URL with an invalid protocol")}if(a){if(o.toLowerCase().indexOf("noopener")===-1){if(o!==""){o+=","}o+="noopener"}if(o.toLowerCase().indexOf("noreferrer")===-1){o+=",noreferrer"}window.open(e,r,o);return true}return window.open(e,r,o)};o.getLeanURL=function(e,r){var o=e||r;if(this.hasInvalidProtocol(o)){n.fatal("Tried to construct a lean URL for input containing an invalid protocol",null,"sap/ushell/utils/WindowUtils");return""}if((o||"").charAt(0)!=="#"){return o}var i=window.location.search;if(!i){i="?sap-ushell-config=lean"}else if(i.indexOf("sap-ushell-config=")>=-1){i+="&sap-ushell-config=lean"}return window.location.origin+window.location.pathname+i+o};o._adjustQueryString=function(n,e,o){if((!e||e.length===0)&&(!o||o.length===0)){return n}var i=new URLSearchParams(n);var t=Array.from(i.keys()).reduce(function(n,e){n[e]=i.getAll(e);return n},{});if(e&&e.length>0){e.forEach(function(n){var e=Object.keys(n)[0];if(e){t[e]=n[e]}})}if(o&&o.length>0){o.forEach(function(n){delete t[n]})}const a=r.urlParametersToString(t);return a!==""?"?"+a:""};o.refreshBrowser=function(n,e){var i=r.getLocationHref();var t=r.getLocationSearch();var a=o._adjustQueryString(t,n,e);if(t===a){r.windowLocationReload()}else{const n=i.replace(t,a);r.windowLocationAssign(n)}};o.clearSapUserContextCookie=function(){window.document.cookie="sap-usercontext=;Path=/;Max-Age=-1"};return o});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/chipsUtils", ["sap/base/Log","sap/base/util/ObjectPath","sap/ushell/Container"],function(e,t,i){"use strict";var r="X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER",n="X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER";var a={};a.getCatalogTilePreviewTitle=function(e){var t=a.getBagText(e,"tileProperties","display_title_text");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewTitle()||undefined};a.getCatalogTilePreviewSubtitle=function(e){var t=a.getBagText(e,"tileProperties","display_subtitle_text");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewSubtitle()||undefined};a.getCatalogTilePreviewIcon=function(e){var t=a._getConfigurationProperty(e,"tileConfiguration","display_icon_url");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewIcon()||undefined};a.getCatalogTileTargetURL=function(e){var t=a._getConfigurationProperty(e,"tileConfiguration","navigation_target_url");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getTargetUrl()||undefined};a.getCatalogTileNumberUnit=function(e){return a._getConfigurationProperty(e,"tileConfiguration","display_number_unit")};a.getCatalogTilePreviewInfo=function(e){return a.getBagText(e.getChip(),"tileProperties","display_info_text")};a.getCatalogTileSize=function(e){return a.getTileSize(e)};a.getCatalogTilePreviewIndicatorDataSource=function(e){var t;var i=a._getAppLauncherTileConfiguration(e);if(a._isAppLauncher(e)&&i&&i.service_url){t={path:i.service_url,refresh:i.service_refresh_interval}}return t};a._getConfigurationProperty=function(e,t,i){var r,n;try{r=e.getConfigurationParameter(t);n=JSON.parse(r)}catch(e){return}if(n[i]!==undefined){return n[i]}};a.getBagText=function(e,t,i){if(e.getBagIds().indexOf(t)>-1&&e.getBag(t).getTextNames().indexOf(i)>-1){return e.getBag(t).getText(i)}};a.getTileSize=function(e){var t=!e.isStub()&&e.getConfigurationParameter("row")||"1",i=!e.isStub()&&e.getConfigurationParameter("col")||"1";return t+"x"+i};a._getAppLauncherTileConfiguration=function(t){var i,r=t.getConfigurationParameter("tileConfiguration");try{i=JSON.parse(r||"{}")}catch(i){e.error("Tile with ID '"+t.getId()+"' has a corrupt configuration containing a 'tileConfiguration' value '"+r+"' which could not be parsed. If present, a (stringified) JSON is expected as value.",i.message,"sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{}}return i};a._isAppLauncher=function(e){var t=e.getChip().getBaseChipId();return t===r||t===n};a.getTileConfigurationFromSimplifiedChip=function(e){var t;try{t=JSON.parse(e.configuration.tileConfiguration)}catch(e){t={}}return t};a.getTargetUrlFromSimplifiedChip=function(e,t){var i=this.getCustomTileTargetFromSimplified(e);if(i){return"#"+t.constructShellHash(i)}var r=this.getTileConfigurationFromSimplifiedChip(e);return r.navigation_target_url};a.getIndicatorDataSourceFromSimplifiedChip=function(e){var t=this.getTileConfigurationFromSimplifiedChip(e);var i=t.service_url;if(!i){return undefined}return{path:i,refresh:t.service_refresh_interval}};a.getTileSizeFromSimplifiedChip=function(e){var t=e.configuration;var i=t.row||1;var r=t.col||1;return i+"x"+r};a.getNumberUnitFromSimplifiedChip=function(e){var t=this.getTileConfigurationFromSimplifiedChip(e);return t.display_number_unit};a.getInfoFromSimplifiedChip=function(e){var t=e.bags.tileProperties;return t&&t.texts.display_info_text};a.getKeywordsFromSimplifiedChip=function(e){var t=e.bags.tileProperties;var i=t&&t.texts.display_search_keywords;if(i){return i.trim().split(/\s*,\s*/g)}return[]};a.isCustomTileFromSimplifiedChip=function(e){var t=e.chipId;return t!==r&&t!==n};a.loadChipInstanceFromSimplifiedChip=function(e){var t=e.bags;var r={chipId:e.chipId,configuration:e.configuration?JSON.stringify(e.configuration):"{}"};return i.getServiceAsync("PageBuilding").then(function(e){var i=e.getFactory();var n=i.createChipInstance(r);this.addBagDataToChipInstance(n,t);return new Promise(function(e,t){n.load(e,t)}).then(function(){return n})}.bind(this))};a.addBagDataToChipInstance=function(t,i){if(!i){return}var r;for(var n in i){var a=i[n];var o=t.getBag(n);try{for(r in a.properties){o.setProperty(r,a.properties[r])}for(r in a.texts){o.setText(r,a.texts[r])}}catch(t){e.error("chipsUtils.addBagDataToChipInstance: "+t.toString())}}};a.getCustomTileTargetFromSimplified=function(e){if(e.chipId==="X-SAP-UI2-CHIP:/UI2/AR_SRVC_NEWS"){return{target:{semanticObject:"NewsFeed",action:"displayNewsList"}}}var t=JSON.parse(e.configuration.tileConfiguration||"{}");var i=JSON.parse(t.TILE_PROPERTIES||"{}");if(i.semanticObject&&i.semanticAction){return{target:{semanticObject:i.semanticObject,action:i.semanticAction},params:{EvaluationId:[i.evaluationId]}}}return null};return a},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/objectOperations", [],function(){"use strict";var r={};r.getMember=function(r,e){var n=e.split("."),t=r;if(!r){return undefined}n.forEach(function(r){if(typeof t!=="object"){return undefined}t=t[r.replace(/[|]/g,".")]});return t};r.updateProperties=function(r,e){Object.keys(r).forEach(function(n){if(e.hasOwnProperty(n)){r[n]=e[n]}})};r.getNestedObjectProperty=function(r,e,n){var t="Missing or invalid parameter";if(!r||!Array.isArray(r)||r.length==0||!e){throw new Error(t)}if(Array.isArray(e)&&e.length!=r.length){throw new Error(t)}var i=e;if(!Array.isArray(e)){i=Array.apply(null,Array(r.length)).map(function(){return e})}var u=r.reduce(function(r,e,n){if(r!==undefined){return r}return this.getMember(e,i[n])}.bind(this),undefined);return u!=undefined?u:n};return r},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/type", [],function(){"use strict";function t(t){return Object.prototype.toString.apply(t)==="[object Array]"}function e(t){return Object.prototype.toString.apply(t)==="[object Object]"}function n(t){return typeof t!=="undefined"}return{isArray:t,isPlainObject:e,isDefined:n}},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/utilsCdm", ["sap/base/Log","sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/ushell/utils/objectOperations","sap/ushell/utils/UrlParsing"],function(e,t,a,i,s){"use strict";function o(e,t){return i.getMember(e,t)}function p(e,a,i){a=t({},a);i=t({},i);var s={};s.semanticObject=a.semanticObject;s.action=a.action;s.title=a.title||o(i,"sap|app.title");s.info=a.info||o(i,"sap|app.info");s.icon=a.icon||o(i,"sap|ui.icons.icon");s.subTitle=a.subTitle||o(i,"sap|app.subTitle");s.shortTitle=a.shortTitle||o(i,"sap|app.shortTitle");var p,n,r,l,u,c,f=false;var m=o(i,"sap|platform|runtime");s.resolutionResult=t({},m);if(m){s.resolutionResult["sap.platform.runtime"]=t({},m)}if(o(i,"sap|ui.technology")==="GUI"){s.resolutionResult["sap.gui"]=o(i,"sap|gui")}if(o(i,"sap|ui.technology")==="WDA"){s.resolutionResult["sap.wda"]=o(i,"sap|wda")}if(o(i,"sap|ui.technology")==="URL"){if(i["sap.url"]){s.resolutionResult["sap.platform.runtime"]=s.resolutionResult["sap.platform.runtime"]||{};s.resolutionResult.url=i["sap.url"].uri;s.resolutionResult["sap.platform.runtime"].url=i["sap.url"].uri}else if(m&&m.uri){s.resolutionResult["sap.platform.runtime"].url=m.uri;s.resolutionResult.url=m.uri}}if(!s.resolutionResult["sap.ui"]){s.resolutionResult["sap.ui"]={}}s.resolutionResult["sap.ui"].technology=o(i,"sap|ui.technology");s.resolutionResult.applicationType=this._formatApplicationType(s.resolutionResult,i);s.resolutionResult.systemAlias=s.resolutionResult.systemAlias||a.systemAlias;s.resolutionResult.systemAliasSemantics="apply";s.resolutionResult.text=s.title;s.deviceTypes=o(i,"sap|ui.deviceTypes")||{};s.resolutionResult.appId=o(i,"sap|app.id");["desktop","tablet","phone"].forEach(function(e){if(Object.prototype.hasOwnProperty.call(a.deviceTypes||{},e)){s.deviceTypes[e]=a.deviceTypes[e]}if(!Object.prototype.hasOwnProperty.call(s.deviceTypes,e)){s.deviceTypes[e]=true}s.deviceTypes[e]=!!s.deviceTypes[e]});s.signature=a.signature||{};s.signature.parameters=s.signature.parameters||{};s.signature.additionalParameters=(a.signature||{}).additionalParameters||"allowed";var d=a.indicatorDataSource||o(i,"sap|app.crossNavigation.inbounds."+e+".indicatorDataSource");var y=d?"#Shell-dynamicTile":"#Shell-staticTile";if(o(i,"sap|app.type")==="tile"||o(i,"sap|flp.type")==="tile"){y=s.resolutionResult;y.url=o(i,"sap|platform|runtime.componentProperties.url");y.componentName=o(i,"sap|ui5.componentName");if(o(i,"sap|platform|runtime.includeManifest")){y.componentProperties=y.componentProperties||{};y.componentProperties.manifest=t({},i);delete y.componentProperties.manifest["sap.platform.runtime"]}l=o(i,"sap|app.crossNavigation.outbounds.target");f=true}if(o(i,"sap|app.type")==="plugin"||o(i,"sap|flp.type")==="plugin"){return undefined}if(o(i,"sap|flp.tileSize")){p=o(i,"sap|flp.tileSize")}if(o(i,"sap|app.description")){n=o(i,"sap|app.description")}if(o(i,"sap|ui.technology")==="GUI"&&o(i,"sap|gui.transaction")){r=o(i,"sap|gui.transaction")}if(o(i,"sap|ui.technology")==="WDA"&&o(i,"sap|wda.applicationId")){r=o(i,"sap|wda.applicationId")}if(o(i,"sap|app.dataSources")){u=o(i,"sap|app.dataSources")}if(o(i,"sap|app.id")){c=o(i,"sap|app.id")}s.tileResolutionResult={appId:c,title:s.title,subTitle:s.subTitle,icon:s.icon,size:p,info:s.info,tileComponentLoadInfo:y,indicatorDataSource:d,dataSources:u,description:n,runtimeInformation:m,technicalInformation:r,deviceTypes:s.deviceTypes};s.tileResolutionResult.isCustomTile=f;if(l){s.tileResolutionResult.targetOutbound=l}return s}function n(e,t){var a=e.applicationType;if(a){return a}var i=o(t,"sap|platform|runtime.componentProperties.self.name")||o(t,"sap|ui5.componentName");if(o(t,"sap|flp.appType")==="UI5"||o(t,"sap|ui.technology")==="UI5"){e.applicationType="SAPUI5";e.additionalInformation="SAPUI5.Component="+i;e.url=o(t,"sap|platform|runtime.componentProperties.url");e.applicationDependencies=o(t,"sap|platform|runtime.componentProperties");return"SAPUI5"}if(o(t,"sap|ui.technology")==="GUI"){e.applicationType="TR";e["sap.gui"]=o(t,"sap|gui");e.systemAlias=o(t,"sap|app.destination.name");return"TR"}if(o(t,"sap|ui.technology")==="WDA"){e.applicationType="WDA";e["sap.wda"]=o(t,"sap|wda");e.systemAlias=o(t,"sap|app.destination.name");return"WDA"}if(o(t,"sap|ui.technology")==="URL"){e.applicationType="URL";e.systemAlias=o(t,"sap|app.destination.name")}return"URL"}function r(t){if(!t){return[]}var a=[];try{var i=Object.keys(t.applications||{}).sort();i.forEach(function(i){try{var s=t.applications[i];var p=o(s,"sap|app.crossNavigation.inbounds");if(p){var n=Object.keys(p).sort();n.forEach(function(e){var t=p[e];var i=this.mapOne(e,t,s);if(i){a.push(i)}}.bind(this))}}catch(t){e.error("Error in application "+i+": "+t,t.stack)}}.bind(this))}catch(t){e.error(t);e.error(t.stack);return[]}return a}function l(e){var t,i,o;t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};i=a.get("signature.parameters",e)||{};Object.keys(i).forEach(function(e){if(i[e].filter&&Object.prototype.hasOwnProperty.call(i[e].filter,"value")&&(i[e].filter.format===undefined||i[e].filter.format==="plain")){t.params[e]=[i[e].filter.value]}if(i[e].launcherValue&&Object.prototype.hasOwnProperty.call(i[e].launcherValue,"value")&&(i[e].launcherValue.format===undefined||i[e].launcherValue.format==="plain")){t.params[e]=[i[e].launcherValue.value]}});o=s.constructShellHash(t);if(!o){return undefined}return o}function u(e){var t,a,i;t={target:{semanticObject:e.semanticObject,action:e.action},params:{}};a=e.parameters||{};Object.keys(a).forEach(function(e){if(a.hasOwnProperty(e)&&typeof a[e].value==="object"){t.params[e]=[a[e].value.value]}});i=s.constructShellHash(t);if(!i){return undefined}return i}return{formatSite:r,toHashFromInbound:l,toHashFromOutbound:u,mapOne:p,_formatApplicationType:n}},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/utils/workpage/WorkPageService", ["sap/base/i18n/Localization","sap/ushell/utils/HttpClient","sap/base/util/ObjectPath","sap/ushell/Config","sap/base/Log","sap/ushell/Container","sap/base/util/deepExtend","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/utils","sap/base/util/uid"],function(e,t,n,a,s,i,r,o,p,u,c,l){"use strict";var d=function(){this.httpClient=new t;this._sBaseUrl=a.last("/core/workPages/contentApiUrl");const e=new URLSearchParams(window.location.search);this._sSiteId=e.get("siteId")||a.last("/core/site/siteId")};d.prototype._validateData=function(e){s.debug("cep/editMode: load Page: validate","Work Page service");if(e.errors&&e.errors.length>0){return Promise.reject(e.errors.map(function(e){return e.message}).join(",\n"))}if(!n.get("data.workPage",e)){s.debug("cep/editMode: load Page: validate: reject: data is empty","Work Page service");return Promise.reject("Work Page data is empty")}return Promise.resolve(e)};d.prototype.loadWorkPageAndVisualizations=async function(e,t){let n;let s;do{const i=a.last("/core/shell/intentNavigation");const r=this._createWorkPageQuery(this._sSiteId,e,s===undefined,n?.endCursor,i,t);const o=await this._doRequest(r);const p=await this._validateData(o);const u=await this._parseWorkPageData(p);if(!s){s=u.workPage}else{s.usedVisualizations.nodes.push(...u.workPage.usedVisualizations.nodes)}n=u.pageInfo}while(n?.hasNextPage);return Promise.resolve({workPage:s})};d.prototype._createWorkPageQuery=function(e,t,n,a,s,i){if(!e||!t){throw new Error(`Invalid Arguments, missing either siteId: ${e} or pageId: ${t}`)}const r=c.getFormFactor();const o=`\n            queryInput: {\n                filterWidgets: {\n                    visualization: {\n                        targetApp: {\n                            deviceType: { eq: "${r}" },\n                            launchType: { in: ["embedded", "standalone"] }\n                        }\n                    }\n                }\n            }`;return`{\n            workPage(\n                siteId: "${e}",\n                workPageId: "${t}"\n                ) {\n                    ${n?`\n                        id,\n                        contents${i?`(${o})`:""},\n                        editable,\n                        `:""}\n                    usedVisualizations${a?`(after:"${a}")`:""}{\n                        pageInfo{\n                            endCursor,\n                            hasNextPage\n                        }\n                        nodes{\n                            id,\n                            ${s?`\n                                targetAppIntent{\n                                    semanticObject,\n                                    action,\n                                    businessAppId\n                            },`:""}\n                            type,\n                            descriptor{\n                                value\n                            },\n                            descriptorResources{\n                                baseUrl,\n                                descriptorPath\n                            },\n                            provider{\n                                id\n                            },\n                            indicatorDataSource{\n                                url,\n                                refreshInterval\n                            }\n                        }\n                    }\n                }\n            }`.replace(/\s\s+/g,"").replace(/\n/gm,"")};d.prototype.loadSiteAndDataDestinationMappings=function(){const e=`{\n            site(siteId:"${this._sSiteId}") {\n              providers {\n                nodes {\n                  id,\n                  logicalDataDestinationMappings {\n                    logicalDestinationName,\n                    resolvedUrl\n                  }\n                }\n              }\n            }\n           }`.replace(/\s\s+/g,"").replace(/\n/gm,"");return this._doRequest(e)};d.prototype._parseWorkPageData=async function(e){const t=n.get("data.workPage.contents",e);const a=n.get("data.workPage.usedVisualizations.nodes",e)||[];const s=await this._transformVizData(a);const i=n.get("data.workPage.editable",e)===true;const r=n.get("data.workPage.usedVisualizations.pageInfo",e);return Promise.resolve({workPage:{contents:t,usedVisualizations:{nodes:s},editable:i},pageInfo:r})};d.prototype.loadVisualizations=function(e,t){let n=`\n        visualizations($queryInput: QueryVisualizationsInput) {\n            visualizations(queryInput: $queryInput, siteId: "${this._sSiteId}") {\n                totalCount,\n                nodes {\n                    id,\n                    type,\n                    descriptor {\n                        value,\n                        schemaVersion\n                    },\n                    descriptorResources {\n                        baseUrl,\n                        descriptorPath\n                    },\n                    indicatorDataSource {\n                        url,\n                        refreshInterval\n                    },\n                    targetAppIntent {\n                        semanticObject,\n                        action,\n                        businessAppId\n                    },\n                    systemLabel\n                }\n            }\n        }`;n=n.replace(/\n/g,"").replace(/ /g,"");n=`query ${n}`;if(t){const t=c.getFormFactor();e.filter=e.filter||[{}];e.filter=e.filter.map(e=>({...e,targetApp:{deviceType:{eq:t},launchType:{in:["embedded","standalone"]}}}))}const a={queryInput:e};return this._doRequest(n,JSON.stringify(a)).then(e=>({visualizations:e.data.visualizations||[],totalCount:e.data.totalCount||0}))};d.prototype._doRequest=function(t,n){let s=`${this._sBaseUrl}?query=${t}`;if(n){s+=`&variables=${encodeURIComponent(n)}`}const i={"Content-Type":"application/json",Accept:"application/json","Accept-Language":e.getLanguageTag().toString()};if(a.last("/core/site/sapCdmVersion")){i["sap-cdm-content-version"]=a.last("/core/site/sapCdmVersion")}return this.httpClient.get(s,{headers:i}).then(function(e){if(e.status<200||e.status>=300){return Promise.reject("HTTP request failed with status: "+e.status+" - "+e.statusText)}return JSON.parse(e.responseText||"{}")})};d.prototype._transformVizData=async function(e){const t=e.find(e=>e.type==="sap.ushell.StaticAppLauncher"||e.type==="sap.ushell.DynamicAppLauncher"||this._isSmartBusinessVizType(e));if(!t){return Promise.resolve(e)}const n=await i.getServiceAsync("CommonDataModel");const a=await n.getApplications();const s=await Promise.all(e.map(e=>{if(e.type==="sap.ushell.StaticAppLauncher"||e.type==="sap.ushell.DynamicAppLauncher"){return this._setApplicationProperties(e,a)}if(this._isSmartBusinessVizType(e)){return this._setSmartBusinessTilesProperties(e,n)}return e}));return Promise.resolve(s)};d.prototype._setApplicationProperties=async function(e,t){const s=n.get(["descriptor","value","sap.flp","target","appId"],e);const i=t[s];const c=n.get(["descriptor","value","sap.flp","indicatorDataSource","dataSource"],e);const l=n.get(["sap.app","dataSources",c],i);const d=n.get(["sap.app","contentProviderId"],i);const g=await p.getContentProviderLabel(d);const h=a.last("/core/shell/intentNavigation");const v={vizConfig:n.get(["descriptor","value"],e)};v.target=p.harmonizeTarget(u.getTarget(v)||{});if(h){e.target=v.target;e.targetURL=o.toHashFromTargetIntent(e.targetAppIntent,v.target)}const y=r({},e,{_siteData:{contentProviderId:d,contentProviderLabel:g,target:h?"":v.target,targetURL:h?"":o.toHashFromVizData(v,t),dataSource:l}});return y};d.prototype._isSmartBusinessVizType=function(e){return e.type.startsWith("ssuite.smartbusiness.tiles.")};d.prototype._setSmartBusinessTilesProperties=async function(e,t){const n=await t.getVizTypes();var a=l();return p.getVizData({vizTypes:n,visualizations:{[e.id]:{vizType:e,vizConfig:e.descriptor.value}}},{id:a,vizId:e.id,vizType:e.type}).then(t=>r({},e,{_siteData:t,vizType:t._instantiationData.vizType,descriptor:{value:t.vizConfig}}))};return d},true);
sap.ui.require.preload({
	"sap/ushell/bootstrap/SchedulingAgent/LoadingConfiguration.json":'{"OrderOfLoadingBlocks":["AfterCoreExtLight","FLPComponents","FLPPlugins","WarmUpPlugins"],"LoadingBlocks":{"AfterCoreExtLight":{"LoadingSteps":[{"LoadingStep":"StartScheduler","canBeLoadedAsync":false},{"LoadingStep":"MessagePopoverInit","canBeLoadedAsync":true},{"LoadingStep":"MenuBar","canBeLoadedAsync":true},{"LoadingStep":"SideNavigation","canBeLoadedAsync":true}],"maxWaitInMs":0},"FLPComponents":{"LoadingSteps":[{"LoadingStep":"ConditionalWaitForAppLoading","canBeLoadedAsync":false},{"LoadingStep":"PostLoadingHeaderEnhancement","canBeLoadedAsync":true},{"LoadingStep":"TrackingActivitiesSetting","canBeLoadedAsync":true},{"LoadingStep":"UserActionsMenu","canBeLoadedAsync":false},{"LoadingStep":"UserActionsMenuWebComponents","canBeLoadedAsync":false},{"LoadingStep":"UserImage","canBeLoadedAsync":false},{"LoadingStep":"Notifications","canBeLoadedAsync":false},{"LoadingStep":"Search","canBeLoadedAsync":false},{"LoadingStep":"ProductSwitch","canBeLoadedAsync":false},{"LoadingStep":"UserSettings","canBeLoadedAsync":false}],"maxWaitInMs":0},"FLPPlugins":{"LoadingSteps":[{"LoadingStep":"LoadPlugins","canBeLoadedAsync":true},{"LoadingStep":"FirstSegmentCompleteLoaded","canBeLoadedAsync":false}],"maxWaitInMs":0},"WarmUpPlugins":{"LoadingSteps":[{"LoadingStep":"WarmupPlugins","canBeLoadedAsync":true}],"maxWaitInMs":0}}}',
	"sap/ushell/bootstrap/SchedulingAgent/StepConfiguration.json":'{"StartScheduler":{"loadingMode":"continueOnEvent","continueOnEvent":{"eventName":"startScheduler"},"userCanTrigger":false,"canBeInterrupted":false},"LoadPlugins":{"loadingMode":"byEvent","byEvent":{"eventName":"loadRendererExtensions","eventData":""},"Dependencies":[]},"MessagePopoverInit":{"loadingMode":"byEvent","byEvent":{"eventName":"initMessagePopover","eventData":""},"Dependencies":[]},"TrackingActivitiesSetting":{"loadingMode":"byEvent","byEvent":{"eventName":"loadTrackingActivitiesSetting","eventData":""},"Dependencies":[]},"MenuBar":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.MenuBar","manifest":true},"url":"sap/ushell/components/shell/MenuBar"},"configSwitch":[{"path":"/core/menu/enabled","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"SideNavigation":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.SideNavigation","manifest":true},"url":"sap/ushell/components/shell/SideNavigation"},"configSwitch":[{"path":"/core/sideNavigation/enabled","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"Notifications":{"loadingMode":"byComponentCreate","excludedShellModeAndLaunchpadStates":[{"shellMode":"lean"}],"byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.Notifications","manifest":false},"url":"sap/ushell/components/shell/Notifications"},"configSwitch":[{"path":"/core/shell/model/enableNotifications","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"PostLoadingHeaderEnhancement":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.PostLoadingHeaderEnhancement","manifest":false},"url":"sap/ushell/components/shell/PostLoadingHeaderEnhancement"},"userCanTrigger":false,"canBeInterrupted":false},"UserActionsMenu":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.UserActionsMenu","manifest":false},"url":"sap/ushell/components/shell/UserActionsMenu"},"Dependencies":["TrackingActivitiesSetting"],"userCanTrigger":false,"canBeInterrupted":false,"configSwitch":[{"path":"/core/userActionsMenu/displayAvatar","assertionValue":false}]},"UserActionsMenuWebComponents":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.UserActionsMenu","manifest":false,"asyncHints":{"preloadBundles":["sap/ushell/preload-bundles/thirdparty.js"]}},"url":"sap/ushell/components/shell/UserActionsMenu"},"Dependencies":["TrackingActivitiesSetting"],"userCanTrigger":false,"canBeInterrupted":false,"configSwitch":[{"path":"/core/userActionsMenu/displayAvatar","assertionValue":true}]},"ProductSwitch":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.ProductSwitch","manifest":false},"url":"sap/ushell/components/shell/ProductSwitch"},"configSwitch":[{"path":"/core/productSwitch/enabled","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"UserSettings":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.Settings","manifest":false},"url":"sap/ushell/components/shell/Settings"},"userCanTrigger":false,"canBeInterrupted":false},"UserImage":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.UserImage","manifest":false},"url":"sap/ushell/components/shell/UserImage"},"userCanTrigger":false,"canBeInterrupted":false},"Search":{"loadingMode":"byComponentCreate","excludedShellModeAndLaunchpadStates":[{"shellMode":"lean"}],"byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.Search","manifest":false},"url":"sap/ushell/components/shell/Search"},"userCanTrigger":false,"canBeInterrupted":false},"FirstSegmentCompleteLoaded":{"loadingMode":"continueOnEvent","continueOnEvent":{"eventName":"firstSegmentCompleteLoaded"},"userCanTrigger":false,"canBeInterrupted":false},"WarmupPlugins":{"loadingMode":"byEvent","excludedShellModeAndLaunchpadStates":[{"shellMode":"default","launchpadState":"app"}],"byEvent":{"eventName":"loadWarmupPlugins","eventData":""},"Dependencies":["FirstSegmentCompleteLoaded","LoadPlugins"]},"ConditionalWaitForAppLoading":{"loadingMode":"continueOnEvent","continueOnEvent":{"eventName":"startUpFesrEnhanced","timeoutInMs":7000}}}',
	"sap/ushell/components/tiles/cdm/applauncher/StaticTile.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.tiles.cdm.applauncher.StaticTile"\n    height="100%"\n    width="100%"><GenericTile\n        additionalTooltip="{= ${/properties/showContentProviderInfoInTooltip} ? ${/properties/contentProviderLabel} : \'\'}"\n        systemInfo="{= ${/properties/showContentProviderInfoOnVisualizations} ? ${/properties/contentProviderLabel} : \'\'}"\n        frameType="{/properties/frameType}"\n        header="{/properties/title}"\n        mode="{/properties/mode}"\n        scope="{/properties/scope}"\n        sizeBehavior="{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}"\n        subheader="{/properties/subtitle}"\n        url="{\n            path: \'/properties/targetURL\',\n            formatter: \'._getLeanUrl\'\n        }"\n        wrappingType="{/properties/wrappingType}"\n        press=".onPress"><dependents><TileContent id="standardTileContent" footer="{/properties/info}" /><TileContent id="imageTileContent" footer="{/properties/info}"><ImageContent src="{/properties/icon}" /></TileContent></dependents></GenericTile></mvc:View>\n',
	"sap/ushell/components/tiles/cdm/applauncher/manifest.json":'{"_version":"1.21.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["standard","standardWide","compact","flat","flatWide"],"default":"standard"}}},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncher","type":"component","applicationVersion":{"version":"1.0.0"},"title":"","tags":{"keywords":[]},"ach":"CA-FE-FLP-COR"},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncher","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncher.StaticTile","type":"XML"},"handleValidation":false,"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    controllerName="sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile"\n    height="100%"\n    width="100%"><GenericTile\n        additionalTooltip="{= ${/properties/showContentProviderInfoInTooltip} ? ${/properties/contentProviderLabel} : \'\'}"\n        systemInfo="{= ${/properties/showContentProviderInfoOnVisualizations} ? ${/properties/contentProviderLabel} : \'\'}"\n        frameType="{/properties/frameType}"\n        header="{/properties/title}"\n        scope="{/properties/scope}"\n        sizeBehavior="{= ${/properties/customSizeBehavior} || ${/properties/configSizeBehavior}}"\n        subheader="{/properties/subtitle}"\n        url="{\n            path: \'/properties/targetURL\',\n            formatter: \'._getLeanUrl\'\n        }"\n        wrappingType="{/properties/wrappingType}"\n        press=".onPress"><TileContent\n            id="numericTileContent"\n            footer="{/properties/info}"\n            footerColor="{\n                path: \'/properties/infoState\',\n                formatter: \'._formatValueColor\'\n            }"\n            unit="{/properties/number_unit}"><NumericContent\n                icon="{/properties/icon}"\n                indicator="{/properties/number_state_arrow}"\n                scale="{/properties/number_factor}"\n                truncateValueTo="5"\n                value="{/properties/number_value}"\n                valueColor="{\n                    path: \'/properties/number_value_state\',\n                    formatter: \'._getValueColor\'\n                }"\n                withMargin="false"\n                width="100%" /></TileContent></GenericTile></mvc:View>\n',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json":'{"_version":"1.21.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["standard","standardWide","compact","flat","flatWide"],"default":"standard"}}},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncherdynamic","_version":"1.0.0","type":"component","applicationVersion":{"version":"1.0.0"},"title":"","description":"","tags":{"keywords":[]},"ach":"CA-FLP-FE-COR"},"sap.ui":{"_version":"1.1.0","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncherdynamic","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile","type":"JS"},"handleValidation":false}}',
	"sap/ushell/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell","type":"library","embeds":["appRuntime/ui5/plugins/rtaAgent","appRuntime/ui5/plugins/rtaShell","components/appfinder","components/cepsearchresult/app","components/cepsearchresult/app/cards/searchresultwidget","components/contentFinder","components/contentFinder/dialog","components/contentFinderStandalone","components/homeApp/error","components/homepage","components/pages","components/runtimeSwitcher","components/shell/FloatingContainer","components/shell/MenuBar","components/shell/NavigationBarMenu","components/shell/Search","components/shell/Settings/userDefaults","components/shell/ShellBar","components/shell/SideNavigation","components/tiles/cdm/applauncher","components/tiles/cdm/applauncherdynamic","components/workPageBuilder","components/workPageRuntime","plugins/appwarmup","plugins/ghostapp","plugins/rta","plugins/rta-personalize","renderer/rendererTargetWrapper","renderer/search/searchComponent"],"applicationVersion":{"version":"1.136.1"},"title":"SAP library: sap.ushell","description":"SAP library: sap.ushell","ach":"CA-FLP-FE-UI","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_base","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_bluecrystal_base","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb","sap_horizon","sap_horizon_dark","sap_horizon_hcb","sap_horizon_hcw"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.136","libs":{"sap.f":{"minVersion":"1.136.0","lazy":true},"sap.m":{"minVersion":"1.136.0"},"sap.ui.core":{"minVersion":"1.136.0"},"sap.ui.layout":{"minVersion":"1.136.0","lazy":true},"sap.suite.ui.commons":{"minVersion":"1.136.0","lazy":true},"sap.suite.ui.microchart":{"minVersion":"1.136.0","lazy":true},"sap.ui.comp":{"minVersion":"1.136.0","lazy":true},"sap.ui.export":{"minVersion":"1.136.0","lazy":true},"sap.collaboration":{"minVersion":"1.136.0","lazy":true},"sap.ui.table":{"minVersion":"1.136.0","lazy":true},"sap.ui.integration":{"minVersion":"1.136.0","lazy":true},"sap.ui.generic.app":{"minVersion":"1.136.0","lazy":true},"sap.esh.search.ui":{"minVersion":"1.136.2","lazy":true}}},"library":{"i18n":false,"content":{"controls":["sap.ushell.appIntegration.ApplicationContainer","sap.ushell.appIntegration.IframeApplicationContainer","sap.ushell.appIntegration.UI5ApplicationContainer","sap.ushell.components.container.ApplicationContainer","sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.components.shell.Settings.userDefaults.UserDefaultsForm","sap.ushell.components.tiles.sbtilecontent","sap.ushell.components.workPageBuilder.controls.WorkPage","sap.ushell.components.workPageBuilder.controls.WorkPageButton","sap.ushell.components.workPageBuilder.controls.WorkPageCell","sap.ushell.components.workPageBuilder.controls.WorkPageColumn","sap.ushell.components.workPageBuilder.controls.WorkPageColumnResizer","sap.ushell.components.workPageBuilder.controls.WorkPageRow","sap.ushell.renderer.NavContainer","sap.ushell.ui.launchpad.VizInstance","sap.ushell.ui.launchpad.VizInstanceBase","sap.ushell.ui.launchpad.VizInstanceAbap","sap.ushell.ui.launchpad.VizInstanceCdm","sap.ushell.ui.launchpad.VizInstanceLaunchPage","sap.ushell.ui.launchpad.VizInstanceLink","sap.ushell.ui.AppContainer","sap.ushell.ui.ContentNodeSelector","sap.ushell.ui.ContentNodeTreeItem","sap.ushell.ui.CustomGroupHeaderListItem","sap.ushell.ui.ShellHeader","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.appfinder.AppBoxInternal","sap.ushell.ui.appfinder.PinButton","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SendAsEmailButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.CatalogEntryContainer","sap.ushell.ui.launchpad.CatalogsContainer","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Page","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Section","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.launchpad.TileStateInternal","sap.ushell.ui.launchpad.section.CompactArea","sap.ushell.ui.shell.FloatingContainer","sap.ushell.ui.shell.NavigationMiniTile","sap.ushell.ui.shell.OverflowListItem","sap.ushell.ui.shell.RightFloatingContainer","sap.ushell.ui.shell.ShellAppTitle","sap.ushell.ui.shell.ShellFloatingAction","sap.ushell.ui.shell.ShellFloatingActions","sap.ushell.ui.shell.ShellHeadItem","sap.ushell.ui.shell.ShellNavigationMenu","sap.ushell.ui.shell.SidePane","sap.ushell.ui.shell.SubHeader","sap.ushell.ui.shell.SysInfoBar","sap.ushell.ui.shell.ToolArea","sap.ushell.ui.shell.ToolAreaItem","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],"elements":["sap.ushell.ui.launchpad.AccessibilityCustomData"],"types":["sap.ushell.AllMyAppsState","sap.ushell.AllMyAppsProviderType","sap.ushell.AppTitleState","sap.ushell.ContentNodeType","sap.ushell.appIntegration.contracts.StatefulType","sap.ushell.components.container.ApplicationType","sap.ushell.DisplayFormat","sap.ushell.NavigationState","sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow","sap.ushell.VisualizationLoadState","sap.ushell.AppType","sap.ushell.FloatingNumberType"],"interfaces":["sap.ushell.renderer.INavContainerPage"]}}}}',
	"sap/ushell/renderer/RendererRootView.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.ushell.ui.shell"\n    xmlns:m="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:renderer="sap.ushell.renderer"\n><renderer:NavContainer id="viewPortContainer" beforeNavigate=".onBeforeNavigate" afterNavigate=".onAfterNavigate"/></core:FragmentDefinition>\n',
	"sap/ushell/renderer/shellHeader/ShellHeader.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.ushell.ui"\n    xmlns:core="sap.ui.core"\n    xmlns:shell="sap.ushell.ui.shell"\n    core:require="{\n        BindingHelper: \'sap/ushell/state/BindingHelper\'\n    }"><ShellHeader\n        id="shell-header"\n        showLogo="{shellModel>/header/home/showLogo}"\n        visible="{shellModel>/header/visible}"\n        headItems="{\n            path: \'shellModel>/header/headItems\',\n            factory: \'BindingHelper.factory\'\n        }"\n        headEndItems="{\n            path: \'shellModel>/header/headEndItems\',\n            factory: \'BindingHelper.factory\',\n            filters: [{ path: \'\', test: \'.isHeadEndItemNotInOverflow\' }]\n        }"\n        centralAreaElement="{shellModel>/header/centralAreaElement}"\n        showNewExperienceSwitch="{newExperience>/showInShellHeader}"\n        title="{shellModel>/header/secondTitle}"><appTitle><shell:ShellAppTitle\n                id="shellAppTitle"\n                text="{shellModel>/application/title}"\n                title="{shellModel>/application/title}"\n                icon="{shellModel>/application/icon}"\n                subTitle="{shellModel>/header/secondTitle}"\n            /></appTitle></ShellHeader></core:FragmentDefinition>\n'
},"sap/ushell/core-lib-preload");
sap.ui.require(["sap/ui/core/Core"], (Core) => Core.boot?.());
//# sourceMappingURL=core-min-3.js.map
