//@ui5-bundle sap/ushell/components/shell/SearchCEP/Component-preload.js
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/Component", ["sap/ui/core/Element","sap/ui/core/EventBus","sap/ui/core/UIComponent","sap/m/SearchField","sap/ushell/components/shell/SearchCEP/SearchCEP.controller","sap/base/Log","sap/ushell/resources","sap/ui/core/IconPool","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ushell/utils/UrlParsing","sap/ushell/Container"],function(e,t,i,s,n,r,a,h,o,jQuery,l,c){"use strict";return i.extend("sap.ushell.components.shell.SearchCEP.Component",{metadata:{version:"1.136.1",library:["sap.ushell","sap.ushell.components.shell"],dependencies:{libs:["sap.m"]}},createContent:function(){try{this.oRenderer=c.getRendererInternal("fiori2");this.oShellHeader=e.getElementById("shell-header");this.oRenderer.addHeaderEndItem({id:"sf",tooltip:"{i18n>openSearchBtn}",text:"{i18n>search}",ariaLabel:"{i18n>openSearchBtn}",icon:h.getIconURI("search"),visible:true,press:this.onShellSearchButtonPressed.bind(this)},true,false);this.oShellSearchBtn=e.getElementById("sf");this.oShellSearchBtn.data("help-id","shellHeader-search",true);this.oShellSearchBtn.addEventDelegate({onkeydown:this._keyDownSearchBtn.bind(this)});var i={width:"90%",placeholder:a.i18n.getText("search"),tooltip:a.i18n.getText("search"),enableSuggestions:true,suggest:this.onSuggest.bind(this),search:this.onSearch.bind(this)};this.oSF=new s("PlaceHolderSearchField",i);this.oSF.addStyleClass("sapUshellCEPSearchCenter");var o=this.getScreenSize();if(o==="S"){this.initSearchSSize()}else if(o==="M"||o==="L"){this.initSearchMLSizes()}else if(o==="XL"){this.initSearchXLSize()}this.oShellHeader.setSearch(this.oSF);this.oSearchCEPController=new n;this.oSF.addEventDelegate({onfocusin:this._onfocusin.bind(this),onAfterRendering:this._onAfterRendering.bind(this)});this.oSearchCEPController.getHomePageApps()}catch(e){r.info("Failed to create CEP search field content"+e)}t.getInstance().publish("shell","searchCompLoaded",{delay:0})},initSearchSSize:function(){this.oSF.setWidth("60%");this.oShellHeader.setSearchState("COL",35,false)},initSearchMLSizes:function(){this.oShellHeader.setSearchState("COL",35,false)},initSearchXLSize:function(){this.oShellSearchBtn.setVisible(false);this.oShellHeader.setSearchState("EXP",35,false)},_onAfterRendering:function(e){var t=jQuery(this.oShellHeader.getDomRef()).find("#shell-header-hdr-search");t.addClass("CEPShellHeaderPadding");jQuery(this.oSF.getDomRef()).find("#PlaceHolderSearchField-search").attr("title",a.i18n.getText("search"));var i=c.getFLPUrl(true),s=l.getHash(i),n=s.split("&/")[0];if(this.oSF.getValue()){if(n==="Action-search"||n==="WorkZoneSearchResult-display"){jQuery(this.oSF.getDomRef()).blur()}}},_onfocusin:function(e){if(this.oSF.getEnableSuggestions()&&o.system.phone){jQuery(this.oSF.getDomRef()).find("input").attr("inputmode","search")}},onSuggest:function(t){if(this.oSF.getEnableSuggestions()&&o.system.phone){jQuery(this.oSF.getDomRef()).find("input").attr("inputmode","search")}if(e.getElementById("CEPSearchField")){this.oSearchCEPController.onSuggest(t)}else{this.oSearchCEPController.onInit()}},onSearch:function(t){if(e.getElementById("CEPSearchField")){this.oSearchCEPController.onSearch(t)}},exit:function(){this.oSearchCEPController.onExit()},expandSearch:function(){this.oShellHeader.setSearchState("EXP_S",35,false);this.oSF.focus()},onShellSearchButtonPressed:function(){this.oShellSearchBtn.setVisible(false);this.expandSearch()},collapseSearch:function(){this.oShellHeader.setSearchState("COL",35,false);this.oShellSearchBtn.setVisible(true)},getScreenSize:function(){var e=o.media.getCurrentRange(o.media.RANGESETS.SAP_STANDARD_EXTENDED);if(e.from>=1440){return"XL"}else if(e.from>=1024){return"L"}else if(e.from>=600){return"M"}else if(e.from>=0){return"S"}},_keyDownSearchBtn:function(e){if(e.code===13||e.code==="Enter"){setTimeout(function(){this.oSF.focus()}.bind(this),500)}}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/ProvidersExecuter", ["sap/ushell/components/shell/SearchCEP/SearchProviders/SearchProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/SearchServiceProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/FrequentActivityProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/RecentSearchProvider","sap/base/Log"],function(e,r,s,n,o){"use strict";return{runProviders:function(a){var i,t;if(a!==undefined){i=[r]}else{i=[r,s,n]}o.info("-------------------- run CEP search test for sQuery="+a+" --------------------");for(t=0;t<i.length;t++){(function(r){r.execSearch(a).then(function(s){var n="",a=false;n+="-------------------- search provider '"+r.getName()+"' results:\n";for(var i in e.GROUP_TYPE){var t=e.GROUP_TYPE[i];if(Array.isArray(s[t])&&s[t].length>0){a=true;n+="----\x3e group '"+t+"' results:\n";for(var c=0;c<s[t].length;c++){n+="result #"+c+":\n";n+=JSON.stringify(s[t][c],null,2)+"\n"}}}if(!a){n+="----\x3e no results:\n"}o.info(n)})})(i[t])}}}});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchCEP.controller", ["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/Fragment","sap/m/List","sap/m/Text","sap/m/StandardListItem","sap/ushell/components/shell/SearchCEP/SearchProviders/SearchProvider","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/Device","sap/ushell/EventHub","sap/m/Avatar","sap/ushell/Container","sap/ushell/Config","sap/ui/thirdparty/hasher"],function(e,t,i,s,r,o,n,a,l,jQuery,h,d,c,g,u,f,p){"use strict";return i.extend("sap.ushell.components.shell.SearchCEP.SearchCEP",{onInit:function(){this._bIsMyHome=false;this._bEscPressed=false;this.bGrowingReset=false;this._bClosedOnItemPress=false;this._SearchCEPService=u.getServiceAsync("SearchCEP");this._SearchCEPService.then(function(e){this._registerDefaultProviders(e);this._listenToServiceEvents(e)}.bind(this));this._toggleSearchPopover(false);this._oPlaceHolderSF=t.getElementById("PlaceHolderSearchField");this._registerHandleHashChange();var e=u.getFLPPlatform(true);if(e==="MYHOME"){this._bIsMyHome=true}},onSuggest:function(e){if(this._bEscPressed||this._bClosedOnItemPress){return}this.oSF.focus();var t=e.getParameter("suggestValue");this._testProviders(t)},onfocusin:function(e){if(this.oSF.getEnableSuggestions()&&d.system.phone){jQuery(this.oSF.getDomRef()).find("input").attr("inputmode","search");jQuery(this._oPlaceHolderSF.getDomRef()).find("input").attr("inputmode","search")}},onSearch:function(e){var i=e.getParameter("query"),s=e.getParameter("escPressed"),r=e.getParameter("clearButtonPressed"),o=t.getElementById("SearchResultList");if(s){this._bEscPressed=s;if(this.oSF.getValue()||this._oPlaceHolderSF.getValue()){this.oSF.setValue("");this._oPlaceHolderSF.setValue("")}else{this._oPopover.close()}return}if(r){this.oSF.setValue("");this._oPlaceHolderSF.setValue("");this._testProviders();var n=true,a=this._oPopover.getContent()[1].getItems();for(var l in a){if(a[l].getItems().length){n=false}}if(n){this._oPopover.close()}return}if(i){i=i.trim();this._oPlaceHolderSF.setValue(this.oSF.getValue());this._saveSearchTerm(i);if(this._bIsMyHome){if(o.getItems().length>0){var h=o.getItems()[0].getBindingContext("resultModel"),d=h.getObject();this._navigateToApp(d)}}else{this._navigateToResultPage(i)}this._oPopover.close()}},onBeforeOpen:function(){var e=false,i=t.getElementById("shell-header"),s=i.getSearchState();if(s==="COL"){e=true}this._oPopover.addStyleClass("sapUshellCEPSearchFieldPopover");i.setSearchState("EXP",35,false);i.setSearchState("EXP_S",35,true);if(e===true){i.setSearchState("COL",35,false)}},onAfterOpen:function(){var e=document.getElementById("PlaceHolderSearchField").clientHeight;document.getElementById("CEPSearchField").style.height=e+"px";document.getElementById("CEPSearchField-search").title=h.i18n.getText("search")},onAfterClose:function(e){var i=t.getElementById("sf"),s=t.getElementById("shell-header"),r=this._getScreenSize(),o=this._oPopover.getContent()[1].getItems();this._oPlaceHolderSF.setValue(this.oSF.getValue());if(this._bClosedOnItemPress){this._bClosedOnItemPress=false}if(this._bEscPressed){this._bEscPressed=false;this._oPlaceHolderSF.focus()}if(r!=="XL"&&this.oSF.getValue()===""){s.setSearchState("COL",35,false);i.setVisible()}else{s.setSearchState("EXP",35,false);s.setSearchState("EXP_S",35,false)}o.forEach(function(t){var i=t._getProviderConfig(),s=this._getDefaultProviderGroupName(i.id);if(!s){if(typeof i.popoverClosed==="function"){var r=i.popoverClosed;r(e)}}}.bind(this))},getHomePageApps:function(){var e="homePageApplications",t=l.defaultProviders[e];t.execSearch("",e)},_registerHandleHashChange:function(){p.changed.add(e=>{if(e!==""&&!/WorkZoneSearchResult-display|Action-search/.test(e)){if(this._oPlaceHolderSF&&this._oPlaceHolderSF.getValue()!==""){this._oPlaceHolderSF.setValue("")}if(this.oSF&&this.oSF.getValue()!==""){this.oSF.setValue("")}}})},_listenToServiceEvents:function(e){c.on("updateExtProviderLists").do(this._updateExtProviderLists.bind(this,e))},_updateExtProviderLists:function(e){if(this._oPopover){var t=this._oPopover.getContent()[1],i=t.getItems(),s=e.getExternalSearchProvidersPriorityArray();for(var r in i){var o=i[r],n=o._getProviderConfig(),a=this._getDefaultProviderGroupName(n.id);if(!a){t.removeItem(o);o.destroy();this._oResultModel.setProperty("/"+n.name,[])}}if(!d.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}s.then(function(e){for(var i in e){var s=this._createList(e[i],undefined);s.addStyleClass(this._sContentDensityClass);t.addItem(s)}if(this._oPopover.isOpen()){if(e.length){this._testProviders(this.oSF.getValue())}}}.bind(this))}},_registerDefaultProviders:function(e){for(var t in l.defaultProviders){e._registerDefaultSearchProvider(l.defaultProviders[t])}},_getScreenSize:function(){var e=d.media.getCurrentRange(d.media.RANGESETS.SAP_STANDARD_EXTENDED);if(e.from>=1440){return"XL"}else if(e.from>=1024){return"L"}else if(e.from>=600){return"M"}else if(e.from>=0){return"S"}},_focusNextList:function(e){var t=this._oPopover.getContent()[1].getItems(),i=t.map(function(e){return e.getId()}).indexOf(e.getId()),s=t.slice(i+1);for(var r=0;r<s.length;r++){if(s[r].getVisible()&&s[r].getItems().length){var o=s[r].getItems()[0],n=o.getParent(),a=n._getProviderConfig();o.focus();this._setListNameToAriaLabelledBy(o,a.title);break}}},_focusPreviousList:function(e){var i=this._oPopover.getContent()[1].getItems(),s=i.map(function(e){return e.getId()}).indexOf(e.getId()),r=i.slice(0,s);if(!r.length){this.oSF.focus();return}for(var o=r.length-1;o>=0;o--){if(r[o].getVisible()&&r[o].getItems().length){var n=r[o].getItems(),a=document.getElementById(r[o].getId()+"-triggerList"),l=window.getComputedStyle(a);if(l.display==="none"){n[n.length-1].focus()}else{t.getElementById(r[o].getId()+"-trigger").focus()}break}if(o===0){this.oSF.focus()}}},_keyDownHandler:function(e){var t=e.srcControl,i=t.getParent(),s=i.getItems();if(e.code===40||e.code==="ArrowDown"){if(s[s.length-1]===t){var r=document.getElementById(i.getId()+"-triggerList"),o=window.getComputedStyle(r);if(o.display==="none"){this._focusNextList(i)}}if(t.getId().endsWith("-trigger")){this._focusNextList(i)}}else if(e.code===38||e.code==="ArrowUp"){if(s[0]===t){this._focusPreviousList(i)}}},_setListNameToAriaLabelledBy:function(e,i){var s=e.getDomRef(),r=jQuery(s).attr("aria-labelledby"),o=t.getElementById(r).getProperty("text");jQuery(t.getElementById(r).getDomRef()).text(i+". "+o)},_getDefaultProviderGroupName:function(e){var t={SearchResultList:"applications",FrequentlyUsedAppsList:"frequentApplications",SearchHistoryList:"recentSearches",ProductsList:"homePageApplications",ExternalSearchAppsList:"externalSearchApplications"};return t[e]},_removeTopListDivider:function(){setTimeout(function(){var e=jQuery(this._oPopover.getDomRef()).find(".searchCEPList.sapUshellCEPListDivider").not(":hidden");if(e.length){jQuery.each(e,function(t){if(jQuery(e[t]).hasClass("topCEPlist")){jQuery(e[t]).removeClass("topCEPlist")}});jQuery(e[0]).addClass("topCEPlist")}}.bind(this),300)},_createList:function(e,t){var i=new o({id:e.id,showSeparators:"None",headerText:e.titleVisible?e.title:"",headerLevel:"H1",growing:true,showNoData:e.showNoData||false,growingThreshold:e.defaultItemCount,growingScrollToLoad:false,items:{path:"resultModel>/"+e.name,factory:this._createListItem.bind(this,e.name)},growingStarted:this._listUpdateStart.bind(this),updateStarted:this._listUpdateStart.bind(this),updateFinished:this._listUpdateFinished.bind(this),itemPress:this._itemPress.bind(this)}).addStyleClass("searchCEPList sapUshellCEPListDivider");i.setModel(t,"resultModel");i._providerConfig=e;i._getProviderConfig=function(){return this._providerConfig};i.addEventDelegate({onkeydown:this._keyDownHandler.bind(this),onsapdown:this._keyDownHandler.bind(this)});return i},_createListItem:function(e,t,i){var s={iconDensityAware:false,title:i.getProperty("text"),type:"Active"},r=i.getProperty("icon"),o=this._getScreenSize(),n=i.getProperty("contentProviderLabel"),l=["SearchResultList","FrequentlyUsedAppsList"],h=f.last("/core/contentProviders/providerInfo/enabled"),d=f.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");if(h&&d&&l.includes(e)&&n!==undefined&&n!==""){n=n.toUpperCase();if(o==="S"){s.description=n}else{s.title+=" - "+n}}var c=new g("",{displaySize:"XS",backgroundColor:"Transparent",displayShape:"Square",src:r,imageFitType:"Contain",decorative:true});s.avatar=c;if(r.indexOf("sap-icon://")>-1){c.addStyleClass("searchCEPlistItemIcon")}var u=new a(s);if(o==="S"&&s.description!==undefined){u.addStyleClass("sapCEPSearchListItemMobileHeight")}u.addStyleClass("sapUiTinyMarginBeginEnd");return u},_itemPress:function(e){var t,i=e.getParameter("srcControl"),s=i.getParent(),r=s._getProviderConfig(),o=this._getDefaultProviderGroupName(r.id);if(o){o=o.charAt(0).toUpperCase()+o.substring(1);t="_on"+o+"Press";this[t](e)}else{t=r.itemPress;t(e);var n=s.getItems().indexOf(i),a=this._oResultModel.getProperty("/"+r.name),l=a[n];if(l.hasOwnProperty("press")&&typeof l.press==="function"){t=l.press;t(e)}if(!l.hasOwnProperty("closePopover")&&r.closePopover===true||l.hasOwnProperty("closePopover")&&l.closePopover===true){this._bClosedOnItemPress=true;this._oPopover.close();jQuery(this.oSF.getDomRef()).find("input").blur();jQuery(this._oPlaceHolderSF.getDomRef()).find("input").blur()}}},_listUpdateStart:function(e){var t=e.getSource(),i=t._getProviderConfig(),s=e.getParameter("actual"),r=e.getParameter("reason"),o=this.bGrowingReset?i.maxItemCount:i.defaultItemCount;if(s&&s>0){if(r){switch(r.toLowerCase()){case"growing":this.bGrowingReset=true;var n=this._oResultModel.getProperty("/"+i.name);this._oResultModel.setProperty("/"+i.name,[]);this._oResultModel.setProperty("/"+i.name,n);t.setGrowingThreshold(i.maxItemCount);break;case"change":t.setGrowingThreshold(o);break}}else{t.setGrowingThreshold(o)}}},_listUpdateFinished:function(e){var t=e.getSource(),i=t._getProviderConfig(),s;if(this._getScreenSize()==="S"){s=t.$().find(".sapMSLITitle, .sapMSLIDescription")}else{s=t.$().find(".sapMSLITitleOnly")}jQuery.each(s,function(e){var r=s[e];if(r.scrollWidth>r.offsetWidth){r.parentNode.parentNode.title=r.innerText}if(i.id==="SearchResultList"){var o=t.getModel("resultModel").getProperty("/query");if(i.highlightResult&&i.highlightResult===true){var n=new RegExp(o,"gi"),a=r.innerHTML.replace(/<[^>]*>/g,""),l=a.replace(n,function(e){return this._getBoldTitle(i,e)}.bind(this));r.innerHTML=this._getHighlightedHtml(i,l)}}}.bind(this))},_getBoldTitle:function(e,t){if(e.highlightSearchStringPart&&e.highlightSearchStringPart===true){return"<b>"+t+"</b>"}return"</b>"+t+"<b>"},_getHighlightedHtml:function(e,t){if(!e.highlightSearchStringPart||e.highlightSearchStringPart!==true){return"<b>"+t+"</b>"}return t},_testProviders:function(e){if(!this._oResultModel){this._oResultModel=new s({});this._oPopover.setModel(this._oResultModel,"resultModel")}var t=this._oResultModel,i=(e||"").trim().length,r=this._oPopover.getContent()[1].getItems();t.setProperty("/query",e);if(!d.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}for(var o in r){var n=r[o],a=n._getProviderConfig(),l=this._getDefaultProviderGroupName(a.id);n.setVisible(false);if(i>=a.minQueryLength&&i<=a.maxQueryLength){a.execSearch(e,l).then(function(i,s,r){if(r&&Array.isArray(r)&&r.length>0){var o=this._oResultModel.getProperty("/query");if(o&&(o.length<s.minQueryLength||o.length>s.maxQueryLength)){return}if(!this._oPopover.isOpen()){this._toggleSearchPopover(true)}if(t.getProperty("/"+s.name)){this.bGrowingReset=false;t.setProperty("/"+s.name,[])}i.setVisible(true);var n=r.slice(0,s.maxItemCount);t.setProperty("/"+s.name,n);switch(i.getId()){case"SearchResultList":this._applyResultsAcc(n.length);break}this.oSF.focus()}else{t.setProperty("/"+s.name,[]);switch(i.getId()){case"SearchResultList":this._applyResultsAcc(0);var a=h.i18n.getText("no_apps_found",[e]);i.setNoDataText(a);i.setVisible(true);break}}}.bind(this,n,a))}}this._removeTopListDivider()},_applyResultsAcc:function(e){var t="",i=this.oSF.$("SuggDescr"),s=i.text();if(e===1){t=h.i18n.getText("one_result_search_aria",[e])}else if(e>1){t=h.i18n.getText("multiple_results_search_aria",[e])}else{t=h.i18n.getText("no_results_search_aria")}if(s.indexOf(".")<0){t+="."}i.text(t)},_toggleSearchPopover:function(t){if(!this._oPopover){r.load({name:"sap.ushell.components.shell.SearchCEP.SearchFieldFragment",type:"XML",controller:this}).then(function(t){this._oPopover=t;var i=this._getScreenSize(),s=document.getElementById("PlaceHolderSearchField").clientWidth;if(i==="S"){s=1.1*s}else{s=1.05*s}this._oPopover.setContentWidth(s+"px");if(e.getRTL()===true){var r=this._oPopover.getOffsetX();this._oPopover.setOffsetX(-1*r)}this._initializeSearchField();var o=new n({id:"popoverTitle",text:"List of search results and navigation suggestions"});o.addStyleClass("sapUiInvisibleText");this._oPopover.addContent(o);this._initLists().then(function(){this._testProviders()}.bind(this))}.bind(this))}else if(t){this._oPopover.openBy(this._oPlaceHolderSF);if(this._oPlaceHolderSF.getValue()!==""){this.oSF.setValue(this._oPlaceHolderSF.getValue())}}},_initLists:function(){return this._SearchCEPService.then(function(e){var t=e.getSearchProvidersPriorityArray(),i=this._oPopover.getContent()[1];if(!d.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}return t.then(function(e){for(var t=0;t<e.length;t++){var s=this._createList(e[t],this._oResultModel);s.addStyleClass(this._sContentDensityClass);i.addItem(s)}}.bind(this))}.bind(this))},_keyDownSearchField:function(e){if(e.code===40||e.code==="ArrowDown"){this.oSF.focus();var i=this._oPopover.getContent()[1].getItems();for(var s in i){if(i[s].getVisible()&&i[s].getItems().length>0){var r=i[s].getItems()[0],o=r.getParent(),n=o._getProviderConfig();r.focus();this._setListNameToAriaLabelledBy(r,n.title);break}}}else if(e.code===116||e.code==="F5"){window.location.reload()}else if(e.code===9||e.code==="Tab"){var a;if(e.shiftKey){a=this._oPlaceHolderSF.oParent.getDomRef().firstChild.lastChild.firstChild}else{var l=this._oPlaceHolderSF.oParent.getDomRef().lastChild,h=l.childNodes;for(var d in h){if(getComputedStyle(h[d]).display!=="none"){a=h[d];break}}}setTimeout(function(){if(this._getScreenSize()==="S"||this._getScreenSize()==="M"){t.getElementById("shell-header").setSearchState("COL",35,false);t.getElementById("sf").setVisible(true)}if(a){a.focus()}}.bind(this),0)}else if(e.code===27||e.code==="Escape"){this.oSF.setValue("");this._oPlaceHolderSF.setValue("");this._bEscPressed=true}},_initializeSearchField:function(){this.oSF=t.getElementById("CEPSearchField");var e=document.getElementById("PlaceHolderSearchField").clientWidth;this.oSF.setWidth(e+"px");this.oSF.addEventDelegate({onkeydown:this._keyDownSearchField.bind(this),onfocusin:this.onfocusin.bind(this)})},_saveSearchTerm:function(e){if(e){u.getServiceAsync("UserRecents").then(function(t){t.addSearchActivity({sTerm:e})})}},_onRecentSearchesPress:function(e){var t=e.getParameter("listItem").getProperty("title");this.oSF.setValue(t);setTimeout(function(){this._testProviders(t)}.bind(this))},_onApplicationsPress:function(e){var t=this.oSF.getValue(),i=e.getParameter("listItem").getBindingContext("resultModel"),s=i.getObject();this._saveSearchTerm(t);this._navigateToApp(s)},_onHomePageApplicationsPress:function(e){var t=this.oSF.getValue(),i=e.getParameter("listItem").getBindingContext("resultModel"),s=i.getObject();this._saveSearchTerm(t);this._navigateToApp(s)},_onExternalSearchApplicationsPress:function(e){var t=this.oSF.getValue(),i=e.getParameter("listItem").getBindingContext("resultModel"),s=i.getObject();this._saveSearchTerm(t);if(s&&s.isEnterpriseSearch===true){this._navigateToResultPage(t,true)}else{this._navigateToApp(s,t)}},_onFrequentApplicationsPress:function(e){var t=e.getParameter("listItem").getBindingContext("resultModel"),i=t.getObject();this._navigateToApp(i);if(this._oPopover.isOpen()){this._oPopover.close()}},_navigateToApp:function(e,t){this._SearchCEPService.then(function(i){i.navigate(e,t)});if(this.oSF.getValue()!==""){this.oSF.setValue("")}setTimeout(function(){if(this._oPopover.isOpen()){this._oPopover.close()}}.bind(this),500)},_navigateToResultPage:function(e,t){if(e===""){return}var i="#WorkZoneSearchResult-display?searchTerm="+e+"&category=app";if(t===true){i='#Action-search&/top=20&filter={"dataSource":{"type":"Category","id":"All","label":"All","labelPlural":"All"},"searchTerm":"'+e+'","rootCondition":{"type":"Complex","operator":"And","conditions":[]}}'}var s=u.getServiceAsync("Navigation");s.then(function(e){e.navigate({target:{shellHash:i}})})}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchProviders/FrequentActivityProvider", ["sap/base/Log","sap/ushell/Container"],function(e,t){"use strict";var r=function(){};r.prototype.getName=function(){return"Frequent Activity Provider"};r.prototype.execSearch=function(r,n){return t.getServiceAsync("UserRecents").then(function(t){return t.getFrequentActivity().then(function(e){var t=[],r={frequentApplications:{Application:{icon:"sap-icon://SAP-icons-TNT/application"},"External Link":{icon:"sap-icon://internet-browser"}},frequentProducts:{Product:{icon:"sap-icon://product"}}};if(e&&Array.isArray(e)&&e.length>0){t=e.filter(function(e){return r[n].hasOwnProperty(e.appType)}).map(function(e){e.text=e.text||e.title;e.icon=e.icon||r[n][e.appType].icon;return e})}return t},function(t){e.error("Frequent Activity Provider failed","error: "+t,"sap.ushell.components.shell.SearchCEP.SearchProviders.FrequentActivityProvider::execSearch");return[]})})};return new r},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchProviders/RecentSearchProvider", ["sap/base/Log","sap/ushell/Container"],function(e,r){"use strict";var n=function(){};n.prototype.getName=function(){return"Recent Search Terms Provider"};n.prototype.execSearch=function(){return r.getServiceAsync("UserRecents").then(function(r){return r.getRecentSearches().then(function(e){var r=[];if(Array.isArray(e)&&e.length>0){r=e.map(function(e){return{text:e.sTerm,icon:e.icon||"sap-icon://history"}})}return r},function(r){e.error("Recent Search Terms Provider failed","error: "+r,"sap.ushell.components.shell.SearchCEP.SearchProviders.RecentSearchProvider::execSearch");return[]})})};return new n},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchProviders/SearchProvider", ["sap/ushell/resources","sap/ushell/components/shell/SearchCEP/SearchProviders/FrequentActivityProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/RecentSearchProvider","sap/ushell/components/shell/SearchCEP/SearchProviders/SearchServiceProvider"],function(e,t,r,i){"use strict";var a={};a.defaultProviders={applications:{id:"SearchResultList",entryType:"app",title:"Applications",showNoData:true,titleVisible:false,highlightResult:true,highlightSearchStringPart:true,minQueryLength:1,maxQueryLength:100,defaultItemCount:6,maxItemCount:12,priority:0,execSearch:i.execSearch},frequentApplications:{id:"FrequentlyUsedAppsList",entryType:"product",title:e.i18n.getText("frequentAppsCEPSearch"),titleVisible:true,minQueryLength:0,maxQueryLength:0,defaultItemCount:6,maxItemCount:12,priority:1,execSearch:t.execSearch},recentSearches:{id:"SearchHistoryList",entryType:"app",title:"Recent Searches",titleVisible:false,minQueryLength:0,maxQueryLength:0,defaultItemCount:2,maxItemCount:10,priority:0,execSearch:r.execSearch},homePageApplications:{id:"ProductsList",entryType:"app",title:e.i18n.getText("products"),titleVisible:true,minQueryLength:0,maxQueryLength:0,defaultItemCount:6,maxItemCount:12,priority:2,execSearch:i.execSearch},externalSearchApplications:{id:"ExternalSearchAppsList",entryType:"app",title:e.i18n.getText("searchWithin"),titleVisible:true,minQueryLength:1,maxQueryLength:100,defaultItemCount:6,maxItemCount:12,priority:2,execSearch:i.execSearch}};return a},false);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/SearchCEP/SearchProviders/SearchServiceProvider", ["sap/base/Log","sap/ushell/Config","sap/ushell/resources","sap/base/util/ObjectPath","sap/ushell/Container"],function(e,t,r,a,i){"use strict";var n=function(){};n.prototype.getName=function(){return"Search Service Provider"};n.prototype.execSearch=function(t,r){var n={top:12,skip:0,sort:{path:"title",descending:false}};switch(r){case"homePageApplications":n.searchTerm="";n.filter={path:"technicalAttributes",operator:"Contains",value1:"APPTYPE_HOMEPAGE"};n.includeAppsWithoutVisualizations=true;break;case"applications":n.searchTerm=t;n.filter={filters:[{path:"technicalAttributes",operator:"NotContains",value1:"APPTYPE_SEARCHAPP"},{path:"technicalAttributes",operator:"NotContains",value1:"APPTYPE_HOMEPAGE"}],and:true};break;case"externalSearchApplications":n.searchTerm="";n.filter={path:"technicalAttributes",operator:"Contains",value1:"APPTYPE_SEARCHAPP"};n.includeAppsWithoutVisualizations=true;break;default:break}return i.getServiceAsync("SearchCEP").then(function(e){return e.suggest(n).then(function(e){var n=a.get("sap-ushell-config.services.SearchCEP")!==undefined,s=i.getFLPPlatform(true),o=n===true&&s==="cFLP",l=[],p=a.get("sap-ushell-config.renderers.fiori2.componentData.config.searchBusinessObjects"),u={applications:"sap-icon://SAP-icons-TNT/application",homePageApplications:"sap-icon://SAP-icons-TNT/product",externalSearchApplications:"sap-icon://world"};if(e){l=e.data.map(function(e){e.text=e.text||e.label||e.title;e.icon=e.icon||u[r];return e})}if(p===true&&o===true&&r==="externalSearchApplications"){c(l,t)}return l})},function(t){e.error("Search service Provider failed","error: "+t,"sap.ushell.components.shell.SearchCEP.SearchProviders.SearchServiceProvider::execSearch");return[]})};function c(e,t){var a='#Action-search&/top=20&filter={"dataSource":{"type":"Category","id":"All","label":"All","labelPlural":"All"},"searchTerm":"'+t+'","rootCondition":{"type":"Complex","operator":"And","conditions":[]}}',n=i.getFLPUrl()+a,c={text:r.i18n.getText("enterprise_search"),description:r.i18n.getText("enterprise_search"),icon:"sap-icon://search",inboundIdentifier:"38cd162a-e185-448c-9c37-a4fc02b3d39d___GenericDefaultSemantic-__GenericDefaultAction",url:n,target:"_blank",recent:false,semanticObject:"Action",semanticObjectAction:"search",_type:"app",isEnterpriseSearch:true};e.push(c)}return new n},false);
sap.ui.require.preload({
	"sap/ushell/components/shell/SearchCEP/SearchFieldFragment.fragment.xml":'<core:FragmentDefinition\n    height="100%"\n    xmlns:core="sap.ui.core"\n    xmlns="sap.m"><Popover\n        initialFocus="CEPSearchField"\n        id="searchFieldPopover"\n        class="searchFieldPopover"\n        placement="Bottom"\n        showArrow="false"\n        showHeader="false"\n        offsetX="-13"\n        beforeOpen=".onBeforeOpen"\n        afterOpen=".onAfterOpen"\n        afterClose=".onAfterClose"\n        horizontalScrolling="false"\n        ariaLabelledBy="popoverTitle"><content><SearchField\n                id="CEPSearchField"\n                width="99%"\n                placeholder="{i18n>search}"\n                tooltip="{i18n>search}"\n                enableSuggestions="true"\n                search=".onSearch"\n                suggest=".onSuggest"\n                class="sapUshellCEPListCenter"\n            /><VBox id="Lists"></VBox></content></Popover></core:FragmentDefinition>\n'
});
//# sourceMappingURL=Component-preload.js.map
