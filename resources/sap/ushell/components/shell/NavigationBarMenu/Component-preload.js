//@ui5-bundle sap/ushell/components/shell/NavigationBarMenu/Component-preload.js
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/NavigationBarMenu/Component", ["sap/ui/core/UIComponent","sap/ui/core/mvc/XMLView","sap/ushell/library","sap/ushell/resources"],function(e,t,n,a){"use strict";return e.extend("sap.ushell.components.shell.NavigationBarMenu.Component",{metadata:{manifest:"json",library:"sap.ushell",interfaces:["sap.ui.core.IAsyncContentCreation"],properties:{renderType:{type:"string",defaultValue:"Button",group:"Behavior"}}},init:function(){const t=this.getComponentData();if(t?.renderType){this.setProperty("renderType",t.renderType)}e.prototype.init.apply(this,arguments);this.setModel(a.i18nModel,"i18n")},createContent:function(){let e="sap.ushell.components.shell.NavigationBarMenu.view.NavigationBarMenuButton";if(this.getRenderType()===n.NavigationBarMenuState.Menu){e="sap.ushell.components.shell.NavigationBarMenu.view.NavigationBarMenu"}return t.create({viewName:e})}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/NavigationBarMenu/controller/NavigationBarMenu.controller", ["sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/Sorter","sap/ushell/resources","sap/ushell/utils/WindowUtils","sap/ushell/Container","sap/ushell/EventHub","sap/ui/model/json/JSONModel"],function(e,t,n,i,r,o,s,a,p,c,d,l){"use strict";var u=t.dnd.RelativeDropPosition;var g=t.InvisibleMessageMode;return n.extend("sap.ushell.components.shell.NavigationBarMenu.controller.NavigationBarMenu",{onInit:function(){this.pMenuServicePromise=c.getServiceAsync("Menu");this._oInvisibleMessageInstance=e.getInstance();this.oViewConfigurationModel=new l({enableMenuBarNavigation:true,contextMenu:{enableMoveDown:false,enableMoveUp:false,enablePin:false,showMoveUp:false,showMoveDown:false}});this.getView().setModel(this.oViewConfigurationModel,"viewConfiguration");this._oEventHubListener=d.on("enableMenuBarNavigation").do(e=>{this.oViewConfigurationModel.setProperty("/enableMenuBarNavigation",e)});this._bindPinnedSpaces()},onExit:function(){if(this._oInvisibleMessageInstance){this._oInvisibleMessageInstance.destroy()}this._oEventHubListener.off()},_onPinnedSpacesUpdateFinished:function(e){var t=a.i18n.getText("NavigationBarMenu.PinnedSpaces.Title",[e.getParameter("total")||0]);this.byId("PinnedSpacesTreeTitle").setText(t)},_configureContextMenuEnablement:function(e){const t=e.getParameter("listItem");if(!t){return}const n=e.getSource();const i=n.getItems();const r=n.indexOfItem(t);const o=n.getId().includes("PinnedSpaces");const s=t.getBindingContext("spaces");const a=s.getProperty("pinned")!==undefined;this.oViewConfigurationModel.setProperty("/contextMenu/enableMoveUp",o&&r>0);this.oViewConfigurationModel.setProperty("/contextMenu/enableMoveDown",o&&r<i.length-1);this.oViewConfigurationModel.setProperty("/contextMenu/enablePin",a);this.oViewConfigurationModel.setProperty("/contextMenu/showMoveUp",o);this.oViewConfigurationModel.setProperty("/contextMenu/showMoveDown",o);if(!a){e.preventDefault()}},_moveSpaceUp:function(e){if(this._handleSpacesSwap(true)){e.preventDefault();e.stopPropagation?.()}},_moveSpaceDown:function(e){if(this._handleSpacesSwap(false)){e.preventDefault();e.stopPropagation?.()}},handlePinButtonPress:function(e){const t=e.getSource();const n=t.getBindingContext("spaces").getPath();const i=this._getModel();const r=i.getProperty(n+"/pinned");if(!r){this._pinSpace(n)}else{this._unpinSpace(n,true)}if(!t.getId().includes("PinnedSpaces")){return}this.byId("AllSpaces").focus();const o=this.byId("PinnedSpaces");const s={onAfterRendering:()=>{o.focus();o.removeEventDelegate(s)}};o.addEventDelegate(s)},unpinAllSpaces:function(){var e=this.byId("PinnedSpaces");var t=e.getModel("spaces").getData();t=t.map(function(e){e.pinnedSortOrder=parseInt(e.pinnedSortOrder,10);return e});var n=t.sort(function(e,t){if(e.pinnedSortOrder<t.pinnedSortOrder){return-1}if(e.pinnedSortOrder>t.pinnedSortOrder){return 1}return 0});var i;var r=false;for(var o=0;o<n.length;++o){i=n[o];if(r){i.pinned=false;i.pinnedSortOrder="-1"}else{i.pinnedSortOrder=""+i.pinnedSortOrder;if(i.type==="separator"){r=true}}}this._savePinnedSpaces()},rearrangePinnedSpaces:function(e){const t=this.oModel||this.getOwnerComponent().getModel("spaces");var n=e.getParameter("draggedControl").getBindingContext("spaces");var i=t.getProperty(n.getPath()).pinnedSortOrder;var r=e.getParameter("droppedControl");var o=r.getBindingContext("spaces");var s=t.getProperty(o.getPath()).pinnedSortOrder;var a=e.getParameter("dropPosition");var p=s+(a===u.After?1:0);this._rearrangePinnedSpaces(i,p,r,a)},_rearrangePinnedSpaces:function(e,t,n,i){this.pMenuServicePromise.then(function(r){r.moveMenuEntry(e,t);var o=this.byId("PinnedSpaces");var s={onAfterRendering:function(){var r=o.getItems();var a=o.indexOfItem(n);var p;if(e<t){p=a-(i===u.Before?1:0)}else{p=a+(i===u.After?1:0)}var c=r[p];if(c){c.focus()}n.removeEventDelegate(s)}};n.addEventDelegate(s);var p=a.i18n.getText("NavigationBarMenu.PinnedSpaces.Moved");this._oInvisibleMessageInstance.announce(p,g.Polite);this._savePinnedSpaces()}.bind(this))},_bindPinnedSpaces:function(){var e=this.byId("PinnedSpaces");if(!this._pCustomTreeItemPromise){this._pCustomTreeItemPromise=i.load({id:this.createId("CustomTreeItemFragment"),type:"XML",async:true,controller:this,name:"sap.ushell.components.shell.NavigationBarMenu.view.CustomTreeItem"}).then(function(t){t.addEventDelegate({onsapdownmodifiers:this._moveSpaceDown.bind(this),onsapupmodifiers:this._moveSpaceUp.bind(this)});e.bindItems({path:"spaces>/",filters:[new r({path:"pinned",operator:o.EQ,value1:true}),new r({path:"type",operator:o.NE,value1:"separator"}),new r({path:"isHomeEntry",operator:o.EQ,value1:false})],sorter:[new s({path:"pinnedSortOrder",descending:false})],parameters:{arrayNames:["menuEntries"]},template:t,templateShareable:false})}.bind(this))}return this._pCustomTreeItemPromise},_handleSpacesSwap:function(e){const t=this.byId("PinnedSpaces");const n=t.getItems();let i;for(let t=0;t<n.length;++t){i=n[t];if(document.activeElement!==i.getFocusDomRef()){continue}const r=i.getBindingContext("spaces");const o=this._getModel();const s=o.getProperty(r.getPath()).pinnedSortOrder;const a=n[e?t-1:t+1];if(!a){return false}const p=a.getBindingContext("spaces");const c=o.getProperty(p.getPath()).pinnedSortOrder;this._rearrangePinnedSpaces(s,e?c:c+1,a,e?u.Before:u.After);return true}},allSpacesFactory:function(e,t){var n=t.getModel().getProperty(t.getPath());var i=n.menuEntries||[];var r=this.byId("AllSpaces").getDependents()[0].clone(e);r.setType("Active");r.attachPress(this.onMenuItemSelection,this);if(i.length<1){r.addStyleClass("sapMTreeItemBaseLeaf")}if(n.type==="separator"||n.isHomeEntry){r.setVisible(false)}return r},_unpinSpace:function(e,t){const n=this._getModel();n.setProperty(e+"/pinned",false);n.setProperty(e+"/pinnedSortOrder","-1");if(t){this._savePinnedSpaces()}},_pinSpace:function(e){var t=this.byId("PinnedSpaces").getItems().length;const n=this._getModel();var i=2;if(t>0){var r=this.byId("PinnedSpaces").getItems()[t-1];var o=r.getBindingContextPath("spaces");i=n.getProperty(o+"/pinnedSortOrder")+1}n.setProperty(e+"/pinnedSortOrder",i);n.setProperty(e+"/pinned",true);this._savePinnedSpaces()},_performNavigation:function(e){return c.getServiceAsync("Navigation").then(function(t){var n={};e.parameters.forEach(function(e){if(e.name&&e.value){n[e.name]=[e.value]}});return t.navigate({target:{semanticObject:e.semanticObject,action:e.action},params:n})})},_openURL:function(e){p.openURL(e.url,"_blank")},onMenuItemSelection:async function(e){var t=e.getSource();var n=t.getBindingContextPath("spaces");const i=this._getModel();var r=i.getProperty(n);var o=e.getParameter("id").includes("AllSpaces");if(!o){return}if(t.isLeaf()){if(r.type==="IBN"){return this._performNavigation(r.target)}if(r.type==="URL"){return this._openURL(r.target)}return}},_savePinnedSpaces:function(){const e=this._getModel();this.pMenuServicePromise.then(function(t){e.refresh(true);return t.savePersonalization()}.bind(this))},_getModel:function(){return this.oModel||this.getOwnerComponent().getModel("spaces")}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/shell/NavigationBarMenu/controller/NavigationBarMenuButton.controller", ["sap/ui/core/InvisibleMessage","./NavigationBarMenu.controller","sap/ui/core/Fragment","sap/ushell/Container","sap/ushell/EventHub","sap/ui/model/json/JSONModel"],function(e,n,o,t,i,s){"use strict";return n.extend("sap.ushell.components.shell.NavigationBarMenu.controller.NavigationBarMenuButton",{onInit:function(){this.pMenuServicePromise=t.getServiceAsync("Menu");this._oInvisibleMessageInstance=e.getInstance();this.oViewConfigurationModel=new s({enableMenuBarNavigation:true,contextMenu:{enableMoveDown:false,enableMoveUp:false,enablePin:false}});this.getView().setModel(this.oViewConfigurationModel,"viewConfiguration");this._oEventHubListener=i.on("enableMenuBarNavigation").do(e=>{this.oViewConfigurationModel.setProperty("/enableMenuBarNavigation",e)})},openNavigationBarMenuPopover:function(e){const n=e.getSource();if(!this._pPopoverPromise){this._pPopoverPromise=o.load({type:"XML",id:this.getView().getId(),controller:this,name:"sap.ushell.components.shell.NavigationBarMenu.view.NavigationBarMenuPopover"}).then(e=>{this.oModel=this.getOwnerComponent().oPropagatedProperties.oModels.menu;e.setModel(this.oModel,"spaces");this.getView().addDependent(e);return e})}return this._pPopoverPromise.then(e=>{this._bindPinnedSpaces().then(()=>{e.openBy(n)})})},closeNavigationBarMenuPopover:async function(){if(!this._pPopoverPromise){return}return this._pPopoverPromise.then(function(e){e.close()})},onMenuItemSelection:async function(e){await n.prototype.onMenuItemSelection.call(this,e);return this.closeNavigationBarMenuPopover()}})});
sap.ui.require.preload({
	"sap/ushell/components/shell/NavigationBarMenu/manifest.json":'{"_version":"1.66.0","sap.app":{"id":"sap.ushell.components.shell.NavigationBarMenu","applicationVersion":{"version":"1.136.1"},"i18n":{"bundleUrl":"../../../renderer/resources/resources.properties","fallbackLocale":"en"},"type":"component","ach":"CA-FLP-FE-COR","title":"","resources":"resources.json"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"phone":true,"tablet":true}},"sap.ui5":{"dependencies":{"minUI5Version":"1.131.0","libs":{"sap.m":{},"sap.tnt":{},"sap.ui.core":{}}},"models":{},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/shell/NavigationBarMenu/view/ContextMenu.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.ui.unified"\n    xmlns:core="sap.ui.core"><Menu\n        id="ContextMenu"><items><MenuItemGroup\n                itemSelectionMode="None"><items><MenuItem\n                        id="MoveUp"\n                        enabled="{viewConfiguration>/contextMenu/enableMoveUp}"\n                        selected="false"\n                        text="{i18n>NavigationBarMenu.ContextMenu.MoveUp}"\n                        select="_moveSpaceUp"\n                        visible="{viewConfiguration>/contextMenu/showMoveUp}"/><MenuItem\n                        id="MoveDown"\n                        enabled="{viewConfiguration>/contextMenu/enableMoveDown}"\n                        selected="false"\n                        text="{i18n>NavigationBarMenu.ContextMenu.MoveDown}"\n                        select="_moveSpaceDown"\n                        visible="{viewConfiguration>/contextMenu/showMoveDown}" /><MenuItem\n                        id="PinUnpin"\n                        enabled="{viewConfiguration>/contextMenu/enablePin}"\n                        selected="{= ${spaces>pinned} ? true : false }"\n                        text="{= ${spaces>pinned} ? ${i18n>NavigationBarMenu.ContextMenu.UnpinSpace} : ${i18n>NavigationBarMenu.ContextMenu.PinSpace} }"\n                        select="handlePinButtonPress" /></items></MenuItemGroup></items></Menu></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/NavigationBarMenu/view/CustomTreeItem.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"><CustomTreeItem tooltip="{spaces>title}"><content><HBox\n                alignItems="Center"\n                width="100%"><Text\n                    id="spaceTitle"\n                    text="{spaces>title}"\n                    tooltip="{spaces>title}"><layoutData><FlexItemData growFactor="1" /></layoutData></Text><Button\n                    type="Transparent"\n                    class="sapUiTinyMarginEnd"\n                    icon="{= ${spaces>pinned} ? \'sap-icon://pushpin-on\' : \'sap-icon://pushpin-off\' }"\n                    press=".handlePinButtonPress"\n                    tooltip="{= ${spaces>pinned} ? ${i18n>NavigationBarMenu.Button.UnpinSpace} : ${i18n>NavigationBarMenu.Button.PinSpace} }"\n                    visible="{= ${spaces>pinned} === undefined ? false : true }"\n                    ariaDescribedBy="spaceTitle" /></HBox></content></CustomTreeItem></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/NavigationBarMenu/view/NavigationBarMenu.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:dnd="sap.ui.core.dnd"\n    xmlns:core="sap.ui.core"\n    id="NavigationBarMenuContent"\n><Tree\n        id="PinnedSpaces"\n        showSeparators="None"\n        noDataText="{i18n>NavigationBarMenu.PinnedSpaces.NoDataText}"\n        updateFinished="._onPinnedSpacesUpdateFinished"\n        beforeOpenContextMenu="_configureContextMenuEnablement"\n    ><contextMenu><core:Fragment\n                id="PinnedSpacesContextMenu"\n                fragmentName="sap.ushell.components.shell.NavigationBarMenu.view.ContextMenu"\n                type="XML"\n            /></contextMenu><dragDropConfig><dnd:DragDropInfo\n                sourceAggregation="items"\n                targetAggregation="items"\n                dropPosition="Between"\n                drop=".rearrangePinnedSpaces"\n            /></dragDropConfig><headerToolbar><Toolbar><Title\n                    id="PinnedSpacesTreeTitle"\n                    text="{i18n>NavigationBarMenu.PinnedSpaces.Title}"\n                /><ToolbarSpacer /><Button\n                    id="UnpinAllSpaces"\n                    text="{i18n>NavigationBarMenu.Button.UnpinAll}"\n                    tooltip="{i18n>NavigationBarMenu.Button.UnpinAll.Tooltip}"\n                    press=".unpinAllSpaces"\n                ><customData><core:CustomData\n                            key="help-id"\n                            value="shell-navigationBarMenu-unpinAllButton"\n                            writeToDom="true"\n                        /></customData></Button></Toolbar></headerToolbar></Tree><Tree\n            id="AllSpaces"\n            showSeparators="None"\n            noDataText="{i18n>NavigationBarMenu.AllSpaces.NoDataText}"\n            items="{path: \'spaces>/\', parameters: {arrayNames: [\'menuEntries\']}, factory: \'.allSpacesFactory\'}"\n            beforeOpenContextMenu="_configureContextMenuEnablement"><contextMenu><core:Fragment\n                    id="AllSpacesContextMenu"\n                    fragmentName="sap.ushell.components.shell.NavigationBarMenu.view.ContextMenu"\n                    type="XML" /></contextMenu><headerToolbar><Toolbar><Title text="{i18n>NavigationBarMenu.AllSpaces.Title}" /></Toolbar></headerToolbar><dependents><core:Fragment\n                    fragmentName="sap.ushell.components.shell.NavigationBarMenu.view.CustomTreeItem"\n                    type="XML" /></dependents></Tree></core:FragmentDefinition>\n',
	"sap/ushell/components/shell/NavigationBarMenu/view/NavigationBarMenu.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    id="NavigationBarMenu"\n    controllerName="sap.ushell.components.shell.NavigationBarMenu.controller.NavigationBarMenu"\n><core:Fragment\n        fragmentName="sap.ushell.components.shell.NavigationBarMenu.view.NavigationBarMenu"\n        type="XML"\n    /></mvc:View>\n',
	"sap/ushell/components/shell/NavigationBarMenu/view/NavigationBarMenuButton.view.xml":'<mvc:View\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:mvc="sap.ui.core.mvc"\n    id="NavigationBarMenuButton"\n    controllerName="sap.ushell.components.shell.NavigationBarMenu.controller.NavigationBarMenuButton"><Button\n        id="NavigationBarMenuButtonControl"\n        icon="sap-icon://menu2"\n        enabled="{viewConfiguration>/enableMenuBarNavigation}"\n        press=".openNavigationBarMenuPopover"\n        tooltip="{i18n>NavigationBarMenu.Button.OpenPopover}"\n        ariaHasPopup="Dialog"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" /></layoutData><customData><core:CustomData\n                key="help-id"\n                value="shell-navigationBarPersonalizationButton"\n                writeToDom="true" /></customData></Button></mvc:View>\n',
	"sap/ushell/components/shell/NavigationBarMenu/view/NavigationBarMenuPopover.fragment.xml":'<core:FragmentDefinition\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n><Popover\n        id="NavigationBarMenuPopover"\n        class="sapUiContentPadding"\n        placement="Bottom"\n        showHeader="false"\n        modal="false"\n        initialFocus="PinnedSpaces"\n        contentWidth="30rem"><content><core:Fragment\n                fragmentName="sap.ushell.components.shell.NavigationBarMenu.view.NavigationBarMenu"\n                type="XML"\n            /></content></Popover></core:FragmentDefinition>\n'
});
//# sourceMappingURL=Component-preload.js.map
