//@ui5-bundle sap/ushell/components/appfinder/Component-preload.js
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/AppFinder.controller", ["sap/base/util/extend","sap/ui/core/EventBus","sap/ui/core/mvc/View","sap/ui/core/mvc/Controller","sap/ui/core/Component","sap/ushell/EventHub","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ui/core/routing/HashChanger","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ui/thirdparty/hasher","sap/ushell/Container"],function(e,t,s,a,n,o,r,i,jQuery,l,u,h,p){"use strict";var c;return a.extend("sap.ushell.components.appfinder.AppFinder",{onInit:function(){var e=n.getOwnerComponentFor(this.getView());this.oRouter=e.getRouter();var t=this.getView();var a=e.getModel();t.setModel(a);c=e.oCatalogsManager;this.bEnableEasyAccessSAPMenu=a.getProperty("/enableEasyAccessSAPMenu");this.bEnableEasyAccessUserMenu=a.getProperty("/enableEasyAccessUserMenu");this.bEnableEasyAccessOnTablet=a.getProperty("/enableEasyAccessOnTablet");var o=this.bEnableEasyAccessSAPMenu||this.bEnableEasyAccessUserMenu;var l=!u.system.phone&&!u.system.tablet||u.system.tablet&&this.bEnableEasyAccessOnTablet||u.system.combi;this.bShowEasyAccessMenu=o&&l;this.getView().setModel(this._getSubHeaderModel(),"subHeaderModel");this.oConfig=e.getComponentData().config;this.pCatalogView=s.create({id:"catalogView",viewName:"module:sap/ushell/components/appfinder/CatalogView",height:"100%",viewData:{parentComponent:e,subHeaderModel:this._getSubHeaderModel(),CatalogsManager:c}});this.oVisualizationOrganizerHelper=r.getInstance();this.oInitPromise=this.pCatalogView.then(function(e){e.addStyleClass("sapUiGlobalBackgroundColor sapUiGlobalBackgroundColorForce");return this.oVisualizationOrganizerHelper.loadAndUpdate()}.bind(this));this.oRouter.attachRouteMatched(this._handleAppFinderNavigation.bind(this));t.createSubHeader();u.resize.attachHandler(this._resizeHandler.bind(this));this.oRouter.oHashChanger=i.getInstance()},onExit:function(){this.pCatalogView.then(function(e){e.destroy()})},_resizeHandler:function(){var e=this._showOpenCloseSplitAppButton();var t=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible");if(e!==t){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",e);if(e){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false)}}this._toggleViewWithToggleButtonClass(e)},_handleAppFinderNavigation:function(s){try{const e=p.getRendererInternal();e.getRootControl().getShellHeader()._oLastFocusedHeaderElement=null}catch{}var a=e({},s);if(this.firstView!==false){if(!this.bShowEasyAccessMenu){this.pCatalogView.then(function(e){this.getView().oPage.addContent(e);setTimeout(function(){jQuery("#catalogSelect").focus()},0)}.bind(this))}this.firstView=false}this.pCatalogView.then(function(e){e.getController().customRouteMatched(a)});var n=this.getView();this._preloadAppHandler();this._getPathAndHandleGroupContext(s);this._toggleViewWithToggleButtonClass(this._showOpenCloseSplitAppButton());if(this.bShowEasyAccessMenu){this.onShow(s)}else if(n._showSearch("catalog")){n.updateSubHeader("catalog",false);this._toggleViewWithSearchAndTagsClasses("catalog")}t.getInstance().publish("showCatalog");o.emit("CenterViewPointContentRendered","appFinder");o.emit("showCatalog",{sId:"showCatalog",oData:Date.now()});t.getInstance().publish("launchpad","contentRendered");if(o.last("firstCatalogSegmentCompleteLoaded")){o.emit("CloseFesrRecord",Date.now())}},_showOpenCloseSplitAppButton:function(){return!u.orientation.landscape||u.system.phone||this.oView.getModel().getProperty("/isPhoneWidth")},_resetSubHeaderModel:function(){this.oSubHeaderModel.setProperty("/activeMenu",null);this.oSubHeaderModel.setProperty("/search",{searchMode:false,searchTerm:null});this.oSubHeaderModel.setProperty("/tag",{tagMode:false,selectedTags:[]});this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",this._showOpenCloseSplitAppButton());this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false)},_getSubHeaderModel:function(){if(this.oSubHeaderModel){return this.oSubHeaderModel}this.oSubHeaderModel=new l;this._resetSubHeaderModel();return this.oSubHeaderModel},onTagsFilter:function(e){var t=e.getSource(),s=t.getModel("subHeaderModel"),a=e.getSource().getSelectedItems(),n=a.length>0,o={tagMode:n,selectedTags:[]};a.forEach(function(e){o.selectedTags.push(e.getText())});s.setProperty("/activeMenu",this.getCurrentMenuName());s.setProperty("/tag",o);this.pCatalogView.then(function(e){e.getController().onTag(o)})},searchHandler:function(e){var t=e.getSource().getValue(),s=false;if(t===null){return}var a=this.oSubHeaderModel.getProperty("/search");var n=this.oSubHeaderModel.getProperty("/activeMenu");if(this.getCurrentMenuName()!==n){n=this.getCurrentMenuName()}if(!a.searchMode&&!e.getParameter("clearButtonPressed")){a.searchMode=true}if(a.searchMode&&u.system.phone){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false)}if(t!==a.searchTerm){if(this.containsOnlyWhiteSpaces(t)){t="*"}a.searchTerm=t;s=true}this.oSubHeaderModel.setProperty("/search",a);this.oSubHeaderModel.setProperty("/activeMenu",n);this.oSubHeaderModel.refresh(true);if(s){this.pCatalogView.then(function(e){e.getController().onSearch(a)})}},_preloadAppHandler:function(){setTimeout(function(){var e=h.getHash()||"";if(!e.startsWith("Shell-appfinder")){return}this._updateShellHeader(this.oView.oPage.getTitle())}.bind(this),0)},getCurrentMenuName:function(){return this.currentMenu},_navigateTo:function(e){var t=this.oVisualizationOrganizerHelper.getNavigationContextAsText.apply(this);if(t){this.oRouter.navTo(e,{filters:t},true)}else{this.oRouter.navTo(e,{},true)}},_filterSystemModelsOnTablet:function(e){var t=new jQuery.Deferred;if(this.bEnableEasyAccessOnTablet){p.getServiceAsync("NavTargetResolutionInternal").then(function(s){var a=e.reduce(function(e,t){var a;a=s.isNavigationSupported([{target:{semanticObject:"Shell",action:"startWDA"},params:{"sap-system":t.systemId,"sap-ui2-wd-app-id":"."}},{target:{semanticObject:"Shell",action:"startGUI"},params:{"sap-system":t.systemId,"sap-ui2-tcode":"."}}]);e.push(new Promise(function(e,s){a.then(function(s){var a={system:t,isSupported:false};if(s[0].supported||s[1].supported){a.isSupported=true}e(a)}).fail(function(){e({system:t,isSupported:false})})}));return e},[]);Promise.all(a).then(function(e){var s;s=e.reduce(function(e,t){if(t.isSupported){e.push(t.system)}return e},[]);t.resolve(s)})})}else{t.resolve(e)}return t.promise()},getGroupNavigationContext:function(){var e=this.oView.getModel().getProperty("/groupContext");var t=e?e.path:null;if(t){return JSON.stringify({targetGroup:encodeURIComponent(t)})}return null},getSystemsModels:function(){var e=this;if(this.getSystemsPromise){return this.getSystemsPromise}var t=new jQuery.Deferred;this.getSystemsPromise=t.promise();var s=["userMenu","sapMenu"].map(function(t){var s=new l;s.setProperty("/systemSelected",null);s.setProperty("/systemsList",[]);return e.getSystems(t).then(e._filterSystemModelsOnTablet.bind(e)).then(function(e){s.setProperty("/systemsList",e);return s})});jQuery.when.apply(jQuery,s).then(function(e,s){t.resolve(e,s)});return this.getSystemsPromise},onSegmentButtonClick:function(e){this.oSubHeaderModel.setProperty("/search/searchMode",false);this.oSubHeaderModel.setProperty("/search/searchTerm","");var t=e.getParameter("id");this._navigateTo(t)},onShow:function(e){var t=e.getParameter("name");if(t===this.getCurrentMenuName()){return}var a=this.getView();a._updateSearchWithPlaceHolder(t);this._updateCurrentMenuName(t);this.getSystemsModels().then(function(e,t){var o=t.getProperty("/systemsList");var r=e.getProperty("/systemsList");a.oPage.removeAllContent();var i=this.currentMenu==="sapMenu"?o:r;if(i&&i.length){a.updateSubHeader(this.currentMenu,true)}else if(a._showSearch(this.currentMenu)){a.updateSubHeader(this.currentMenu,false)}if(this.currentMenu==="catalog"){this.pCatalogView.then(function(e){a.oPage.addContent(e)})}else if(this.currentMenu==="userMenu"){if(!this.pUserMenuView){this.pUserMenuView=s.create({id:"userMenuView",viewName:"module:sap/ushell/components/appfinder/EasyAccessView",height:"100%",viewData:{menuName:"USER_MENU",easyAccessSystemsModel:e,parentComponent:n.getOwnerComponentFor(this.getView()),subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("userMenu"),CatalogsManager:c}})}this.pUserMenuView.then(function(e){a.oPage.addContent(e)})}else if(this.currentMenu==="sapMenu"){if(!this.pSapMenuView){this.pSapMenuView=s.create({id:"sapMenuView",viewName:"module:sap/ushell/components/appfinder/EasyAccessView",height:"100%",viewData:{menuName:"SAP_MENU",easyAccessSystemsModel:t,parentComponent:n.getOwnerComponentFor(this.getView()),subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("sapMenu"),CatalogsManager:c}})}this.pSapMenuView.then(function(e){a.oPage.addContent(e)})}this._setFocusToSegmentedButton(i);this.oSubHeaderModel.setProperty("/activeMenu",this.currentMenu);if(this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible")){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false)}this.oSubHeaderModel.refresh(true)}.bind(this))},_updateCurrentMenuName:function(e){if(!this.bShowEasyAccessMenu||e==="sapMenu"&&!this.bEnableEasyAccessSAPMenu||e==="userMenu"&&!this.bEnableEasyAccessUserMenu){this.currentMenu="catalog"}else{this.currentMenu=e}this._toggleViewWithSearchAndTagsClasses(e)},_toggleViewWithSearchAndTagsClasses:function(e){var t=this.getView();if(t._showSearch(e)){t.oPage.addStyleClass("sapUshellAppFinderSearch")}else{t.oPage.removeStyleClass("sapUshellAppFinderSearch")}if(t._showSearchTag(e)){t.oPage.addStyleClass("sapUshellAppFinderTags")}else{t.oPage.removeStyleClass("sapUshellAppFinderTags")}},_toggleViewWithToggleButtonClass:function(e){var t=this.getView();if(e){t.oPage.addStyleClass("sapUshellAppFinderToggleButton")}else{t.oPage.removeStyleClass("sapUshellAppFinderToggleButton")}},_setFocusToSegmentedButton:function(e){var t=this.getView();if(e&&e.length){var s=t.segmentedButton.getSelectedButton();setTimeout(function(){jQuery("#"+s).focus()},0)}else{setTimeout(function(){jQuery("#catalogSelect").focus()},0)}},_getPathAndHandleGroupContext:function(e){var t=e.getParameter("arguments");var s=t.filters;var a;try{a=JSON.parse(s)}catch(e){a=s}this.oVisualizationOrganizerHelper.updateModelWithContext.apply(this,[a])},_updateModelWithGroupContext:function(e){var t=this.oView.getModel(),s=e&&decodeURIComponent(e.targetGroup)||"";var a=t.getProperty(s),n;s=s==="undefined"?undefined:s;n={path:s,id:"",title:a&&a.title};if(s&&s!==""){p.getServiceAsync("FlpLaunchPage").then(function(e){var o=function(){var r=t.getProperty("/groups");if(r.length){a=t.getProperty(s);n.id=e.getGroupId(a.object);n.title=a.title||e.getGroupTitle(a.object);return}setTimeout(o,100)};o()})}t.setProperty("/groupContext",n)},getSystems:function(e){var t=new jQuery.Deferred;p.getServiceAsync("ClientSideTargetResolution").then(function(t){return t.getEasyAccessSystems(e)}).then(e=>{var s=[];var a=Object.keys(e);for(var n=0;n<a.length;n++){var o=a[n];s[n]={systemName:e[o].text,systemId:o}}t.resolve(s)}).catch(function(e){t.reject("An error occurred while retrieving the systems: "+e)});return t.promise()},_updateShellHeader:async function(e){const t=await this.getOwnerComponent().getService("ShellUIService");t.setTitle(e);t.setHierarchy()},containsOnlyWhiteSpaces:function(e){if(!e||e===""){return false}return!e.replace(/\s/g,"").length}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/AppFinderView", ["sap/ui/core/Element","sap/ui/core/mvc/View","sap/ui/core/InvisibleText","sap/ui/core/ListItem","sap/ui/model/Sorter","sap/m/MultiComboBox","sap/ui/model/BindingMode","sap/m/SearchField","sap/m/FlexBox","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/ToggleButton","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/Toolbar","sap/m/Page","sap/ushell/resources","sap/ui/Device"],function(e,t,n,o,a,r,s,i,l,p,d,u,c,h,g,S,m){"use strict";return t.extend("sap.ushell.components.appfinder.AppFinderView",{createContent:function(){var e=S.i18n;this.oPage=new g("appFinderPage",{showHeader:false,showSubHeader:false,showFooter:false,showNavButton:false,enableScrolling:false,title:{parts:["/groupContext/title"],formatter:function(t){return!t?e.getText("appFinderTitle"):e.getText("appFinder_group_context_title",[t])}}});return this.oPage},_showSearch:function(e){var t="enableCatalogSearch";if(e==="userMenu"){t="enableEasyAccessUserMenuSearch"}else if(e==="sapMenu"){t="enableEasyAccessSAPMenuSearch"}return this.getModel().getProperty("/"+t)},_showSearchTag:function(e){if(e==="userMenu"||e==="sapMenu"){return false}return this.getModel().getProperty("/enableCatalogTagFilter")},createSubHeader:function(){this.oToolbar=new h("appFinderSubHeader",{});if(m.system.desktop){this.oToolbar.addEventDelegate({onAfterRendering:function(){var e=document.getElementById("catalog-button");if(e){e.setAttribute("accesskey","a")}}})}this.oToolbar.addStyleClass("sapUshellAppFinderHeader");this.oPage.setSubHeader(this.oToolbar);this.oPage.setShowSubHeader(true);if(!this.openCloseSplitAppButton){this.openCloseSplitAppButton=new u("openCloseButtonAppFinderSubheader",{icon:"sap-icon://menu2",visible:"{/openCloseSplitAppButtonVisible}",pressed:"{/openCloseSplitAppButtonToggled}",press:function(e){this.getController().oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",e.getSource().getPressed());this.openCloseSplitAppButton.setTooltip(e.getParameter("pressed")?S.i18n.getText("ToggleButtonHide"):S.i18n.getText("ToggleButtonShow"))}.bind(this),tooltip:S.i18n.getText("ToggleButtonShow")});this.openCloseSplitAppButton.setModel(this.getController().oSubHeaderModel);this.oToolbar.addContent(this.openCloseSplitAppButton)}},updateSubHeader:function(e,t){var n,o;this.oToolbar.removeAllContent();this.oToolbar.addContent(this.openCloseSplitAppButton);if(t){n=this.createSegmentedButtons(e);this.oPage.addStyleClass("sapUshellAppFinderWithEasyAccess");this.oToolbar.addContent(n)}if(this._showSearch(e)){o=this.createSearchControl(e);this.oToolbar.addContent(o)}this.getController()._updateCurrentMenuName(e)},createSegmentedButtons:function(e){if(this.segmentedButton){this.segmentedButton.setSelectedKey(e);return this.segmentedButton}var t=this.getController();var o=S.i18n;var a=new n({text:o.getText("AppFinder.SegmentedButton.Catalog.Describedby")}).toStatic();this.addDependent(a);this.segmentedButton=new p("appFinderSegmentedButtons",{items:[new d("catalog",{text:o.getText("appFinderCatalogTitle"),key:"catalog",press:function(e){t.onSegmentButtonClick(e)},customData:[new c({key:"aria-controls",value:"catalogView",writeToDom:true}),new c({key:"aria-describedby",value:a.getId(),writeToDom:true})]})]});if(t.bEnableEasyAccessUserMenu){var r=new n({text:o.getText("AppFinder.SegmentedButton.UserMenu.Describedby")}).toStatic();this.addDependent(r);this.segmentedButton.addItem(new d("userMenu",{text:o.getText("appFinderUserMenuTitle"),key:"userMenu",press:function(e){t.onSegmentButtonClick(e)},customData:[new c({key:"aria-controls",value:"userMenuView",writeToDom:true}),new c({key:"aria-describedby",value:r.getId(),writeToDom:true})]}))}if(t.bEnableEasyAccessSAPMenu){var s=new n({text:o.getText("AppFinder.SegmentedButton.SAPMenu.Describedby")}).toStatic();this.addDependent(s);this.segmentedButton.addItem(new d("sapMenu",{text:o.getText("appFinderSapMenuTitle"),key:"sapMenu",press:function(e){t.onSegmentButtonClick(e)},customData:[new c({key:"aria-controls",value:"sapMenuView",writeToDom:true}),new c({key:"aria-describedby",value:s.getId(),writeToDom:true})]}))}this.segmentedButton.setSelectedKey(e);return this.segmentedButton},_handleSearch:function(){this.getController().searchHandler.apply(this.getController(),arguments);var t=e.getElementById("appFinderSearch");if(t){t.focus()}},createSearchControl:function(t){if(!this.oAppFinderSearchContainer){this.oAppFinderSearchContainer=new l("appFinderSearchContainer")}this.oAppFinderSearchContainer.removeAllItems();if(t==="catalog"&&this._showSearchTag("catalog")){this.oAppFinderSearchContainer.addItem(this.createTagControl())}if(!this.oAppFinderSearchControl){this.oAppFinderSearchControl=new i("appFinderSearch",{search:this._handleSearch.bind(this),value:{path:"subHeaderModel>/search/searchTerm",mode:s.OneWay}}).addStyleClass("help-id-catalogSearch");this.oAppFinderSearchControl.addCustomData(new c({key:"aria-controls",value:"",writeToDom:true}));if(m.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderer/AccessKeysHandler"],function(t,n){t.getInstance().then(function(t){this.oAppFinderSearchControl.addEventDelegate({onsaptabnext:function(o){var a=e.getElementById("openCloseButtonAppFinderSubheader");if(a.getVisible()&&!a.getPressed()){o.preventDefault();n.setIsFocusHandledByAnotherHandler(true);t.setFocusOnCatalogTile()}}})}.bind(this))}.bind(this))}}this.oAppFinderSearchContainer.addItem(this.oAppFinderSearchControl);this._updateSearchWithPlaceHolder(t);return this.oAppFinderSearchContainer},_updateSearchWithPlaceHolder:function(e){var t="";if(e==="catalog"){t="EasyAccessMenu_SearchPlaceHolder_Catalog"}else if(e==="userMenu"){t="EasyAccessMenu_SearchPlaceHolder_UserMenu"}else if(e==="sapMenu"){t="EasyAccessMenu_SearchPlaceHolder_SAPMenu"}if(t&&this.oAppFinderSearchControl){this.oAppFinderSearchControl.setPlaceholder(S.i18n.getText(t));this.oAppFinderSearchControl.setTooltip(S.i18n.getText(t))}},createTagControl:function(){if(this.oAppFinderTagFilter){return this.oAppFinderTagFilter}var e=this.getController();this.oAppFinderTagFilter=new r("appFinderTagFilter",{selectedKeys:{path:"subHeaderModel>/tag/selectedTags"},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",placeholder:"{i18n>catalogTilesTagfilter_HintText}",visible:{path:"/tagList",formatter:function(e){return e.length>0}},items:{path:"/tagList",sorter:new a("tag",false,false),template:new o({text:"{tag}",key:"{tag}"})},selectionChange:[e.onTagsFilter,e]}).addStyleClass("help-id-catalogTagFilter");return this.oAppFinderTagFilter},getControllerName:function(){return"sap.ushell.components.appfinder.AppFinder"}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/Catalog.controller", ["sap/base/util/extend","sap/ui/core/Element","sap/ui/core/EventBus","sap/ushell/library","sap/ui/core/mvc/View","sap/ui/core/mvc/Controller","sap/ushell/components/_HomepageManager/PagingManager","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/Device","sap/ui/model/Context","sap/m/MessageToast","sap/ushell/Config","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ushell/utils/WindowUtils","sap/ushell/EventHub","sap/base/Log","sap/ushell/Container"],function(e,t,i,r,a,o,s,jQuery,n,l,g,h,d,p,c,u,f,v,y,C,m){"use strict";var F=h.SplitAppMode;var P=r.AppType;var w;return o.extend("sap.ushell.components.appfinder.Catalog",{oPopover:null,onInit:function(){m.getServiceAsync("FlpLaunchPage").then(function(e){this.oLaunchPageService=e}.bind(this));this.categoryFilter="";this.preCategoryFilter="";var e=this.getView();this.oMainModel=e.getModel();this.oSubHeaderModel=e.getModel("subHeaderModel");this.resetPage=false;this.bIsInProcess=false;this.oVisualizationOrganizerHelper=e.oVisualizationOrganizerHelper;this.oCatalogsContainer=e.oCatalogsContainer;this.timeoutId=0;document.subHeaderModel=this.oSubHeaderModel;document.mainModel=this.oMainModel;var t=this.oSubHeaderModel.bindProperty("/openCloseSplitAppButtonToggled");t.attachChange(this.handleToggleButtonModelChanged,this);e.oCatalogsContainer.setHandleSearchCallback(this.handleSearchModelChanged.bind(this));w=this.getView().getViewData().CatalogsManager&&this.getView().getViewData().CatalogsManager.getInstance()},customRouteMatched:function(e){this.onShow(e)},onBeforeRendering:function(){i.getInstance().publish("renderCatalog")},onAfterRendering:function(){this.wasRendered=true;if(!this.PagingManager){this._setPagingManager()}if(this.PagingManager.currentPageIndex===0){this.allocateNextPage()}jQuery(window).resize(function(){var e=jQuery(window).width();var t=jQuery(window).height();this.PagingManager.setContainerSize(e,t)}.bind(this));this._handleAppFinderWithDocking();i.getInstance().subscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);i.getInstance().subscribe("sap.ushell","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this)},_setPagingManager:function(){this.lastCatalogId=0;this.PagingManager=new s("catalogPaging",{supportedElements:{tile:{className:"sapUshellTile"}},containerHeight:window.innerHeight,containerWidth:window.innerWidth});this.oCatalogsContainer.setPagingManager(this.PagingManager)},_decodeUrlFilteringParameters:function(e){var t;try{t=JSON.parse(e)}catch(i){t=e}var i=t&&t.tagFilter&&t.tagFilter||[];if(i){try{this.tagFilter=JSON.parse(i)}catch(e){this.tagFilter=[]}}else{this.tagFilter=[]}this.categoryFilter=t&&t.catalogSelector&&t.catalogSelector||this.categoryFilter;if(this.categoryFilter){this.categoryFilter=window.decodeURIComponent(this.categoryFilter)}this.searchFilter=t&&t.tileFilter&&t.tileFilter||null;if(this.searchFilter){this.searchFilter=window.decodeURIComponent(this.searchFilter)}},_applyFilters:function(e){var t=false;if(this.categoryFilter){this.categoryFilter=n.i18n.getText("all")===this.categoryFilter?"":this.categoryFilter;if(this.categoryFilter!==this.preCategoryFilter){t=true}this.oView.setCategoryFilterSelection(this.categoryFilter,t)}else{t=true;this.oView.setCategoryFilterSelection("",t)}this.preCategoryFilter=this.categoryFilter;if(this.searchFilter&&this.searchFilter.length){this.searchFilter=this.searchFilter.replace(/\*/g,"");this.searchFilter=this.searchFilter.trim();this.oSubHeaderModel.setProperty("/search",{searchMode:true,searchTerm:this.searchFilter})}else if(e){this.oSubHeaderModel.setProperty("/search",{searchMode:false,searchTerm:""});this.resetPage=true}if(this.tagFilter&&this.tagFilter.length){this.oSubHeaderModel.setProperty("/tag",{tagMode:true,selectedTags:this.tagFilter})}else if(e){this.oSubHeaderModel.setProperty("/tag",{tagMode:false,selectedTags:[]});this.resetPage=true}this.handleSearchModelChanged()},_handleAppFinderAfterNavigate:function(){this.clearFilters()},clearFilters:function(){var e=false;if(this.categoryFilter!==this.preCategoryFilter){e=true}var t=this.oSubHeaderModel.getProperty("/search/searchMode");var i=this.oSubHeaderModel.getProperty("/tag/tagMode");if(t){this.oSubHeaderModel.setProperty("/search",{searchMode:true,searchTerm:""})}if(i){this.oSubHeaderModel.setProperty("/tag",{tagMode:true,selectedTags:[]})}if(this.categoryFilter&&this.categoryFilter!==""){this.selectedCategoryId=undefined;this.categoryFilter=undefined;this.getView().getModel().setProperty("/categoryFilter","");this.oView.setCategoryFilterSelection("",e)}this.preCategoryFilter=this.categoryFilter;this.handleSearchModelChanged()},onShow:function(t){var i=t.getParameter("arguments").filters;e(this.getView().getViewData(),t);this._decodeUrlFilteringParameters(i);if(this.wasRendered&&!i){this.clearFilters()}else{this._applyFilters(this.wasRendered)}},allocateNextPage:function(){if(!this.oCatalogsContainer.nAllocatedUnits||this.oCatalogsContainer.nAllocatedUnits===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oCatalogsContainer.applyPagingCategoryFilters(this.allocateTiles,this.categoryFilter)}},setTagsFilter:function(e){var t={catalogSelector:this.categoryFilter?this.categoryFilter:n.i18n.getText("all"),tileFilter:this.searchFilter&&this.searchFilter.length?encodeURIComponent(this.searchFilter):"",tagFilter:e.length?JSON.stringify(e):[]};this._addNavigationContextToFilter(t);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(t)})},setCategoryFilter:function(e){var t={catalogSelector:e,tileFilter:this.searchFilter?encodeURIComponent(this.searchFilter):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[]};this._addNavigationContextToFilter(t);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(t)})},setSearchFilter:function(e){var t={catalogSelector:this.categoryFilter?this.categoryFilter:n.i18n.getText("all"),tileFilter:e?encodeURIComponent(e):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[]};this._addNavigationContextToFilter(t);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(t)})},_addNavigationContextToFilter:function(e){var t=this.oVisualizationOrganizerHelper.getNavigationContext.apply(this);if(t){Object.keys(t).forEach(function(i){e[i]=t[i]})}return e},onSearch:function(e){var t=this.oSubHeaderModel.getProperty("/activeMenu");if(this.oView.getId().indexOf(t)!==-1){var i=e.searchTerm?e.searchTerm:"";this.setSearchFilter(i)}else{this._restoreSelectedMasterItem()}},onTag:function(e){var t=this.oSubHeaderModel.getProperty("/activeMenu");if(this.oView.getId().indexOf(t)!==-1){var i=e.selectedTags?e.selectedTags:[];this.setTagsFilter(i)}else{this._restoreSelectedMasterItem()}},getGroupContext:function(){var e=this.getView().getModel();var t=e.getProperty("/groupContext/path");return{targetGroup:encodeURIComponent(t||"")}},_isTagFilteringChanged:function(e){var t=e.length===this.tagFilter.length;var i=t;if(!i){return true}e.some(function(e){i=this.tagFilter&&Array.prototype.indexOf.call(this.tagFilter,e)!==-1;return!i}.bind(this));return i},_setUrlWithTagsAndSearchTerm:function(e,t){var i={tileFilter:e&&e.length?encodeURIComponent(e):"",tagFilter:t.length?JSON.stringify(t):[]};this._addNavigationContextToFilter(i);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(i)})},handleSearchModelChanged:function(){var e=this.oSubHeaderModel.getProperty("/search/searchMode");var i=this.oSubHeaderModel.getProperty("/tag/tagMode");var r=this.oSubHeaderModel.getProperty("/search/searchTerm");var a=this.oSubHeaderModel.getProperty("/tag/selectedTags");var o=[];var s;var n;var h;if(!this.PagingManager){this._setPagingManager()}this.PagingManager.resetCurrentPageIndex();this.nAllocatedTiles=0;this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oView.oCatalogsContainer.updateAllocatedUnits(this.allocateTiles);this.oView.oCatalogsContainer.resetCatalogPagination();var d=t.getElementById("catalogTilesDetailedPage");if(d){d.scrollTo(0,0)}if(e||i||this.resetPage){if(a&&a.length>0){var p=new l("tags","EQ","v");p.fnTest=function(e){if(a.length===0){return true}for(var t=0;t<a.length;t++){var i=a[t];if(e.indexOf(i)===-1){return false}}return true};s=new l([p],true)}r=r?r.replace(/\*/g,""):r;if(r){var c=r.split(/[\s,]+/);var u=new l(jQuery.map(c,function(e){return e&&new l("keywords",g.Contains,e)}),true);var f=new l(jQuery.map(c,function(e){return e&&new l("title",g.Contains,e)}),true);var v=new l(jQuery.map(c,function(e){return e&&new l("subtitle",g.Contains,e)}),true);o.push(u);o.push(f);o.push(v);n=new l(o,false)}var y=this.oView.oCatalogsContainer.getCatalogs();this.oSearchResultsTotal=[];var C=this;if(s&&s.aFilters.length>0&&n){h=new l([n].concat([s]),true)}else if(s&&s.aFilters.length>0){h=new l([s],true)}else if(n&&n.aFilters.length>0){h=new l([n],true)}y.forEach(function(e){e.getBinding("customTilesContainer").filter(h);e.getBinding("appBoxesContainer").filter(h)});this.oView.oCatalogsContainer.bSearchResults=false;this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);this.bSearchResults=this.oView.oCatalogsContainer.bSearchResults;this.oView.splitApp.toDetail(C.getView()._calculateDetailPageId());this.resetPage=false}else{this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter)}var m=this.getView()._calculateDetailPageId();this.oView.splitApp.toDetail(m)},_handleAppFinderWithDocking:function(){if(jQuery(".sapUshellContainerDocked").length>0){if(jQuery("#mainShell").width()<710){if(window.innerWidth<1024){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(F.ShowHideMode)}else{this.oView.splitApp.setMode(F.HideMode);this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",true)}}else{this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(F.ShowHideMode)}}},_restoreSelectedMasterItem:function(){var e=this.oView.splitApp.getMasterPage("catalogSelect");var i=t.getElementById(this.selectedCategoryId);if(i){this.categoryFilter=i.getTitle()}e.setSelectedItem(i)},handleToggleButtonModelChanged:function(){var e=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible");var i=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonToggled");if(i!==this.bCurrentButtonToggled&&e){if(!d.system.phone){if(i&&!this.oView.splitApp.isMasterShown()){this.oView.splitApp.showMaster()}else if(this.oView.splitApp.isMasterShown()){this.oView.splitApp.hideMaster()}}else if(this.oView.splitApp.isMasterShown()){var r=t.getElementById(this.getView()._calculateDetailPageId());this.oView.splitApp.toDetail(r)}else if(i){var a=t.getElementById("catalogSelect");this.oView.splitApp.toMaster(a,"show")}}this.bCurrentButtonToggled=i},_handleCatalogListItemPress:function(e){this.onCategoryFilter(e);if(this.oSubHeaderModel.getProperty("/search/searchTerm")!==""){this.oSubHeaderModel.setProperty("/search/searchMode",true)}if(d.system.phone||d.system.tablet){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",!this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled"))}},onCategoryFilter:function(e){var t=e.getSource();var i=t.getSelectedItem();var r=i.getBindingContext();var a=r.getModel();if(a.getProperty("static",r)){a.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategoryId=undefined;this.categoryFilter=undefined}else{a.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(window.encodeURIComponent(i.getBindingContext().getObject().title));this.categoryFilter=i.getTitle();this.selectedCategoryId=i.getId()}},onTileAfterRendering:function(e){var t=e.oSource.getDomRef();if(t){var i=t.getElementsByClassName("sapMGT");for(var r=0;r<i.length;r++){i[r].setAttribute("tabindex","-1")}}},catalogTilePress:function(){i.getInstance().publish("launchpad","catalogTileClick")},onAppBoxPressed:function(e){var t=e.getSource();var i=t.getBindingContext().getObject();var r;if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return}r=this.oLaunchPageService.getAppBoxPressHandler(i);if(r){r(i)}else{var a=t.getProperty("url");if(!a){C.info("AppBox url property is not set.",null,"sap.ushell.components.Catalog.controller");return}y.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:a}});if(a.indexOf("#")===0){hasher.setHash(a)}else{var o=u.last("/core/shell/enableRecentActivity")&&u.last("/core/shell/enableRecentActivityLogging");if(o){var s={title:t.getProperty("title"),appType:P.URL,url:a,appId:a};m.getRendererInternal("fiori2").logRecentActivity(s)}v.openURL(a,"_blank")}}},onTilePinButtonClick:function(e){var t=this.oLaunchPageService;var i=t.getDefaultGroup();i.done(function(i){var r=e.getSource();var o=r.getBindingContext();var s=this.getView().getModel();var n=s.getProperty("/groupContext/path");if(n){this._handleTileFooterClickInGroupContext(o,n)}else{var l=s.getProperty("/groups");var g=this.getCatalogTileDataFromModel(o);var h=g.tileData.associatedGroups;var d=[];var p=l.map(function(e){var r=t.getGroupId(e.object);var a=!(h&&Array.prototype.indexOf.call(h,r)===-1);d.push({id:r,title:this._getGroupTitle(i,e.object),selected:a});return{selected:a,initiallySelected:a,oGroup:e}}.bind(this));var c;c=t.getCatalogTilePreviewTitle(s.getProperty(o.sPath).src);if(!c){c=t.getCatalogTileTitle(s.getProperty(o.sPath).src)}this.pPopoverView=a.create({id:"sapUshellGroupsPopover",viewName:"module:sap/ushell/components/appfinder/GroupListPopoverView",viewData:{title:c,enableHideGroups:s.getProperty("/enableHideGroups"),enableHelp:s.getProperty("/enableHelp"),sourceContext:o,catalogModel:this.getView().getModel(),catalogController:this}}).then(function(e){e.getController().initializeData({groupData:p});e.open(r).then(this._handlePopoverResponse.bind(this,o,g));this.getView().addDependent(e);return e}.bind(this))}}.bind(this))},_getGroupTitle:function(e,t){var i=this.oLaunchPageService;var r;if(e&&i.getGroupId(e)===i.getGroupId(t)){r=n.i18n.getText("my_group")}else{r=i.getGroupTitle(t)}return r},_handlePopoverResponse:function(e,t,i){if(!i.addToGroups.length&&!i.newGroups.length&&!i.removeFromGroups.length){return}var r=this.getView().getModel();var a=r.getProperty("/groups");var o=[];i.addToGroups.forEach(function(t){var i=a.indexOf(t);var s=new p(r,"/groups/"+i);o.push(this._addTile(e,s))}.bind(this));i.removeFromGroups.forEach(function(t){var i=e.getModel().getProperty(e.getPath()).id;var r=a.indexOf(t);o.push(this._removeTile(i,r))}.bind(this));i.newGroups.forEach(function(t){var i=t.length>0?t:n.i18n.getText("new_group_name");o.push(this._createGroupAndSaveTile(e,i))}.bind(this));jQuery.when.apply(jQuery,o).then(function(){var e=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(t,i,e)}.bind(this))},_handlePopoverGroupsActionPromises:function(e,t,i){var r=i.filter(function(e){return!e.status});if(r.length){var a=this.prepareErrorMessage(r,e.tileData.title);w.resetAssociationOnFailure(a.messageId,a.parameters);return}var o=[];var s=this.oLaunchPageService;t.allGroups.forEach(function(e){if(e.selected){var t=s.getGroupId(e.oGroup.object);o.push(t)}});var n=this.getView().getModel();if(t.newGroups.length){var l=n.getProperty("/groups");var g=l.slice(l.length-t.newGroups.length);g.forEach(function(e){var t=s.getGroupId(e.object);o.push(t)})}n.setProperty(e.bindingContextPath+"/associatedGroups",o);var h=t.addToGroups[0]?t.addToGroups[0].title:"";if(h.length===0&&t.newGroups.length){h=t.newGroups[0]}var d=t.removeFromGroups[0]?t.removeFromGroups[0].title:"";var p=t.addToGroups.length+t.newGroups.length;var u=t.removeFromGroups.length;var f=this.prepareDetailedMessage(e.tileData.title,p,u,h,d);c.show(f,{duration:3e3,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"})},_getCatalogTileIndexInModel:function(e){var t=e.sPath;var i=t.split("/");var r=i[i.length-1];return r},_handleTileFooterClickInGroupContext:function(e,t){var i=this.oLaunchPageService;var r=this.getView().getModel();var a=this.getCatalogTileDataFromModel(e);var o=a.tileData.associatedGroups;var s=r.getProperty(t);var n=i.getGroupId(s.object);var l=o?Array.prototype.indexOf.call(o,n):-1;var g=a.bindingContextPath;if(a.isBeingProcessed){return}r.setProperty(g+"/isBeingProcessed",true);var h;var d;if(l===-1){var c=new p(e.getModel(),t);h=this._addTile(e,c);d=true}else{var u=e.getModel().getProperty(e.getPath("id"));var f=parseInt(t.split("/")[2],10);h=this._removeTile(u,f);d=false}h.done(function(t){if(t.status){this._groupContextOperationSucceeded(e,a,s,d)}else{this._groupContextOperationFailed(a,s,d)}}.bind(this));h.always(function(){r.setProperty(g+"/isBeingProcessed",false)})},_groupContextOperationSucceeded:function(e,t,i,r){var a=this.oLaunchPageService;var o=a.getGroupId(i.object);var s=t.tileData.associatedGroups;var n;if(r){s.push(o);e.getModel().setProperty(t.bindingContextPath+"/associatedGroups",s);n=this.prepareDetailedMessage(t.tileData.title,1,0,i.title,"")}else{for(var l=0;l<s.length;l++){if(s[l]===o){s.splice(l,1);break}}e.getModel().setProperty(t.bindingContextPath+"/associatedGroups",s);n=this.prepareDetailedMessage(t.tileData.title,0,1,"",i.title)}c.show(n,{duration:3e3,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"})},_groupContextOperationFailed:function(e,t,i){var r;if(i){r={messageId:"fail_tile_operation_add_to_group",parameters:[e.tileData.title,t.title]}}else{r={messageId:"fail_tile_operation_remove_from_group",parameters:[e.tileData.title,t.title]}}w.notifyOnActionFailure(r.messageId,r.parameters)},prepareErrorMessage:function(e,t){var i;var r;var a;var o=0;var s=0;var n=false;for(var l in e){var g=e[l].group;var h=e[l].action;if(h==="add"){o++;if(o===1){i=g.title}}else if(h==="remove"){s++;if(s===1){r=g.title}}else if(h==="addTileToNewGroup"){o++;if(o===1){i=g.title}}else{n=true}}if(n){if(e.length===1){a={messageId:"fail_tile_operation_create_new_group"}}else{a={messageId:"fail_tile_operation_some_actions"}}}else if(e.length===1){if(o){a={messageId:"fail_tile_operation_add_to_group",parameters:[t,i]}}else{a={messageId:"fail_tile_operation_remove_from_group",parameters:[t,r]}}}else if(s===0){a={messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]}}else if(o===0){a={messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]}}else{a={messageId:"fail_tile_operation_some_actions"}}return a},prepareDetailedMessage:function(e,t,i,r,a){var o;if(t===0){if(i===1){o=n.i18n.getText("tileRemovedFromSingleGroup",[e,a])}else if(i>1){o=n.i18n.getText("tileRemovedFromSeveralGroups",[e,i])}}else if(t===1){if(i===0){o=n.i18n.getText("tileAddedToSingleGroup",[e,r])}else if(i===1){o=n.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[e,r,a])}else if(i>1){o=n.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[e,r,i])}}else if(t>1){if(i===0){o=n.i18n.getText("tileAddedToSeveralGroups",[e,t])}else if(i===1){o=n.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[e,t,a])}else if(i>1){o=n.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[e,t,i])}}return o},getCatalogTileDataFromModel:function(e){var t=e.getPath();var i=e.getModel();var r=i.getProperty(t);return{tileData:r,bindingContextPath:t,isBeingProcessed:r.isBeingProcessed}},_addTile:function(e,t){var i=jQuery.Deferred();var r=w.createTile({catalogTileContext:e,groupContext:t});r.done(function(e){i.resolve(e)});return i},_removeTile:function(e,t){var i=jQuery.Deferred();var r=w.deleteCatalogTileFromGroup({tileId:e,groupIndex:t});r.done(function(e){i.resolve(e)});return i},_createGroupAndSaveTile:function(e,t){var i=jQuery.Deferred();var r=w.createGroupAndSaveTile({catalogTileContext:e,newGroupName:t});r.done(function(e){i.resolve(e)});return i},onExit:function(){f.destroy();i.getInstance().unsubscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);i.getInstance().unsubscribe("launchpad","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this)}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/CatalogView", ["sap/m/BusyIndicator","sap/m/library","sap/m/List","sap/m/IllustratedMessage","sap/m/Page","sap/m/PageAccessibleLandmarkInfo","sap/m/SplitApp","sap/m/StandardListItem","sap/ui/core/Element","sap/ui/core/EventBus","sap/ui/core/mvc/View","sap/ui/core/library","sap/ui/Device","sap/ui/performance/Measurement","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ushell/ui/appfinder/AppBoxInternal","sap/ushell/ui/appfinder/PinButton","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/CatalogEntryContainer","sap/ushell/ui/launchpad/CatalogsContainer","sap/ushell/ui/launchpad/Tile","sap/ushell/resources"],function(e,t,a,o,i,s,n,l,r,p,u,g,c,d,h,f,m,C,v,y,b,P){"use strict";var T=t.ListSeparators;var S=t.ListMode;var B=g.AccessibleLandmarkRole;return u.extend("sap.ushell.components.appfinder.CatalogView",{oController:null,oVisualizationOrganizerHelper:h.getInstance(),formatPinButtonTooltip:function(e,t){var a;if(t.path){var o=e?Array.prototype.indexOf.call(e,t.id):-1;a=o!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";return P.i18n.getText(a,[t.title])}a=e&&e.length?"EasyAccessMenu_PinButton_Toggled_Tooltip":"EasyAccessMenu_PinButton_UnToggled_Tooltip";return P.i18n.getText(a)},formatPinButtonSelectState:function(e,t,a,o){if(a){var i=e?Array.prototype.indexOf.call(e,o):-1;return i!==-1}return!!t},createContent:function(t){var u=this;this.oViewData=this.getViewData();this.parentComponent=this.oViewData.parentComponent;var g=this.parentComponent.getModel();this.setModel(g);this.setModel(this.oViewData.subHeaderModel,"subHeaderModel");this.oVisualizationOrganizerHelper.setModel(g);this.oController=t;function h(e){return e!==null&&(e==="1x2"||e==="2x2")||false}var I=new m({icon:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonIcon},type:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonType},selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","/groupContext","id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonTooltip.bind(this)},press:[this.oVisualizationOrganizerHelper.onTilePinButtonClick,this],visible:false});var A=new m({icon:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonIcon},type:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonType},selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","/groupContext","id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonTooltip.bind(this)},press:[this.oVisualizationOrganizerHelper.onTilePinButtonClick,this],visible:false});this.oAppBoxesTemplate=new f({title:"{title}",icon:"{icon}",subtitle:"{subtitle}",url:"{url}",navigationMode:"{navigationMode}",pinButton:A,contentProviderLabel:"{contentProviderLabel}",press:[t.onAppBoxPressed,t]});this.oVisualizationOrganizerHelper.shouldPinButtonBeVisible().then(function(e){A.setVisible(e);I.setVisible(e)});A.addCustomData(new C({key:"tabindex",value:"-1",writeToDom:true}));A.addStyleClass("sapUshellPinButton");I.addCustomData(new C({key:"tabindex",value:"-1",writeToDom:true}));I.addStyleClass("sapUshellPinButton");this.oTileTemplate=new b({tileViews:{path:"content",factory:function(e,t){return t.getObject()}},long:{path:"size",formatter:h},tileCatalogId:"{id}",tileCatalogIdStable:"{tileCatalogIdStable}",pinButton:I,press:[t.catalogTilePress,t],afterRendering:t.onTileAfterRendering});this.oCatalogSelect=new a("catalogSelect",{visible:"{/enableCatalogSelection}",rememberSelections:true,showSeparators:T.None,mode:S.SingleSelectMaster,items:{path:"/masterCatalogs",template:new l({type:"Active",title:"{title}"})},showNoData:false,itemPress:[t._handleCatalogListItemPress,t],selectionChange:[t._handleCatalogListItemPress,t]});this.getCatalogSelect=function(){return this.oCatalogSelect};var w=this.oCatalogSelect.onAfterRendering;if(c.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderer/AccessKeysHandler"],function(e,t){e.getInstance().then(function(e){this.oCatalogSelect.addEventDelegate({onsaptabnext:function(a){try{a.preventDefault();t.setIsFocusHandledByAnotherHandler(true);e.setFocusOnCatalogTile()}catch(e){}},onsapskipforward:function(a){try{a.preventDefault();t.setIsFocusHandledByAnotherHandler(true);e.setFocusOnCatalogTile()}catch(e){}},onsapskipback:function(a){try{a.preventDefault();t.setIsFocusHandledByAnotherHandler(true);var o=r.getElementById("openCloseButtonAppFinderSubheader");if(o.getVisible()){o.focus()}else{e.appFinderFocusMenuButtons(a)}}catch(e){}}})}.bind(this))}.bind(this))}if(g.getProperty("/enableHelp")){this.oCatalogSelect.addStyleClass("help-id-catalogCategorySelect")}this.setCategoryFilterSelection=function(e,t){var a=u.getCatalogSelect();var o=a.getItems();var i=e;var s=0;if(!i||i===""){i=P.i18n.getText("all")}o.forEach(function(e,t){if(e.getTitle()===i){s=t;a.setSelectedItem(e)}});if(o.length!==0&&t){o[s].focus()}};this.oCatalogSelect.onAfterRendering=function(){var e=u.oController.categoryFilter||P.i18n.getText("all");u.setCategoryFilterSelection(e);if(w){w.apply(this,arguments)}if(!this.getSelectedItem()){this.setSelectedItem(this.getItems()[0])}setTimeout(function(){var e=r.getElementById("appFinderSegmentedButtons");if(e){e.focus()}},0)};var M=this.oCatalogSelect._onAfterRenderingPopover;this.oCatalogSelect._onAfterRenderingPopover=function(){if(this._oPopover){this._oPopover.setFollowOf(false)}if(M){M.apply(this,arguments)}};var D=p.getInstance();var x;var H=function(){this.splitApp.toMaster("catalogSelect","show");if(!c.system.phone){x=this._calculateDetailPageId();if(x!==this.splitApp.getCurrentDetailPage().getId()){this.splitApp.toDetail(x)}}}.bind(this);D.subscribe("launchpad","catalogContentLoaded",function(){setTimeout(H,500)},this);D.subscribe("launchpad","afterCatalogSegment",H,this);var z=new v({header:"{title}",customTilesContainer:{path:"customTiles",template:this.oTileTemplate,templateShareable:true},appBoxesContainer:{path:"appBoxes",template:this.oAppBoxesTemplate,templateShareable:true}});this.oIllustratedMessage=new o({visible:true,title:P.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:" "}).addEventDelegate({onAfterRendering:function(){var e=this.oIllustratedMessage.getDomRef();if(e){var t=e.getElementsByClassName("sapMTitle");if(t.length){t[0].setAttribute("tabindex","0")}}}.bind(this),onBeforeRendering:function(){var e=this.oIllustratedMessage.getDomRef();if(e){var t=e.getElementsByClassName("sapMTitle");if(t.length){t[0].removeAttribute("tabindex")}}}.bind(this)});this.oCatalogsContainer=new y("catalogTiles",{categoryFilter:"{/categoryFilter}",catalogs:{path:"/catalogs",templateShareable:true,template:z},busy:true}).addStyleClass("sapUiTinyMarginTop");this.oCatalogsContainer.addStyleClass("sapUshellCatalogTileContainer");this.oCatalogsContainer.addEventDelegate({onsaptabprevious:function(e){var t=r.getElementById("openCloseButtonAppFinderSubheader");var a=e.srcControl.getDomRef();if(t.getVisible()&&!t.getPressed()&&!a.classList.contains("sapUshellPinButton")){e.preventDefault();var o=r.getElementById("appFinderSearch");o.focus()}},onsapskipback:function(e){var t=r.getElementById("openCloseButtonAppFinderSubheader");if(t.getVisible()&&!t.getPressed()){e.preventDefault();t.focus()}}});this.oCatalogsContainer.onAfterRendering=function(){var e=r.getElementById("catalogTilesDetailedPage");if(!this.getBusy()){e.setBusy(false);d.end("FLP:AppFinderLoadingStartToEnd")}else{e.setBusy(true)}document.getElementById("catalogTilesDetailedPage-cont").addEventListener("scroll",function(){var e=r.getElementById("catalogTilesDetailedPage");var t=e.getScrollDelegate();var a=t.getScrollTop();var o=t.getMaxScrollTop();if(o-a<=30+3*u.oController.PagingManager.getTileHeight()&&u.oController.bIsInProcess===false){u.oController.bIsInProcess=true;u.oController.allocateNextPage();setTimeout(function(){u.oController.bIsInProcess=false},0)}})};var V=new i("catalogTilesDetailedPage",{showHeader:false,showFooter:false,showNavButton:false,content:[this.oCatalogsContainer.addStyleClass("sapUshellCatalogPage")],landmarkInfo:new s({contentLabel:P.i18n.getText("appFinderCatalogTitle"),contentRole:B.None,rootRole:B.None})});var F=new i("catalogMessagePage",{showHeader:false,showFooter:false,showNavButton:false,content:[this.oIllustratedMessage]});var E=new e("catalogSelectBusyIndicator",{size:"1rem"});this.splitApp=new n("catalogViewMasterDetail",{masterPages:[E,this.oCatalogSelect],detailPages:[V,F],mode:"{= ${/isPhoneWidth} ? 'HideMode' : 'ShowHideMode'}"});return this.splitApp},_calculateDetailPageId:function(){var e=this.getModel("subHeaderModel");var t=e.getProperty("/search/searchMode");var a=e.getProperty("/tag/tagMode");var o=!!this.getModel().getProperty("/catalogsNoDataText");var i;if(t||a){i=this.getController().bSearchResults?"catalogTilesDetailedPage":"catalogMessagePage"}else if(o){i="catalogMessagePage"}else{i="catalogTilesDetailedPage"}return i},getControllerName:function(){return"sap.ushell.components.appfinder.Catalog"}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/Component", ["sap/ui/core/UIComponent","sap/ui/thirdparty/hasher","sap/ushell/components/CatalogsManager","sap/ushell/resources","sap/ushell/Config","sap/ushell/bootstrap/common/common.load.model","sap/ushell/components/SharedComponentUtils","sap/base/util/UriParameters","sap/ushell/Container"],function(e,t,a,o,s,n,i,r,l){"use strict";return e.extend("sap.ushell.components.appfinder.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"],manifest:"json",library:"sap.ushell"},init:function(){e.prototype.init.apply(this,arguments);this.oModel=n.getModel();this.setModel(this.oModel);var r,c,p;var h=s.last("/core/shell/enablePersonalization");if(h){i.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings")}this.oCatalogsManager=new a("dashboardMgr",{model:this.oModel});this.setModel(o.i18nModel,"i18n");i.toggleUserActivityLog();r=t.getHash();Promise.all([l.getServiceAsync("ShellNavigationInternal"),l.getServiceAsync("URLParsing")]).then(function(e){var t=e[0];var a=e[1];var o=a.parseShellHash(r);if(o&&o.semanticObject==="shell"&&o.action==="catalog"){c=this.parseOldCatalogParams(r);p=this.getManifestEntry("/sap.ui5/config");t.toExternal({target:{semanticObject:p.semanticObject,action:p.action}});this.getRouter().navTo("catalog",{filters:JSON.stringify(c)})}}.bind(this))},parseOldCatalogParams:function(e){const t=r.fromURL(e).mParams;const a=Object.create(null);for(const e in t){if(Object.prototype.hasOwnProperty.call(t,e)){const o=t[e][0];a[e]=o.includes("/")?encodeURIComponent(o):o}}return a},destroy:function(){return Promise.all([e.prototype.destroy.apply(this,arguments),this.oCatalogsManager&&this.oCatalogsManager.destroy()])}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/EasyAccess.controller", ["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/mvc/Controller","sap/ui/core/mvc/View","sap/base/Log","sap/ui/model/odata/ODataUtils","sap/ui/thirdparty/datajs","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/model/json/JSONModel","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/Config","sap/ushell/Container"],function(e,t,s,r,i,a,n,jQuery,o,l,u,h,c){"use strict";return s.extend("sap.ushell.components.appfinder.EasyAccess",{DEFAULT_URL:"/sap/opu/odata/UI2",DEFAULT_NUMBER_OF_LEVELS:3,SEARCH_RESULTS_PER_REQUEST:100,onInit:function(){var e=this;this.translationBundle=o.i18n;this.oView=this.getView();var t=this.oView.getModel("easyAccessSystemsModel");var s=t.bindProperty("/systemSelected");s.attachChange(e.adjustUiOnSystemChange.bind(this));this.menuName=this.oView.getViewData().menuName;this.systemId=null;this.easyAccessCache={};this.easyAccessModel=new l;this.easyAccessModel.setSizeLimit(1e3);Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(function(e){e[0].setModel(this.easyAccessModel,"easyAccess");e[1].setModel(this.easyAccessModel,"easyAccess")}.bind(this));if(!h.last("/core/spaces/enabled")){sap.ui.require(["sap/ushell/components/HomepageManager"],function(e){var t=this.getView().getModel();if(!t.getProperty("/catalogs")){if(!t.getProperty("/groups")||t.getProperty("/groups").length===0){var s=e.prototype.getInstance();if(s){this.oHomepageManager=s;this.oHomepageManager.loadPersonalizedGroups()}else{i.error("The homepage manager was not initialized. Tiles in user and sap menu cannot be added to groups.")}}}}.bind(this))}var r=this.oView.getModel("subHeaderModel");var a=r.bindProperty("/openCloseSplitAppButtonToggled");a.attachChange(e.handleToggleButtonModelChanged.bind(this));if(this.oView.getViewData().enableSearch){var n=r.bindProperty("/search");n.attachChange(e.handleSearchModelChanged.bind(this))}this.checkIfSystemSelectedAndLoadData()},checkIfSystemSelectedAndLoadData:function(){var e=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(e){this.systemId=e.systemId;this.loadMenuItemsFirstTime(this.oView.getViewData().menuName,e)}},navigateHierarchy:function(e,t){Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(function(s){var r=s[0];var i=s[1];r.setBusy(false);var a=this.easyAccessModel.getProperty(e||"/");if(typeof a.folders!=="undefined"){r.updatePageBindings(e,t);i.getController().updatePageBindings(e);return}r.setBusy(true);this.getMenuItems(this.menuName,this.systemId,a.id,a.level).then(function(e,s){this.easyAccessModel.setProperty(e+"/folders",s.folders);this.easyAccessModel.setProperty(e+"/apps",s.apps);r.updatePageBindings(e,t);i.getController().updatePageBindings(e);r.setBusy(false)}.bind(this,e),function(e){this.handleGetMenuItemsError(e)}.bind(this))}.bind(this))},handleSearch:function(e){var t=!this.pHierarchyAppsSearchResults;if(t){this.pHierarchyAppsSearchResults=r.create({id:this.getView().getId()+"hierarchyAppsSearchResults",viewName:"module:sap/ushell/components/appfinder/HierarchyAppsView",height:"100%",viewData:{easyAccessSystemsModel:this.oView.getModel("easyAccessSystemsModel"),getMoreSearchResults:this.getMoreSearchResults.bind(this),CatalogsManager:this.getView().getViewData().CatalogsManager}}).then(function(e){this.easyAccessSearchResultsModel=new l;this.easyAccessSearchResultsModel.setSizeLimit(1e4);e.setModel(this.easyAccessSearchResultsModel,"easyAccess");e.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");e.addCustomData(new u({key:"role",value:"region",writeToDom:true}));e.addCustomData(new u({key:"aria-label",value:this.oView.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));return e}.bind(this))}this.pHierarchyAppsSearchResults.then(function(s){this.searchResultFrom=0;this.oView.splitApp.getCurrentDetailPage().setBusy(true);this.easyAccessSearchResultsModel.setProperty("/apps",[]);this.easyAccessSearchResultsModel.setProperty("/total",0);this._getSearchResults(e,this.searchResultFrom).then(function(e){c.getServiceAsync("BookmarkV2").then(function(r){e.results.forEach(function(e){r.countBookmarks(e.url).then(function(t){e.bookmarkCount=t})});this.easyAccessSearchResultsModel.setProperty("/apps",e.results);this.easyAccessSearchResultsModel.setProperty("/total",e.count);this.searchResultFrom=e.results.length;if(t){this.oView.splitApp.addDetailPage(s)}s.updateResultSetMessage(parseInt(e.count,10),true);this.oView.splitApp.getCurrentDetailPage().setBusy(false);if(this.oView.splitApp.getCurrentDetailPage()!==s){this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyAppsSearchResults")}}.bind(this))}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.splitApp.getCurrentDetailPage().setBusy(false)}.bind(this));return s}.bind(this))},getMoreSearchResults:function(){if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true)}var e=this.oView.getModel("subHeaderModel");var t=e.getProperty("/search/searchTerm");this._getSearchResults(t,this.searchResultFrom).then(function(e){var t=this.easyAccessSearchResultsModel.getProperty("/apps");var s=t.slice();Array.prototype.push.apply(s,e.results);this.easyAccessSearchResultsModel.setProperty("/apps",s);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(false)}this.searchResultFrom=s.length}.bind(this),function(e){this.handleGetMenuItemsError(e);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true)}}.bind(this))},_getSearchResults:function(e,t){var s=new jQuery.Deferred;var r=this._getODataRequestForSearchUrl(this.menuName,this.systemId,e,t);var i={requestUri:r};var a=this._callODataService(i,this.handleSuccessOnReadFilterResults);a.done(function(e){s.resolve(e)});a.fail(function(e){s.reject(e)});return s.promise()},getSystemNameOrId:function(){var e=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(e){return e.name||e.id}return undefined},adjustUiOnSystemChange:function(){var e=this.easyAccessModel.getData();if(this.systemId&&e&&e.id){this.easyAccessCache[this.systemId]=e}var t=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(t){this.systemId=t.systemId;var s=this.easyAccessCache[this.systemId];if(s){this.easyAccessModel.setData(s);this.navigateHierarchy("",false)}else{Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(function(e){e[0].setBusy(true);e[1].setBusy(true)});this.loadMenuItemsFirstTime(this.menuName,t)}}},handleToggleButtonModelChanged:function(){var e=this.oView.getModel("subHeaderModel");var t=e.getProperty("/openCloseSplitAppButtonVisible");var s=e.getProperty("/openCloseSplitAppButtonToggled");var r=this.getView().splitApp;if(t){if(s&&!r.isMasterShown()){r.showMaster()}else if(r.isMasterShown()){r.hideMaster()}}},handleSearchModelChanged:function(){var e=this.oView.getModel("subHeaderModel");var s=e.getProperty("/activeMenu");if(this.getView().getId().indexOf(s)===-1){return}var r=e.getProperty("/search/searchTerm");var i=e.getProperty("/search/searchMode");if(i){t.getElementById("appFinderSearch").getCustomData()[0].setValue(this.getView().getId()+"hierarchyAppsSearchResults");if(r){this.handleSearch(r)}}else{t.getElementById("appFinderSearch").getCustomData()[0].setValue("");this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyApps")}},loadMenuItemsFirstTime:function(e,t){return this.getMenuItems(e,t.systemId,"",0).then(function(e){e.text=t.systemName||t.systemId;this.easyAccessModel.setData(e);Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(function(e){e[0].setBusy(false);e[1].setBusy(false)});this.navigateHierarchy("",false)}.bind(this),function(e){this.handleGetMenuItemsError(e);Promise.all([this.oView.pHierarchyFolders,this.oView.pHierarchyApps]).then(function(e){e[0].updatePageBindings("/",false);e[1].getController().updatePageBindings("/")})}.bind(this))},handleGetMenuItemsError:function(e){var t=this.getErrorMessage(e);sap.ui.require(["sap/m/MessageBox"],function(e){e.error(t)});this.easyAccessModel.setData("");this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false)},_getErrorDetails:function(e){try{var t=JSON.parse(e.response.body);return t.error.message.value}catch(e){return null}},getErrorMessage:function(e){var t="";if(this.menuName==="SAP_MENU"){t=this.translationBundle.getText("easyAccessSapMenuNameParameter")}else if(this.menuName==="USER_MENU"){t=this.translationBundle.getText("easyAccessUserMenuNameParameter")}if(e){if(e.message){var s=this._getErrorDetails(e);if(s){return this.translationBundle.getText("easyAccessErrorGetDataErrorMsgWithDetails",[t,e.message,s])}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[t,e.message])}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[t,e])}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsgNoReason",[t])},getMenuItems:function(e,t,s,r,i){var a=new jQuery.Deferred;if(e!=="SAP_MENU"&&e!=="USER_MENU"){a.reject("Invalid menuType parameter");return a.promise()}if(typeof t!=="string"||t===""){a.reject("Invalid systemId parameter");return a.promise()}if(typeof s!=="string"){a.reject("Invalid entityId parameter");return a.promise()}if(typeof r!=="number"){a.reject("Invalid entityLevel parameter");return a.promise()}if(i&&typeof i!=="number"){a.reject("Invalid numberOfNextLevels parameter");return a.promise()}if(s===""){r=0}var n;var o=this.getView().getModel();var l=o.getProperty("/easyAccessNumbersOfLevels");if(l){n=l}else if(i){n=i}else{n=this.DEFAULT_NUMBER_OF_LEVELS}var u=r+n+1;var h=this._getODataRequestUrl(e,t,s,u);var c={requestUri:h};var d=this._callODataService(c,this.handleSuccessOnReadMenuItems,{systemId:t,entityId:s,iLevelFilter:u});d.done(function(e){a.resolve(e)});d.fail(function(e){a.reject(e)});return a.promise()},_callODataService:function(t,s,r){var i;var a;var o=new jQuery.Deferred;i=c.getUser().getLanguage();if(i&&t.requestUri.indexOf("sap-language=")<0){t.requestUri+=(t.requestUri.indexOf("?")>=0?"&":"?")+"sap-language="+i}var l=c.getLogonSystem();a=l&&l.getClient();sap.ui.require(["sap/ui/thirdparty/datajs"],function(){n.read({requestUri:t.requestUri,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":e.getLanguage()||"","sap-client":a||"","sap-language":i||""}},function(e,t){if(e&&e.results&&t&&t.statusCode===200){var i=s.bind(this,e,r||{})();o.resolve(i)}}.bind(this),function(e){o.reject(e)})}.bind(this));return o.promise()},handleSuccessOnReadMenuItems:function(e,t){var s=this._oDataResultFormatter(e.results,t.systemId,t.entityId,t.iLevelFilter);return s},handleSuccessOnReadFilterResults:function(e){var t;e.results.forEach(function(e,s){t=this._appendSystemToUrl(e,this.systemId);e.url=t}.bind(this));return{results:e.results,count:e.__count}},_appendSystemToUrl:function(e,t){if(e.url){return e.url+(e.url.indexOf("?")>0?"&":"?")+"sap-system="+t}},_oDataResultFormatter:function(e,t,s,r){var i={};var a={};if(s===""){a={id:"root",text:"root",level:0,folders:[],apps:[]};i.root=a}else{a={id:s,folders:[],apps:[]};i[s]=a}var n;for(var o=0;o<e.length;o++){n=e[o];var l;if(n.level==="01"){l=i.root}else{l=i[n.parentId]}var u={id:n.Id,text:n.text,subtitle:n.subtitle,icon:n.icon,level:parseInt(n.level,10)};if(n.type==="FL"){u.folders=[];u.apps=[];if(n.level==r-1){u.folders=undefined;u.apps=undefined}if(l&&l.folders){l.folders.push(u)}i[n.Id]=u}else{u.url=this._appendSystemToUrl(n,t);if(l&&l.apps){l.apps.push(u)}}}return a},_getODataRequestUrl:function(e,t,s,r){var i=this._getServiceUrl(e);var a;if(r<10){a="0"+r}else{a=r.toString()}var n="";if(s){if(decodeURIComponent(s)===s){s=encodeURIComponent(s)}n="('"+s+"')/AllChildren"}i=i+";o="+t+"/MenuItems"+n+"?$filter=level lt '"+a+"'&$orderby=level,text";return i},_getODataRequestForSearchUrl:function(e,t,s,r){var i=this._getServiceUrl(e);var n=this.SEARCH_RESULTS_PER_REQUEST;s=this._removeWildCards(s);s=encodeURIComponent(s);r=!r?0:r;s=a.formatValue(s,"Edm.String");i=i+";o="+t+"/MenuItems?$filter=type ne 'FL' and ("+"substringof("+s+", text) or "+"substringof("+s+", subtitle) or "+"substringof("+s+", url)"+")"+"&$orderby=text,subtitle,url&$inlinecount=allpages&$skip="+r+"&$top="+n;return i},_getServiceUrl:function(e){var t;var s=this.getView().getModel();if(e==="SAP_MENU"){var r=s.getProperty("/sapMenuServiceUrl");if(r){t=r}else{t=this.DEFAULT_URL+"/EASY_ACCESS_MENU"}}else if(e==="USER_MENU"){var i=s.getProperty("/userMenuServiceUrl");if(i){t=i}else{t=this.DEFAULT_URL+"/USER_MENU"}}return t},_removeWildCards:function(e){return e.replace(/\*/g,"")}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/EasyAccessView", ["sap/ui/core/mvc/View","sap/m/SplitApp","sap/ushell/resources"],function(e,s,t){"use strict";return e.extend("sap.ushell.components.appfinder.EasyAccessView",{createContent:function(i){this.oResourceBundle=t.i18n;this.setModel(this.getViewData().easyAccessSystemsModel,"easyAccessSystemsModel");this.setModel(this.getViewData().subHeaderModel,"subHeaderModel");this.setModel(this.getViewData().parentComponent.getModel());this.pHierarchyFolders=e.create({viewName:"module:sap/ushell/components/appfinder/HierarchyFoldersView",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(i),easyAccessSystemsModel:this.getModel("easyAccessSystemsModel"),subHeaderModel:this.getModel("subHeaderModel")}}).then(function(e){this.hierarchyFolders=e;this.hierarchyFolders.addStyleClass("sapUshellHierarchyFolders");return e}.bind(this));var a=this.getViewData();this.pHierarchyApps=e.create({id:this.getId()+"hierarchyApps",viewName:"module:sap/ushell/components/appfinder/HierarchyAppsView",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(i),menuName:a.menuName,CatalogsManager:this.getViewData().CatalogsManager}}).then(function(e){this.hierarchyApps=e;return e}.bind(this));this.splitApp=new s;Promise.all([this.pHierarchyFolders,this.pHierarchyApps]).then(function(e){this.splitApp.addMasterPage(e[0]);this.splitApp.addDetailPage(e[1]);this.splitApp.setInitialMaster(e[0]);this.splitApp.setInitialDetail(e[1])}.bind(this));return this.splitApp},getControllerName:function(){return"sap.ushell.components.appfinder.EasyAccess"}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/GroupListPopover.controller", ["sap/ui/core/Element","sap/ui/core/mvc/Controller","sap/m/library","sap/ushell/resources","sap/ui/Device","sap/ui/model/json/JSONModel"],function(e,o,t,r,i,s){"use strict";var n=t.ListMode;return o.extend("sap.ushell.components.appfinder.GroupListPopover",{onExit:function(){var e=this.getView();if(e._oListContainer){e._oListContainer.destroy()}if(e._oNewGroupItem){e._oNewGroupItem.destroy()}if(e._oNewGroupNameInput){e._oNewGroupNameInput.destroy()}if(e._oNewGroupHeader){e._oNewGroupHeader.destroy()}},initializeData:function(e){this.oPopoverModel=new s({userGroupList:e.groupData});this.oPopoverModel.setSizeLimit(9999);this.getView().oPopover.setModel(this.oPopoverModel)},_cancelButtonPress:function(){this.getView().oPopover.close()},_groupListItemClickHandler:function(e){var o=e.getParameter("listItem");if(o.data("newGroupItem")){this._navigateToCreateNewGroupPane();return}var t=e.getSource();if(t.getMode()===n.SingleSelectMaster){var r=this.getView();r.oPopover.close()}else{o.setSelected(!o.getSelected())}},_okayCancelButtonPress:function(){var e=this.getView();var o=e._getNewGroupInput();var t=o.getValue();if(t.length>0){this.sNewGroupId=t}e.oPopover.close()},_navigateToCreateNewGroupPane:function(){var e=this.getView();var o=e._getNewGroupHeader();var t=e._getNewGroupInput();e.oPopover.removeAllContent();e.oPopover.addContent(t);e.oPopover.setCustomHeader(o);e.oPopover.setContentHeight("");var i=e.oPopover.getEndButton();if(i){i.setVisible(true)}else{i=e._getCancelButton();e.oPopover.setEndButton(i)}e.oPopover.getBeginButton().setText(r.i18n.getText("okDialogBtn"));i.setText(r.i18n.getText("cancelBtn"));if(e.getViewData().singleGroupSelection){this._setFooterVisibility(true)}setTimeout(function(){t.focus()},0)},_afterCloseHandler:function(){var e=this.oPopoverModel.getProperty("/userGroupList");var o={addToGroups:[],removeFromGroups:[],newGroups:this.sNewGroupId?[this.sNewGroupId]:[],allGroups:e};var t;for(var r=0,i=e.length;r<i;++r){t=e[r];if(t.selected===t.initiallySelected){continue}if(t.selected){o.addToGroups.push(t.oGroup)}else{o.removeFromGroups.push(t.oGroup)}}var s=this.getView();s.deferred.resolve(o);s.destroy()},_backButtonHandler:function(){var e=this.getView();e.oPopover.removeAllContent();if(e.getViewData().singleGroupSelection){this._setFooterVisibility(false)}if(!i.system.phone){e.oPopover.setContentHeight("192px")}else{e.oPopover.setContentHeight("100%")}e.oPopover.setVerticalScrolling(true);e.oPopover.setHorizontalScrolling(false);e.oPopover.addContent(e._getListContainer());e.oPopover.setTitle(r.i18n.getText("addTileToGroups_popoverTitle"));e.oPopover.setCustomHeader();e._getNewGroupInput().setValue("");e.oPopover.getEndButton().setVisible(false);e.oPopover.getBeginButton().setText(r.i18n.getText("close"))},_setFooterVisibility:function(o){var t=e.getElementById("groupsPopover-footer");if(t){t.setVisible(o)}}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/GroupListPopoverView", ["sap/ui/thirdparty/jquery","sap/ui/core/mvc/View","sap/m/ResponsivePopover","sap/ushell/resources","sap/m/ScrollContainer","sap/ui/Device","sap/m/StandardListItem","sap/m/List","sap/m/Input","sap/m/Button","sap/ui/core/IconPool","sap/m/Bar","sap/m/Label","sap/m/DisplayListItem","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(jQuery,e,t,o,i,n,r,s,u,a,p,l,c,h,d,_,g){"use strict";var m=d.ListMode;var G=d.ListType;return e.extend("sap.ushell.components.appfinder.GroupListPopoverView",{getControllerName:function(){return"sap.ushell.components.appfinder.GroupListPopover"},createContent:function(e){this.oPopover=new t({id:"groupsPopover",placement:"Auto",title:o.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:"20rem",beginButton:this._getCloseButton(),content:this._getListContainer(),afterClose:[e._afterCloseHandler,e]}).addStyleClass("sapContrastPlus");this.addDependent(this.oPopover);this.oPopover.setInitialFocus(this._getNewGroupListItem())},open:function(e){if(document.body.clientHeight-e.getDomRef().getBoundingClientRect().bottom>=310){this.oPopover.setPlacement("Bottom")}this.oPopover.openBy(e);if(this.getViewData().singleGroupSelection){this.getController()._setFooterVisibility(false)}this.deferred=jQuery.Deferred();return this.deferred.promise()},_getListContainer:function(){if(!this._oListContainer){var e=this._getGroupList();this._oListContainer=new i({id:"popoverContainer",horizontal:false,vertical:true,content:[e],height:n.system.phone?"100%":"190px"})}return this._oListContainer},_getNewGroupInput:function(){if(!this._oNewGroupNameInput){this._oNewGroupNameInput=new u("newGroupNameInput",{type:"Text",placeholder:o.i18n.getText("new_group_name")})}return this._oNewGroupNameInput},_getNewGroupHeader:function(){if(!this._oNewGroupHeader){var e=this.getController();var t=new a({icon:p.getIconURI("nav-back"),press:[e._backButtonHandler,e],tooltip:o.i18n.getText("newGroupGoBackBtn_tooltip")});t.addStyleClass("sapUshellCatalogNewGroupBackButton");this._oNewGroupHeader=new l("oHeadBar",{contentLeft:[t],contentMiddle:[new c({text:o.i18n.getText("newGroup_popoverTitle")})]})}return this._oNewGroupHeader},_getGroupList:function(){if(!this._oGroupList){var e=this.getController();var t=new h({label:"{oGroup/title}",selected:"{selected}",tooltip:"{oGroup/title}",type:G.Active});var o=[new _("oGroup/isGroupLocked",g.EQ,false)];var i=this.getViewData();if(i.enableHideGroups){o.push(new _("oGroup/isGroupVisible",g.EQ,true))}this._oGroupList=new s({mode:i.singleGroupSelection?m.SingleSelectMaster:m.MultiSelect,items:{path:"/userGroupList",template:t,filters:o,templateShareable:false},itemPress:[e._groupListItemClickHandler,e]});var n=this._getNewGroupListItem();this._oGroupList.addEventDelegate({onBeforeRendering:function(){this._oGroupList.insertAggregation("items",n,0,true)}.bind(this),onAfterRendering:function(){this._oGroupList.removeAggregation("items",n,true)}.bind(this)})}return this._oGroupList},_getNewGroupListItem:function(){if(!this._oNewGroupItem){this._oNewGroupItem=new r("newGroupItem",{title:o.i18n.getText("newGroup_listItemText"),type:G.Navigation});this._oNewGroupItem.data("newGroupItem",true);this._oNewGroupItem.getList=function(){return this._oGroupList}.bind(this);this._oNewGroupItem.getModeControl=function(){return null};this._oNewGroupItem.onsapspace=function(e){e.preventDefault();e.isMarked()};this._oNewGroupItem.addEventDelegate({onsaptabnext:function(e){e.preventDefault();e._bIsStopHandlers=true;this._getCloseButton().focus()}})}return this._oNewGroupItem},_getCancelButton:function(){if(!this._oCancelButton){var e=this.getController();this._oCancelButton=new a("cancelButton",{press:[e._cancelButtonPress,e],text:o.i18n.getText("cancelBtn")})}return this._oCancelButton},_getCloseButton:function(){if(!this._oCloseButton){var e=this.getController();this._oCloseButton=new a("closeButton",{press:[e._okayCancelButtonPress,e],text:o.i18n.getText("closeBtn")})}return this._oCloseButton}})});
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/HierarchyApps.controller", ["sap/ui/core/mvc/View","sap/ui/core/mvc/Controller","sap/ui/thirdparty/jquery","sap/m/MessageToast","sap/ushell/resources","sap/ushell/Container"],function(e,t,jQuery,r,o,a){"use strict";var s;return t.extend("sap.ushell.components.appfinder.HierarchyApps",{onInit:function(){var e=this.getView().getViewData().easyAccessSystemsModel;if(e){this.getView().setModel(e,"easyAccessSystems")}s=this.getView().getViewData().CatalogsManager&&this.getView().getViewData().CatalogsManager.getInstance()},getCrumbsData:function(e,t){var r=e.split("/");r.splice(r.length-2,2);var o=[];while(r.length){var a=r.join("/");var s=t.getProperty(a+"/text");o.unshift({text:s,path:a});r.splice(r.length-2,2)}return o},_updateAppBoxedWithPinStatuses:function(e){var t=this.getView();if(!e){e=t.layout.getBinding("items").getPath()}var r=t.getModel("easyAccess");var o=r.getProperty(e)?r.getProperty(e):[];this.getView().oVisualizationOrganizerHelper.updateBookmarkCount.call(this,o).then(function(t){r.setProperty(e,t)})},updateBookmarkCount:function(e){return a.getServiceAsync("BookmarkV2").then(function(t){var r=e.map(function(e){return t.countBookmarks(e.url).then(function(t){e.bookmarkCount=t;return e})});return new Promise(function(e){jQuery.when.apply(jQuery,r).then(function(){var t=Array.prototype.slice.call(arguments);e(t)})})})},updatePageBindings:function(e){this.getView().layout.bindAggregation("items","easyAccess>"+e+"/apps",this.getView().oItemTemplate);this._updateAppBoxedWithPinStatuses(e+"/apps");this.getView().breadcrumbs.bindProperty("currentLocationText","easyAccess>"+e+"/text");var t=this.getCrumbsData(e,this.getView().getModel("easyAccess"));this.getView().crumbsModel.setProperty("/crumbs",t);var r=this.getView().getModel("easyAccess").getProperty(e+"/apps");this.getView().updateResultSetMessage(r.length,false)},onAppBoxPressed:function(e){if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return}var t=e.getSource().getProperty("url");if(t&&t.indexOf("#")===0){hasher.setHash(t)}},_handleSuccessMessage:function(e,t){var a;var s=t.addToGroups?t.addToGroups.length:0;var i=t.newGroups?t.newGroups.length:0;var n=s+i;if(n===1){var u;if(s===1){u=t.addToGroups[0].title}else{u=t.newGroups[0]}a=o.i18n.getText("appAddedToSingleGroup",[e.text,u])}else{a=o.i18n.getText("appAddedToSeveralGroups",[e.text,n])}if(n>0){r.show(a,{duration:3e3,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"})}return a},_prepareErrorMessage:function(e,t){var r,o,a,s=0,i=false,n;for(var u in e){r=e[u].group;o=e[u].action;if(o==="addBookmark_ToExistingGroup"){s++;if(s===1){a=r.title}}else if(o==="addBookmark_ToNewGroup"){s++;if(s===1){a=r}}else{i=true}}if(i){if(e.length===1){n={messageId:"fail_tile_operation_create_new_group"}}else{n={messageId:"fail_tile_operation_some_actions"}}}else if(e.length===1){n={messageId:"fail_app_operation_add_to_group",parameters:[t,a]}}else{n={messageId:"fail_app_operation_add_to_several_groups",parameters:[t]}}return n},_handleBookmarkAppPopoverResponse:function(e,t){var r=[];t.newGroups.forEach(function(t){r.push(this._createGroupAndAddBookmark(t,e))}.bind(this));t.addToGroups.forEach(function(t){r.push(this._addBookmark(t,e))}.bind(this));return jQuery.when.apply(jQuery,r).then(function(){var r=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(e,t,r)}.bind(this))},_handlePopoverGroupsActionPromises:function(e,t,r){var o=r.filter(function(e,t,r){return!e.status});if(o.length){var a=this._prepareErrorMessage(o,e.text);s.notifyOnActionFailure(a.messageId,a.parameters);return}this._updateAppBoxedWithPinStatuses();this._handleSuccessMessage(e,t)},_createGroupAndAddBookmark:function(e,t){var r=jQuery.Deferred(),o={};var a=s.createGroup(e);a.done(function(a){var s=this._addBookmark(a.getObject(),t,true);s.done(function(e){r.resolve(e)}).fail(function(){o={group:e,status:0,action:"addBookmark_ToNewGroup"};r.resolve(o)})}.bind(this)).fail(function(){o={group:e,status:0,action:"addBookmark_NewGroupCreation"};r.resolve(o)});return r.promise()},_addBookmark:function(e,t,r){var o=jQuery.Deferred(),s={};a.getServiceAsync("BookmarkV2").then(function(a){var i=a.addBookmark({url:t.url,title:t.text,subtitle:t.subtitle,icon:t.icon},e.object);var n=r?"addBookmark_ToNewGroup":"addBookmark_ToExistingGroup";i.then(function(){s={group:e,status:1,action:n};o.resolve(s)}).catch(function(){s={group:e,status:0,action:n};o.resolve(s)})});return o.promise()},showSaveAppPopover:function(e){this.getView().oVisualizationOrganizerHelper.onHierarchyAppsPinButtonClick.call(this,e).then(function(e){if(e){this._updateAppBoxedWithPinStatuses()}}.bind(this))},showGroupListPopover:function(t){var r=this.getView().getModel();var o=t.oSource.getParent().getBinding("title").getContext().getObject();var a=t.oSource;if(r.getProperty("/groupContext").path){var s=r.getProperty("/groupContext").path;var i=r.getProperty(s);var n={newGroups:[],addToGroups:[i]};this._handleBookmarkAppPopoverResponse(o,n);return}var u=r.getProperty("/groups").map(function(e){return{selected:false,initiallySelected:false,oGroup:e}});e.create({viewName:"module:sap/ushell/components/appfinder/GroupListPopoverView",viewData:{enableHideGroups:r.getProperty("/enableHideGroups"),enableHelp:r.getProperty("/enableHelp"),singleGroupSelection:true}}).then(function(e){e.getController().initializeData({groupData:u});var t=e.open(a);t.then(this._handleBookmarkAppPopoverResponse.bind(this,o));this.getView().addDependent(e);return e}.bind(this))},resultTextFormatter:function(e,t){var r=o.i18n;if(e){var a=e.systemName?e.systemName:e.systemId;var s="";if(t){s=r.getText("search_easy_access_results",[t,a])}return s}return""},showMoreResultsVisibilityFormatter:function(e,t){if(e&&e.length<t){return true}return false},showMoreResultsTextFormatter:function(e,t){if(!e||!t){return""}var r=e.length;return o.i18n.getText("EasyAccessSearchResults_ShowMoreResults",[r,t])}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/HierarchyAppsView", ["sap/ui/core/library","sap/ui/core/mvc/View","sap/ushell/ui/appfinder/AppBoxInternal","sap/ushell/ui/appfinder/PinButton","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/FlexBox","sap/m/library","sap/m/Page","sap/m/PageAccessibleLandmarkInfo","sap/m/IllustratedMessage","sap/ui/model/json/JSONModel","sap/m/Link","sap/m/Breadcrumbs","sap/m/Text","sap/m/Title","sap/m/Button","sap/ushell/components/appfinder/VisualizationOrganizerHelper"],function(e,t,s,a,i,o,r,n,l,p,u,c,h,m,d,g,y,f){"use strict";var b=n.ButtonType;var T=n.FlexWrap;var x=e.TitleLevel;var A=e.AccessibleLandmarkRole;return t.extend("sap.ushell.components.appfinder.HierarchyAppsView",{oVisualizationOrganizerHelper:f.getInstance(),createContent:function(e){this.oController=e;var t=new a({icon:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonIcon},type:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonType},selected:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonTooltip.bind(this)},press:e.showSaveAppPopover.bind(e)});t.addCustomData(new o({key:"tabindex",value:"-1",writeToDom:true}));t.addStyleClass("sapUshellPinButton");this.oItemTemplate=new s({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:t,press:[e.onAppBoxPressed,e]});this.oItemTemplate.addCustomData(new o({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new r(this.getId()+"_hierarchyAppsLayout",{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:T.Wrap});this.layout.addDelegate({onAfterRendering:function(){var e=this.getItems();var t=function(e){if(e.getKey()==="tabindex"){e.setValue("0")}};if(e.length){e[0].getCustomData().forEach(t);e[0].getPinButton().getCustomData().forEach(t)}}.bind(this.layout)});this.oMessagePage=new u({visible:false,title:i.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:""});var n=this.getViewData();var d=n.menuName==="USER_MENU"?"appFinderUserMenuTitle":"appFinderSapMenuTitle";var f=new l({showHeader:false,landmarkInfo:new p({contentLabel:i.i18n.getText(d),contentRole:A.Region})}).addStyleClass("sapUshellAppsView sapUiContentPadding");if(n&&n.navigateHierarchy){this.crumbsModel=new c({crumbs:[]});this.linkTemplate=new h({text:"{crumbs>text}",press:function(e){var t=e.oSource.getBinding("text").getContext().getObject();n.navigateHierarchy(t.path,false)}});this.breadcrumbs=new m({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");f.addContent(this.breadcrumbs)}else{this.resultText=new g({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:e.resultTextFormatter.bind(e)},level:x.H3}).addStyleClass("sapUiTinyMarginTop sapUiSmallMarginBottom sapUshellEasyAccessSearchResultText");f.addContent(this.resultText);this.showMoreResultsLink=new y({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:e.showMoreResultsTextFormatter.bind(e)},press:n.getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:e.showMoreResultsVisibilityFormatter.bind(e)},type:b.Transparent})}f.addContent(this.oMessagePage);f.addContent(this.layout);if(this.showMoreResultsLink){f.addContent(this.showMoreResultsLink)}return f},formatPinButtonTooltip:function(e,t,s,a,o){var r=i.i18n,n;if(s){var l=e?Array.prototype.indexOf.call(e,a):-1;var p=l!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";n=r.getText(p,[o])}else{n=t?r.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):r.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip")}return n},updateResultSetMessage:function(e,t){var s;if(t){s="noFilteredItems"}else{s="EasyAccessMenu_NoAppsToDisplayMessagePage_Text"}if(e){if(t){this.resultText.updateProperty("text");this.resultText.setVisible(true)}this.layout.setVisible(true);this.oMessagePage.setVisible(false)}else{if(t){this.resultText.setVisible(false)}this.layout.setVisible(false);this.oMessagePage.setVisible(true);var a=i.i18n.getText(s);this.oMessagePage.setTitle(a)}},setShowMoreResultsBusy:function(e){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(e)}},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyApps"}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/HierarchyFolders.controller", ["sap/ui/core/mvc/Controller","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/m/StandardListItem","sap/m/SelectDialog","sap/ui/core/Component","sap/ushell/Container"],function(e,t,jQuery,s,i,r,n,o,a){"use strict";return e.extend("sap.ushell.components.appfinder.HierarchyFolders",{onInit:function(){this.oDialog=null;this.getView().setModel(this.getView().getViewData().easyAccessSystemsModel,"easyAccessSystems");this.getView().setModel(this.getView().getViewData().subHeaderModel,"subHeaderModel");this.getSelectedSystem().then(function(e){if(e){this.setSystemSelected(e)}else{this.setSystemSelected(undefined);this.onSystemSelectionPress()}}.bind(this),function(){this.setSystemSelected(undefined);this.onSystemSelectionPress()})},onExit:function(){if(this.oDialog){this.destroyDialog()}},onAfterRendering:function(){var e=jQuery("#"+this.getView().getId());e.on("click",function(){this.exitSearchMode()}.bind(this))},getPersonalizer:function(){if(!this.oPersonalizerPromise){this.oPersonalizerPromise=a.getServiceAsync("PersonalizationV2").then(function(e){var t=o.getOwnerComponentFor(this),s={keyCategory:e.KeyCategory.FIXED_KEY,writeFrequency:e.WriteFrequency.LOW,clientStorageAllowed:true},i={container:"appfinder.HierarchyFolders",item:"lastSelectedSystem"};return e.getPersonalizer(i,s,t)}.bind(this))}return this.oPersonalizerPromise},getSelectedSystem:function(){var e=new jQuery.Deferred,t=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(t&&t.length&&t.length===1){var s=t[0];this.setSystemSelectedInPersonalization(s);e.resolve(s)}else{this.getSelectedSystemInPersonalization().then(function(s){if(s){var i=false;for(var r=0;r<t.length;r++){if(t[r].systemName&&t[r].systemName===s.systemName||t[r].systemId===s.systemId){i=true;e.resolve(s)}}if(!i){e.resolve();this.setSystemSelectedInPersonalization()}}else{e.resolve()}}.bind(this))}return e.promise()},setSystemSelected:function(e){this.getView().getModel("easyAccessSystems").setProperty("/systemSelected",e);this.setSystemSelectedInPersonalization(e)},getSelectedSystemInPersonalization:function(){var e=new jQuery.Deferred;this.getPersonalizer().then(function(s){s.getPersData().then(function(t){if(t){e.resolve(t)}else{e.resolve()}}).catch(function(s){t.error("Failed to get selected system from the personalization",s,"sap.ushell.components.appfinder.HierarchyFolders");e.reject()})});return e.promise()},setSystemSelectedInPersonalization:function(e){this.getPersonalizer().then(function(s){s.setPersData(e).catch(function(e){t.error("Failed to save selected system in the personalization",e,"sap.ushell.components.appfinder.HierarchyFolders")})})},onSystemSelectionPress:function(){var e=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(e&&e.length&&e.length<=1){return}var t=this.createDialog();t.open()},createDialog:function(){var e=this;if(!this.oDialog){this.oDialog=new n({id:"systemSelectionDialog",title:e.getView().translationBundle.getText("easyAccessSelectSystemDialogTitle"),multiSelect:false,contentHeight:"20rem",items:{path:"/systemsList",template:new r({adaptTitleSize:false,title:{parts:["systemName","systemId"],formatter:e.titleFormatter},description:{parts:["systemName","systemId"],formatter:e.descriptionFormatter},selected:{parts:["systemName","systemId"],formatter:e.selectedFormatter.bind(this)}})},confirm:e.systemConfirmHandler.bind(e),search:e.systemSearchHandler.bind(e),cancel:e.destroyDialog.bind(e)});this.oDialog.setModel(this.getView().getModel("easyAccessSystems"))}return this.oDialog},destroyDialog:function(){this.oDialog.destroyItems();this.oDialog.destroy();this.oDialog=null},systemConfirmHandler:function(e){var t=e.getParameters().selectedItem,s=t.getBindingContext().getObject();this.setSystemSelected(s);this.destroyDialog()},systemSearchHandler:function(e){var t=e.getParameter("value"),r=new i("systemName",s.Contains,t),n=new i("systemId",s.Contains,t),o=new i({filters:[n,r],and:false}),a=e.getSource().getBinding("items");a.filter(o)},titleFormatter:function(e,t){return e||t},descriptionFormatter:function(e,t){if(e){return t}return null},selectedFormatter:function(e,t){var s=this.getView().getModel("easyAccessSystems").getProperty("/systemSelected");if(!s){return false}if(e){return s.systemName===e&&s.systemId===t}return s.systemId===t},systemSelectorTextFormatter:function(e){if(e){if(e.systemName){return e.systemName}return e.systemId}return this.getView().translationBundle.getText("easyAccessSelectSystemTextWithoutSystem")},exitSearchMode:function(){var e=this.getView().getModel("subHeaderModel");e.setProperty("/search/searchMode",false);e.refresh(true)}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/HierarchyFoldersView", ["sap/ui/core/Lib","sap/ui/core/mvc/View","sap/m/Button","sap/m/Label","sap/m/Bar","sap/m/Page","sap/m/library","sap/m/List","sap/m/StandardListItem","sap/m/Text","sap/ushell/resources"],function(e,t,s,a,n,i,o,r,l,c,h){"use strict";var d=o.ButtonType;var u=o.ListSeparators;return t.extend("sap.ushell.components.appfinder.HierarchyFoldersView",{createContent:function(t){var o=this;this.translationBundle=h.i18n;this.treePath="";this.lastFocusID=document.URL.substring(document.URL.lastIndexOf("&/")+2)+"-button";this.systemSelectorText=new c({text:{path:"easyAccessSystemsModel>/systemSelected",formatter:t.systemSelectorTextFormatter.bind(t)}});this.oItemTemplate=new l({title:"{easyAccess>text}",type:"Navigation",press:function(){var e=o.pageMenu.$().find(".sapMBarLeft button");if(!e.length){o.lastFocusID=document.activeElement.getAttribute("id")}var t=this.getBindingContextPath();o.getViewData().navigateHierarchy(t,true)}});this.oList=new r({showSeparators:u.None,items:{path:"easyAccess>"+this.treePath+"/folders",template:this.oItemTemplate},updateFinished:function(){var e=this.getItems();o.finishEasyAccessAnimation(true);e.forEach(function(e){e.onsapspace=e.onsapenter})},noDataText:{path:"easyAccessSystemsModel>/systemSelected",formatter:function(e){if(e){return o.translationBundle.getText("easyAccessFolderWithNoItems")}}}});this._navBackButton=new s({tooltip:e.getResourceBundleFor("sap.m").getText("PAGE_NAVBUTTON_TEXT"),type:d.Back,visible:false,press:function(){var e=this.treePath.split("/");var t=e.slice(0,e.length-2);this.getViewData().navigateHierarchy(t.join("/"),false)}.bind(this)});this.pageMenu=new i({enableScrolling:true,headerContent:new n({contentLeft:[this._navBackButton,new a({text:{parts:["easyAccessSystemsModel>/systemSelected"],formatter:t.systemSelectorTextFormatter.bind(t)}})],contentRight:[new s({text:this.translationBundle.getText("easyAccessSelectSystemDialogTitle"),type:d.Transparent,visible:{path:"easyAccessSystemsModel>/systemsList",formatter:function(e){return e.length>1}},press:[t.onSystemSelectionPress,t]})]}).addStyleClass("sapUshellEasyAccessMasterPageHeader"),content:this.oList});return this.pageMenu},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyFolders"},finishEasyAccessAnimation:function(){if(!this.jqFolderClone){return}if(this.forwardAnimation){this.pageMenu.$().addClass("forwardToViewAnimation");this.jqFolderClone.addClass("forwardOutOfViewAnimation")}else{this.pageMenu.$().addClass("backToViewAnimation");this.jqFolderClone.addClass("backOutOfViewAnimation")}this.jqFolderClone.on("animationend",function(){this.pageMenu.$().removeClass("forwardToViewAnimation backToViewAnimation");var e=this.pageMenu.$().find(".sapMBarLeft button");if(e.length){e.focus()}else{setTimeout(function(){document.querySelector("#"+this.lastFocusID).focus()}.bind(this))}if(this.jqFolderClone){this.jqFolderClone.remove()}}.bind(this))},prepareEasyAccessAnimation:function(e){this.forwardAnimation=e;this.jqFolderClone=this.pageMenu.$().clone().removeAttr("data-sap-ui").css("z-index","1");this.jqFolderClone.find("*").removeAttr("id");this.pageMenu.$().parent().append(this.jqFolderClone)},updatePageBindings:function(e,t){var s=e.split("/").length>2;this.treePath=e;this._navBackButton.setVisible(s);this.pageMenu.setShowSubHeader(!s);this.prepareEasyAccessAnimation(t);this.oList.bindItems("easyAccess>"+e+"/folders",this.oItemTemplate)}})},true);
// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.predefine("sap/ushell/components/appfinder/VisualizationOrganizerHelper", ["sap/m/library","sap/ui/core/Element","sap/ushell/Config","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/resources"],function(t,n,e,i,o,r){"use strict";var u=t.ButtonType;var s;function a(){return n.getElementById("catalogView")}function l(){return n.getElementById("appFinderView")}function f(){var t,n,s=null;function f(){return e.last("/core/spaces/enabled")}function c(){if(t){return Promise.resolve(t)}n=n||new Promise(function(n){sap.ui.require(["sap/ushell/components/visualizationOrganizer/Component"],function(e){t=new e;n(t)})});return n}function h(){var n=a();if(!n){return}n.setBusy(true);return c().then(function(t){return t.requestData()}).then(function(){if(this.oModel){this.oModel.updateBindings(true)}var n=l();if(n&&t.getPersonalizablePages().length===1){var e=r.i18n.getText("VisualizationOrganizer.PageContextTitle",[t.getPersonalizablePages()[0].title]);n.getController()._updateShellHeader(e)}}.bind(this)).finally(function(){n.setBusy(false)})}if(f()){this.oDoable=o.on("trackHashChange").do(function(t){if(f()&&t==="Shell-appFinder"){h.call(this)}}.bind(this))}this.setModel=function(t){this.oModel=t};this.loadAndUpdate=function(){if(!f()){return Promise.resolve()}return h.call(this)};this.formatPinButtonTooltip=function(n,e,i){if(!f()){return this.formatPinButtonTooltip(n,e)}return t.formatPinButtonTooltip(i,s)};this.formatPinButtonSelectState=function(){if(!f()){return this.formatPinButtonSelectState.apply(this,arguments)}return false};this.formatPinButtonIcon=function(n){if(!f()){return"sap-icon://pushpin-off"}return t.formatPinButtonIcon(n,!!s)};this.formatPinButtonType=function(n){if(!f()){return u.Default}return t.formatPinButtonType(n,!!s)};this.onTilePinButtonClick=function(n){if(!f()){this.getController().onTilePinButtonClick(n);return}t.onTilePinButtonClick(n,s)};this.getNavigationContext=function(){if(!f()){return this.getGroupContext.apply(this,arguments)}if(s){return{pageID:encodeURIComponent(s.pageID),sectionID:encodeURIComponent(s.sectionID)}}return null};this.getNavigationContextAsText=function(){if(!f()){return this.getGroupNavigationContext.apply(this,arguments)}if(s){return JSON.stringify({pageID:encodeURIComponent(s.pageID),sectionID:encodeURIComponent(s.sectionID)})}return null};this.updateModelWithContext=function(n){if(!f()){this._updateModelWithGroupContext.apply(this,arguments);return Promise.resolve()}return c().then(function(){return t.loadSectionContext(n)}).then(function(t){s=t;this.oView.getModel().updateBindings(true);if(s){var n=s.sectionTitle?r.i18n.getText("VisualizationOrganizer.AppFinderSectionContextTitle",[s.sectionTitle]):r.i18n.getText("VisualizationOrganizer.AppFinderSectionContextTitle",[s.pageTitle]);this.oView.oPage.setTitle(n);if(this._updateShellHeader){return new Promise(function(t){setTimeout(function(){this._updateShellHeader(n);t()}.bind(this),0)}.bind(this))}}return Promise.resolve()}.bind(this))};this._loadVisualizationOrganizer=c;this._setSectionContext=function(t){s=t};this.exit=function(){if(this.oDoable){this.oDoable.off();this.oDoable=null}};this.onHierarchyAppsPinButtonClick=function(n){if(!f()){this.showGroupListPopover(n);return Promise.resolve(false)}return t.onHierarchyAppsPinButtonClick(n,s)};this.formatBookmarkPinButtonTooltip=function(n,e,i,o,r){if(!f()){return this.formatPinButtonTooltip(n,e,i,o,r)}return t.formatBookmarkPinButtonTooltip(e,s)};this.formatBookmarkPinButtonSelectState=function(t){if(!f()){return!!t}return false};this.formatBookmarkPinButtonIcon=function(t){if(!f()){return"sap-icon://pushpin-off"}return t>0?"sap-icon://accept":"sap-icon://add"};this.formatBookmarkPinButtonType=function(t){if(!f()){return u.Default}return t>0?u.Emphasized:u.Default};this.updateBookmarkCount=function(n){if(!f()){return this.updateBookmarkCount(n)}return t.updateBookmarkCount(n,s)};this.shouldPinButtonBeVisible=function(){return new Promise(function(t){var n=e.last("/core/shell/enablePersonalization");if(!f()||n){t(n)}else if(!e.last("/core/spaces/myHome/enabled")){t(false)}else{i.getServiceAsync("UserInfo").then(function(n){t(n.getUser().getShowMyHome())})}})}}return{getInstance:function(){if(!s){s=new f}return s},_getConstructor:function(){return f},destroy:function(){if(s){s.exit()}s=null}}});
sap.ui.require.preload({
	"sap/ushell/components/appfinder/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.components.appfinder","applicationVersion":{"version":"1.136.1"},"i18n":{"bundleUrl":"../../renderer/resources/resources.properties","fallbackLocale":"en"},"ach":"CA-FLP-FE-COR","type":"component","title":"{{Component.AppFinder.Title}}","resources":"resources.json"},"sap.ui":{"fullWidth":true,"hideLightBackground":true,"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.components.appfinder","rootView":{"viewName":"module:sap/ushell/components/appfinder/AppFinderView","async":true},"dependencies":{"minUI5Version":"1.30","libs":{"sap.ui.core":{},"sap.m":{}}},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlId":"catalogViewMasterDetail","controlAggregation":"detailPages","clearAggregation":false,"async":true},"routes":[{"name":"userMenu","pattern":"userMenu/:filters:"},{"name":"sapMenu","pattern":"sapMenu/:filters:"},{"name":"catalog","pattern":["catalog/:filters:","",":filters:"]}]},"services":{"ShellUIService":{"factoryName":"sap.ushell.ui5service.ShellUIService"}},"contentDensities":{"compact":true,"cozy":true}}}'
});
//# sourceMappingURL=Component-preload.js.map
