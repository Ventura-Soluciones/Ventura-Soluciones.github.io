// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/m/library","sap/ui/core/Element","sap/ushell/Config","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/resources"],function(t,n,e,i,o,r){"use strict";var u=t.ButtonType;var s;function a(){return n.getElementById("catalogView")}function l(){return n.getElementById("appFinderView")}function f(){var t,n,s=null;function f(){return e.last("/core/spaces/enabled")}function c(){if(t){return Promise.resolve(t)}n=n||new Promise(function(n){sap.ui.require(["sap/ushell/components/visualizationOrganizer/Component"],function(e){t=new e;n(t)})});return n}function h(){var n=a();if(!n){return}n.setBusy(true);return c().then(function(t){return t.requestData()}).then(function(){if(this.oModel){this.oModel.updateBindings(true)}var n=l();if(n&&t.getPersonalizablePages().length===1){var e=r.i18n.getText("VisualizationOrganizer.PageContextTitle",[t.getPersonalizablePages()[0].title]);n.getController()._updateShellHeader(e)}}.bind(this)).finally(function(){n.setBusy(false)})}if(f()){this.oDoable=o.on("trackHashChange").do(function(t){if(f()&&t==="Shell-appFinder"){h.call(this)}}.bind(this))}this.setModel=function(t){this.oModel=t};this.loadAndUpdate=function(){if(!f()){return Promise.resolve()}return h.call(this)};this.formatPinButtonTooltip=function(n,e,i){if(!f()){return this.formatPinButtonTooltip(n,e)}return t.formatPinButtonTooltip(i,s)};this.formatPinButtonSelectState=function(){if(!f()){return this.formatPinButtonSelectState.apply(this,arguments)}return false};this.formatPinButtonIcon=function(n){if(!f()){return"sap-icon://pushpin-off"}return t.formatPinButtonIcon(n,!!s)};this.formatPinButtonType=function(n){if(!f()){return u.Default}return t.formatPinButtonType(n,!!s)};this.onTilePinButtonClick=function(n){if(!f()){this.getController().onTilePinButtonClick(n);return}t.onTilePinButtonClick(n,s)};this.getNavigationContext=function(){if(!f()){return this.getGroupContext.apply(this,arguments)}if(s){return{pageID:encodeURIComponent(s.pageID),sectionID:encodeURIComponent(s.sectionID)}}return null};this.getNavigationContextAsText=function(){if(!f()){return this.getGroupNavigationContext.apply(this,arguments)}if(s){return JSON.stringify({pageID:encodeURIComponent(s.pageID),sectionID:encodeURIComponent(s.sectionID)})}return null};this.updateModelWithContext=function(n){if(!f()){this._updateModelWithGroupContext.apply(this,arguments);return Promise.resolve()}return c().then(function(){return t.loadSectionContext(n)}).then(function(t){s=t;this.oView.getModel().updateBindings(true);if(s){var n=s.sectionTitle?r.i18n.getText("VisualizationOrganizer.AppFinderSectionContextTitle",[s.sectionTitle]):r.i18n.getText("VisualizationOrganizer.AppFinderSectionContextTitle",[s.pageTitle]);this.oView.oPage.setTitle(n);if(this._updateShellHeader){return new Promise(function(t){setTimeout(function(){this._updateShellHeader(n);t()}.bind(this),0)}.bind(this))}}return Promise.resolve()}.bind(this))};this._loadVisualizationOrganizer=c;this._setSectionContext=function(t){s=t};this.exit=function(){if(this.oDoable){this.oDoable.off();this.oDoable=null}};this.onHierarchyAppsPinButtonClick=function(n){if(!f()){this.showGroupListPopover(n);return Promise.resolve(false)}return t.onHierarchyAppsPinButtonClick(n,s)};this.formatBookmarkPinButtonTooltip=function(n,e,i,o,r){if(!f()){return this.formatPinButtonTooltip(n,e,i,o,r)}return t.formatBookmarkPinButtonTooltip(e,s)};this.formatBookmarkPinButtonSelectState=function(t){if(!f()){return!!t}return false};this.formatBookmarkPinButtonIcon=function(t){if(!f()){return"sap-icon://pushpin-off"}return t>0?"sap-icon://accept":"sap-icon://add"};this.formatBookmarkPinButtonType=function(t){if(!f()){return u.Default}return t>0?u.Emphasized:u.Default};this.updateBookmarkCount=function(n){if(!f()){return this.updateBookmarkCount(n)}return t.updateBookmarkCount(n,s)};this.shouldPinButtonBeVisible=function(){return new Promise(function(t){var n=e.last("/core/shell/enablePersonalization");if(!f()||n){t(n)}else if(!e.last("/core/spaces/myHome/enabled")){t(false)}else{i.getServiceAsync("UserInfo").then(function(n){t(n.getUser().getShowMyHome())})}})}}return{getInstance:function(){if(!s){s=new f}return s},_getConstructor:function(){return f},destroy:function(){if(s){s.exit()}s=null}}});
//# sourceMappingURL=VisualizationOrganizerHelper.js.map