// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/base/Log","sap/ushell/utils/UrlParsing","sap/ushell/EventHub","sap/ushell/Container"],function(e,t,i,r,o,n,a,s,p,l){"use strict";var c=n.GenericTileScope;var d=n.GenericTileMode;var f=e.DisplayFormat;var g=e.AppType;return t.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{_aDoables:[],_getConfiguration:function(){var e=this.getView().getViewData();e.properties.configSizeBehavior=i.last("/core/home/sizeBehavior");e.properties.wrappingType=i.last("/core/home/wrappingType");return e},onInit:function(){var e=this.getView();var t=new o;t.setData(this._getConfiguration());e.setModel(t);this._aDoables.push(i.on("/core/home/sizeBehavior").do(function(e){t.setProperty("/properties/configSizeBehavior",e)}));var r=this.getView().getViewData();var n=r.properties;n.mode=n.mode||(n.icon?"ContentMode":"HeaderMode");if(n.displayFormat===f.Compact&&n.title&&n.targetURL){t.setProperty("/properties/mode",d.LineMode)}switch(n.displayFormat){case f.Flat:t.setProperty("/properties/frameType","OneByHalf");break;case f.FlatWide:t.setProperty("/properties/frameType","TwoByHalf");break;case f.StandardWide:t.setProperty("/properties/frameType","TwoByOne");break;default:{t.setProperty("/properties/frameType","OneByOne")}}const a=i.last("/core/contentProviders/providerInfo/enabled");const s=i.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");t.setProperty("/properties/showContentProviderInfoInTooltip",a);t.setProperty("/properties/showContentProviderInfoOnVisualizations",a&&s);if(a){this._aDoables.push(i.on("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations").do(function(e){t.setProperty("/properties/showContentProviderInfoOnVisualizations",e)}))}},onExit:function(){this._aDoables.forEach(function(e){e.off()});this._aDoables=[]},editModeHandler:function(e){var t=e?c.ActionMore:c.Display;this.getView().getModel().setProperty("/properties/scope",t)},sizeBehaviorHandler:function(e){this.getView().getModel().setProperty("/properties/customSizeBehavior",e)},onPress:function(e){var t=this.getView().getViewData().properties;if(e.getSource().getScope&&e.getSource().getScope()===c.Display){var o=this._createTargetUrl();if(!o){return}p.emit("UITracer.trace",{reason:"LaunchApp",source:"Tile",data:{targetUrl:o}});if(o[0]==="#"){hasher.setHash(o)}else{var n=i.last("/core/shell/enableRecentActivity")&&i.last("/core/shell/enableRecentActivityLogging");if(n){var a={title:t.title,appType:g.URL,url:t.targetURL,appId:t.targetURL};l.getRendererInternal("fiori2").logRecentActivity(a)}r.openURL(o,"_blank")}}},updatePropertiesHandler:function(e){var t=this.getView().getContent()[0];var i=t.getTileContent()[0];if(typeof e.title!=="undefined"){t.setHeader(e.title)}if(typeof e.subtitle!=="undefined"){t.setSubheader(e.subtitle)}if(typeof e.icon!=="undefined"){i.getContent().setSrc(e.icon)}if(typeof e.info!=="undefined"){i.setFooter(e.info)}},_createTargetUrl:function(){var e=this.getView().getViewData().properties.targetURL;var t=this.getView().getViewData().configuration["sap-system"];var i;if(e&&t){if(s.isIntentUrl(e)){i=s.parseShellHash(e);if(!i.params){i.params={}}i.params["sap-system"]=t;e="#"+s.constructShellHash(i)}else{e+=(e.indexOf("?")<0?"?":"&")+"sap-system="+t}}return e},_getLeanUrl:function(){return r.getLeanURL(this._createTargetUrl())},_getTileContent:function(e,t){var i=t.getPath().split("/");i.pop();var r=t.getProperty(i.join("/"));if(r!==this.oLastBindingObject||this.oTileContent&&this.oTileContent.bIsDestroyed){this.oLastBindingObject=r;this.oTileContent=this.getView().byId(r.icon?"imageTileContent":"standardTileContent").clone()}return this.oTileContent},_getCurrentProperties:function(){var e=this.getView().getContent()[0];var t=e.getTileContent()[0];var r=i.last("/core/home/sizeBehavior");return{title:e.getHeader(),subtitle:e.getSubheader(),info:t.getFooter(),icon:t.getContent().getSrc(),mode:e.getMode(),configSizeBehavior:r}}})},true);
//# sourceMappingURL=StaticTile.controller.js.map