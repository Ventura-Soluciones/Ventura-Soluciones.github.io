// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/resources","sap/ushell/Config","sap/ushell/Container"],function(e,n,t){"use strict";var i=function(){};i.prototype.getPageAndSpaceId=function(e){return t.getServiceAsync("URLParsing").then(function(n){if(e===undefined){e=window.hasher.getHash()}var t=n.parseShellHash(e)||{};var i={semanticObject:t.semanticObject||"",action:t.action||""};var a=t.params||{};var r=a.pageId||[];var c=a.spaceId||[];return this._parsePageAndSpaceId(r,c,i)}.bind(this))};i.prototype._parsePageAndSpaceId=function(n,t,i){return new Promise(function(a,r){this.getUserMyHomeEnablement().then(function(){if(n.length<1&&t.length<1){var c=i.semanticObject==="Shell"&&i.action==="home";var g=i.semanticObject===""&&i.action==="";if(c||g){this._getUserDefaultSpaceAndPage().then(function(e){a(e)}).catch(function(e){r(e)});return}r(e.i18n.getText("PageRuntime.NoPageIdAndSpaceIdProvided"))}if(n.length===1&&t.length===0){r(e.i18n.getText("PageRuntime.OnlyPageIdProvided"))}if(n.length===0&&t.length===1){r(e.i18n.getText("PageRuntime.OnlySpaceIdProvided"))}if(n.length>1||t.length>1){r(e.i18n.getText("PageRuntime.MultiplePageOrSpaceIdProvided"))}if(n[0]===""){r(e.i18n.getText("PageRuntime.InvalidPageId"))}if(t[0]===""){r(e.i18n.getText("PageRuntime.InvalidSpaceId"))}a({pageId:n[0],spaceId:t[0]})}.bind(this))}.bind(this))};i.prototype.getUserMyHomeEnablement=function(){return new Promise(function(e,i){var a=t.getUser().getShowMyHome();n.emit("/core/spaces/myHome/userEnabled",a);e(a)})};i.prototype._getUserDefaultSpaceAndPage=function(){return new Promise(function(n,i){Promise.all([t.getServiceAsync("Menu"),this.getUserMyHomeEnablement()]).then(function(t){var a=t[0];a.getDefaultSpace().then(function(t){if(!t){i(e.i18n.getText("PageRuntime.NoAssignedSpace"));return}var a=t&&t.children&&t.children[0];if(!a){i(e.i18n.getText("PageRuntime.NoAssignedPage"));return}n({spaceId:t.id,pageId:a.id})})}).catch(function(e){i(e)})}.bind(this))};return new i});
//# sourceMappingURL=PagesAndSpaceId.js.map