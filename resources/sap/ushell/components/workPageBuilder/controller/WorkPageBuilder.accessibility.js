//Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/f/library"],function(t){"use strict";var i=t.NavigationDirection;var e=function(){this._oFocusHistory={oLastGrid:null,sLastDirection:null,iLastRow:null,iTargetRow:null};this._bInitialItemFocused=false};e.prototype._handleBorderReached=function(t,i){var e=this._getCurrentFocusElement();var r=t.getSource().getAggregation("_gridContainer");var o=t.getParameter("direction");var n=t.getParameter("row");var s=t.getParameter("column");if(this._isOppositeDirection(o)&&this._oFocusHistory.oLastGrid&&!this._oFocusHistory.oLastGrid.isDestroyed()&&n===this._oFocusHistory.iTargetRow){this._oFocusHistory.oLastGrid.focusItemByDirection(o,this._oFocusHistory.iLastRow,s);this._saveFocusHistory(r,o,n)}else{var a=this._findNextGrid(e,i,o);if(a){var u=this._findSuitableRowInGrid(a,e,o);a.focusItemByDirection(o,u,s);this._saveFocusHistory(r,o,n,u)}}};e.prototype._isOppositeDirection=function(t){switch(this._oFocusHistory.sLastDirection){case i.Right:return t===i.Left;case i.Left:return t===i.Right;case i.Up:return t===i.Down;case i.Down:return t===i.Up;default:return false}};e.prototype._findNextGrid=function(t,i,e){var r=this._getAllGrids(i);var o=[];r.forEach(function(i){if(i===t){return}var r=this._getDistanceToElementInDirection(t,i.getDomRef(),e);if(r){o.push({oGrid:i,iDistance:r})}}.bind(this));var n=o.sort(function(t,i){return t.iDistance-i.iDistance});return n[0]?n[0].oGrid:null};e.prototype._getAllGrids=function(t){var i=t.getRows();var e=[];i.forEach(function(t){var i=t.getColumns();i.forEach(function(t){var i=t.getCells();i.forEach(function(t){var i=t.getAggregation("_gridContainer");if(i){e.push(i)}})})});return e};e.prototype._findSuitableRowInGrid=function(t,i,e){var r=t.getNavigationMatrix();var o;var n;o=r.findIndex(function(t){return t.find(function(t){if(t===false||t===n){return false}n=t;if(this._getDistanceToElementInDirection(i,t,e)!==null){return true}}.bind(this))}.bind(this));return o>=0?o:0};e.prototype._getDistanceToElementInDirection=function(t,e,r){var o=e.getBoundingClientRect();var n=t.getBoundingClientRect();switch(r){case i.Right:if(n.right<o.left&&n.bottom>o.top&&n.top<o.bottom){return o.left-n.right}break;case i.Left:if(n.left>o.right&&n.bottom>o.top&&n.top<o.bottom){return n.left-o.right}break;case i.Down:if(n.bottom<o.top&&n.left<o.right&&n.right>o.left){return o.top-n.bottom}break;case i.Up:if(n.top>o.bottom&&n.left<o.right&&n.right>o.left){return n.top-o.bottom}break;default:break}return null};e.prototype._saveFocusHistory=function(t,i,e,r){this._oFocusHistory.oLastGrid=t;this._oFocusHistory.sLastDirection=i;this._oFocusHistory.iLastRow=e;this._oFocusHistory.iTargetRow=r};e.prototype._getCurrentFocusElement=function(){return document.activeElement};e.prototype.focusFirstItem=function(t){var i=this._getAllGrids(t);var e=i.find(function(t){return t.getItems().length>0});if(e&&!this._bInitialItemFocused){this._bInitialItemFocused=true;var r=e.getItems()[0];var o=r.getDomRef();if(o){var n=o.closest(".sapFGridContainerItemWrapper");if(n){n.focus({preventScroll:true})}}}};return e});
//# sourceMappingURL=WorkPageBuilder.accessibility.js.map