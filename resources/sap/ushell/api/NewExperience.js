// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/base/EventProvider","sap/ui/model/json/JSONModel","sap/ushell/api/NewExperience/CustomOverflowListItem","sap/ushell/Config"],function(e,t,i,r){"use strict";const l={Header:"Header",Overflow:"Overflow"};class s{#e=new e;#t=null;#i=null;#r=null;#l=null;constructor(){this.#s();this.#i=this.#o()}reset(){this.#r.destroy();this.#e.destroy();this.#i.destroy();this.#e=new e;this.#t=null;this.#s();this.#i=this.#o()}#s(){this.#r=new t({active:false,isVisible:false,currentState:l.Header,shellHeaderControlId:null,showInShellHeader:false})}#o(){return new i({visible:{parts:["/isVisible","/currentState"],formatter:(e,t)=>e&&t===l.Overflow},contentId:"{/shellHeaderControlId}"}).addStyleClass("newExperienceSwitchListItem").setModel(this.#r).data("help-id","ushell-new-experience-switch",true)}getModel(){return this.#r}getOverflowItemId(){return this.#i.getId()}isActive(){return this.#r.getProperty("/active")}getShellHeaderControl(){return this.#t}getOverflowItemControl(){return this.#i}showInOverflow(){this.#r.setProperty("/currentState",l.Overflow);this.#n()}showInShellHeader(){this.#r.setProperty("/currentState",l.Header);this.#n()}attachActiveChanged(...e){this.#e.attachEvent("activeChanged",...e)}detachActiveChanged(...e){this.#e.detachEvent("activeChanged",...e)}#n(){const e=this.isActive();const t=this.#r.getProperty("/currentState")===l.Header;if(e){this.#r.setProperty("/showInShellHeader",t)}else{this.#r.setProperty("/showInShellHeader",false)}}setSwitchControl(e){const t=this.isActive();this.#t=e;this.#r.setProperty("/shellHeaderControlId",e?.getId?.());this.#r.setProperty("/active",!!e);this.#r.setProperty("/isVisible",!!e);if(t!==this.isActive()){this.#e.fireEvent("activeChanged",{active:this.isActive()})}if(r.last("/core/shellBar/enabled")){if(e){if(!e.data("help-id")){e.data("help-id","ushell-new-experience-switch",true)}const t=sap.ui.require("sap/ushell/Container");t.getServiceAsync("FrameBoundExtension").then(async t=>{this.#l=await t.createHeaderItem({id:e.getId()});this.#l.showForAllApps();this.#l.showOnHome()})}else{this.#l?.hideForAllApps();this.#l?.hideOnHome()}}this.#n()}setSwitchVisibility(e){this.#r.setProperty("/isVisible",e)}}const o=new s;return o});
//# sourceMappingURL=NewExperience.js.map