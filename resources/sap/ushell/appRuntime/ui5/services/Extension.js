// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/isPlainObject","sap/ushell/appRuntime/ui5/services/Extension/Item","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/appRuntime/ui5/AppCommunicationMgr"],function(e,t,s,o){"use strict";function n(){this._oItemMap={};o.registerCommHandlers({"sap.ushell.services.Extension":{oServiceCalls:{handleControlEvent:{executeServiceCallFn:async e=>{const{itemId:t,eventName:s,eventParameters:o}=e.oMessageData.body;await this._handleControlEvent(t,s,o)}}}}})}n.prototype._extractControlProperties=function(t){const s={primitive:{},complex:{},events:{}};Object.keys(t).forEach(o=>{const n=t[o];if(typeof n==="function"){s.events[o]=n}else if(typeof n==="object"){if(e(n)){s.primitive[o]=n}else{s.complex[o]=n}}else{s.primitive[o]=n}});return s};n.prototype.createHeaderItem=async function(e,o={}){const n=this._extractControlProperties(e);if(Object.keys(n.complex).length>0){throw new Error("Complex properties (aggregations, controls, non plain objects) are not allowed for header items!")}const{itemId:r}=await s.postMessageToFLP("sap.ushell.services.Extension.createHeaderItem",{controlProperties:n.primitive,events:Object.keys(n.events),parameters:o});const i=new t(r,n.events);this._oItemMap[r]=i;return i};n.prototype.createUserAction=async function(e,o={}){const n=this._extractControlProperties(e);if(Object.keys(n.complex).length>0){throw new Error("Complex properties (aggregations, controls, non plain objects) are not allowed for user actions!")}const{itemId:r}=await s.postMessageToFLP("sap.ushell.services.Extension.createUserAction",{controlProperties:n.primitive,events:Object.keys(n.events),parameters:o});const i=new t(r,n.events);this._oItemMap[r]=i;return i};n.prototype._handleControlEvent=function(e,t){const s=this._oItemMap[e];if(s){s.handleEvent(t)}};n.prototype.setSecondTitle=function(e){return s.postMessageToFLP("sap.ushell.services.Extension.setSecondTitle",{title:e})};n.hasNoAdapter=true;return n});
//# sourceMappingURL=Extension.js.map