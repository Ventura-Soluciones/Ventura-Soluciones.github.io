// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/services/CrossApplicationNavigation","sap/ushell/services/appstate/AppState","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/appRuntime/ui5/services/Container","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/appRuntime/ui5/AppRuntimeContext","sap/base/util/deepClone","sap/ushell/utils/UrlParsing"],function(e,s,jQuery,t,i,n,a,r,o){"use strict";function p(p,l,c){e.call(this,p,l,c);this.backToPreviousApp=function(){if(a.checkDataLossAndContinue()){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.backToPreviousApp")}};this.expandCompactHashLocal=this.expandCompactHash;this.expandCompactHash=function(e){if(a.getIsScube()){return this.expandCompactHashLocal(e)}return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.expandCompactHash",{sHashFragment:e})};this.getDistinctSemanticObjectsLocal=this.getDistinctSemanticObjects;this.getDistinctSemanticObjects=function(){if(a.getIsScube()){return this.getDistinctSemanticObjectsLocal()}return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getDistinctSemanticObjects")};this.getLinksLocal=this.getDistinctSemanticObjects;this.getLinks=function(e){var s=new jQuery.Deferred;function t(e){if(Array.isArray(e)){e.forEach(function(e){if(e[0]){delete e[0].ui5Component}})}else{delete e.ui5Component}}if(a.getIsScube()){this.getLinksLocal(e).then(function(i){t(e);n.postMessageToFLP("sap.ushell.services.CrossApplicationNavigation.getLinks",e).then(function(e){if(i.length===0){s.resolve(e)}else{e=e.concat(i);s.resolve(e)}})})}else{t(e);n.postMessageToFLP("sap.ushell.services.CrossApplicationNavigation.getLinks",e).then(s.resolve,s.reject)}return s.promise()};this.getPrimaryIntent=function(e,s){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getPrimaryIntent",{sSemanticObject:e,mParameters:s})};this.getSemanticObjectLinks=function(e,s,t,i,a,r){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getSemanticObjectLinks",{sSemanticObject:e,mParameters:s,bIgnoreFormFactor:t,sAppStateKey:a,bCompactIntents:r})};this.historyBack=function(e){if(a.checkDataLossAndContinue()){n.postMessageToFLP("sap.ushell.services.CrossApplicationNavigation.historyBack",{iSteps:e})}};this.isIntentSupported=function(e,s){if(a.getIsScube()){var t=new jQuery.Deferred;i.getServiceAsync("NavTargetResolutionInternal").then(function(i){i.isIntentSupported(e,s).done(t.resolve,t.reject)});return t.promise()}return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isIntentSupported",{aIntents:e})};this.isNavigationSupported=function(e,s,t){var o=function(e){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isNavigationSupported",{aIntents:e})};if(t===true){return o(e)}if(a.getIsScube()){var p=new jQuery.Deferred,l;l=e.map(function(e){if(typeof e==="object"){var s=e;if(e.params&&e.params.hasOwnProperty("sap-app-origin")){s=r(e);delete s.params["sap-app-origin"]}return s}return e});i.getServiceAsync("NavTargetResolutionInternal").then(function(e){e.isNavigationSupported(l,s).done(p.resolve,p.reject)});return p.promise()}return o(e)};this.toExternal=function(e,s){if(a.getIsScube()){if(e.target&&e.target.shellHash){var t=o.parseShellHash(e.target.shellHash);if(t.params){delete t.params["sap-app-origin"];e.target.shellHash=o.constructShellHash(t)}}else if(e.params){delete e.params["sap-app-origin"]}i.getServiceAsync("ShellNavigationInternal").then(function(t){t.toExternal(e,s)})}else if(a.checkDataLossAndContinue()){n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.toExternal",{oArgs:e})}return(new jQuery.Deferred).resolve().promise()};this.getAppState=function(e,t){var a=new jQuery.Deferred;n.postMessageToFLP("sap.ushell.services.CrossApplicationNavigation.getAppState",{sAppStateKey:t}).then(function(e){i.getServiceAsync("AppState").then(function(t){var i=new s(t,e._sKey,e._bModifiable,e._sData,e._sAppName,e._sACHComponent,e._bTransient);a.resolve(i)})});return a.promise()};this.resolveIntentLocal=this.resolveIntent;this.resolveIntent=function(e){if(a.getIsScube()){return this.resolveIntentLocal(e)}return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.resolveIntent",{sHashFragment:e})};this.hrefForExternalAsync=function(e){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.hrefForExternal",{oArgs:e})};this.hrefForAppSpecificHashAsync=function(e){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.hrefForAppSpecificHash",{sAppHash:e})};this.isInitialNavigation=function(){t.error("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.isInitialNavigation'. Please use 'isInitialNavigationAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");return false};this.isInitialNavigationAsync=function(){return n.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isInitialNavigation",{})}}p.prototype=e.prototype;p.hasNoAdapter=e.hasNoAdapter;return p},true);
//# sourceMappingURL=CrossApplicationNavigation.js.map