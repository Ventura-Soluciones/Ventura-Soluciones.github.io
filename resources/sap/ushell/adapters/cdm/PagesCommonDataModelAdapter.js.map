{"version":3,"file":"PagesCommonDataModelAdapter.js","names":["sap","ui","define","Log","deepExtend","cdmSiteUtils","extend","Version","jQuery","Config","Container","PagesCommonDataModelAdapter","this","_oCDMPagesRequests","_oUnstableVisualizations","_sComponent","oSitePromise","Promise","resolve","reject","fnSiteResolve","fnSiteReject","bind","prototype","getSite","oDeferred","Deferred","getServiceAsync","then","oNavigationDataProvider","getNavigationData","oNavigationData","oNavigationDataHashMap","aInbounds","inbounds","i","length","sInboundPermanentKey","permanentKey","id","oSite","_version","site","catalogs","groups","visualizations","applications","getApplications","vizTypes","systemAliases","pages","catch","error","promise","getPage","pageId","sErrorMessage","fatal","all","aService","oPagePersistenceService","oNavigationDataProviderService","aResult","oPagePersistenceData","_addVisualizationsToSite","_addVizTypesToSite","_addPageToSite","page","_storeUnstableVisualizations","unstableVisualizations","vError","sPageId","oUnstableVisualizations","oData","oVizTypesToAdd","Object","keys","forEach","sVizTypeId","getVizTypes","oVisualizations","bCheckExistence","oVisualizationsToAdd","sVizId","getVisualizations","navigationData","oPage","identification","title","payload","layout","sectionOrder","sections","map","section","oSection","oPageSection","j","vizOrder","viz","oViz","bVisualizationMissing","k","vizId","aVizOrder","splice","indexOf","displayFormatHint","getPages","aPageIds","Array","isArray","aPageIdsToLoad","push","aServices","aPages","oAllLoadedPages","oRequestedPages","getPersonalization","CDMVersion","async","oPersonalizationService","oPersId","oCDMSiteVersion","container","item","inRange","oScope","validity","keyCategory","KeyCategory","GENERATED_KEY","writeFrequency","WriteFrequency","HIGH","clientStorageAllowed","oPersonalizer","getPersonalizer","getPersData","oPersonalizationContainer","oError","setPersonalization","personalizationData","version","setPersData","oVisualizationDataProvider","getVisualizationData","aResults","oVisualizationData","getVizType","sVizType","oVizType","startsWith","loadVizType","oLoadedVizType","oVizTypes","getCachedVisualizations","getCachedVizTypes","migratePersonalizedPages","aPagesToSave","sSectionId","sVizRefId","oVizRef","oUnstableVisualization","includes"],"sources":["PagesCommonDataModelAdapter-dbg.js"],"mappings":"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","ignoreList":[]}