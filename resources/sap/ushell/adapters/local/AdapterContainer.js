// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/ushell/utils"],function(jQuery,t,e){"use strict";var n;function s(){return new t(t.Type.local,"com.sap.ushell.adapters.sandbox.Personalization")}function i(t){try{return JSON.parse(t)}catch(t){return undefined}}function o(t){return JSON.stringify(t)}function r(t){if(t===undefined){return undefined}try{return JSON.parse(JSON.stringify(t))}catch(t){return undefined}}var a=function(t,s,i){n=i;this._sContainerKey=t;this._sStorageType=s;this._oItemMap=new e.Map};a.prototype.constants={storage:{MEMORY:"MEMORY",LOCAL_STORAGE:"LOCAL_STORAGE"}};a.prototype.load=function(){var t=new jQuery.Deferred;switch(this._sStorageType){case this.constants.storage.LOCAL_STORAGE:var e=s();setTimeout(function(){var n=e.get(this._sContainerKey);this._oItemMap.entries=i(n)||{};t.resolve(this)}.bind(this),0);break;case this.constants.storage.MEMORY:setTimeout(function(){this._oItemMap.entries=r(n[this._sContainerKey])||{};t.resolve(this)}.bind(this),0);break;default:setTimeout(function(){t.reject("unknown storage type")},0)}return t.promise()};a.prototype.save=function(){var t=new jQuery.Deferred;switch(this._sStorageType){case this.constants.storage.LOCAL_STORAGE:var e=s();setTimeout(function(){var n=o(this._oItemMap.entries);e.put(this._sContainerKey,n);t.resolve()}.bind(this),0);break;case this.constants.storage.MEMORY:setTimeout(function(){n[this._sContainerKey]=r(this._oItemMap.entries);t.resolve()}.bind(this),0);break;default:setTimeout(function(){t.reject("unknown storage type")},0)}return t.promise()};a.prototype.del=function(){var t=new jQuery.Deferred;switch(this._sStorageType){case this.constants.storage.LOCAL_STORAGE:var e=s();setTimeout(function(){e.remove(this._sContainerKey);this._oItemMap.entries={};t.resolve()}.bind(this),0);break;case this.constants.storage.MEMORY:setTimeout(function(){if(n&&n[this._sContainerKey]){delete n[this._sContainerKey]}this._oItemMap.entries={};t.resolve()}.bind(this),0);break;default:setTimeout(function(){t.reject("unknown storage type")},0)}return t.promise()};a.prototype.getItemKeys=function(){return this._oItemMap.keys()};a.prototype.containsItem=function(t){return this._oItemMap.containsKey(t)};a.prototype.getItemValue=function(t){return this._oItemMap.get(t)};a.prototype.setItemValue=function(t,e){this._oItemMap.put(t,e)};a.prototype.delItem=function(t){this._oItemMap.remove(t)};return a},false);
//# sourceMappingURL=AdapterContainer.js.map