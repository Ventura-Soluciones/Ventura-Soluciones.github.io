// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/i18n/Formatting","sap/base/i18n/Localization","sap/base/Log","sap/base/util/deepExtend","sap/ui/core/Element","sap/ui/core/UIComponent","sap/ui/thirdparty/hasher","sap/ushell/appIntegration/PostMessageManager","sap/ushell/appIntegration/PostMessageManager/ExtensionItems","sap/ushell/Container","sap/ushell/EventHub","sap/ushell/library","sap/ushell/services/Navigation/compatibility","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(e,t,s,a,n,r,o,i,c,l,p,u,g,d,v){"use strict";const y=u.ContentNodeType;let h;const m=new r;const A={"sap.ushell.services.Navigation.getHref":{async handler(e,t){const{oTarget:s}=e;const a=await l.getServiceAsync("Navigation");return a.getHref(s)}},"sap.ushell.services.Navigation.backToPreviousApp":{async handler(e,t){const s=await l.getServiceAsync("Navigation");return s.backToPreviousApp()}},"sap.ushell.services.Navigation.historyBack":{async handler(e,t){const{iSteps:s}=e;const a=await l.getServiceAsync("Navigation");return a.historyBack(s)}},"sap.ushell.services.Navigation.isInitialNavigation":{async handler(e,t){const s=await l.getServiceAsync("Navigation");return s.isInitialNavigation()}},"sap.ushell.services.Navigation.navigate":{async handler(e,t){const{oTarget:s}=e;const n=await l.getServiceAsync("Navigation");const r=a({},s);d.storeSapSystemToLocalStorage(r);return n.navigate(r)}},"sap.ushell.services.Navigation.getPrimaryIntent":{async handler(e,t){const{sSemanticObject:s,oLinkFilter:a}=e;const n=await l.getServiceAsync("Navigation");return n.getPrimaryIntent(s,a)}},"sap.ushell.services.Navigation.getLinks":{async handler(e,t){const s=e;const a=await l.getServiceAsync("Navigation");return a.getLinks(s)}},"sap.ushell.services.Navigation.getSemanticObjects":{async handler(e,t){const s=await l.getServiceAsync("Navigation");return s.getSemanticObjects()}},"sap.ushell.services.Navigation.isNavigationSupported":{async handler(e,t){const{aTargets:s}=e;const a=await l.getServiceAsync("Navigation");return a.isNavigationSupported(s)}},"sap.ushell.services.Navigation.getAppState":{async handler(e,t){const{sAppStateKey:s}=e;const a=await l.getServiceAsync("Navigation");const n=await a.getAppState(m,s);delete n._oServiceInstance;return n}},"sap.ushell.services.Navigation.resolveIntent":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("Navigation");return a.resolveIntent(s)}},"sap.ushell.services.Navigation.isUrlSupported":{async handler(e,t){const{sUrl:s}=e;const a=await l.getServiceAsync("Navigation");return a.isUrlSupported(s)}},"sap.ushell.services.CrossApplicationNavigation.hrefForExternal":{async handler(e,t){const{oArgs:s}=e;const a=await l.getServiceAsync("Navigation");return a.getHref(s)}},"sap.ushell.services.CrossApplicationNavigation.getSemanticObjectLinks":{async handler(e,t){const{sSemanticObject:s,mParameters:a,bIgnoreFormFactors:n,bCompactIntents:r}=e;return g.getSemanticObjectLinks(s,a,n,undefined,undefined,r)}},"sap.ushell.services.CrossApplicationNavigation.isIntentSupported":{async handler(e,t){const{aIntents:s}=e;return g.isIntentSupported(s)}},"sap.ushell.services.CrossApplicationNavigation.isNavigationSupported":{async handler(e,t){const{aIntents:s}=e;const a=await l.getServiceAsync("Navigation");return a.isNavigationSupported(s)}},"sap.ushell.services.CrossApplicationNavigation.backToPreviousApp":{async handler(e,t){const s=await l.getServiceAsync("Navigation");return s.backToPreviousApp()}},"sap.ushell.services.CrossApplicationNavigation.historyBack":{async handler(e,t){const{iSteps:s}=e;const a=await l.getServiceAsync("Navigation");return a.historyBack(s)}},"sap.ushell.services.CrossApplicationNavigation.getAppStateData":{async handler(e,t){const{sAppStateKey:s}=e;return g.getAppStateData(s)}},"sap.ushell.services.CrossApplicationNavigation.toExternal":{async handler(e,t){const{oArgs:s}=e;const n=await l.getServiceAsync("Navigation");const r=a({},s);d.storeSapSystemToLocalStorage(r);return n.navigate(r)}},"sap.ushell.services.CrossApplicationNavigation.registerBeforeAppCloseEvent":{async handler(e,t,s){const a=e;t.setBeforeAppCloseEvent({enabled:true,params:a})},options:{provideApplicationContext:true,allowInactive:true}},"sap.ushell.services.CrossApplicationNavigation.expandCompactHash":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.expandCompactHash(s);return d.promisify(n)}},"sap.ushell.services.CrossApplicationNavigation.getDistinctSemanticObjects":{async handler(e,t){const s=await l.getServiceAsync("Navigation");return s.getSemanticObjects()}},"sap.ushell.services.CrossApplicationNavigation.getLinks":{async handler(e,t){const s=e;return g.getLinks(s)}},"sap.ushell.services.CrossApplicationNavigation.getPrimaryIntent":{async handler(e,t){const{sSemanticObject:s,mParameters:a}=e;const n=await l.getServiceAsync("Navigation");return n.getPrimaryIntent(s,a)}},"sap.ushell.services.CrossApplicationNavigation.hrefForAppSpecificHash":{async handler(e,t){const{sAppHash:s}=e;const a=await l.getServiceAsync("Navigation");return a.getHref(s)}},"sap.ushell.services.CrossApplicationNavigation.isInitialNavigation":{async handler(e,t){const s=await l.getServiceAsync("Navigation");return s.isInitialNavigation()}},"sap.ushell.services.CrossApplicationNavigation.getAppState":{async handler(e,t){const{sAppStateKey:s}=e;const a=await l.getServiceAsync("Navigation");const n=await a.getAppState(m,s);delete n._oServiceInstance;return n}},"sap.ushell.services.CrossApplicationNavigation.setInnerAppRoute":{async handler(e,t){const{appSpecificRoute:s,writeHistory:a}=e;const n=v.parseShellHash(o.getHash());if(n.appSpecificRoute===s){return}n.appSpecificRoute=s;const r=`#${v.constructShellHash(n)}`;o.disableBlueBoxHashChangeTrigger=true;if(a===true||a==="true"){o.setHash(r)}else{o.replaceHash(r)}o.disableBlueBoxHashChangeTrigger=false}},"sap.ushell.services.CrossApplicationNavigation.setInnerAppStateData":{handler:e=>S(e)},"sap.ushell.services.CrossApplicationNavigation.resolveIntent":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("Navigation");return a.resolveIntent(s)}},"sap.ushell.services.AppState.getAppState":{async handler(e,t){const{sKey:s}=e;const a=await l.getServiceAsync("AppState");const n=a.getAppState(s);const r=await d.promisify(n);delete r._oServiceInstance;return r}},"sap.ushell.services.AppState._saveAppState":{async handler(e,t){const{sKey:s,sData:a,sAppName:n,sComponent:r,bTransient:o,iPersistencyMethod:i,oPersistencySettings:c}=e;const p=await l.getServiceAsync("AppState");const u=p._saveAppState(s,a,n,r,o,i,c);return d.promisify(u)}},"sap.ushell.services.AppState._loadAppState":{async handler(e,t){const{sKey:s}=e;const a=await l.getServiceAsync("AppState");const n=a._loadAppState(s);return d.promisify(n)}},"sap.ushell.services.AppState.deleteAppState":{async handler(e,t){const{sKey:s}=e;const a=await l.getServiceAsync("AppState");const n=a.deleteAppState(s);return d.promisify(n)}},"sap.ushell.services.AppState.makeStatePersistent":{async handler(e,t){const{sKey:s,iPersistencyMethod:a,oPersistencySettings:n}=e;const r=await l.getServiceAsync("AppState");const o=r.makeStatePersistent(s,a,n);return d.promisify(o)}},"sap.ushell.services.Bookmark.addBookmarkUI5":{async handler(e,t){const{oParameters:s,vContainer:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();k(s,r);const o=await l.getServiceAsync("BookmarkV2");return o.addBookmark(s,a,r.id)}},"sap.ushell.services.Bookmark.addBookmark":{async handler(e,t){if(true){const{oParameters:t,groupId:s}=e;const a=await l.getServiceAsync("BookmarkV2");return a.addBookmarkByGroupId(t,s)}throw new Error("Bookmark.addBookmarkByGroupId is deprecated. Please use BookmarkV2.addBookmark instead.")}},"sap.ushell.services.Bookmark.getShellGroupIDs":{async handler(e,t){if(true){const e=await l.getServiceAsync("BookmarkV2");return e.getShellGroupIDs()}throw new Error("Bookmark.getShellGroupIDs is deprecated. Please use BookmarkV2.getContentNodes instead.")}},"sap.ushell.services.Bookmark.addCatalogTileToGroup":{async handler(e,t){s.error("Bookmark.addCatalogTileToGroup is deprecated. Please use BookmarkV2.addBookmark instead.");if(true){const{sCatalogTileId:t,sGroupId:s,oCatalogData:a}=e;const n=await l.getServiceAsync("Bookmark");const r=n.addCatalogTileToGroup(t,s,a);return d.promisify(r)}throw new Error("Bookmark.addCatalogTileToGroup is deprecated. Please use BookmarkV2.addBookmark instead.")}},"sap.ushell.services.Bookmark.countBookmarks":{async handler(e,t){const{sUrl:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();const r=await l.getServiceAsync("BookmarkV2");return r.countBookmarks(s,n.id)}},"sap.ushell.services.Bookmark.deleteBookmarks":{async handler(e,t){const{sUrl:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();const r=await l.getServiceAsync("BookmarkV2");return r.deleteBookmarks(s,n.id)}},"sap.ushell.services.Bookmark.updateBookmarks":{async handler(e,t){const{sUrl:s,oParameters:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();const o=await l.getServiceAsync("BookmarkV2");return o.updateBookmarks(s,a,r.id)}},"sap.ushell.services.Bookmark.getContentNodes":{async handler(e,t){const s=await l.getServiceAsync("BookmarkV2");return s.getContentNodes()}},"sap.ushell.services.Bookmark.addCustomBookmark":{async handler(e,t){const{sVizType:s,oConfig:a,vContentNodes:n}=e;const r=await l.getServiceAsync("AppLifeCycle");const o=await r.getCurrentApplication().getSystemContext();const i=await l.getServiceAsync("BookmarkV2");return i.addCustomBookmark(s,a,n,o.id)}},"sap.ushell.services.Bookmark.countCustomBookmarks":{async handler(e,t){const{oIdentifier:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();s.contentProviderId=n.id;const r=await l.getServiceAsync("BookmarkV2");return r.countCustomBookmarks(s)}},"sap.ushell.services.Bookmark.updateCustomBookmarks":{async handler(e,t){const{oIdentifier:s,oConfig:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();s.contentProviderId=r.id;const o=await l.getServiceAsync("BookmarkV2");return o.updateCustomBookmarks(s,a)}},"sap.ushell.services.Bookmark.deleteCustomBookmarks":{async handler(e,t){const{oIdentifier:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();s.contentProviderId=n.id;const r=await l.getServiceAsync("BookmarkV2");return r.deleteCustomBookmarks(s)}},"sap.ushell.services.Bookmark.addBookmarkToPage":{async handler(e,t){const{oParameters:s,sPageId:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();const o=await l.getServiceAsync("BookmarkV2");return o.addBookmarkToPage(s,a,r.id)}},"sap.ushell.services.BookmarkV2.addBookmarkUI5":{async handler(e,t){const{oParameters:s,vContainer:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();k(s,r);const o=await l.getServiceAsync("BookmarkV2");return o.addBookmark(s,a,r.id)}},"sap.ushell.services.BookmarkV2.addBookmark":{async handler(e,t){if(true){const{oParameters:t,groupId:s}=e;const a=await l.getServiceAsync("BookmarkV2");return a.addBookmarkByGroupId(t,s)}throw new Error("BookmarkV2.addBookmarkByGroupId is deprecated. Please use BookmarkV2.addBookmark instead.")}},"sap.ushell.services.BookmarkV2.getShellGroupIDs":{async handler(e,t){if(true){const e=await l.getServiceAsync("BookmarkV2");return e.getShellGroupIDs()}throw new Error("BookmarkV2.getShellGroupIDs is deprecated. Please use BookmarkV2.getContentNodes instead.")}},"sap.ushell.services.BookmarkV2.countBookmarks":{async handler(e,t){const{sUrl:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();const r=await l.getServiceAsync("BookmarkV2");return r.countBookmarks(s,n.id)}},"sap.ushell.services.BookmarkV2.deleteBookmarks":{async handler(e,t){const{sUrl:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();const r=await l.getServiceAsync("BookmarkV2");return r.deleteBookmarks(s,n.id)}},"sap.ushell.services.BookmarkV2.updateBookmarks":{async handler(e,t){const{sUrl:s,oParameters:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();const o=await l.getServiceAsync("BookmarkV2");return o.updateBookmarks(s,a,r.id)}},"sap.ushell.services.BookmarkV2.getContentNodes":{async handler(e,t){const s=await l.getServiceAsync("BookmarkV2");return s.getContentNodes()}},"sap.ushell.services.BookmarkV2.addCustomBookmark":{async handler(e,t){const{sVizType:s,oConfig:a,vContentNodes:n}=e;const r=await l.getServiceAsync("AppLifeCycle");const o=await r.getCurrentApplication().getSystemContext();const i=await l.getServiceAsync("BookmarkV2");return i.addCustomBookmark(s,a,n,o.id)}},"sap.ushell.services.BookmarkV2.countCustomBookmarks":{async handler(e,t){const{oIdentifier:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();s.contentProviderId=n.id;const r=await l.getServiceAsync("BookmarkV2");return r.countCustomBookmarks(s)}},"sap.ushell.services.BookmarkV2.updateCustomBookmarks":{async handler(e,t){const{oIdentifier:s,oConfig:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();s.contentProviderId=r.id;const o=await l.getServiceAsync("BookmarkV2");return o.updateCustomBookmarks(s,a)}},"sap.ushell.services.BookmarkV2.deleteCustomBookmarks":{async handler(e,t){const{oIdentifier:s}=e;const a=await l.getServiceAsync("AppLifeCycle");const n=await a.getCurrentApplication().getSystemContext();s.contentProviderId=n.id;const r=await l.getServiceAsync("BookmarkV2");return r.deleteCustomBookmarks(s)}},"sap.ushell.services.BookmarkV2.addBookmarkToPage":{async handler(e,t){const{oParameters:s,sPageId:a}=e;const n=await l.getServiceAsync("AppLifeCycle");const r=await n.getCurrentApplication().getSystemContext();const o=await l.getServiceAsync("BookmarkV2");return o.addBookmarkToPage(s,a,r.id)}},"sap.ushell.services.UserInfo.getThemeList":{async handler(e,t){const s=await l.getServiceAsync("UserInfo");const a=s.getThemeList();return d.promisify(a)}},"sap.ushell.services.UserInfo.getShellUserInfo":{async handler(e,t){const s=await l.getServiceAsync("UserInfo");return s.getShellUserInfo()}},"sap.ushell.services.UserInfo.getLanguageList":{async handler(e,t){const s=await l.getServiceAsync("UserInfo");const a=s.getLanguageList();return d.promisify(a)}},"sap.ushell.services.UserInfo.updateUserPreferences":{async handler(e,t){const{language:s}=e;if(s){const e=l.getUser();e.setLanguage(s);const t=await l.getServiceAsync("UserInfo");const a=t.updateUserPreferences();await d.promisify(a);e.resetChangedProperty("language")}}},"sap.ushell.services.UserInfo.openThemeManager":{async handler(e,t){p.emit("openThemeManager",Date.now())}},"sap.ushell.services.UserInfo.getLocaleData":{async handler(s,a){const n={calendarType:e.getCalendarType(),dateFormatShort:e.getDatePattern("short"),dateFormatMedium:e.getDatePattern("medium"),numberFormatGroup:e.getNumberSymbol("group"),numberFormatDecimal:e.getNumberSymbol("decimal"),timeFormatShort:e.getTimePattern("short"),timeFormatMedium:e.getTimePattern("medium"),calendarMapping:e.getCustomIslamicCalendarData(),timeZone:t.getTimezone(),currencyFormats:e.getCustomCurrencies()};return n}},"sap.ushell.services.UserDefaultParameters.getValue":{async handler(e,t){const{sParameterName:s}=e;const[a,n]=await Promise.all([l.getServiceAsync("AppLifeCycle"),l.getServiceAsync("UserDefaultParameters")]);const r=await a.getCurrentApplication().getSystemContext();return n.getValue(s,r)}},"sap.ushell.services.ShellNavigation.toExternal":{async handler(e,t){const{oArgs:s,bWriteHistory:a}=e;const n=await l.getServiceAsync("ShellNavigationInternal");n.toExternal(s,undefined,a)}},"sap.ushell.services.ShellNavigation.toAppHash":{async handler(e,t){const{sAppHash:s,bWriteHistory:a}=e;const n=await l.getServiceAsync("ShellNavigationInternal");n.toAppHash(s,a)}},"sap.ushell.services.ShellNavigationInternal.toExternal":{async handler(e,t){const{oArgs:s,bWriteHistory:a}=e;const n=await l.getServiceAsync("ShellNavigationInternal");n.toExternal(s,undefined,a)}},"sap.ushell.services.ShellNavigationInternal.toAppHash":{async handler(e,t){const{sAppHash:s,bWriteHistory:a}=e;const n=await l.getServiceAsync("ShellNavigationInternal");n.toAppHash(s,a)}},"sap.ushell.services.NavTargetResolution.getDistinctSemanticObjects":{async handler(e,t){const s=await l.getServiceAsync("NavTargetResolutionInternal");const a=s.getDistinctSemanticObjects();return d.promisify(a)}},"sap.ushell.services.NavTargetResolution.expandCompactHash":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.expandCompactHash(s);return d.promisify(n)}},"sap.ushell.services.NavTargetResolution.resolveHashFragment":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.resolveHashFragment(s);return d.promisify(n)}},"sap.ushell.services.NavTargetResolution.isIntentSupported":{async handler(e,t){const{aIntents:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.isNavigationSupported(s);const r=await d.promisify(n);return r.reduce((e,t,a)=>{const n=s[a];e[n]=t;return e},{})}},"sap.ushell.services.NavTargetResolution.isNavigationSupported":{async handler(e,t){const{aIntents:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.isNavigationSupported(s);return d.promisify(n)}},"sap.ushell.services.NavTargetResolutionInternal.getDistinctSemanticObjects":{async handler(e,t){const s=await l.getServiceAsync("NavTargetResolutionInternal");const a=s.getDistinctSemanticObjects();return d.promisify(a)}},"sap.ushell.services.NavTargetResolutionInternal.expandCompactHash":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.expandCompactHash(s);return d.promisify(n)}},"sap.ushell.services.NavTargetResolutionInternal.resolveHashFragment":{async handler(e,t){const{sHashFragment:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.resolveHashFragment(s);return d.promisify(n)}},"sap.ushell.services.NavTargetResolutionInternal.isIntentSupported":{async handler(e,t){const{aIntents:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.isNavigationSupported(s);const r=await d.promisify(n);return r.reduce((e,t,a)=>{const n=s[a];e[n]=t;return e},{})}},"sap.ushell.services.NavTargetResolutionInternal.isNavigationSupported":{async handler(e,t){const{aIntents:s}=e;const a=await l.getServiceAsync("NavTargetResolutionInternal");const n=a.isNavigationSupported(s);return d.promisify(n)}},"sap.ushell.services.Renderer.addHeaderItem":{async handler(e,t,s){const{sId:a,sTooltip:n,sIcon:r,iFloatingNumber:o,bVisible:c,bCurrentState:p,aStates:u}=e;const g=await l.getServiceAsync("FrameBoundExtension");const d=await g.createHeaderItem({id:a,tooltip:n,icon:r,floatingNumber:o,press:function(){i.sendRequest("sap.ushell.appRuntime.buttonClick",{buttonId:a},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)}},{position:"begin"});h.storeItem(a,d);h.applyItemVisibility(d,c,p,u)},options:{provideApplicationContext:true}},"sap.ushell.services.Renderer.addHeaderEndItem":{async handler(e,t,s){const{sId:a,sTooltip:n,sIcon:r,iFloatingNumber:o,bVisible:c,bCurrentState:p,aStates:u}=e;const g=await l.getServiceAsync("FrameBoundExtension");const d=await g.createHeaderItem({id:a,tooltip:n,icon:r,floatingNumber:o,press:function(){i.sendRequest("sap.ushell.appRuntime.buttonClick",{buttonId:a},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)}},{position:"end"});h.storeItem(a,d);h.applyItemVisibility(d,c,p,u)},options:{provideApplicationContext:true}},"sap.ushell.services.Renderer.showHeaderItem":{async handler(e,t){const{aIds:s,bCurrentState:a,aStates:n}=e;const r=Array.isArray(s)?s:[s];h.visitItems(r,e=>{h.applyItemVisibility(e,true,a,n)})}},"sap.ushell.services.Renderer.showHeaderEndItem":{async handler(e,t){const{aIds:s,bCurrentState:a,aStates:n}=e;const r=Array.isArray(s)?s:[s];h.visitItems(r,e=>{h.applyItemVisibility(e,true,a,n)})}},"sap.ushell.services.Renderer.hideHeaderItem":{async handler(e,t){const{aIds:s,bCurrentState:a,aStates:n}=e;const r=Array.isArray(s)?s:[s];h.visitItems(r,e=>{h.applyItemVisibility(e,false,a,n)})}},"sap.ushell.services.Renderer.hideHeaderEndItem":{async handler(e,t){const{aIds:s,bCurrentState:a,aStates:n}=e;const r=Array.isArray(s)?s:[s];h.visitItems(r,e=>{h.applyItemVisibility(e,false,a,n)})}},"sap.ushell.services.Renderer.setHeaderTitle":{async handler(e,t){const{sTitle:s}=e;const a=await l.getServiceAsync("Extension");a.setSecondTitle(s)}},"sap.ushell.services.Renderer.setHeaderVisibility":{async handler(e,t){const{bVisible:s,bCurrentState:a,aStates:n}=e;const r=l.getRendererInternal("fiori2");r.setHeaderVisibility(s,!!a,n)}},"sap.ushell.services.Renderer.createShellHeadItem":{async handler(e,t,s){const{params:a}=e;a.press=async function(){i.sendRequest("sap.ushell.appRuntime.buttonClick",{buttonId:a.id},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)};const[n]=await d.requireAsync(["sap/ushell/ui/shell/ShellHeadItem"]);new n(a)},options:{provideApplicationContext:true}},"sap.ushell.services.Renderer.showActionButton":{async handler(e,t){const{aIds:s,bCurrentState:a,aStates:n}=e;const r=Array.isArray(s)?s:[s];h.visitItems(r,e=>{h.applyItemVisibility(e,true,a,n)})}},"sap.ushell.services.Renderer.hideActionButton":{async handler(e,t){const{aIds:s,bCurrentState:a,aStates:n}=e;const r=Array.isArray(s)?s:[s];h.visitItems(r,e=>{h.applyItemVisibility(e,false,a,n)})}},"sap.ushell.services.Renderer.addUserAction":{async handler(e,t,s){const{controlType:a,oControlProperties:n,bIsVisible:r,bCurrentState:o,aStates:c}=e.oParameters;const p=await l.getServiceAsync("Extension");n.press=async function(){i.sendRequest("sap.ushell.appRuntime.buttonClick",{buttonId:n.id},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)};const u=await p.createUserAction(n,{controlType:a});h.storeItem(n.id,u);h.applyItemVisibility(u,r,o,c)},options:{provideApplicationContext:true}},"sap.ushell.services.Renderer.addOptionsActionSheetButton":{async handler(e,t,s){const a=e;const[n]=await d.requireAsync(["sap/m/Button"]);const r=await l.getServiceAsync("Extension");const o=Array.isArray(a)?a:[a];o.forEach(async e=>{I(e.id);new n({id:e.id,text:e.text,icon:e.icon,tooltip:e.tooltip,press:async function(){i.sendRequest("sap.ushell.appRuntime.buttonClick",{buttonId:e.id},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)}});const s=await r.createUserAction({id:e.id});h.storeItem(e.id,s);h.applyItemVisibility(s,true,true,e.aStates)})},options:{provideApplicationContext:true}},"sap.ushell.services.Renderer.removeOptionsActionSheetButton":{async handler(e,t){const a=e;const n=Array.isArray(a)?a:[a];n.forEach(e=>{const t=h.getItem(e.id);if(t){h.applyItemVisibility(t,false,true,e.aStates);return I(e.id)}s.warning(`User action with id ${e.id} not found`)})}},"sap.ushell.services.Renderer.updateHeaderItem":{async handler(e,t){const{sId:s,oControlProperties:a}=e;if(!Object.hasOwn(a,"floatingNumber")){return}const n=h.getItem(s);if(n?.getControl){const e=await n.getControl();e?.setFloatingNumber?.(a.floatingNumber)}}},"sap.ushell.services.Renderer.destroyButton":{async handler(e,t){const{aIds:s}=e;const a=Array.isArray(s)?s:[s];a.forEach(e=>{I(e)})}},"sap.ushell.services.Extension.createHeaderItem":{async handler(e,t,s){const{controlProperties:a,events:n,parameters:r}=e;const o=h.generateItemId();n.forEach(e=>{a[e]=async function(){i.sendRequest("sap.ushell.services.Extension.handleControlEvent",{eventName:e,itemId:o},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)}});const c=await l.getServiceAsync("Extension");const p=await c.createHeaderItem(a,r);h.storeItem(o,p);return{itemId:o}},options:{provideApplicationContext:true}},"sap.ushell.services.Extension.createUserAction":{async handler(e,t,s){const{controlProperties:a,events:n,parameters:r}=e;const o=h.generateItemId();n.forEach(e=>{a[e]=async function(){i.sendRequest("sap.ushell.services.Extension.handleControlEvent",{eventName:e,itemId:o},t.getPostMessageTarget(),t.getPostMessageTargetOrigin(),false)}});const c=await l.getServiceAsync("Extension");const p=await c.createUserAction(a,r);h.storeItem(o,p);return{itemId:o}},options:{provideApplicationContext:true}},"sap.ushell.services.Extension.Item.destroy":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.destroy){a.destroy();h.removeItem(s)}}},"sap.ushell.services.Extension.Item.showForCurrentApp":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.showForCurrentApp){a.showForCurrentApp()}}},"sap.ushell.services.Extension.Item.hideForCurrentApp":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.hideForCurrentApp){a.hideForCurrentApp()}}},"sap.ushell.services.Extension.Item.showForAllApps":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.showForAllApps){a.showForAllApps()}}},"sap.ushell.services.Extension.Item.hideForAllApps":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.hideForAllApps){a.hideForAllApps()}}},"sap.ushell.services.Extension.Item.showOnHome":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.showOnHome){a.showOnHome()}}},"sap.ushell.services.Extension.Item.hideOnHome":{async handler(e,t){const{itemId:s}=e;const a=h.getItem(s);if(a?.hideOnHome){a.hideOnHome()}}},"sap.ushell.services.Extension.setSecondTitle":{async handler(e,t){const{title:s}=e;const a=await l.getServiceAsync("Extension");return a.setSecondTitle(s)}},"sap.ushell.services.LaunchPage.getGroupsForBookmarks":{async handler(e,t){if(true){const e=await l.getServiceAsync("FlpLaunchPage");const t=e.getGroupsForBookmarks();return d.promisify(t)}throw new Error("LaunchPage.getGroupsForBookmarks is deprecated. Please use BookmarkV2.getContentNodes instead.")}},"sap.ushell.services.Menu.getSpacesPagesHierarchy":{async handler(e,t){const s=await l.getServiceAsync("Menu");const a=s.getContentNodes([y.Space,y.Page]);return a.map(({id:e,label:t,children:s})=>({id:e,title:t,pages:(s||[]).map(({id:e,label:t})=>({id:e,title:t}))}))}},"sap.ushell.services.CommonDataModel.getAllPages":{async handler(e,t){const s=await l.getServiceAsync("CommonDataModel");return s.getAllPages()}},"sap.ushell.services.UITracer.trace":{async handler(e,t){const{trace:s}=e;await l.getServiceAsync("UITracer");p.emit("UITracer.trace",s)}},"sap.ushell.services.SearchableContent.getApps":{async handler(e,t){const s=e.oOptions||{};const a=await l.getServiceAsync("SearchableContent");return a.getApps(s)}},"sap.ushell.services.ReferenceResolver.resolveReferences":{async handler(e,t){const{aReferences:s}=e;const a=await l.getServiceAsync("ReferenceResolver");return a.resolveReferences(s)}}};async function S(e){const{sData:t}=e;let s;if(t!==undefined){try{s=JSON.parse(t)}catch(e){s=t}}else{s=""}const a=await l.getServiceAsync("AppState");const n=a.createEmptyAppState();n.setData(s);n.save();const r=n.getKey();let i=o.getHash();if(i.indexOf("&/")>0){if(i.indexOf("sap-iapp-state=")>0){const e=/(?:sap-iapp-state=)([^&/]+)/.exec(i)[1];i=i.replace(e,r)}else{i=`${i}/sap-iapp-state=${r}`}}else{i=`${i}&/sap-iapp-state=${r}`}o.disableBlueBoxHashChangeTrigger=true;o.replaceHash(i);o.disableBlueBoxHashChangeTrigger=false;return r}function k(e,t){if(!e||!e.serviceUrl||!t){return}if(t.id===""||t.id==="saas_approuter"){e.serviceUrl=undefined;s.warning("Dynamic data bookmarks tiles are not supported for local content providers")}}function I(e){const t=n.getElementById(e);if(t?.destroy){t.destroy()}}return{register(){h=new c;Object.keys(A).forEach(e=>{const t=A[e];i.setRequestHandler(e,t.handler,t.options)})},stripBookmarkServiceUrlForLocalContentProvider:k}});
//# sourceMappingURL=ServiceHandler.js.map