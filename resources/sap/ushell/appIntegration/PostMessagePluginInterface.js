// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/deepExtend","sap/ui/thirdparty/jquery"],(e,jQuery)=>{"use strict";const s="user.postapi.";function t(){let e;let s;this.init=function(t,n){e=t;s=n};this.getInterface=function(){const t={};t.registerPostMessageAPIs=n.bind(null,s);t.createPostMessageResult=i;if(e){t.postMessageToApp=r.bind(null,e)}else{t.postMessageToFlp=r.bind(null,e)}return t}}function n(t,n,r){const i={status:"success",desc:""};const u={isActiveOnly:true,distributionType:["all"]};if(n===undefined||Object.keys(n).length<=0){i.status="error";i.desc="no handler was found to register";return i}if(r===undefined){r=false}Object.keys(n).forEach(t=>{if(typeof t!=="string"){i.status="error";i.desc="oPostMessageAPIs should contain only string keys"}else if(r===false&&t.indexOf(s)!==0){i.status="error";i.desc=`all user custom Message APIs must start with '${s}'`}else{Object.keys(n[t]).forEach(s=>{if(s==="inCalls"){n[t].oServiceCalls=n[t][s];delete n[t][s]}else if(s==="outCalls"){Object.keys(n[t][s]).forEach(r=>{n[t][s][r]=e({},u,n[t][s][r])});n[t].oRequestCalls=n[t][s];delete n[t][s]}else{i.status="error";i.desc="api should contain either 'inCalls' or 'outCalls'"}})}});if(i.status==="success"){t(n)}return i}function r(e,s,t,n){const r=new jQuery.Deferred;if(n===undefined){n={}}if(e){sap.ui.require(["sap/ushell/appIntegration/PostMessageManager"],e=>{const i=`${s}.${t}`;e.sendRequestToAllApplications(i,n,true).then(e=>{r.resolve(e[0]?.result)})})}else{sap.ui.require(["sap/ushell/appRuntime/ui5/AppRuntimeService"],e=>{e.sendMessageToOuterShell(`${s}.${t}`,n).done(e=>{r.resolve(e)})})}return r.promise()}function i(e){if(e===undefined){e={}}return(new jQuery.Deferred).resolve(e).promise()}return new t});
//# sourceMappingURL=PostMessagePluginInterface.js.map