// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log"],function(e){"use strict";class t{#e=[];#t={};constructor(){this.init()}init(){this.#e=[];this.#t=[]}setContainerActive(t){if(!t){return}if(this.#e.includes(t)){e.warning("The container is already active");return}this.removeByContainer(t);this.#e.push(t)}setContainerReadyForReuse(t,i){if(!t){return}if(!this.#e.includes(t)&&this.getById(t.getId())){e.warning("The container is already in pool");return}this.removeByContainer(t);this.#t.push({url:i,key:this.#i(i),container:t})}findFreeContainerByUrl(e){const t=this.#i(e);const i=this.#t.reverse().find(e=>e.key===t);if(i){return i.container}}canBeReused(e,t){if(!e){return false}if(this.#e.includes(e)){return false}const i=this.#i(t);const n=this.#t.find(t=>t.container===e);return!!n&&n.key===i}getLength(){return this.#e.length}getPoolLength(){return this.#t.length}removeByContainer(e){if(!e){return}this.#e=this.#e.filter(t=>t!==e);this.#t=this.#t.filter(t=>t.container!==e)}getById(e){let t;this.forEach(i=>{if(i.getId()===e){t=i}});return t}getAll(){return[...this.#e,...this.#t.map(e=>e.container)]}forEach(e){this.#e.forEach(t=>{e(t)});this.#t.forEach(t=>{e(t.container)})}#i(e){let t;let i="";let n="";let a="";let s="";let r="";const o=new URL(e,this._getWindowLocationHref());t=o.origin;if(o.port===""){if(o.protocol==="https:"){t=t+":443"}else if(o.protocol==="http:"){t=t+":80"}}const h=o.searchParams;if(h.has("sap-iframe-hint")){i="@hint:"+h.get("sap-iframe-hint")}if(h.has("sap-ui-version")){n="@uiver:"+h.get("sap-ui-version")}if(h.has("sap-async-loading")&&h.get("sap-async-loading")!=="true"){a="@async:"+h.get("sap-async-loading")}if(h.has("sap-enable-fesr")&&h.get("sap-enable-fesr")!=="false"){s="@fesr:"+h.get("sap-enable-fesr")}if(h.has("sap-testcflp-iframeid")){r="@testid:"+h.get("sap-testcflp-iframeid")}return t.toLowerCase()+i+n+a+s+r}_getWindowLocationHref(){return window.location.href}_getStorageForDebug(){return{activeContainers:this.#e,reusableContainers:this.#t}}destroyAllContainers(){this.forEach(e=>{this.removeByContainer(e);e.destroy()})}}return new t});
//# sourceMappingURL=ApplicationContainerCache.js.map