{"version":3,"file":"PostMessageManager.js","names":["sap","ui","define","Log","Deferred","isPlainObject","ObjectPath","uid","oDefaultRequestHandlerOptions","provideApplicationContext","allowInactive","oDefaultDistributionPolicy","activeOnly","ignoreCapabilities","DoNotReply","Symbol","oLogger","getLogger","PostMessageManager","fnPostMessageEventHandler","Error","fnGetCurrentApplication","fnGetAllApplications","bInitialized","bDisabled","aEventPreprocessor","aResponseHandlers","oRequestHandlers","oDistributionPolicies","bKeepMessagesForLaterProcessing","aUnprocessedMessages","init","oOptions","this","oConfig","get","enabled","warning","getCurrentApplication","getAllApplications","skipReplay","handlePostMessageEvent","bind","addEventListener","oEvent","oMessage","data","JSON","parse","body","debug","oResult","preprocessMessageEvent","service","oSourceWindow","source","sSourceDomain","origin","request_id","stringify","includes","type","bWasHandled","handleResponseHandlers","oResponseMessageBody","bSuccess","vResult","handleServiceRequests","Object","hasOwn","result","vError","error","sStack","sMessage","message","stack","sendResponse","oNewEventObject","forEach","fnProcessor","fnResponseHandler","oMessageEvent","sServiceRequest","fnServiceRequestHandler","getServiceRequestHandler","push","code","oRequestHandlerOptions","getServiceRequestHandlerOptions","isValidRequest","bIsValidRequest","oApplicationContainer","getApplicationContainerContext","getActive","isTrustedPostMessageSource","getId","handler","options","oContainer","isA","oApplicationWindow","getPostMessageTarget","oCurrentApplicationContainer","addEventPreprocessor","fnPreprocessor","setRequestHandler","fnHandler","sendRequest","oMessageBody","oContentWindow","sTargetOrigin","bWaitForResponse","sRequestId","sendMessage","status","oResponsePromise","Promise","resolve","waitForClientResponse","postMessage","oExpectedContentWindow","oDeferred","handleClientResponse","promise","bIsRunningInQUnit","window","QUnit","oError","reject","sendRequestToAllApplications","oDistributionPolicy","getDistributionPolicy","aRelevantContainers","aFilteredContainers","filter","supportsCapabilities","isValidRequestTarget","bIsValidRequestTarget","aPromises","map","getPostMessageTargetOrigin","all","setDistributionPolicy","oPolicy","replayStoredMessages","reset","removeEventListener"],"sources":["PostMessageManager-dbg.js"],"mappings":"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","ignoreList":[]}