// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/ApplicationType/UrlPostProcessing","sap/ui/thirdparty/hasher","sap/ushell/utils","sap/ushell/Container"],(e,s,t,r)=>{"use strict";class a{async createApp(a,p,i,n){let l;a.setReservedParameters(n.reservedParameters);a.setCurrentAppUrl(p);a.setCurrentAppId(i);a.setCurrentAppTargetResolution(n);a.setIframeReusedForApp(true);p=e.processUrl(p,n.applicationType,false,a);const u={sCacheId:i,sUrl:p,sHash:s.getHash()};if(p.indexOf("sap-iframe-hint=GUI")>0||p.indexOf("sap-iframe-hint=WDA")>0||p.indexOf("sap-iframe-hint=WCF")>0){const e=t.getParamKeys(p);if(e.aAppStateNamesArray.length>0){try{const s=await r.getServiceAsync("Navigation");const t=await s.getAppStateData(e.aAppStateKeysArray);l={};e.aAppStateNamesArray.forEach((e,s)=>{if(t[s]){l[e]=t[s]}})}catch{}}else{l={}}}if(l){l["sap-flp-url"]=r.getFLPUrl(true);l["system-alias"]=a.getSystemAlias();u["sap-flp-params"]=l}const c=await a.sendRequest("sap.ushell.services.appLifeCycle.create",u,true);return c?.result}async destroyApp(e,s){const t=e.getCurrentAppId()===s;if(t){e.setCurrentAppUrl("");e.setCurrentAppId("");e.setCurrentAppTargetResolution(undefined);r.setAsyncDirtyStateProvider(undefined)}await e.sendRequest("sap.ushell.services.appLifeCycle.destroy",{sCacheId:s},true)}async storeAppWithinSameFrame(e,s){e.setCurrentAppUrl("");e.setCurrentAppId("");e.setCurrentAppTargetResolution(undefined);r.setAsyncDirtyStateProvider(undefined);await e.sendRequest("sap.ushell.services.appLifeCycle.store",{sCacheId:s},true)}async restoreAppWithinSameFrame(e,t,r,a){e.setCurrentAppUrl(t);e.setCurrentAppId(r);e.setCurrentAppTargetResolution(a);e.setIframeReusedForApp(true);await e.sendRequest("sap.ushell.services.appLifeCycle.restore",{sCacheId:r,sUrl:a.url,sHash:s.getHash()},true)}isStatefulContainerSupportingKeepAlive(e){if(!e){return false}return e.supportsCapabilities(["sap.ushell.services.AppLifeCycle.create","sap.ushell.services.appLifeCycle.destroy","sap.ushell.services.appLifeCycle.store","sap.ushell.services.appLifeCycle.restore"])}isIframeIsValidSupported(e){if(!e){return false}return e.supportsCapabilities(["sap.ushell.services.appRuntime.iframeIsValid"])}}return new a});
//# sourceMappingURL=StatefulContainerV2Handler.js.map