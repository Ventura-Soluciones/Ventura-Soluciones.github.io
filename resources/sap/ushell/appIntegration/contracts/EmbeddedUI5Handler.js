// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/Deferred","sap/ui/core/EventBus","sap/ushell/Container","sap/ushell/UI5ComponentType","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(e,t,n,i,r,o,a){"use strict";class s{async createApp(e,t,o){const s=t?.ui5ComponentName;n.getInstance().publish("ApplicationContainer","_prior.newUI5ComponentInstantion",{name:s});const p=await i.getServiceAsync("Ui5ComponentLoader");const c=a.getBasicHash(t.sFixedShellHash);t.ui5ComponentId=`application-${c}-component`;e.setUi5ComponentId(t.ui5ComponentId);await p.createComponent(t,o,[this.#e()],r.Application)}#e(){const n=i.getRendererInternal();if(n){e.debug("Shell controller._createWaitForRendererCreatedPromise: shell renderer already created, return empty array.");return[]}const r=new t;const o=r.resolve.bind(r);i.attachRendererCreatedEvent(o);return r.promise.then(()=>{e.info("Shell controller: resolving component waitFor promise after shell renderer created event fired.");i.detachRendererCreatedEvent(o)})}async getNavigationRedirectHash(e){const t=e.getComponentHandle();if(!t){return}const n=t.getInstance({});if(!n){return}if(typeof n.navigationRedirect!=="function"){return}const i=n.navigationRedirect();if(!i||typeof i.then!=="function"){return}try{const e=await o.promisify(i);return e}catch{}}async storeApp(e){const t=e.getCurrentAppTargetResolution();n.getInstance().publish("sap.ushell","appKeepAliveDeactivate",t);const i=e.getComponentHandle();const r=i.getInstance();if(r.isKeepAliveSupported?.()){r.deactivate();return}if(typeof r.suspend==="function"){r.suspend()}const o=r.getRouter?.();if(o&&typeof o.stop==="function"){o.stop()}}async restoreAppAfterNavigate(e,t){const i=e.getCurrentAppTargetResolution();n.getInstance().publish("sap.ushell","appKeepAliveActivate",i);const r=e.getComponentHandle();const o=r.getInstance();if(o.isKeepAliveSupported?.()){o.activate();return}if(typeof o.restore==="function"){o.restore()}const a=o.getRouter?.();if(a&&typeof a.initialize==="function"){if(t.enableRouterRetrigger===false){a.initialize()}else{a.initialize(true)}}if(typeof o.setInitialConfiguration==="function"){o.setInitialConfiguration()}}}return new s});
//# sourceMappingURL=EmbeddedUI5Handler.js.map