// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/Component","sap/ui/core/Element","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils","sap/ushell/appRuntime/ui5/plugins/baseRta/CheckConditions","sap/ushell/appRuntime/ui5/plugins/baseRta/Trigger"],function(t,i,e,n,s){"use strict";var o=t.extend("sap.ushell.plugins.BaseRTAPlugin",{sType:null,init:function(t){this.mConfig=t;this.mConfig.i18n=this.getModel("i18n").getResourceBundle();this.mConfig.loadPlugins=this._loadPlugins.bind(this);this.mConfig.onStartHandler=this._onStartHandler.bind(this);this.mConfig.onErrorHandler=this._onErrorHandler.bind(this);this.mConfig.onStopHandler=this._onStopHandler.bind(this);this.oTrigger=new s(this.mConfig);this._oPluginPromise=(async()=>{await this.oTrigger.getInitPromise();if(this.mConfig.checkRestartRTA&&n.checkRestartRTA(this.mConfig.layer)){await this.oTrigger.triggerStartRta(this)}const t=await e.getAppLifeCycleService();await t.attachAppLoaded(this._onAppLoaded,this)})()},getPluginPromise:function(){return this._oPluginPromise},exit:function(){this._oPluginPromise=this._oPluginPromise.then(e.getAppLifeCycleService).then(function(t){t.detachAppLoaded(this._onAppLoaded,this);if(this._onRendererCreated){var i=e.getContainer();i.detachRendererCreatedEvent(this._onRendererCreated,this)}}.bind(this))},_onAppLoaded:async function(){if(await n.checkRtaPrerequisites()){if(n.checkRestartRTA(this.mConfig.layer)){this.oTrigger.triggerStartRta(this)}this._setButtonVisibility(true)}else{this._setButtonVisibility(false)}},_onAdapt:function(){return this.oTrigger.triggerStartRta(this)},_setButtonVisibility:function(t){if(!this.oActionButton){return}if(t){this.oActionButton.showForAllApps()}else{this.oActionButton.hideForAllApps()}},_exitAdaptation:function(){if(this._switchToDefaultMode){this._switchToDefaultMode()}this.oTrigger.exitRta()},_onStartHandler:function(){},_onErrorHandler:function(){this._exitAdaptation()},_onStopHandler:function(){this._exitAdaptation()},_loadPlugins:function(){return Promise.resolve()}});return o},true);
//# sourceMappingURL=BaseRTAPlugin.js.map