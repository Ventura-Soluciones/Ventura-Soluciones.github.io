// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/base/util/ObjectPath","sap/ushell/Container"],function(e,t,i){"use strict";var r="X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER",n="X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER";var a={};a.getCatalogTilePreviewTitle=function(e){var t=a.getBagText(e,"tileProperties","display_title_text");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewTitle()||undefined};a.getCatalogTilePreviewSubtitle=function(e){var t=a.getBagText(e,"tileProperties","display_subtitle_text");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewSubtitle()||undefined};a.getCatalogTilePreviewIcon=function(e){var t=a._getConfigurationProperty(e,"tileConfiguration","display_icon_url");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewIcon()||undefined};a.getCatalogTileTargetURL=function(e){var t=a._getConfigurationProperty(e,"tileConfiguration","navigation_target_url");return t||!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getTargetUrl()||undefined};a.getCatalogTileNumberUnit=function(e){return a._getConfigurationProperty(e,"tileConfiguration","display_number_unit")};a.getCatalogTilePreviewInfo=function(e){return a.getBagText(e.getChip(),"tileProperties","display_info_text")};a.getCatalogTileSize=function(e){return a.getTileSize(e)};a.getCatalogTilePreviewIndicatorDataSource=function(e){var t;var i=a._getAppLauncherTileConfiguration(e);if(a._isAppLauncher(e)&&i&&i.service_url){t={path:i.service_url,refresh:i.service_refresh_interval}}return t};a._getConfigurationProperty=function(e,t,i){var r,n;try{r=e.getConfigurationParameter(t);n=JSON.parse(r)}catch(e){return}if(n[i]!==undefined){return n[i]}};a.getBagText=function(e,t,i){if(e.getBagIds().indexOf(t)>-1&&e.getBag(t).getTextNames().indexOf(i)>-1){return e.getBag(t).getText(i)}};a.getTileSize=function(e){var t=!e.isStub()&&e.getConfigurationParameter("row")||"1",i=!e.isStub()&&e.getConfigurationParameter("col")||"1";return t+"x"+i};a._getAppLauncherTileConfiguration=function(t){var i,r=t.getConfigurationParameter("tileConfiguration");try{i=JSON.parse(r||"{}")}catch(i){e.error("Tile with ID '"+t.getId()+"' has a corrupt configuration containing a 'tileConfiguration' value '"+r+"' which could not be parsed. If present, a (stringified) JSON is expected as value.",i.message,"sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{}}return i};a._isAppLauncher=function(e){var t=e.getChip().getBaseChipId();return t===r||t===n};a.getTileConfigurationFromSimplifiedChip=function(e){var t;try{t=JSON.parse(e.configuration.tileConfiguration)}catch(e){t={}}return t};a.getTargetUrlFromSimplifiedChip=function(e,t){var i=this.getCustomTileTargetFromSimplified(e);if(i){return"#"+t.constructShellHash(i)}var r=this.getTileConfigurationFromSimplifiedChip(e);return r.navigation_target_url};a.getIndicatorDataSourceFromSimplifiedChip=function(e){var t=this.getTileConfigurationFromSimplifiedChip(e);var i=t.service_url;if(!i){return undefined}return{path:i,refresh:t.service_refresh_interval}};a.getTileSizeFromSimplifiedChip=function(e){var t=e.configuration;var i=t.row||1;var r=t.col||1;return i+"x"+r};a.getNumberUnitFromSimplifiedChip=function(e){var t=this.getTileConfigurationFromSimplifiedChip(e);return t.display_number_unit};a.getInfoFromSimplifiedChip=function(e){var t=e.bags.tileProperties;return t&&t.texts.display_info_text};a.getKeywordsFromSimplifiedChip=function(e){var t=e.bags.tileProperties;var i=t&&t.texts.display_search_keywords;if(i){return i.trim().split(/\s*,\s*/g)}return[]};a.isCustomTileFromSimplifiedChip=function(e){var t=e.chipId;return t!==r&&t!==n};a.loadChipInstanceFromSimplifiedChip=function(e){var t=e.bags;var r={chipId:e.chipId,configuration:e.configuration?JSON.stringify(e.configuration):"{}"};return i.getServiceAsync("PageBuilding").then(function(e){var i=e.getFactory();var n=i.createChipInstance(r);this.addBagDataToChipInstance(n,t);return new Promise(function(e,t){n.load(e,t)}).then(function(){return n})}.bind(this))};a.addBagDataToChipInstance=function(t,i){if(!i){return}var r;for(var n in i){var a=i[n];var o=t.getBag(n);try{for(r in a.properties){o.setProperty(r,a.properties[r])}for(r in a.texts){o.setText(r,a.texts[r])}}catch(t){e.error("chipsUtils.addBagDataToChipInstance: "+t.toString())}}};a.getCustomTileTargetFromSimplified=function(e){if(e.chipId==="X-SAP-UI2-CHIP:/UI2/AR_SRVC_NEWS"){return{target:{semanticObject:"NewsFeed",action:"displayNewsList"}}}var t=JSON.parse(e.configuration.tileConfiguration||"{}");var i=JSON.parse(t.TILE_PROPERTIES||"{}");if(i.semanticObject&&i.semanticAction){return{target:{semanticObject:i.semanticObject,action:i.semanticAction},params:{EvaluationId:[i.evaluationId]}}}return null};return a},true);
//# sourceMappingURL=chipsUtils.js.map