// Copyright (c) 2009-2025 SAP SE, All Rights Reserved
sap.ui.define(["./abap.bootstrap.utils","sap/ushell/bootstrap/common/common.util","sap/ui/thirdparty/jquery","sap/ushell_abap/pbServices/ui2/Utils","sap/base/Log"],function(e,a,jQuery,s,i){"use strict";var t={},r="/sap/opu/odata/UI2/PAGE_BUILDER_PERS",n="Pages/PageChipInstances/Chip/ChipBags/ChipProperties,"+"Pages/PageChipInstances/RemoteCatalog,"+"Pages/PageChipInstances/ChipInstanceBags/ChipInstanceProperties,"+"AssignedPages,DefaultPage",c="PageSets('%2FUI2%2FFiori2LaunchpadHome')";var u=a.isSapStatisticsSet();function l(e){var a=p(e),s=f(a);h(a,e,function(e,a,i){d(s,e,a,i)})}function p(a){var s=e.getUrlParameterValue("sap-ui2-cache-disable");if(s&&a&&a.services&&a.services.pbFioriHome){a.services.pbFioriHome["sap-ui2-cache-disable"]=s}return o(a,"pbFioriHome",r,c,n)}function o(e,a,s,t,r){var n,c,u=false;if(e.services){if(e.services[a]){c=e.services[a]}else{c={};e.services[a]=c;u=true}}else{c={};e.services={};e.services[a]=c;u=true}if(!c.baseUrl||!c.relativeUrl){c.baseUrl=s;c.relativeUrl=t;u=true}if(u){i.warning("URL for "+a+" service not found in startup service result; fallback to default; cache invalidation might fail",null,"sap.ushell_abap.bootstrap")}if(c.baseUrl.lastIndexOf("/")!==c.baseUrl.length-1){c.baseUrl+="/"}if(c.relativeUrl[0]==="/"){c.relativeUrl=c.relativeUrl.slice(1)}n=c.baseUrl+c.relativeUrl;if(!/\$expand=/.test(n)&&r){n+=(n.indexOf("?")<0?"?":"&")+"$expand="+r}if(c.cacheId){n+=(n.indexOf("?")<0?"?":"&")+"sap-cache-id="+c.cacheId}if(c["sap-ui2-cache-disable"]){n+=(n.indexOf("?")<0?"?":"&")+"sap-ui2-cache-disable="+c["sap-ui2-cache-disable"]}return n}function d(e,a,s,i){if(a===200){e.resolve(JSON.parse(i).d,s)}else{e.reject(i)}}function f(e){var a=new jQuery.Deferred;sap.ui.require(["sap/ui/thirdparty/datajs"],function(i){OData.read.$cache=OData.read.$cache||new s.Map;OData.read.$cache.put(e,a.promise())});return a}function h(a,s,i){var t;t=e.createAndOpenXHR(a,s);if(u){t.setRequestHeader("sap-statistics","true")}t.onreadystatechange=function(){if(this.readyState!==4){return}i(t.status,undefined,t.responseText)};t.send()}t.requestPageSet=l;t._getAndAdjustServiceURL=o;t._getAndAdjustPageSetServiceURL=p;t._setSapStatistics=function(e){u=e};return t});
//# sourceMappingURL=abap.request.pageset.js.map