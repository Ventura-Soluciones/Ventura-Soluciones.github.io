sap.ui.define(["sap/ui/base/Object","sap/suite/ui/generic/template/js/AnnotationHelper","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/base/util/extend"],function(e,t,n,o){"use strict";function r(e){function t(t){t=t||[];for(var n in e.componentRegistry){if(t.indexOf(n)===-1){var o=e.componentRegistry[n];o.oComponent.setIsRefreshRequired(true)}}}function n(t,n,r){var i=t.getId();var s=e.componentRegistry[i];var u=e.mRoutingTree[s.route];for(var a=0;(!r||a<r)&&u.level>0;a++){var f=e.mRoutingTree[u.parentRoute];if(f.componentId){var c=e.componentRegistry[f.componentId].oComponent;o(c,n)}u=f}}function o(t,n,o,r,i){if(n){var s=e.componentRegistry[t.getId()];var u=o||!r&&e.oNavigationControllerProxy.navigationWillLeavePage(e.mRoutingTree[s.route],n);var a=s.mRefreshInfos;a[n]=true;if(!u&&s.utils.isComponentActive()){s.utils.refreshBinding(undefined,i)}}else if(t.setIsRefreshRequired){t.setIsRefreshRequired(true)}}function r(t,n){for(var o=0;o<t.children.length;o++){var i=e.mEntityTree[t.children[o]];if(t!==i){r(i,n)}if(i.componentId){var s=e.componentRegistry[i.componentId];n.push(s.oComponent)}}}function i(t){var n=[];var o=e.componentRegistry[t.getId()];var i=e.mRoutingTree[o.route];r(i,n);return n}function s(t,n){var o=i(t);if(n){o.push(t)}for(var r=0;r<o.length;r++){e.componentRegistry[o[r].getId()].utils.unbind()}}function u(t){var n=[];r(t,n);for(var o=0;o<n.length;o++){e.componentRegistry[n[o].getId()].utils.unbind()}}function a(){var t=e.mRoutingTree.root;if(t.componentId){var n=e.componentRegistry[t.componentId];var o=n.oComponent;if(o&&typeof o.setIsRefreshRequired==="function"){o.setIsRefreshRequired(true)}}}function f(){var t=e.oNavigationControllerProxy.getActiveComponents();e.oAppComponent.getModel().resetChanges();t.forEach(function(t){var n=e.componentRegistry[t];n.oComponent.setIsRefreshRequired(true)})}function c(t){e.leaveAppPromise.then(function(){for(var n in t){for(var r in t[n].entitySets){o(t[n].component,t[n].entitySets[r])}if(t[n].withoutAssociationsRefresh){e.componentRegistry[n].bWithoutAssociationsRefresh=true}if(t[n].isRefreshRequired){t[n].component.setIsRefreshRequired(true)}}})}return{setAllPagesDirty:t,setParentToDirty:n,setMeToDirty:o,unbindChildren:s,unbindChildrenUsingTreeNode:u,setRootPageToDirty:a,setActivePagesToDirty:f,setRefreshBehaviour:c}}return e.extend("sap.suite.ui.generic.template.lib.ViewDependencyHelper",{constructor:function(e){o(this,r(e))}})});
//# sourceMappingURL=ViewDependencyHelper.js.map