sap.ui.define(["sap/ui/model/odata/AnnotationHelper","sap/ui/model/odata/_AnnotationHelperBasics","sap/ui/comp/smartfield/SmartField","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/base/strings/formatMessage","sap/base/util/deepExtend","sap/suite/ui/generic/template/js/StableIdHelper","sap/suite/ui/generic/template/genericUtilities/utils","sap/ui/Device","sap/m/library","sap/ui/core/library","sap/suite/ui/generic/template/genericUtilities/metadataAnalyser","sap/ui/base/ManagedObject","sap/base/util/isEmptyObject","sap/suite/ui/generic/template/js/RuntimeFormatters"],function(e,t,a,r,i,n,o,l,s,u,c,p,f,g){"use strict";var v=c.ValueState;var d=u.OverflowToolbarPriority;var m=new r("js.AnnotationHelper").getLogger();function P(e){m.error("Error creating stable id for facet with RecordType: "+e.RecordType+" and Target: "+(e.Target&&e.Target.AnnotationPath));var t=new Uint32Array(1),a=Math.pow(2,32);var r=window.crypto||window.msCrypto;var i=r&&r.getRandomValues(t)[0]/a;return Math.floor(i*99999+1).toString()}function h(){return"${_templPrivGlobal>/generic/isTeamsModeActive} || !${_templPrivGlobal>/generic/shareControlVisibility}"}function y(e,t){var a=function(e){return!!e&&e.some(function(e){return e.PropertyPath===t})};var r=a(e["Org.OData.Capabilities.V1.SortRestrictions"]&&e["Org.OData.Capabilities.V1.SortRestrictions"].NonSortableProperties);var i=e["Org.OData.Capabilities.V1.FilterRestrictions"];var n=!!i&&(i.Filterable==="false"||a(i.NonFilterableProperties));var o={getFilterRestriction:function(){return n},getSortRestriction:function(){return r}};return o}function b(e,t){return!!(e.name&&t&&t.some(function(t){return e.name===t.entitySet}))}function I(e,t,a,r,i,n){var o=r?"":" && !${ui>/editable}";return"{= ${_templPriv>/generic/supportedIntents/"+e+"/"+t+"/"+a+"/supported}"+o+" ? "+i+" : "+n+"}"}function T(e,t,a,r,i){var n;if(a){n=a.split("/")[0]}if(e&&t){for(var o=0;o<t.length;o++){if(e===t[o].entitySet&&(!n||n===t[o].navigationProperty)&&t[o].navigation&&t[o].navigation[r]){if(i){if(t[o].component&&t[o].component.settings&&t[o].component.settings.hideChevronForUnauthorizedExtNav){return t[o].navigation[r].target}}else{return t[o].navigation[r].target}}}}return null}function F(e,t,a,r,i,n,o,l){var s=n?"1":"Navigation";var u=l&&a["sap.ui.generic.app"].pages[0].component.settings&&a["sap.ui.generic.app"].pages[0].component.settings.editFlow;if(u==="direct"){var c=E.getUpdateRestrictions(e);if(typeof c==="boolean"){return c?"Detail":"Inactive"}else{return"{= ${"+c+"} ? 'Detail' : 'Inactive'}"}}if(o){return s}var p=n?"0":"Inactive";var f=n?"":"'";var g=T(e.name,t,r,"display",true);if(g){var v=a["sap.app"].crossNavigation.outbounds[g];var d=v.semanticObject;var m=v.action;var P=e.name+(r?"::"+r.split("/")[0]:"");return I(d,m,P,i,f+s+f,f+p+f)}if(b(e,t)){return i?s:"{= ${ui>/editable} ? "+f+p+f+" : "+f+s+f+" }"}return p}function C(e,t,a,r,i){return F(e,t,a,r,i,true)}function x(e,t,a){var r=p.getPropertyMetadata(e,t,a);return!!r&&r.type==="Edm.Boolean"}function D(e,t){if(Object.keys(e).length===0){return{truncateLabel:true}}else if(e[t]){return e[t]}else if(e["*"]){return e["*"]}else{return{truncateLabel:true}}}function A(e,t,a,r,i,n,o){var l=["com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldForAction","com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"];if(l.indexOf(t.RecordType)!==-1){if(t&&t.Value&&t.Value.Path){return O(a,t.Value.Path,n)}}else if(t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(i.indexOf("com.sap.vocabularies.Communication.v1.Contact")>=0){return S(e,a,r,i,n,o)}else if(i.indexOf("com.sap.vocabularies.UI.v1.DataPoint")>=0){if(r&&r.Value&&r.Value.Path){return O(a,r.Value.Path,n)}}}}function S(e,t,a,r,i,n){var o="";var l=e.getInterface(0).getModel();if(l){var s=l.getODataEntityType(t.entityType);if(s){o=E._getNavigationPrefix(l,s,r)}if(a&&a.fn&&a.fn.Path){if(o){if(!n){var u=l.getODataAssociationSetEnd(s,o);if(u&&u.entitySet){t=l.getODataEntitySet(u.entitySet)}return O(t,a.fn.Path,i,o)}}else{return O(t,a.fn.Path,i,o)}}}}function O(e,t,a,r){var i=y(e,t);var n=a?i.getSortRestriction():i.getFilterRestriction();if(!n){return r?r+"/"+t:t}}var V=function(e){if(!e||!e.Visualizations||!e.Visualizations.length||!e.Visualizations[0].AnnotationPath||e.Visualizations[0].AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.LineItem")<0){return undefined}return e.Visualizations[0].AnnotationPath};var E={formatMessage:i,getNewVariable:function(e){var t=e.getProperty();var a={set:function(e,t){e=typeof e==="object"?n({},e):e;if(t){a.value=a.value||{};a.value[t]=e}else{a.value=e}if(typeof a.value==="object"){n(a,a.value)}}};t.push(a);return"/variables/"+(t.length-1)},getMetaModelBinding:function(e){var t=e.getObject();var a=e.getObject("/metaModel");return t&&a.createBindingContext(t)},getBlockForEditableHeaderFacet:function(e,t){var a={controlProperties:{id:o.getStableId({type:"ObjectPageSection",subType:"SmartForm",sFacet:o.getStableId({type:"ObjectPage",subType:"EditableHeaderFacet",sRecordType:t.RecordType,sAnnotationPath:t.Target&&t.Target.AnnotationPath,sAnnotationId:t.ID&&t.ID.String})})},aggregations:{groups:[{metaModelPath:e.getPath()}]}};if(!t.Target){a.aggregations.groups=[]}return a},getBindingForHiddenPath:function(e){if(e["com.sap.vocabularies.UI.v1.Hidden"]){if(e["com.sap.vocabularies.UI.v1.Hidden"].hasOwnProperty("Path")){return"{= !${"+e["com.sap.vocabularies.UI.v1.Hidden"].Path+"} }"}else if(e["com.sap.vocabularies.UI.v1.Hidden"].hasOwnProperty("Bool")){if(e["com.sap.vocabularies.UI.v1.Hidden"].Bool!=="true"&&e["com.sap.vocabularies.UI.v1.Hidden"].Bool!=="false"){m.error(e["com.sap.vocabularies.UI.v1.Hidden"].Bool+" is not a boolean value")}return e["com.sap.vocabularies.UI.v1.Hidden"].Bool!=="true"}return false}return true},getVisibiltyBasedOnImportance:function(e){var t=e["com.sap.vocabularies.UI.v1.Importance"];var a=t&&t.EnumMember;return!a||s.system.desktop||a==="com.sap.vocabularies.UI.v1.ImportanceType/High"||a==="com.sap.vocabularies.UI.v1.ImportanceType/Medium"&&s.system.tablet},getVisibiltyBasedOnImportanceAndHidden:function(e){return E.getVisibiltyBasedOnImportance(e)&&E.getBindingForHiddenPath(e)},getVisibilityBasedOnHeaderInfoContent:function(e){if(e){return E.getVisibiltyBasedOnImportance(e)}return false},getValueListReadOnly:function(t,a,r){var i=t.getInterface(1).getModel();var n=t.getInterface(1).getPath()+"/Value";var o=e.resolvePath(i.getContext(n));var l=o&&i.getObject(o);if(l?.["com.sap.vocabularies.UI.v1.TextArrangement"]){return l["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember!=="com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"}else if(l?.["com.sap.vocabularies.Common.v1.Text"]){return true}else{var s=typeof a==="object"?a:i.getODataEntityType(a);if(s["com.sap.vocabularies.UI.v1.TextArrangement"]){return s["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember!=="com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"}}},getImportanceForTableColumns:function(e){return e["com.sap.vocabularies.UI.v1.Importance"]&&e["com.sap.vocabularies.UI.v1.Importance"].EnumMember&&e["com.sap.vocabularies.UI.v1.Importance"].EnumMember.split("/")[1]||c.Priority.None},getImportanceForTableColumnsWithSemanticKeyTitleAndDescription:function(e,t,a){var r=a&&a.Value;var i=E.getImportanceForTableColumns(a);if(!a["com.sap.vocabularies.UI.v1.Importance"]&&E.isPropertySemanticKey(e,t,r)){return c.Priority.High}return i},getCustomDataForContactPopup:function(e){return JSON.stringify(e).replace(/\}/g,"\\}").replace(/\{/g,"\\{")},checkIsEmailAddress:function(e,t,a){var r=e.getInterface(1).getModel();var i=e.getInterface(1).getPath()+"/Value";var n=sap.ui.model.odata.AnnotationHelper.resolvePath(r.getContext(i));var o=r.getObject(n);if(o["com.sap.vocabularies.Communication.v1.IsEmailAddress"]&&o["com.sap.vocabularies.Communication.v1.IsEmailAddress"].Bool){return"._templateEventHandlers.onSmartFieldPress"}else{return undefined}},getLinkTextForDFwithEmail:function(e,t,a){var r,i;var n=t.Value.Path;var o=e.getInterface(0).getModel();var l=o.getODataEntityType(a.entityType);while(n.indexOf("/")>-1){r=n.split("/")[0];n=n.split("/").slice(1).join("/");i=o.getODataAssociationEnd(l,r);l=o.getODataEntityType(i&&i.type)||l}var s=o.getODataProperty(l,n)||{};var u=s["com.sap.vocabularies.Common.v1.Text"]&&s["com.sap.vocabularies.Common.v1.Text"].Path||t.Value.Path||"";return"{"+u+"}"},isEmailAddressAndMuliplicity:function(e,t,a,r){if(a["com.sap.vocabularies.Communication.v1.IsEmailAddress"]&&a["com.sap.vocabularies.Communication.v1.IsEmailAddress"].Bool==="true"){var i=E.checkMultiplicityForDataFieldAssociation(e,t,r);return!i}else{return false}},renderColumnForConnectedFields:function(e){var t=function(e){return(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&!(e.Inline&&e.Inline.Bool==="true")};if(e.length){if(!e.every(t)){return"true"}else{return"false"}}else{return"false"}},renderColumnHeader:function(e){var t=function(e){return e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"};if(e.length){if(e.every(t)){return"true"}else{return"false"}}},createP13NColumnForConnectedFields:function(e,t,a,r,i){var n="",o="",l={},s={},u=[],c;var p=e.getInterface(0);var f=e.getInterface(1).getModel();var g="";var v=[];var d=[];var m=[];var P="false";r=r&&r.Data;for(var h=0;h<r.length;h++){var y=r[h];f=e.getInterface(0).getModel();s=f.getODataEntityType(f.getContext(e.getInterface(0).getPath()).getObject().entityType);var b;if(y.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(y.Target.AnnotationPath.indexOf("/")>0){var I=y.Target.AnnotationPath.split("/")[0];var T=y.Target.AnnotationPath.split("/")[1].split("@")[1];s=f.getODataEntityType(f.getODataAssociationEnd(s,I).type);b=s[T]}else{b=s[y.Target.AnnotationPath.split("@")[1]]}}if((y.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||y.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&y.Inline&&y.Inline.Bool==="true"||y.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||y.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"){n=E.createP13NColumnForAction(p,y,i)}else if(y.RecordType==="com.sap.vocabularies.UI.v1.DataField"){var F=E.getRelevantDataForAnnotationRecord(f,y.Value.Path,s);s=F.entityType;var C=F.dataFieldValuePath;u=s&&s.property||[];var x;for(var D=0;D<u.length;D++){if(u[D].name===C){x=u[D];break}}n=E.createP13N(e,t,x,y,i)}else if(y.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(y.Target.AnnotationPath.indexOf("com.sap.vocabularies.Communication.v1.Contact")>=0){n=E.createP13NColumnForContactPopUp(e,t,y,b,y.Target.AnnotationPath,i)}else if(y.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.Chart")>=0){n=E.createP13NColumnForChart(e,t,y,b,y.Target.AnnotationPath,i)}else if(b.Visualization){n=E.createP13NColumnForIndicator(e,t,y,b,b.Value,y.Target.AnnotationPath,i)}}if(n){l=JSON.parse(n.replace(/\\/g,""))}if(!g&&l.leadingProperty){g=l.leadingProperty}else{l.leadingProperty&&d.indexOf(l.leadingProperty)===-1?d.push(l.leadingProperty):Function.prototype;l.leadingProperty&&m.indexOf(l.leadingProperty)===-1?m.push(l.leadingProperty):Function.prototype}l.navigationProperty&&v.indexOf(l.navigationProperty)===-1?v.push(l.navigationProperty):Function.prototype;l.additionalProperty&&d.indexOf(l.additionalProperty)===-1?d.push(l.additionalProperty):Function.prototype;l.description&&!m.includes(l.description)?m.push(l.description):Function.prototype;l.unit&&!m.includes(l.unit)?m.push(l.unit):Function.prototype;if(P==="false"){P=l.actionButton}}n="";o=E.createP13NColumnKey(a);c=E._determineColumnIndex(e.getInterface(1));n='\\{"columnKey":"'+o;n+='", "columnIndex":"'+c;n+='", "filterProperty":"'+"";if(g){n+='", "leadingProperty":"'+g;n+='", "sortProperty":"'+g}if(v.length>0){n+='", "navigationProperty":"'+v.join()}if(d.length>0){n+='", "additionalProperty":"'+d.join()}if(m.length>0){n+='", "additionalSortProperty":"'+m.join()}n+='", "actionButton":"'+P+'"';n+=" \\}";return n},getDefaultWidthForTableColumn:function(e,t,a,r,i,n,o){var l=e.getModel(0);var s=l.getODataEntityType(r.entityType);if(E.getTruncateLabelPropertForColumn(a,o)){return undefined}var u=E.getDefaultWidthBasedOnAnnotation(a,n,o);if(u){return u}else if(t&&E.isImageUrl(t)){return"5rem"}else if(a.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||a.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){return"15rem"}else if(i&&i.indexOf("com.sap.vocabularies.UI.v1.Chart")>-1){return"20rem"}else if(t&&t.Visualization){return"6.875rem"}else if(i&&i.indexOf("com.sap.vocabularies.Communication.v1.Contact")>-1){var s=l.getODataAssociationEnd(s,i.split("/")[0]).type;t=l.getODataProperty(l.getODataEntityType(s),t.fn.Path)}var c=a&&a.Value&&a.Value.Path;if(c&&c.indexOf("/")>-1){var p;while(c.indexOf("/")>-1){var f=c.split("/")[0];c=c.split("/").slice(1).join("/");p=l.getODataAssociationEnd(s,f);s=l.getODataEntityType(p&&p.type)||s}r=s}t=t&&E.getPropertyNameForText(e,t,r);u=t&&t.maxLength&&parseInt(t.maxLength,10)+1;if(u){if(u>=20){return"20rem"}else if(u<=3){return"3rem"}else{return u+"rem"}}return"auto"},getColumnWidthForConnectedFields:function(t,a,r,i,n){var o=0;var l=t.getInterface(0).getModel();for(var s=0;s<a.length;s++){if(a[s].Value&&a[s].Value.Path){var u=l.getODataProperty(l.getODataEntityType(r.entityType),a[s].Value.Path);var c=E.getDefaultWidthForTableColumn(t,u,a[s],r,undefined,i,n)}else{var p=l.getContext(t.getInterface(0).getPath()+"/"+s+"/Target");var f=e.resolvePath(p);var u=l.getObject(f);var g=a[s]&&a[s].Target&&a[s].Target.AnnotationPath;var c=E.getDefaultWidthForTableColumn(t,u,a[s],r,g,i,n)}if(c==="auto"){continue}c=parseFloat(c.split("rem",1));if(c>o){o=c}}return o===0?"auto":o+"rem"},setValidationForValueList:function(e){return e&&e["com.sap.vocabularies.Common.v1.ValueListForValidation"]!==undefined?"ValueList":"ValueListNoValidation"},getPropertyNameForText:function(e,t,a){var r=t["sap:text"];if(r){var i=e.getModel(0);var n=i.getODataEntityType(a.entityType);var o;if(r.indexOf("/")>-1){while(r.indexOf("/")>-1){var l=r.split("/")[0];r=r.split("/").slice(1).join("/");o=i.getODataAssociationEnd(n,l);n=i.getODataEntityType(o&&o.type)||n}}for(var s=0;s<=n.property.length;s++){if(n.property[s].name===r){t=n.property[s];break}}}return t},getTruncateLabelPropertForColumn:function(e,t){var a;if(e&&e.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&e.Value&&e.Value.Path){a=e.Value.Path}else if(e&&e.Target&&e.AnnotationPath){a=e.RecordType+"::"+e.Target.AnnotationPath}else if(e&&e.Value&&e.Value.Path){a=e.RecordType+"::"+e.Value.Path}else if(e&&e.Action&&e.String){a=e.RecordType+"::"+e.Action.String}if(!D(t,a).truncateLabel){return true}},getDefaultWidthBasedOnAnnotation:function(e,t,a){if(E.getTruncateLabelPropertForColumn(e,a)){return undefined}if(t===false){return"auto"}else if(e&&e["com.sap.vocabularies.HTML5.v1.CssDefaults"]&&e["com.sap.vocabularies.HTML5.v1.CssDefaults"].width&&e["com.sap.vocabularies.HTML5.v1.CssDefaults"].width.String){return e["com.sap.vocabularies.HTML5.v1.CssDefaults"].width.String}else{return undefined}},getShareButtonVisibility:function(e,t){if(e){return"{= !("+h()+" || ${_templPrivGlobal>/generic/FCL/highestViewLevel} !== "+t+" || ${ui>/createMode}) }"}else{return"{= !("+h()+" || ${ui>/createMode})}"}},getShareOptionVisibility:function(e){if(e){return"{= !("+h()+" || ${_templPrivGlobal>/generic/FCL/highestViewLevel})}"}else{return"{= !("+h()+")}"}},getInsightsButtonVisibility:function(e){return e?"{=!${_templPrivGlobal>/generic/isTeamsModeActive}}":false},tabItemHasPresentationVariant:function(e,t){var a=e[t];return!!(a&&(a.PresentationVariant||a.Visualizations||a.SortOrder))},getPresentationVariant:function(e,t){if(e.Visualizations||e.SortOrder){return e}else if(e.PresentationVariant&&(e.PresentationVariant.Path||e.PresentationVariant.AnnotationPath)){var a=e.PresentationVariant.Path||e.PresentationVariant.AnnotationPath;return t[a.replace("@","")]}else if(e.PresentationVariant){return E.getPresentationVariant(e.PresentationVariant)}},getPresentationVariantVisualisation:function(e,t){var a=e[t];var r=E.getPresentationVariant(a,e);if(r.Visualizations){return r.Visualizations[0].AnnotationPath.split("#")[1]}},getPresentationVariantSortOrder:function(e,t){var a=e[t];var r=E.getPresentationVariant(a,e);if(r.SortOrder){return E.getSortOrder(r.SortOrder)}},getBreakoutActionButtonId:function(e,t){if(e.id){var a=E.getSuffixFromIconTabFilterKey(t);var r=e.id;if(a){r=r.concat(a)}return r}},getIconTabFilterKey:function(e){if(e){if(e.key){return e.key}else{return E.replaceSpecialCharsInId(e.annotationPath)}}},getSuffixFromIconTabFilterKey:function(e){var t=E.getIconTabFilterKey(e);if(t){return"-".concat(t)}else{return""}},getVisibilityForRowActions:function(e,t){if(t.settings.editFlow==="direct"){var a=E.getUpdateRestrictions(e);if(typeof a==="boolean"){return a}else{return"{= ${"+a+"}}"}}else{return true}},getIconTabFilterText:function(e,t,a){var r,i,n,o,l,s,u;if(a){var c=a.AnnotationPath;var p=c&&c.substring(0,c.indexOf("/"));r=e.getInterface(0).getModel();i=r.getProperty("/metaModel");s=i.getODataEntityType(r.getProperty("/entityType"));u=i.getODataAssociationEnd(s,p);l=i.getODataEntityType(u.type)}else{r=e.getModel();i=r.getProperty("/metaModel");if(!!t.entitySet){n=i.getODataEntitySet(t.entitySet);o=n.entityType}else{o=r.getProperty("/entityType")}l=i.getODataEntityType(o)}var f=l[t.annotationPath];if(f&&f.Text){return f.Text.String}},getAltTextForImage:function(e){if(e["com.sap.vocabularies.Common.v1.Text"]){return e["com.sap.vocabularies.Common.v1.Text"].String}},doesActionExist:function(e,t){var a=t["Action"]&&t["Action"].String;a=a&&a.split("/")[1];var r=a&&e.getModel().getODataFunctionImport(a);return!!r},isGroupFacetTitleRequired:function(e,t){return e.annotations.Facet.annotation.Facets.length!==1||e.annotations.Facet.annotation.Label.String!==t.String},buildAnnotatedActionButtonEnablementExpression:function(e,t,a,r,i,n,o){var l,s,u,c;u=t&&t.Action&&t.Action.String;if(u){s=E.getStableIdPartForDatafieldActionButton(t,a,n,o);if(t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(t.RequiresContext&&t.RequiresContext.Bool==="true"){return"{= !!${_templPriv>/generic/controlProperties/"+s+"/enabled}}"}}else if(t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"){c=e.getInterface(0).getModel();l=c.getODataFunctionImport(u);if(!l){m.error("The function import "+u+" is not defined in the metadata. Buttons that call this function import will not behave as expected.");return false}else if(l["sap:action-for"]&&l["sap:action-for"].trim()){return"{= !!${_templPriv>/generic/controlProperties/"+s+"/enabled}}"}}return true}},buildActionButtonsCustomData:function(t,a,r,i,n,o){var l,s,u;var c=[];t=t.getInterface(0);s=t.getModel();if(a){for(var p=0;p<a.length;p++){l=a[p];u=null;if(l.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&l.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")>=0){var f=s.getContext(t.getPath()+"/"+p+"/Target");var g=e.resolvePath(f);var v=s.getObject(g);if(v.Data&&v.Data.length>0){for(var d=0;d<v.Data.length;d++){u=E.generateAnnotatedActionCustomData(v.Data[d],r,n,o);if(u){c.push(u)}}}}else{u=E.generateAnnotatedActionCustomData(l,r,n,o);if(u){c.push(u)}}}}return btoa(JSON.stringify(c))},generateAnnotatedActionCustomData:function(e,t,a,r){var i;if((e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&!(e.Inline&&e.Inline.Bool===true||e.Determining&&e.Determining.Bool===true)&&(e.Action&&(e.Action.String||e.Action.Path))){i=E.getStableIdPartForDatafieldActionButton(e,t,a,r);return{ID:i,RecordType:e.RecordType,Action:e.Action&&(e.Action.String||e.Action.Path)}}},getLabelForDFwithIBN:function(e,t,a,r){var i,n,o,l,s,u;if(t.Label){return t.Label.String}else{i=e.getInterface(0).getModel();if(i&&a){if(r&&r.Target&&r.Target.AnnotationPath){n=E.getTargetEntitySet(i,a,r.Target.AnnotationPath);o=i.getODataEntityType(n.entityType)}else{o=i.getODataEntityType(a.entityType)}if(t.Value&&t.Value.Path||t.IconUrl&&t.IconUrl.Path){u=t.Value&&t.Value.Path?t.Value.Path:t.IconUrl.Path;l=i.getODataProperty(o,u);s=(l["com.sap.vocabularies.Common.v1.Label"]||"").String||"";return s}}}},getLinkTextForDFwithIBN:function(e,t,a,r){var i;var n=e.getInterface(0).getModel();if(n&&a&&t.Value&&t.Value.Path){if(r&&r.Target&&r.Target.AnnotationPath){var o=E.getTargetEntitySet(n,a,r.Target.AnnotationPath);i=n.getODataEntityType(o.entityType)}else{i=n.getODataEntityType(a.entityType)}var l=n.getODataProperty(i,t.Value.Path)||{};if(l["com.sap.vocabularies.Common.v1.Text"]&&l["com.sap.vocabularies.Common.v1.Text"].Path){var s=E.getTextArrangement(i,l);var u="{"+l.name+"}";var c="{"+l["com.sap.vocabularies.Common.v1.Text"].Path+"}";if(s==="descriptionOnly"){u="{= $"+c+" === '' ? '' : $"+c+"}"}else if(s==="idAndDescription"){u="{= $"+u+" === '' ? '' : $"+u+"}"+"{= $"+c+" === '' ? '' : ' (' + ($"+c+") + ')'}"}else if(s==="idOnly"){u="{= $"+u+" === '' ? '' : $"+u+"}"}else{u="{= $"+c+" === '' ? '' : $"+c+"}"+"{= $"+u+" === '' ? '' : ' (' + ($"+u+") + ')'}"}return u}else{var p=(l["com.sap.vocabularies.Common.v1.Text"]||t.Value).Path||"";return"{"+p+"}"}}},getTargetEntitySet:function(e,t,a){var r,i,n,o;r=a.split("/");if(r.length>1){i=r[0]}if(i){n=e.getODataEntityType(t.entityType);o=e.getODataAssociationSetEnd(n,i);if(o&&o.entitySet){return e.getODataEntitySet(o.entitySet)}}return t},getApplicablePathForChartToolbarActions:function(e,t,a){var r=e.getInterface(0).getModel();var i=r.getODataEntityType(a);var n=t&&t.Actions||[];var o,l,s,u=[],c=[],p;for(var f=0;f<n.length;f++){if(n[f].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&(!n[f].Inline||n[f].Inline.Bool!=="true")&&(!n[f].Determining||n[f].Determining.Bool!=="true")){o=n[f].Action&&n[f].Action.String;l=r.getODataFunctionImport(o);if(l){u.push(l)}}}for(var f=0;f<u.length;f++){l=u[f];if(l&&l["sap:action-for"]&&l["sap:action-for"]!==""&&l["sap:action-for"]!==" "&&l["sap:applicable-path"]&&l["sap:applicable-path"]!==""&&l["sap:applicable-path"]!==" "){p=l["sap:applicable-path"];s=r.getODataProperty(i,p);if(s&&s["sap:aggregation-role"]==="dimension"){c.push(p)}else{m.error("AnnotationHelper.js - method getApplicablePathForChartToolbarActions: the applicable-path "+p+" is either pointing to an entity type property which doesn't exist or does not have 'sap:aggregation-role' set to to 'dimension'.")}}}if(c.length>0){return c.join()}},formatSmartField:function(t,a){var r={Path:a.path};return e.simplePath(t.getModel()?t:t.getInterface(0),r)},buildBreadCrumbExpression:function(t,a){var r=a.entityTypeDefinition&&a.entityTypeDefinition["com.sap.vocabularies.UI.v1.HeaderInfo"];var i=r&&r.Title&&r.Title.Value;var n=i&&e.format(t,i);var o=r&&r.TypeName;if(i&&i.Path&&o&&o.String){var l=o.String.replace(/'/g,"\\'");var s="";if(l.indexOf(">")>0){s="{= $"+n+" || $"+l+" }"}else{s="{= $"+n+" || '"+l+"' }"}return s}return n||o&&o.String||a.headerTitle},buildRatingIndicatorSubtitleExpression:function(e){if(e){return"{parts: [{path: '"+e.Path+"'}], formatter: 'RuntimeFormatters.formatRatingIndicatorSubTitle.bind($control)'}"}},buildRatingIndicatorFooterExpression:function(e,t){if(t){return"{parts: [{path: '"+e.Path+"'}, {path: '"+t.Path+"'}], formatter: 'RuntimeFormatters.formatRatingIndicatorFooterText.bind($control)'}"}return"{parts: [{path: '"+e.Path+"'}], formatter: 'RuntimeFormatters.formatRatingIndicatorFooterText.bind($control)'}"},buildRatingIndicatorAggregateCountExpression:function(e){return"{parts: [{path: '"+e?.Path+"'}], formatter: 'RuntimeFormatters.formatRatingIndicatorAggregateCount.bind($control)'}"},getIdForMoreBlockContent:function(e){if(e["com.sap.vocabularies.UI.v1.PartOfPreview"]&&e["com.sap.vocabularies.UI.v1.PartOfPreview"].Bool==="false"){return"::MoreContent"}},checkMoreBlockContent:function(e){return E.checkFacetContent(e,false)},checkBlockContent:function(e){return E.checkFacetContent(e,true)},checkFacetContent:function(e,t){var a;var r=e.getInterface(0);var i=e.getModel().getProperty("",e);var n=e.getPath().split("/Facets");var o=r.getModel().getContext(n[0]);if(r.getModel().getProperty("",o).RecordType==="com.sap.vocabularies.UI.v1.ReferenceFacet"){return o.getPath()}else{if(!i){return}for(var l=0;l<i.length;l++){if(!t){if(i[l]["com.sap.vocabularies.UI.v1.PartOfPreview"]&&i[l]["com.sap.vocabularies.UI.v1.PartOfPreview"].Bool==="false"){a=r.getPath()+"/"+l;break}}else{if(i[l].RecordType!=="com.sap.vocabularies.UI.v1.ReferenceFacet"||(!i[l]["com.sap.vocabularies.UI.v1.PartOfPreview"]||i[l]["com.sap.vocabularies.UI.v1.PartOfPreview"].Bool==="true")){a=r.getPath()+"/"+l;break}}}}return a},getCreationMode:function(e,t,a){var r=t&&t.sections;var i=r&&r[E.getStableIdPartFromFacet(e)];var n;if(i&&i.createMode){n=i.createMode}else if(t&&t.createMode){n=t.createMode}else if(t&&t.tableSettings&&t.tableSettings.createMode){n=t.tableSettings.createMode}else if(a&&a.getTableSettings()&&a.getTableSettings().createMode){n=a.getTableSettings().createMode}else{n=""}if(n==="newPage"){n=""}return n},usesPreliminaryContext:function(e,t){var a=t[E.getStableIdPartFromFacet(e)];return!!(a&&a.preliminaryContext)},isInlineCreateSorting:function(e,t){var a=t&&t.sections;var r=a&&a[E.getStableIdPartFromFacet(e)];return!!(r&&r.disableDefaultInlineCreateSort?r.disableDefaultInlineCreateSort:t&&t.disableDefaultInlineCreateSort)},isImageUrl:function(e){var t=e["com.sap.vocabularies.UI.v1.IsImageURL"]||e["com.sap.vocabularies.UI.v1.IsImageUrl"];return!!t&&t.Bool!=="false"},isPropertySemanticKey:function(e,t,a){var e=e.getInterface(0);var r=e.getModel();var i=r.getODataEntityType(t.entityType);var n=i&&i["com.sap.vocabularies.Common.v1.SemanticKey"];return!!n&&n.some(function(e){return e.PropertyPath===a.Path})},isDescriptionInHeaderInfo:function(e){return!!(e&&e.Description&&e.Description.Value)},formatImageUrl:function(t,a,r,i,n){if(!a){return""}if(a.String){return l.adjustImageUrlPath(a.String,r,n)}if(!(a.Path||a.Apply)){return""}if(i){E.formatWithExpandSimple(t,a)}if(a.Path){var o="{parts: [{path: '"+a.Path+"'}, {value: '"+r+"'}";var s=n?", {value: true}":"";var u="], formatter: 'RuntimeFormatters.formatImageUrl.bind($control)'}";return o+s+u}a.Apply.Parameters[0].Value=l.adjustImageUrlPath(a.Apply.Parameters[0].Value,r);return e.format(t,a)},getClassForHeader:function(e){var t="sapSmartTemplatesObjectPageDynamicPageHeader";if(e&&(e.Path||e.Apply||e.String)){t+=" sapSmartTemplatesObjectPageDynamicPageHeaderImageDiv"}t+=" sapMShowEmpty-CTX";return t},getClassForHeaderTitle:function(e){var t="sapSmartTemplatesObjectPageDynamicPageHeaderTitle sapSmartTemplatesObjectPageDynamicPageHeaderTitleWith";t+=e&&(e.Path||e.Apply||e.String)?"Image sapSmartTemplatesObjectPageDynamicPageHeaderImageDiv":"outImage";return t},getAvatarInitials:function(e){return e&&(e.Path?"{"+e.Path+"}":e.String)||""},formatImageOrTypeUrl:function(e,t,a,r,i){var n=t||a;return E.formatImageUrl(e,n,r,i)},formatHeaderImage:function(e,t,a){return E.formatImageOrTypeUrl(e,t?.ImageUrl,t?.TypeImageUrl,a,true)},getPathWithExpandFromHeader:function(e,t,a,r,i){var n,o;var l=r||i;if(l&&l.Path){var e=e.getInterface(0);var s=e.getModel();var u=s.getODataEntityType(t.entityType);n=u&&E._getNavigationPrefix(s,u,l.Path)}var c="{ path : '"+a+"'";var p=n?", parameters : { expand : '"+n+"'}":"";var f=" }";var o=c+p+f;return o},disableSemanticObjectLinksOnPopups:function(e,t){var a="";if(e&&e.ignoredFields&&t&&t.Value&&t.Value.Path){if(e.ignoredFields[t.Value.Path]){a=t.Value.Path}}return a},getPersistencyKeyForSmartTable:function(){return"listReportFloorplanTable"},getPersistencyKeyForDynamicPageTitle:function(){return"listReportDynamicPageTitle"},getCreateNavigationIntent:function(e,t,a){return T(e,t,a,"create")},getDisplayNavigationIntent:function(e,t,a){return T(e,t,a,"display")},extensionPointFragmentExists:function(e,t){var a=E.getStableIdPartFromFacet(e);if(a===t){return true}else{return false}},formatWithExpandSimple:function(t,a,r){if(!a){return""}var i=[],n,o;var l=t&&t.getModel&&t.getModel();if(!l){t=t.getInterface(0);l=t.getModel()}if(r){o=l.getODataEntityType(r.entityType)}else{var s=/^(\/dataServices\/schema\/\d+\/entityType\/\d+)(?:\/|$)/.exec(t.getPath());if(s&&s.length&&s[0]){var u=l.getProperty(s[0]);var c=l.getODataEntityContainer().namespace;o=l.getODataEntityType(c+"."+u.name)}}if(o){if(a&&a.Path){n=E._getNavigationPrefix(l,o,a.Path);if(n){i.push(n)}}else if(a&&a.Apply&&a.Apply.Name==="odata.concat"){a.Apply.Parameters.forEach(function(e){if(e.Type==="Path"){n=E._getNavigationPrefix(l,o,e.Value);if(n){if(i.indexOf(n)===-1){i.push(n)}}}})}if(i.length>0){var p=t.getSetting("preprocessorsData");if(p){var f=p.rootContextExpand||[];for(var g=0;g<i.length;g++){if(f.indexOf(i[g])===-1){f.push(i[g])}}p.rootContextExpand=f}}}return e.format(t,a)},formatWithExpandSimplePath:function(t,a,r,i){E.getNavigationPathWithExpand(t,a,r);t=t.getInterface(0);if(!!(i&&i.NumberOfFractionalDigits&&i.NumberOfFractionalDigits.Int)){var n={};n.path=a.Path;n.type="sap.ui.model.odata.type.Decimal";n.constraints={scale:i.NumberOfFractionalDigits.Int};return JSON.stringify(n)}E.formatWithExpandSimple(t,a,r);return e.simplePath(t,a)},formatWithExpand:function(t,a,r){E.getNavigationPathWithExpand(t,a,r);t=t.getInterface(0);E.formatWithExpandSimple(t,a,r);return e.format(t,a)},_getNavigationPrefix:function(e,t,a){var r="";var i=a.split("/");if(i.length>1){for(var n=0;n<i.length-1;n++){var o=e.getODataAssociationEnd(t,i[n]);if(o){t=e.getODataEntityType(o.type);if(r){r=r+"/"}r=r+i[n]}else{return r}}}return r},getCurrentPathWithExpand:function(t,a,r,i){t=t.getInterface(0);var n=[],o;var l=t.getModel();var s=l.getODataEntitySet(r.name||"");var u=e.resolvePath(l.getContext(t.getPath()));var c=l.getODataEntityType(r.entityType);n=E.getFacetExpand(u,l,c,s);if(n.length>0){o="{ path : '"+i+"', parameters : { expand : '"+n.join(",")+"'} }"}else{o="{ path : '"+i+"' }"}if(o==="{}"){o=""}return o},getCurrentPathWithExpandForContact:function(t,a,r,i){var n=[],o;t=t.getInterface(0);var l=t.getModel();var s=e.resolvePath(l.getContext(t.getPath()));var u=l.getODataEntityType(r.entityType);n=E.getFacetExpandForContact(s,l,u);if(n.length>0){o="{ path : '"+i+"', parameters : { expand : '"+n.join(",")+"'} }"}else{o="{ path : '"+i+"' }"}if(o==="{}"){o=""}return o},getFacetExpandForContact:function(e,t,a){var r=[],i;var n=function(e){if(e){var i=E._getNavigationPrefix(t,a,e);if(i){if(r.indexOf(i)===-1){r.push(i)}}}};if(e&&e.indexOf("com.sap.vocabularies.Communication.v1.Contact")>-1){i=t.getObject(e)||{};for(var o in i){var l;var s=i[o];if(s&&s.Path){l=s.Path;n(l)}else if(Object.prototype.toString.call(s)==="[object Array]"){for(var u in s){var c=s[u];if(c&&c.uri&&c.uri.Path){l=c.uri.Path}if(c&&c.address&&c.address.Path){l=c.address.Path}n(l)}}}}return r},getNavigationPathWithExpand:function(t,a,r,i){t=t.getInterface(0);var n=t.getModel();var o=n.getODataEntitySet(r.name||"");var l=e.resolvePath(n.getContext(t.getPath()));var s=e.getNavigationPath(t,a);var u=s.replace("{","").replace("}","");var c=n.getODataEntityType(o.entityType);if(u){var p=u.split("/");for(var f=0;f<p.length;f++){var g=E.getNavigationPropertyTargetEntityInfo(n,c,p[f]);o=g.entitySet;c=g.entityType}}else{i=false}var v=false;var d=E.getFacetExpand(l,n,c,o);var m=t.getSetting("preprocessorsData")||{};var P=m.rootContextExpand||[];if(d.length>0){if(u){v=true}else{for(var h=0;h<d.length;h++){if(P.indexOf(d[h])===-1){P.push(d[h])}}m.rootContextExpand=P}}i=i&&(P.indexOf(u)===-1||d.some(function(e){return P.indexOf(u+"/"+e)===-1}));if(v||i){s="{ path : '"+u+"', parameters : { ";if(v){s=s+"expand : '"+d.join(",")+"'";if(i){s=s+", "}}if(i){s=s+"usePreliminaryContext: true, batchGroupId: 'facets'"}s=s+"} }"}if(s==="{}"){s=""}return s},getNavigationPropertyTargetEntityInfo:function(e,t,a){var r={};var i=e.getODataAssociationSetEnd(t,a);if(i&&i.entitySet){r.entitySet=e.getODataEntitySet(i.entitySet);r.entityType=e.getODataEntityType(r.entitySet.entityType)}return r},getFormGroupBindingString:function(e,t,a){var r=E.getNavigationPathWithExpand(e,t,a,true);return r},getFacetExpand:function(e,t,r,i){var n=[],o=[],l,s=[];if(e){s=t.getObject(e)||[]}s=s.Data||s;var u=function(e,l){var s=E._getNavigationPrefix(t,r,e);if(s){if(o.indexOf(s)===-1){o.push(s)}}if(l){try{n=a.getSupportedAnnotationPaths(t,i,e,true)||[]}catch(e){n=[]}for(var u=0;u<n.length;u++){if(o.indexOf(n[u])===-1){o.push(n[u])}}}};var c=function(e){if(e.Type==="LabeledElement"){u(e.Value.Path)}else if(e.Type==="Path"){u(e.Value)}};if(Array.isArray(s)){for(var p=0;p<s.length;p++){l=s[p];if(l.Value&&l.Value.Path){u(l.Value.Path,true)}if(l.Value&&l.Value.Apply&&l.Value.Apply.Name==="odata.concat"){l.Value.Apply.Parameters.forEach(c)}if(l.Action&&l.Action.Path){u(l.Action.Path)}if(l.Target){if(l.Target.Path){u(l.Target.Path)}if(l.Target.AnnotationPath){u(l.Target.AnnotationPath)}}if(l.SemanticObject&&l.SemanticObject.Path){u(l.SemanticObject.Path)}if(l.Url&&l.Url.Path){u(l.Url.Path)}if(l.Url&&l.Url.Apply&&l.Url.Apply.Parameters){l.Url.Apply.Parameters.forEach(c)}if(l.UrlContentType&&l.UrlContentType.Path){u(l.UrlContentType.Path)}}}else{if(s.name){u(s.name,true)}if(s.Value&&s.Value.Path){u(s.Value.Path,true)}if(s.Title&&s.Title.Path){u(s.Title.Path,true)}if(s.Criticality&&s.Criticality.Path){u(s.Criticality.Path,true)}}return o},isSelf:function(e){return e===undefined||e&&e.indexOf("@")===0&&e.indexOf("/")===-1},number:function(e){if(!e){return NaN}else if(e.Decimal){return+e.Decimal}else if(e.Path){return"{"+e.Path+"}"}else{return NaN}},formatColor:function(){function e(e){if(!e){return NaN}else if(e.Decimal){return e.Decimal}else if(e.EnumMember){return"'"+e.EnumMember+"'"}else if(e.Path){return"${"+e.Path+"}"}else{return NaN}}function t(t){var a=t.Criticality;return"{= "+e(a)+" === 'UI.CriticalityType/Negative' ? 'Error' : "+e(a)+"=== 'UI.CriticalityType/Critical' ? 'Critical' : 'Good'}"}function a(t){var a=e(t.Value);var r=t.CriticalityCalculation;return"{= ("+a+" < "+e(r.DeviationRangeLowValue)+" || "+a+" > "+e(r.DeviationRangeHighValue)+") ? 'Error' : ("+a+" < "+e(r.ToleranceRangeLowValue)+" || "+a+" > "+e(r.ToleranceRangeHighValue)+") ? 'Critical' : 'Good'}"}return function(e){if(e.Criticality){return t(e)}else if(e.CriticalityCalculation){return a(e)}}}(),_fnGetCoumnIndexForLastSemKeyColumn:function(e,t){var a=0;var r=-1;for(var i=0;i<e.length;i++){if((e[i].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e[i].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&(!e[i].Inline||e[i].Inline.Bool==="false")){continue}else{r++}for(var n=0;n<t.length;n++){if(e[i].Value&&e[i].Value.Path===t[n].PropertyPath&&a<r){a=r}}}a++;return a},_determineColumnIndexForDraftColumn:function(e,t){var a=e.getPath();if(a.indexOf("com.sap.vocabularies.UI.v1.LineItem")<0){return}var r=e.getModel();var i=a.lastIndexOf("/");var n=a.substring(0,i);var o=r.getObject(n);if(o){var l=o["com.sap.vocabularies.Common.v1.SemanticKey"];if(!l){return 1}}return E._fnGetCoumnIndexForLastSemKeyColumn(t,l)},_determineColumnIndex:function(e,t){var a=e.getPath(t);var r=Number(a.slice(a.lastIndexOf("/")+1));var i=a.slice(0,a.lastIndexOf("/"));var n=e.getModel(t).getObject(i);var o=0;for(var l=0;l<r;l++){if((n[l].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||n[l].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&(!n[l].Inline||n[l].Inline.Bool==="false")){continue}else{o++}}return o},suppressP13NDuplicateColumns:function(t,a){var r="";var i={};var n=",";var o=t.getModel();for(var l=0;l<a.length;l++){if(a[l].RecordType==="com.sap.vocabularies.UI.v1.DataField"){if(a[l].Value&&a[l].Value.Path){var s=a[l].Value.Path;i[s]=true}}}for(var l=0;l<a.length;l++){if(a[l].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||a[l].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"){if(a[l].Value&&a[l].Value.Path){var s=a[l].Value.Path;if(!i[s]){r=r+n+s}}}else if(a[l].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var u=o.getContext(t.getPath()+"/"+l+"/Target");var c=e.resolvePath(u);var p=o.getObject(c);if(c.indexOf("com.sap.vocabularies.Communication.v1.Contact")>=0){if(p&&p.fn&&p.fn.Path){var s=p.fn.Path;if(!i[s]){r=r+n+s}}}else if(c.indexOf("com.sap.vocabularies.UI.v1.DataPoint")>=0){if(p&&p.Value&&p.Value.Path){var s=p.Value.Path;if(!i[s]){r=r+n+s}}}else if(c.indexOf("com.sap.vocabularies.UI.v1.Chart")>=0){if(a[l].Target&&a[l].Target.AnnotationPath){var s=a[l].Target.AnnotationPath.split("com.sap.vocabularies.UI.v1.Chart#")[1];if(!i[s]){r=r+n+s}}}}}if(r.length>0){r=r.substring(1)}return r},createP13NForDraftObject:function(e,t){var a=E._determineColumnIndexForDraftColumn(e,t);var r="Editing Status";var i='\\{"columnKey":"'+r+'", "columnIndex":"'+a+'" \\}';return i},createP13NColumnForAction:function(e,t,a){var r=E._determineColumnIndex(e,0);var i=E.createP13NColumnKey(t);var n;if(t&&t.Value&&t.Value.Path){var o='\\{"columnKey":"'+i+'", "leadingProperty":"'+t.Value.Path+'", "columnIndex":"'+r;n=t.RecordType+"::"+t.Value.Path;var l=y(e,t.Value.Path);var s=l.getFilterRestriction();var u=l.getSortRestriction();if(!u){o+='", "sortProperty":"'+t.Value.Path}if(!s){o+='", "filterProperty":"'+t.Value.Path}}else{n=t.RecordType+"::"+t.Action.String;var o='\\{"columnKey":"'+i+'", "columnIndex":"'+r}var c=D(a,n);if(t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"){if(t.EdmType==="Edm.String"){o+='", "type":"string'}o+='", "autoColumnWidth":\\{"min":2,"max":19,"truncateLabel":'+c.truncateLabel+'\\}, "actionButton":"true" \\}'}else{o+='", "actionButton":"true" \\}'}return o},createP13NColumnForContactPopUp:function(e,t,a,r,i,n){var o="";var l="";var s=e.getInterface(0).getModel();if(s){var u=s.getODataEntityType(t.entityType);if(u){l=E._getNavigationPrefix(s,u,i)}}var c=E.createP13NColumnKey(a);var p=a.RecordType+"::"+a.Target.AnnotationPath;var f=D(n,p);o+='\\{"columnKey":"'+c;if(r&&r.fn&&r.fn.Path){if(l){var g=s.getODataAssociationSetEnd(u,l);if(g&&g.entitySet){t=s.getODataEntitySet(g.entitySet)}var v=y(t,r.fn.Path);var d=v.getFilterRestriction();var m=v.getSortRestriction();o+='", "leadingProperty":"'+l+"/"+r.fn.Path+'", "additionalProperty":"'+l;if(!m){o+='", "sortProperty":"'+l+"/"+r.fn.Path}if(!d){o+='", "filterProperty":"'+l+"/"+r.fn.Path}if(r.fn.EdmType==="Edm.String"){o+='", "type":"'+"string"}}else{var v=y(t,r.fn.Path);var d=v.getFilterRestriction();var m=v.getSortRestriction();o+='", "leadingProperty":"'+r.fn.Path+'", "filterProperty":"'+r.fn.Path+'", "additionalProperty":"'+r.fn.Path;if(!m){o+='", "sortProperty":"'+r.fn.Path}if(!d){o+='", "filterProperty":"'+r.fn.Path}}}o+='", "navigationProperty":"'+l;var P=e.getInterface(1);var h=E._determineColumnIndex(P);if(h){o+='", "columnIndex":"'+h}o+='", "autoColumnWidth":\\{"min":2,"max":19,"truncateLabel":'+f.truncateLabel+',"visibleField":"'+l+"/"+r.fn.Path+'"\\}\\}';return o},createP13NColumnForIndicator:function(e,t,a,r,i,n,o){var l="";var s="";var u=[];var c=e.getInterface(0).getModel();if(c){var p=c.getODataEntityType(t.entityType);if(p){s=E._getNavigationPrefix(c,p,n)}}var f=E.createP13NColumnKey(a);var g=a.RecordType+"::"+a.Target.AnnotationPath;var v=D(o,g);l='\\{"columnKey":"'+f;if(s){s=s+"/"}if(r.Value&&r.Value.Path){l+='", "leadingProperty":"'+s+r.Value.Path;u.push(s+r.Value.Path)}if(r.TargetValue&&r.TargetValue.Path){u.push(s+r.TargetValue.Path)}if(r.Criticality&&r.Criticality.Path){u.push(s+r.Criticality.Path)}if(u.length>0){var d="";u.forEach(function(e){if(d){d=d+","}d=d+e});l+='", "additionalProperty":"'+d}var m=e.getInterface(1);var P=E._determineColumnIndex(m);if(P){l+='", "columnIndex":"'+P}if(r&&r.Value&&r.Value.Path){var h=y(t,r.Value.Path);var b=h.getFilterRestriction();var I=h.getSortRestriction();if(!I){l+='", "sortProperty":"'+r.Value.Path}if(!b){l+='", "filterProperty":"'+r.Value.Path}}l+='", "autoColumnWidth":\\{"truncateLabel":'+v.truncateLabel+"\\}\\}";return l},createP13NColumnForChart:function(e,t,a,r,i,n){var o="",l=[],s="";var u=e.getInterface(0).getModel();if(u){var c=u.getODataEntityType(t.entityType);if(c){s=E._getNavigationPrefix(u,c,i)}}var p=E.createP13NColumnKey(a);var f=a.RecordType+"::"+a.Target.AnnotationPath;var g=D(n,f);if(s){o='\\{"columnKey":"'+p+'", "leadingProperty":"'+s;s=s+"/"}else{o='\\{"columnKey":"'+p}if(Array.isArray(r.Dimensions)){r.Dimensions.forEach(function(e){l.push(s+e.PropertyPath)})}if(Array.isArray(r.Measures)){r.Measures.forEach(function(e){l.push(s+e.PropertyPath)})}if(l.length>0){o+='", "additionalProperty":"'+l.join()}var v=e.getInterface(1);var d=E._determineColumnIndex(v);if(d){o+='", "columnIndex":"'+d}o+='", "autoColumnWidth":\\{"truncateLabel":'+g.truncateLabel+"\\}\\}";return o},createP13NColumnKey:function(e){var t="";var a="template";var r="::";if(e.RecordType==="com.sap.vocabularies.UI.v1.DataField"){t=e.Value.Path}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"){t=a+r+"DataFieldWithIntentBasedNavigation"+r+e.SemanticObject.String+r+e.Action.String+r+e.Value.Path}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"){t=a+r+"DataFieldWithNavigationPath"+r+e.Value.Path}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){t=a+r+"DataFieldForIntentBasedNavigation"+r+e.SemanticObject.String+r+e.Action.String}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"){t=a+r+"DataFieldForAction"+r+e.Action.String}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(e.Target.AnnotationPath.indexOf("@com.sap.vocabularies.Communication.v1.Contact")>=0||e.Target.AnnotationPath.indexOf("@com.sap.vocabularies.UI.v1.DataPoint")>=0||e.Target.AnnotationPath.indexOf("@com.sap.vocabularies.UI.v1.FieldGroup")>=0||e.Target.AnnotationPath.indexOf("@com.sap.vocabularies.UI.v1.Chart")>=0){t=a+r+"DataFieldForAnnotation"+r+e.Target.AnnotationPath;t=t.replace("@","")}}return t},createP13NFileUploader:function(e,t,a){var r=e.getModel(0).getODataEntityType(t.entityType);var i="";var n=r&&r["Org.OData.Core.V1.ContentDisposition"];var o=n&&n.Filename&&n.Filename.Path;var l=D(a,o);var s=r["com.sap.vocabularies.Common.v1.FieldControl"]&&r["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(o){i='\\{"columnKey":"'+o+'", "leadingProperty":"'+o;if(s){i+='", "additionalProperty":"'+s}i+='", "autoColumnWidth":\\{"min":2,"max":19,"truncateLabel":'+l.truncateLabel+"\\}\\}"}return i},createP13N:function(e,t,a,r,i,n,o){var l="",s=[],u="",c;if(r.RecordType==="com.sap.vocabularies.UI.v1.DataField"||r.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"||r.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(r.Value.Path){var p=E.createP13NColumnKey(r);if(r&&r.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&r.Value&&r.Value.Path){c=r.Value.Path}else{c=r.RecordType+"::"+r.Value.Path}l='\\{"columnKey":"'+p+'", "leadingProperty":"'+r.Value.Path;var f=e.getInterface(0).getModel();if(f){var g=f.getODataEntityType(t.entityType);if(g){if(a["com.sap.vocabularies.Common.v1.Text"]&&a["com.sap.vocabularies.Common.v1.Text"].Path){var v=E.getTextArrangement(g,r);if(v){l+='", "description":"'+a["com.sap.vocabularies.Common.v1.Text"].Path+'", "displayBehaviour":"'+v}}u=E._getNavigationPrefix(f,g,r.Value.Path);if(u){u=u+"/"}}}}else if(r.Value.Apply&&r.Value.Apply.Name==="odata.concat"){r.Value.Apply.Parameters.forEach(function(e){if(e.Type==="Path"){if(!l){l='\\{"columnKey":"'+e.Value+'", "leadingProperty":"'+e.Value}else{s.push(e.Value)}}})}if(a.type==="Edm.DateTime"&&a["sap:display-format"]==="Date"){l+='", "type":"date'}else if(a.type==="Edm.String"){l+='", "type":"string'}if(r.Criticality&&r.Criticality.Path){s.push(r.Criticality.Path)}if(a["com.sap.vocabularies.Common.v1.Text"]&&a["com.sap.vocabularies.Common.v1.Text"].Path){s.push(u+a["com.sap.vocabularies.Common.v1.Text"].Path)}var d=a["Org.OData.Measures.V1.ISOCurrency"]||a["Org.OData.Measures.V1.Unit"];if(d&&d.Path){s.push(d.Path);l+='", "unit":"'+d.Path}if(a["com.sap.vocabularies.Common.v1.FieldControl"]&&a["com.sap.vocabularies.Common.v1.FieldControl"].Path){s.push(u+a["com.sap.vocabularies.Common.v1.FieldControl"].Path)}if(r["RecordType"]==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&r.Url&&r.Url.Apply&&r.Url.Apply.Parameters){r.Url.Apply.Parameters.forEach(function(e){if(e.Type==="LabeledElement"){s.push(e.Value.Path)}})}if(r["RecordType"]==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&r.Url&&r.Url.Path){s.push(r.Url.Path)}if(s.length>0){l+='", "additionalProperty":"'+s.join()}var m=y(t,a.name);var P=m.getFilterRestriction();var h=m.getSortRestriction();var b=E.checkMultiplicityForDataFieldAssociation(e,t,r);if(!h){if(b){l+='", "sortProperty":"'+""}else if(u){l+='", "sortProperty":"'+u+a.name}else{l+='", "sortProperty":"'+a.name}}if(!P){if(b){l+='", "filterProperty":"'+""}else{l+='", "filterProperty":"'+a.name}}var I=e.getInterface(2);var T=E._determineColumnIndex(I);if(T>=0){l+='", "columnIndex":"'+T}var F=D(i,c);l+='", "autoColumnWidth":\\{"min":2,"max":19,"truncateLabel":'+F.truncateLabel+"\\}\\}"}return l},getSortProperty:function(e,t,a,r,i,n){var o=true;return A(e,t,a,r,i,o,n)},getFilterProperty:function(e,t,a,r,i,n){var o=false;return A(e,t,a,r,i,o,n)},fnCheckFirstEmail:function(e){return e&&e.value},getSortOrder:function(e){var t="";for(var a=0;a<e.length;a++){if(!t){t=e[a].Property.PropertyPath}else{t=t+", "+e[a].Property.PropertyPath}if(e[a].Descending){t=t+" "+e[a].Descending.Bool}}return t},replaceSpecialCharsInId:function(e){if(e.indexOf(" ")>=0){m.error("Annotation Helper: Spaces are not allowed in ID parts. Please check the annotations, probably something is wrong there.")}return e.replace(/@/g,"").replace(/\//g,"::").replace(/#/g,"::")},getStableIdPartFromDataField:function(e){var t="",a="",r;if(e.RecordType&&e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"){return E.replaceSpecialCharsInId(e.Action.String)}else if(e.RecordType&&(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation")){if(e.SemanticObject.String){a=E.replaceSpecialCharsInId(e.SemanticObject.String)}else if(e.SemanticObject.Path){a=E.replaceSpecialCharsInId(e.SemanticObject.Path)}if(e.Action&&e.Action.String){a=a+"::"+E.replaceSpecialCharsInId(e.Action.String)}else if(e.Action&&e.Action.Path){a=a+"::"+E.replaceSpecialCharsInId(e.Action.Path)}return a}else if(e.RecordType&&e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){return E.replaceSpecialCharsInId(e.Target.AnnotationPath)}else if(e.IconUrl&&(e.IconUrl.Path||e.IconUrl.String)){if(e.IconUrl.Path){a=E.replaceSpecialCharsInId(e.IconUrl.Path)}else if(e.IconUrl.String){r=e.IconUrl.String.replace("://","-");a=E.replaceSpecialCharsInId(r)}return a}else if(e.Value&&e.Value.Path){return E.replaceSpecialCharsInId(e.Value.Path)}else if(e.Value&&e.Value.Apply&&e.Value.Apply.Name==="odata.concat"){for(var i=0;i<e.Value.Apply.Parameters.length;i++){if(e.Value.Apply.Parameters[i].Type==="Path"){if(t){t=t+"::"}t=t+E.replaceSpecialCharsInId(e.Value.Apply.Parameters[i].Value)}}return t}else{m.error("Annotation Helper: Unable to create a stable ID. Please check the annotations.")}},getStableIdPartFromDataPoint:function(e){var t="";if(e.Value&&e.Value.Path){return E.replaceSpecialCharsInId(e.Value.Path)}else if(e.Value&&e.Value.Apply&&e.Value.Apply.Name==="odata.concat"){for(var a=0;a<e.Value.Apply.Parameters.length;a++){if(e.Value.Apply.Parameters[a].Type==="Path"){if(t){t=t+"::"}t=t+E.replaceSpecialCharsInId(e.Value.Apply.Parameters[a].Value)}}return t}else{m.error("Annotation Helper: Unable to create stable ID derived from annotations.")}},getStableIdPartFromFacet:function(e){return o.getStableId({type:"ObjectPage",subType:"Facet",bIsHeaderFacet:typeof this.getContext==="function"&&this.getContext()&&this.getContext().getPath()&&this.getContext().getPath().indexOf("com.sap.vocabularies.UI.v1.HeaderFacets")>=0,sRecordType:e.RecordType,sAnnotationPath:e.Target&&e.Target.AnnotationPath,sAnnotationId:e.ID&&e.ID.String})||P(e)},getVisibilityForExtensionPointReplaceHeader:function(e,t){var a="ReplaceHeaderExtensionFacet|"+e;var r=t[a];if(r&&r["bVisibleOnEdit"]===false){return false}return true},extensionPointReplaceHeaderExists:function(e,t){if(t){var a="ReplaceHeaderExtensionFacet|"+e;return t[a]}return false},getVisibilityForExtensionPointNoImage:function(e,t){var a="NoImageExtensionFacet|"+e;var r=t[a];if(r&&r["bVisibleOnEdit"]===false){return false}return true},extensionPointNoImageExists:function(e,t){if(t){var a="NoImageExtensionFacet|"+e;return t[a]}return false},getVisibilityForExtensionPointAfterImage:function(e,t){var a="AfterImageExtensionFacet|"+e;var r=t[a];if(r&&r["bVisibleOnEdit"]===false){return false}return true},extensionPointAfterImageExists:function(e,t){if(t){var a="AfterImageExtensionFacet|"+e;return t[a]}return false},avatarImageSourceExists:function(e,t,a){if(t&&t.String&&t.String.includes("sap-icon://")){return false}var r=E.formatImageUrl(e,t,a);return!!r},getVisibilityForExtensionPointBeforeSimpleHeaderFacet:function(e,t,a,r){var i;var n=E.getStableIdPartFromFacet(t);if(t.Target.AnnotationPath.indexOf("DataPoint")>0){i=E.getStableIdPartFromDataPoint(r)}else{i=E.getStableIdPartFromDataField(r)}var o=n+"::"+i;var l="BeforeSimpleHeaderFacet|"+e+"|headerEditable::"+o;var s=a[l];if(s&&s["bVisibleOnEdit"]===false){return false}return true},extensionPointBeforeSimpleHeaderFacetExists:function(e,t,a,r){if(a){var i;var n=E.getStableIdPartFromFacet(t);if(t.Target.AnnotationPath.indexOf("DataPoint")>0){i=E.getStableIdPartFromDataPoint(r)}else{i=E.getStableIdPartFromDataField(r)}var o=n+"::"+i;var l="BeforeSimpleHeaderFacet|"+e+"|headerEditable::"+o;return a[l]}return false},getVisibilityForExtensionPointReplaceSimpleHeaderFacet:function(e,t,a,r){var i;var n=E.getStableIdPartFromFacet(t);if(t.Target.AnnotationPath.indexOf("DataPoint")>0){i=E.getStableIdPartFromDataPoint(r)}else{i=E.getStableIdPartFromDataField(r)}var o=n+"::"+i;var l="ReplaceSimpleHeaderFacet|"+e+"|headerEditable::"+o;var s=a[l];if(s&&s["bVisibleOnEdit"]===false){return false}return true},extensionPointReplaceSimpleHeaderFacetExists:function(e,t,a,r){if(a){var i;var n=E.getStableIdPartFromFacet(t);if(t.Target.AnnotationPath.indexOf("DataPoint")>0){i=E.getStableIdPartFromDataPoint(r)}else{i=E.getStableIdPartFromDataField(r)}var o=n+"::"+i;var l="ReplaceSimpleHeaderFacet|"+e+"|headerEditable::"+o;return a[l]}return false},getVisibilityForExtensionPointAfterSimpleHeaderFacet:function(e,t,a,r){var i;var n=E.getStableIdPartFromFacet(t);if(t.Target.AnnotationPath.indexOf("DataPoint")>0){i=E.getStableIdPartFromDataPoint(r)}else{i=E.getStableIdPartFromDataField(r)}var o=n+"::"+i;var l="AfterSimpleHeaderFacet|"+e+"|headerEditable::"+o;var s=a[l];if(s&&s["bVisibleOnEdit"]===false){return false}return true},extensionPointAfterSimpleHeaderFacetExists:function(e,t,a,r){if(a){var i;var n=E.getStableIdPartFromFacet(t);if(t.Target.AnnotationPath.indexOf("DataPoint")>0){i=E.getStableIdPartFromDataPoint(r)}else{i=E.getStableIdPartFromDataField(r)}var o=n+"::"+i;var l="AfterSimpleHeaderFacet|"+e+"|headerEditable::"+o;return a[l]}return false},getVisibilityForExtensionPointBeforeHeaderFacet:function(e,t,a){var r="BeforeHeaderFacet|"+e+"|headerEditable::"+E.getStableIdPartFromFacet(t);var i=a[r];if(i&&i["bVisibleOnEdit"]===false){return false}return true},extensionPointBeforeHeaderFacetExists:function(e,t,a){if(a){var r="BeforeHeaderFacet|"+e+"|headerEditable::"+E.getStableIdPartFromFacet(t);return a[r]}return false},getVisibilityForExtensionPointReplaceHeaderFacet:function(e,t,a){var r="ReplaceHeaderFacet|"+e+"|headerEditable::"+E.getStableIdPartFromFacet(t);var i=a[r];if(i&&i["bVisibleOnEdit"]===false){return false}return true},extensionPointReplaceHeaderFacetExists:function(e,t,a){if(a){var r="ReplaceHeaderFacet|"+e+"|headerEditable::"+E.getStableIdPartFromFacet(t);return a[r]}return false},getVisibilityForExtensionPointAfterHeaderFacet:function(e,t,a){var r="AfterHeaderFacet|"+e+"|headerEditable::"+E.getStableIdPartFromFacet(t);var i=a[r];if(i&&i["bVisibleOnEdit"]===false){return false}return true},extensionPointAfterHeaderFacetExists:function(e,t,a){if(a){var r="AfterHeaderFacet|"+e+"|headerEditable::"+E.getStableIdPartFromFacet(t);return a[r]}return false},extensionPointBeforeHeaderDataPointExists:function(e,t,a){if(a){var r="BeforeHeaderDataPoint|"+e+"|"+E.getStableIdPartFromDataPoint(t);return a[r]}return false},extensionPointReplaceHeaderDataPointExists:function(e,t,a){if(a){var r="ReplaceHeaderDataPoint|"+e+"|"+E.getStableIdPartFromDataPoint(t);return a[r]}return false},extensionPointAfterHeaderDataPointExists:function(e,t,a){if(a){var r="AfterHeaderDataPoint|"+e+"|"+E.getStableIdPartFromDataPoint(t);return a[r]}return false},getObjectPageExtensions:function(e){var t=e.getObject();for(var a in t){if(a.split("|").length===4&&!(t[a]["sap.ui.generic.app"]&&t[a]["sap.ui.generic.app"]["key"])){n(t[a],{"sap.ui.generic.app":{key:a.split("|")[3]}})}}e.getModel().setProperty("/manifestViewExtensions",t);return"/manifestViewExtensions"},extensionPointBeforeSubSectionExists:function(e,t,a){if(a){var r="BeforeSubSection|"+e+"|"+t;return a[r]}return false},extensionPointAfterSubSectionExists:function(e,t,a){if(a){var r="AfterSubSection|"+e+"|"+t;return a[r]}return false},extensionPointReplaceSubSectionExists:function(e,t,a){if(a){var r="ReplaceSubSection|"+e+"|"+t;return a[r]}return false},getExtensionPointFacetTitle:function(t,a,r,i){var n=r[a];return n&&n["sap.ui.generic.app"]&&n["sap.ui.generic.app"].title||e.format(t,i)},getExtensionPointAfterFacetTitle:function(e,t,a){var r="AfterFacet|"+e+"|"+E.getStableIdPartFromFacet(t);var i=a[r];if(i&&i["sap.ui.generic.app"]&&i["sap.ui.generic.app"].title){return i["sap.ui.generic.app"].title}},getExtensionPointBeforeSubSectionTitle:function(e,t,a){var r="BeforeSubSection|"+e+"|"+t;var i=a[r];if(i&&i["sap.ui.generic.app"]&&i["sap.ui.generic.app"].title){return i["sap.ui.generic.app"].title}},getExtensionPointAfterSubSectionTitle:function(e,t,a){var r="AfterSubSection|"+e+"|"+t;var i=a[r];if(i&&i["sap.ui.generic.app"]&&i["sap.ui.generic.app"].title){return i["sap.ui.generic.app"].title}},getExtensionPointReplaceSubSectionTitle:function(e,t,a){var r="ReplaceSubSection|"+e+"|"+t;var i=a[r];if(i&&i["sap.ui.generic.app"]&&i["sap.ui.generic.app"].title){return i["sap.ui.generic.app"].title}},getColumnListItemType:function(e,t,a,r,i,n){var o=!r.level;var l=o&&t&&t.some(function(e){return e.navigationProperty});var s=i||o;return F(e,t,a,n,s,false,l,o)},getRowActionCountForDetailPage:function(e,t,a,r,i){return C(e,t,a,r,i)},getRowActionCountForListReport:function(e,t,a,r){return C(e,t,a,"",true)},hasSubObjectPage:function(e,t){return b(e,t)},getUpdateRestrictions:function(e){var t=e["Org.OData.Capabilities.V1.UpdateRestrictions"];if(!t){return true}if(t.Updatable.Bool==="false"){return false}else{if(t["Updatable"].Path){return t["Updatable"].Path}}return true},isRelatedEntityCreatable:function(e,t,a,r,i,n,o,l,s,u){var c=E.hasSubObjectPage(a,r),p=E.getCreationMode(i,n,u),f=["inline","creationRows","creationRowsHiddenInEditMode"].includes(p);if(c||f||l){var g=[],v,d;if(s==="ResponsiveTable"){if(p==="creationRows"){return false}else if(p==="creationRowsHiddenInEditMode"){g.push("!${ui>/createMode}")}}var m=E.getCreatablePath(e,t,a),P=m.creatable;if(P===false){return false}else if(typeof P==="string"){var h=m.negate?"!":"!!";var y=h+"${"+P+"}";g.push(y)}d=o?"${ui>/editable}":"!${ui>/editable}";g.push(d);v=g.join(" && ");return"{= "+v+" }"}return false},isCreationAllowedByBoolAndPathRestrictions:function(e,t,a,r,i){var n=E.areBooleanRestrictionsValidAndPossible(e,t,a,r,i.name);if(!n){return n}var o=E.getCreatablePath(e,i,a),l=o.creatable;if(typeof l==="boolean"){return l}var s=o.negate?"!":"!!";var u=s+"${"+l+"}";return"{= "+u+" }"},buildInlineCreationRowsConfig:function(e,t,a){var r={creatablePath:E.getCreatablePath(e,t,a),requiredProps:E.getRequiredProps(a),nonInsertableProperties:E.getNonInsertableProperties(t,a)};return JSON.stringify(r)},getRequiredProps:function(e){var t=e["Org.OData.Capabilities.V1.InsertRestrictions"]&&e["Org.OData.Capabilities.V1.InsertRestrictions"].RequiredProperties;return t&&t.map(function(e){return e.PropertyPath})||[]},getNonInsertableProperties:function(e,t){var a=e&&e["Org.OData.Capabilities.V1.InsertRestrictions"]&&e["Org.OData.Capabilities.V1.InsertRestrictions"].NonInsertableProperties;if(a){return a}return t&&t["Org.OData.Capabilities.V1.InsertRestrictions"]&&t["Org.OData.Capabilities.V1.InsertRestrictions"].NonInsertableProperties},getCreatablePath:function(e,t,a){var r={creatable:true};var i=e.getInterface(0).getModel();var n=t["Org.OData.Capabilities.V1.InsertRestrictions"];var o=i.getODataEntityType(t.entityType);var l;var s;l=E.handleNavigationRestrictions(i,t,a,"Insertable");if(l&&l["Insertable"]){if(l["Insertable"].Path){s=l["Insertable"].Path;r.creatable=s}}else if(n&&n.NonInsertableNavigationProperties&&n.NonInsertableNavigationProperties.length>0){for(var u=0;u<n.NonInsertableNavigationProperties.length;u++){var c=n.NonInsertableNavigationProperties[u];var p=E._getNonInsertableNavigationPropertyPath(c);if(p){var f=i.getODataAssociationSetEnd(o,p);if(f&&f.entitySet===a.name){if(c.If&&c.If.length===2){var g=c.If[0];s=g.Not?g.Not.Path:g.Path;if(x(i,t.entityType,s)){E._actionControlExpand(e,s,o.name);r.creatable=s;r.negate=!g.Not}else{r.creatable=false;m.warning("Creatable-Path is not valid. Creation for "+a.name+" is disabled")}}else{r.creatable=false}break}}}}return r},_getNonInsertableNavigationPropertyPath:function(e){var t;if(e.NavigationPropertyPath){t=e.NavigationPropertyPath}else if(e.If){t=e.If[1].NavigationPropertyPath}return t},areBooleanRestrictionsValidAndPossible:function(e,t,a,r,i,n){var o;var l=e.getInterface(0).getModel();var s=a.entityType;var u,c,p;if(i){o=l.getODataEntitySet(i);p=o.entityType}var f=E.handleNavigationRestrictions(l,o,a,r);if(f){u=f[r];c=p}else{u=t&&t[r];c=s}var g=!u||(u.Bool?!u.Path:!!u.Path&&x(l,c,u.Path));if(!g){m.error("Service Broken: Restrictions annotations for entity type "+s+" for section '"+r+"' are invalid.")}return g&&(!!n||!u||u.Bool!=="false")},handleNavigationRestrictions:function(e,t,a,r){if(!t){return false}var i={Insertable:"InsertRestrictions",Deletable:"DeleteRestrictions",Updatable:"UpdateRestrictions"};var n,o;var l=t["Org.OData.Capabilities.V1.NavigationRestrictions"];if(l&&l.RestrictedProperties){var s=l.RestrictedProperties;for(n in s){o=s[n];var u=e.getODataEntityType(t.entityType);var c=o.NavigationProperty.NavigationPropertyPath;var p=e.getODataAssociationSetEnd(u,c);if(p&&p.entitySet===a.name&&o[i[r]]){return o[i[r]]}}}return false},_isPropertyPathBoolean:function(e,t,a){return x(e,t,a)},_actionControlExpand:function(e,t,a){var r=[],i;e=e.getInterface(0);var n=e.getModel();var o=n.getODataEntityType(a);if(t){i=E._getNavigationPrefix(n,o,t);if(i){r.push(i)}}if(r.length>0){var l=e.getSetting("preprocessorsData");if(l){var s=l.rootContextExpand||[];for(var u=0;u<r.length;u++){if(s.indexOf(r[u])===-1){s.push(r[u])}}l.rootContextExpand=s}}},_mapTextArrangement4smartControl:function(e){var t="descriptionAndId";switch(e){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":t="idAndDescription";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate":t="idOnly";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":t="descriptionOnly";break;default:break}return t},getTextArrangementForSmartControl:function(e,t,a){e=e.getInterface(0);var r=e.getModel();var i=r.getODataEntityType(a.entityType);var n="descriptionAndId";if(t?.Value?.Path&&r.getODataProperty(i,t.Value.Path)){var o=r.getODataProperty(i,t.Value.Path)["com.sap.vocabularies.Common.v1.Text"];if(o&&o["com.sap.vocabularies.UI.v1.TextArrangement"]&&o["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember){n=E._mapTextArrangement4smartControl(o["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember);return n}}if(i["com.sap.vocabularies.UI.v1.TextArrangement"]&&i["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember){n=E._mapTextArrangement4smartControl(i["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember);return n}return n},getTitle:function(e,t,a){var r;var i=E.getTextArrangementObject(e,t,a);if(i){r=E.getTitleTextArrangementBindingPath(i.textArrangement,i.propertyPath,i.textPath)}return r},getDescription:function(e,t,a){var r;var i=E.getTextArrangementObject(e,t,a);if(i){r=E.getDescriptionTextArrangementBindingPath(i.textArrangement,i.propertyPath,i.textPath)}return r},getTextArrangementObject:function(e,t,a){var r,i,n;if(t){i=t.name;var o=t["com.sap.vocabularies.Common.v1.Text"];if(o){n=o.Path}r=E.getTextArrangement(e,t);return{textArrangement:r,propertyPath:i,textPath:n}}},getTextArrangement:function(e,t){var a;if(t["com.sap.vocabularies.UI.v1.TextArrangement"]&&t["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember){a=E._mapTextArrangement4smartControl(t["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember)}if(!a){var r=t["com.sap.vocabularies.Common.v1.Text"];if(r&&r["com.sap.vocabularies.UI.v1.TextArrangement"]&&r["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember){a=E._mapTextArrangement4smartControl(r["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember)}}if(!a){if(e&&e["com.sap.vocabularies.UI.v1.TextArrangement"]&&e["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember){a=E._mapTextArrangement4smartControl(e["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember)}}if(!a){a="descriptionAndId"}return a},getTextArrangementPath:function(e){return e["com.sap.vocabularies.Common.v1.Text"]&&e["com.sap.vocabularies.Common.v1.Text"].Path},isValueHelpTableAvailable:function(e){return!!e.extensions?.find(e=>e.name==="value-list")},getTextArrangementFinalString:function(e,t,a,r){var i=e[t];var n=e[a];if(n){var e="";switch(r){case"descriptionAndId":e=`${n} (${i})`;break;case"idAndDescription":e=`${i} (${n})`;break;case"descriptionOnly":e=`${n}`;break;default:e=`${i}`;break}return e}else{return i}},getTitleTextArrangementBindingPath:function(e,t,a){var r="{"+t+"}";var i="{"+a+"}";if(!a){return r}if(e==="descriptionAndId"){return i}else if(e==="descriptionOnly"){return i}else if(e==="idAndDescription"){return r}else if(e==="idOnly"){return r}},getDescriptionTextArrangementBindingPath:function(e,t,a){var r="{"+t+"}";var i="{"+a+"}";if(!a){return""}if(e==="descriptionAndId"){return r}else if(e==="descriptionOnly"){return""}else if(e==="idAndDescription"){return i}else if(e==="idOnly"){return""}},doesFieldGroupContainOnlyOneMultiLineDataField:function(e,t){if(e.Data.length!==1){return false}if(t["com.sap.vocabularies.UI.v1.MultiLineText"]===undefined||e.Data[0].RecordType!=="com.sap.vocabularies.UI.v1.DataField"){return false}return true},testFormatter:function(e){return"formatted:"+e},getFacetID:function(e,t){return e+"|"+E.getStableIdPartFromFacet(t)},getStableIdPartForDatafieldActionButton:function(e,t,a,r){var i="";var n="";var o="";if(t){o=E.getStableIdPartFromFacet(t)}if(e){n=E.getStableIdPartFromDataField(e)}i=(o!==""?o+"::":"")+"action::"+n;var l=E.getSuffixFromIconTabFilterKey(a);if(l){i=i.concat(l)}if(r){i=i+"::chart"}return i},_hasCustomDeterminingActionsInListReport:function(e,t){if(t&&t[e]){var a=t[e];if(a.Actions){for(var r in a.Actions){if(a.Actions[r].determining){return true}}}}return false},hasDeterminingActionsRespectingApplicablePath:function(e,t,a){var r="";e=e.getInterface(0);if(a){for(var i=0;i<a.length;i++){if(a[i].determining){if(a[i].applicablePath){if(r.length>0){r+=" || "}r+="${path: '"+a[i].applicablePath+"'}"}else{return true}}}}if(t){for(var n=0;n<t.length;n++){if(t[n].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&t[n].Determining&&t[n].Determining.Bool==="true"){var o=e.getModel().getODataFunctionImport(t[n].Action.String,true);var l=e.getModel().getObject(o);if(l["sap:applicable-path"]){if(r.length>0){r+=" || "}r+="${path: '"+l["sap:applicable-path"]+"'}"}else{return"true"}}}}if(r.length>0){return"{= "+r+" || ${ui>/editable}}"}else{return"{ui>/editable}"}},hasDeterminingActions:function(e,t,a){if(t&&a&&a["sap.suite.ui.generic.template.ListReport.view.ListReport"]&&E._hasCustomDeterminingActionsInListReport(t,a["sap.suite.ui.generic.template.ListReport.view.ListReport"]["sap.ui.generic.app"])){return"true"}else if(t&&a&&a["sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage"]&&E._hasCustomDeterminingActionsInListReport(t,a["sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage"]["sap.ui.generic.app"])){return"true"}for(var r=0;r<e.length;r++){if((e[r].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e[r].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&e[r].Determining&&e[r].Determining.Bool==="true"){return"true"}}return"false"},actionControlDetermining:function(e,t,a){if(a["com.sap.vocabularies.UI.v1.Hidden"]){return E.getBindingForHiddenPath(a)}else if(e.level===0||!t){return true}else{return"{path: '"+t+"'}"}},actionControlInline:function(e){if(!e){return true}else{return"{path: '"+e+"'}"}},buildExpressionForProgressIndicatorPercentValue:function(t,a,r){var n="0";if(a.Value&&a.Value.Path){var o="$"+e.format(t,a.Value);var l,s;if(a.TargetValue){l=e.format(t,a.TargetValue);l=a.TargetValue.Path?"$"+l:l}if(r){r=r["Org.OData.Measures.V1.Unit"]||r["Org.OData.Measures.V1.ISOCurrency"];if(r){s=e.simplePath(t,r);s=s&&r.Path?"$"+s:"'"+s+"'"}}var u="({0} > 100 ? 100 : {0} < 0 ? 0 : {0} * 1)";var c="(({1}*1 > 0) ? (({0}*1 > {1}*1) ? 100 : (({0}*1 < 0) ? 0 : ({0} / {1} * 100))) : 0)";var p="'{'= ({2} === ''%'') ? "+u+" : "+c+" '}'";n=i(p,[o,l,s])}return n},buildExpressionForProgressIndicatorDisplayValue:function(t,a,r){var i;var n=function(t,a){var r=(e.format(t,a)||"").replace("{","").replace("}","");var i="{path: '"+r+"'}";return i};i=n(t,a.Value)+", "+n(t,a.TargetValue)+", "+n(t,r);var o="{ parts: ["+i+"], formatter: 'RuntimeFormatters.formatDisplayValueForProgressIndicator.bind($control)' }";return o},getProgressIndicatorTooltip:function(e,t){if(t&&t["com.sap.vocabularies.Common.v1.QuickInfo"]&&t["com.sap.vocabularies.Common.v1.QuickInfo"].String){return t["com.sap.vocabularies.Common.v1.QuickInfo"].String}else{return""}},buildExpressionForProgressIndicatorCriticality:function(t,a){var r=v.None;var n;var o=a.Criticality;if(o){n="'{'= ({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Negative'') || ({0} === ''1'') || ({0} === 1) ? ''"+v.Error+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Critical'') || ({0} === ''2'') || ({0} === 2) ? ''"+v.Warning+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Positive'') || ({0} === ''3'') || ({0} === 3) ? ''"+v.Success+"'' : "+"''"+v.None+"'' '}'";if(o.Path){var l="$"+e.simplePath(t,o);r=i(n,l)}else if(o.EnumMember){var s="'"+o.EnumMember+"'";r=i(n,s)}else{m.warning("Case not supported, returning the default sap.ui.core.ValueState.None")}}else{m.warning("Case not supported, returning the default sap.ui.core.ValueState.None")}return r},buildExpressionForButtonCriticality:function(e){var t=e.Determining;var a=t?u.ButtonType.Default:u.ButtonType.Ghost;var r;var n=e.Criticality;if(n){r="'{'= ({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Negative'') || ({0} === ''1'') || ({0} === 1) ? ''"+u.ButtonType.Reject+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Positive'') || ({0} === ''3'') || ({0} === 3) ? ''"+u.ButtonType.Accept+"'' : "+"''"+u.ButtonType.Default+"'' '}'";if(n.Path){var o="${"+n.Path+"}";a=i(r,o)}else if(n.EnumMember){var l="'"+n.EnumMember+"'";a=i(r,l)}else{m.warning("Case not supported, returning the default sap.m.ButtonType.Default")}}else{m.warning("Case not supported, returning the default"+a)}return a},buildEmphasizedButtonExpression:function(e){if(!e){return u.ButtonType.Emphasized}var t;var a;e.forEach(function(e){var r=e.Criticality;var i=e["com.sap.vocabularies.UI.v1.Hidden"];if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&!a&&r){switch(r.EnumMember){case"com.sap.vocabularies.UI.v1.CriticalityType/Negative":case"com.sap.vocabularies.UI.v1.CriticalityType/Positive":case"1":case 1:case"3":case 3:if(!i){t=u.ButtonType.Default;a=true}t=t||u.ButtonType.Default;break;default:t=u.ButtonType.Emphasized}if(r.Path){t="{= ((${"+r.Path+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Negative') || (${"+r.Path+"} === '1') || (${"+r.Path+"} === 1) "+"|| (${"+r.Path+"} === 'com.sap.vocabularies.UI.v1.CriticalityType/Positive') || (${"+r.Path+"} === '3') || (${"+r.Path+"} === 3)) ? "+"'Default'"+" : "+"'Emphasized'"+" }"}}});return t||u.ButtonType.Emphasized},getEntitySetName:function(e,t){if(!e||!(e.name||t)){m.warning("At least one of the input parameters is undefined. Returning default value for entity set name.");return""}return e.name||t.name},getBreakoutActionEnabledKey:function(e,t){var a=E.getBreakoutActionButtonId(e,t);var r="{_templPriv>/generic/listCommons/breakoutActionsEnabled/"+a+"/enabled}";return r},getControlVisibleTerm:function(e){return"${_templPrivView>/#"+e+"/visible}"},getControlEnabledTerm:function(e){return"${_templPrivView>/#"+e+"/enabled}"},getActionCommandVisibility:function(e,t){return!e||t||"{= "+E.getControlVisibleTerm(e)+" && "+E.getControlEnabledTerm(e)+"}"},buildVisibilityExprOfDataFieldForIntentBasedNaviButton:function(e){if(e["com.sap.vocabularies.UI.v1.Hidden"]){return E.getBindingForHiddenPath(e)}else if(e.RequiresContext&&e.RequiresContext.Bool=="false"&&(!e.Inline||e.Inline.Bool==="false")){var t=e.SemanticObject.String;var a=e.Action.String;return"{= !!${_templPriv>/generic/supportedIntents/"+t+"/"+a+"/visible}}"}else{return true}},searchForFirstSemKey_Title_Description:function(e){var t,a,r,i,n,o,l,s,u,c,p,f,g,v,d,P,h,y;if(!e){return}t=e.getPath();if(t.indexOf("com.sap.vocabularies.UI.v1.LineItem")<0){return}r=t&&t.lastIndexOf("/");i=t.substring(0,r);n=t.substring(r+1);o=e.getModel();p=o&&o.getObject(i);if(p){f=p["com.sap.vocabularies.Common.v1.SemanticKey"]&&p["com.sap.vocabularies.Common.v1.SemanticKey"][0]&&p["com.sap.vocabularies.Common.v1.SemanticKey"][0].PropertyPath;g=p[n];v=p["com.sap.vocabularies.UI.v1.HeaderInfo"];d="";P="";if(v){d=v.Title&&v.Title.Value&&v.Title.Value.Path;P=v.Description&&v.Description.Value&&v.Description.Value.Path}h=g&&g.length;a=t+"/";for(y=0;y<h;y++){if(g[y].RecordType==="com.sap.vocabularies.UI.v1.DataField"&&g[y].Value.Path===f){if(E.isPropertyHidden(g[y])){continue}a=a+y+"/Value/Path";return a}if(g[y].RecordType==="com.sap.vocabularies.UI.v1.DataField"&&g[y].Value.Path===d){if(E.isPropertyHidden(g[y])){continue}l=true;c=y}if(g[y].RecordType==="com.sap.vocabularies.UI.v1.DataField"&&g[y].Value.Path===P){if(E.isPropertyHidden(g[y])){continue}s=true;u=y}}if(l){a=a+c+"/Value/Path";return a}else if(s){a=a+u+"/Value/Path";return a}}else{m.warning("No entity type provided")}},isPropertyHidden:function(e){var t=false;if(e["com.sap.vocabularies.UI.v1.Hidden"]||e["com.sap.vocabularies.Common.v1.FieldControl"]&&e["com.sap.vocabularies.Common.v1.FieldControl"].EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Hidden"){t=true}return t},getColumnHeaderText:function(e,t){var a;if(t.Label){return t.Label.String}else{a=(e["com.sap.vocabularies.Common.v1.Label"]||"").String||e["sap:label"]||"";return a}},getColumnToolTip:function(e,t){var a;if(t.Label){return t.Label.String}else{a=e["sap:quickinfo"]||(e["com.sap.vocabularies.Common.v1.QuickInfo"]||"").String||(e["com.sap.vocabularies.Common.v1.Label"]||"").String||e["sap:label"]||"";return a}},getTextForDataField:function(e){var t=e["com.sap.vocabularies.Common.v1.Text"]&&e["com.sap.vocabularies.Common.v1.Text"].Path;return t},getColumnCellFirstText:function(e,t,a,r){var i,n;n=E.getTextArrangement(a,e);switch(n){case"idAndDescription":i=t.Value.Path;if(!i){i=E.getTextForDataField(e)}break;case"idOnly":i=t.Value.Path;if(!i){i=E.getTextForDataField(e)}break;case"descriptionAndId":case"descriptionOnly":default:i=E.getTextForDataField(e);if(!i){i=t.Value.Path}break}if(i){if(r){return true}else{if(e.type==="Edm.DateTimeOffset"||e.type==="Edm.DateTime"||e.type==="Edm.Time"){var o=E.formatDateTimeForCustomColumn(e.type,i);return o}else{return"{"+i+"}"}}}},getColumnCellSecondText:function(e,t,a,r){var i;i=E.getTitlePath(e,t,a);if(i){if(r){return"{= !!${path: '"+i+"'} }"}else{if(e.type==="Edm.DateTimeOffset"||e.type==="Edm.DateTime"||e.type==="Edm.Time"){var n=E.formatDateTimeForCustomColumn(e.type,i);return n}else{return"{"+i+"}"}}}else{return r?false:undefined}},getTitlePath:function(e,t,a){var r,i;i=E.getTextArrangement(a,e);switch(i){case"idOnly":case"descriptionOnly":break;case"idAndDescription":if(!t.Value.Path){break}r=E.getTextForDataField(e);break;case"descriptionAndId":default:if(!E.getTextForDataField(e)){break}r=t.Value.Path;break}return r},getHeaderVisibility:function(e,t,a){var r,i;r=E.getTitlePath(e,t,a);if(!r){if(e.type==="Edm.DateTimeOffset"||e.type==="Edm.DateTime"||e.type==="Edm.Time"){r=E.getColumnCellFirstText(e,t,a);return"{= "+r+" ? false : true}"}else{r=E.getColumnCellFirstText(e,t,a).replace("{","").replace("}","")}}else{i=E.getTextArrangement(a,e);if(!i||i==="descriptionAndId"){r=E.getColumnCellFirstText(e,t,a).replace("{","").replace("}","")}if(i==="idAndDescription"){r=E.getTitlePath(e,t,a)}}if(r){return"{= !${path: '"+r+"'} }"}return false},formatDateTimeForCustomColumn:function(e,t){if(e==="Edm.DateTimeOffset"){return"{ path: '"+t+"', type: 'sap.ui.model.odata.type.DateTimeOffset', formatOptions: { style: 'medium'}, constraints: {displayFormat: 'Date'}}"}else if(e==="Edm.DateTime"){return"{ path: '"+t+"', type: 'sap.ui.model.odata.type.DateTime', formatOptions: { style: 'medium'}, constraints: {displayFormat: 'Date'}}"}else{return"{ path: '"+t+"', type: 'sap.ui.model.odata.type.Time', formatOptions: { style: 'medium'}}"}},getAdditionalSemanticObjects:function(e){var t;var a=[];for(t in e){if(t.indexOf("com.sap.vocabularies.Common.v1.SemanticObject#")!=-1){a.push(e[t].String)}}if(a.length>0){return"{value: "+JSON.stringify(a).replace(/"/g,"'")+"}"}},getColumnCellFirstTextVisibility:function(e,t,a){var r=true;var i=!!E.getColumnCellFirstText(e,t,a,r);return i},getColumnCellSecondTextVisibility:function(e,t,a){var r=true;var i=E.getColumnCellSecondText(e,t,a,r);return i},isSmartLink:function(e){var t;for(t in e){if(t.indexOf("com.sap.vocabularies.Common.v1.SemanticObject")>=0){return true}}return false},setRowHighlight:function(e,t,a,r){var i=t.entitySet===a?t.isDraft:(t.isDraft||t.level===0)&&r(a);var n=t.level>0&&(i||!t.isDraft);var o=i?"{path: 'IsActiveEntity'}, {path: 'HasActiveEntity'}":"{value: true}, {value: true}";var l=n?"{path: 'ui>/editable'}, {path: '_templPrivMessage>/'}":"{value: false}, {value: ''}";var s=e["com.sap.vocabularies.UI.v1.LineItem@com.sap.vocabularies.UI.v1.Criticality"];var u=s&&s.Path?", {path: '"+s.Path+"'}":"";return"{parts: ["+o+", "+l+u+", {path: ''}], formatter: 'RuntimeFormatters.setInfoHighlight.bind($control)'}"},getDataFieldLabel:function(t,a){if(a.Label){return e.format(t,a.Label)}},getDataFieldValue:function(t,a,r){if(a&&!a.Path&&!a.Apply&&!a.String){return""}var i=e.format(t.getModel()?t:t.getInterface(0),a);if(r){i=i.replace("{","{ mode:'"+r+"', ")}return i},getDataFieldValueSimplePath:function(t,a,r){if(a&&!a.Path&&!a.Apply&&!a.String){return""}var i=e.simplePath(t.getModel()?t:t.getInterface(0),a);if(r){i=i.replace("{","{ mode:'"+r+"', ")}return i},isDataFieldRenderable:function(e,a){e=e.getModel()?e:e.getInterface(0);var r={asExpression:false,path:e.getPath(),value:a,withType:false};var i=r.value,n,o;t.expectType(r,"object");if(i.hasOwnProperty("Type")){o=t.property(r,"Type","string");n=t.descend(r,"Value")}else{["And","Apply","Bool","Date","DateTimeOffset","Decimal","Float","Eq","Ge","Gt","Guid","If","Int","Le","Lt","Ne","Not","Null","Or","Path","PropertyPath","String","TimeOfDay"].forEach(function(e){if(i.hasOwnProperty(e)){o=e;n=t.descend(r,e)}})}switch(o){case"Apply":return true;case"If":return true;case"Path":case"PropertyPath":var l=n.value,s=e.getModel(),u={getModel:function(){return s},getPath:function(){return n.path}};t.expectType(n,"string");var c=t.followPath(u,{Path:l});return!!(c&&c.resolvedPath);case"Bool":case"Date":case"DateTimeOffset":case"Decimal":case"Float":case"Guid":case"Int":case"String":case"TimeOfDay":return true;case"And":case"Eq":case"Ge":case"Gt":case"Le":case"Lt":case"Ne":case"Or":return true;case"Not":return true;case"Null":return true;default:return true}},setNoDataTextForSmartTable:function(e,t){t="::"+e+"--"+t;return"{parts: [{value: '"+t+"'}], formatter: '._templateFormatters.setNoDataTextForSmartTable'}"},getRelevantDataForAnnotationRecord:function(e,t,a){var r,i;while(t.indexOf("/")>-1){r=t.split("/")[0];t=t.split("/").slice(1).join("/");i=e.getODataAssociationEnd(a,r);a=e.getODataEntityType(i&&i.type)}return{entityType:a,association:i,dataFieldValuePath:t}},getTextArrangementForSCFields:function(e,t,a,r){var i=e.getInterface(0).getModel();var n=i.getODataEntityType(a.entityType);var o=t.Value.Path;n=E.getRelevantDataForAnnotationRecord(i,t.Value.Path,n).entityType;var l=n.property||[];var s,u;for(var c=0;c<l.length;c++){if(o===l[c].name){s=l[c]["sap:text"];break}}r=r||[];for(var p=0;p<r.length;p++){if(r[p].RecordType==="com.sap.vocabularies.UI.v1.DataField"&&r[p].Value.Path===s){return"idOnly"}}u=E.getTextArrangementForSmartControl(e,t,a);return u},checkMultiplicityForDataFieldAssociation:function(e,t,a){if(a.Value&&a.Value.Path){var r=a.Value.Path;var i=e&&e.getModel&&e.getModel(0);var n=i&&i.getODataEntityType(t.entityType);var o;if(!(r.indexOf("/")>-1)||!n){return false}while(r.indexOf("/")>-1){var l=r.split("/")[0];r=r.split("/").slice(1).join("/");n=i.getODataEntityType(o&&o.type)||n;o=i.getODataAssociationEnd(n,l)}if(o&&o.multiplicity==="*"){return true}}return false},checkIfDataFieldIsNotForStream:function(e){if(e.Value&&e.Value.Path){var t=e.Value.Path;if(t.endsWith("$value")){return false}return true}},hasQuickViewFacet:function(e,t){return f.escapeSettingsValue(t[e.entityType].sForceLinkRendering)},buildHeaderInfoCustomData:function(e,t){var a="";var r="";var i=false;var n=false;if(t&&t.Title&&t.Title.Value){a=t.Title.Value.Path?t.Title.Value.Path:t.Title.Value.String||"";i=!!t.Title.Value.Path;n=false;if(t&&t.Description&&t.Description.Value){r=t.Description.Value.Path?t.Description.Value.Path:t.Description.Value.String||"";n=!!t.Description.Value.Path}}return'{"headerTitle":"'+a+'","isHeaderTitlePath":'+i+',"headerSubTitle":"'+r+'","isHeaderSubTitlePath":'+n+"}"},getPresentationVariantQualifier:function(e,t){var a=t&&e[t];if(!a){return""}else if(a.Visualizations||a.SortOrder){return t.split("#")[1]||""}else if(a.PresentationVariant&&(a.PresentationVariant.Path||a.PresentationVariant.AnnotationPath)){var r=a.PresentationVariant.Path||a.PresentationVariant.AnnotationPath;return r.split("#")[1]||""}else if(a.PresentationVariant){return""}},getPresentationVariantInitialExpansionLevel:function(e,t){var a=e[t];var r=E.getPresentationVariant(a,e);if(r.InitialExpansionLevel){return r.InitialExpansionLevel.Int}},getIconSemanticColor:function(t,a){var r="";if(a.EnumMember){r=a.EnumMember.split("/")[1]}else if(a.Value){var i=sap.ui.core.IconColor;switch(a.Value){case"0":r=i.Neutral;break;case"1":r=i.Negative;break;case"2":r=i.Critical;break;case"3":r=i.Positive;break;default:r=""}}else if(a.String){r=a.String}else if(a.Path){r="{= $"+e.simplePath(t,a)+"}"}return r},getConnectedFieldsTemplateParts:function(e){var t=e.String.trim().match(/{[A-Za-z0-9]*\w}/g);return t},getConnectedFieldsDelimiter:function(e){var t=E.getConnectedFieldsTemplateParts(e);var a=e.String.trim();var r=a.substring(t[0].length,a.indexOf(t[1]));return r},rearrangeConnectedFields:function(e){var t=e.getObject();var a=E.getConnectedFieldsTemplateParts(t.Template);var r={Data:{}};for(var i=0;i<a.length;i++){a[i]=a[i].replace("{","").replace("}","");r["Data"][a[i]]=t["Data"][a[i]]}t["Data"]=r["Data"];return" "},getEntityType:function(e){var t;var a=e.getModel();var r=e.getObject();var i=r&&r.entitySet;var n=a.getProperty("/metaModel");if(i){var o=n.getODataEntitySet(i);t=o&&o.entityType}else{t=a.getProperty("/entityType")}var l=n.createBindingContext(n.getODataEntityType(t,true));return l},getEntitySet:function(e){var t=e.getModel();var a=e.getObject();var r=a&&a.entitySet;var i=t.getProperty("/metaModel");if(!r){r=t.getProperty("/entitySet")}var n=i.createBindingContext(i.getODataEntitySet(r,true));return n},getTableAnnotationPath:function(e){var t=e.getModel();var a=t.getProperty("/metaModel");var r=t.getObject(e.sPath);var i=t.getData("workingContext")["workingContext"];var n=i.tableChartTabs;for(var o in n){if(n[o].key===r.key){var l=n[o].lineItemPath;var s=a.createBindingContext(l);return s}}},getChartAnnotationPath:function(e){var t,a,r,i,n,o,t,l,s;a=e.getModel();var u=a.getProperty("/metaModel");r=a.getObject(e.sPath);n=a.getData("workingContext")["workingContext"].tableChartTabs;for(i in n){o=n[i].variantAnnotationPath;if(o===r.annotationPath){t=n[i].chartAbsolutePath;l=t+"/Actions";s=u.createBindingContext(l);return s}}},checkIfChartQualifier:function(e,t){return!!E.getChartQualifier(e,t)},getChartQualifier:function(e,t){var a,r,i;for(r in e.tableChartTabs){i=e.tableChartTabs[r].key;if(i===t.key){a=e.tableChartTabs[r].controlQualifier;break}}return a},getChartPresentationVariantQualifier:function(e,t){var a,r,i;for(r in e.tableChartTabs){i=e.tableChartTabs[r].key;if(i===t.key){a=e.tableChartTabs[r].variantQualifier;break}}return a},getFormattedAddress:function(t,a){var r="";if(a[0].street){r+=e.format(t,a[0].street)+", "}if(a[0].code){r+=e.format(t,a[0].code)+", "}if(a[0].locality){r+=e.format(t,a[0].locality)+", "}if(a[0].region){r+=e.format(t,a[0].region)+", "}if(a[0].country){r+=e.format(t,a[0].country)+", "}return r.slice(0,r.length-2)},checkIfChartNavigationIsEnabled:function(e,t,a,r){var i=e.showItemNavigationOnChart;if(!i){return false}a=!!e.entitySet?e.entitySet:a;for(var n=0;n<t.length;n++){if(t[n].entitySet===a&&t[n].navigation&&t[n].navigation["display"]){return true}}if(t&&t[0]&&t[0].entitySet===a&&(!t[0].navigation||t[0].navigation&&!t[0].navigation["display"])){return true}return false},checkIfDiffEntitySetsMode:function(e){var t;var a=e&&e.variants;for(t in a){if(a[t].entitySet){return true}}},checkFacetHasLineItemAnnotations:function(e,t){if(!e){return false}if(e.indexOf("com.sap.vocabularies.UI.v1.LineItem")>-1){return true}if(e.indexOf("com.sap.vocabularies.UI.v1.PresentationVariant")>-1){var a=e.split("/@");if(a.length<2){return false}if(!t||!V(t[a[1]])){return false}return true}return false},getListItemCollection:function(t){if(!t){return t}var a=t.getObject();if(!a||!a.AnnotationPath){return t}if(a.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.LineItem")>=0){return e.resolvePath(t)}if(a.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.PresentationVariant")>=0){var r=t.getProperty(e.resolvePath(t)),i=V(r);if(!i||i.indexOf("@")!==0){return t}var n=t.getModel().getODataEntityType(t.getProperty(e.gotoEntitySet(t)).entityType);return n.$path+"/"+i.slice(1)}return t},getSaveAndNextButtonVisibility:function(e){var t=e["sap.ui.generic.app"].pages[0].component.settings&&e["sap.ui.generic.app"].pages[0].component.settings.editFlow;if(t==="direct"){return"{ui>/editable}"}else{return false}},checkCopyActionValidity:function(e){var t=(e||[]).filter(function(e){return e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&(e["com.sap.vocabularies.UI.v1.IsCopyAction"]&&e["com.sap.vocabularies.UI.v1.IsCopyAction"].Bool)});if(t.length>1){m.error("Multiple actions are annotated with isCopyAction. There can be only one standard copy action.")}return t.length===1},buildSmartTableCustomizeConfig:function(e,t,a,r){var i=null;var n=Object.create(null);if(a){var o=e.getInterface(0).getModel();var l=E.handleNavigationRestrictions(o,t,a,"Insertable");var s=l&&l.Insertable;if(s){var u=Object.create(null);if(s.Bool){u["*"]=s.Bool==="true"}else if(s.Path){u["*"]=true}n["ignoreInsertRestrictions"]=u}n["clientSideMandatoryCheck"]={"*":false}}if(!g(r)){n["autoColumnWidth"]=r}i=JSON.stringify(n);return i},getAnnotatedActionPress:function(e,t,a,r,i){var n="";switch(t.RecordType){case"com.sap.vocabularies.UI.v1.DataFieldForAction":var o=t.Action.String.split("/")[1];var l=e.annotatedActions&&e.annotatedActions[o];if(l){n="cmd:"+l.command}else if(r){n="._templateEventHandlers.onDeterminingDataFieldForAction"}else{n=i||"._templateEventHandlers.onCallActionFromToolBar"}break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":var s=a["sap.app"].crossNavigation&&a["sap.app"].crossNavigation.outbounds;var u=Object.keys(s||{}).find(function(e){return s[e].semanticObject===t.SemanticObject.String&&s[e].action===t.Action.String});var c=e.outbounds&&e.outbounds[u];if(c){n="cmd:"+c.command}else{n=r?"._templateEventHandlers.onDeterminingDataFieldForIntentBasedNavigation":"._templateEventHandlers.onDataFieldForIntentBasedNavigation"}break;default:break}return n},getSideEffectSourcePropertyType:function(e,t,a,r){return t?p.getFieldSourcePropertiesType(e,a,r):""},getPersistencyKey:function(e,t){switch(t){case"Retain":return e;case"Remove":return"";case"New":return e+"::Personalization";default:break}},getItemsForContacts:function(e,t,a){var r=e.getInterface(0);var i=E.getNavigationPropertyPath(r,t);var n=[];if(a.fn&&a.fn.Path){n.push(a.fn.Path)}if(a.photo&&a.photo.Path){n.push(a.photo.Path)}if(a.role&&a.role.Path){n.push(a.role.Path)}return i&&n.length>0?"{ path : '"+i+"', parameters : { select:'"+n.join(",")+"'} }":""},getNavigationPropertyPath:function(t,a){var r=e.getNavigationPath(t,a);var i=r.replace("{","").replace("}","");return i},getToolbarButtonPriorityFromImportance:function(e){var t="";if(e&&e.includes("/")){e=e.split("/")[1]}switch(e){case"High":case"Medium":t=d.High;break;case"Low":t=d.Low;break;default:t=d.High;break}return t}};E.getBlockForEditableHeaderFacet.requiresIContext=true;E.getLinkTextForDFwithIBN.requiresIContext=true;E.getLabelForDFwithIBN.requiresIContext=true;E.isPropertySemanticKey.requiresIContext=true;E.suppressP13NDuplicateColumns.requiresIContext=true;E.formatWithExpand.requiresIContext=true;E.formatWithExpandSimple.requiresIContext=true;E.getNavigationPathWithExpand.requiresIContext=true;E.getFormGroupBindingString.requiresIContext=true;E.getCurrentPathWithExpand.requiresIContext=true;E.getCurrentPathWithExpandForContact.requiresIContext=true;E.getTextArrangementForSmartControl.requiresIContext=true;E.createP13N.requiresIContext=true;E.createP13NColumnForConnectedFields.requiresIContext=true;E.createP13NColumnForIndicator.requiresIContext=true;E.createP13NColumnForAction.requiresIContext=true;E.createP13NColumnForContactPopUp.requiresIContext=true;E.createP13NColumnForChart.requiresIContext=true;E.createP13NForDraftObject.requiresIContext=true;E.getSortProperty.requiresIContext=true;E.getFilterProperty.requiresIContext=true;E.hasDeterminingActionsRespectingApplicablePath.requiresIContext=true;E.buildExpressionForProgressIndicatorPercentValue.requiresIContext=true;E.buildExpressionForProgressIndicatorDisplayValue.requiresIContext=true;E.getProgressIndicatorTooltip.requiresIContext=true;E.buildExpressionForProgressIndicatorCriticality.requiresIContext=true;E.areBooleanRestrictionsValidAndPossible.requiresIContext=true;E.isRelatedEntityCreatable.requiresIContext=true;E.isCreationAllowedByBoolAndPathRestrictions.requiresIContext=true;E.buildBreadCrumbExpression.requiresIContext=true;E.getApplicablePathForChartToolbarActions.requiresIContext=true;E.buildAnnotatedActionButtonEnablementExpression.requiresIContext=true;E.getIconTabFilterText.requiresIContext=true;E.formatImageUrl.requiresIContext=true;E.getPathWithExpandFromHeader.requiresIContext=true;E.formatImageOrTypeUrl.requiresIContext=true;E.isDataFieldRenderable.requiresIContext=true;E.formatHeaderImage.requiresIContext=true;E.getDataFieldLabel.requiresIContext=true;E.getDataFieldValue.requiresIContext=true;E.getDataFieldValueSimplePath.requiresIContext=true;E.doesActionExist.requiresIContext=true;E.checkMultiplicityForDataFieldAssociation.requiresIContext=true;E.getTextArrangementForSCFields.requiresIContext=true;E.buildActionButtonsCustomData.requiresIContext=true;E.buildHeaderInfoCustomData.requiresIContext=true;E.formatWithExpandSimplePath.requiresIContext=true;E.formatSmartField.requiresIContext=true;E.getIconSemanticColor.requiresIContext=true;E.getValueListReadOnly.requiresIContext=true;E.getImportanceForTableColumnsWithSemanticKeyTitleAndDescription.requiresIContext=true;E.getDefaultWidthForTableColumn.requiresIContext=true;E.getPropertyNameForText.requiresIContext=true;E.getColumnWidthForConnectedFields.requiresIContext=true;E.getFormattedAddress.requiresIContext=true;E.createP13NFileUploader.requiresIContext=true;E.buildSmartTableCustomizeConfig.requiresIContext=true;E.avatarImageSourceExists.requiresIContext=true;E.getExtensionPointFacetTitle.requiresIContext=true;E.buildInlineCreationRowsConfig.requiresIContext=true;E.getItemsForContacts.requiresIContext=true;E.getNavigationPropertyPath.requiresIContext=true;E.getLinkTextForDFwithEmail.requiresIContext=true;E.checkIsEmailAddress.requiresIContext=true;E.isEmailAddressAndMuliplicity.requiresIContext=true;E.getTextArrangementPath.requiresIContext=true;E.isValueHelpTableAvailable.requiresIContext=true;E.getTextArrangementFinalString.requiresIContext=true;return E},true);
//# sourceMappingURL=AnnotationHelper.js.map