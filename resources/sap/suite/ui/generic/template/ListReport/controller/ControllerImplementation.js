sap.ui.define(["sap/ui/model/Filter","sap/suite/ui/generic/template/ListReport/extensionAPI/ExtensionAPI","sap/suite/ui/generic/template/listTemplates/listUtils","sap/suite/ui/generic/template/listTemplates/controller/MessageStripHelper","sap/suite/ui/generic/template/ListReport/controller/IappStateHandler","sap/suite/ui/generic/template/ListReport/controller/MultipleViewsHandler","sap/suite/ui/generic/template/ListReport/controller/WorklistHandler","sap/suite/ui/generic/template/lib/ShareUtils","sap/suite/ui/generic/template/lib/RestoreFocusHelper","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/base/util/ObjectPath","sap/suite/ui/generic/template/js/StableIdHelper","sap/base/util/deepExtend","sap/suite/ui/generic/template/lib/CreateWithDialogHandler","sap/suite/ui/generic/template/ListReport/controller/CtxMenuHandler","sap/suite/ui/generic/template/ListReport/controller/MultiEditHandler","sap/fe/navigation/SelectionVariant","sap/suite/ui/generic/template/lib/insights/InsightsHandler","sap/suite/ui/generic/template/listTemplates/filterSettingsPreparationHelper","sap/m/table/Util","sap/suite/ui/generic/template/genericUtilities/filterHelper","sap/suite/ui/generic/template/js/AnnotationHelperHiddenTermSupport","sap/m/IllustratedMessageType","sap/suite/ui/generic/template/lib/ai/EasyFilterBarHandler","sap/ui/model/FilterOperator","sap/ui/core/message/MessageType","sap/ui/core/Element"],function(e,t,n,r,i,a,o,l,s,c,u,d,p,g,f,m,v,S,C,h,E,y,b,F,H,I,T,P){"use strict";var M=new u("ListReport.controller.ControllerImplementation").getLogger();var D={getMethods:function(u,I,D){var U={};U.oWorklistData={bWorkListEnabled:!!I.oComponentUtils.getSettings().isWorklist};var w=new m(D,I,U);var A;var R=null;var B=new Map;var O=new s;function x(){var e=D.getOwnerComponent();var t=I.oComponentUtils.getTemplatePrivateModel();t.setProperty("/listReport/isLeaf",e.getIsLeaf())}function L(e){var t=e.getSource();var n=D.getOwnerComponent().getAnnotationPath();if(n!==undefined){V(t,n)}D.onInitSmartFilterBarExtension(e);D.templateBaseExtension.onInitSmartFilterBar(e)}function V(e,t){if(t.indexOf("com.sap.vocabularies.UI.v1.PresentationVariant")>-1){return}var r=new S(JSON.stringify(e.getUiState().getSelectionVariant()));var i=D.getOwnerComponent().getModel().getMetaModel();var a=D.getOwnerComponent().getEntitySet();var o=i.getODataEntityType(i.getODataEntitySet(a).entityType);var l=i.getObject(o.$path+"/"+t);if(l&&l.SelectionVariant&&(l.SelectionVariant.Path||l.SelectionVariant.AnnotationPath)){t=(l.SelectionVariant.Path||l.SelectionVariant.AnnotationPath).split("@")[1]}var s=i.getObject(o.$path+"/"+t);if(s){s=n.createSVObject(s,e);s.FilterContextUrl=r.getFilterContextUrl();U.oIappStateHandler.setFiltersUsingUIState(s.toJSONObject(),true,false)}else{var c=D.getOwnerComponent().getAppComponent().getNavigationController();c.navigateToMessagePage({title:I.oCommonUtils.getText("ST_ERROR"),text:"Manifest property 'annotationPath' is configured with "+t+" but no such annotation found.",description:"",messageType:F.UnableToLoad})}}function k(e){I.oCommonUtils.setEnabledToolbarButtons(e);if(!c.isSmartChart(e)){I.oCommonUtils.setEnabledFooterButtons(e)}}function N(e){var t;t=e.getSource();t.getChartAsync().then(function(e){e.attachSelectData(k.bind(null,t));e.attachDeselectData(k.bind(null,t))})}function W(e){var t=e.getParameters();var n=e.getSource();I.oCommonEventHandlers.onSemanticObjectLinkNavigationPressed(n,t)}function j(e){var t,n;t=e.getParameters();n=e.getSource();I.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(n.getEntitySet(),n.getFieldSemanticObjectMap(),t,U)}function _(e){var t=e.getParameters(),n=t.mainNavigation,r=e.getSource(),i;if(n){i=r.getText&&r.getText();var a=I.oCommonUtils.getCustomData(e);if(a&&a["LinkDescr"]){var o=a["LinkDescr"];n.setDescription(o)}}I.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(U.oPresentationControlHandler.getEntitySet(),{},t,U,i)}function Q(e){var t=u.getItems();for(var n=0;n<t.length;n++){if(!e||t[n].getBindingContextPath()===e){return t[n]}}}function q(e){I.oCommonEventHandlers.onListNavigate(e,U,undefined,true)}function z(e,t,n){var r=I.oServices.oCRUDManager.getDefaultValues(t,e);if(r instanceof Promise){var i=function(e){n.call(this,e,t)};r.then(i,i)}else{n.call(this,e,t)}}function J(e,t){if(e){K(e,t)}else{z(null,t,K)}}function K(e,t){if(t.data("CrossNavigation")){I.oCommonUtils.fnProcessDataLossOrDraftDiscardConfirmation(function(){I.oCommonEventHandlers.addEntry(t,false,U.oSmartFilterbar,e)},Function.prototype,"LeaveApp")}else{I.oCommonEventHandlers.addEntry(t,false,U.oSmartFilterbar,e)}}function $(){var e=U.oMultipleViewsHandler.getMode()!=="single"&&U.oMultipleViewsHandler.getSelectedKey()||"";var t=p.getStableId({type:"ListReportAction",subType:"Create",sQuickVariantKey:e});I.oCommonUtils.executeIfControlReady(function(t){var n=p.getStableId({type:"ListReportAction",subType:"CreateWithDialog",sQuickVariantKey:e});var r=n&&D.byId(n);if(r){U.oCreateWithDialogHandler.createWithDialog(r,t)}else{J(null,t)}},t)}function G(e){z(undefined,e.getSource(),X)}function X(e,t){var n=D.getOwnerComponent().getCreateWithFilters();var r=n.strategy||"extension";var i;switch(r){case"extension":i=D.getPredefinedValuesForCreateExtension(U.oSmartFilterbar,e)||{};break;default:M.error(r+" is not a valid strategy to extract values from the SmartFilterBar");return}var a=p.getStableId({type:"ListReportAction",subType:"CreateWithDialog"});var o=a&&D.byId(a);if(o){U.oCreateWithDialogHandler.createWithDialog(o,t,i)}else{J(i,t)}}function Y(e){var t=I.oComponentUtils.getTemplatePrivateModel();var n=t.getProperty("/listReport/deleteEnabled");if(n){I.oCommonEventHandlers.deleteEntries(e)}}function Z(t){if(!I.oComponentUtils.isDraftEnabled()){return}var n=I.oComponentUtils.getTemplatePrivateModel();var r=n.getProperty("/listReport/vDraftState");switch(r){case"1":t.push(new e("IsActiveEntity","EQ",true));t.push(new e("HasDraftEntity","EQ",false));break;case"2":t.push(new e("IsActiveEntity","EQ",false));break;case"3":t.push(new e("IsActiveEntity","EQ",true));t.push(new e("SiblingEntity/IsActiveEntity","EQ",null));t.push(new e("DraftAdministrativeData/InProcessByUser","NE",""));break;case"4":t.push(new e("IsActiveEntity","EQ",true));t.push(new e("SiblingEntity/IsActiveEntity","EQ",null));t.push(new e("DraftAdministrativeData/InProcessByUser","EQ",""));break;case"5":t.push(new e("IsActiveEntity","EQ",true));break;default:var i=new e({filters:[new e("IsActiveEntity","EQ",false),new e("SiblingEntity/IsActiveEntity","EQ",null)],and:false});if(t[0]&&t[0].aFilters){var a=t[0];t[0]=new e([a,i],true)}else{t.push(i)}break}}function ee(){return U.oSmartFilterbar.getBasicSearchValue()||U.oWorklistHandler.getSearchString()}function te(e){var t=function(){var e=U.oPresentationControlHandler;var t=e.getModel().getMetaModel();var n=t.getODataEntitySet(e.getEntitySet()).entityType;var r=e.getBinding(U);var i=r?r.getDownloadUrl():"";var a=r?r.aApplicationFilter||r.aApplicationFilters:[];if(!a.length){return Promise.resolve({sServiceUrl:i})}var o=U.oSmartFilterbar.getFilterData();var l=y.getFilterParams(t,n,a,o);if(l){i=I.oCommonUtils.fnReplaceFiltersWithGetDownloadUrl(i,l);return Promise.resolve({sServiceUrl:i})}else{return Promise.resolve({sServiceUrl:""})}};var n={sharePageToPressed:function(e){var t=I.oServices.oApplication.getBusyHelper();if(t.isBusy()){return}var n=I.oServices.oApplication.getAppTitle();var r=l.getCurrentUrl().then(function(t){switch(e){case"Email":n=I.oCommonUtils.getText("EMAIL_HEADER",[n]);sap.m.URLHelper.triggerEmail(null,n,t);break;default:break}});t.setBusy(r)},shareJamPressed:function(){l.openJamShareDialog(I.oServices.oApplication.getAppTitle())},shareTilePressed:function(){l.fireBookMarkPress()},getServiceUrl:function(){return t().then(function(e){if(e.sServiceUrl){e.sServiceUrl=e.sServiceUrl?e.sServiceUrl+"&$top=0&$inlinecount=allpages":""}var t={serviceUrl:e.sServiceUrl};D.onSaveAsTileExtension(t);return t.serviceUrl})},getModelData:function(){var e=d.get("sap.ushell.Container.getUser");var t=D.getOwnerComponent().getAppComponent();var r=t.getManifestEntry("sap.ui");var i=t.getManifestEntry("sap.app");return n.getServiceUrl().then(function(t){return l.getCurrentUrl().then(function(n){return{serviceUrl:t,icon:r&&r.icons?r.icons.icon:"",shellTitle:i?i.title:"",isShareInJamActive:!!e&&e().isJamActive(),customUrl:l.getCustomUrl(),currentUrl:n}})})}};var r=U.oIappStateHandler.areDataShownInTable();if(!r){U.oSmartFilterbar.search()}l.openSharePopup(I.oCommonUtils,e,n)}function ne(e){var t=e.getId();var n=U.oSmartFilterbar;var r="";var i=[];var a=!!(I.oComponentUtils&&I.oComponentUtils.getSettings()&&(I.oComponentUtils.getSettings().quickVariantSelectionX||I.oComponentUtils.getSettings().quickVariantSelection));if(e.fetchVariant()&&e.fetchVariant().filter&&e.fetchVariant().filter.filterItems){i=e.fetchVariant().filter.filterItems}var o={search:!!n.getBasicSearchValue(),filter:!!(i.length||n.retrieveFiltersWithValues().length)};if(a){r=I.oCommonUtils.getContextText("NOITEMS_MULTIVIEW_LR_SMARTTABLE_WITH_FILTER",t)}else if(o.search||o.filter){r=I.oCommonUtils.getContextText("NOITEMS_LR_SMARTTABLE_WITH_FILTER",t)}else{r=I.oCommonUtils.getContextText("NOITEMS_LR_SMARTTABLE",t)}e.setNoData(r)}function re(e){var t=e.getId();var n=I.oCommonUtils.getContextText("NOITEMS_LR_SMARTCHART",t);e.getChartAsync().then(function(e){e.setCustomMessages({NO_DATA:n})})}function ie(e){var t=e.getEntitySet();if(B.has(t)){return B.get(t)}var n=I.oServices.oApplication.preloadComponent(t);B.set(t,n);return n}var ae;function oe(e){if(ae){ae()}ae=Function.prototype;I.oCommonEventHandlers.onDataReceived(e);if(R){var t;var n=false;for(var r=0;r<R.aWaitingObjects.length&&!n;r++){t=Q(R.aWaitingObjects[r]);if(t){q(t);R.resolve();n=true}}if(!n){t=Q();if(t){q(t);R.resolve()}else{R.reject()}}R=null;return}if(c.isTable(e)){var i=I.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(e).getBinding().getCount();E.announceTableUpdate(e.getHeader(),i)}A.handleDataReceived(e,q);var a=I.oComponentUtils.getTemplatePrivateModel();a.setProperty("/listReport/firstSelection",true);U.oIappStateHandler.setDataShownInTable(true);I.oComponentUtils.hidePlaceholder()}function le(e,t){w.beforeOpenContextMenu(e,t)}function se(e,t){w.onContextMenu(e,t)}function ce(){return O}return{onInit:function(){U.oSmartFilterbar=D.byId("listReportFilter");U.oPresentationControlHandler=I.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(D.byId(p.getStableId({type:"ListReportTable",subType:"SmartTable"}))||D.byId(p.getStableId({type:"ListReportTable",subType:"SmartList"})));h.fnMergeControlConfiguration(U.oSmartFilterbar.getControlConfiguration());U.updateControlOnSelectionChange=k;A=I.oComponentUtils.getFclProxy();U.bLoadListAndFirstEntryOnStartup=A.isListAndFirstEntryLoadedOnStartup();var e=new a(U,D,I);U.oMultipleViewsHandler=e;U.oMessageStripHelper=new r(U.oPresentationControlHandler,e,D,I,"listReport");U.refreshModel=function(){var t=I.oCommonUtils.refreshModel(U.oPresentationControlHandler.getEntitySet());if(t){e.refreshSiblingControls(U.oPresentationControlHandler)}};U.oCreateWithDialogHandler=new f(U,D,I);U.oWorklistHandler=new o(U,D,I);U.oIappStateHandler=new i(U,D,I);U.oMultiEditHandler=new v(U,D,I);U.oInsightsHandler=new C(U,D,I);var t=I.oComponentUtils.getTemplatePrivateModel();t.setProperty("/listReport/aMissingNavProperties",false);t.setProperty("/generic/bDataAreShownInTable",false);t.setProperty("/listReport/firstSelection",false);t.setProperty("/listReport/isHeaderExpanded",true);t.setProperty("/listReport/filterMode","classic");t.setProperty("/listReport/deleteEnabled",false);t.setProperty("/listReport/multiEditEnabled",false);if(I.oComponentUtils.isDraftEnabled()){t.setProperty("/listReport/vDraftState","0")}t.setProperty("/listReport/multipleViews/msgVisibility",false);var n=I.oServices.oInsightsFECardProvider&&I.oServices.oInsightsFECardProvider.getCardProviderInsightsInstance();if(n&&!I.oCommonUtils.isMultiViewMultiEntity()){I.oServices.oInsightsFECardProvider.fnRegisterComponentForProvider(U.oInsightsHandler,D.getView().getId());t.bindProperty("/generic/bDataAreShownInTable").attachChange(function(e){if(e.getSource().getValue()){U.oInsightsHandler.getCardsToShare("Table").then(function(e){n.onViewUpdate(true,e)})}else{n.onViewUpdate(true,[])}})}u.setFocus=function(e,t){O.restoreFocus()};u.adaptToChildContext=function(e){U.oPresentationControlHandler.scrollToSelectedItemAsPerChildContext(e)};u.getItems=function(){return U.oPresentationControlHandler.getItems()};u.displayNextObject=function(e){return new Promise(function(t,n){R={aWaitingObjects:e,resolve:t,reject:n}})};u.refreshBinding=function(e,t,n){if(U.oIappStateHandler.areDataShownInTable()){if(U.oMultipleViewsHandler.refreshOperation(2,null,!e&&t)){return}if(e||t[D.getOwnerComponent().getEntitySet()]){I.oCommonUtils.refreshModel(D.getOwnerComponent().getEntitySet());U.oPresentationControlHandler.refresh(undefined,undefined,n)}}};u.getCurrentState=function(){return{permanentState:{data:U.oIappStateHandler.getCurrentAppState(),lifecycle:{permanent:true}}}};u.applyState=function(e){return U.oIappStateHandler.applyState(e.permanentState).then(function(){if(!U.oIappStateHandler.areDataShownInTable()){A.handleDataReceived()}})};x();D.byId("template::FilterText").attachBrowserEvent("click",function(){D.byId("page").setHeaderExpanded(true)});var l=D.byId(p.getStableId({type:"ListReportAction",subType:"Share"})+"-internalBtn");l.attachPress(function(){te(l)})},handlers:{addEntry:$,addEntryWithFilters:G,deleteEntries:Y,deleteEntry:function(e){I.oCommonEventHandlers.deleteEntry(e)},updateTableTabCounts:function(){U.oMultipleViewsHandler.fnUpdateTableTabCounts()},onCancelCreateWithPopUpDialog:function(){U.oCreateWithDialogHandler.onCancelPopUpDialog()},onSaveCreateWithPopUpDialog:function(e){U.oCreateWithDialogHandler.onSavePopUpDialog(e)},onSelectionChange:function(e){var t=e.getSource();k(t)},onMultiSelectionChange:function(e){I.oCommonEventHandlers.onMultiSelectionChange(e)},onContactDetails:function(e){I.oCommonEventHandlers.onContactDetails(e)},onSmartFilterBarInitialise:L,onSmartFilterBarInitialized:function(){U.oIappStateHandler.onSmartFilterBarInitialized();I.oServices.oFioriAIHandler&&I.oServices.oFioriAIHandler.getFioriAIEnabledPromise("EasyFilter").then(function(){U.oIappStateHandler.onFEStartupInitialized().then(function(){U.oEasyFilterBarHandler=new H(U,D,I);U.oEasyFilterBarHandler.initialiseEasyFilterBar();U.oSmartFilterbar.attachFilterChange(function(e){U.oEasyFilterBarHandler.onFilterChange(e)})})}).catch(function(){M.warning("Easy filter is not enabled on this tenant")})},onAfterSFBVariantLoad:function(e){U.oIappStateHandler.onAfterSFBVariantLoad(e);U.oEasyFilterBarHandler&&U.oEasyFilterBarHandler.handleVariantLoad(e)},onSmartListDataReceived:function(e){var t=e.getSource();oe(t)},onEasyFilterClearFilters:function(e){U.oEasyFilterBarHandler.onClearFilters(e)},onEasyFilterAfterQueryProcessing:function(e){U.oEasyFilterBarHandler.onAfterQueryProcessing(e)},onEasyFilterBeforeQueryProcessing:function(e){U.oEasyFilterBarHandler.onBeforeQueryProcessing(e)},onEasyFilterTokensChanged:function(e){U.oEasyFilterBarHandler.onTokensChanged(e)},onEasyFilterQueryChanged:function(e){U.oEasyFilterBarHandler.onQueryChanged(e)},onEasyFilterShowValueHelp:function(e){U.oEasyFilterBarHandler.onShowValueHelp(e)},onEasyFilterDataFetcher:function(e,t,n){return U.oEasyFilterBarHandler.onDataFetcher(e,t,n)},onFilterSwitch:function(){var e=U.oSmartFilterbar;var t=I.oComponentUtils.getTemplatePrivateModel();if(t.getProperty("/listReport/filterMode")==="easyFilter"){e.setVisible(false);var n=I.oComponentUtils.getTemplatePrivateModel();n.setProperty("/listReport/firstSelection",true);n.setProperty("/generic/bDataAreShownInTable",false)}else{e.setVisible(true)}},onBeforeRebindTable:function(t){var r=t.getSource();ne(r);var i=t.getParameters().bindingParams;var a=i.filters.slice(0);var o=U.oSmartFilterbar.getId(),l=I.oCommonUtils.getControlStateWrapperById(o,"SmartFilterBar"),s=l.getMissingNavProperties();if(s.length){var c=U.oSmartFilterbar.getVariantManagement().getId(),u=U.oSmartFilterbar.getCurrentVariantId(),d=P.getElementById(c).getAllVariants(),p=d.find(function(e){return e.getId()===u}),g=p?p.mProperties.texts.variantName.value:"",f=I.oCommonUtils.getMetaModelEntityType(U.oSmartFilterbar.getEntitySet()).property.reduce(function(e,t){if(t["sap:text"]){e[t["sap:text"].split("/")[0]]=t.name}return e},{}),m=s.reduce(function(e,t){var n=t[0].field.split(".")[0];if(f[n]){e.push(f[n])}return e},[]),v=I.oCommonUtils.getText("MESSAGE_FILTER_NOT_AVAILABLE",[g,m.join(", ")]),S={message:v,type:T.Warning},C=U.oMultipleViewsHandler.getSelectedKey();U.oMessageStripHelper.setCustomMessage(S,C);var h=[];s.forEach(function(t){var n=[],r=[];t.forEach(function(t){var i=t.field.replace(".","/");if(t.exclude){r.push(new e(i,y.negateOperation(t.operation),t.value1,t.value2))}else{n.push(new e(i,t.operation,t.value1,t.value2))}});var i=r.length?new e(r,true):null;if(n.length){if(i){h.push(new e([new e(n,false),i],true))}else{h.push(new e(n,false))}}else if(i){h.push(i)}});i.filters.push(new e(h,true))}I.oCommonEventHandlers.onBeforeRebindTable(t,{determineSortOrder:U.oMultipleViewsHandler.determineSortOrder,ensureExtensionFields:D.templateBaseExtension.ensureFieldsForSelect,addTemplateSpecificFilters:Z,getSearchString:ee,addExtensionFilters:D.templateBaseExtension.addFilters,resolveParamaterizedEntitySet:U.oMultipleViewsHandler.resolveParameterizedEntitySet,isFieldControlRequired:false,isPopinWithoutHeader:true,isDataFieldForActionRequired:true,isFieldControlsPathRequired:true,isMandatoryFiltersRequired:true,numberOfExpandedLevels:1});D.onBeforeRebindTableExtension(t);var E=i.events.dataRequested||Function.prototype;i.events.dataRequested=function(e){var t=this;ie(r).then(function(){E.call(t,e)})};var F=i.events.dataReceived||Function.prototype;i.events.dataReceived=function(e){oe(r);var t=b.getHiddenColumnInfo(r);I.oCommonEventHandlers.hideTableCells(r,t);F.call(this,e)};var H=i.events.refresh||Function.prototype;i.events.refresh=function(e){U.oMultipleViewsHandler.onDataRequested();H.call(this,e)};U.oMessageStripHelper.onBeforeRebindControl(t);U.oMultipleViewsHandler.onRebindContentControl(i,a);n.handleErrorsOnTableOrChart(I,t,U)},onListNavigate:function(e){var t=g({},e);(I.oComponentUtils.isDraftEnabled()?I.oServices.oApplicationController.synchronizeDraftAsync():Promise.resolve()).then(function(){I.oCommonEventHandlers.onListNavigate(t,U)})},onEdit:function(e){I.oCommonEventHandlers.onListNavigate(e,U)},onCallActionFromToolBar:function(e){I.oCommonEventHandlers.onCallActionFromToolBar(e,U)},onDataFieldForIntentBasedNavigation:function(e){I.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,U)},onDataFieldWithEmail:function(e){I.oCommonEventHandlers.onDataFieldWithEmail(e)},onDataFieldWithIntentBasedNavigation:function(e){I.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,U)},onBeforeSemanticObjectLinkNavigationCallback:function(e){return I.oCommonEventHandlers.onBeforeSemanticObjectLinkNavigationCallback(e)},onBeforeSemanticObjectLinkPopoverOpens:function(e){var t=e.getSource();var n=U.oSmartFilterbar.getUiState().getSelectionVariant();if(U.oSmartFilterbar.getEntitySet()!==t.getEntitySet()){n.FilterContextUrl=I.oServices.oApplication.getNavigationHandler().constructContextUrl(t.getEntitySet(),t.getModel())}var r=JSON.stringify(n);I.oCommonUtils.semanticObjectLinkNavigation(e,r,D,U)},onSemanticObjectLinkNavigationPressed:W,onSemanticObjectLinkNavigationTargetObtained:j,onSemanticObjectLinkNavigationTargetObtainedSmartLink:_,onDraftLinkPressed:function(e){var t=e.getSource();var n=t.getBindingContext();I.oCommonUtils.showDraftPopover(n,t)},onAssignedFiltersChanged:function(e){if(e.getSource()){D.byId("template::FilterText").setText(e.getSource().retrieveFiltersWithValuesAsText())}},onSearchButtonPressed:function(){U.oIappStateHandler.onSearchPressed()},onAddCardsToRepository:function(e){I.oServices.oApplication.performAfterSideEffectExecution(function(){U.oInsightsHandler.prepareAndShowCard(e,{cardType:"Table"})},true)},onBeforeRebindChart:function(e){var t=e.getSource();re(t);var r=e.getParameters().bindingParams;var i=r.filters.slice(0);var a={setBindingPath:t.setChartBindingPath.bind(t),ensureExtensionFields:Function.prototype,addTemplateSpecificFilters:Z,addExtensionFilters:D.templateBaseExtension.addFilters,resolveParamaterizedEntitySet:U.oMultipleViewsHandler.resolveParameterizedEntitySet,isFieldControlRequired:false,isMandatoryFiltersRequired:true};I.oCommonUtils.onBeforeRebindTableOrChart(e,a,U.oSmartFilterbar);D.onBeforeRebindChartExtension(e);var o=r.events.dataReceived||Function.prototype;r.events.dataReceived=function(e){U.oMultipleViewsHandler.onDataRequested();I.oComponentUtils.hidePlaceholder();o.call(this,e)};U.oMultipleViewsHandler.onRebindContentControl(r,i);n.handleErrorsOnTableOrChart(I,e,U)},onChartInitialized:function(e){N(e);I.oCommonUtils.checkToolbarIntentsSupported(e.getSource())},onSelectionDetailsActionPress:function(e){U.oMultipleViewsHandler.onDetailsActionPress(e)},onShareListReportActionButtonPress:function(e){I.oCommonUtils.executeIfControlReady(te,p.getStableId({type:"ListReportAction",subType:"Share"})+"-internalBtn")},onInlineDataFieldForAction:function(e){I.oCommonEventHandlers.onInlineDataFieldForAction(e)},onInlineDataFieldForIntentBasedNavigation:function(e){I.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),U)},onDeterminingDataFieldForAction:function(e){I.oCommonEventHandlers.onDeterminingDataFieldForAction(e,U.oPresentationControlHandler)},onDeterminingDataFieldForIntentBasedNavigation:function(e){I.oCommonEventHandlers.onDeterminingDataFieldForIntentBasedNavigation(e.getSource(),U.oPresentationControlHandler.getSelectedContexts(),U.oSmartFilterbar)},onTableInit:function(e){var t=e.getSource();var n=b.getHiddenColumnInfo(t);if(n&&n.staticHiddenColumns&&n.staticHiddenColumns.length>0){t.deactivateColumns(n.staticHiddenColumns)}I.oCommonUtils.checkToolbarIntentsSupported(t);t.setModel(new sap.ui.model.base.ManagedObjectModel(t),"tableobserver");I.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(t).addCellSelector()},onSearchWorkList:function(e){U.oWorklistHandler.performWorklistSearch(e)},onMultiEditButtonPress:function(){U.oMultiEditHandler.onMultiEditButtonPress()},onSaveMultiEditDialog:function(e){U.oMultiEditHandler.onSaveMultiEditDialog(e)},onCancelMultiEditDialog:function(e){U.oMultiEditHandler.onCancelMultiEditDialog(e)},dataStateFilter:function(e,t){return U.oMessageStripHelper.dataStateFilter(e,t)},dataStateClose:function(){U.oMessageStripHelper.onClose()},onBeforeExport:function(e){I.oCommonEventHandlers.onBeforeExport(e)},beforeOpenContextMenu:le,onContextMenu:se},formatters:{formatDraftType:function(e,t,n){if(e&&e.DraftUUID){if(!t){return sap.m.ObjectMarkerType.Draft}else if(n){return e.InProcessByUser?sap.m.ObjectMarkerType.Locked:sap.m.ObjectMarkerType.Unsaved}}return sap.m.ObjectMarkerType.Flagged},formatDraftVisibility:function(e,t){if(e&&e.DraftUUID){if(!t){return sap.m.ObjectMarkerVisibility.TextOnly}}return sap.m.ObjectMarkerVisibility.IconAndText},formatDraftLineItemVisible:function(e,t){if(e&&e.DraftUUID){if(t==="5"){return false}return true}return false},formatDraftOwner:function(e,t){var n="";if(e&&e.DraftUUID&&t){var r=e.InProcessByUserDescription||e.InProcessByUser||e.LastChangedByUserDescription||e.LastChangedByUser;if(r){n=I.oCommonUtils.getText("ST_DRAFT_OWNER",[r])}else{n=I.oCommonUtils.getText("ST_DRAFT_ANOTHER_USER")}}return n},formatItemTextForMultipleView:function(e){return U.oMultipleViewsHandler?U.oMultipleViewsHandler.formatItemTextForMultipleView(e):""},formatMessageStrip:function(e,t){return U.oMultipleViewsHandler?U.oMultipleViewsHandler.formatMessageStrip(e,t):""}},controllerServices:{getRestoreFocusHelper:ce},extensionAPI:new t(I,D,U)}}};return D});
//# sourceMappingURL=ControllerImplementation.js.map