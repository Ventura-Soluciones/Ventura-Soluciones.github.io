sap.ui.define(["sap/ui/base/Object","sap/base/util/extend","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/ui/core/library","sap/suite/ui/generic/template/genericUtilities/FeLogger"],function(e,t,i,r,n){"use strict";var l="sapUiTableOnObjectPageAdjustmentsForSection";var a="ObjectPage.controller.SectionTitleHandler";var g=new n(a).getLogger();function o(e,t,n){var a=e.getOwnerComponent().getModel("_templPrivView");var o=Object.create(null);var s=e.getOwnerComponent().getAppComponent();t.getSections().forEach(function(e){var t=e.getSubSections();if(t.length===1){var i=t[0];var r=i.getId();o[r]={isStaticallySingleChild:true}}});function c(e,t){if(!s.getMergeObjectPageSectionTitle()){g.warning('Title of the section will not be adjusted as the manifest setting "mergeObjectPageSectionTitle" is set.');return}var n;for(var c=e;c;c=i.getParent(c)){if(i.isObjectPageSubSection(c)){if(c===e){var u=o[e.getId()];if(u&&u.titleOwner){u.titleOwner.reset()}return}n=c;break}}if(t&&(!n||n.getBlocks().concat(n.getMoreBlocks()).length>1)){return}var f=n.getParent();var v=f.getSubSections();var d=n.getId();var T=o[d];if(T){if(T.titleOwner){T.titleOwner.reset()}}else{T={};o[d]=T}var h=a.bindProperty("/#"+n.getId()+"/title");var S=e.getMetadata();var b=S.hasProperty("header");var p=(b?e.setHeader:e.setText).bind(e);var y=b?e.getHeader():e.getText();var m=S.hasProperty("headerLevel");var L=(m?e.setHeaderLevel:e.setLevel).bind(e);var O=S.hasProperty("headerStyle");var w=(O?e.setHeaderStyle:e.setTitleStyle).bind(e);var H=m?e.getHeaderLevel():e.getLevel();var A=O?e.getHeaderStyle():e.getTitleStyle();var C=function(){p(h.getValue());n.setShowTitle(false);n.setTitleLevel(r.TitleLevel.Auto);f.addStyleClass(l)};h.attachChange(C);T.titleOwner={reset:function(){p(y);L(H);w(A);f.removeStyleClass(l);n.setShowTitle(true);n.setTitleLevel(r.TitleLevel.H4);if(T.isStaticallySingleChild){f.setShowTitle(true);f.setTitleLevel(r.TitleLevel.H3)}delete T.titleOwner;h.destroy()}};C();if(T.isStaticallySingleChild){f.setShowTitle(false);f.setTitleLevel(r.TitleLevel.Auto)}L(T.isStaticallySingleChild?r.TitleLevel.H3:r.TitleLevel.H4);if(v.length===1){w(r.TitleLevel.H4)}}function u(e){if(e&&(typeof e.getTitleVisible==="function"&&!e.getTitleVisible()||typeof e.getEffectiveTitleLevel==="function"&&e.getEffectiveTitleLevel()==="H3")){var t=e.getAggregation("blocks");if(t&&t.length>0){var i=t[0];if(i.isA("sap.ui.layout.Grid")){var r=i.getAggregation("content");if(r&&r.length>0){r.forEach(function(e){if(e.isA("sap.ui.comp.smartform.SmartForm")){var t=e.getAggregation("content");var i=t.getAggregation("formContainers");if(i&&i.length>0){i.forEach(function(e){var t=e.getAggregation("title");if(t&&t.setLevel){t.setLevel("H4")}})}}})}}}}}function f(e){var t=e.getParent();var r=t&&typeof t.getTitleVisible==="function"&&t.getTitleVisible();var n=e&&typeof e.getTitleVisible==="function"&&e.getTitleVisible();if(r||n){return}var l=i.searchInTree(e,function(e){return i.isSmartForm(e)?e:null});if(!l||l.getAriaLabelledBy().length!==0){return}var a=t.getParent().getId();var g=t.getId();var o=a+"-anchBar-"+g+"-anchor";l.addAriaLabelledBy(o)}function v(e){var t=n.oInfoObjectHandler.getControlInformation(e.getId()),r=e.getParent();e.getBlocks().concat(e.getMoreBlocks()).reduce(function(e,t){if(!t.getContent||!t.getContent()||!t.getContent().length){return e}t.getContent().reduce(function(e,t){if(i.isSmartForm(t)){e.push(t)}return e},e);return e},[]).forEach(function(i){if(!t){i._suggestTitleId(`${r.getId()}-title`);return}if(i.getGroups().length===1&&i.getGroups()[0].getTitle&&!i.getGroups()[0].getTitle()){i._suggestTitleId(`${e.getId()}-headerTitle`);return}})}return{setAsTitleOwner:c,adjustSubSectionTitle:u,addAccessibleName:f,manageAccessability:v}}return e.extend("sap.suite.ui.generic.template.ObjectPage.controller.SectionTitleHandler",{constructor:function(e,i,r){t(this,o(e,i,r))}})});
//# sourceMappingURL=SectionTitleHandler.js.map