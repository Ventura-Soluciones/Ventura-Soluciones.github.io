/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/m/Button","sap/m/CustomListItem","sap/m/Dialog","sap/m/HBox","sap/m/Image","sap/m/Label","sap/m/Link","sap/m/List","sap/m/Text","sap/m/Title","sap/m/VBox","sap/ui/core/CustomData","sap/ui/core/Element","sap/ui/core/HTML","./BaseNewsItem","./utils/Constants","./utils/DataFormatUtils"],function(e,t,s,i,n,o,a,l,r,u,d,w,c,p,g,h,m){"use strict";function I(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const N=I(g);const x=h["DEFAULT_NEWS_URL"];const L=m["recycleId"];const D=N.extend("sap.cux.home.NewsGroup",{metadata:{library:"sap.cux.home",aggregations:{newsItems:{type:"sap.cux.home.NewsItem",singularName:"newsItem",multiple:true}}},constructor:function e(t,s){N.prototype.constructor.call(this,t,s)},init:function e(){N.prototype.init.call(this);this._oTile.attachPress(this,this.pressNewsItem.bind(this));this.createNewsGroupDialog()},pressNewsItem:function e(){void this.openNewsGroupDialog()},openNewsGroupDialog:function e(){try{const t=this;function s(){t.oNewsGroupDialog?.setTitle(t.getTitle());t.oNewsGroupImage?.setSrc(a);t.loadNewsDetails(r)}t.oNewsList?.setBusy(true);const i=t.getParent();const n=i.getProperty("customFileName");const o=n.split(".").pop()?.toLowerCase()==="csv";const a=t.getImageUrl();const l=i.getFavNewsFeed();let r=[];const u=function(){if(i.getUrl()!==x){const e={changeId:i.getCustomFeedKey(),title:t.getTitle(),showAllPreparationRequired:o?false:!l?true:l.showAllPreparationRequired};t.oNewsGroupDialog?.open();const s=i.getNewsFeedDetailsUrl(e);return Promise.resolve(i.getAuthNewsFeed(s,e.title)).then(function(e){r=e})}else{t.oNewsGroupDialog?.open();t.currentDefaultGroup=i.getCurrentNewsGroup(t.getId());r=t.currentDefaultGroup?._group_to_article||[]}}();return Promise.resolve(u&&u.then?u.then(s):s(u))}catch(d){return Promise.reject(d)}},loadNewsDetails:function e(t){this.oNewsList?.destroyAggregation("items",true);(t||[]).forEach((e,t)=>{const s=this.generateNewsListTemplate(e,t);this.oNewsList?.addItem(s)});this.oNewsList?.setBusy(false)},generateNewsListTemplate:function s(n,l){const c=this.getParent();if(c.getUrl()!==x){const s=new d(this.getId()+"--idNewsFieldsBox"+"--"+l).addStyleClass("newsListItemContainer");(n?.expandFields||[]).forEach(e=>{s.addItem(new i("",{items:[new o("",{text:e.label+":",tooltip:e.label}),new r("",{text:e.value})]}).addStyleClass("newsListItemContainer"))});s.setVisible(false);return new t(this.getId()+"--idNewsDetailItem"+"--"+l,{content:[new d(`${this.getId()}--newsList--${l}`,{items:[new u(`${this.getId()}--newsTitle--${l}`,{text:n.Title.value,titleStyle:"H6"}),new r(`${this.getId()}--newsText--${l}`,{text:n.Description.value}),new i(`${this.getId()}--newsHBox--${l}`,{items:[new o(`${this.getId()}--newsLabel--${l}`,{text:n.Type.label+":",tooltip:n.Type.label}),new r(`${this.getId()}--newsItemText--${l}`,{text:n.Type.value})]}).addStyleClass("newsListItemContainer"),new i(`${this.getId()}--newsListItemBox--${l}`,{items:[new o(`${this.getId()}--newsListItemLabel--${l}`,{text:this._i18nBundle.getText("readMoreLink")+":",tooltip:n.Link.value.label+""}),new a(`${this.getId()}--newsListItemLink--${l}`,{href:n.Link.value.value+"",text:n.Link.text,target:"_blank"})]}).addStyleClass("newsListItemContainer"),s,new e(`${this.getId()}--expand--${l}`,{text:this._i18nBundle.getText("expand"),press:this.handleShowNewsFeedDetails.bind(this),customData:new w({key:"index",value:l})})]}).addStyleClass("newsListItemContainer")]}).addStyleClass("newsListItem")}else{return new t(this.getId()+"--idNewsDetailItem"+"--"+l,{content:[new d({items:[new p({content:n.description})]}).addStyleClass("newsListItemContainer")]}).addStyleClass("newsListItem")}},createNewsGroupDialog:function t(){if(!this.oNewsGroupDialog){this.oNewsGroupImage=new n(L(`${this.getId()}-custNewsImage`),{width:"100%",height:"15rem",src:"/resources/sap/cux/home/img/CustomNewsFeed/SupplyChain/3.jpg"});this.oNewsList=new l(L(`${this.getId()}-custNewsList`));this.oNewsGroupDialog=new s(L(`${this.getId()}-custNewsFeedDetailsDialog`),{title:this.getTitle(),contentWidth:"52rem",contentHeight:"100%",content:[this.oNewsGroupImage,this.oNewsList],buttons:[new e(L(`${this.getId()}-custNewsFeedDetailsCloseBtn`),{text:this._i18nBundle.getText("Close"),press:this.closeNewsGroupDialog.bind(this),type:"Transparent"})]});this.addDependent(this.oNewsGroupDialog)}},closeNewsGroupDialog:function e(){if(this.oNewsGroupDialog){this.oNewsGroupDialog.close()}},handleShowNewsFeedDetails:function e(t){const s=t.getSource().data("index");const i=c.getElementById(this.getId()+"--idNewsFieldsBox"+"--"+s);const n=i.getVisible();i.setVisible(!n);const o=n?this._i18nBundle.getText("expand"):this._i18nBundle.getText("collapse");t.getSource().setText(o)}});return D});
//# sourceMappingURL=NewsGroup.js.map