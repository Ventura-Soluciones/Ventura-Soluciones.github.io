{"version":3,"file":"KeyUserNewsSettingsPanel-dbg-dbg.js","names":["sap","ui","define","Button","CheckBox","Input","Label","MessageBox","MessageStrip","MessageToast","Toolbar","VBox","Library","EventBus","MessageType","SimpleForm","FileUploader","Container","__BaseSettingsPanel","___flexibility_Layoutflexibility","___utils_Constants","__HttpHelper","_interopRequireDefault","obj","__esModule","default","_catch","body","recover","result","e","then","BaseSettingsPanel","CHANGE_TYPES","KEYUSER_SETTINGS_PANELS_KEYS","HttpHelper","Constants","NEWS_FEED_POST_API","KeyUserNewsSettingsPanel","extend","metadata","library","init","_init","BaseSettingsPanel.prototype.init.call","controlMap","Map","setProperty","NEWS","_i18nBundle","getText","addAggregation","getContent","attachPanelNavigated","loadSettings","_eventBus","getInstance","subscribe","channelId","eventId","data","showError","showMessageStrip","Warning","validChanges","getMessageStrip","setVisible","getCurrentKeyUserChange","_getCurrentKeyUserChange","keyUserChanges","getKeyUserChanges","existingChange","find","change","changeSpecificData","changeType","NEWS_FEED_URL","content","_getContent","wrapperVBoxId","getId","wrapperVBox","set","isValidChanges","_isValidChanges","newsVisible","_this","_temp4","fileUploader","getFileUploader","keyUserChangeContent","showCustom","customNewsVisibility","undefined","Boolean","_getPanel","getProperty","_temp3","getNewsFeedUploadBtn","getEnabled","error","String","setValue","customNewsFeedFileName","_temp2","getValue","Error","_temp","getVisible","newsUrl","newsFeedURL","Promise","resolve","setURL","reject","clearNewsPanelChanges","_clearNewsPanelChanges","newsPanel","newsUrlInput","get","setEnabled","setSelected","clearKeyUserChanges","addMessageStrip","_addMessageStrip","keyUserNewsPanelToolbarId","keyUserNewsPanelToolbar","height","messageStripWrapper","width","messageStripId","messsageStrip","showIcon","visible","addItem","addContent","handleSelectCustomNewsFeed","_handleSelectCustomNewsFeed","oEvent","getSource","getSelected","newsPageContainer","getParent","layout","addKeyUserChanges","selectorControl","oldNewsFeedUrl","oldShowCustomNewsFeed","oldCustomNewsFeedKey","showCustomNewsFeed","customNewsFeedKey","publish","changes","removeUrlMesageStrip","disable","date","Date","addCustomNewsFeedCheckBox","_addCustomNewsFeedCheckBox","customNewsFeedCheckBoxId","customNewsFeedCheckBox","text","selected","select","bind","addStyleClass","onNewsUrlChange","_onNewsUrlChange","getParameter","keyUserContent","validUrl","getValidURL","_showMessageStrip","bShow","type","textKey","setType","setText","_getValidURL","urlString","url","URL","href","_removeUrlMesageStrip","onUrlLiveChange","_onUrlLiveChange","sNewValue","_getMessageStrip","addNewsURLSimpleForm","_addNewsURLSimpleForm","newsFeedURLSimpleFormId","newsFeedURLSimpleForm","newsFeedURLInputId","newsFeedURLInput","value","InputType","Url","liveChange","enabled","handleFileChange","_handleFileChange","setNewsFeedEnabled","_setNewsFeedEnabled","bEnabled","newsFeedUploadBtn","_getNewsFeedUploadBtn","customNewsUploadFileUploaderButtonId","handleFileUploadError","_handleFileUploadError","iMaxFileSize","getMaximumFileSize","handleFileDialogClose","_handleFileDialogClose","event","fileName","handleNewsFeedFileUpload","_handleNewsFeedFileUpload","_this2","errorMsg","all","getUploadedFile","getServiceAsync","response","fileData","userInfo","userId","payload","changeId","now","toString","attachment","documentType","Post","oResponse","message","includes","customKey","show","oErr","_getUploadedFile","file","oFileUpload","files","reader","FileReader","onload","fileContent","base64String","window","btoa","encodeURIComponent","replace","match","p1","fromCharCode","parseInt","readAsText","readAsDataURL","_getFileUploader","customNewsUploadFileUploader","addCustomNewsUploadSimpleForm","_addCustomNewsUploadSimpleForm","customNewsUploadSimpleFormId","customNewsUploadSimpleForm","customNewsUploadVBox","customNewsUploadFileUploaderControl","name","tooltip","fileType","maximumFileSize","fileSizeExceed","sameFilenameAllowed","afterDialogClose","customNewsUploadFileUploaderButton","press","_loadSettings","removeAllItems"],"sources":["KeyUserNewsSettingsPanel.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport Button from \"sap/m/Button\";\nimport CheckBox, { CheckBox$SelectEvent } from \"sap/m/CheckBox\";\nimport Input, { Input$LiveChangeEvent } from \"sap/m/Input\";\nimport { InputBase$ChangeEvent } from \"sap/m/InputBase\";\nimport Label from \"sap/m/Label\";\nimport MessageBox from \"sap/m/MessageBox\";\nimport MessageStrip from \"sap/m/MessageStrip\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport Toolbar from \"sap/m/Toolbar\";\nimport VBox from \"sap/m/VBox\";\nimport Library from \"sap/m/library\";\nimport Event from \"sap/ui/base/Event\";\nimport Control from \"sap/ui/core/Control\";\nimport type { MetadataOptions } from \"sap/ui/core/Element\";\nimport EventBus from \"sap/ui/core/EventBus\";\nimport MessageType from \"sap/ui/core/message/MessageType\";\nimport SimpleForm from \"sap/ui/layout/form/SimpleForm\";\nimport FileUploader, { FileUploader$ChangeEvent, FileUploader$FileSizeExceedEvent } from \"sap/ui/unified/FileUploader\";\nimport Container from \"sap/ushell/Container\";\nimport UserInfo from \"sap/ushell/services/UserInfo\";\nimport BaseLayout from \"./BaseLayout\";\nimport BaseSettingsPanel from \"./BaseSettingsPanel\";\nimport NewsAndPagesContainer from \"./NewsAndPagesContainer\";\nimport NewsPanel, { FileFormat } from \"./NewsPanel\";\nimport { CHANGE_TYPES } from \"./flexibility/Layout.flexibility\";\nimport { INewsPersData } from \"./interface/KeyUserInterface\";\nimport { KEYUSER_SETTINGS_PANELS_KEYS } from \"./utils/Constants\";\nimport HttpHelper from \"./utils/HttpHelper\";\n\nconst Constants = {\n\tNEWS_FEED_POST_API: \"/sap/opu/odata4/ui2/insights_srv/srvd/ui2/\" + \"insights_repo_srv/0001/\" + \"NEWS_FEED\"\n};\n\ninterface ShowError {\n\tshowError: boolean;\n\tdate: Date;\n}\n\ninterface UploadedFilePayload {\n\tchangeId: string;\n\tattachment: string | PromiseLike<string>;\n\tdocumentType?: string; // Optional\n}\n\ninterface FileMetaData {\n\ttype: string;\n\tcontent: string | PromiseLike<string>;\n}\n\n/**\n *\n * Class for News Settings Panel for KeyUser Settings Dialog.\n *\n * @extends BaseSettingsPanel\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.121\n *\n * @internal\n * @experimental Since 1.121\n * @private\n *\n * @alias sap.cux.home.KeyUserNewsSettingsPanel\n */\nexport default class KeyUserNewsSettingsPanel extends BaseSettingsPanel {\n\tstatic readonly metadata: MetadataOptions = {\n\t\tlibrary: \"sap.cux.home\"\n\t};\n\n\tprivate controlMap!: Map<string, Control | Element>;\n\tprivate _eventBus!: EventBus;\n\tprivate customNewsVisibility!: boolean;\n\tprivate validChanges!: boolean;\n\n\t/**\n\t * Init lifecycle method\n\t *\n\t * @public\n\t * @override\n\t */\n\tpublic init(): void {\n\t\tsuper.init();\n\t\tthis.controlMap = new Map();\n\n\t\t//setup panel\n\t\tthis.setProperty(\"key\", KEYUSER_SETTINGS_PANELS_KEYS.NEWS);\n\t\tthis.setProperty(\"title\", this._i18nBundle.getText(\"editNewsFeed\"));\n\n\t\t// //setup layout content\n\t\tthis.addAggregation(\"content\", this.getContent());\n\n\t\t// fired every time on panel navigation\n\t\tthis.attachPanelNavigated(() => this.loadSettings());\n\n\t\tthis._eventBus = EventBus.getInstance();\n\t\tthis._eventBus.subscribe(\n\t\t\t\"KeyUserChanges\",\n\t\t\t\"newsFeedLoadFailed\",\n\t\t\t(channelId?: string, eventId?: string, data?: object) => {\n\t\t\t\t//errorstate is false when import is successful\n\t\t\t\tif ((data as unknown as ShowError)?.showError) {\n\t\t\t\t\tthis.showMessageStrip(true, MessageType.Warning, \"invalidNewsUrl\");\n\t\t\t\t\tthis.validChanges = false;\n\t\t\t\t} else {\n\t\t\t\t\tthis.getMessageStrip().setVisible(false);\n\t\t\t\t\tthis.validChanges = true;\n\t\t\t\t}\n\t\t\t},\n\t\t\tthis\n\t\t);\n\t}\n\n\tprivate getCurrentKeyUserChange(): INewsPersData {\n\t\tconst keyUserChanges = this.getKeyUserChanges();\n\t\tconst existingChange = keyUserChanges.find((change) => {\n\t\t\treturn change.changeSpecificData.changeType === CHANGE_TYPES.NEWS_FEED_URL;\n\t\t});\n\t\treturn existingChange?.changeSpecificData.content as INewsPersData;\n\t}\n\n\t/**\n\t * Returns the content for the KeyUser news Settings Panel.\n\t *\n\t * @private\n\t * @returns {VBox} The control containing the KeyUser news Settings Panel content.\n\t */\n\tprivate getContent(): VBox {\n\t\tconst wrapperVBoxId = `${this.getId()}-wrapperVBox`;\n\t\tconst wrapperVBox = new VBox(wrapperVBoxId);\n\t\tthis.controlMap.set(wrapperVBoxId, wrapperVBox);\n\n\t\treturn wrapperVBox;\n\t}\n\n\tpublic async isValidChanges(newsVisible: boolean) {\n\t\tthis.validChanges = true;\n\t\tconst fileUploader = this.getFileUploader();\n\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\tconst showCustom =\n\t\t\tthis.customNewsVisibility === undefined ? Boolean(this._getPanel().getProperty(\"showCustom\")) : this.customNewsVisibility;\n\t\tif (this.getNewsFeedUploadBtn().getEnabled()) {\n\t\t\tif (showCustom) {\n\t\t\t\tMessageBox.error(String(this._i18nBundle.getText(\"newsFeedSaveUploadChanges\")));\n\t\t\t\tthis.validChanges = false;\n\t\t\t} else {\n\t\t\t\tif (fileUploader) {\n\t\t\t\t\tfileUploader.setValue(\n\t\t\t\t\t\tkeyUserChangeContent.customNewsFeedFileName || String(this._getPanel().getProperty(\"customFileName\"))\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (showCustom && fileUploader.getValue() === \"\" && newsVisible) {\n\t\t\tthis.showMessageStrip(true, MessageType.Error, \"noNewsFileError\");\n\t\t\tthis.validChanges = false;\n\t\t} else if (!showCustom && newsVisible && !this.getMessageStrip().getVisible()) {\n\t\t\tconst newsUrl = keyUserChangeContent.newsFeedURL;\n\t\t\tawait (this._getPanel() as NewsPanel).setURL(String(newsUrl));\n\t\t}\n\t\treturn this.validChanges;\n\t}\n\n\tpublic clearNewsPanelChanges() {\n\t\tconst newsPanel = this._getPanel();\n\t\tthis.getMessageStrip().setVisible(false);\n\t\tconst newsUrlInput = this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input;\n\t\tnewsUrlInput.setValue(String(newsPanel.getProperty(\"url\")));\n\t\tthis.customNewsVisibility = Boolean(newsPanel.getProperty(\"showCustom\"));\n\t\t(this.controlMap.get(`${this.getId()}-customNewsUploadFileUploader`) as FileUploader).setEnabled(this.customNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setEnabled(!this.customNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-customNewsFeedCheckBox`) as CheckBox).setSelected(this.customNewsVisibility);\n\t\tthis.getFileUploader().setValue(String(newsPanel.getProperty(\"customFileName\")));\n\t\tthis.clearKeyUserChanges();\n\t}\n\n\tprivate addMessageStrip(wrapperVBox: VBox): void {\n\t\tconst keyUserNewsPanelToolbarId = `${this.getId()}-keyUserNewsPanelToolbar`;\n\t\tif (!this.controlMap.get(keyUserNewsPanelToolbarId)) {\n\t\t\tconst keyUserNewsPanelToolbar = new Toolbar(keyUserNewsPanelToolbarId, { height: \"auto\" });\n\t\t\tconst messageStripWrapper = new VBox(`${this.getId()}-messageStripWrapper`, { width: \"100%\" });\n\t\t\tconst messageStripId = `${this.getId()}-messageStrip`;\n\t\t\tconst messsageStrip = new MessageStrip(messageStripId, {\n\t\t\t\tshowIcon: true,\n\t\t\t\tvisible: false\n\t\t\t});\n\t\t\tthis.controlMap.set(messageStripId, messsageStrip);\n\t\t\tmessageStripWrapper.addItem(messsageStrip);\n\t\t\tkeyUserNewsPanelToolbar.addContent(messageStripWrapper);\n\t\t\tthis.controlMap.set(keyUserNewsPanelToolbarId, keyUserNewsPanelToolbar);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(keyUserNewsPanelToolbarId) as Toolbar);\n\t}\n\n\tprivate handleSelectCustomNewsFeed(oEvent: CheckBox$SelectEvent): void {\n\t\tthis.customNewsVisibility = oEvent.getSource().getSelected();\n\n\t\t(this.controlMap.get(`${this.getId()}-customNewsUploadFileUploader`) as FileUploader).setEnabled(this.customNewsVisibility);\n\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setEnabled(!this.customNewsVisibility);\n\n\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\tif (!keyUserChangeContent) {\n\t\t\tthis.addKeyUserChanges({\n\t\t\t\tselectorControl: layout,\n\t\t\t\tchangeSpecificData: {\n\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\toldShowCustomNewsFeed: Boolean(this._getPanel().getProperty(\"showCustom\")),\n\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\tnewsFeedURL: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\tshowCustomNewsFeed: this.customNewsVisibility,\n\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\"))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t} else if (keyUserChangeContent.showCustomNewsFeed !== this.customNewsVisibility) {\n\t\t\tkeyUserChangeContent.showCustomNewsFeed = this.customNewsVisibility;\n\t\t}\n\t\tthis.removeUrlMesageStrip();\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t}\n\n\t/**\n\t * Add CheckBox for Custom News Feed.\n\t *\n\t * @private\n\t */\n\tprivate addCustomNewsFeedCheckBox(wrapperVBox: VBox): void {\n\t\tconst customNewsFeedCheckBoxId = `${this.getId()}-customNewsFeedCheckBox`;\n\t\tif (!this.controlMap.get(customNewsFeedCheckBoxId)) {\n\t\t\tconst customNewsFeedCheckBox = new CheckBox(`${this.getId()}-customNewsFeedCheckBox`, {\n\t\t\t\ttext: this._i18nBundle.getText(\"selectCustomNewsFeed\"),\n\t\t\t\tselected: Boolean(this._getPanel().getProperty(\"showCustom\")),\n\t\t\t\tselect: this.handleSelectCustomNewsFeed.bind(this)\n\t\t\t}).addStyleClass(\"sapUiTinyMargin\");\n\t\t\tthis.controlMap.set(customNewsFeedCheckBoxId, customNewsFeedCheckBox);\n\t\t} else if (!this.getCurrentKeyUserChange()) {\n\t\t\t(this.controlMap.get(`${this.getId()}-customNewsFeedCheckBox`) as CheckBox).setSelected(\n\t\t\t\tBoolean(this._getPanel().getProperty(\"showCustom\"))\n\t\t\t);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(customNewsFeedCheckBoxId) as CheckBox);\n\t}\n\n\tprivate onNewsUrlChange(oEvent: InputBase$ChangeEvent): void {\n\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\tlet newsUrl = oEvent.getParameter(\"value\");\n\t\tconst keyUserContent = this.getCurrentKeyUserChange();\n\t\tconst validUrl = this.getValidURL(String(newsUrl));\n\t\tif (!validUrl) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tnewsUrl = validUrl;\n\t\t}\n\t\tif (!keyUserContent) {\n\t\t\tthis.addKeyUserChanges({\n\t\t\t\tselectorControl: layout,\n\t\t\t\tchangeSpecificData: {\n\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\toldShowCustomNewsFeed: Boolean(this._getPanel().getProperty(\"showCustom\")),\n\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\tnewsFeedURL: newsUrl,\n\t\t\t\t\t\tshowCustomNewsFeed: false,\n\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\"))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t} else if (keyUserContent.newsFeedURL !== newsUrl) {\n\t\t\tkeyUserContent.newsFeedURL = newsUrl;\n\t\t\tkeyUserContent.showCustomNewsFeed = false;\n\t\t}\n\t}\n\n\tprivate showMessageStrip(bShow: boolean, type: MessageType, textKey: string): void {\n\t\tthis.getMessageStrip().setType(type);\n\t\tthis.getMessageStrip().setVisible(bShow);\n\t\tthis.getMessageStrip().setText(String(this._i18nBundle.getText(textKey)));\n\t\tif (type === MessageType.Error) {\n\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: bShow, date: new Date() });\n\t\t}\n\t}\n\n\tprivate getValidURL(urlString: string): string {\n\t\ttry {\n\t\t\tconst url = new URL(urlString);\n\t\t\treturn url.href;\n\t\t} catch {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\tpublic removeUrlMesageStrip() {\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t\tthis.getMessageStrip().setVisible(false);\n\t\tconst newsUrlInput = this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input;\n\t\tif (!this.getValidURL(newsUrlInput.getValue())) {\n\t\t\tnewsUrlInput.setValue(\"\");\n\t\t}\n\t}\n\n\tprivate onUrlLiveChange(oEvent: Input$LiveChangeEvent) {\n\t\tconst sNewValue = oEvent.getParameter(\"value\") || \"\";\n\t\tthis.showMessageStrip(!this.getValidURL(sNewValue), MessageType.Error, \"invalidNewsUrl\");\n\t}\n\n\tprivate getMessageStrip(): MessageStrip {\n\t\tconst messageStripId = `${this.getId()}-messageStrip`;\n\t\treturn this.controlMap.get(messageStripId) as MessageStrip;\n\t}\n\n\t/**\n\t * Add SimpleForm for News URL.\n\t *\n\t * @private\n\t */\n\tprivate addNewsURLSimpleForm(wrapperVBox: VBox): void {\n\t\tconst newsFeedURLSimpleFormId = `${this.getId()}-newsFeedURLSimpleForm`;\n\t\tif (!this.controlMap.get(newsFeedURLSimpleFormId)) {\n\t\t\tconst newsFeedURLSimpleForm = new SimpleForm(`${this.getId()}-newsFeedURLSimpleForm`, {\n\t\t\t\tcontent: [\n\t\t\t\t\tnew Label(`${this.getId()}-newsFeedURLLabel`, {\n\t\t\t\t\t\ttext: this._i18nBundle.getText(\"editNewsURL\")\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}).addStyleClass(\"sapContrastPlus\");\n\t\t\tconst newsFeedURLInputId = `${this.getId()}-newsFeedURLInput`;\n\t\t\tconst newsFeedURLInput = new Input(newsFeedURLInputId, {\n\t\t\t\tvalue: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\ttype: Library.InputType.Url,\n\t\t\t\tchange: this.onNewsUrlChange.bind(this),\n\t\t\t\tliveChange: this.onUrlLiveChange.bind(this),\n\t\t\t\tenabled: !this._getPanel().getProperty(\"showCustom\")\n\t\t\t});\n\t\t\tthis.controlMap.set(newsFeedURLInputId, newsFeedURLInput);\n\t\t\tnewsFeedURLSimpleForm.addContent(newsFeedURLInput);\n\t\t\tthis.controlMap.set(newsFeedURLSimpleFormId, newsFeedURLSimpleForm);\n\t\t} else if (this.getCurrentKeyUserChange()) {\n\t\t\t(this.controlMap.get(`${this.getId()}-newsFeedURLInput`) as Input).setValue(String(this._getPanel().getProperty(\"url\")));\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(newsFeedURLSimpleFormId) as SimpleForm);\n\t}\n\n\tprivate handleFileChange(oEvent: FileUploader$ChangeEvent): void {\n\t\tconst fileUploader = oEvent.getSource();\n\t\tthis.getMessageStrip().setVisible(false);\n\t\tthis._eventBus.publish(\"KeyUserChanges\", \"disabledSaveBtn\", { disable: false, date: new Date() });\n\t\tthis.setNewsFeedEnabled(fileUploader.getValue() !== \"\");\n\t}\n\n\tprivate setNewsFeedEnabled(bEnabled: boolean): void {\n\t\tconst newsFeedUploadBtn = this.getNewsFeedUploadBtn();\n\t\tif (newsFeedUploadBtn) {\n\t\t\tnewsFeedUploadBtn.setEnabled(bEnabled);\n\t\t}\n\t}\n\n\tprivate getNewsFeedUploadBtn(): Button {\n\t\tconst customNewsUploadFileUploaderButtonId = `${this.getId()}-customNewsUploadFileUploaderButton`;\n\t\treturn this.controlMap.get(customNewsUploadFileUploaderButtonId) as Button;\n\t}\n\n\tprivate handleFileUploadError(oEvent: FileUploader$FileSizeExceedEvent): void {\n\t\tconst fileUploader = oEvent.getSource();\n\t\tconst iMaxFileSize = fileUploader.getMaximumFileSize();\n\t\tthis.setNewsFeedEnabled(false);\n\t\tMessageBox.error(String(this._i18nBundle.getText(\"newsFeedMaxFileSizeError\", [iMaxFileSize])));\n\t}\n\n\thandleFileDialogClose(event: Event): void {\n\t\tconst fileUploader = event.getSource<FileUploader>();\n\t\tlet fileName = fileUploader.getValue();\n\t\t// if file selection dialog is closed and no file is selected, set value as last uploaded file\n\n\t\tif (fileName === \"\") {\n\t\t\tfileName = this.getCurrentKeyUserChange()?.customNewsFeedFileName || String(this._getPanel().getProperty(\"customFileName\"));\n\t\t\tthis.setNewsFeedEnabled(false);\n\t\t}\n\t\tfileUploader.setValue(fileName);\n\t}\n\n\tprivate async handleNewsFeedFileUpload(): Promise<void> {\n\t\tlet errorMsg = this._i18nBundle.getText(\"newsFeedFileUploadError\");\n\t\ttry {\n\t\t\tconst response = await Promise.all([this.getUploadedFile(), Container.getServiceAsync<UserInfo>(\"UserInfo\")]);\n\t\t\tconst fileData = response[0];\n\t\t\tconst userInfo = response[1];\n\t\t\tconst userId = userInfo && userInfo.getId();\n\t\t\tconst payload: UploadedFilePayload = { changeId: userId + \"_\" + Date.now().toString(), attachment: fileData.content };\n\n\t\t\t//pass documentType if file is in csv format\n\t\t\t//if documentType is not passed by default document type is considered as excel.\n\t\t\tif (fileData.type) {\n\t\t\t\tpayload.documentType = fileData.type;\n\t\t\t}\n\t\t\tconst oResponse = await HttpHelper.Post(Constants.NEWS_FEED_POST_API, payload);\n\t\t\tconst keyUserChangeContent = this.getCurrentKeyUserChange();\n\t\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\t\tconst newsPageContainer = newsPanel.getParent() as NewsAndPagesContainer;\n\t\t\tconst layout = newsPageContainer.getParent() as BaseLayout;\n\t\t\tif (oResponse && (oResponse as { error: { message: string } }).error) {\n\t\t\t\tthis.getFileUploader().setValue(\"\");\n\t\t\t\tif (keyUserChangeContent) {\n\t\t\t\t\tkeyUserChangeContent.customNewsFeedFileName = \"\";\n\t\t\t\t} else {\n\t\t\t\t\tthis.addKeyUserChanges({\n\t\t\t\t\t\tselectorControl: layout,\n\t\t\t\t\t\tchangeSpecificData: {\n\t\t\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\t\t\toldShowCustomNewsFeed: Boolean(this._getPanel().getProperty(\"showCustom\")),\n\t\t\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\t\t\tnewsFeedURL: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\t\t\tshowCustomNewsFeed: true,\n\t\t\t\t\t\t\t\tcustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\t\t\tcustomNewsFeedFileName: String(this._getPanel().getProperty(\"customFileName\"))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\terrorMsg = (oResponse as { error: { message: string } }).error.message.includes(\"NODATA\")\n\t\t\t\t\t? this._i18nBundle.getText(\"newsFeedEmptyFileError\")\n\t\t\t\t\t: errorMsg;\n\t\t\t\tthrow new Error(errorMsg);\n\t\t\t}\n\t\t\tconst customKey = (oResponse as { changeId: string }).changeId;\n\t\t\tif (keyUserChangeContent) {\n\t\t\t\tkeyUserChangeContent.customNewsFeedKey = customKey;\n\t\t\t\tkeyUserChangeContent.customNewsFeedFileName = this.getFileUploader().getValue();\n\t\t\t} else {\n\t\t\t\tthis.addKeyUserChanges({\n\t\t\t\t\tselectorControl: layout,\n\t\t\t\t\tchangeSpecificData: {\n\t\t\t\t\t\tchangeType: CHANGE_TYPES.NEWS_FEED_URL,\n\t\t\t\t\t\tcontent: {\n\t\t\t\t\t\t\toldNewsFeedUrl: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\t\toldShowCustomNewsFeed: Boolean(this._getPanel().getProperty(\"showCustom\")),\n\t\t\t\t\t\t\toldCustomNewsFeedKey: String(this._getPanel().getProperty(\"customFeedKey\")),\n\t\t\t\t\t\t\tnewsFeedURL: String(this._getPanel().getProperty(\"url\")),\n\t\t\t\t\t\t\tshowCustomNewsFeed: true,\n\t\t\t\t\t\t\tcustomNewsFeedKey: customKey,\n\t\t\t\t\t\t\tcustomNewsFeedFileName: this.getFileUploader().getValue()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis._eventBus.publish(\"KeyUserChanges\", \"addNewsPagesChanges\", { changes: this.getKeyUserChanges() });\n\t\t\t}\n\t\t\tMessageToast.show(String(this._i18nBundle.getText(\"customNewsFeedUploaded\")));\n\t\t\tthis.setNewsFeedEnabled(false);\n\t\t} catch (oErr) {\n\t\t\tMessageBox.error((oErr as { message: string }).message);\n\t\t\tthis.setNewsFeedEnabled(false);\n\t\t}\n\t}\n\n\tprivate getUploadedFile(): Promise<FileMetaData> {\n\t\treturn new Promise<FileMetaData>((resolve, reject) => {\n\t\t\tconst fileUploader = this.getFileUploader();\n\t\t\tlet errorMsg = this._i18nBundle.getText(\"newsFeedFileUploadError\");\n\t\t\tif (fileUploader && !fileUploader.getValue()) {\n\t\t\t\terrorMsg = this._i18nBundle.getText(\"noNewsFileError\");\n\t\t\t\treject(new Error(errorMsg));\n\t\t\t}\n\n\t\t\tconst file = fileUploader.oFileUpload.files[0];\n\t\t\tconst reader = new FileReader();\n\n\t\t\treader.onload = function () {\n\t\t\t\ttry {\n\t\t\t\t\tconst fileContent = reader.result as string;\n\t\t\t\t\tlet base64String;\n\t\t\t\t\tconst fileData: FileMetaData = { type: \"\", content: \"\" };\n\t\t\t\t\tif (file.type === \"text/csv\") {\n\t\t\t\t\t\tbase64String = window.btoa(\n\t\t\t\t\t\t\tencodeURIComponent(String(fileContent)).replace(/%([0-9A-F]{2})/g, function (match, p1: string) {\n\t\t\t\t\t\t\t\treturn String.fromCharCode(parseInt(p1, 16));\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tfileData.type = \"CSV\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbase64String = fileContent.replace(\"data:\", \"\").replace(/^.+,/, \"\");\n\t\t\t\t\t}\n\t\t\t\t\tfileData.content = base64String;\n\t\t\t\t\tresolve(fileData);\n\t\t\t\t} catch {\n\t\t\t\t\treject(new Error(errorMsg));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (file.type === \"text/csv\") {\n\t\t\t\treader.readAsText(file);\n\t\t\t} else {\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate getFileUploader(): FileUploader {\n\t\tconst customNewsUploadFileUploader = `${this.getId()}-customNewsUploadFileUploader`;\n\t\treturn this.controlMap.get(customNewsUploadFileUploader) as FileUploader;\n\t}\n\n\t/**\n\t * Add SimpleForm for Custom News Upload Form.\n\t *\n\t * @private\n\t */\n\tprivate addCustomNewsUploadSimpleForm(wrapperVBox: VBox): void {\n\t\tconst customNewsUploadSimpleFormId = `${this.getId()}-customNewsUploadSimpleForm`;\n\t\tif (!this.controlMap.get(customNewsUploadSimpleFormId)) {\n\t\t\tconst customNewsUploadSimpleForm = new SimpleForm(`${this.getId()}-customNewsUploadSimpleForm`, {\n\t\t\t\tcontent: [\n\t\t\t\t\tnew Label(`${this.getId()}-customNewsUploadLabel`, {\n\t\t\t\t\t\ttext: this._i18nBundle.getText(\"customNewsFeed\")\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}).addStyleClass(\"sapContrastPlus\");\n\t\t\tconst customNewsUploadVBox = new VBox(`${this.getId()}-customNewsUploadVBox`);\n\t\t\tconst customNewsUploadFileUploader = `${this.getId()}-customNewsUploadFileUploader`;\n\t\t\tconst newsPanel = this._getPanel() as NewsPanel;\n\t\t\tconst customNewsUploadFileUploaderControl = new FileUploader(customNewsUploadFileUploader, {\n\t\t\t\tname: \"newsFeedFileUploader\",\n\t\t\t\ttooltip: this._i18nBundle.getText(\"uploadNewsFeedFile\"),\n\t\t\t\tfileType: newsPanel?.getProperty(\"supportedFileFormats\") as FileFormat[],\n\t\t\t\twidth: \"100%\",\n\t\t\t\tchange: this.handleFileChange.bind(this),\n\t\t\t\tmaximumFileSize: 25,\n\t\t\t\tfileSizeExceed: this.handleFileUploadError.bind(this),\n\t\t\t\tsameFilenameAllowed: true,\n\t\t\t\tafterDialogClose: this.handleFileDialogClose.bind(this),\n\t\t\t\tvalue: String(this._getPanel().getProperty(\"customFileName\")),\n\t\t\t\tenabled: this._getPanel().getProperty(\"showCustom\") as boolean\n\t\t\t});\n\t\t\tthis.controlMap.set(customNewsUploadFileUploader, customNewsUploadFileUploaderControl);\n\t\t\tconst customNewsUploadFileUploaderButtonId = `${this.getId()}-customNewsUploadFileUploaderButton`;\n\t\t\tconst customNewsUploadFileUploaderButton = new Button(customNewsUploadFileUploaderButtonId, {\n\t\t\t\ttext: this._i18nBundle.getText(\"uploadNewsFeedBtn\"),\n\t\t\t\tpress: this.handleNewsFeedFileUpload.bind(this),\n\t\t\t\ttype: \"Emphasized\",\n\t\t\t\tenabled: false\n\t\t\t});\n\t\t\tthis.controlMap.set(customNewsUploadFileUploaderButtonId, customNewsUploadFileUploaderButton);\n\t\t\tcustomNewsUploadVBox.addItem(customNewsUploadFileUploaderControl);\n\t\t\tcustomNewsUploadVBox.addItem(customNewsUploadFileUploaderButton);\n\t\t\tcustomNewsUploadSimpleForm.addContent(customNewsUploadVBox);\n\t\t\tthis.controlMap.set(customNewsUploadSimpleFormId, customNewsUploadSimpleForm);\n\t\t}\n\t\twrapperVBox.addItem(this.controlMap.get(customNewsUploadSimpleFormId) as SimpleForm);\n\t}\n\n\t/**\n\t * Load settings for the panel.\n\t *\n\t * @private\n\t */\n\tprivate loadSettings(): void {\n\t\tconst wrapperVBoxId = `${this.getId()}-wrapperVBox`;\n\t\tconst wrapperVBox = this.controlMap.get(wrapperVBoxId) as VBox;\n\t\twrapperVBox.removeAllItems();\n\t\tthis.addMessageStrip(wrapperVBox);\n\t\tthis.addCustomNewsFeedCheckBox(wrapperVBox);\n\t\tthis.addNewsURLSimpleForm(wrapperVBox);\n\t\tthis.addCustomNewsUploadSimpleForm(wrapperVBox);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}