{"version":3,"file":"AppsAdditionPanel-dbg-dbg.js","names":["sap","ui","define","Log","Button","CustomListItem","ExpandableText","FlexBox","GenericTile","HBox","Label","sap_m_library","MessageToast","Text","VBox","Fragment","JSONModel","ResourceModel","Container","__AppsContainer","__BaseSettingsPanel","__FavAppPanel","__AppManager","___utils_Constants","_interopRequireDefault","obj","__esModule","default","_catch","body","recover","result","e","then","ButtonType","_finallyRethrows","finalizer","bind","AppsContainer","_iteratorSymbol","Symbol","iterator","_settle","pact","state","value","s","_Pact","v","o","observer","prototype","onFulfilled","onRejected","callback","_this","_isSettledPact","thenable","_forTo","array","check","i","reject","_cycle","length","BaseSettingsPanel","_forOf","target","step","next","done","return","_fixup","TypeError","values","push","FavAppPanel","AppManager","AI_APP_FINDER_API","AI_APP_FINDER_BASE_URL","CONTENT_ADDITION_PANEL_TYPES","FEATURE_TOGGLES","Constants","DeprecatedInfoText","MinQueryLength","MaxDescriptionLength","SearchStatus","ErrorType","TileType","AppsAdditionPanel","extend","constructor","apply","arguments","appManagerInstance","getInstance","init","_init","BaseSettingsPanel.prototype.init.call","userSelectedApps","Set","setProperty","AI_APP_FINDER","_i18nBundle","getText","_setupActions","_setupContent","attachEvent","resetPanel","addAppsButton","getId","text","type","Emphasized","press","onPressAddApps","bindProperty","parts","formatter","hasError","searchStatus","Complete","addActionButton","Promise","resolve","getServiceAsync","_Container$getService","vizInstantiationService","load","id","name","controller","_Fragment$load","panelContent","addAggregation","model","query","errorType","DefaultError","errorDescription","Idle","loadingAnimation","_generateSearchingAnimation","suggestedAppsCount","suggestedApps","setModel","bundleName","appSuggestionList","byId","bindAggregation","path","factory","_generateListItem","context","listItem","selected","getProperty","content","renderType","wrap","direction","alignItems","items","_getAppPreviewContainer","_getAppDetailsContainer","addStyleClass","getMultiSelectControl","setEnabled","container","addItem","mode","frameType","header","subheader","tileIcon","visible","instance","instantiateVisualization","setActive","setClickable","gap","showColon","maxCharacters","_generateStatusTexts","isSupported","_isSupported","_this2","_temp5","isPanelSupported","removeActionButton","contentAdditionDialog","getParent","removePanel","updateActionButtons","_temp4","undefined","_temp3","getFavAppPanel","_temp2","isFeatureEnabled","AI_SMART_APPFINDER","_temp","navigationService","isNavigationSupported","semanticObject","action","_ref","supported","error","message","_resetPanel","defaultModelProperties","setData","getData","clear","onPressGo","_onPressGo","event","_this3","getParameter","isValidQuery","_temp7","Searching","removeSelections","fetchAppsFromSearch","rawApps","_temp6","fetchAllAvailableVisualizations","allVisualizations","fetchFavVizs","favoriteApps","fetchInsightApps","insightsApps","apps","_generateApps","_filterUnsupportedApps","err","_handleError","_wasThrown","_result","intents","map","app","vizData","supportedAppIndices","filter","_","index","homePageVisualizations","find","viz","vizId","chipID","addedToHomePage","some","visualization","title","subTitle","description","appDescription","icon","iconUrl","isStaticApp","tileType","Static","status","getAppStatusTexts","configuration","_isValidQuery","Boolean","trim","_fetchAllAvailableVisualizations","_this4","_temp9","allAvailableVisualizations","_temp8","searchableContentService","getApps","enableVisualizationPreview","allAvailableApps","reduce","visualizations","currentApp","concat","_fetchCSRFToken","fetch","method","headers","response","get","_fetchAppsFromSearch","_this5","token","JSON","stringify","UserInput","_exit","_temp12","_result2","json","_response$json2","queryResult","_temp11","ok","_response$json","errorResponse","_temp10","_getAppStatusTexts","statusTexts","parsedConfig","parse","tileConfig","tileConfiguration","infoText","display_info_text","toLowerCase","warning","stausTexts","applyStatusClass","_applyStatusClass","_onPressAddApps","_this6","_temp14","refreshFavoriteApps","close","show","vizIds","item","getBindingContext","_temp13","addVisualization","getAppsContainer","_getAppsContainer","layout","getContent","_getFavAppPanel","panel","_refreshFavoriteApps","_this7","refreshPanel","onListSelectionChange","_onListSelectionChange","delete","add","Array","from","errorCode","match","_getErrorType","ServiceError","NoResultsFound","ValidationError"],"sources":["AppsAdditionPanel.ts"],"sourcesContent":["/*!\n * SAP UI development toolkit for HTML5 (SAPUI5)\n *  * (c) Copyright 2009-2025 SAP SE. All rights reserved\n */\n\nimport Log from \"sap/base/Log\";\nimport Button from \"sap/m/Button\";\nimport CustomListItem from \"sap/m/CustomListItem\";\nimport ExpandableText from \"sap/m/ExpandableText\";\nimport FlexBox from \"sap/m/FlexBox\";\nimport GenericTile from \"sap/m/GenericTile\";\nimport HBox from \"sap/m/HBox\";\nimport Label from \"sap/m/Label\";\nimport { ButtonType } from \"sap/m/library\";\nimport List from \"sap/m/List\";\nimport { ListBase$SelectionChangeEvent } from \"sap/m/ListBase\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport { SearchField$SearchEvent } from \"sap/m/SearchField\";\nimport Text from \"sap/m/Text\";\nimport VBox from \"sap/m/VBox\";\nimport Control from \"sap/ui/core/Control\";\nimport Fragment from \"sap/ui/core/Fragment\";\nimport Context from \"sap/ui/model/Context\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\nimport Container from \"sap/ushell/Container\";\nimport Navigation, { Target } from \"sap/ushell/services/Navigation\";\nimport SearchableContent, { AppData } from \"sap/ushell/services/SearchableContent\";\nimport VisualizationInstantiation from \"sap/ushell/services/VisualizationInstantiation\";\nimport AppsContainer from \"./AppsContainer\";\nimport BaseLayout from \"./BaseLayout\";\nimport BaseSettingsPanel from \"./BaseSettingsPanel\";\nimport ContentAdditionDialog from \"./ContentAdditionDialog\";\nimport FavAppPanel from \"./FavAppPanel\";\nimport { ICustomVisualization, ICustomVizInstance, IVisualization } from \"./interface/AppsInterface\";\nimport AppManager from \"./utils/AppManager\";\nimport { AI_APP_FINDER_API, AI_APP_FINDER_BASE_URL, CONTENT_ADDITION_PANEL_TYPES, FEATURE_TOGGLES } from \"./utils/Constants\";\n\nconst Constants = {\n\tDeprecatedInfoText: \"deprecated\",\n\tMinQueryLength: 5,\n\tMaxDescriptionLength: 400\n};\n\nenum SearchStatus {\n\tIdle = \"idle\",\n\tSearching = \"searching\",\n\tComplete = \"complete\"\n}\n\nenum ErrorType {\n\tNoResultsFound = \"noResultsFound\",\n\tServiceError = \"serviceError\",\n\tValidationError = \"validationError\",\n\tDefaultError = \"defaultError\"\n}\n\nenum TileType {\n\tStatic = \"STATIC\"\n}\n\ninterface RawAppData {\n\ttitle: string;\n\tsubTitle: string;\n\tappDescription: string;\n\tchipID: string;\n\ttileType: TileType;\n\ticonUrl: string;\n\tconfiguration: string;\n}\ninterface SuggestedApp {\n\ticon: string;\n\ttitle: string;\n\tchipID: string;\n\tstatus: string[];\n\tsubTitle: string;\n\tdescription: string;\n\tisStaticApp: boolean;\n\taddedToHomePage: boolean;\n\tvizData?: IVisualization;\n}\n\ninterface QueryResponse {\n\tvalue: RawAppData[];\n}\n\ninterface ErrorResponse {\n\terror: {\n\t\tcode: string;\n\t\tmessage: string;\n\t};\n}\n\ninterface Configuration {\n\ttileConfiguration: string;\n}\n\ninterface TileConfig {\n\tdisplay_info_text: string;\n\t[key: string]: string;\n}\n\n/**\n *\n * Class for Apps Addition Panel in MyHome.\n *\n * @extends BaseSettingsPanel\n *\n * @author SAP SE\n * @version 0.0.1\n * @since 1.136\n *\n * @internal\n * @experimental Since 1.136\n * @private\n *\n * @alias sap.cux.home.AppsAdditionPanel\n */\nexport default class AppsAdditionPanel extends BaseSettingsPanel {\n\tprivate appManagerInstance: AppManager = AppManager.getInstance();\n\tprivate vizInstantiationService!: VisualizationInstantiation;\n\tprivate allAvailableVisualizations!: IVisualization[];\n\tprivate userSelectedApps!: Set<CustomListItem>;\n\tprivate appSuggestionList!: List;\n\tprivate model!: JSONModel;\n\tprivate addAppsButton!: Button;\n\tprivate isPanelSupported!: boolean;\n\n\t/**\n\t * Init lifecycle method\n\t *\n\t * @public\n\t * @override\n\t */\n\tpublic init(): void {\n\t\tsuper.init();\n\t\tthis.userSelectedApps = new Set<CustomListItem>();\n\n\t\t//setup panel\n\t\tthis.setProperty(\"key\", CONTENT_ADDITION_PANEL_TYPES.AI_APP_FINDER);\n\t\tthis.setProperty(\"title\", this._i18nBundle.getText(\"addAppsAndTile\"));\n\n\t\t//setup actions\n\t\tthis._setupActions();\n\n\t\t//setup content\n\t\tvoid this._setupContent();\n\n\t\t//setup events\n\t\tthis.attachEvent(\"onDialogClose\", this.resetPanel.bind(this));\n\t}\n\n\t/**\n\t * Sets up the actions for the Apps Addition Panel.\n\t *\n\t * @private\n\t */\n\tprivate _setupActions(): void {\n\t\tthis.addAppsButton = new Button(`${this.getId()}-add-app-btn`, {\n\t\t\ttext: this._i18nBundle.getText(\"addFromInsightsDialogBtn\"),\n\t\t\ttype: ButtonType.Emphasized,\n\t\t\tpress: () => {\n\t\t\t\tvoid this.onPressAddApps();\n\t\t\t}\n\t\t});\n\n\t\tthis.addAppsButton.bindProperty(\"enabled\", {\n\t\t\tparts: [\"/hasError\", \"/searchStatus\", \"/userSelectedApps\"],\n\t\t\tformatter: (hasError: boolean, searchStatus: SearchStatus, userSelectedApps: string[]) => {\n\t\t\t\treturn !hasError && searchStatus === SearchStatus.Complete && userSelectedApps.length > 0;\n\t\t\t}\n\t\t});\n\n\t\tthis.addActionButton(this.addAppsButton);\n\t}\n\n\t/**\n\t * Sets up the content for the Apps Addition Panel.\n\t *\n\t * @private\n\t * @async\n\t */\n\tprivate async _setupContent(): Promise<void> {\n\t\tthis.vizInstantiationService = await Container.getServiceAsync<VisualizationInstantiation>(\"VisualizationInstantiation\");\n\n\t\t//load ui fragment\n\t\tconst panelContent = (await Fragment.load({\n\t\t\tid: `${this.getId()}-content`,\n\t\t\tname: \"sap.cux.home.utils.fragment.appsAdditionContent\",\n\t\t\tcontroller: this\n\t\t})) as Control;\n\t\tthis.addAggregation(\"content\", panelContent);\n\n\t\t//initialize ui model\n\t\tthis.model = new JSONModel({\n\t\t\tquery: \"\",\n\t\t\thasError: false,\n\t\t\terrorType: ErrorType.DefaultError,\n\t\t\terrorDescription: \"\",\n\t\t\tsearchStatus: SearchStatus.Idle,\n\t\t\tloadingAnimation: this._generateSearchingAnimation(),\n\t\t\tsuggestedAppsCount: 0,\n\t\t\tuserSelectedApps: [],\n\t\t\tsuggestedApps: []\n\t\t});\n\n\t\tpanelContent.setModel(this.model);\n\t\tpanelContent.setModel(new ResourceModel({ bundleName: \"sap.cux.home.i18n.messagebundle\" }), \"i18n\");\n\t\tthis.addAppsButton.setModel(this.model);\n\n\t\t//bind suggested apps list\n\t\tthis.appSuggestionList = Fragment.byId(`${this.getId()}-content`, \"appsList\") as List;\n\t\tthis.appSuggestionList.bindAggregation(\"items\", {\n\t\t\tpath: \"/suggestedApps\",\n\t\t\tfactory: this._generateListItem.bind(this)\n\t\t});\n\t}\n\n\t/**\n\t * Generates a list item for the Apps Addition Panel.\n\t *\n\t * @private\n\t * @param {string} id - The unique ID for the list item.\n\t * @param {Context} context - The binding context for the list item.\n\t * @returns {CustomListItem} The generated list item control.\n\t */\n\tprivate _generateListItem(id: string, context: Context): CustomListItem {\n\t\tconst listItem = new CustomListItem(id, {\n\t\t\tselected: context.getProperty(\"addedToHomePage\") as boolean,\n\t\t\tcontent: [\n\t\t\t\tnew FlexBox(`${id}-result-container`, {\n\t\t\t\t\trenderType: \"Bare\",\n\t\t\t\t\twrap: \"Wrap\",\n\t\t\t\t\tdirection: context.getProperty(\"isStaticApp\") ? \"Column\" : \"Row\",\n\t\t\t\t\talignItems: context.getProperty(\"isStaticApp\") ? \"Start\" : \"Center\",\n\t\t\t\t\titems: [this._getAppPreviewContainer(id, context), this._getAppDetailsContainer(id, context)]\n\t\t\t\t}).addStyleClass(\"sapUiSmallMargin\")\n\t\t\t]\n\t\t});\n\n\t\t//bind associated checkbox to disable it when the app is already added to home page\n\t\tlistItem.getMultiSelectControl(true).setEnabled(!context.getProperty(\"addedToHomePage\"));\n\n\t\treturn listItem;\n\t}\n\n\t/**\n\t * Creates a preview container for the suggested app.\n\t *\n\t * @private\n\t * @param {string} id - The unique ID for the container.\n\t * @param {Context} context - The binding context for the app.\n\t * @returns {HBox} The app preview container.\n\t */\n\tprivate _getAppPreviewContainer(id: string, context: Context): HBox {\n\t\tconst container = new HBox(`${id}-suggestedAppContainer`, {\n\t\t\trenderType: \"Bare\"\n\t\t});\n\n\t\tif (context.getProperty(\"isStaticApp\") as boolean) {\n\t\t\t// create generic tile for static app\n\t\t\tcontainer.addItem(\n\t\t\t\tnew GenericTile(`${id}-staticApp`, {\n\t\t\t\t\tmode: \"IconMode\",\n\t\t\t\t\tframeType: \"TwoByHalf\",\n\t\t\t\t\theader: context.getProperty(\"title\") as string,\n\t\t\t\t\tsubheader: context.getProperty(\"subTitle\") as string,\n\t\t\t\t\ttileIcon: context.getProperty(\"icon\") as string,\n\t\t\t\t\tvisible: context.getProperty(\"isStaticApp\") as boolean\n\t\t\t\t}).addStyleClass(\"suggestedTile\")\n\t\t\t);\n\t\t} else {\n\t\t\t// create custom visualization for other apps\n\t\t\tconst instance = this.vizInstantiationService.instantiateVisualization(\n\t\t\t\tcontext.getProperty(\"vizData\") as ICustomVisualization\n\t\t\t) as ICustomVizInstance;\n\t\t\tinstance?.setActive(true);\n\t\t\tinstance.setClickable(false);\n\t\t\tcontainer.addItem(instance);\n\t\t}\n\n\t\treturn container;\n\t}\n\n\t/**\n\t * Creates a details container for the suggested app.\n\t *\n\t * @private\n\t * @param {string} id - The unique ID for the container.\n\t * @param {Context} context - The binding context for the app.\n\t * @returns {VBox} The app details container.\n\t */\n\tprivate _getAppDetailsContainer(id: string, context: Context): VBox {\n\t\treturn new VBox(`${id}-app-details-container`, {\n\t\t\trenderType: \"Bare\",\n\t\t\tgap: \"0.5rem\",\n\t\t\titems: [\n\t\t\t\tnew Label(`${id}-descriptionLabel`, {\n\t\t\t\t\ttext: this._i18nBundle.getText(\"appDescription\"),\n\t\t\t\t\tshowColon: true\n\t\t\t\t}),\n\t\t\t\tnew ExpandableText(`${id}-description`, {\n\t\t\t\t\ttext: context.getProperty(\"description\") as string,\n\t\t\t\t\tmaxCharacters: Constants.MaxDescriptionLength\n\t\t\t\t}),\n\t\t\t\tnew HBox(`${id}-app-status-container`, {\n\t\t\t\t\trenderType: \"Bare\",\n\t\t\t\t\tvisible: (context.getProperty(\"status\") as string[]).length > 0,\n\t\t\t\t\titems: [\n\t\t\t\t\t\tnew Label(`${id}-appStatusLabel`, {\n\t\t\t\t\t\t\ttext: this._i18nBundle.getText(\"appStatus\"),\n\t\t\t\t\t\t\tshowColon: true\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnew HBox(`${id}-app-status-texts`, {\n\t\t\t\t\t\t\trenderType: \"Bare\",\n\t\t\t\t\t\t\titems: this._generateStatusTexts(context.getProperty(\"status\") as string[])\n\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginBegin statusTextsContainer\")\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t]\n\t\t}).addStyleClass((context.getProperty(\"isStaticApp\") as boolean) ? \"sapUiSmallMarginTop\" : \"sapUiSmallMarginBegin\");\n\t}\n\n\t/**\n\t * Checks if the Apps Addition Panel is supported. Internally, it checks if the\n\t * AI Smart App Finder feature toggle is enabled and if the associated application\n\t * is accessible for the user.\n\t *\n\t * @public\n\t * @override\n\t * @async\n\t * @returns {Promise<boolean>} A promise that resolves to a boolean indicating support.\n\t */\n\tpublic async isSupported(): Promise<boolean> {\n\t\tif (this.isPanelSupported === undefined) {\n\t\t\tthis.isPanelSupported = false;\n\n\t\t\tif (this.getFavAppPanel()) {\n\t\t\t\ttry {\n\t\t\t\t\tconst isFeatureEnabled = await this.appManagerInstance.isFeatureEnabled(FEATURE_TOGGLES.AI_SMART_APPFINDER);\n\t\t\t\t\tif (isFeatureEnabled) {\n\t\t\t\t\t\tconst navigationService = await Container.getServiceAsync<Navigation>(\"Navigation\");\n\t\t\t\t\t\tconst [{ supported }] = await navigationService.isNavigationSupported([\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttarget: {\n\t\t\t\t\t\t\t\t\tsemanticObject: \"IntelligentPrompt\",\n\t\t\t\t\t\t\t\t\taction: \"propose\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]);\n\n\t\t\t\t\t\tthis.isPanelSupported = supported;\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tLog.error((error as Error).message);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//remove panel if it's not supported\n\t\tif (!this.isPanelSupported) {\n\t\t\tthis.removeActionButton(this.addAppsButton);\n\t\t\tconst contentAdditionDialog = this.getParent() as ContentAdditionDialog;\n\t\t\tcontentAdditionDialog.removePanel(this);\n\t\t\tcontentAdditionDialog.updateActionButtons();\n\t\t}\n\n\t\treturn this.isPanelSupported;\n\t}\n\n\t/**\n\t * Generates the searching animation SVG as a string.\n\t *\n\t * @private\n\t * @returns {string} The SVG string for the loading animation.\n\t */\n\tprivate _generateSearchingAnimation(): string {\n\t\treturn `<svg height=\"210\" fill=\"none\">\n            <g>\n                <rect height=\"210\" rx=\"4\" fill=\"white\"/>\n                <rect x=\"16\" y=\"143\" width=\"90%\" height=\"8\" rx=\"4\" fill=\"var(--sapContent_Placeholderloading_Background)\"/>\n                <rect x=\"16\" y=\"103\" width=\"84%\" height=\"32\" rx=\"4\" fill=\"var(--sapContent_Placeholderloading_Background)\"/>\n                <rect x=\"16\" y=\"33\" width=\"90%\" height=\"8\" rx=\"4\" fill=\"var(--sapContent_Placeholderloading_Background)\"/>\n                <rect x=\"16\" y=\"16\" width=\"96%\" height=\"12\" rx=\"4\" fill=\"var(--sapContent_Placeholderloading_Background)\"/>\n            </g>\n        </svg>`;\n\t}\n\n\t/**\n\t * Resets the panel to its default state.\n\t *\n\t * @private\n\t */\n\tpublic resetPanel(): void {\n\t\tconst defaultModelProperties = {\n\t\t\tquery: \"\",\n\t\t\thasError: false,\n\t\t\tsearchStatus: SearchStatus.Idle,\n\t\t\tsuggestedAppsCount: 0,\n\t\t\tuserSelectedApps: [],\n\t\t\tsuggestedApps: []\n\t\t};\n\n\t\tthis.model.setData({ ...this.model.getData(), ...defaultModelProperties } as object);\n\t\tthis.userSelectedApps.clear();\n\t}\n\n\t/**\n\t * Handles the \"Go\" button press event for searching suggested apps.\n\t *\n\t * @private\n\t * @async\n\t * @param {SearchField$SearchEvent} event - The search event triggered by the user.\n\t */\n\tpublic async onPressGo(event: SearchField$SearchEvent): Promise<void> {\n\t\t// reset panel if clear button is pressed\n\t\tif (event.getParameter(\"clearButtonPressed\")) {\n\t\t\tthis.resetPanel();\n\t\t\treturn;\n\t\t}\n\n\t\t// validate query\n\t\tconst query = this.model.getProperty(\"/query\") as string;\n\t\tif (!this.isValidQuery(query)) return;\n\n\t\ttry {\n\t\t\t// initiate search\n\t\t\tthis.model.setProperty(\"/hasError\", false);\n\t\t\tthis.model.setProperty(\"/searchStatus\", SearchStatus.Searching);\n\t\t\tthis.appSuggestionList.removeSelections(true);\n\n\t\t\tconst rawApps = await this.fetchAppsFromSearch(query);\n\t\t\t// suggest apps if there are results and search is not cancelled\n\t\t\tif (rawApps.length > 0 && this.model.getProperty(\"/searchStatus\") === SearchStatus.Searching) {\n\t\t\t\tconst allVisualizations = await this.fetchAllAvailableVisualizations();\n\t\t\t\tconst favoriteApps = await this.appManagerInstance.fetchFavVizs(true, true);\n\t\t\t\tconst insightsApps = await this.appManagerInstance.fetchInsightApps(true, this._i18nBundle.getText(\"insights\") as string);\n\n\t\t\t\t// generate suggested apps\n\t\t\t\tconst apps = this._generateApps(rawApps, allVisualizations, [...favoriteApps, ...insightsApps]);\n\t\t\t\tconst suggestedApps = await this._filterUnsupportedApps(apps);\n\n\t\t\t\t// update model with filtered apps\n\t\t\t\tthis.model.setProperty(\"/suggestedApps\", suggestedApps);\n\t\t\t\tthis.model.setProperty(\"/suggestedAppsCount\", suggestedApps.length);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tLog.error((err as Error).message);\n\t\t\tthis._handleError();\n\t\t} finally {\n\t\t\t// update search status only if search is not cancelled\n\t\t\tif (this.model.getProperty(\"/searchStatus\") === SearchStatus.Searching) {\n\t\t\t\tthis.model.setProperty(\"/searchStatus\", SearchStatus.Complete);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Filters out unsupported apps based on accessibility.\n\t *\n\t * @private\n\t * @param {SuggestedApp[]} apps - The list of suggested apps to filter.\n\t * @returns {Promise<SuggestedApp[]>} A promise that resolves to the filtered list of supported apps.\n\t */\n\tprivate async _filterUnsupportedApps(apps: SuggestedApp[]): Promise<SuggestedApp[]> {\n\t\tconst intents = apps.map((app) => app.vizData?.target) || [];\n\t\tconst navigationService = await Container.getServiceAsync<Navigation>(\"Navigation\");\n\t\tconst supportedAppIndices = await navigationService.isNavigationSupported(intents as Target[]);\n\n\t\treturn apps.filter((_, index) => supportedAppIndices[index]);\n\t}\n\n\t/**\n\t * Generates suggested apps from raw app data and visualizations.\n\t *\n\t * @private\n\t * @param {RawAppData[]} rawApps - The raw app data to process.\n\t * @param {IVisualization[]} allVisualizations - All available visualizations.\n\t * @param {ICustomVisualization[]} homePageVisualizations - Visualizations available in homepage.\n\t * @returns {SuggestedApp[]} The list of suggested apps.\n\t */\n\tprivate _generateApps(\n\t\trawApps: RawAppData[],\n\t\tallVisualizations: IVisualization[],\n\t\thomePageVisualizations: ICustomVisualization[]\n\t): SuggestedApp[] {\n\t\treturn rawApps.map((app) => {\n\t\t\tconst vizData = allVisualizations.find((viz) => viz.vizId === app.chipID);\n\t\t\tconst addedToHomePage = homePageVisualizations.some((viz) => viz.visualization?.vizId === app.chipID);\n\t\t\treturn {\n\t\t\t\ttitle: app.title,\n\t\t\t\tchipID: app.chipID,\n\t\t\t\tsubTitle: app.subTitle,\n\t\t\t\tdescription: app.appDescription,\n\t\t\t\ticon: app.iconUrl,\n\t\t\t\tvizData,\n\t\t\t\taddedToHomePage,\n\t\t\t\tisStaticApp: app.tileType === TileType.Static,\n\t\t\t\tstatus: this.getAppStatusTexts(app.configuration, addedToHomePage)\n\t\t\t};\n\t\t}) as SuggestedApp[];\n\t}\n\n\t/**\n\t * Validates the query string based on minimum length.\n\t *\n\t * @private\n\t * @param {string} query - The query string to validate.\n\t * @returns {boolean} True if the query is valid, otherwise false.\n\t */\n\tprivate isValidQuery(query: string): boolean {\n\t\treturn Boolean(query?.trim() && query.trim().length >= Constants.MinQueryLength);\n\t}\n\n\t/**\n\t * Fetches all available visualizations for the user.\n\t *\n\t * @private\n\t * @async\n\t * @returns {Promise<IVisualization[]>} A promise that resolves to the list of visualizations.\n\t */\n\tprivate async fetchAllAvailableVisualizations(): Promise<IVisualization[]> {\n\t\tif (!this.allAvailableVisualizations) {\n\t\t\tconst searchableContentService = await Container.getServiceAsync<SearchableContent>(\"SearchableContent\");\n\t\t\tconst allAvailableApps = await searchableContentService.getApps({ enableVisualizationPreview: false });\n\t\t\tthis.allAvailableVisualizations = allAvailableApps.reduce((visualizations: IVisualization[], currentApp: AppData) => {\n\t\t\t\treturn visualizations.concat(currentApp.visualizations);\n\t\t\t}, []);\n\t\t}\n\n\t\treturn this.allAvailableVisualizations;\n\t}\n\n\t/**\n\t * Fetches a CSRF token for secure API requests.\n\t *\n\t * @private\n\t * @async\n\t * @returns {Promise<string | null>} A promise that resolves to the CSRF token or null if fetching fails.\n\t */\n\tprivate async _fetchCSRFToken(): Promise<string | null> {\n\t\ttry {\n\t\t\tconst response = await fetch(AI_APP_FINDER_BASE_URL, { method: \"GET\", headers: { \"X-CSRF-Token\": \"Fetch\" } });\n\t\t\treturn response.headers.get(\"X-CSRF-Token\");\n\t\t} catch (error) {\n\t\t\tLog.error(\"Failed to fetch CSRF token\", error as Error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Fetches apps from the search API based on the query.\n\t *\n\t * @private\n\t * @async\n\t * @param {string} query - The search query string.\n\t * @returns {Promise<RawAppData[]>} A promise that resolves to the list of raw app data.\n\t */\n\tprivate async fetchAppsFromSearch(query: string): Promise<RawAppData[]> {\n\t\ttry {\n\t\t\tconst token = await this._fetchCSRFToken();\n\t\t\tconst headers = {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t...(token && { \"X-CSRF-Token\": token })\n\t\t\t};\n\n\t\t\tconst response = await fetch(AI_APP_FINDER_API, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders,\n\t\t\t\tbody: JSON.stringify({ UserInput: query })\n\t\t\t});\n\n\t\t\t// handle error responses\n\t\t\tif (!response.ok) {\n\t\t\t\tconst errorResponse = (await response.json()) as ErrorResponse;\n\t\t\t\tthis._handleError(errorResponse.error?.message || \"\");\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst queryResult = (await response.json()) as QueryResponse;\n\t\t\treturn queryResult.value || [];\n\t\t} catch (error) {\n\t\t\tLog.error((error as Error).message);\n\t\t\tthis._handleError();\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves status texts for an app based on its configuration and homepage status.\n\t *\n\t * @private\n\t * @param {string} configuration - The app's configuration string.\n\t * @param {boolean} addedToHomePage - Indicates if the app is already added to the homepage.\n\t * @returns {string[]} An array of status texts for the app.\n\t */\n\tprivate getAppStatusTexts(configuration: string, addedToHomePage: boolean): string[] {\n\t\tlet statusTexts = [];\n\n\t\tif (addedToHomePage) {\n\t\t\tstatusTexts.push(this._i18nBundle.getText(\"alreadyAddedApp\") as string);\n\t\t}\n\t\tif (configuration) {\n\t\t\ttry {\n\t\t\t\tconst parsedConfig = JSON.parse(configuration) as Configuration;\n\t\t\t\tconst tileConfig = JSON.parse(parsedConfig?.tileConfiguration) as TileConfig;\n\t\t\t\tconst infoText = (tileConfig?.display_info_text || \"\").toLowerCase();\n\t\t\t\tif (infoText === Constants.DeprecatedInfoText) {\n\t\t\t\t\tstatusTexts.push(this._i18nBundle.getText(\"deprecatedApp\") as string);\n\t\t\t\t}\n\t\t\t} catch (error: unknown) {\n\t\t\t\tLog.warning((error as Error).message);\n\t\t\t}\n\t\t}\n\n\t\treturn statusTexts;\n\t}\n\n\t/**\n\t * Generates status text controls for the provided status texts.\n\t *\n\t * @private\n\t * @param {string[]} stausTexts - The list of status texts.\n\t * @returns {Text[]} An array of Text controls with applied styles.\n\t */\n\tprivate _generateStatusTexts(stausTexts: string[]): Text[] {\n\t\treturn stausTexts.map((status) => {\n\t\t\treturn new Text({\n\t\t\t\ttext: this._i18nBundle.getText(status)\n\t\t\t}).addStyleClass(this.applyStatusClass(status));\n\t\t});\n\t}\n\n\t/**\n\t * Applies a CSS class to the status text based on its type.\n\t *\n\t * @private\n\t * @param {string} status - The status text to classify.\n\t * @returns {string} The CSS class for the status text.\n\t */\n\tpublic applyStatusClass(status: string): string {\n\t\tif (status === this._i18nBundle.getText(\"alreadyAddedApp\")) {\n\t\t\treturn \"addedAppStatusText\";\n\t\t} else if (status === this._i18nBundle.getText(\"deprecatedApp\")) {\n\t\t\treturn \"deprecatedAppStatusText\";\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\t/**\n\t * Handles the \"Add Apps\" button press event to add selected apps to favorites.\n\t *\n\t * @private\n\t * @async\n\t */\n\tprivate async onPressAddApps(): Promise<void> {\n\t\tconst userSelectedApps = this.model.getProperty(\"/userSelectedApps\") as CustomListItem[];\n\t\tconst vizIds = userSelectedApps.map((item) => item.getBindingContext()?.getProperty(\"chipID\") as string);\n\t\tfor (const vizId of vizIds) {\n\t\t\tawait this.appManagerInstance.addVisualization(vizId);\n\t\t}\n\n\t\t// refresh the favorite apps panel\n\t\tawait this.refreshFavoriteApps();\n\t\t(this.getParent() as ContentAdditionDialog).close();\n\t\tMessageToast.show(this._i18nBundle.getText(\"appAddedToFavorites\") as string);\n\t\tthis.resetPanel();\n\t}\n\n\t/**\n\t * Retrieves the AppsContainer instance from the parent layout.\n\t *\n\t * @private\n\t * @returns {AppsContainer | undefined} The AppsContainer instance or undefined if not found.\n\t */\n\tprivate getAppsContainer(): AppsContainer | undefined {\n\t\tconst layout = this.getParent()?.getParent() as BaseLayout;\n\t\treturn layout.getContent().find((container) => container instanceof AppsContainer) as AppsContainer | undefined;\n\t}\n\n\t/**\n\t * Retrieves the favorite apps panel from the AppsContainer.\n\t *\n\t * @private\n\t * @returns {FavAppPanel | undefined} The favorite apps panel or undefined if not found.\n\t */\n\tprivate getFavAppPanel(): FavAppPanel | undefined {\n\t\treturn this.getAppsContainer()\n\t\t\t?.getContent()\n\t\t\t.find((panel) => panel instanceof FavAppPanel);\n\t}\n\n\t/**\n\t * Refreshes the favorite apps panel in the AppsContainer.\n\t *\n\t * @private\n\t * @async\n\t */\n\tprivate async refreshFavoriteApps(): Promise<void> {\n\t\tawait this.getAppsContainer()?.refreshPanel(this.getFavAppPanel() as FavAppPanel);\n\t}\n\n\t/**\n\t * Handles the selection change event for the suggested apps list.\n\t *\n\t * @public\n\t * @param {ListBase$SelectionChangeEvent} event - The selection change event.\n\t */\n\tpublic onListSelectionChange(event: ListBase$SelectionChangeEvent): void {\n\t\tconst listItem = event.getParameter(\"listItem\") as CustomListItem;\n\t\tconst selected = event.getParameter(\"selected\") as boolean;\n\n\t\tif (!selected) this.userSelectedApps.delete(listItem);\n\t\telse {\n\t\t\tconst context = listItem.getBindingContext();\n\t\t\tconst addedToHomePage = context?.getProperty(\"addedToHomePage\") as boolean;\n\t\t\tif (!addedToHomePage) this.userSelectedApps.add(listItem);\n\t\t}\n\n\t\tthis.model.setProperty(\"/userSelectedApps\", Array.from(this.userSelectedApps));\n\t}\n\n\t/**\n\t * Handles errors by updating the model with error details.\n\t *\n\t * @private\n\t * @param {string} [message=\"\"] - The error message to process.\n\t */\n\tprivate _handleError(message: string = \"\"): void {\n\t\tconst [, errorCode, errorDescription] = message.match(/\\((\\d{2})\\d*\\)\\s*(.*)/) || [];\n\t\tthis.model.setProperty(\"/hasError\", true);\n\t\tthis.model.setProperty(\"/errorType\", this._getErrorType(errorCode));\n\t\tthis.model.setProperty(\"/errorDescription\", errorDescription || \"\");\n\t}\n\n\t/**\n\t * Determines the error type based on the provided error code.\n\t *\n\t * @private\n\t * @param {string} [errorCode=\"\"] - The error code to evaluate.\n\t * @returns {ErrorType} The corresponding error type.\n\t */\n\tprivate _getErrorType(errorCode: string = \"\"): ErrorType {\n\t\tswitch (errorCode) {\n\t\t\tcase \"10\":\n\t\t\t\treturn ErrorType.ServiceError;\n\t\t\tcase \"20\":\n\t\t\tcase \"40\":\n\t\t\t\treturn ErrorType.NoResultsFound;\n\t\t\tcase \"30\":\n\t\t\t\treturn ErrorType.ValidationError;\n\t\t\tdefault:\n\t\t\t\treturn ErrorType.DefaultError;\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}