/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/m/Button","sap/m/FlexBox","sap/m/HBox","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/List","sap/m/Popover","sap/m/StandardListItem","sap/m/Title","sap/m/library","sap/ui/core/Control","sap/ui/core/CustomData","sap/ui/core/Element","sap/ui/core/HTML","sap/ui/core/Lib","./BaseContainerRenderer","./BasePanel","./MenuItem","./library","./utils/Accessibility","./utils/Device","./utils/FESRUtil","./utils/PerformanceUtils"],function(e,t,n,i,o,s,r,a,l,c,d,u,g,p,h,m,y,f,_,b,I,S,M){"use strict";function P(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const B=c["BackgroundDesign"];const v=c["ButtonType"];const C=c["PlacementType"];const T=P(m);const E=P(y);const $=P(f);const w=_["OrientationType"];const H=b["getInvisibleText"];const x=I["calculateDeviceType"];const F=I["DeviceType"];const A=S["addFESRId"];const L=S["addFESRSemanticStepName"];const V=S["FESR_EVENTS"];const D=S["getFESRId"];const R=M["recordElementLoadEnd"];const z=M["recordElementLoadStart"];const k=d.extend("sap.cux.home.BaseContainer",{renderer:T,metadata:{library:"sap.cux.home",properties:{title:{type:"string",group:"Data",defaultValue:"",visibility:"hidden"},orientation:{type:"sap.cux.home.OrientationType",group:"Data",defaultValue:w.SideBySide,visibility:"hidden"},selectedKey:{type:"string",group:"Data",defaultValue:"",visibility:"hidden"},width:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"100%",visibility:"public"},height:{type:"sap.ui.core.CSSSize",group:"Appearance",visibility:"public"},blocked:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"},busy:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"},busyIndicatorDelay:{type:"int",defaultValue:1e3,visibility:"hidden"},busyIndicatorSize:{type:"sap.ui.core.BusyIndicatorSize",defaultValue:"Medium",visibility:"hidden"},fieldGroupIds:{type:"string[]",defaultValue:[],visibility:"hidden"},visible:{type:"boolean",group:"Appearance",defaultValue:true,visibility:"hidden"},enableSettings:{type:"boolean",group:"Misc",visibility:"hidden"},enableFullScreen:{type:"boolean",group:"Misc",visibility:"hidden"},fullScreenName:{type:"string",group:"Misc",visibility:"hidden"},enableLazyLoad:{type:"boolean",group:"Misc",defaultValue:true,visibility:"hidden"},loaded:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"}},defaultAggregation:"content",aggregations:{content:{type:"sap.cux.home.BasePanel",singularName:"content",multiple:true,visibility:"public"},actionButtons:{type:"sap.m.Button",multiple:true,singularName:"actionButton",visibility:"public"},menuItems:{type:"sap.cux.home.MenuItem",multiple:true,singularName:"menuItem",visibility:"public"}},associations:{layout:{type:"sap.cux.home.BaseLayout",multiple:false,singularName:"layout",visibility:"hidden"},fullScreenButton:{type:"sap.m.Button",multiple:false,singularName:"fullScreenButton",visibility:"hidden"},fullScreenMenuItem:{type:"sap.cux.home.MenuItem",multiple:false,singularName:"fullScreenMenuItem",visibility:"hidden"}},events:{onExpand:{}},designtime:true},adjustLayout:function e(){},load:function e(){},constructor:function e(t,n){d.prototype.constructor.call(this,t,n);this._exemptedActions=[]},init:function e(){this._controlMap=new Map;this._commonHeaderElementStates=new Map;this._i18nBundle=h.getResourceBundleFor("sap.cux.home.i18n");this._createHeader(this);const t=new u(`${this.getId()}-custom-settings`,{key:"custom-settings",value:{}});this.addCustomData(t)},getCustomSettings:function e(){return this.data("custom-settings")||{}},addCustomSetting:function e(t,n){this.data("custom-settings")[t]=n},_createHeader:function e(t){const i=t.getId();const o=`${i}-header`;const s=t.isA("sap.cux.home.BasePanel");const r=this.getProperty("title")?.trim().length>0;if(!this._controlMap.get(o)){this._controlMap.set(`${i}-header-title`,new l(`${i}-title`));this._controlMap.set(`${i}-header-contentLeft`,new n(`${i}-contentLeft`,{renderType:"Bare"}).addStyleClass("sapCuxSectionContentArea"));this._controlMap.set(`${i}-header-contentRight`,new n(`${i}-contentRight`,{renderType:"Bare"}).addStyleClass("sapCuxSectionContentArea"));this._controlMap.set(`${i}-header-content`,new n(`${i}-header-content`,{width:"100%",justifyContent:"SpaceBetween",renderType:"Bare",items:[this._controlMap.get(`${i}-header-contentLeft`),this._controlMap.get(`${i}-header-contentRight`)]}).addStyleClass("sapUiTinyMarginBegin"));this._controlMap.set(o,new n(`${i}-header`,{alignItems:"Center",items:[this._controlMap.get(`${i}-header-title`),this._controlMap.get(`${i}-header-content`)]}));this.addDependent(this._controlMap.get(o))}this._controlMap.get(o)?.addStyleClass(s&&r?"sapCuxPanelHeader":"sapUiContainerHeader");this._controlMap.get(`${i}-header-title`).setTitleStyle(s&&r?"H6":"H4");return this._controlMap.get(o)},_getHeader:function e(){return this._controlMap.get(`${this.getId()}-header`)},_getInnerControl:function e(){return this.getProperty("orientation")===w.SideBySide?this._iconTabBar:this._wrapper},_onPanelSelect:function e(t){this.setProperty("selectedKey",t.getParameter("selectedKey"),true);this._updateContainerHeader(this)},_setPanelCount:function e(t,n){if(this.getProperty("orientation")===w.SideBySide){this._getIconTabFilter(t).setCount(n)}},_addToPanel:function e(t,n){if(this.getProperty("orientation")===w.SideBySide){this._getIconTabFilter(t)?.addContent(n)}else{this._controlMap.get(`${t.getId()}-wrapper`)?.addItem(n)}},_getIconTabFilter:function e(t){const n=`${t.getId()}-tabFilter`;if(!this._controlMap.get(n)){const e=new o(n,{key:t.getProperty("key"),text:t.getProperty("title"),tooltip:t.getProperty("tooltip")});e.addCustomData(new u(`${t.getId()}--customFilter`,{key:"sap-ui-fastnavgroup",value:"true",writeToDom:true}));this._controlMap.set(n,e);L(e,V.SELECT,t.getProperty("key"))}t._getContent()?.forEach(e=>this._controlMap.get(n).addContent(e));return this._controlMap.get(n)},onBeforeRendering:function e(){if(this.getProperty("selectedKey")===""){const e=this.getContent()?.[0]?.getProperty("key");this.setProperty("selectedKey",e,true)}this._createInnerControl();this._updateContainerHeader(this);this._addAllPanelContent();if(this.getProperty("enableLazyLoad")===false&&!this.getProperty("loaded")){this._loadContent()}this._markPerformanceMetrics()},onAfterRendering:function e(){this._attachResizeHandler();if(this.getProperty("enableLazyLoad")){this._observeContainer()}},_loadContent:function e(){this.setProperty("loaded",true);this.load?.()},_attachResizeHandler:function e(){if(this.getDomRef()&&this.getProperty("loaded")){this._resizeObserver?.disconnect();this._resizeObserver=new ResizeObserver(e=>{if(this._resizeTimeout){clearTimeout(this._resizeTimeout)}this._resizeTimeout=window.setTimeout(()=>{if(this.getVisible()){this._setDeviceType(e);this.adjustLayout()}},10)});this._resizeObserver?.observe(this.getDomRef())}},_detachResizeHandler:function e(){this._resizeObserver?.disconnect()},_observeContainer:function e(){const t=this.getDomRef();if(!this._containerObserver){this._containerObserver=new IntersectionObserver(e=>e.forEach(e=>{if(!this.getProperty("loaded")&&this.getVisible()&&e.isIntersecting){this._loadContent()}}),{rootMargin:"0px",threshold:.1})}this._containerObserver?.disconnect();if(t){this._containerObserver.observe(t)}},_createInnerControl:function e(){const n=this.getProperty("orientation");if(n===w.Horizontal||n===w.Vertical){if(!this._wrapper){this._wrapper=new t(`${this.getId()}-wrapper`,{width:"100%",renderType:"Bare"}).addStyleClass("sapCuxBaseWrapper");this.addDependent(this._wrapper)}this._wrapper.setDirection(n===w.Horizontal?"Row":"Column")}else if(!this._iconTabBar){this._iconTabBar=new i(`${this.getId()}-iconTabBar`,{expandable:true,backgroundDesign:B.Transparent,headerMode:"Inline",headerBackgroundDesign:B.Transparent,select:e=>this._onPanelSelect(e)});this.addDependent(this._iconTabBar)}},_updateContainerHeader:function e(t){const n=this.getProperty("orientation")===w.SideBySide;const i=t.isA("sap.cux.home.BaseContainer");const o=!i&&n?this:t;this._controlMap.get(o.getId()+"-header-contentLeft")?.removeAllItems();this._controlMap.get(o.getId()+"-header-contentRight")?.removeAllItems();this._updateHeader(t)},_updateHeader:function e(t){const n=this.getProperty("orientation")===w.SideBySide;const i=t.isA("sap.cux.home.BaseContainer");const o=this._controlMap.get(t.getId()+"-header-title");o?.setText(t.getProperty("title"));o?.setVisible(t.getProperty("title")?.trim().length>0);if(this._getLayout()){this._addLayoutHeaderElements()}const s=i&&n?this._getSelectedPanel():t;const r=!i&&n?this:t;const a=this._filterVisibleHeaderElements(s?.getMenuItems());if(a.length>0){this._addMenuItems(r,a)}s?.getAggregation("actionButtons")?.forEach(e=>{this._controlMap.get(r.getId()+"-header-contentRight")?.addItem(this._getHeaderButton(e))})},_addLayoutHeaderElements:function e(){const t=e=>{const t=[{property:"enableFullScreen",aggregation:"menuItems",headerElement:this._getFullScreenMenuItem(e)},{property:"enableSettings",aggregation:"menuItems",headerElement:this._getHomeSettingsMenuItem(e)},{property:"enableFullScreen",aggregation:"actionButtons",headerElement:this._getFullScreenButton(e)}];t.forEach(t=>{let{property:n,aggregation:i,headerElement:o}=t;const s=e.getProperty(n);const r=this._commonHeaderElementStates.get(`${o.getId()}-${n}`);if(s!==r){this._commonHeaderElementStates.set(`${o.getId()}-${n}`,s);if(s){e.addAggregation(i,o)}else{e.removeAggregation(i,o)}if(n==="enableFullScreen"){this.setFullScreenElementRelations({isFullScreenEnabled:s,control:e,aggregation:i,headerElement:o})}}})};t(this);const n=this.getContent()||[];n.forEach(t);this._setupFullScreenElements()},_setupFullScreenElements:function e(){const t=this._getLayout();const n=e=>{const n=e.getProperty("enableFullScreen");const i=this._commonHeaderElementStates.get(`${e.getId()}-enableFullScreen`);if(n!==i){this._commonHeaderElementStates.set(`${e.getId()}-enableFullScreen`,n);if(n){t?.registerFullScreenElement(e)}else{t?.deregisterFullScreenElement(e)}}if(n){t?.updateFullScreenElement(e,{index:t?.indexOfItem(this)})}};n(this);const i=this.getContent()||[];i.forEach(n)},setFullScreenElementRelations:function e(t){const{isFullScreenEnabled:n,control:i,aggregation:o,headerElement:s}=t;const r=o==="actionButtons"?"fullScreenButton":"fullScreenMenuItem";if(n){i.setAssociation(r,s,true)}else{i.removeAssociation(r,s,true)}},_getHomeSettingsMenuItem:function e(t){const n=`${t.getId()}-settings`;if(!this._controlMap.get(n)){const e=new $(n,{title:this._i18nBundle.getText("myHomeSettings"),icon:"sap-icon://user-settings",press:()=>{const e=this._getLayout();e?.openSettingsDialog()}});A(e,"myHomeSettings");this._controlMap.set(n,e)}return this._controlMap.get(n)},_getFullScreenMenuItem:function e(t){const n=`${t.getId()}-showMore`;if(!this._controlMap.get(n)){const e=new $(n,{title:this._i18nBundle.getText("expand"),icon:"sap-icon://display-more",press:()=>{const e=this._getLayout();e?.toggleFullScreen(t)}});A(e,"toggleFullScreen");this._controlMap.set(n,e)}return this._controlMap.get(n)},_getFullScreenButton:function t(n){const i=`${n.getId()}-fullScreen`;if(!this._controlMap.get(i)){const t=new e(i,{text:this._i18nBundle.getText("expand"),type:v.Transparent,press:()=>{const e=this._getLayout();e?.toggleFullScreen(n)}});A(t,"toggleFullScreen");this._controlMap.set(i,t);this._exemptedActions.push(i)}return this._controlMap.get(i)},_getSelectedPanel:function e(){const t=this.getContent()?.find(e=>e.getProperty("key")===this.getProperty("selectedKey"))||this.getContent()?.[0];this.setProperty("selectedKey",t?.getProperty("key"),true);return t},_addAllPanelContent:function e(){const t=this.getContent()||[];if(this.getProperty("orientation")===w.SideBySide){this._iconTabBar.removeAllItems();t.forEach(e=>this._iconTabBar.addItem(this._getIconTabFilter(e)));this._iconTabBar.setSelectedKey(this.getProperty("selectedKey"))}else{this._wrapper.removeAllItems();t.forEach(e=>this._wrapper.addItem(this._getPanelContentWrapper(e)))}},_getPanelContentWrapper:function e(n){const i=`${n.getId()}-contentWrapper`;if(!this._controlMap.get(i)){this._controlMap.set(i,new t(i,{width:"100%",direction:"Column",renderType:"Bare"}))}this._controlMap.get(i).addItem(this._updatePanelHeader(n));n._getContent()?.forEach(e=>this._controlMap.get(i).addItem(e));return this._controlMap.get(i)},_updatePanelHeader:function e(t){const n=this._createHeader(t);const i=t.getProperty("title")?.trim().length>0;const o=this.getProperty("title")?.trim().length>0;this._updateContainerHeader(t);n.toggleStyleClass("sapCuxPanelHeader",o&&(i||this._filterVisibleHeaderElements(t.getMenuItems()).length>0||this._filterVisibleHeaderElements(t.getActionButtons()).length>0));return n},_filterVisibleHeaderElements:function e(){let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return t.filter(e=>e.getVisible())},_setTitle:function e(t){this.setProperty("title",t,true);this._controlMap.get(`${this.getId()}-header-title`).setText(t);return this},_addMenuItems:function t(n,i){if(!this._controlMap.get(`${n.getId()}-menu`)){const t=new s(`${n.getId()}-list`,{itemPress:e=>e.getSource().getParent().close()});this._controlMap.set(`${n.getId()}-menu`,t);const i=H(`${n.getId()}-popoverTitle`,this._i18nBundle.getText("actions"));const o=new r(`${n.getId()}-popover`,{placement:C.VerticalPreferredBottom,showHeader:false,ariaLabelledBy:[i?i?.getId():""],content:[t,i]});const a=new e(`${n.getId()}-menu-btn`,{icon:"sap-icon://slim-arrow-down",type:v.Transparent,tooltip:this._i18nBundle.getText("more"),press:e=>o.openBy(e.getSource())});this._controlMap.set(`${n.getId()}-menu-btn`,a)}this._controlMap.get(n.getId()+"-header-contentLeft")?.addItem(this._controlMap.get(`${n.getId()}-menu-btn`));this._controlMap.get(`${n.getId()}-menu`).removeAllItems();i.forEach(e=>this._controlMap.get(`${n.getId()}-menu`).addItem(this._getMenuListItem(e)))},_getHeaderButton:function t(n){const i=`${n.getId()}-btn`;if(!this._controlMap.get(i)){this._controlMap.set(i,new e(i,{type:v.Transparent,press:()=>n.firePress()}));L(this._controlMap.get(i),V.PRESS,D(n))}const o=this._controlMap.get(i);o.setText(n.getText());o.setTooltip(n.getTooltip());o.setIcon(n.getIcon());o.setVisible(n.getVisible());o.setEnabled(n.getEnabled());return o},_getLayout:function e(){return g.getElementById(this.getAssociation("layout",null))},_getMenuListItem:function e(t){if(!this._controlMap.get(`${t.getId()}-listItem`)){this._controlMap.set(`${t.getId()}-listItem`,new a(`${t.getId()}-listItem`,{type:"Active",icon:t.getIcon(),title:t.getTitle(),press:e=>t.firePress({button:e.getSource()})}));L(this._controlMap.get(`${t.getId()}-listItem`),V.PRESS,D(t))}const n=this._controlMap.get(`${t.getId()}-listItem`);n.setIcon(t.getIcon());n.setTitle(t.getTitle());n.setVisible(t.getVisible());return n},toggleMenuListItem:function e(t,n){if(t){const e=this._getMenuListItem(t);e?.setVisible(n);t.setProperty("visible",n,true)}},toggleActionButton:function e(t,n){if(t){const e=this._getHeaderButton(t);e?.setVisible(n);t.setProperty("visible",n,true)}},removeContent:function e(t){if(this.getProperty("selectedKey")&&this.getProperty("selectedKey")===t.getProperty("key")){this.setProperty("selectedKey",undefined,true)}this.removeAggregation("content",t)},getWidth:function e(){return this.getProperty("width")},toggleActionButtons:function e(t){const n=this.getProperty("orientation")===w.SideBySide;let i=false;const o=e=>{e.getActionButtons()?.forEach(e=>{const n=e.getVisible();if(n!==t&&!this._exemptedActions.includes(e.getId())){e.setProperty("visible",t,true);i=true}});if(!n&&i){this._updateContainerHeader(e)}};o(this);const s=this.getContent()||[];s.forEach(o);if(n&&i){this._updateContainerHeader(this)}},toggleFullScreenElements:function e(t,n){const i=g.getElementById(t.getAssociation("fullScreenButton",null));const o=g.getElementById(t.getAssociation("fullScreenMenuItem",null));const s=this.getProperty("orientation")===w.SideBySide;const r=this.getDeviceType()===F.Mobile;const a=t.getParent();let l=false;n=!r?n:false;[i,o].forEach(e=>{if(e&&n!==e.getVisible()){l=true;e.setProperty("visible",n,true)}});const c=t instanceof E&&t.getKey();if(l&&(!s||s&&this.getProperty("selectedKey")===c)){this._updateContainerHeader(a.getContent().length===1&&!s?t.getParent():t)}},_setDeviceType:function e(t){const[n]=t;const i=n.target.parentNode;const o=i.clientWidth;const s=x(o);if(this._deviceType!==s&&o>0){this._deviceType=s}},getDeviceType:function e(){return this._deviceType||x()},_markPerformanceMetrics:function e(){const t=this.getMetadata().getName();z(t);this.getContent()?.forEach(e=>{e.attachEventOnce("loaded",()=>{R(t)})})},getGenericPlaceholder:function e(){const t=this.getGenericPlaceholderContent();if(!t){return undefined}return new p({content:t})},getGenericPlaceholderContent:function e(){return undefined}});return k});
//# sourceMappingURL=BaseContainer.js.map