/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *  * (c) Copyright 2009-2025 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/ui/base/Object","sap/ui/core/Lib","sap/ui/core/routing/HashChanger","sap/ui/fl/write/api/FeaturesAPI","sap/ui/rta/api/startKeyUserAdaptation","sap/ushell/Container","sap/ushell/EventHub"],function(t,e,n,r,a,o,s,i){"use strict";function c(t,e){try{var n=t()}catch(t){return e(t)}if(n&&n.then){return n.then(void 0,e)}return n}class u extends e{constructor(t,e){super();this.component=t;this.i18nBundle=e;i.on("keyUserAdaptationDataChange").do(()=>{const t=this.component?.byId("sectionWrapper")?.getAggregation("adaptationData");if(t){this.adaptationData=t.getValue();if(typeof this.adaptationData==="string"){this.adaptationData=JSON.parse(this.adaptationData);t.setValue(this.adaptationData)}}})}getRTAUserAction(){try{const e=this;return Promise.resolve(c(function(){return Promise.resolve(n.load({name:"sap.ui.fl"})).then(function(){return Promise.resolve(a.isKeyUser()).then(function(t){let n;if(t){n={id:`${e.component?.getId()}-s4MyHomeAdaptUIBtn`,icon:"sap-icon://wrench",text:e.i18nBundle.getText("adaptUIBtn"),tooltip:e.i18nBundle.getText("adaptUIBtn"),press:()=>e.triggerRTA()}}return Promise.resolve(n)})})},function(e){t.error(e instanceof Error?e.message:e)}))}catch(t){return Promise.reject(t)}}triggerRTA(){try{const e=this;const a=c(function(){return Promise.resolve(n.load({name:"sap.ui.fl"})).then(function(){if(e.component){o({rootControl:e.component}).catch(function(){try{return Promise.resolve(s.getServiceAsync("URLParsing")).then(function(t){const e=r.getInstance();const n=t.parseShellHash(e.getHash());const a=n?.params||{};const o="sap-ui-fl-max-layer";const s="CUSTOMER";if(!Object.prototype.hasOwnProperty.call(a,o)){a[o]=s;e.replaceHash(t.constructShellHash(n),"Unknown")}window.location.reload()})}catch(t){return Promise.reject(t)}})}})},function(e){t.error(e instanceof Error?e.message:e)});return Promise.resolve(a&&a.then?a.then(function(){}):void 0)}catch(t){return Promise.reject(t)}}}return u});
//# sourceMappingURL=KeyUserPersonalization-dbg.js.map